(function(){var e=function(){return this}();!e&&"undefined"!=typeof window&&(e=window);0;var t=function(e,n,r){"string"==typeof e?(2==arguments.length&&(r=n),t.modules[e]||(t.payloads[e]=r,t.modules[e]=null)):t.original?t.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace())};t.modules={},t.payloads={};var n=function(e,t,n){if("string"==typeof t){var i=s(e,t);if(null!=i)return n&&n(),i}else if("[object Array]"===Object.prototype.toString.call(t)){for(var o=[],u=0,a=t.length;u<a;++u){var f=s(e,t[u]);if(null==f&&r.original)return;o.push(f)}return n&&n.apply(null,o)||!0}},r=function(e,t){var i=n("",e,t);return null==i&&r.original?r.original.apply(this,arguments):i},i=function(e,t){if(-1!==t.indexOf("!")){var n=t.split("!");return i(e,n[0])+"!"+i(e,n[1])}if("."==t.charAt(0)){t=e.split("/").slice(0,-1).join("/")+"/"+t;for(;-1!==t.indexOf(".")&&s!=t;){var s=t;t=t.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return t},s=function(e,r){r=i(e,r);var s=t.modules[r];if(!s){if("function"==typeof(s=t.payloads[r])){var o={},u={id:r,uri:"",exports:o,packaged:!0};o=s((function(e,t){return n(r,e,t)}),o,u)||u.exports,t.modules[r]=o,delete t.payloads[r]}s=t.modules[r]=o||s}return s};!function(n){var i=e;n&&(e[n]||(e[n]={}),i=e[n]);i.define&&i.define.packaged||(t.original=i.define,i.define=t,i.define.packaged=!0);i.require&&i.require.packaged||(r.original=i.require,i.require=r,i.require.packaged=!0)}("ace")})(),ace.define("ace/lib/regexp",["require","exports","module"],(function(e,t,n){"use strict";function o(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":"")}function u(e,t,n){if(Array.prototype.indexOf)return e.indexOf(t,n);for(var r=n||0;r<e.length;r++)if(e[r]===t)return r;return-1}var r={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},i=void 0===r.exec.call(/()??/,"")[1],s=function(){var e=/^/g;return r.test.call(e,""),!e.lastIndex}();s&&i||(RegExp.prototype.exec=function(e){var n,a,t=r.exec.apply(this,arguments);if("string"==typeof e&&t){!i&&t.length>1&&u(t,"")>-1&&(a=RegExp(this.source,r.replace.call(o(this),"g","")),r.replace.call(e.slice(t.index),a,(function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(t[e]=void 0)})));if(this._xregexp&&this._xregexp.captureNames)for(var f=1;f<t.length;f++)(n=this._xregexp.captureNames[f-1])&&(t[n]=t[f]);!s&&this.global&&!t[0].length&&this.lastIndex>t.index&&this.lastIndex--}return t},s||(RegExp.prototype.test=function(e){var t=r.exec.call(this,e);return t&&this.global&&!t[0].length&&this.lastIndex>t.index&&this.lastIndex--,!!t}))})),ace.define("ace/lib/es5-shim",["require","exports","module"],(function(e,t,n){function r(){}function w(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(t){}}function H(e){return(e=+e)!=e?e=0:0!==e&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}Function.prototype.bind||(Function.prototype.bind=function(t){var n=this;if("function"!=typeof n)throw new TypeError("Function.prototype.bind called on incompatible "+n);var i=u.call(arguments,1),s=function(){if(this instanceof s){var e=n.apply(this,i.concat(u.call(arguments)));return Object(e)===e?e:this}return n.apply(t,i.concat(u.call(arguments)))};return n.prototype&&(r.prototype=n.prototype,s.prototype=new r,r.prototype=null),s});var l,c,h,p,d,i=Function.prototype.call,s=Array.prototype,o=Object.prototype,u=s.slice,a=i.bind(o.toString),f=i.bind(o.hasOwnProperty);(d=f(o,"__defineGetter__"))&&(l=i.bind(o.__defineGetter__),c=i.bind(o.__defineSetter__),h=i.bind(o.__lookupGetter__),p=i.bind(o.__lookupSetter__));if(2!=[1,2].splice(0).length)if(function(){function e(e){var t=new Array(e+2);return t[0]=t[1]=0,t}var n,t=[];t.splice.apply(t,e(20)),t.splice.apply(t,e(26)),n=t.length,t.splice(5,0,"XXX"),t.length;if(n+1==t.length)return!0}()){var v=Array.prototype.splice;Array.prototype.splice=function(e,t){return arguments.length?v.apply(this,[void 0===e?0:e,void 0===t?this.length-e:t].concat(u.call(arguments,2))):[]}}else Array.prototype.splice=function(e,t){var n=this.length;e>0?e>n&&(e=n):null==e?e=0:e<0&&(e=Math.max(n+e,0)),e+t<n||(t=n-e);var r=this.slice(e,e+t),i=u.call(arguments,2),s=i.length;if(e===n)s&&this.push.apply(this,i);else{var o=Math.min(t,n-e),a=e+o,f=a+s-o,l=n-a,c=n-o;if(f<a)for(var h=0;h<l;++h)this[f+h]=this[a+h];else if(f>a)for(h=l;h--;)this[f+h]=this[a+h];if(s&&e===c)this.length=c,this.push.apply(this,i);else{this.length=c+s;for(h=0;h<s;++h)this[e+h]=i[h]}}return r};Array.isArray||(Array.isArray=function(t){return"[object Array]"==a(t)});var m=Object("a"),g="a"!=m[0]||!(0 in m);Array.prototype.forEach||(Array.prototype.forEach=function(t){var n=F(this),r=g&&"[object String]"==a(this)?this.split(""):n,i=arguments[1],s=-1,o=r.length>>>0;if("[object Function]"!=a(t))throw new TypeError;for(;++s<o;)s in r&&t.call(i,r[s],s,n)}),Array.prototype.map||(Array.prototype.map=function(t){var n=F(this),r=g&&"[object String]"==a(this)?this.split(""):n,i=r.length>>>0,s=Array(i),o=arguments[1];if("[object Function]"!=a(t))throw new TypeError(t+" is not a function");for(var u=0;u<i;u++)u in r&&(s[u]=t.call(o,r[u],u,n));return s}),Array.prototype.filter||(Array.prototype.filter=function(t){var o,n=F(this),r=g&&"[object String]"==a(this)?this.split(""):n,i=r.length>>>0,s=[],u=arguments[1];if("[object Function]"!=a(t))throw new TypeError(t+" is not a function");for(var f=0;f<i;f++)f in r&&(o=r[f],t.call(u,o,f,n)&&s.push(o));return s}),Array.prototype.every||(Array.prototype.every=function(t){var n=F(this),r=g&&"[object String]"==a(this)?this.split(""):n,i=r.length>>>0,s=arguments[1];if("[object Function]"!=a(t))throw new TypeError(t+" is not a function");for(var o=0;o<i;o++)if(o in r&&!t.call(s,r[o],o,n))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t){var n=F(this),r=g&&"[object String]"==a(this)?this.split(""):n,i=r.length>>>0,s=arguments[1];if("[object Function]"!=a(t))throw new TypeError(t+" is not a function");for(var o=0;o<i;o++)if(o in r&&t.call(s,r[o],o,n))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var n=F(this),r=g&&"[object String]"==a(this)?this.split(""):n,i=r.length>>>0;if("[object Function]"!=a(t))throw new TypeError(t+" is not a function");if(!i&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var o,s=0;if(arguments.length>=2)o=arguments[1];else for(;;){if(s in r){o=r[s++];break}if(++s>=i)throw new TypeError("reduce of empty array with no initial value")}for(;s<i;s++)s in r&&(o=t.call(void 0,o,r[s],s,n));return o}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var n=F(this),r=g&&"[object String]"==a(this)?this.split(""):n,i=r.length>>>0;if("[object Function]"!=a(t))throw new TypeError(t+" is not a function");if(!i&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var s,o=i-1;if(arguments.length>=2)s=arguments[1];else for(;;){if(o in r){s=r[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}do{o in this&&(s=t.call(void 0,s,r[o],o,n))}while(o--);return s});Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(t){var n=g&&"[object String]"==a(this)?this.split(""):F(this),r=n.length>>>0;if(!r)return-1;var i=0;arguments.length>1&&(i=H(arguments[1])),i=i>=0?i:Math.max(0,r+i);for(;i<r;i++)if(i in n&&n[i]===t)return i;return-1});Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(t){var n=g&&"[object String]"==a(this)?this.split(""):F(this),r=n.length>>>0;if(!r)return-1;var i=r-1;arguments.length>1&&(i=Math.min(i,H(arguments[1]))),i=i>=0?i:r-Math.abs(i);for(;i>=0;i--)if(i in n&&t===n[i])return i;return-1});Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__||(t.constructor?t.constructor.prototype:o)});if(!Object.getOwnPropertyDescriptor){Object.getOwnPropertyDescriptor=function(t,n){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+t);if(f(t,n)){var r;r={enumerable:!0,configurable:!0};if(d){var u=t.__proto__;t.__proto__=o;var i=h(t,n),s=p(t,n);t.__proto__=u;if(i||s)return i&&(r.get=i),s&&(r.set=s),r}return r.value=t[n],r}}}Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(t){return Object.keys(t)});if(!Object.create){var b;b=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var e={};for(var t in e)e[t]=null;return e.constructor=e.hasOwnProperty=e.propertyIsEnumerable=e.isPrototypeOf=e.toLocaleString=e.toString=e.valueOf=e.__proto__=null,e},Object.create=function(t,n){var r;if(null===t)r=b();else{if("object"!=typeof t)throw new TypeError("typeof prototype["+typeof t+"] != 'object'");var i=function(){};i.prototype=t,(r=new i).__proto__=t}return void 0!==n&&Object.defineProperties(r,n),r}}if(Object.defineProperty){var E=w({}),S="undefined"==typeof document||w(document.createElement("div"));if(!E||!S)var x=Object.defineProperty}if(!Object.defineProperty||x){Object.defineProperty=function(t,n,r){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("Object.defineProperty called on non-object: "+t);if("object"!=typeof r&&"function"!=typeof r||null===r)throw new TypeError("Property description must be an object: "+r);if(x)try{return x.call(Object,t,n,r)}catch(i){}if(f(r,"value"))if(d&&(h(t,n)||p(t,n))){var s=t.__proto__;t.__proto__=o,delete t[n],t[n]=r.value,t.__proto__=s}else t[n]=r.value;else{if(!d)throw new TypeError("getters & setters can not be defined on this javascript engine");f(r,"get")&&l(t,n,r.get),f(r,"set")&&c(t,n,r.set)}return t}}Object.defineProperties||(Object.defineProperties=function(t,n){for(var r in n)f(n,r)&&Object.defineProperty(t,r,n[r]);return t}),Object.seal||(Object.seal=function(t){return t}),Object.freeze||(Object.freeze=function(t){return t});try{Object.freeze((function(){}))}catch(k){Object.freeze=function(t){return function(n){return"function"==typeof n?n:t(n)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(t){return t}),Object.isSealed||(Object.isSealed=function(t){return!1}),Object.isFrozen||(Object.isFrozen=function(t){return!1}),Object.isExtensible||(Object.isExtensible=function(t){if(Object(t)===t)throw new TypeError;for(var n="";f(t,n);)n+="?";t[n]=!0;var r=f(t,n);return delete t[n],r});if(!Object.keys){var L=!0,A=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],O=A.length;for(var M in{toString:null})L=!1;Object.keys=function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on a non-object");var I=[];for(var t in e)f(e,t)&&I.push(t);if(L)for(var n=0,r=O;n<r;n++){var i=A[n];f(e,i)&&I.push(i)}return I}}Date.now||(Date.now=function(){return(new Date).getTime()});var _="\t\n\v\f\r Â áš€á Žâ€€â€â€‚â€ƒâ€„â€…â€†â€‡â€ˆâ€‰â€Šâ€¯âŸã€€\u2028\u2029\ufeff";if(!String.prototype.trim||_.trim()){_="["+_+"]";var D=new RegExp("^"+_+_+"*"),P=new RegExp(_+_+"*$");String.prototype.trim=function(){return String(this).replace(D,"").replace(P,"")}}var F=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)}})),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],(function(e,t,n){"use strict";e("./regexp"),e("./es5-shim"),"undefined"!=typeof Element&&!Element.prototype.remove&&Object.defineProperty(Element.prototype,"remove",{enumerable:!1,writable:!0,configurable:!0,value:function(){this.parentNode&&this.parentNode.removeChild(this)}})})),ace.define("ace/lib/useragent",["require","exports","module"],(function(e,t,n){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};var r="object"==typeof navigator?navigator:{},i=(/mac|win|linux/i.exec(r.platform)||["other"])[0].toLowerCase(),s=r.userAgent||"",o=r.appName||"";t.isWin="win"==i,t.isMac="mac"==i,t.isLinux="linux"==i,t.isIE="Microsoft Internet Explorer"==o||o.indexOf("MSAppHost")>=0?parseFloat((s.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((s.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=s.match(/ Gecko\/\d+/),t.isOpera="object"==typeof opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),t.isWebKit=parseFloat(s.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(s.split(" Chrome/")[1])||void 0,t.isEdge=parseFloat(s.split(" Edge/")[1])||void 0,t.isAIR=s.indexOf("AdobeAIR")>=0,t.isIPad=s.indexOf("iPad")>=0,t.isAndroid=s.indexOf("Android")>=0,t.isChromeOS=s.indexOf(" CrOS ")>=0,t.isIOS=/iPad|iPhone|iPod/.test(s)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIPad||t.isAndroid})),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],(function(e,t,n){"use strict";var r=e("./useragent");t.buildDom=function o(e,t,n){if("string"==typeof e&&e){var r=document.createTextNode(e);return t&&t.appendChild(r),r}if(!Array.isArray(e))return e;if("string"!=typeof e[0]||!e[0]){for(var i=[],s=0;s<e.length;s++){var u=o(e[s],t,n);u&&i.push(u)}return i}var a=document.createElement(e[0]),f=e[1],l=1;f&&"object"==typeof f&&!Array.isArray(f)&&(l=2);for(s=l;s<e.length;s++)o(e[s],a,n);return 2==l&&Object.keys(f).forEach((function(e){var t=f[e];"class"===e?a.className=Array.isArray(t)?t.join(" "):t:"function"==typeof t||"value"==e?a[e]=t:"ref"===e?n&&(n[t]=a):null!=t&&a.setAttribute(e,t)})),t&&t.appendChild(a),a},t.getDocumentHead=function(e){return e||(e=document),e.head||e.getElementsByTagName("head")[0]||e.documentElement},t.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||"http://www.w3.org/1999/xhtml",e):document.createElement(e)},t.removeChildren=function(e){e.innerHTML=""},t.createTextNode=function(e,t){return(t?t.ownerDocument:document).createTextNode(e)},t.createFragment=function(e){return(e?e.ownerDocument:document).createDocumentFragment()},t.hasCssClass=function(e,t){return-1!==(e.className+"").split(/\s+/g).indexOf(t)},t.addCssClass=function(e,n){t.hasCssClass(e,n)||(e.className+=" "+n)},t.removeCssClass=function(e,t){for(var n=e.className.split(/\s+/g);;){var r=n.indexOf(t);if(-1==r)break;n.splice(r,1)}e.className=n.join(" ")},t.toggleCssClass=function(e,t){for(var n=e.className.split(/\s+/g),r=!0;;){var i=n.indexOf(t);if(-1==i)break;r=!1,n.splice(i,1)}return r&&n.push(t),e.className=n.join(" "),r},t.setCssClass=function(e,n,r){r?t.addCssClass(e,n):t.removeCssClass(e,n)},t.hasCssString=function(e,t){var r,n=0;if(r=(t=t||document).querySelectorAll("style"))for(;n<r.length;)if(r[n++].id===e)return!0},t.importCssString=function(n,r,i){var s=i;i&&i.getRootNode&&(s=i.getRootNode())&&s!=i||(s=document);var o=s.ownerDocument||s;if(r&&t.hasCssString(r,s))return null;r&&(n+="\n/*# sourceURL=ace/css/"+r+" */");var u=t.createElement("style");u.appendChild(o.createTextNode(n)),r&&(u.id=r),s==o&&(s=t.getDocumentHead(o)),s.insertBefore(u,s.firstChild)},t.importCssStylsheet=function(e,n){t.buildDom(["link",{rel:"stylesheet",href:e}],t.getDocumentHead(n))},t.scrollbarWidth=function(e){var n=t.createElement("ace_inner");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px",n.style.display="block";var r=t.createElement("ace_outer"),i=r.style;i.position="absolute",i.left="-10000px",i.overflow="hidden",i.width="200px",i.minWidth="0px",i.height="150px",i.display="block",r.appendChild(n);var s=e.documentElement;s.appendChild(r);var o=n.offsetWidth;i.overflow="scroll";var u=n.offsetWidth;return o==u&&(u=r.clientWidth),s.removeChild(r),o-u},"undefined"==typeof document&&(t.importCssString=function(){}),t.computedStyle=function(e,t){return window.getComputedStyle(e,"")||{}},t.setStyle=function(e,t,n){e[t]!==n&&(e[t]=n)},t.HAS_CSS_ANIMATION=!1,t.HAS_CSS_TRANSFORMS=!1,t.HI_DPI=!r.isWin||"undefined"!=typeof window&&window.devicePixelRatio>=1.5;if("undefined"!=typeof document){var s=document.createElement("div");t.HI_DPI&&void 0!==s.style.transform&&(t.HAS_CSS_TRANSFORMS=!0),!r.isEdge&&void 0!==s.style.animationName&&(t.HAS_CSS_ANIMATION=!0),s=null}t.HAS_CSS_TRANSFORMS?t.translate=function(e,t,n){e.style.transform="translate("+Math.round(t)+"px, "+Math.round(n)+"px)"}:t.translate=function(e,t,n){e.style.top=Math.round(n)+"px",e.style.left=Math.round(t)+"px"}})),ace.define("ace/lib/oop",["require","exports","module"],(function(e,t,n){"use strict";t.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(e,t){for(var n in t)e[n]=t[n];return e},t.implement=function(e,n){t.mixin(e,n)}})),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],(function(e,t,n){"use strict";var r=e("./oop"),i=function(){var t,n,e={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};for(n in e.FUNCTION_KEYS)t=e.FUNCTION_KEYS[n].toLowerCase(),e[t]=parseInt(n,10);for(n in e.PRINTABLE_KEYS)t=e.PRINTABLE_KEYS[n].toLowerCase(),e[t]=parseInt(n,10);return r.mixin(e,e.MODIFIER_KEYS),r.mixin(e,e.PRINTABLE_KEYS),r.mixin(e,e.FUNCTION_KEYS),e.enter=e.return,e.escape=e.esc,e.del=e.delete,e[173]="-",function(){for(var t=["cmd","ctrl","alt","shift"],n=Math.pow(2,t.length);n--;)e.KEY_MODS[n]=t.filter((function(t){return n&e.KEY_MODS[t]})).join("-")+"-"}(),e.KEY_MODS[0]="",e.KEY_MODS[-1]="input-",e}();r.mixin(t,i),t.keyCodeToString=function(e){var t=i[e];return"string"!=typeof t&&(t=String.fromCharCode(e)),t.toLowerCase()}})),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],(function(e,t,n){"use strict";function a(e,t,n){var a=u(t);if(!i.isMac&&s){t.getModifierState&&(t.getModifierState("OS")||t.getModifierState("Win"))&&(a|=8);if(s.altGr){if(3==(3&a))return;s.altGr=0}if(18===n||17===n){var f="location"in t?t.location:t.keyLocation;if(17===n&&1===f)1==s[n]&&(o=t.timeStamp);else if(18===n&&3===a&&2===f){t.timeStamp-o<50&&(s.altGr=!0)}}}n in r.MODIFIER_KEYS&&(n=-1),8&a&&n>=91&&n<=93&&(n=-1);if(!a&&13===n){if(3===(f="location"in t?t.location:t.keyLocation)){e(t,a,-n);if(t.defaultPrevented)return}}if(i.isChromeOS&&8&a){e(t,a,n);if(t.defaultPrevented)return;a&=-9}return!!(a||n in r.FUNCTION_KEYS||n in r.PRINTABLE_KEYS)&&e(t,a,n)}function f(){s=Object.create(null)}var r=e("./keys"),i=e("./useragent"),s=null,o=0;t.addListener=function(e,t,n){if(e.addEventListener)return e.addEventListener(t,n,!1);if(e.attachEvent){var r=function(){n.call(e,window.event)};n._wrapper=r,e.attachEvent("on"+t,r)}},t.removeListener=function(e,t,n){if(e.removeEventListener)return e.removeEventListener(t,n,!1);e.detachEvent&&e.detachEvent("on"+t,n._wrapper||n)},t.stopEvent=function(e){return t.stopPropagation(e),t.preventDefault(e),!1},t.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},t.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},t.getButton=function(e){return"dblclick"==e.type?0:"contextmenu"==e.type||i.isMac&&e.ctrlKey&&!e.altKey&&!e.shiftKey?2:e.preventDefault?e.button:{1:0,2:2,4:1}[e.button]},t.capture=function(e,n,r){function i(e){n&&n(e),r&&r(e),t.removeListener(document,"mousemove",n,!0),t.removeListener(document,"mouseup",i,!0),t.removeListener(document,"dragstart",i,!0)}return t.addListener(document,"mousemove",n,!0),t.addListener(document,"mouseup",i,!0),t.addListener(document,"dragstart",i,!0),i},t.addMouseWheelListener=function(e,n){"onmousewheel"in e?t.addListener(e,"mousewheel",(function(e){void 0!==e.wheelDeltaX?(e.wheelX=-e.wheelDeltaX/8,e.wheelY=-e.wheelDeltaY/8):(e.wheelX=0,e.wheelY=-e.wheelDelta/8),n(e)})):"onwheel"in e?t.addListener(e,"wheel",(function(e){switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=.35*e.deltaX||0,e.wheelY=.35*e.deltaY||0;break;case e.DOM_DELTA_LINE:case e.DOM_DELTA_PAGE:e.wheelX=5*(e.deltaX||0),e.wheelY=5*(e.deltaY||0)}n(e)})):t.addListener(e,"DOMMouseScroll",(function(e){e.axis&&e.axis==e.HORIZONTAL_AXIS?(e.wheelX=5*(e.detail||0),e.wheelY=0):(e.wheelX=0,e.wheelY=5*(e.detail||0)),n(e)}))},t.addMultiMouseDownListener=function(e,n,r,s){function c(e){0!==t.getButton(e)?o=0:e.detail>1?++o>4&&(o=1):o=1;if(i.isIE){var c=Math.abs(e.clientX-u)>5||Math.abs(e.clientY-a)>5;f&&!c||(o=1);f&&clearTimeout(f),f=setTimeout((function(){f=null}),n[o-1]||600),1==o&&(u=e.clientX,a=e.clientY)}e._clicks=o,r[s]("mousedown",e);if(o>4)o=0;else if(o>1)return r[s](l[o],e)}function h(e){o=2,f&&clearTimeout(f),f=setTimeout((function(){f=null}),n[o-1]||600),r[s]("mousedown",e),r[s](l[o],e)}var u,a,f,o=0,l={2:"dblclick",3:"tripleclick",4:"quadclick"};Array.isArray(e)||(e=[e]),e.forEach((function(e){t.addListener(e,"mousedown",c),i.isOldIE&&t.addListener(e,"dblclick",h)}))};var u=!i.isMac||!i.isOpera||"KeyboardEvent"in window?function(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)}:function(e){return 0|(e.metaKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.ctrlKey?8:0)};t.getModifierString=function(e){return r.KEY_MODS[u(e)]},t.addCommandKeyListener=function(e,n){var r=t.addListener;if(i.isOldGecko||i.isOpera&&!("KeyboardEvent"in window)){var o=null;r(e,"keydown",(function(e){o=e.keyCode})),r(e,"keypress",(function(e){return a(n,e,o)}))}else{var u=null;r(e,"keydown",(function(e){s[e.keyCode]=(s[e.keyCode]||0)+1;var t=a(n,e,e.keyCode);return u=e.defaultPrevented,t})),r(e,"keypress",(function(e){u&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&(t.stopEvent(e),u=null)})),r(e,"keyup",(function(e){s[e.keyCode]=null})),s||(f(),r(window,"focus",f))}};if("object"==typeof window&&window.postMessage&&!i.isOldIE){var l=1;t.nextTick=function(e,n){n=n||window;var r="zero-timeout-message-"+l++,i=function(s){s.data==r&&(t.stopPropagation(s),t.removeListener(n,"message",i),e())};t.addListener(n,"message",i),n.postMessage(r,"*")}}t.$idleBlocked=!1,t.onIdle=function(e,n){return setTimeout((function r(){t.$idleBlocked?setTimeout(r,100):e()}),n)},t.$idleBlockId=null,t.blockIdle=function(e){t.$idleBlockId&&clearTimeout(t.$idleBlockId),t.$idleBlocked=!0,t.$idleBlockId=setTimeout((function(){t.$idleBlocked=!1}),e||100)},t.nextFrame="object"==typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(e){setTimeout(e,17)}})),ace.define("ace/range",["require","exports","module"],(function(e,t,n){"use strict";var i=function(e,t,n,r){this.start={row:e,column:t},this.end={row:n,column:r}};(function(){this.isEqual=function(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(e,t){return 0==this.compare(e,t)},this.compareRange=function(e){var t,n=e.end,r=e.start;return 1==(t=this.compare(n.row,n.column))?1==(t=this.compare(r.row,r.column))?2:0==t?1:0:-1==t?-2:-1==(t=this.compare(r.row,r.column))?-1:1==t?42:0},this.comparePoint=function(e){return this.compare(e.row,e.column)},this.containsRange=function(e){return 0==this.comparePoint(e.start)&&0==this.comparePoint(e.end)},this.intersects=function(e){var t=this.compareRange(e);return-1==t||0==t||1==t},this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t},this.isStart=function(e,t){return this.start.row==e&&this.start.column==t},this.setStart=function(e,t){"object"==typeof e?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)},this.setEnd=function(e,t){"object"==typeof e?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)},this.inside=function(e,t){return 0==this.compare(e,t)&&(!this.isEnd(e,t)&&!this.isStart(e,t))},this.insideStart=function(e,t){return 0==this.compare(e,t)&&!this.isEnd(e,t)},this.insideEnd=function(e,t){return 0==this.compare(e,t)&&!this.isStart(e,t)},this.compare=function(e,t){return this.isMultiLine()||e!==this.start.row?e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row===e?t<=this.end.column?0:1:0:t<this.start.column?-1:t>this.end.column?1:0},this.compareStart=function(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.compareEnd=function(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)},this.compareInside=function(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.clipRows=function(e,t){if(this.end.row>t)var n={row:t+1,column:0};else if(this.end.row<e)n={row:e,column:0};if(this.start.row>t)var r={row:t+1,column:0};else if(this.start.row<e)r={row:e,column:0};return i.fromPoints(r||this.start,n||this.end)},this.extend=function(e,t){var n=this.compare(e,t);if(0==n)return this;if(-1==n)var r={row:e,column:t};else var s={row:e,column:t};return i.fromPoints(r||this.start,s||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return i.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new i(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new i(this.start.row,0,this.end.row,0)},this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start),n=e.documentToScreenPosition(this.end);return new i(t.row,t.column,n.row,n.column)},this.moveBy=function(e,t){this.start.row+=e,this.start.column+=t,this.end.row+=e,this.end.column+=t}}).call(i.prototype),i.fromPoints=function(e,t){return new i(e.row,e.column,t.row,t.column)},i.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},i.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},t.Range=i})),ace.define("ace/lib/lang",["require","exports","module"],(function(e,t,n){"use strict";t.last=function(e){return e[e.length-1]},t.stringReverse=function(e){return e.split("").reverse().join("")},t.stringRepeat=function(e,t){for(var n="";t>0;){1&t&&(n+=e);(t>>=1)&&(e+=e)}return n};var r=/^\s\s*/,i=/\s\s*$/;t.stringTrimLeft=function(e){return e.replace(r,"")},t.stringTrimRight=function(e){return e.replace(i,"")},t.copyObject=function(e){var t={};for(var n in e)t[n]=e[n];return t},t.copyArray=function(e){for(var t=[],n=0,r=e.length;n<r;n++)e[n]&&"object"==typeof e[n]?t[n]=this.copyObject(e[n]):t[n]=e[n];return t},t.deepCopy=function s(e){if("object"!=typeof e||!e)return e;var t;if(Array.isArray(e)){t=[];for(var n=0;n<e.length;n++)t[n]=s(e[n]);return t}if("[object Object]"!==Object.prototype.toString.call(e))return e;t={};for(var n in e)t[n]=s(e[n]);return t},t.arrayToMap=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var n in e)t[n]=e[n];return t},t.arrayRemove=function(e,t){for(var n=0;n<=e.length;n++)t===e[n]&&e.splice(n,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return(""+e).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var n=[];return e.replace(t,(function(e){n.push({offset:arguments[arguments.length-2],length:e.length})})),n},t.deferredCall=function(e){var t=null,n=function(){t=null,e()},r=function(e){return r.cancel(),t=setTimeout(n,e||0),r};return r.schedule=r,r.call=function(){return this.cancel(),e(),r},r.cancel=function(){return clearTimeout(t),t=null,r},r.isPending=function(){return t},r},t.delayedCall=function(e,t){var n=null,r=function(){n=null,e()},i=function(e){null==n&&(n=setTimeout(r,e||t))};return i.delay=function(e){n&&clearTimeout(n),n=setTimeout(r,e||t)},i.schedule=i,i.call=function(){this.cancel(),e()},i.cancel=function(){n&&clearTimeout(n),n=null},i.isPending=function(){return n},i}})),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/lib/keys"],(function(e,t,n){"use strict";var r=e("../lib/event"),i=e("../lib/useragent"),s=e("../lib/dom"),o=e("../lib/lang"),u=i.isChrome<18,a=i.isIE,f=i.isChrome>63,l=400,c=e("../lib/keys"),h=c.KEY_MODS,p=i.isIOS,d=p?/\s/:/\n/;t.TextInput=function(e,t){function W(){x=!0,n.blur(),n.focus(),x=!1}function J(){clearTimeout($),$=setTimeout((function(){b&&(n.style.cssText=b,b=""),t.renderer.$isMousePressed=!1,t.renderer.$keepTextAreaAtCursor&&t.renderer.$moveTextAreaToCursor()}),0)}var n=s.createElement("textarea");n.className="ace_text-input",n.setAttribute("wrap","off"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck",!1),n.style.opacity="0",e.insertBefore(n,e.firstChild);var v=!1,m=!1,g=!1,y=!1,b="";i.isMobile||(n.style.fontSize="1px");var S=!1,x=!1,T="",N=0,C=0;try{var k=document.activeElement===n}catch(L){}r.addListener(n,"blur",(function(e){x||(t.onBlur(e),k=!1)})),r.addListener(n,"focus",(function(e){if(!x){k=!0;if(i.isEdge)try{if(!document.hasFocus())return}catch(e){}t.onFocus(e),i.isEdge?setTimeout(A):A()}})),this.$focusScroll=!1,this.focus=function(){if(b||f||"browser"==this.$focusScroll)return n.focus({preventScroll:!0});var e=n.style.top;n.style.position="fixed",n.style.top="0px";try{var t=0!=n.getBoundingClientRect().top}catch(r){return}var i=[];if(t)for(var s=n.parentElement;s&&1==s.nodeType;)i.push(s),s.setAttribute("ace_nocontext",!0),s=!s.parentElement&&s.getRootNode?s.getRootNode().host:s.parentElement;n.focus({preventScroll:!0}),t&&i.forEach((function(e){e.removeAttribute("ace_nocontext")})),setTimeout((function(){n.style.position="","0px"==n.style.top&&(n.style.top=e)}),0)},this.blur=function(){n.blur()},this.isFocused=function(){return k},t.on("beforeEndOperation",(function(){t.curOp&&"insertstring"==t.curOp.command.name||(g&&(T=n.value="",z()),A())}));var A=p?function(e){if(k&&(!v||e)&&!y){e||(e="");var r="\n ab"+e+"cde fg\n";r!=n.value&&(n.value=T=r);var s=4+(e.length||(t.selection.isEmpty()?0:1));(4!=N||C!=s)&&n.setSelectionRange(4,s),N=4,C=s}}:function(){if(!g&&!y&&(k||D)){g=!0;var e=t.selection,r=e.getRange(),i=e.cursor.row,s=r.start.column,o=r.end.column,u=t.session.getLine(i);if(r.start.row!=i){var a=t.session.getLine(i-1);s=r.start.row<i-1?0:s,o+=a.length+1,u=a+"\n"+u}else if(r.end.row!=i){var f=t.session.getLine(i+1);o=r.end.row>i+1?f.length:o,o+=u.length+1,u=u+"\n"+f}u.length>l&&(s<l&&o<l?u=u.slice(0,l):(u="\n",s=0,o=1));var c=u+"\n\n";c!=T&&(n.value=T=c,N=C=c.length),D&&(N=n.selectionStart,C=n.selectionEnd);if(C!=o||N!=s||n.selectionEnd!=C)try{n.setSelectionRange(s,o),N=s,C=o}catch(h){}g=!1}};k&&t.onFocus();var _=null;this.setInputHandler=function(e){_=e},this.getInputHandler=function(){return _};var D=!1,P=function(e,r){D&&(D=!1);if(m)return A(),e&&t.onPaste(e),m=!1,"";for(var i=n.selectionStart,s=n.selectionEnd,o=N,u=T.length-C,a=e,f=e.length-i,l=e.length-s,c=0;o>0&&T[c]==e[c];)c++,o--;a=a.slice(c),c=1;for(;u>0&&T.length-c>N-1&&T[T.length-c]==e[e.length-c];)c++,u--;return f-=c-1,l-=c-1,a=a.slice(0,a.length-c+1),r||f!=a.length||o||u||l?(y=!0,a&&!o&&!u&&!f&&!l||S?t.onTextInput(a):t.onTextInput(a,{extendLeft:o,extendRight:u,restoreStart:f,restoreEnd:l}),y=!1,T=e,N=i,C=s,a):""},H=function(e){if(g)return U();var t=n.value,r=P(t,!0);(t.length>500||d.test(r))&&A()},B=function(e,t,n){var r=e.clipboardData||window.clipboardData;if(r&&!u){var i=a||n?"Text":"text/plain";try{return t?!1!==r.setData(i,t):r.getData(i)}catch(e){if(!n)return B(e,t,!0)}}},j=function(e,i){var s=t.getCopyText();if(!s)return r.preventDefault(e);B(e,s)?(p&&(A(s),v=s,setTimeout((function(){v=!1}),10)),i?t.onCut():t.onCopy(),r.preventDefault(e)):(v=!0,n.value=s,n.select(),setTimeout((function(){v=!1,A(),i?t.onCut():t.onCopy()})))},F=function(e){j(e,!0)},I=function(e){j(e,!1)},q=function(e){var s=B(e);"string"==typeof s?(s&&t.onPaste(s,e),i.isIE&&setTimeout(A),r.preventDefault(e)):(n.value="",m=!0)};r.addCommandKeyListener(n,t.onCommandKey.bind(t)),r.addListener(n,"select",(function(e){g||(v?v=!1:function(e){return 0===e.selectionStart&&e.selectionEnd>=T.length&&e.value===T&&T&&e.selectionEnd!==C}(n)&&(t.selectAll(),A()))})),r.addListener(n,"input",H),r.addListener(n,"cut",F),r.addListener(n,"copy",I),r.addListener(n,"paste",q),(!("oncut"in n)||!("oncopy"in n)||!("onpaste"in n))&&r.addListener(e,"keydown",(function(e){if((!i.isMac||e.metaKey)&&e.ctrlKey)switch(e.keyCode){case 67:I(e);break;case 86:q(e);break;case 88:F(e)}}));var U=function(){if(g&&t.onCompositionUpdate&&!t.$readOnly){if(S)return W();if(g.useTextareaForIME)t.onCompositionUpdate(n.value);else{var e=n.value;P(e),g.markerRange&&(g.context&&(g.markerRange.start.column=g.selectionStart=g.context.compositionStartOffset),g.markerRange.end.column=g.markerRange.start.column+C-g.selectionStart)}}},z=function(e){t.onCompositionEnd&&!t.$readOnly&&(g=!1,t.onCompositionEnd(),t.off("mousedown",W),e&&H())},X=o.delayedCall(U,50).schedule.bind(null,null);r.addListener(n,"compositionstart",(function(e){if(!g&&t.onCompositionStart&&!t.$readOnly){g={};if(!S){setTimeout(U,0),t.on("mousedown",W);var r=t.getSelectionRange();r.end.row=r.start.row,r.end.column=r.start.column,g.markerRange=r,g.selectionStart=N,t.onCompositionStart(g),g.useTextareaForIME?(n.value="",T="",N=0,C=0):(n.msGetInputContext&&(g.context=n.msGetInputContext()),n.getInputContext&&(g.context=n.getInputContext()))}}})),r.addListener(n,"compositionupdate",U),r.addListener(n,"keyup",(function(e){27==e.keyCode&&n.value.length<n.selectionStart&&(g||(T=n.value),N=C=-1,A()),X()})),r.addListener(n,"keydown",X),r.addListener(n,"compositionend",z),this.getElement=function(){return n},this.setCommandMode=function(e){S=e,n.readOnly=!1},this.setReadOnly=function(e){S||(n.readOnly=e)},this.setCopyWithEmptySelection=function(e){e},this.onContextMenu=function(e){D=!0,A(),t._emit("nativecontextmenu",{target:t,domEvent:e}),this.moveToMouse(e,!0)},this.moveToMouse=function(e,o){b||(b=n.style.cssText),n.style.cssText=(o?"z-index:100000;":"")+(i.isIE?"opacity:0.1;":"")+"text-indent: -"+(N+C)*t.renderer.characterWidth*.5+"px;";var u=t.container.getBoundingClientRect(),a=s.computedStyle(t.container),f=u.top+(parseInt(a.borderTopWidth)||0),l=u.left+(parseInt(u.borderLeftWidth)||0),c=u.bottom-f-n.clientHeight-2,h=function(e){s.translate(n,e.clientX-l-2,Math.min(e.clientY-f-2,c))};h(e);"mousedown"==e.type&&(t.renderer.$isMousePressed=!0,clearTimeout($),i.isWin&&r.capture(t.container,h,J))},this.onContextMenuClose=J;var $,K=function(e){t.textInput.onContextMenu(e),J()};r.addListener(n,"mouseup",K),r.addListener(n,"mousedown",(function(e){e.preventDefault(),J()})),r.addListener(t.renderer.scroller,"contextmenu",K),r.addListener(n,"contextmenu",K),p&&function(e,t,n){var r=null,i=!1;n.addEventListener("keydown",(function(e){r&&clearTimeout(r),i=!0}),!0),n.addEventListener("keyup",(function(e){r=setTimeout((function(){i=!1}),100)}),!0);var s=function(e){if(document.activeElement===n&&!(i||g||t.$mouseHandler.isMousePressed||v)){var r=n.selectionStart,s=n.selectionEnd,o=null,u=0;console.log(r,s);0==r?o=c.up:1==r?o=c.home:s>C&&"\n"==T[s]?o=c.end:r<N&&" "==T[r-1]?(o=c.left,u=h.option):r<N||r==N&&C!=N&&r==s?o=c.left:s>C&&T.slice(0,s).split("\n").length>2?o=c.down:s>C&&" "==T[s-1]?(o=c.right,u=h.option):(s>C||s==C&&C!=N&&r==s)&&(o=c.right);r!==s&&(u|=h.shift),o&&(t.onCommandKey(null,u,o),N=r,C=s,A(""))}};document.addEventListener("selectionchange",s),t.on("destroy",(function(){document.removeEventListener("selectionchange",s)}))}(0,t,n)}})),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],(function(e,t,n){"use strict";function o(e){e.$clickSelection=null;var t=e.editor;t.setDefaultHandler("mousedown",this.onMouseDown.bind(e)),t.setDefaultHandler("dblclick",this.onDoubleClick.bind(e)),t.setDefaultHandler("tripleclick",this.onTripleClick.bind(e)),t.setDefaultHandler("quadclick",this.onQuadClick.bind(e)),t.setDefaultHandler("mousewheel",this.onMouseWheel.bind(e));["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"].forEach((function(t){e[t]=this[t]}),this),e.selectByLines=this.extendSelectionBy.bind(e,"getLineRange"),e.selectByWords=this.extendSelectionBy.bind(e,"getWordRange")}function a(e,t){if(e.start.row==e.end.row)var n=2*t.column-e.start.column-e.end.column;else if(e.start.row!=e.end.row-1||e.start.column||e.end.column)n=2*t.row-e.start.row-e.end.row;else var n=t.column-4;return n<0?{cursor:e.start,anchor:e.end}:{cursor:e.end,anchor:e.start}}var r=e("../lib/useragent");(function(){this.onMouseDown=function(e){var t=e.inSelection(),n=e.getDocumentPosition();this.mousedownEvent=e;var i=this.editor,s=e.getButton();if(0===s){this.mousedownEvent.time=Date.now();if(t&&!i.isFocused()){i.focus();if(this.$focusTimeout&&!this.$clickSelection&&!i.inMultiSelectMode){this.setState("focusWait"),this.captureMouse(e);return}}return this.captureMouse(e),this.startSelect(n,e.domEvent._clicks>1),e.preventDefault()}(i.getSelectionRange().isEmpty()||1==s)&&i.selection.moveToPosition(n),2==s&&(i.textInput.onContextMenu(e.domEvent),r.isMozilla||e.preventDefault())},this.startSelect=function(e,t){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var n=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?n.selection.selectToPosition(e):t||n.selection.moveToPosition(e),t||this.select(),n.renderer.scroller.setCapture&&n.renderer.scroller.setCapture(),n.setStyle("ace_selecting"),this.setState("select"))},this.select=function(){var e,t=this.editor,n=t.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var r=this.$clickSelection.comparePoint(n);if(-1==r)e=this.$clickSelection.end;else if(1==r)e=this.$clickSelection.start;else{var i=a(this.$clickSelection,n);n=i.cursor,e=i.anchor}t.selection.setSelectionAnchor(e.row,e.column)}t.selection.selectToPosition(n),t.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(e){var t,n=this.editor,r=n.renderer.screenToTextCoordinates(this.x,this.y),i=n.selection[e](r.row,r.column);if(this.$clickSelection){var s=this.$clickSelection.comparePoint(i.start),o=this.$clickSelection.comparePoint(i.end);if(-1==s&&o<=0){t=this.$clickSelection.end;i.end.row==r.row&&i.end.column==r.column||(r=i.start)}else if(1==o&&s>=0){t=this.$clickSelection.start;i.start.row==r.row&&i.start.column==r.column||(r=i.end)}else if(-1==s&&1==o)r=i.end,t=i.start;else{var u=a(this.$clickSelection,r);r=u.cursor,t=u.anchor}n.selection.setSelectionAnchor(t.row,t.column)}n.selection.selectToPosition(r),n.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var e=function(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),t=Date.now();(e>0||t-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(e){var t=e.getDocumentPosition(),n=this.editor,i=n.session.getBracketRange(t);i?(i.isEmpty()&&(i.start.column--,i.end.column++),this.setState("select")):(i=n.selection.getWordRange(t.row,t.column),this.setState("selectByWords")),this.$clickSelection=i,this.select()},this.onTripleClick=function(e){var t=e.getDocumentPosition(),n=this.editor;this.setState("selectByLines");var r=n.getSelectionRange();r.isMultiLine()&&r.contains(t.row,t.column)?(this.$clickSelection=n.selection.getLineRange(r.start.row),this.$clickSelection.end=n.selection.getLineRange(r.end.row).end):this.$clickSelection=n.selection.getLineRange(t.row),this.select()},this.onQuadClick=function(e){var t=this.editor;t.selectAll(),this.$clickSelection=t.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(e){if(!e.getAccelKey()){e.getShiftKey()&&e.wheelY&&!e.wheelX&&(e.wheelX=e.wheelY,e.wheelY=0);var t=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var n=this.$lastScroll,r=e.domEvent.timeStamp,i=r-n.t,o=i?e.wheelX/i:n.vx,u=i?e.wheelY/i:n.vy;i<550&&(o=(o+n.vx)/2,u=(u+n.vy)/2);var a=Math.abs(o/u),f=!1;a>=1&&t.renderer.isScrollableBy(e.wheelX*e.speed,0)&&(f=!0),a<=1&&t.renderer.isScrollableBy(0,e.wheelY*e.speed)&&(f=!0);if(f)n.allowed=r;else if(r-n.allowed<550){Math.abs(o)<=1.5*Math.abs(n.vx)&&Math.abs(u)<=1.5*Math.abs(n.vy)?(f=!0,n.allowed=r):n.allowed=0}n.t=r,n.vx=o,n.vy=u;return f?(t.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()):void 0}}}).call(o.prototype),t.DefaultHandlers=o})),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],(function(e,t,n){"use strict";function s(e){this.isOpen=!1,this.$element=null,this.$parentNode=e}e("./lib/oop");var i=e("./lib/dom");(function(){this.$init=function(){return this.$element=i.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(e){this.getElement().textContent=e},this.setHtml=function(e){this.getElement().innerHTML=e},this.setPosition=function(e,t){this.getElement().style.left=e+"px",this.getElement().style.top=t+"px"},this.setClassName=function(e){i.addCssClass(this.getElement(),e)},this.show=function(e,t,n){null!=e&&this.setText(e),null!=t&&null!=n&&this.setPosition(t,n),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(s.prototype),t.Tooltip=s})),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],(function(e,t,n){"use strict";function a(e){o.call(this,e)}var r=e("../lib/dom"),i=e("../lib/oop"),s=e("../lib/event"),o=e("../tooltip").Tooltip;i.inherits(a,o),function(){this.setPosition=function(e,t){var n=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight,i=this.getWidth(),s=this.getHeight();(e+=15)+i>n&&(e-=e+i-n),(t+=15)+s>r&&(t-=20+s),o.prototype.setPosition.call(this,e,t)}}.call(a.prototype),t.GutterHandler=function(e){function l(){var r=u.getDocumentPosition().row,s=n.$annotations[r];if(!s)return c();if(r==t.session.getLength()){var a=t.renderer.pixelToScreenCoordinates(0,u.y).row,l=u.$pos;if(a>t.session.documentToScreenRow(l.row,l.column))return c()}if(f!=s){f=s.text.join("<br/>"),i.setHtml(f),i.show(),t._signal("showGutterTooltip",i),t.on("mousewheel",c);if(e.$tooltipFollowsMouse)h(u);else{var d=u.domEvent.target.getBoundingClientRect(),v=i.getElement().style;v.left=d.right+"px",v.top=d.bottom+"px"}}}function c(){o&&(o=clearTimeout(o)),f&&(i.hide(),f=null,t._signal("hideGutterTooltip",i),t.removeEventListener("mousewheel",c))}function h(e){i.setPosition(e.x,e.y)}var o,u,f,t=e.editor,n=t.renderer.$gutterLayer,i=new a(t.container);e.editor.setDefaultHandler("guttermousedown",(function(r){if(t.isFocused()&&0==r.getButton()){if("foldWidgets"!=n.getRegion(r)){var s=r.getDocumentPosition().row,o=t.session.selection;if(r.getShiftKey())o.selectTo(s,0);else{if(2==r.domEvent.detail)return t.selectAll(),r.preventDefault();e.$clickSelection=t.selection.getLineRange(s)}return e.setState("selectByLines"),e.captureMouse(r),r.preventDefault()}}}));e.editor.setDefaultHandler("guttermousemove",(function(t){var n=t.domEvent.target||t.domEvent.srcElement;if(r.hasCssClass(n,"ace_fold-widget"))return c();f&&e.$tooltipFollowsMouse&&h(t),u=t;o||(o=setTimeout((function(){o=null,u&&!e.isMousePressed?l():c()}),50))})),s.addListener(t.renderer.$gutter,"mouseout",(function(e){u=null;f&&!o&&(o=setTimeout((function(){o=null,c()}),50))})),t.on("changeSession",c)}})),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],(function(e,t,n){"use strict";var r=e("../lib/event"),i=e("../lib/useragent"),s=t.MouseEvent=function(e,t){this.domEvent=e,this.editor=t,this.x=this.clientX=e.clientX,this.y=this.clientY=e.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){r.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){r.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var t=this.editor.getSelectionRange();if(t.isEmpty())this.$inSelection=!1;else{var n=this.getDocumentPosition();this.$inSelection=t.contains(n.row,n.column)}return this.$inSelection},this.getButton=function(){return r.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=i.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(s.prototype)})),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],(function(e,t,n){"use strict";function f(e){function C(){var e=g;(function(e,n){var r=Date.now(),i=!n||e.row!=n.row,s=!n||e.column!=n.column;if(!S||i||s)t.moveCursorToPosition(e),S=r,x={x:p,y:d};else{l(x.x,x.y,p,d)>a?S=null:r-S>=u&&(t.renderer.scrollCursorIntoView(),S=null)}})(g=t.renderer.screenToTextCoordinates(p,d),e),function(e,n){var r=Date.now(),i=t.renderer.layerConfig.lineHeight,s=t.renderer.layerConfig.characterWidth,u=t.renderer.scroller.getBoundingClientRect(),a={x:{left:p-u.left,right:u.right-p},y:{top:d-u.top,bottom:u.bottom-d}},f=Math.min(a.x.left,a.x.right),l=Math.min(a.y.top,a.y.bottom),c={row:e.row,column:e.column};f/s<=2&&(c.column+=a.x.left<a.x.right?-3:2),l/i<=1&&(c.row+=a.y.top<a.y.bottom?-1:1);var h=e.row!=c.row,v=e.column!=c.column,m=!n||e.row!=n.row;h||v&&!m?E?r-E>=o&&t.renderer.scrollCursorIntoView(c):E=r:E=null}(g,e)}function k(){m=t.selection.toOrientedRange(),h=t.session.addMarker(m,"ace_selection",t.getSelectionStyle()),t.clearSelection(),t.isFocused()&&t.renderer.$cursorLayer.setBlinking(!1),clearInterval(v),C(),v=setInterval(C,20),y=0,i.addListener(document,"mousemove",O)}function L(){clearInterval(v),t.session.removeMarker(h),h=null,t.selection.fromOrientedRange(m),t.isFocused()&&!w&&t.$resetCursorStyle(),m=null,g=null,y=0,E=null,S=null,i.removeListener(document,"mousemove",O)}function O(){null==A&&(A=setTimeout((function(){null!=A&&h&&L()}),20))}function M(e){var t=e.types;return!t||Array.prototype.some.call(t,(function(e){return"text/plain"==e||"Text"==e}))}function _(e){var t=["copy","copymove","all","uninitialized"],r=s.isMac?e.altKey:e.ctrlKey,i="uninitialized";try{i=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var o="none";return r&&t.indexOf(i)>=0?o="copy":["move","copymove","linkmove","all","uninitialized"].indexOf(i)>=0?o="move":t.indexOf(i)>=0&&(o="copy"),o}var t=e.editor,n=r.createElement("img");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",s.isOpera&&(n.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;");["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"].forEach((function(t){e[t]=this[t]}),this),t.addEventListener("mousedown",this.onMouseDown.bind(e));var h,p,d,v,m,g,b,w,E,S,x,c=t.container,y=0;this.onDragStart=function(e){if(this.cancelDrag||!c.draggable){var r=this;return setTimeout((function(){r.startSelect(),r.captureMouse(e)}),0),e.preventDefault()}m=t.getSelectionRange();var i=e.dataTransfer;i.effectAllowed=t.getReadOnly()?"copy":"copyMove",s.isOpera&&(t.container.appendChild(n),n.scrollTop=0),i.setDragImage&&i.setDragImage(n,0,0),s.isOpera&&t.container.removeChild(n),i.clearData(),i.setData("Text",t.session.getTextRange()),w=!0,this.setState("drag")},this.onDragEnd=function(e){c.draggable=!1,w=!1,this.setState(null);if(!t.getReadOnly()){var n=e.dataTransfer.dropEffect;!b&&"move"==n&&t.session.remove(t.getSelectionRange()),t.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(e){if(!t.getReadOnly()&&M(e.dataTransfer))return p=e.clientX,d=e.clientY,h||k(),y++,e.dataTransfer.dropEffect=b=_(e),i.preventDefault(e)},this.onDragOver=function(e){if(!t.getReadOnly()&&M(e.dataTransfer))return p=e.clientX,d=e.clientY,h||(k(),y++),null!==A&&(A=null),e.dataTransfer.dropEffect=b=_(e),i.preventDefault(e)},this.onDragLeave=function(e){if(--y<=0&&h)return L(),b=null,i.preventDefault(e)},this.onDrop=function(e){if(g){var n=e.dataTransfer;if(w)switch(b){case"move":m=m.contains(g.row,g.column)?{start:g,end:g}:t.moveText(m,g);break;case"copy":m=t.moveText(m,g,!0)}else{var r=n.getData("Text");m={start:g,end:t.session.insert(g,r)},t.focus(),b=null}return L(),i.preventDefault(e)}},i.addListener(c,"dragstart",this.onDragStart.bind(e)),i.addListener(c,"dragend",this.onDragEnd.bind(e)),i.addListener(c,"dragenter",this.onDragEnter.bind(e)),i.addListener(c,"dragover",this.onDragOver.bind(e)),i.addListener(c,"dragleave",this.onDragLeave.bind(e)),i.addListener(c,"drop",this.onDrop.bind(e));var A=null}function l(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}var r=e("../lib/dom"),i=e("../lib/event"),s=e("../lib/useragent"),o=200,u=200,a=5;(function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){this.editor.container.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(e){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var e=this.editor;e.container.draggable=!0,e.renderer.$cursorLayer.setBlinking(!1),e.setStyle("ace_dragging");var n=s.isWin?"default":"move";e.renderer.setCursorStyle(n),this.setState("dragReady")},this.onMouseDrag=function(e){var t=this.editor.container;if(s.isIE&&"dragReady"==this.state){l(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>3&&t.dragDrop()}if("dragWait"===this.state){l(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>0&&(t.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(e){if(this.$dragEnabled){this.mousedownEvent=e;var t=this.editor,n=e.inSelection(),r=e.getButton();if(1===(e.domEvent.detail||1)&&0===r&&n){if(e.editor.inMultiSelectMode&&(e.getAccelKey()||e.getShiftKey()))return;this.mousedownEvent.time=Date.now();var o=e.domEvent.target||e.domEvent.srcElement;"unselectable"in o&&(o.unselectable="on");if(t.getDragDelay()){if(s.isWebKit){this.cancelDrag=!0;t.container.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(e,this.onMouseDrag.bind(this)),e.defaultPrevented=!0}}}}).call(f.prototype),t.DragdropHandler=f})),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event"],(function(e,t,n){"use strict";var r=e("./mouse_event").MouseEvent;t.addTouchListeners=function(e,t){function m(){a=null,clearTimeout(a),t.selection.isEmpty()&&t.selection.moveToPosition(c),n="wait"}var i,s,o,u,a,f,c,v,n="scroll",l=0,h=0,p=0,d=0;e.addEventListener("contextmenu",(function(e){if(v){t.textInput.getElement().focus()}})),e.addEventListener("touchstart",(function(e){var f=e.touches;if(a||f.length>1)clearTimeout(a),a=null,n="zoom";else{v=t.$mouseHandler.isMousePressed=!0;var y=f[0];i=y.clientX,s=y.clientY,p=d=0,e.clientX=y.clientX,e.clientY=y.clientY;var b=e.timeStamp;u=b;var w=new r(e,t);c=w.getDocumentPosition();if(b-o<500&&1==f.length&&!l)h++,e.preventDefault(),e.button=0,function(){a=null,clearTimeout(a),t.selection.moveToPosition(c);var e=h>=2?t.selection.getLineRange(c.row):t.session.getBracketRange(c);e&&!e.isEmpty()?t.selection.setRange(e):t.selection.selectWord(),n="wait"}();else{h=0,a=setTimeout(m,450);var E=t.selection.cursor,S=t.selection.isEmpty()?E:t.selection.anchor,x=t.renderer.$cursorLayer.getPixelPosition(E,!0),T=t.renderer.$cursorLayer.getPixelPosition(S,!0),N=t.renderer.scroller.getBoundingClientRect(),C=t.renderer.layerConfig.lineHeight,k=t.renderer.layerConfig.lineHeight,L=function(e,t){return(e/=k)*e+(t=t/C-.75)*t},A=L(e.clientX-N.left-x.left,e.clientY-N.top-x.top),O=L(e.clientX-N.left-T.left,e.clientY-N.top-T.top);A<3.5&&O<3.5&&(n=A>O?"cursor":"anchor"),n=O<3.5?"anchor":A<3.5?"cursor":"scroll"}o=b}})),e.addEventListener("touchend",(function(e){v=t.$mouseHandler.isMousePressed=!1,f&&clearInterval(f),"zoom"==n?(n="",l=0):a?(t.selection.moveToPosition(c),l=0):"scroll"==n&&(l+=60,f=setInterval((function(){l--<=0&&(clearInterval(f),f=null),Math.abs(p)<.01&&(p=0),Math.abs(d)<.01&&(d=0),l<20&&(p*=.9),l<20&&(d*=.9),t.renderer.scrollBy(10*p,10*d)}),10),e.preventDefault()),clearTimeout(a),a=null})),e.addEventListener("touchmove",(function(e){a&&(clearTimeout(a),a=null);var o=e.touches;if(!(o.length>1||"zoom"==n)){var f=o[0],l=i-f.clientX,c=s-f.clientY;if("wait"==n){if(!(l*l+c*c>4))return e.preventDefault();n="cursor"}i=f.clientX,s=f.clientY,e.clientX=f.clientX,e.clientY=f.clientY;var h=e.timeStamp,v=h-u;u=h;if("scroll"==n){var m=new r(e,t);m.speed=1,m.wheelX=l,m.wheelY=c,10*Math.abs(l)<Math.abs(c)&&(l=0),10*Math.abs(c)<Math.abs(l)&&(c=0),0!=v&&(p=l/v,d=c/v),t._emit("mousewheel",m),m.propagationStopped||(p=d=0)}else{var y=new r(e,t).getDocumentPosition();"cursor"==n?t.selection.moveCursorToPosition(y):"anchor"==n&&t.selection.setSelectionAnchor(y.row,y.column),t.renderer.scrollCursorIntoView(y),e.preventDefault()}}}))}})),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],(function(e,t,n){"use strict";var r=e("./dom");t.get=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){4===n.readyState&&t(n.responseText)},n.send(null)},t.loadScript=function(e,t){var n=r.getDocumentHead(),i=document.createElement("script");i.src=e,n.appendChild(i),i.onload=i.onreadystatechange=function(e,n){!n&&i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(i=i.onload=i.onreadystatechange=null,n||t())}},t.qualifyURL=function(e){var t=document.createElement("a");return t.href=e,t.href}})),ace.define("ace/lib/event_emitter",["require","exports","module"],(function(e,t,n){"use strict";var r={},i=function(){this.propagationStopped=!0},s=function(){this.defaultPrevented=!0};r._emit=r._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[e]||[],r=this._defaultHandlers[e];if(n.length||r){"object"==typeof t&&t||(t={});t.type||(t.type=e),t.stopPropagation||(t.stopPropagation=i),t.preventDefault||(t.preventDefault=s),n=n.slice();for(var o=0;o<n.length;o++){n[o](t,this);if(t.propagationStopped)break}return r&&!t.defaultPrevented?r(t,this):void 0}},r._signal=function(e,t){var n=(this._eventRegistry||{})[e];if(n){n=n.slice();for(var r=0;r<n.length;r++)n[r](t,this)}},r.once=function(e,t){var n=this;this.addEventListener(e,(function r(){n.removeEventListener(e,r),t.apply(null,arguments)}));if(!t)return new Promise((function(e){t=e}))},r.setDefaultHandler=function(e,t){var n=this._defaultHandlers;n||(n=this._defaultHandlers={_disabled_:{}});if(n[e]){var r=n[e],i=n._disabled_[e];i||(n._disabled_[e]=i=[]),i.push(r);var s=i.indexOf(t);-1!=s&&i.splice(s,1)}n[e]=t},r.removeDefaultHandler=function(e,t){var n=this._defaultHandlers;if(n){var r=n._disabled_[e];if(n[e]==t)r&&this.setDefaultHandler(e,r.pop());else if(r){var i=r.indexOf(t);-1!=i&&r.splice(i,1)}}},r.on=r.addEventListener=function(e,t,n){this._eventRegistry=this._eventRegistry||{};var r=this._eventRegistry[e];return r||(r=this._eventRegistry[e]=[]),-1==r.indexOf(t)&&r[n?"unshift":"push"](t),t},r.off=r.removeListener=r.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];if(n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}},r.removeAllListeners=function(e){this._eventRegistry&&(this._eventRegistry[e]=[])},t.EventEmitter=r})),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(e,t,n){function o(e){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function u(e,t){var n=new Error(e);n.data=t,"object"==typeof console&&console.error&&console.error(n),setTimeout((function(){throw n}))}var r=e("./oop"),i=e("./event_emitter").EventEmitter,s={setOptions:function(e){Object.keys(e).forEach((function(t){this.setOption(t,e[t])}),this)},getOptions:function(e){var t={};if(e)Array.isArray(e)||(t=e,e=Object.keys(t));else{var n=this.$options;e=Object.keys(n).filter((function(e){return!n[e].hidden}))}return e.forEach((function(e){t[e]=this.getOption(e)}),this),t},setOption:function(e,t){if(this["$"+e]!==t){var n=this.$options[e];if(!n)return o('misspelled option "'+e+'"');if(n.forwardTo)return this[n.forwardTo]&&this[n.forwardTo].setOption(e,t);n.handlesSet||(this["$"+e]=t),n&&n.set&&n.set.call(this,t)}},getOption:function(e){var t=this.$options[e];return t?t.forwardTo?this[t.forwardTo]&&this[t.forwardTo].getOption(e):t&&t.get?t.get.call(this):this["$"+e]:o('misspelled option "'+e+'"')}},a=function(){this.$defaultOptions={}};(function(){r.implement(this,i),this.defineOptions=function(e,t,n){return e.$options||(this.$defaultOptions[t]=e.$options={}),Object.keys(n).forEach((function(t){var r=n[t];"string"==typeof r&&(r={forwardTo:r}),r.name||(r.name=t),e.$options[r.name]=r,"initialValue"in r&&(e["$"+r.name]=r.initialValue)})),r.implement(e,s),this},this.resetOptions=function(e){Object.keys(e.$options).forEach((function(t){var n=e.$options[t];"value"in n&&e.setOption(t,n.value)}))},this.setDefaultValue=function(e,t,n){if(!e){for(e in this.$defaultOptions)if(this.$defaultOptions[e][t])break;if(!this.$defaultOptions[e][t])return!1}var r=this.$defaultOptions[e]||(this.$defaultOptions[e]={});r[t]&&(r.forwardTo?this.setDefaultValue(r.forwardTo,t,n):r[t].value=n)},this.setDefaultValues=function(e,t){Object.keys(t).forEach((function(n){this.setDefaultValue(e,n,t[n])}),this)},this.warn=o,this.reportError=u}).call(a.prototype),t.AppConfig=a})),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"],(function(e,t,n){function c(e){return e.replace(/-(.)/g,(function(e,t){return t.toUpperCase()}))}var r=e("./lib/lang"),s=(e("./lib/oop"),e("./lib/net")),o=e("./lib/app_config").AppConfig;n.exports=t=new o;var u=function(){return this||"undefined"!=typeof window&&window}(),a={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1};t.get=function(e){if(!a.hasOwnProperty(e))throw new Error("Unknown config key: "+e);return a[e]},t.set=function(e,t){if(a.hasOwnProperty(e))a[e]=t;else if(0==this.setDefaultValue("",e,t))throw new Error("Unknown config key: "+e)},t.all=function(){return r.copyObject(a)},t.$modes={},t.moduleUrl=function(e,t){if(a.$moduleUrls[e])return a.$moduleUrls[e];var n=e.split("/"),r="snippets"==(t=t||n[n.length-2]||"")?"/":"-",i=n[n.length-1];if("worker"==t&&"-"==r){var s=new RegExp("^"+t+"[\\-_]|[\\-_]"+t+"$","g");i=i.replace(s,"")}(!i||i==t)&&n.length>1&&(i=n[n.length-2]);var o=a[t+"Path"];return null==o?o=a.basePath:"/"==r&&(t=r=""),o&&"/"!=o.slice(-1)&&(o+="/"),o+t+r+i+this.get("suffix")},t.setModuleUrl=function(e,t){return a.$moduleUrls[e]=t},t.$loading={},t.loadModule=function(n,r){var i,o;Array.isArray(n)&&(o=n[0],n=n[1]);try{i=e(n)}catch(u){}if(i&&!t.$loading[n])return r&&r(i);t.$loading[n]||(t.$loading[n]=[]),t.$loading[n].push(r);if(!(t.$loading[n].length>1)){var a=function(){e([n],(function(e){t._emit("load.module",{name:n,module:e});var r=t.$loading[n];t.$loading[n]=null,r.forEach((function(t){t&&t(e)}))}))};if(!t.get("packaged"))return a();s.loadScript(t.moduleUrl(n,o),a),f()}};var f=function(){!a.basePath&&!a.workerPath&&!a.modePath&&!a.themePath&&!Object.keys(a.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),f=function(){})};t.init=function(r){if(u&&u.document){a.packaged=r||e.packaged||n.packaged||u.define&&define.packaged;for(var i={},s="",o=document.currentScript||document._currentScript,l=(o&&o.ownerDocument||document).getElementsByTagName("script"),h=0;h<l.length;h++){var p=l[h],d=p.src||p.getAttribute("src");if(d){for(var v=p.attributes,m=0,g=v.length;m<g;m++){var y=v[m];0===y.name.indexOf("data-ace-")&&(i[c(y.name.replace(/^data-ace-/,""))]=y.value)}var b=d.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);b&&(s=b[1])}}s&&(i.base=i.base||s,i.packaged=!0),i.basePath=i.base,i.workerPath=i.workerPath||i.base,i.modePath=i.modePath||i.base,i.themePath=i.themePath||i.base,delete i.base;for(var w in i)void 0!==i[w]&&t.set(w,i[w])}},t.version="1.4.5"})),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],(function(e,t,n){"use strict";var r=e("../lib/event"),i=e("../lib/useragent"),s=e("./default_handlers").DefaultHandlers,o=e("./default_gutter_handler").GutterHandler,u=e("./mouse_event").MouseEvent,a=e("./dragdrop_handler").DragdropHandler,f=e("./touch_handler").addTouchListeners,l=e("../config"),c=function(e){var t=this;this.editor=e,new s(this),new o(this),new a(this);var n=function(t){(!document.hasFocus||!document.hasFocus()||!e.isFocused()&&document.activeElement==(e.textInput&&e.textInput.getElement()))&&window.focus(),e.focus()},u=e.renderer.getMouseEventTarget();r.addListener(u,"click",this.onMouseEvent.bind(this,"click")),r.addListener(u,"mousemove",this.onMouseMove.bind(this,"mousemove")),r.addMultiMouseDownListener([u,e.renderer.scrollBarV&&e.renderer.scrollBarV.inner,e.renderer.scrollBarH&&e.renderer.scrollBarH.inner,e.textInput&&e.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent"),r.addMouseWheelListener(e.container,this.onMouseWheel.bind(this,"mousewheel")),f(e.container,e);var l=e.renderer.$gutter;r.addListener(l,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),r.addListener(l,"click",this.onMouseEvent.bind(this,"gutterclick")),r.addListener(l,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),r.addListener(l,"mousemove",this.onMouseEvent.bind(this,"guttermousemove")),r.addListener(u,"mousedown",n),r.addListener(l,"mousedown",n),i.isIE&&e.renderer.scrollBarV&&(r.addListener(e.renderer.scrollBarV.element,"mousedown",n),r.addListener(e.renderer.scrollBarH.element,"mousedown",n)),e.on("mousemove",(function(n){if(!t.state&&!t.$dragDelay&&t.$dragEnabled){var r=e.renderer.screenToTextCoordinates(n.x,n.y),i=e.session.selection.getRange(),s=e.renderer;!i.isEmpty()&&i.insideStart(r.row,r.column)?s.setCursorStyle("default"):s.setCursorStyle("")}}))};(function(){this.onMouseEvent=function(e,t){this.editor._emit(e,new u(t,this.editor))},this.onMouseMove=function(e,t){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;n&&n.length&&this.editor._emit(e,new u(t,this.editor))},this.onMouseWheel=function(e,t){var n=new u(t,this.editor);n.speed=2*this.$scrollSpeed,n.wheelX=t.wheelX,n.wheelY=t.wheelY,this.editor._emit(e,n)},this.setState=function(e){this.state=e},this.captureMouse=function(e,t){this.x=e.x,this.y=e.y,this.isMousePressed=!0;var n=this.editor,s=this.editor.renderer;s.$isMousePressed=!0;var o=this,a=function(e){if(e){if(i.isWebKit&&!e.which&&o.releaseMouse)return o.releaseMouse();o.x=e.clientX,o.y=e.clientY,t&&t(e),o.mouseEvent=new u(e,o.editor),o.$mouseMoved=!0}},f=function(e){n.off("beforeEndOperation",c),clearInterval(h),l(),o[o.state+"End"]&&o[o.state+"End"](e),o.state="",o.isMousePressed=s.$isMousePressed=!1,s.$keepTextAreaAtCursor&&s.$moveTextAreaToCursor(),o.$onCaptureMouseMove=o.releaseMouse=null,e&&o.onMouseEvent("mouseup",e),n.endOperation()},l=function(){o[o.state]&&o[o.state](),o.$mouseMoved=!1};if(i.isOldIE&&"dblclick"==e.domEvent.type)return setTimeout((function(){f(e)}));var c=function(e){o.releaseMouse&&n.curOp.command.name&&n.curOp.selectionChanged&&(o[o.state+"End"]&&o[o.state+"End"](),o.state="",o.releaseMouse())};n.on("beforeEndOperation",c),n.startOperation({command:{name:"mouse"}}),o.$onCaptureMouseMove=a,o.releaseMouse=r.capture(this.editor.container,a,f);var h=setInterval(l,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var e=function(t){t&&t.domEvent&&"contextmenu"!=t.domEvent.type||(this.editor.off("nativecontextmenu",e),t&&t.domEvent&&r.stopEvent(t.domEvent))}.bind(this);setTimeout(e,10),this.editor.on("nativecontextmenu",e)}}).call(c.prototype),l.defineOptions(c.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:i.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=c})),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],(function(e,t,n){"use strict";var r=e("../lib/dom");t.FoldHandler=function(e){e.on("click",(function(t){var n=t.getDocumentPosition(),i=e.session,s=i.getFoldAt(n.row,n.column,1);s&&(t.getAccelKey()?i.removeFold(s):i.expandFold(s),t.stop());var o=t.domEvent&&t.domEvent.target;o&&r.hasCssClass(o,"ace_inline_button")&&r.hasCssClass(o,"ace_toggle_wrap")&&(i.setOption("wrap",!i.getUseWrapMode()),e.renderer.scrollCursorIntoView())})),e.on("gutterclick",(function(t){if("foldWidgets"==e.renderer.$gutterLayer.getRegion(t)){var r=t.getDocumentPosition().row,i=e.session;i.foldWidgets&&i.foldWidgets[r]&&e.session.onFoldWidgetClick(r,t),e.isFocused()||e.focus(),t.stop()}})),e.on("gutterdblclick",(function(t){if("foldWidgets"==e.renderer.$gutterLayer.getRegion(t)){var r=t.getDocumentPosition().row,i=e.session,s=i.getParentFoldRangeData(r,!0),o=s.range||s.firstRange;if(o){r=o.start.row;var u=i.getFoldAt(r,i.getLine(r).length,1);u?i.removeFold(u):(i.addFold("...",o),e.renderer.scrollCursorIntoView({row:o.start.row,column:0}))}t.stop()}}))}})),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],(function(e,t,n){"use strict";var r=e("../lib/keys"),i=e("../lib/event"),s=function(e){this.$editor=e,this.$data={editor:e},this.$handlers=[],this.setDefaultHandler(e.commands)};(function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e,this.addKeyboardHandler(e,0)},this.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]!=e){for(;t[t.length-1]&&t[t.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,1)}},this.addKeyboardHandler=function(e,t){if(e){"function"==typeof e&&!e.handleKeyboard&&(e.handleKeyboard=e);var n=this.$handlers.indexOf(e);-1!=n&&this.$handlers.splice(n,1),null==t?this.$handlers.push(e):this.$handlers.splice(t,0,e),-1==n&&e.attach&&e.attach(this.$editor)}},this.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e);return-1!=t&&(this.$handlers.splice(t,1),e.detach&&e.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var e=this.$data,t=e.editor;return this.$handlers.map((function(n){return n.getStatusText&&n.getStatusText(t,e)||""})).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(e,t,n,r){for(var s,o=!1,u=this.$editor.commands,a=this.$handlers.length;a--;)if((s=this.$handlers[a].handleKeyboard(this.$data,e,t,n,r))&&s.command){(o="null"==s.command||u.exec(s.command,this.$editor,s.args,r))&&r&&-1!=e&&1!=s.passEvent&&1!=s.command.passEvent&&i.stopEvent(r);if(o)break}return!o&&-1==e&&(s={command:"insertstring"},o=u.exec("insertstring",this.$editor,t)),o&&this.$editor._signal&&this.$editor._signal("keyboardActivity",s),o},this.onCommandKey=function(e,t,n){var i=r.keyCodeToString(n);this.$callKeyboardHandlers(t,i,n,e)},this.onTextInput=function(e){this.$callKeyboardHandlers(-1,e)}}).call(s.prototype),t.KeyBinding=s})),ace.define("ace/lib/bidiutil",["require","exports","module"],(function(e,t,n){"use strict";function F(e,t,n,r){var i=s?d:p,c=null,h=null,v=null,m=0,g=null,b=-1,w=null,E=null,T=[];if(!r)for(w=0,r=[];w<n;w++)r[w]=R(e[w]);o=s,u=!1,!1,f=!1,l=!1;for(E=0;E<n;E++){c=m,T[E]=h=q(e,r,T,E),g=240&(m=i[c][h]),m&=15,t[E]=v=i[m][5];if(g>0)if(16==g){for(w=b;w<E;w++)t[w]=1;b=-1}else b=-1;if(i[m][6])-1==b&&(b=E);else if(b>-1){for(w=b;w<E;w++)t[w]=v;b=-1}r[E]==S&&(t[E]=0),o|=v}if(l)for(w=0;w<n;w++)if(r[w]==x){t[w]=s;for(var C=w-1;C>=0&&r[C]==N;C--)t[C]=s}}function I(e,t,n){if(!(o<e))if(1!=e||s!=m||f)for(var u,a,l,c,r=n.length,i=0;i<r;){if(t[i]>=e){u=i+1;for(;u<r&&t[u]>=e;)u++;for(a=i,l=u-1;a<l;a++,l--)c=n[a],n[a]=n[l],n[l]=c;i=u}i++}else n.reverse()}function q(e,t,n,r){var o,c,h,p,i=t[r];switch(i){case g:case y:u=!1;case E:case w:return i;case b:return u?w:b;case T:return u=!0,!0,y;case N:return E;case C:return r<1||r+1>=t.length||(o=n[r-1])!=b&&o!=w||(c=t[r+1])!=b&&c!=w?E:(u&&(c=w),c==o?c:E);case k:return(o=r>0?n[r-1]:S)==b&&r+1<t.length&&t[r+1]==b?b:E;case L:if(r>0&&n[r-1]==b)return b;if(u)return E;p=r+1,h=t.length;for(;p<h&&t[p]==L;)p++;return p<h&&t[p]==b?b:E;case A:h=t.length,p=r+1;for(;p<h&&t[p]==A;)p++;if(p<h){var d=e[r],v=d>=1425&&d<=2303||64286==d;o=t[p];if(v&&(o==y||o==T))return y}return r<1||(o=t[r-1])==S?E:n[r-1];case S:return u=!1,f=!0,s;case x:return l=!0,E;case O:case M:case D:case P:case _:u=!1;case H:return E}}function R(e){var t=e.charCodeAt(0),n=t>>8;return 0==n?t>191?g:B[t]:5==n?/[\u0591-\u05f4]/.test(e)?y:g:6==n?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(e)?A:/[\u0660-\u0669\u066b-\u066c]/.test(e)?w:1642==t?L:/[\u06f0-\u06f9]/.test(e)?b:T:32==n&&t<=8287?j[255&t]:254==n&&t>=65136?T:E}var s=0,o=0,u=!1,f=!1,l=!1,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],d=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m=1,g=0,y=1,b=2,w=3,E=4,S=5,x=6,T=7,N=8,C=9,k=10,L=11,A=12,O=13,M=14,_=15,D=16,P=17,H=18,B=[H,H,H,H,H,H,H,H,H,x,S,x,N,S,H,H,H,H,H,H,H,H,H,H,H,H,H,H,S,S,S,x,N,E,E,L,L,L,E,E,E,E,E,k,C,k,C,C,b,b,b,b,b,b,b,b,b,b,C,E,E,E,E,E,E,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,E,E,E,E,E,E,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,E,E,E,E,H,H,H,H,H,H,S,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,C,E,L,L,L,L,E,E,E,E,g,E,E,H,E,E,L,L,b,b,E,g,E,E,E,b,g,E,E,E,E,E],j=[N,N,N,N,N,N,N,N,N,N,N,H,H,H,g,y,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,N,S,O,M,_,D,P,C,L,L,L,L,L,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,C,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,N];t.L=g,t.R=y,t.EN=b,t.ON_R=3,t.AN=4,t.R_H=5,t.B=6,t.RLE=7,t.DOT="Â·",t.doBidiReorder=function(e,n,r){if(e.length<2)return{};var i=e.split(""),o=new Array(i.length),u=new Array(i.length),a=[];s=r?m:0,F(i,a,i.length,n);for(var f=0;f<o.length;o[f]=f,f++);I(2,a,o),I(1,a,o);for(f=0;f<o.length-1;f++)n[f]===w?a[f]=t.AN:a[f]===y&&(n[f]>T&&n[f]<O||n[f]===E||n[f]===H)?a[f]=t.ON_R:f>0&&"Ù„"===i[f-1]&&/\u0622|\u0623|\u0625|\u0627/.test(i[f])&&(a[f-1]=a[f]=t.R_H,f++);i[i.length-1]===t.DOT&&(a[i.length-1]=t.B),"â€«"===i[0]&&(a[0]=t.RLE);for(f=0;f<o.length;f++)u[f]=a[o[f]];return{logicalFromVisual:o,bidiLevels:u}},t.hasBidiCharacters=function(e,t){for(var n=!1,r=0;r<e.length;r++)t[r]=R(e.charAt(r)),!n&&(t[r]==y||t[r]==T||t[r]==w)&&(n=!0);return n},t.getVisualFromLogicalIdx=function(e,t){for(var n=0;n<t.logicalFromVisual.length;n++)if(t.logicalFromVisual[n]==e)return n;return 0}})),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],(function(e,t,n){"use strict";var r=e("./lib/bidiutil"),i=e("./lib/lang"),s=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,o=function(e){this.session=e,this.bidiMap={},this.currentRow=null,this.bidiUtil=r,this.charWidths=[],this.EOL="Â¬",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="Â¶",this.RLE="â€«",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=s.test(e.getValue())};(function(){this.isBidiRow=function(e,t,n){return!!this.seenBidi&&(e!==this.currentRow&&(this.currentRow=e,this.updateRowLine(t,n),this.updateBidiMap()),this.bidiMap.bidiLevels)},this.onChange=function(e){this.seenBidi?this.currentRow=null:"insert"==e.action&&s.test(e.lines.join("\n"))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var e=0,t=this.session.$screenRowCache;if(t.length){var n=this.session.$getRowCacheIndex(t,this.currentRow);n>=0&&(e=this.session.$docRowCache[n])}return e},this.getSplitIndex=function(){var e=0,t=this.session.$screenRowCache;if(t.length)for(var n,r=this.session.$getRowCacheIndex(t,this.currentRow);this.currentRow-e>0&&(n=this.session.$getRowCacheIndex(t,this.currentRow-e-1))===r;)r=n,e++;else e=this.currentRow;return e},this.updateRowLine=function(e,t){void 0===e&&(e=this.getDocumentRow());var s=e===this.session.getLength()-1?this.EOF:this.EOL;this.wrapIndent=0,this.line=this.session.getLine(e),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE;if(this.session.$useWrapMode){var o=this.session.$wrapData[e];o&&(void 0===t&&(t=this.getSplitIndex()),t>0&&o.length?(this.wrapIndent=o.indent,this.wrapOffset=this.wrapIndent*this.charWidths[r.L],this.line=t<o.length?this.line.substring(o[t-1],o[t]):this.line.substring(o[o.length-1])):this.line=this.line.substring(0,o[t])),t==o.length&&(this.line+=this.showInvisibles?s:r.DOT)}else this.line+=this.showInvisibles?s:r.DOT;var f,u=this.session,a=0;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,(function(e,t){return"\t"===e||u.isFullWidth(e.charCodeAt(0))?(f="\t"===e?u.getScreenTabSize(t+a):2,a+=f-1,i.stringRepeat(r.DOT,f)):e})),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==r.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},this.updateBidiMap=function(){var e=[];r.hasBidiCharacters(this.line,e)||this.isRtlDir?this.bidiMap=r.doBidiReorder(this.line,e,this.isRtlDir):this.bidiMap={}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(e){if(this.characterWidth!==e.$characterSize.width){this.fontMetrics=e;var t=this.characterWidth=e.$characterSize.width,n=e.$measureCharWidth("×”");this.charWidths[r.L]=this.charWidths[r.EN]=this.charWidths[r.ON_R]=t,this.charWidths[r.R]=this.charWidths[r.AN]=n,this.charWidths[r.R_H]=.45*n,this.charWidths[r.B]=this.charWidths[r.RLE]=0,this.currentRow=null}},this.setShowInvisibles=function(e){this.showInvisibles=e,this.currentRow=null},this.setEolChar=function(e){this.EOL=e},this.setContentWidth=function(e){this.contentWidth=e},this.isRtlLine=function(e){return!!this.$isRtl||(null!=e?this.session.getLine(e).charAt(0)==this.RLE:this.isRtlDir)},this.setRtlDirection=function(e,t){for(var n=e.getCursorPosition(),r=e.selection.getSelectionAnchor().row;r<=n.row;r++)t||e.session.getLine(r).charAt(0)!==e.session.$bidiHandler.RLE?t&&e.session.getLine(r).charAt(0)!==e.session.$bidiHandler.RLE&&e.session.doc.insert({column:0,row:r},e.session.$bidiHandler.RLE):e.session.doc.removeInLine(r,0,1)},this.getPosLeft=function(e){e-=this.wrapIndent;var t=this.line.charAt(0)===this.RLE?1:0,n=e>t?this.session.getOverwrite()?e:e-1:t,i=r.getVisualFromLogicalIdx(n,this.bidiMap),s=this.bidiMap.bidiLevels,o=0;!this.session.getOverwrite()&&e<=t&&s[i]%2!=0&&i++;for(var u=0;u<i;u++)o+=this.charWidths[s[u]];return!this.session.getOverwrite()&&e>t&&s[i]%2==0&&(o+=this.charWidths[s[i]]),this.wrapIndent&&(o+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(o+=this.rtlLineOffset),o},this.getSelections=function(e,t){var i,n=this.bidiMap,r=n.bidiLevels,s=[],o=0,u=Math.min(e,t)-this.wrapIndent,a=Math.max(e,t)-this.wrapIndent,f=!1,l=!1,c=0;this.wrapIndent&&(o+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var h,p=0;p<r.length;p++)h=n.logicalFromVisual[p],i=r[p],(f=h>=u&&h<a)&&!l?c=o:!f&&l&&s.push({left:c,width:o-c}),o+=this.charWidths[i],l=f;f&&p===r.length&&s.push({left:c,width:o-c});if(this.isRtlDir)for(var d=0;d<s.length;d++)s[d].left+=this.rtlLineOffset;return s},this.offsetToCol=function(e){this.isRtlDir&&(e-=this.rtlLineOffset);var t=0,n=(e=Math.max(e,0),0),r=0,i=this.bidiMap.bidiLevels,s=this.charWidths[i[r]];this.wrapIndent&&(e-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(;e>n+s/2;){n+=s;if(r===i.length-1){s=0;break}s=this.charWidths[i[++r]]}return r>0&&i[r-1]%2!=0&&i[r]%2==0?(e<n&&r--,t=this.bidiMap.logicalFromVisual[r]):r>0&&i[r-1]%2==0&&i[r]%2!=0?t=1+(e>n?this.bidiMap.logicalFromVisual[r]:this.bidiMap.logicalFromVisual[r-1]):this.isRtlDir&&r===i.length-1&&0===s&&i[r-1]%2==0||!this.isRtlDir&&0===r&&i[r]%2!=0?t=1+this.bidiMap.logicalFromVisual[r]:(r>0&&i[r-1]%2!=0&&0!==s&&r--,t=this.bidiMap.logicalFromVisual[r]),0===t&&this.isRtlDir&&t++,t+this.wrapIndent}}).call(o.prototype),t.BidiHandler=o})),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],(function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/lang"),s=e("./lib/event_emitter").EventEmitter,o=e("./range").Range,u=function(e){this.session=e,this.doc=e.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var t=this;this.cursor.on("change",(function(e){t.$cursorChanged=!0,t.$silent||t._emit("changeCursor"),!t.$isEmpty&&!t.$silent&&t._emit("changeSelection"),!t.$keepDesiredColumnOnChange&&e.old.column!=e.value.column&&(t.$desiredColumn=null)})),this.anchor.on("change",(function(){t.$anchorChanged=!0,!t.$isEmpty&&!t.$silent&&t._emit("changeSelection")}))};(function(){r.implement(this,s),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(e,t){this.$isEmpty=!1,this.anchor.setPosition(e,t)},this.getAnchor=this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.isBackwards=function(){var e=this.anchor,t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column},this.getRange=function(){var e=this.anchor,t=this.lead;return this.$isEmpty?o.fromPoints(t,t):this.isBackwards()?o.fromPoints(t,e):o.fromPoints(e,t)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},this.setRange=this.setSelectionRange=function(e,t){var n=t?e.end:e.start,r=t?e.start:e.end;this.$setSelection(n.row,n.column,r.row,r.column)},this.$setSelection=function(e,t,n,r){var i=this.$isEmpty,s=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(e,t),this.cursor.setPosition(n,r),this.$isEmpty=!o.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||i!=this.$isEmpty||s)&&this._emit("changeSelection")},this.$moveSelection=function(e){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),e.call(this)},this.selectTo=function(e,t){this.$moveSelection((function(){this.moveCursorTo(e,t)}))},this.selectToPosition=function(e){this.$moveSelection((function(){this.moveCursorToPosition(e)}))},this.moveTo=function(e,t){this.clearSelection(),this.moveCursorTo(e,t)},this.moveToPosition=function(e){this.clearSelection(),this.moveCursorToPosition(e)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(e,t){if(void 0===t){var n=e||this.lead;e=n.row,t=n.column}return this.session.getWordRange(e,t)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var e=this.getCursor(),t=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(t)},this.getLineRange=function(e,t){var r,n="number"==typeof e?e:this.lead.row,i=this.session.getFoldLine(n);return i?(n=i.start.row,r=i.end.row):r=n,!0===t?new o(n,0,r,this.session.getLine(r).length):new o(n,0,r+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(e,t,n){var r=e.column,i=e.column+t;return n<0&&(r=e.column-t,i=e.column),this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(r,i).split(" ").length-1==t},this.moveCursorLeft=function(){var t,e=this.lead.getPosition();if(t=this.session.getFoldAt(e.row,e.column,-1))this.moveCursorTo(t.start.row,t.start.column);else if(0===e.column)e.row>0&&this.moveCursorTo(e.row-1,this.doc.getLine(e.row-1).length);else{var n=this.session.getTabSize();this.wouldMoveIntoSoftTab(e,n,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-n):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var t,e=this.lead.getPosition();if(t=this.session.getFoldAt(e.row,e.column,1))this.moveCursorTo(t.end.row,t.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var n=this.session.getTabSize();e=this.lead;this.wouldMoveIntoSoftTab(e,n,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,n):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var e=this.lead.row,t=this.lead.column,n=this.session.documentToScreenRow(e,t),r=this.session.screenToDocumentPosition(n,0),s=this.session.getDisplayLine(e,null,r.row,r.column).match(/^\s*/);s[0].length!=t&&!this.session.$useEmacsStyleLineStart&&(r.column+=s[0].length),this.moveCursorToPosition(r)},this.moveCursorLineEnd=function(){var e=this.lead,t=this.session.getDocumentLastRowColumnPosition(e.row,e.column);if(this.lead.column==t.column){var n=this.session.getLine(t.row);if(t.column==n.length){var r=n.search(/\s+$/);r>0&&(t.column=r)}}this.moveCursorTo(t.row,t.column)},this.moveCursorFileEnd=function(){var e=this.doc.getLength()-1,t=this.doc.getLine(e).length;this.moveCursorTo(e,t)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),r=n.substring(t);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var i=this.session.getFoldAt(e,t,1);if(i)this.moveCursorTo(i.end.row,i.end.column);else{this.session.nonTokenRe.exec(r)&&(t+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,r=n.substring(t));t>=n.length?(this.moveCursorTo(e,n.length),this.moveCursorRight(),e<this.doc.getLength()-1&&this.moveCursorWordRight()):(this.session.tokenRe.exec(r)&&(t+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,t))}},this.moveCursorLongWordLeft=function(){var n,e=this.lead.row,t=this.lead.column;if(n=this.session.getFoldAt(e,t,-1))this.moveCursorTo(n.start.row,n.start.column);else{var r=this.session.getFoldStringAt(e,t,-1);null==r&&(r=this.doc.getLine(e).substring(0,t));var s=i.stringReverse(r);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(s)&&(t-=this.session.nonTokenRe.lastIndex,s=s.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0);t<=0?(this.moveCursorTo(e,0),this.moveCursorLeft(),e>0&&this.moveCursorWordLeft()):(this.session.tokenRe.exec(s)&&(t-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,t))}},this.$shortWordEndIndex=function(e){var n,t=0,r=/\s/,i=this.session.tokenRe;i.lastIndex=0;if(this.session.tokenRe.exec(e))t=this.session.tokenRe.lastIndex;else{for(;(n=e[t])&&r.test(n);)t++;if(t<1){i.lastIndex=0;for(;(n=e[t])&&!i.test(n);){i.lastIndex=0,t++;if(r.test(n)){if(t>2){t--;break}for(;(n=e[t])&&r.test(n);)t++;if(t>2)break}}}}return i.lastIndex=0,t},this.moveCursorShortWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),r=n.substring(t),i=this.session.getFoldAt(e,t,1);if(i)return this.moveCursorTo(i.end.row,i.end.column);if(t==n.length){var s=this.doc.getLength();do{e++,r=this.doc.getLine(e)}while(e<s&&/^\s*$/.test(r));/^\s+/.test(r)||(r=""),t=0}var o=this.$shortWordEndIndex(r);this.moveCursorTo(e,t+o)},this.moveCursorShortWordLeft=function(){var n,e=this.lead.row,t=this.lead.column;if(n=this.session.getFoldAt(e,t,-1))return this.moveCursorTo(n.start.row,n.start.column);var r=this.session.getLine(e).substring(0,t);if(0===t){do{e--,r=this.doc.getLine(e)}while(e>0&&/^\s*$/.test(r));t=r.length,/\s+$/.test(r)||(r="")}var s=i.stringReverse(r),o=this.$shortWordEndIndex(s);return this.moveCursorTo(e,t-o)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(e,t){var r,n=this.session.documentToScreenPosition(this.lead.row,this.lead.column);0===t&&(0!==e&&(this.session.$bidiHandler.isBidiRow(n.row,this.lead.row)?(r=this.session.$bidiHandler.getPosLeft(n.column),n.column=Math.round(r/this.session.$bidiHandler.charWidths[0])):r=n.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?n.column=this.$desiredColumn:this.$desiredColumn=n.column);var i=this.session.screenToDocumentPosition(n.row+e,n.column,r);0!==e&&0===t&&i.row===this.lead.row&&i.column===this.lead.column&&this.session.lineWidgets&&this.session.lineWidgets[i.row]&&(i.row>0||e>0)&&i.row++,this.moveCursorTo(i.row,i.column+t,0===t)},this.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)},this.moveCursorTo=function(e,t,n){var r=this.session.getFoldAt(e,t,1);r&&(e=r.start.row,t=r.start.column),this.$keepDesiredColumnOnChange=!0;var i=this.session.getLine(e);/[\uDC00-\uDFFF]/.test(i.charAt(t))&&i.charAt(t-1)&&(this.lead.row==e&&this.lead.column==t+1?t-=1:t+=1),this.lead.setPosition(e,t),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},this.moveCursorToScreen=function(e,t,n){var r=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(r.row,r.column,n)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start),this.$desiredColumn=e.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(e){var t=this.getRange();return e?(e.start.column=t.start.column,e.start.row=t.start.row,e.end.column=t.end.column,e.end.row=t.end.row):e=t,e.cursor=this.isBackwards()?e.start:e.end,e.desiredColumn=this.$desiredColumn,e},this.getRangeOfMovements=function(e){var t=this.getCursor();try{e(this);var n=this.getCursor();return o.fromPoints(t,n)}catch(r){return o.fromPoints(t,t)}finally{this.moveCursorToPosition(t)}},this.toJSON=function(){if(this.rangeCount)var e=this.ranges.map((function(e){var t=e.clone();return t.isBackwards=e.cursor==e.start,t}));else{(e=this.getRange()).isBackwards=this.isBackwards()}return e},this.fromJSON=function(e){if(null==e.start){if(this.rangeList&&e.length>1){this.toSingleRange(e[0]);for(var t=e.length;t--;){var n=o.fromPoints(e[t].start,e[t].end);e[t].isBackwards&&(n.cursor=n.start),this.addRange(n,!0)}return}e=e[0]}this.rangeList&&this.toSingleRange(e),this.setSelectionRange(e,e.isBackwards)},this.isEqual=function(e){if((e.length||this.rangeCount)&&e.length!=this.rangeCount)return!1;if(!e.length||!this.ranges)return this.getRange().isEqual(e);for(var t=this.ranges.length;t--;)if(!this.ranges[t].isEqual(e[t]))return!1;return!0}}).call(u.prototype),t.Selection=u})),ace.define("ace/tokenizer",["require","exports","module","ace/config"],(function(e,t,n){"use strict";var r=e("./config"),i=2e3,s=function(e){this.states=e,this.regExps={},this.matchMappings={};for(var t in this.states){for(var n=this.states[t],r=[],i=0,s=this.matchMappings[t]={defaultToken:"text"},o="g",u=[],a=0;a<n.length;a++){var f=n[a];f.defaultToken&&(s.defaultToken=f.defaultToken),f.caseInsensitive&&(o="gi");if(null!=f.regex){f.regex instanceof RegExp&&(f.regex=f.regex.toString().slice(1,-1));var l=f.regex,c=new RegExp("(?:("+l+")|(.))").exec("a").length-2;Array.isArray(f.token)?1==f.token.length||1==c?f.token=f.token[0]:c-1!=f.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:f,groupCount:c-1}),f.token=f.token[0]):(f.tokenArray=f.token,f.token=null,f.onMatch=this.$arrayTokens):"function"==typeof f.token&&!f.onMatch&&(f.onMatch=c>1?this.$applyToken:f.token),c>1&&(/\\\d/.test(f.regex)?l=f.regex.replace(/\\([0-9]+)/g,(function(e,t){return"\\"+(parseInt(t,10)+i+1)})):(c=1,l=this.removeCapturingGroups(f.regex)),!f.splitRegex&&"string"!=typeof f.token&&u.push(f)),s[i]=a,i+=c,r.push(l),f.onMatch||(f.onMatch=null)}}r.length||(s[0]=0,r.push("$")),u.forEach((function(e){e.splitRegex=this.createSplitterRegexp(e.regex,o)}),this),this.regExps[t]=new RegExp("("+r.join(")|(")+")|($)",o)}};(function(){this.$setMaxTokenCount=function(e){i=0|e},this.$applyToken=function(e){var t=this.splitRegex.exec(e).slice(1),n=this.token.apply(this,t);if("string"==typeof n)return[{type:n,value:e}];for(var r=[],i=0,s=n.length;i<s;i++)t[i]&&(r[r.length]={type:n[i],value:t[i]});return r},this.$arrayTokens=function(e){if(!e)return[];var t=this.splitRegex.exec(e);if(!t)return"text";for(var n=[],r=this.tokenArray,i=0,s=r.length;i<s;i++)t[i+1]&&(n[n.length]={type:r[i],value:t[i+1]});return n},this.removeCapturingGroups=function(e){return e.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!]|(\()/g,(function(e,t){return t?"(?:":e}))},this.createSplitterRegexp=function(e,t){if(-1!=e.indexOf("(?=")){var n=0,r=!1,i={};e.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,(function(e,t,s,o,u,a){return r?r="]"!=u:u?r=!0:o?(n==i.stack&&(i.end=a+1,i.stack=-1),n--):s&&(n++,1!=s.length&&(i.stack=n,i.start=a)),e})),null!=i.end&&/^\)*$/.test(e.substr(i.end))&&(e=e.substring(0,i.start)+e.substr(i.end))}return"^"!=e.charAt(0)&&(e="^"+e),"$"!=e.charAt(e.length-1)&&(e+="$"),new RegExp(e,(t||"").replace("g",""))},this.getLineTokens=function(e,t){if(t&&"string"!=typeof t){var n=t.slice(0);"#tmp"===(t=n[0])&&(n.shift(),t=n.shift())}else n=[];var r=t||"start",s=this.states[r];s||(r="start",s=this.states[r]);var o=this.matchMappings[r],u=this.regExps[r];u.lastIndex=0;for(var a,f=[],l=0,c=0,h={type:null,value:""};a=u.exec(e);){var p=o.defaultToken,d=null,v=a[0],m=u.lastIndex;if(m-v.length>l){var g=e.substring(l,m-v.length);h.type==p?h.value+=g:(h.type&&f.push(h),h={type:p,value:g})}for(var y=0;y<a.length-2;y++)if(void 0!==a[y+1]){p=(d=s[o[y]]).onMatch?d.onMatch(v,r,n,e):d.token,d.next&&(r="string"==typeof d.next?d.next:d.next(r,n),(s=this.states[r])||(this.reportError("state doesn't exist",r),r="start",s=this.states[r]),o=this.matchMappings[r],l=m,(u=this.regExps[r]).lastIndex=m),d.consumeLineEnd&&(l=m);break}if(v)if("string"==typeof p)d&&!1===d.merge||h.type!==p?(h.type&&f.push(h),h={type:p,value:v}):h.value+=v;else if(p){h.type&&f.push(h),h={type:null,value:""};for(y=0;y<p.length;y++)f.push(p[y])}if(l==e.length)break;l=m;if(c++>i){c>2*e.length&&this.reportError("infinite loop with in ace tokenizer",{startState:t,line:e});for(;l<e.length;)h.type&&f.push(h),h={value:e.substring(l,l+=500),type:"overflow"};r="start",n=[];break}}return h.type&&f.push(h),n.length>1&&n[0]!==r&&n.unshift("#tmp",r),{tokens:f,state:n.length?n:r}},this.reportError=r.reportError}).call(s.prototype),t.Tokenizer=s})),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],(function(e,t,n){"use strict";var r=e("../lib/lang"),i=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(e,t){if(t)for(var n in e){for(var r=e[n],i=0;i<r.length;i++){var s=r[i];(s.next||s.onMatch)&&("string"==typeof s.next&&0!==s.next.indexOf(t)&&(s.next=t+s.next),s.nextState&&0!==s.nextState.indexOf(t)&&(s.nextState=t+s.nextState))}this.$rules[t+n]=r}else for(var n in e)this.$rules[n]=e[n]},this.getRules=function(){return this.$rules},this.embedRules=function(e,t,n,i,s){var o="function"==typeof e?(new e).getRules():e;if(i)for(var u=0;u<i.length;u++)i[u]=t+i[u];else{i=[];for(var a in o)i.push(t+a)}this.addRules(o,t);if(n){var f=Array.prototype[s?"push":"unshift"];for(u=0;u<i.length;u++)f.apply(this.$rules[i[u]],r.deepCopy(n))}this.$embeds||(this.$embeds=[]),this.$embeds.push(t)},this.getEmbeds=function(){return this.$embeds};var e=function(e,t){return("start"!=e||t.length)&&t.unshift(this.nextState,e),this.nextState},t=function(e,t){return t.shift(),t.shift()||"start"};this.normalizeRules=function(){var n=0,r=this.$rules;Object.keys(r).forEach((function i(s){var o=r[s];o.processed=!0;for(var u=0;u<o.length;u++){var a=o[u],f=null;Array.isArray(a)&&(f=a,a={}),!a.regex&&a.start&&(a.regex=a.start,a.next||(a.next=[]),a.next.push({defaultToken:a.token},{token:a.token+".end",regex:a.end||a.start,next:"pop"}),a.token=a.token+".start",a.push=!0);var l=a.next||a.push;if(l&&Array.isArray(l)){var c=a.stateName;c||("string"!=typeof(c=a.token)&&(c=c[0]||""),r[c]&&(c+=n++)),r[c]=l,a.next=c,i(c)}else"pop"==l&&(a.next=t);a.push&&(a.nextState=a.next||a.push,a.next=e,delete a.push);if(a.rules)for(var h in a.rules)r[h]?r[h].push&&r[h].push.apply(r[h],a.rules[h]):r[h]=a.rules[h];var p="string"==typeof a?a:a.include;p&&(f=Array.isArray(p)?p.map((function(e){return r[e]})):r[p]);if(f){var d=[u,1].concat(f);a.noEscape&&(d=d.filter((function(e){return!e.next}))),o.splice.apply(o,d),u--}a.keywordMap&&(a.token=this.createKeywordMapper(a.keywordMap,a.defaultToken||"text",a.caseInsensitive),delete a.defaultToken)}}),this)},this.createKeywordMapper=function(e,t,n,r){var i=Object.create(null);return Object.keys(e).forEach((function(t){var s=e[t];n&&(s=s.toLowerCase());for(var o=s.split(r||"|"),u=o.length;u--;)i[o[u]]=t})),Object.getPrototypeOf(i)&&(i.__proto__=null),this.$keywordList=Object.keys(i),e=null,n?function(e){return i[e.toLowerCase()]||t}:function(e){return i[e]||t}},this.getKeywords=function(){return this.$keywords}}).call(i.prototype),t.TextHighlightRules=i})),ace.define("ace/mode/behaviour",["require","exports","module"],(function(e,t,n){"use strict";var r=function(){this.$behaviours={}};(function(){this.add=function(e,t,n){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=n},this.addBehaviours=function(e){for(var t in e)for(var n in e[t])this.add(t,n,e[t][n])},this.remove=function(e){this.$behaviours&&this.$behaviours[e]&&delete this.$behaviours[e]},this.inherit=function(e,t){if("function"==typeof e)var n=(new e).getBehaviours(t);else n=e.getBehaviours(t);this.addBehaviours(n)},this.getBehaviours=function(e){if(!e)return this.$behaviours;for(var t={},n=0;n<e.length;n++)this.$behaviours[e[n]]&&(t[e[n]]=this.$behaviours[e[n]]);return t}}).call(r.prototype),t.Behaviour=r})),ace.define("ace/token_iterator",["require","exports","module","ace/range"],(function(e,t,n){"use strict";var r=e("./range").Range,i=function(e,t,n){this.$session=e,this.$row=t,this.$rowTokens=e.getTokens(t);var r=e.getTokenAt(t,n);this.$tokenIndex=r?r.index:-1};(function(){this.stepBackward=function(){this.$tokenIndex-=1;for(;this.$tokenIndex<0;){this.$row-=1;if(this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){this.$tokenIndex+=1;for(var e;this.$tokenIndex>=this.$rowTokens.length;){this.$row+=1,e||(e=this.$session.getLength());if(this.$row>=e)return this.$row=e-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var e=this.$rowTokens,t=this.$tokenIndex,n=e[t].start;if(void 0!==n)return n;n=0;for(;t>0;)n+=e[t-=1].value.length;return n},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var e=this.$rowTokens[this.$tokenIndex],t=this.getCurrentTokenColumn();return new r(this.$row,t,this.$row,t+e.value.length)}}).call(i.prototype),t.TokenIterator=i})),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],(function(e,t,n){"use strict";var f,r=e("../../lib/oop"),i=e("../behaviour").Behaviour,s=e("../../token_iterator").TokenIterator,o=e("../../lib/lang"),u=["text","paren.rparen","punctuation.operator"],a=["text","paren.rparen","punctuation.operator","comment"],l={},c={'"':'"',"'":"'"},h=function(e){var t=-1;e.multiSelect&&(t=e.selection.index,l.rangeCount!=e.multiSelect.rangeCount&&(l={rangeCount:e.multiSelect.rangeCount}));if(l[t])return f=l[t];f=l[t]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},p=function(e,t,n,r){var i=e.end.row-e.start.row;return{text:n+t+r,selection:[0,e.start.column+1,i,e.end.column+(i?0:1)]}},d=function(e){this.add("braces","insertion",(function(t,n,r,i,s){var u=r.getCursorPosition(),a=i.doc.getLine(u.row);if("{"==s){h(r);var l=r.getSelectionRange(),c=i.doc.getTextRange(l);if(""!==c&&"{"!==c&&r.getWrapBehavioursEnabled())return p(l,c,"{","}");if(d.isSaneInsertion(r,i))return/[\]\}\)]/.test(a[u.column])||r.inMultiSelectMode||e&&e.braces?(d.recordAutoInsert(r,i,"}"),{text:"{}",selection:[1,1]}):(d.recordMaybeInsert(r,i,"{"),{text:"{",selection:[1,1]})}else if("}"==s){h(r);if("}"==a.substring(u.column,u.column+1)){if(null!==i.$findOpeningBracket("}",{column:u.column+1,row:u.row})&&d.isAutoInsertedClosing(u,a,s))return d.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else{if("\n"==s||"\r\n"==s){h(r);var g="";d.isMaybeInsertedClosing(u,a)&&(g=o.stringRepeat("}",f.maybeInsertedBrackets),d.clearMaybeInsertedClosing());if("}"===a.substring(u.column,u.column+1)){var y=i.findMatchingBracket({row:u.row,column:u.column+1},"}");if(!y)return null;var b=this.$getIndent(i.getLine(y.row))}else{if(!g){d.clearMaybeInsertedClosing();return}b=this.$getIndent(a)}var w=b+i.getTabString();return{text:"\n"+w+"\n"+b+g,selection:[1,w.length,1,w.length]}}d.clearMaybeInsertedClosing()}})),this.add("braces","deletion",(function(e,t,n,r,i){var s=r.doc.getTextRange(i);if(!i.isMultiLine()&&"{"==s){h(n);if("}"==r.doc.getLine(i.start.row).substring(i.end.column,i.end.column+1))return i.end.column++,i;f.maybeInsertedBrackets--}})),this.add("parens","insertion",(function(e,t,n,r,i){if("("==i){h(n);var s=n.getSelectionRange(),o=r.doc.getTextRange(s);if(""!==o&&n.getWrapBehavioursEnabled())return p(s,o,"(",")");if(d.isSaneInsertion(n,r))return d.recordAutoInsert(n,r,")"),{text:"()",selection:[1,1]}}else if(")"==i){h(n);var u=n.getCursorPosition(),a=r.doc.getLine(u.row);if(")"==a.substring(u.column,u.column+1)){if(null!==r.$findOpeningBracket(")",{column:u.column+1,row:u.row})&&d.isAutoInsertedClosing(u,a,i))return d.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}})),this.add("parens","deletion",(function(e,t,n,r,i){var s=r.doc.getTextRange(i);if(!i.isMultiLine()&&"("==s){h(n);if(")"==r.doc.getLine(i.start.row).substring(i.start.column+1,i.start.column+2))return i.end.column++,i}})),this.add("brackets","insertion",(function(e,t,n,r,i){if("["==i){h(n);var s=n.getSelectionRange(),o=r.doc.getTextRange(s);if(""!==o&&n.getWrapBehavioursEnabled())return p(s,o,"[","]");if(d.isSaneInsertion(n,r))return d.recordAutoInsert(n,r,"]"),{text:"[]",selection:[1,1]}}else if("]"==i){h(n);var u=n.getCursorPosition(),a=r.doc.getLine(u.row);if("]"==a.substring(u.column,u.column+1)){if(null!==r.$findOpeningBracket("]",{column:u.column+1,row:u.row})&&d.isAutoInsertedClosing(u,a,i))return d.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}})),this.add("brackets","deletion",(function(e,t,n,r,i){var s=r.doc.getTextRange(i);if(!i.isMultiLine()&&"["==s){h(n);if("]"==r.doc.getLine(i.start.row).substring(i.start.column+1,i.start.column+2))return i.end.column++,i}})),this.add("string_dquotes","insertion",(function(e,t,n,r,i){var s=r.$mode.$quotes||c;if(1==i.length&&s[i]){if(this.lineCommentStart&&-1!=this.lineCommentStart.indexOf(i))return;h(n);var o=i,u=n.getSelectionRange(),a=r.doc.getTextRange(u);if(""!==a&&(1!=a.length||!s[a])&&n.getWrapBehavioursEnabled())return p(u,a,o,o);if(!a){var f=n.getCursorPosition(),l=r.doc.getLine(f.row),d=l.substring(f.column-1,f.column),v=l.substring(f.column,f.column+1),m=r.getTokenAt(f.row,f.column),g=r.getTokenAt(f.row,f.column+1);if("\\"==d&&m&&/escape/.test(m.type))return null;var w,y=m&&/string|escape/.test(m.type),b=!g||/string|escape/.test(g.type);if(v==o)(w=y!==b)&&/string\.end/.test(g.type)&&(w=!1);else{if(y&&!b)return null;if(y&&b)return null;var E=r.$mode.tokenRe;E.lastIndex=0;var S=E.test(d);E.lastIndex=0;var x=E.test(d);if(S||x)return null;if(v&&!/[\s;,.})\]\\]/.test(v))return null;var T=l[f.column-2];if(d==o&&(T==o||E.test(T)))return null;w=!0}return{text:w?o+o:"",selection:[1,1]}}}})),this.add("string_dquotes","deletion",(function(e,t,n,r,i){var s=r.$mode.$quotes||c,o=r.doc.getTextRange(i);if(!i.isMultiLine()&&s.hasOwnProperty(o)){h(n);if(r.doc.getLine(i.start.row).substring(i.start.column+1,i.start.column+2)==o)return i.end.column++,i}}))};d.isSaneInsertion=function(e,t){var n=e.getCursorPosition(),r=new s(t,n.row,n.column);if(!this.$matchTokenType(r.getCurrentToken()||"text",u)){var i=new s(t,n.row,n.column+1);if(!this.$matchTokenType(i.getCurrentToken()||"text",u))return!1}return r.stepForward(),r.getCurrentTokenRow()!==n.row||this.$matchTokenType(r.getCurrentToken()||"text",a)},d.$matchTokenType=function(e,t){return t.indexOf(e.type||e)>-1},d.recordAutoInsert=function(e,t,n){var r=e.getCursorPosition(),i=t.doc.getLine(r.row);this.isAutoInsertedClosing(r,i,f.autoInsertedLineEnd[0])||(f.autoInsertedBrackets=0),f.autoInsertedRow=r.row,f.autoInsertedLineEnd=n+i.substr(r.column),f.autoInsertedBrackets++},d.recordMaybeInsert=function(e,t,n){var r=e.getCursorPosition(),i=t.doc.getLine(r.row);this.isMaybeInsertedClosing(r,i)||(f.maybeInsertedBrackets=0),f.maybeInsertedRow=r.row,f.maybeInsertedLineStart=i.substr(0,r.column)+n,f.maybeInsertedLineEnd=i.substr(r.column),f.maybeInsertedBrackets++},d.isAutoInsertedClosing=function(e,t,n){return f.autoInsertedBrackets>0&&e.row===f.autoInsertedRow&&n===f.autoInsertedLineEnd[0]&&t.substr(e.column)===f.autoInsertedLineEnd},d.isMaybeInsertedClosing=function(e,t){return f.maybeInsertedBrackets>0&&e.row===f.maybeInsertedRow&&t.substr(e.column)===f.maybeInsertedLineEnd&&t.substr(0,e.column)==f.maybeInsertedLineStart},d.popAutoInsertedClosing=function(){f.autoInsertedLineEnd=f.autoInsertedLineEnd.substr(1),f.autoInsertedBrackets--},d.clearMaybeInsertedClosing=function(){f&&(f.maybeInsertedBrackets=0,f.maybeInsertedRow=-1)},r.inherits(d,i),t.CstyleBehaviour=d})),ace.define("ace/unicode",["require","exports","module"],(function(e,t,n){"use strict";for(var r=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],i=0,s=[],o=0;o<r.length;o+=2)s.push(i+=r[o]),r[o+1]&&s.push(45,i+=r[o+1]);t.wordChars=String.fromCharCode.apply(null,s)})),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],(function(e,t,n){"use strict";var r=e("../config"),i=e("../tokenizer").Tokenizer,s=e("./text_highlight_rules").TextHighlightRules,o=e("./behaviour/cstyle").CstyleBehaviour,u=e("../unicode"),a=e("../lib/lang"),f=e("../token_iterator").TokenIterator,l=e("../range").Range,c=function(){this.HighlightRules=s};(function(){this.$defaultBehaviour=new o,this.tokenRe=new RegExp("^["+u.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+u.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new i(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(e,t,n,r){function w(e){for(var t=n;t<=r;t++)e(i.getLine(t),t)}var i=t.doc,s=!0,o=!0,u=1/0,f=t.getTabSize(),l=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))p=this.lineCommentStart.map(a.escapeRegExp).join("|"),c=this.lineCommentStart[0];else p=a.escapeRegExp(this.lineCommentStart),c=this.lineCommentStart;p=new RegExp("^(\\s*)(?:"+p+") ?"),l=t.getUseSoftTabs();m=function(e,t){var n=e.match(p);if(n){var r=n[1].length,s=n[0].length;!b(e,r,s)&&" "==n[0][s-1]&&s--,i.removeInLine(t,r,s)}};var y=c+" ",b=(v=function(e,t){s&&!/\S/.test(e)||(b(e,u,u)?i.insertInLine({row:t,column:u},y):i.insertInLine({row:t,column:u},c))},g=function(e,t){return p.test(e)},function(e,t,n){for(var r=0;t--&&" "==e.charAt(t);)r++;if(r%f!=0)return!1;for(r=0;" "==e.charAt(n++);)r++;return f>2?r%f!=f-1:r%f==0})}else{if(!this.blockComment)return!1;var c=this.blockComment.start,h=this.blockComment.end,p=new RegExp("^(\\s*)(?:"+a.escapeRegExp(c)+")"),d=new RegExp("(?:"+a.escapeRegExp(h)+")\\s*$"),v=function(e,t){g(e,t)||s&&!/\S/.test(e)||(i.insertInLine({row:t,column:e.length},h),i.insertInLine({row:t,column:u},c))},m=function(e,t){var n;(n=e.match(d))&&i.removeInLine(t,e.length-n[0].length,e.length),(n=e.match(p))&&i.removeInLine(t,n[1].length,n[0].length)},g=function(e,n){if(p.test(e))return!0;for(var r=t.getTokens(n),i=0;i<r.length;i++)if("comment"===r[i].type)return!0}}var E=1/0;w((function(e,t){var n=e.search(/\S/);-1!==n?(n<u&&(u=n),o&&!g(e,t)&&(o=!1)):E>e.length&&(E=e.length)})),u==1/0&&(u=E,s=!1,o=!1),l&&u%f!=0&&(u=Math.floor(u/f)*f),w(o?m:v)},this.toggleBlockComment=function(e,t,n,r){var i=this.blockComment;if(i){!i.start&&i[0]&&(i=i[0]);var c,h,o=(s=new f(t,r.row,r.column)).getCurrentToken(),a=(t.selection,t.selection.toOrientedRange());if(o&&/comment/.test(o.type)){for(var p,d;o&&/comment/.test(o.type);){if(-1!=(v=o.value.indexOf(i.start))){var m=s.getCurrentTokenRow(),g=s.getCurrentTokenColumn()+v;p=new l(m,g,m,g+i.start.length);break}o=s.stepBackward()}var s;for(o=(s=new f(t,r.row,r.column)).getCurrentToken();o&&/comment/.test(o.type);){var v;if(-1!=(v=o.value.indexOf(i.end))){m=s.getCurrentTokenRow(),g=s.getCurrentTokenColumn()+v;d=new l(m,g,m,g+i.end.length);break}o=s.stepForward()}d&&t.remove(d),p&&(t.remove(p),c=p.start.row,h=-i.start.length)}else h=i.start.length,c=n.start.row,t.insert(n.end,i.end),t.insert(n.start,i.start);a.start.row==c&&(a.start.column+=h),a.end.row==c&&(a.end.column+=h),t.selection.fromOrientedRange(a)}},this.getNextLineIndent=function(e,t,n){return this.$getIndent(t)},this.checkOutdent=function(e,t,n){return!1},this.autoOutdent=function(e,t,n){},this.$getIndent=function(e){return e.match(/^\s*/)[0]},this.createWorker=function(e){return null},this.createModeDelegates=function(e){this.$embeds=[],this.$modes={};for(var t in e)if(e[t]){var n=e[t],i=n.prototype.$id,s=r.$modes[i];s||(r.$modes[i]=s=new n),r.$modes[t]||(r.$modes[t]=s),this.$embeds.push(t),this.$modes[t]=s}var o=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"];for(t=0;t<o.length;t++)!function(e){var n=o[t],r=e[n];e[o[t]]=function(){return this.$delegator(n,arguments,r)}}(this)},this.$delegator=function(e,t,n){var r=t[0]||"start";if("string"!=typeof r){if(Array.isArray(r[2])){var i=r[2][r[2].length-1];if(s=this.$modes[i])return s[e].apply(s,[r[1]].concat([].slice.call(t,1)))}r=r[0]||"start"}for(var o=0;o<this.$embeds.length;o++)if(this.$modes[this.$embeds[o]]){var u=r.split(this.$embeds[o]);if(!u[0]&&u[1]){t[0]=u[1];var s;return(s=this.$modes[this.$embeds[o]])[e].apply(s,t)}}var a=n.apply(this,t);return n?a:void 0},this.transformAction=function(e,t,n,r,i){if(this.$behaviour){var s=this.$behaviour.getBehaviours();for(var o in s)if(s[o][t]){var u=s[o][t].apply(this,arguments);if(u)return u}}},this.getKeywords=function(e){if(!this.completionKeywords){var t=this.$tokenizer.rules,n=[];for(var r in t)for(var i=t[r],s=0,o=i.length;s<o;s++)if("string"==typeof i[s].token)/keyword|support|storage/.test(i[s].token)&&n.push(i[s].regex);else if("object"==typeof i[s].token)for(var u=0,a=i[s].token.length;u<a;u++)if(/keyword|support|storage/.test(i[s].token[u])){r=i[s].regex.match(/\(.+?\)/g)[u];n.push(r.substr(1,r.length-2))}this.completionKeywords=n}return e?n.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(e,t,n,r){return(this.$keywordList||this.$createKeywordList()).map((function(e){return{name:e,value:e,score:0,meta:"keyword"}}))},this.$id="ace/mode/text"}).call(c.prototype),t.Mode=c})),ace.define("ace/apply_delta",["require","exports","module"],(function(e,t,n){"use strict";t.applyDelta=function(e,t,n){var r=t.start.row,i=t.start.column,s=e[r]||"";switch(t.action){case"insert":if(1===t.lines.length)e[r]=s.substring(0,i)+t.lines[0]+s.substring(i);else{var u=[r,1].concat(t.lines);e.splice.apply(e,u),e[r]=s.substring(0,i)+e[r],e[r+t.lines.length-1]+=s.substring(i)}break;case"remove":var a=t.end.column,f=t.end.row;r===f?e[r]=s.substring(0,i)+s.substring(a):e.splice(r,f-r+1,s.substring(0,i)+e[f].substring(a))}}})),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,s=t.Anchor=function(e,t,n){this.$onChange=this.onChange.bind(this),this.attach(e),void 0===n?this.setPosition(t.row,t.column):this.setPosition(t,n)};(function(){function e(e,t,n){var r=n?e.column<=t.column:e.column<t.column;return e.row<t.row||e.row==t.row&&r}function t(t,n,r){var i="insert"==t.action,s=(i?1:-1)*(t.end.row-t.start.row),o=(i?1:-1)*(t.end.column-t.start.column),u=t.start,a=i?u:t.end;return e(n,u,r)?{row:n.row,column:n.column}:e(a,n,!r)?{row:n.row+s,column:n.column+(n.row==a.row?o:0)}:{row:u.row,column:u.column}}r.implement(this,i),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(e){if(!(e.start.row==e.end.row&&e.start.row!=this.row||e.start.row>this.row)){var n=t(e,{row:this.row,column:this.column},this.$insertRight);this.setPosition(n.row,n.column,!0)}},this.setPosition=function(e,t,n){var r;r=n?{row:e,column:t}:this.$clipPositionToDocument(e,t);if(this.row!=r.row||this.column!=r.column){var i={row:this.row,column:this.column};this.row=r.row,this.column=r.column,this._signal("change",{old:i,value:r})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(e){this.document=e||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(e,t){var n={};return e>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):e<0?(n.row=0,n.column=0):(n.row=e,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,t))),t<0&&(n.column=0),n}}).call(s.prototype)})),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],(function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./apply_delta").applyDelta,s=e("./lib/event_emitter").EventEmitter,o=e("./range").Range,u=e("./anchor").Anchor,a=function(e){this.$lines=[""],0===e.length?this.$lines=[""]:Array.isArray(e)?this.insertMergedLines({row:0,column:0},e):this.insert({row:0,column:0},e)};(function(){r.implement(this,s),this.setValue=function(e){var t=this.getLength()-1;this.remove(new o(0,0,t,this.getLine(t).length)),this.insert({row:0,column:0},e)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(e,t){return new u(this,e,t)},0==="aaa".split(/a/).length?this.$split=function(e){return e.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(e){return e.split(/\r\n|\r|\n/)},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=t?t[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(e){this.$newLineMode!==e&&(this.$newLineMode=e,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(e){return"\r\n"==e||"\r"==e||"\n"==e},this.getLine=function(e){return this.$lines[e]||""},this.getLines=function(e,t){return this.$lines.slice(e,t+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(e){return this.getLinesForRange(e).join(this.getNewLineCharacter())},this.getLinesForRange=function(e){var t;if(e.start.row===e.end.row)t=[this.getLine(e.start.row).substring(e.start.column,e.end.column)];else{(t=this.getLines(e.start.row,e.end.row))[0]=(t[0]||"").substring(e.start.column);var n=t.length-1;e.end.row-e.start.row==n&&(t[n]=t[n].substring(0,e.end.column))}return t},this.insertLines=function(e,t){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(e,t)},this.removeLines=function(e,t){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(e,t)},this.insertNewLine=function(e){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(e,["",""])},this.insert=function(e,t){return this.getLength()<=1&&this.$detectNewLine(t),this.insertMergedLines(e,this.$split(t))},this.insertInLine=function(e,t){var n=this.clippedPos(e.row,e.column),r=this.pos(e.row,e.column+t.length);return this.applyDelta({start:n,end:r,action:"insert",lines:[t]},!0),this.clonePos(r)},this.clippedPos=function(e,t){var n=this.getLength();void 0===e?e=n:e<0?e=0:e>=n&&(e=n-1,t=void 0);var r=this.getLine(e);return null==t&&(t=r.length),{row:e,column:t=Math.min(Math.max(t,0),r.length)}},this.clonePos=function(e){return{row:e.row,column:e.column}},this.pos=function(e,t){return{row:e,column:t}},this.$clipPosition=function(e){var t=this.getLength();return e.row>=t?(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length):(e.row=Math.max(0,e.row),e.column=Math.min(Math.max(e.column,0),this.getLine(e.row).length)),e},this.insertFullLines=function(e,t){var n=0;(e=Math.min(Math.max(e,0),this.getLength()))<this.getLength()?(t=t.concat([""]),n=0):(t=[""].concat(t),e--,n=this.$lines[e].length),this.insertMergedLines({row:e,column:n},t)},this.insertMergedLines=function(e,t){var n=this.clippedPos(e.row,e.column),r={row:n.row+t.length-1,column:(1==t.length?n.column:0)+t[t.length-1].length};return this.applyDelta({start:n,end:r,action:"insert",lines:t}),this.clonePos(r)},this.remove=function(e){var t=this.clippedPos(e.start.row,e.start.column),n=this.clippedPos(e.end.row,e.end.column);return this.applyDelta({start:t,end:n,action:"remove",lines:this.getLinesForRange({start:t,end:n})}),this.clonePos(t)},this.removeInLine=function(e,t,n){var r=this.clippedPos(e,t),i=this.clippedPos(e,n);return this.applyDelta({start:r,end:i,action:"remove",lines:this.getLinesForRange({start:r,end:i})},!0),this.clonePos(r)},this.removeFullLines=function(e,t){e=Math.min(Math.max(0,e),this.getLength()-1);var n=(t=Math.min(Math.max(0,t),this.getLength()-1))==this.getLength()-1&&e>0,r=t<this.getLength()-1,i=n?e-1:e,s=n?this.getLine(i).length:0,u=r?t+1:t,a=r?0:this.getLine(u).length,f=new o(i,s,u,a),l=this.$lines.slice(e,t+1);return this.applyDelta({start:f.start,end:f.end,action:"remove",lines:this.getLinesForRange(f)}),l},this.removeNewLine=function(e){e<this.getLength()-1&&e>=0&&this.applyDelta({start:this.pos(e,this.getLine(e).length),end:this.pos(e+1,0),action:"remove",lines:["",""]})},this.replace=function(e,t){e instanceof o||(e=o.fromPoints(e.start,e.end));if(0===t.length&&e.isEmpty())return e.start;if(t==this.getTextRange(e))return e.end;this.remove(e);return t?this.insert(e.start,t):e.start},this.applyDeltas=function(e){for(var t=0;t<e.length;t++)this.applyDelta(e[t])},this.revertDeltas=function(e){for(var t=e.length-1;t>=0;t--)this.revertDelta(e[t])},this.applyDelta=function(e,t){var n="insert"==e.action;(n?e.lines.length<=1&&!e.lines[0]:!o.comparePoints(e.start,e.end))||(n&&e.lines.length>2e4?this.$splitAndapplyLargeDelta(e,2e4):(i(this.$lines,e,t),this._signal("change",e)))},this.$splitAndapplyLargeDelta=function(e,t){for(var n=e.lines,r=n.length-t+1,i=e.start.row,s=e.start.column,o=0,u=0;o<r;o=u){u+=t-1;var a=n.slice(o,u);a.push(""),this.applyDelta({start:this.pos(i+o,s),end:this.pos(i+u,s=0),action:e.action,lines:a},!0)}e.lines=n.slice(o),e.start.row=i+o,e.start.column=s,this.applyDelta(e,!0)},this.revertDelta=function(e){this.applyDelta({start:this.clonePos(e.start),end:this.clonePos(e.end),action:"insert"==e.action?"remove":"insert",lines:e.lines.slice()})},this.indexToPosition=function(e,t){for(var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,i=t||0,s=n.length;i<s;i++)if((e-=n[i].length+r)<0)return{row:i,column:e+n[i].length+r};return{row:s-1,column:e+n[s-1].length+r}},this.positionToIndex=function(e,t){for(var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,i=0,s=Math.min(e.row,n.length),o=t||0;o<s;++o)i+=n[o].length+r;return i+e.column}}).call(a.prototype),t.Document=a})),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,s=function(e,t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var n=this;this.$worker=function(){if(n.running){for(var e=new Date,t=n.currentLine,r=-1,i=n.doc,s=t;n.lines[t];)t++;var o=i.getLength(),u=0;n.running=!1;for(;t<o;){n.$tokenizeRow(t),r=t;do{t++}while(n.lines[t]);if(++u%5==0&&new Date-e>20){n.running=setTimeout(n.$worker,20);break}}n.currentLine=t,-1==r&&(r=t),s<=r&&n.fireUpdateEvent(s,r)}}};(function(){r.implement(this,i),this.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(e,t){var n={first:e,last:t};this._signal("update",{data:n})},this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(e){var t=e.start.row,n=e.end.row-t;if(0===n)this.lines[t]=null;else if("remove"==e.action)this.lines.splice(t,n+1,null),this.states.splice(t,n+1,null);else{var r=Array(n+1);r.unshift(t,1),this.lines.splice.apply(this.lines,r),this.states.splice.apply(this.states,r)}this.currentLine=Math.min(t,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)},this.getState=function(e){return this.currentLine==e&&this.$tokenizeRow(e),this.states[e]||"start"},this.$tokenizeRow=function(e){var t=this.doc.getLine(e),n=this.states[e-1],r=this.tokenizer.getLineTokens(t,n,e);return this.states[e]+""!=r.state+""?(this.states[e]=r.state,this.lines[e+1]=null,this.currentLine>e+1&&(this.currentLine=e+1)):this.currentLine==e&&(this.currentLine=e+1),this.lines[e]=r.tokens}}).call(s.prototype),t.BackgroundTokenizer=s})),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],(function(e,t,n){"use strict";var r=e("./lib/lang"),s=(e("./lib/oop"),e("./range").Range),o=function(e,t,n){this.setRegexp(e),this.clazz=t,this.type=n||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(e){this.regExp+""!=e+""&&(this.regExp=e,this.cache=[])},this.update=function(e,t,n,i){if(this.regExp)for(var o=i.firstRow,u=i.lastRow,a=o;a<=u;a++){var f=this.cache[a];null==f&&((f=r.getMatchOffsets(n.getLine(a),this.regExp)).length>this.MAX_RANGES&&(f=f.slice(0,this.MAX_RANGES)),f=f.map((function(e){return new s(a,e.offset,a,e.offset+e.length)})),this.cache[a]=f.length?f:"");for(var l=f.length;l--;)t.drawSingleLineMarker(e,f[l].toScreenRange(n),this.clazz,i)}}}).call(o.prototype),t.SearchHighlight=o})),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],(function(e,t,n){"use strict";function i(e,t){this.foldData=e,Array.isArray(t)?this.folds=t:t=this.folds=[t];var n=t[t.length-1];this.range=new r(t[0].start.row,t[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach((function(e){e.setFoldLine(this)}),this)}var r=e("../range").Range;(function(){this.shiftRow=function(e){this.start.row+=e,this.end.row+=e,this.folds.forEach((function(t){t.start.row+=e,t.end.row+=e}))},this.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(e),this.folds.sort((function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)})),this.range.compareEnd(e.start.row,e.start.column)>0?(this.end.row=e.end.row,this.end.column=e.end.column):this.range.compareStart(e.end.row,e.end.column)<0&&(this.start.row=e.start.row,this.start.column=e.start.column)}else if(e.start.row==this.end.row)this.folds.push(e),this.end.row=e.end.row,this.end.column=e.end.column;else{if(e.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(e),this.start.row=e.start.row,this.start.column=e.start.column}e.foldLine=this},this.containsRow=function(e){return e>=this.start.row&&e<=this.end.row},this.walk=function(e,t,n){var s,o,r=0,i=this.folds,a=!0;null==t&&(t=this.end.row,n=this.end.column);for(var f=0;f<i.length;f++){if(-1==(o=(s=i[f]).range.compareStart(t,n))){e(null,t,n,r,a);return}if(!e(null,s.start.row,s.start.column,r,a)&&e(s.placeholder,s.start.row,s.start.column,r)||0===o)return;a=!s.sameRow,r=s.end.column}e(null,t,n,r,a)},this.getNextFoldTo=function(e,t){for(var n,r,i=0;i<this.folds.length;i++){if(-1==(r=(n=this.folds[i]).range.compareEnd(e,t)))return{fold:n,kind:"after"};if(0===r)return{fold:n,kind:"inside"}}return null},this.addRemoveChars=function(e,t,n){var i,s,r=this.getNextFoldTo(e,t);if(r){i=r.fold;if("inside"==r.kind&&i.start.column!=t&&i.start.row!=e)window.console&&window.console.log(e,t,i);else if(i.start.row==e){var o=(s=this.folds).indexOf(i);0===o&&(this.start.column+=n);for(;o<s.length;o++){(i=s[o]).start.column+=n;if(!i.sameRow)return;i.end.column+=n}this.end.column+=n}}},this.split=function(e,t){var n=this.getNextFoldTo(e,t);if(!n||"inside"==n.kind)return null;var r=n.fold,s=this.folds,o=this.foldData,u=s.indexOf(r),a=s[u-1];this.end.row=a.end.row,this.end.column=a.end.column;var f=new i(o,s=s.splice(u,s.length-u));return o.splice(o.indexOf(this)+1,0,f),f},this.merge=function(e){for(var t=e.folds,n=0;n<t.length;n++)this.addFold(t[n]);var r=this.foldData;r.splice(r.indexOf(e),1)},this.toString=function(){var e=[this.range.toString()+": ["];return this.folds.forEach((function(t){e.push("  "+t.toString())})),e.push("]"),e.join("\n")},this.idxToPosition=function(e){for(var t=0,n=0;n<this.folds.length;n++){var r=this.folds[n];if((e-=r.start.column-t)<0)return{row:r.start.row,column:r.start.column+e};if((e-=r.placeholder.length)<0)return r.start;t=r.end.column}return{row:this.end.row,column:this.end.column+e}}}).call(i.prototype),t.FoldLine=i})),ace.define("ace/range_list",["require","exports","module","ace/range"],(function(e,t,n){"use strict";var i=e("./range").Range.comparePoints,s=function(){this.ranges=[]};(function(){this.comparePoints=i,this.pointIndex=function(e,t,n){for(var r=this.ranges,s=n||0;s<r.length;s++){var o=r[s],u=i(e,o.end);if(!(u>0)){var a=i(e,o.start);return 0===u?t&&0!==a?-s-2:s:a>0||0===a&&!t?s:-s-1}}return-s-1},this.add=function(e){var t=!e.isEmpty(),n=this.pointIndex(e.start,t);n<0&&(n=-n-1);var r=this.pointIndex(e.end,t,n);return r<0?r=-r-1:r++,this.ranges.splice(n,r-n,e)},this.addList=function(e){for(var t=[],n=e.length;n--;)t.push.apply(t,this.add(e[n]));return t},this.substractPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges.splice(t,1)},this.merge=function(){for(var r,e=[],t=this.ranges,n=(t=t.sort((function(e,t){return i(e.start,t.start)})))[0],s=1;s<t.length;s++){r=n,n=t[s];var o=i(r.end,n.start);o<0||(0!=o||r.isEmpty()||n.isEmpty())&&(i(r.end,n.end)<0&&(r.end.row=n.end.row,r.end.column=n.end.column),t.splice(s,1),e.push(n),n=r,s--)}return this.ranges=t,e},this.contains=function(e,t){return this.pointIndex({row:e,column:t})>=0},this.containsPoint=function(e){return this.pointIndex(e)>=0},this.rangeAtPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges[t]},this.clipRows=function(e,t){var n=this.ranges;if(n[0].start.row>t||n[n.length-1].start.row<e)return[];var r=this.pointIndex({row:e,column:0});r<0&&(r=-r-1);var i=this.pointIndex({row:t,column:0},r);i<0&&(i=-i-1);for(var s=[],o=r;o<i;o++)s.push(n[o]);return s},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(e){this.session&&this.detach(),this.session=e,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(e){for(var t=e.start,n=e.end,r=t.row,i=n.row,s=this.ranges,o=0,u=s.length;o<u;o++){if((a=s[o]).end.row>=r)break}if("insert"==e.action)for(var f=i-r,l=-t.column+n.column;o<u;o++){if((a=s[o]).start.row>r)break;a.start.row==r&&a.start.column>=t.column&&(a.start.column!=t.column||!this.$insertRight)&&(a.start.column+=l,a.start.row+=f);if(a.end.row==r&&a.end.column>=t.column){if(a.end.column==t.column&&this.$insertRight)continue;a.end.column==t.column&&l>0&&o<u-1&&a.end.column>a.start.column&&a.end.column==s[o+1].start.column&&(a.end.column-=l),a.end.column+=l,a.end.row+=f}}else for(f=r-i,l=t.column-n.column;o<u;o++){if((a=s[o]).start.row>i)break;a.end.row<i&&(r<a.end.row||r==a.end.row&&t.column<a.end.column)?(a.end.row=r,a.end.column=t.column):a.end.row==i?a.end.column<=n.column?(f||a.end.column>t.column)&&(a.end.column=t.column,a.end.row=t.row):(a.end.column+=l,a.end.row+=f):a.end.row>i&&(a.end.row+=f);a.start.row<i&&(r<a.start.row||r==a.start.row&&t.column<a.start.column)?(a.start.row=r,a.start.column=t.column):a.start.row==i?a.start.column<=n.column?(f||a.start.column>t.column)&&(a.start.column=t.column,a.start.row=t.row):(a.start.column+=l,a.start.row+=f):a.start.row>i&&(a.start.row+=f)}if(0!=f&&o<u)for(;o<u;o++){var a;(a=s[o]).start.row+=f,a.end.row+=f}}}).call(s.prototype),t.RangeList=s})),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list","ace/lib/oop"],(function(e,t,n){"use strict";function o(e,t){e.row-=t.row,0==e.row&&(e.column-=t.column)}function u(e,t){o(e.start,t),o(e.end,t)}function a(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row}var r=e("../range_list").RangeList,i=e("../lib/oop"),s=t.Fold=function(e,t){this.foldLine=null,this.placeholder=t,this.range=e,this.start=e.start,this.end=e.end,this.sameRow=e.start.row==e.end.row,this.subFolds=this.ranges=[]};i.inherits(s,r),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(e){this.foldLine=e,this.subFolds.forEach((function(t){t.setFoldLine(e)}))},this.clone=function(){var e=this.range.clone(),t=new s(e,this.placeholder);return this.subFolds.forEach((function(e){t.subFolds.push(e.clone())})),t.collapseChildren=this.collapseChildren,t},this.addSubFold=function(e){if(!this.range.isEqual(e)){u(e,this.start);for(var t=e.start.row,n=e.start.column,r=0,i=-1;r<this.subFolds.length&&1==(i=this.subFolds[r].range.compare(t,n));r++);var s=this.subFolds[r],o=0;if(0==i){if(s.range.containsRange(e))return s.addSubFold(e);o=1}t=e.range.end.row,n=e.range.end.column;var a=r;for(i=-1;a<this.subFolds.length&&1==(i=this.subFolds[a].range.compare(t,n));a++);0==i&&a++;for(var f=this.subFolds.splice(r,a-r,e),l=0==i?f.length-1:f.length,c=o;c<l;c++)e.addSubFold(f[c]);return e.setFoldLine(this.foldLine),e}},this.restoreRange=function(e){return function(e,t){a(e.start,t),a(e.end,t)}(e,this.start)}}.call(s.prototype)})),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],(function(e,t,n){"use strict";var r=e("../range").Range,i=e("./fold_line").FoldLine,s=e("./fold").Fold,o=e("../token_iterator").TokenIterator;t.Folding=function(){this.getFoldAt=function(e,t,n){var r=this.getFoldLine(e);if(!r)return null;for(var i=r.folds,s=0;s<i.length;s++){var o=i[s].range;if(o.contains(e,t)){if(1==n&&o.isEnd(e,t)&&!o.isEmpty())continue;if(-1==n&&o.isStart(e,t)&&!o.isEmpty())continue;return i[s]}}},this.getFoldsInRange=function(e){var t=e.start,n=e.end,r=this.$foldData,i=[];t.column+=1,n.column-=1;for(var s=0;s<r.length;s++){var o=r[s].range.compareRange(e);if(2!=o){if(-2==o)break;for(var u=r[s].folds,a=0;a<u.length;a++){var f=u[a];if(-2==(o=f.range.compareRange(e)))break;if(2!=o){if(42==o)break;i.push(f)}}}}return t.column-=1,n.column+=1,i},this.getFoldsInRangeList=function(e){if(Array.isArray(e)){var t=[];e.forEach((function(e){t=t.concat(this.getFoldsInRange(e))}),this)}else t=this.getFoldsInRange(e);return t},this.getAllFolds=function(){for(var e=[],t=this.$foldData,n=0;n<t.length;n++)for(var r=0;r<t[n].folds.length;r++)e.push(t[n].folds[r]);return e},this.getFoldStringAt=function(e,t,n,r){if(!(r=r||this.getFoldLine(e)))return null;for(var s,o,i={end:{column:0}},u=0;u<r.folds.length;u++){var a=(o=r.folds[u]).range.compareEnd(e,t);if(-1==a){s=this.getLine(o.start.row).substring(i.end.column,o.start.column);break}if(0===a)return null;i=o}return s||(s=this.getLine(o.start.row).substring(i.end.column)),-1==n?s.substring(0,t-i.end.column):1==n?s.substring(t-i.end.column):s},this.getFoldLine=function(e,t){var n=this.$foldData,r=0;t&&(r=n.indexOf(t)),-1==r&&(r=0);for(;r<n.length;r++){var i=n[r];if(i.start.row<=e&&i.end.row>=e)return i;if(i.end.row>e)return null}return null},this.getNextFoldLine=function(e,t){var n=this.$foldData,r=0;t&&(r=n.indexOf(t)),-1==r&&(r=0);for(;r<n.length;r++){var i=n[r];if(i.end.row>=e)return i}return null},this.getFoldedRowCount=function(e,t){for(var n=this.$foldData,r=t-e+1,i=0;i<n.length;i++){var s=n[i],o=s.end.row,u=s.start.row;if(o>=t){u<t&&(u>=e?r-=t-u:r=0);break}o>=e&&(r-=u>=e?o-u:o-e+1)}return r},this.$addFoldLine=function(e){return this.$foldData.push(e),this.$foldData.sort((function(e,t){return e.start.row-t.start.row})),e},this.addFold=function(e,t){var o,n=this.$foldData,r=!1;e instanceof s?o=e:(o=new s(t,e)).collapseChildren=t.collapseChildren,this.$clipRangeToDocument(o.range);var u=o.start.row,a=o.start.column,f=o.end.row,l=o.end.column,c=this.getFoldAt(u,a,1),h=this.getFoldAt(f,l,-1);if(c&&h==c)return c.addSubFold(o);c&&!c.range.isStart(u,a)&&this.removeFold(c),h&&!h.range.isEnd(f,l)&&this.removeFold(h);var p=this.getFoldsInRange(o.range);p.length>0&&(this.removeFolds(p),p.forEach((function(e){o.addSubFold(e)})));for(var d=0;d<n.length;d++){var v=n[d];if(f==v.start.row){v.addFold(o),r=!0;break}if(u==v.end.row){v.addFold(o),r=!0;if(!o.sameRow){var m=n[d+1];if(m&&m.start.row==f){v.merge(m);break}}break}if(f<=v.start.row)break}return r||(v=this.$addFoldLine(new i(this.$foldData,o))),this.$useWrapMode?this.$updateWrapData(v.start.row,v.start.row):this.$updateRowLengthCache(v.start.row,v.start.row),this.$modified=!0,this._signal("changeFold",{data:o,action:"add"}),o},this.addFolds=function(e){e.forEach((function(e){this.addFold(e)}),this)},this.removeFold=function(e){var t=e.foldLine,n=t.start.row,r=t.end.row,i=this.$foldData,s=t.folds;if(1==s.length)i.splice(i.indexOf(t),1);else if(t.range.isEnd(e.end.row,e.end.column))s.pop(),t.end.row=s[s.length-1].end.row,t.end.column=s[s.length-1].end.column;else if(t.range.isStart(e.start.row,e.start.column))s.shift(),t.start.row=s[0].start.row,t.start.column=s[0].start.column;else if(e.sameRow)s.splice(s.indexOf(e),1);else{var o=t.split(e.start.row,e.start.column);(s=o.folds).shift(),o.start.row=s[0].start.row,o.start.column=s[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(n,r):this.$updateRowLengthCache(n,r)),this.$modified=!0,this._signal("changeFold",{data:e,action:"remove"})},this.removeFolds=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);t.forEach((function(e){this.removeFold(e)}),this),this.$modified=!0},this.expandFold=function(e){this.removeFold(e),e.subFolds.forEach((function(t){e.restoreRange(t),this.addFold(t)}),this),e.collapseChildren>0&&this.foldAll(e.start.row+1,e.end.row,e.collapseChildren-1),e.subFolds=[]},this.expandFolds=function(e){e.forEach((function(e){this.expandFold(e)}),this)},this.unfold=function(e,t){var n,i;null==e?(n=new r(0,0,this.getLength(),0),t=!0):n="number"==typeof e?new r(e,0,e,this.getLine(e).length):"row"in e?r.fromPoints(e,e):e,i=this.getFoldsInRangeList(n);if(t)this.removeFolds(i);else for(var s=i;s.length;)this.expandFolds(s),s=this.getFoldsInRangeList(n);if(i.length)return i},this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)},this.getRowFoldEnd=function(e,t){var n=this.getFoldLine(e,t);return n?n.end.row:e},this.getRowFoldStart=function(e,t){var n=this.getFoldLine(e,t);return n?n.start.row:e},this.getFoldDisplayLine=function(e,t,n,r,i){null==r&&(r=e.start.row),null==i&&(i=0),null==t&&(t=e.end.row),null==n&&(n=this.getLine(t).length);var s=this.doc,o="";return e.walk((function(e,t,n,u){if(!(t<r)){if(t==r){if(n<i)return;u=Math.max(i,u)}o+=null!=e?e:s.getLine(t).substring(u,n)}}),t,n),o},this.getDisplayLine=function(e,t,n,r){var i=this.getFoldLine(e);if(!i){var s;return(s=this.doc.getLine(e)).substring(r||0,t||s.length)}return this.getFoldDisplayLine(i,e,t,n,r)},this.$cloneFoldData=function(){var e=[];return e=this.$foldData.map((function(t){var n=t.folds.map((function(e){return e.clone()}));return new i(e,n)}))},this.toggleFold=function(e){var r,i,n=this.selection.getRange();if(n.isEmpty()){var s=n.start;if(r=this.getFoldAt(s.row,s.column)){this.expandFold(r);return}(i=this.findMatchingBracket(s))?1==n.comparePoint(i)?n.end=i:(n.start=i,n.start.column++,n.end.column--):(i=this.findMatchingBracket({row:s.row,column:s.column+1}))?(1==n.comparePoint(i)?n.end=i:n.start=i,n.start.column++):n=this.getCommentFoldRange(s.row,s.column)||n}else{var o=this.getFoldsInRange(n);if(e&&o.length){this.expandFolds(o);return}1==o.length&&(r=o[0])}r||(r=this.getFoldAt(n.start.row,n.start.column));if(r&&r.range.toString()==n.toString())this.expandFold(r);else{var u="...";if(!n.isMultiLine()){if((u=this.getTextRange(n)).length<4)return;u=u.trim().substring(0,2)+".."}this.addFold(u,n)}},this.getCommentFoldRange=function(e,t,n){var i=new o(this,e,t),s=i.getCurrentToken(),u=s.type;if(s&&/^comment|string/.test(u)){"comment"==(u=u.match(/comment|string/)[0])&&(u+="|doc-start");var a=new RegExp(u),f=new r;if(1!=n){do{s=i.stepBackward()}while(s&&a.test(s.type));i.stepForward()}f.start.row=i.getCurrentTokenRow(),f.start.column=i.getCurrentTokenColumn()+2,i=new o(this,e,t);if(-1!=n){var l=-1;do{s=i.stepForward();if(-1==l){var c=this.getState(i.$row);a.test(c)||(l=i.$row)}else if(i.$row>l)break}while(s&&a.test(s.type));s=i.stepBackward()}else s=i.getCurrentToken();return f.end.row=i.getCurrentTokenRow(),f.end.column=i.getCurrentTokenColumn()+s.value.length-2,f}},this.foldAll=function(e,t,n){null==n&&(n=1e5);var r=this.foldWidgets;if(r){t=t||this.getLength();for(var i=e=e||0;i<t;i++){null==r[i]&&(r[i]=this.getFoldWidget(i));if("start"==r[i]){var s=this.getFoldWidgetRange(i);if(s&&s.isMultiLine()&&s.end.row<=t&&s.start.row>=e){i=s.end.row;try{var o=this.addFold("...",s);o&&(o.collapseChildren=n)}catch(u){}}}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error("invalid fold style: "+e+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=e){this.$foldStyle=e,"manual"==e&&this.unfold();var t=this.$foldMode;this.$setFolding(null),this.$setFolding(t)}},this.$setFolding=function(e){if(this.$foldMode!=e){this.$foldMode=e,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation");e&&"manual"!=this.$foldStyle?(this.foldWidgets=[],this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle),this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)):this.foldWidgets=null}},this.getParentFoldRangeData=function(e,t){var n=this.foldWidgets;if(!n||t&&n[e])return{};for(var i,r=e-1;r>=0;){var s=n[r];null==s&&(s=n[r]=this.getFoldWidget(r));if("start"==s){var o=this.getFoldWidgetRange(r);i||(i=o);if(o&&o.end.row>=e)break}r--}return{range:-1!==r&&o,firstRange:i}},this.onFoldWidgetClick=function(e,t){var n={children:(t=t.domEvent).shiftKey,all:t.ctrlKey||t.metaKey,siblings:t.altKey};if(!this.$toggleFoldWidget(e,n)){var i=t.target||t.srcElement;i&&/ace_fold-widget/.test(i.className)&&(i.className+=" ace_invalid")}},this.$toggleFoldWidget=function(e,t){if(this.getFoldWidget){var n=this.getFoldWidget(e),r=this.getLine(e),i="end"===n?-1:1,s=this.getFoldAt(e,-1===i?0:r.length,i);if(s)return t.children||t.all?this.removeFold(s):this.expandFold(s),s;var o=this.getFoldWidgetRange(e,!0);if(o&&!o.isMultiLine()&&(s=this.getFoldAt(o.start.row,o.start.column,1))&&o.isEqual(s.range))return this.removeFold(s),s;if(t.siblings){var u=this.getParentFoldRangeData(e);if(u.range)var a=u.range.start.row+1,f=u.range.end.row;this.foldAll(a,f,t.all?1e4:0)}else t.children?(f=o?o.end.row:this.getLength(),this.foldAll(e+1,f,t.all?1e4:0)):o&&(t.all&&(o.collapseChildren=1e4),this.addFold("...",o));return o}},this.toggleFoldWidget=function(e){var t=this.selection.getCursor().row;t=this.getRowFoldStart(t);var n=this.$toggleFoldWidget(t,{});if(!n){var r=this.getParentFoldRangeData(t,!0);if(n=r.range||r.firstRange){t=n.start.row;var i=this.getFoldAt(t,this.getLine(t).length,1);i?this.removeFold(i):this.addFold("...",n)}}},this.updateFoldWidgets=function(e){var t=e.start.row,n=e.end.row-t;if(0===n)this.foldWidgets[t]=null;else if("remove"==e.action)this.foldWidgets.splice(t,n+1,null);else{var r=Array(n+1);r.unshift(t,1),this.foldWidgets.splice.apply(this.foldWidgets,r)}},this.tokenizerUpdateFoldWidgets=function(e){var t=e.data;t.first!=t.last&&this.foldWidgets.length>t.first&&this.foldWidgets.splice(t.first,this.foldWidgets.length)}}})),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],(function(e,t,n){"use strict";var r=e("../token_iterator").TokenIterator,i=e("../range").Range;t.BracketMatch=function(){this.findMatchingBracket=function(e,t){if(0==e.column)return null;var n=t||this.getLine(e.row).charAt(e.column-1);if(""==n)return null;var r=n.match(/([\(\[\{])|([\)\]\}])/);return r?r[1]?this.$findClosingBracket(r[1],e):this.$findOpeningBracket(r[2],e):null},this.getBracketRange=function(e){var r,t=this.getLine(e.row),n=!0,s=t.charAt(e.column-1),o=s&&s.match(/([\(\[\{])|([\)\]\}])/);o||(s=t.charAt(e.column),e={row:e.row,column:e.column+1},o=s&&s.match(/([\(\[\{])|([\)\]\}])/),n=!1);if(!o)return null;if(o[1]){if(!(u=this.$findClosingBracket(o[1],e)))return null;r=i.fromPoints(e,u),n||(r.end.column++,r.start.column--),r.cursor=r.end}else{var u;if(!(u=this.$findOpeningBracket(o[2],e)))return null;r=i.fromPoints(u,e),n||(r.start.column++,r.end.column--),r.cursor=r.start}return r},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(e,t,n){var i=this.$brackets[e],s=1,o=new r(this,t.row,t.column),u=o.getCurrentToken();u||(u=o.stepForward());if(u){n||(n=new RegExp("(\\.?"+u.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));for(var a=t.column-o.getCurrentTokenColumn()-2,f=u.value;;){for(;a>=0;){var l=f.charAt(a);if(l==i){if(0==(s-=1))return{row:o.getCurrentTokenRow(),column:a+o.getCurrentTokenColumn()}}else l==e&&(s+=1);a-=1}do{u=o.stepBackward()}while(u&&!n.test(u.type));if(null==u)break;a=(f=u.value).length-1}return null}},this.$findClosingBracket=function(e,t,n){var i=this.$brackets[e],s=1,o=new r(this,t.row,t.column),u=o.getCurrentToken();u||(u=o.stepForward());if(u){n||(n=new RegExp("(\\.?"+u.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));for(var a=t.column-o.getCurrentTokenColumn();;){for(var f=u.value,l=f.length;a<l;){var c=f.charAt(a);if(c==i){if(0==(s-=1))return{row:o.getCurrentTokenRow(),column:a+o.getCurrentTokenColumn()}}else c==e&&(s+=1);a+=1}do{u=o.stepForward()}while(u&&!n.test(u.type));if(null==u)break;a=0}return null}}}})),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],(function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/lang"),s=e("./bidihandler").BidiHandler,o=e("./config"),u=e("./lib/event_emitter").EventEmitter,a=e("./selection").Selection,f=e("./mode/text").Mode,l=e("./range").Range,c=e("./document").Document,h=e("./background_tokenizer").BackgroundTokenizer,p=e("./search_highlight").SearchHighlight,d=function(e,t){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++d.$uid,this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this);"object"==typeof e&&e.getLine||(e=new c(e));this.setDocument(e),this.selection=new a(this),this.$bidiHandler=new s(this),o.resetOptions(this),this.setMode(t),o._signal("session",this)};d.$uid=0,function(){function m(e){return!(e<4352)&&(e>=4352&&e<=4447||e>=4515&&e<=4519||e>=4602&&e<=4607||e>=9001&&e<=9002||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12283||e>=12288&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12589||e>=12593&&e<=12686||e>=12688&&e<=12730||e>=12736&&e<=12771||e>=12784&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=13054||e>=13056&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=55216&&e<=55238||e>=55243&&e<=55291||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=65281&&e<=65376||e>=65504&&e<=65510)}r.implement(this,u),this.setDocument=function(e){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=e,e.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(e){if(e){var t=this.$docRowCache.length,n=this.$getRowCacheIndex(this.$docRowCache,e)+1;t>n&&(this.$docRowCache.splice(n,t),this.$screenRowCache.splice(n,t))}else this.$docRowCache=[],this.$screenRowCache=[]},this.$getRowCacheIndex=function(e,t){for(var n=0,r=e.length-1;n<=r;){var i=n+r>>1,s=e[i];if(t>s)n=i+1;else{if(!(t<s))return i;r=i-1}}return n-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(e){var t=e.data;this.$resetRowCache(t.start.row)},this.onChange=function(e){this.$modified=!0,this.$bidiHandler.onChange(e),this.$resetRowCache(e.start.row);var t=this.$updateInternalDataOnChange(e);!this.$fromUndo&&this.$undoManager&&(t&&t.length&&(this.$undoManager.add({action:"removeFolds",folds:t},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(e,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(e),this._signal("change",e)},this.setValue=function(e){this.doc.setValue(e),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(e){return this.bgTokenizer.getState(e)},this.getTokens=function(e){return this.bgTokenizer.getTokens(e)},this.getTokenAt=function(e,t){var r,n=this.bgTokenizer.getTokens(e),i=0;if(null==t){var s=n.length-1;i=this.getLine(e).length}else for(s=0;s<n.length&&!((i+=n[s].value.length)>=t);s++);return(r=n[s])?(r.index=s,r.start=i-r.value.length,r):null},this.setUndoManager=function(e){this.$undoManager=e,this.$informUndoManager&&this.$informUndoManager.cancel();if(e){var t=this;e.addSession(this),this.$syncInformUndoManager=function(){t.$informUndoManager.cancel(),t.mergeUndoDeltas=!1},this.$informUndoManager=i.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?i.stringRepeat(" ",this.getTabSize()):"\t"},this.setUseSoftTabs=function(e){this.setOption("useSoftTabs",e)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(e){this.setOption("tabSize",e)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(e){return this.$useSoftTabs&&e.column%this.$tabSize==0},this.setNavigateWithinSoftTabs=function(e){this.setOption("navigateWithinSoftTabs",e)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(e){this.setOption("overwrite",e)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(e,t){this.$decorations[e]||(this.$decorations[e]=""),this.$decorations[e]+=" "+t,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(e){this.$breakpoints=[];for(var t=0;t<e.length;t++)this.$breakpoints[e[t]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(e,t){void 0===t&&(t="ace_breakpoint"),t?this.$breakpoints[e]=t:delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(e){delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.addMarker=function(e,t,n,r){var i=this.$markerId++,s={range:e,type:n||"line",renderer:"function"==typeof n?n:null,clazz:t,inFront:!!r,id:i};return r?(this.$frontMarkers[i]=s,this._signal("changeFrontMarker")):(this.$backMarkers[i]=s,this._signal("changeBackMarker")),i},this.addDynamicMarker=function(e,t){if(e.update){var n=this.$markerId++;return e.id=n,e.inFront=!!t,t?(this.$frontMarkers[n]=e,this._signal("changeFrontMarker")):(this.$backMarkers[n]=e,this._signal("changeBackMarker")),e}},this.removeMarker=function(e){var t=this.$frontMarkers[e]||this.$backMarkers[e];if(t){delete(t.inFront?this.$frontMarkers:this.$backMarkers)[e],this._signal(t.inFront?"changeFrontMarker":"changeBackMarker")}},this.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers},this.highlight=function(e){if(!this.$searchHighlight){var t=new p(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(t)}this.$searchHighlight.setRegexp(e)},this.highlightLines=function(e,t,n,r){"number"!=typeof t&&(n=t,t=e),n||(n="ace_step");var i=new l(e,0,t,1/0);return i.id=this.addMarker(i,n,"fullLine",r),i},this.setAnnotations=function(e){this.$annotations=e,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r?\n)/m);this.$autoNewLine=t?t[1]:"\n"},this.getWordRange=function(e,t){var n=this.getLine(e),r=!1;t>0&&(r=!!n.charAt(t-1).match(this.tokenRe)),r||(r=!!n.charAt(t).match(this.tokenRe));if(r)var i=this.tokenRe;else if(/^\s+$/.test(n.slice(t-1,t+1)))i=/\s/;else i=this.nonTokenRe;var s=t;if(s>0){do{s--}while(s>=0&&n.charAt(s).match(i));s++}for(var o=t;o<n.length&&n.charAt(o).match(i);)o++;return new l(e,s,e,o)},this.getAWordRange=function(e,t){for(var n=this.getWordRange(e,t),r=this.getLine(n.end.row);r.charAt(n.end.column).match(/[ \t]/);)n.end.column+=1;return n},this.setNewLineMode=function(e){this.doc.setNewLineMode(e)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(e){this.setOption("useWorker",e)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(e){var t=e.data;this.bgTokenizer.start(t.first),this._signal("tokenizerUpdate",e)},this.$modes=o.$modes,this.$mode=null,this.$modeId=null,this.setMode=function(e,t){if(e&&"object"==typeof e){if(e.getTokenizer)return this.$onChangeMode(e);var n=e,r=n.path}else r=e||"ace/mode/text";this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new f);!this.$modes[r]||n?(this.$modeId=r,o.loadModule(["mode",r],function(e){if(this.$modeId!==r)return t&&t();this.$modes[r]&&!n?this.$onChangeMode(this.$modes[r]):e&&e.Mode&&(e=new e.Mode(n),n||(this.$modes[r]=e,e.$id=r),this.$onChangeMode(e)),t&&t()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)):(this.$onChangeMode(this.$modes[r]),t&&t())},this.$onChangeMode=function(e,t){t||(this.$modeId=e.$id);if(this.$mode!==e){this.$mode=e,this.$stopWorker(),this.$useWorker&&this.$startWorker();var n=e.getTokenizer();if(void 0!==n.addEventListener){var r=this.onReloadTokenizer.bind(this);n.addEventListener("update",r)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(n);else{this.bgTokenizer=new h(n);var i=this;this.bgTokenizer.addEventListener("update",(function(e){i._signal("tokenizerUpdate",e)}))}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=e.tokenRe,this.nonTokenRe=e.nonTokenRe,t||(e.attachToSession&&e.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(e.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode"))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(e){o.warn("Could not load worker",e),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(e){this.$scrollTop===e||isNaN(e)||(this.$scrollTop=e,this._signal("changeScrollTop",e))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(e){this.$scrollLeft===e||isNaN(e)||(this.$scrollLeft=e,this._signal("changeScrollLeft",e))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var e=0;return this.lineWidgets.forEach((function(t){t&&t.screenWidth>e&&(e=t.screenWidth)})),this.lineWidgetWidth=e},this.$computeWidth=function(e){if(this.$modified||e){this.$modified=!1;if(this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var t=this.doc.getAllLines(),n=this.$rowLengthCache,r=0,i=0,s=this.$foldData[i],o=s?s.start.row:1/0,u=t.length,a=0;a<u;a++){if(a>o){if((a=s.end.row+1)>=u)break;o=(s=this.$foldData[i++])?s.start.row:1/0}null==n[a]&&(n[a]=this.$getStringScreenWidth(t[a])[0]),n[a]>r&&(r=n[a])}this.screenWidth=r}},this.getLine=function(e){return this.doc.getLine(e)},this.getLines=function(e,t){return this.doc.getLines(e,t)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())},this.insert=function(e,t){return this.doc.insert(e,t)},this.remove=function(e){return this.doc.remove(e)},this.removeFullLines=function(e,t){return this.doc.removeFullLines(e,t)},this.undoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=e.length-1;-1!=n;n--){var r=e[n];"insert"==r.action||"remove"==r.action?this.doc.revertDelta(r):r.folds&&this.addFolds(r.folds)}!t&&this.$undoSelect&&(e.selectionBefore?this.selection.fromJSON(e.selectionBefore):this.selection.setRange(this.$getUndoSelection(e,!0))),this.$fromUndo=!1}},this.redoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=0;n<e.length;n++){var r=e[n];("insert"==r.action||"remove"==r.action)&&this.doc.applyDelta(r)}!t&&this.$undoSelect&&(e.selectionAfter?this.selection.fromJSON(e.selectionAfter):this.selection.setRange(this.$getUndoSelection(e,!1))),this.$fromUndo=!1}},this.setUndoSelect=function(e){this.$undoSelect=e},this.$getUndoSelection=function(e,t){function n(e){return t?"insert"!==e.action:"insert"===e.action}for(var r,i,o=0;o<e.length;o++){var u=e[o];u.start&&(r?n(u)?(i=u.start,-1==r.compare(i.row,i.column)&&r.setStart(i),i=u.end,1==r.compare(i.row,i.column)&&r.setEnd(i),!0):(i=u.start,-1==r.compare(i.row,i.column)&&(r=l.fromPoints(u.start,u.start)),!1):n(u)?(r=l.fromPoints(u.start,u.end),!0):(r=l.fromPoints(u.start,u.start),!1))}return r},this.replace=function(e,t){return this.doc.replace(e,t)},this.moveText=function(e,t,n){var r=this.getTextRange(e),i=this.getFoldsInRange(e),s=l.fromPoints(t,t);if(!n){this.remove(e);var o=e.start.row-e.end.row;(u=o?-e.end.column:e.start.column-e.end.column)&&(s.start.row==e.end.row&&s.start.column>e.end.column&&(s.start.column+=u),s.end.row==e.end.row&&s.end.column>e.end.column&&(s.end.column+=u)),o&&s.start.row>=e.end.row&&(s.start.row+=o,s.end.row+=o)}s.end=this.insert(s.start,r);if(i.length){var a=e.start,f=s.start,u=(o=f.row-a.row,f.column-a.column);this.addFolds(i.map((function(e){return(e=e.clone()).start.row==a.row&&(e.start.column+=u),e.end.row==a.row&&(e.end.column+=u),e.start.row+=o,e.end.row+=o,e})))}return s},this.indentRows=function(e,t,n){n=n.replace(/\t/g,this.getTabString());for(var r=e;r<=t;r++)this.doc.insertInLine({row:r,column:0},n)},this.outdentRows=function(e){for(var t=e.collapseRows(),n=new l(0,0,0,0),r=this.getTabSize(),i=t.start.row;i<=t.end.row;++i){var s=this.getLine(i);n.start.row=i,n.end.row=i;for(var o=0;o<r&&" "==s.charAt(o);++o);o<r&&"\t"==s.charAt(o)?(n.start.column=o,n.end.column=o+1):(n.start.column=0,n.end.column=o),this.remove(n)}},this.$moveLines=function(e,t,n){e=this.getRowFoldStart(e),t=this.getRowFoldEnd(t);if(n<0){if((r=this.getRowFoldStart(e+n))<0)return 0;var i=r-e}else if(n>0){var r;if((r=this.getRowFoldEnd(t+n))>this.doc.getLength()-1)return 0;i=r-t}else{e=this.$clipRowToDocument(e);i=(t=this.$clipRowToDocument(t))-e+1}var s=new l(e,0,t,Number.MAX_VALUE),o=this.getFoldsInRange(s).map((function(e){return(e=e.clone()).start.row+=i,e.end.row+=i,e})),u=0==n?this.doc.getLines(e,t):this.doc.removeFullLines(e,t);return this.doc.insertFullLines(e+i,u),o.length&&this.addFolds(o),i},this.moveLinesUp=function(e,t){return this.$moveLines(e,t,-1)},this.moveLinesDown=function(e,t){return this.$moveLines(e,t,1)},this.duplicateLines=function(e,t){return this.$moveLines(e,t,0)},this.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))},this.$clipColumnToRow=function(e,t){return t<0?0:Math.min(this.doc.getLine(e).length,t)},this.$clipPositionToDocument=function(e,t){t=Math.max(0,t);if(e<0)e=0,t=0;else{var n=this.doc.getLength();e>=n?(e=n-1,t=this.doc.getLine(n-1).length):t=Math.min(this.doc.getLine(e).length,t)}return{row:e,column:t}},this.$clipRangeToDocument=function(e){e.start.row<0?(e.start.row=0,e.start.column=0):e.start.column=this.$clipColumnToRow(e.start.row,e.start.column);var t=this.doc.getLength()-1;return e.end.row>t?(e.end.row=t,e.end.column=this.doc.getLine(t).length):e.end.column=this.$clipColumnToRow(e.end.row,e.end.column),e},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(e){if(e!=this.$useWrapMode){this.$useWrapMode=e,this.$modified=!0,this.$resetRowCache(0);if(e){var t=this.getLength();this.$wrapData=Array(t),this.$updateWrapData(0,t-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(e,t){this.$wrapLimitRange.min===e&&this.$wrapLimitRange.max===t||(this.$wrapLimitRange={min:e,max:t},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(e,t){var n=this.$wrapLimitRange;n.max<0&&(n={min:t,max:t});var r=this.$constrainWrapLimit(e,n.min,n.max);return r!=this.$wrapLimit&&r>1&&(this.$wrapLimit=r,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},this.$constrainWrapLimit=function(e,t,n){return t&&(e=Math.max(t,e)),n&&(e=Math.min(n,e)),e},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(e){this.setWrapLimitRange(e,e)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(e){var t=this.$useWrapMode,n=e.action,r=e.start,i=e.end,s=r.row,o=i.row,u=o-s,a=null;this.$updating=!0;if(0!=u)if("remove"===n){this[t?"$wrapData":"$rowLengthCache"].splice(s,u);var f=this.$foldData;a=this.getFoldsInRange(e),this.removeFolds(a);var c=0;if(l=this.getFoldLine(i.row)){l.addRemoveChars(i.row,i.column,r.column-i.column),l.shiftRow(-u);var h=this.getFoldLine(s);h&&h!==l&&(h.merge(l),l=h),c=f.indexOf(l)+1}for(;c<f.length;c++){(l=f[c]).start.row>=i.row&&l.shiftRow(-u)}o=s}else{var p=Array(u);p.unshift(s,0);var d=t?this.$wrapData:this.$rowLengthCache;d.splice.apply(d,p);f=this.$foldData,c=0;if(l=this.getFoldLine(s)){var v=l.range.compareInside(r.row,r.column);0==v?(l=l.split(r.row,r.column))&&(l.shiftRow(u),l.addRemoveChars(o,0,i.column-r.column)):-1==v&&(l.addRemoveChars(s,0,i.column-r.column),l.shiftRow(u)),c=f.indexOf(l)+1}for(;c<f.length;c++){(l=f[c]).start.row>=s&&l.shiftRow(u)}}else{u=Math.abs(e.start.column-e.end.column),"remove"===n&&(a=this.getFoldsInRange(e),this.removeFolds(a),u=-u);var l;(l=this.getFoldLine(s))&&l.addRemoveChars(s,r.column,u)}return t&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,t?this.$updateWrapData(s,o):this.$updateRowLengthCache(s,o),a},this.$updateRowLengthCache=function(e,t,n){this.$rowLengthCache[e]=null,this.$rowLengthCache[t]=null},this.$updateWrapData=function(e,t){var a,f,r=this.doc.getAllLines(),i=this.getTabSize(),o=this.$wrapData,u=this.$wrapLimit,l=e;t=Math.min(t,r.length-1);for(;l<=t;)(f=this.getFoldLine(l,f))?(a=[],f.walk(function(e,t,i,o){var u;if(null!=e){(u=this.$getDisplayTokens(e,a.length))[0]=n;for(var f=1;f<u.length;f++)u[f]=s}else u=this.$getDisplayTokens(r[t].substring(o,i),a.length);a=a.concat(u)}.bind(this),f.end.row,r[f.end.row].length+1),o[f.start.row]=this.$computeWrapSplits(a,u,i),l=f.end.row+1):(a=this.$getDisplayTokens(r[l]),o[l]=this.$computeWrapSplits(a,u,i),l++)};var n=3,s=4,c=10,d=11,v=12;this.$computeWrapSplits=function(e,r,i){function g(){var t=0;if(0===m)return t;if(p)for(var n=0;n<e.length;n++){var r=e[n];if(r==c)t+=1;else{if(r!=d){if(r==v)continue;break}t+=i}}return h&&!1!==p&&(t+=i),Math.min(t,m)}function y(t){for(var n=t-f,r=f;r<t;r++){var i=e[r];12!==i&&2!==i||(n-=1)}o.length||(b=g(),o.indent=b),l+=n,o.push(l),f=t}if(0==e.length)return[];for(var o=[],u=e.length,f=0,l=0,h=this.$wrapAsCode,p=this.$indentedSoftWrap,m=r<=Math.max(2*i,8)||!1===p?0:Math.floor(r/2),b=0;u-f>r-b;){var w=f+r-b;if(e[w-1]>=c&&e[w]>=c)y(w);else if(e[w]!=n&&e[w]!=s){for(var E=Math.max(w-(r-(r>>2)),f-1);w>E&&e[w]<n;)w--;if(h){for(;w>E&&e[w]<n;)w--;for(;w>E&&9==e[w];)w--}else for(;w>E&&e[w]<c;)w--;w>E?y(++w):(2==e[w=f+r]&&w--,y(w-b))}else{for(;w!=f-1&&e[w]!=n;w--);if(w>f){y(w);continue}w=f+r;for(;w<e.length&&e[w]==s;w++);if(w==e.length)break;y(w)}}return o},this.$getDisplayTokens=function(n,r){var s,i=[];r=r||0;for(var o=0;o<n.length;o++){var u=n.charCodeAt(o);if(9==u){s=this.getScreenTabSize(i.length+r),i.push(d);for(var f=1;f<s;f++)i.push(v)}else 32==u?i.push(c):u>39&&u<48||u>57&&u<64?i.push(9):u>=4352&&m(u)?i.push(1,2):i.push(1)}return i},this.$getStringScreenWidth=function(e,t,n){if(0==t)return[0,0];null==t&&(t=1/0),n=n||0;var r,i;for(i=0;i<e.length;i++){9==(r=e.charCodeAt(i))?n+=this.getScreenTabSize(n):r>=4352&&m(r)?n+=2:n+=1;if(n>t)break}return[n,i]},this.lineWidgets=null,this.getRowLength=function(e){if(this.lineWidgets)var t=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0;else t=0;return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.getRowLineCount=function(e){return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1:1},this.getRowWrapIndent=function(e){if(this.$useWrapMode){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE),n=this.$wrapData[t.row];return n.length&&n[0]<t.column?n.indent:0}return 0},this.getScreenLastRowColumn=function(e){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(t.row,t.column)},this.getDocumentLastRowColumn=function(e,t){var n=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(n)},this.getDocumentLastRowColumnPosition=function(e,t){var n=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)},this.getRowSplitData=function(e){return this.$useWrapMode?this.$wrapData[e]:void 0},this.getScreenTabSize=function(e){return this.$tabSize-(e%this.$tabSize|0)},this.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row},this.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column},this.screenToDocumentPosition=function(e,t,n){if(e<0)return{row:0,column:0};var r,o,i=0,s=0,u=0,a=0,f=this.$screenRowCache,l=this.$getRowCacheIndex(f,e),c=f.length;if(c&&l>=0){u=f[l],i=this.$docRowCache[l];var h=e>f[c-1]}else h=!c;for(var p=this.getLength()-1,d=this.getNextFoldLine(i),v=d?d.start.row:1/0;u<=e&&!(u+(a=this.getRowLength(i))>e||i>=p);)u+=a,++i>v&&(i=d.end.row+1,v=(d=this.getNextFoldLine(i,d))?d.start.row:1/0),h&&(this.$docRowCache.push(i),this.$screenRowCache.push(u));if(d&&d.start.row<=i)r=this.getFoldDisplayLine(d),i=d.start.row;else{if(u+a<=e||i>p)return{row:p,column:this.getLine(p).length};r=this.getLine(i),d=null}var m=0,g=Math.floor(e-u);if(this.$useWrapMode){var y=this.$wrapData[i];y&&(o=y[g],g>0&&y.length&&(m=y.indent,s=y[g-1]||y[y.length-1],r=r.substring(s)))}return void 0!==n&&this.$bidiHandler.isBidiRow(u+g,i,g)&&(t=this.$bidiHandler.offsetToCol(n)),s+=this.$getStringScreenWidth(r,t-m)[1],this.$useWrapMode&&s>=o&&(s=o-1),d?d.idxToPosition(s):{row:i,column:s}},this.documentToScreenPosition=function(e,t){if(void 0===t)var n=this.$clipPositionToDocument(e.row,e.column);else n=this.$clipPositionToDocument(e,t);e=n.row,t=n.column;var s,r=0,i=null;(s=this.getFoldAt(e,t,1))&&(e=s.start.row,t=s.start.column);var o,u=0,a=this.$docRowCache,f=this.$getRowCacheIndex(a,e),l=a.length;if(l&&f>=0){u=a[f],r=this.$screenRowCache[f];var c=e>a[l-1]}else c=!l;for(var h=this.getNextFoldLine(u),p=h?h.start.row:1/0;u<e;){if(u>=p){if((o=h.end.row+1)>e)break;p=(h=this.getNextFoldLine(o,h))?h.start.row:1/0}else o=u+1;r+=this.getRowLength(u),u=o,c&&(this.$docRowCache.push(u),this.$screenRowCache.push(r))}var d="";h&&u>=p?(d=this.getFoldDisplayLine(h,e,t),i=h.start.row):(d=this.getLine(e).substring(0,t),i=e);var v=0;if(this.$useWrapMode){var m=this.$wrapData[i];if(m){for(var g=0;d.length>=m[g];)r++,g++;d=d.substring(m[g-1]||0,d.length),v=g>0?m.indent:0}}return{row:r,column:v+this.$getStringScreenWidth(d)[0]}},this.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column},this.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row},this.getScreenLength=function(){var e=0,t=null;if(this.$useWrapMode)for(var i=this.$wrapData.length,s=0,o=(r=0,(t=this.$foldData[r++])?t.start.row:1/0);s<i;){var u=this.$wrapData[s];e+=u?u.length+1:1,++s>o&&(s=t.end.row+1,o=(t=this.$foldData[r++])?t.start.row:1/0)}else{e=this.getLength();for(var n=this.$foldData,r=0;r<n.length;r++)e-=(t=n[r]).end.row-t.start.row}return this.lineWidgets&&(e+=this.$getWidgetScreenLength()),e},this.$setFontMetrics=function(e){this.$enableVarChar&&(this.$getStringScreenWidth=function(t,n,r){if(0===n)return[0,0];n||(n=1/0),r=r||0;var i,s;for(s=0;s<t.length&&!((r+="\t"===(i=t.charAt(s))?this.getScreenTabSize(r):e.getCharacterWidth(i))>n);s++);return[r,s]})},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker()},this.isFullWidth=m}.call(d.prototype),e("./edit_session/folding").Folding.call(d.prototype),e("./edit_session/bracket_match").BracketMatch.call(d.prototype),o.defineOptions(d.prototype,"session",{wrap:{set:function(e){e&&"off"!=e?"free"==e?e=!0:"printMargin"==e?e=-1:"string"==typeof e&&(e=parseInt(e,10)||!1):e=!1;if(this.$wrap!=e){this.$wrap=e;if(e){var t="number"==typeof e?e:null;this.setWrapLimitRange(t,t),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1)}},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(e){(e="auto"==e?"text"!=this.$mode.type:"text"!=e)!=this.$wrapAsCode&&(this.$wrapAsCode=e,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(e){this.$useWorker=e,this.$stopWorker(),e&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(e){(e=parseInt(e))>0&&this.$tabSize!==e&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=e,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(e){this.setFoldStyle(e)},handlesSet:!0},overwrite:{set:function(e){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(e){this.doc.setNewLineMode(e)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(e){this.setMode(e)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=d})),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],(function(e,t,n){"use strict";var r=e("./lib/lang"),i=e("./lib/oop"),s=e("./range").Range,o=function(){this.$options={}};(function(){this.set=function(e){return i.mixin(this.$options,e),this},this.getOptions=function(){return r.copyObject(this.$options)},this.setOptions=function(e){this.$options=e},this.find=function(e){var t=this.$options,n=this.$matchIterator(e,t);if(!n)return!1;var r=null;return n.forEach((function(e,n,i,o){return r=new s(e,n,i,o),!(n==o&&t.start&&t.start.start&&0!=t.skipCurrent&&r.isEqual(t.start))||(r=null,!1)})),r},this.findAll=function(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var n=t.range,i=n?e.getLines(n.start.row,n.end.row):e.doc.getAllLines(),o=[],u=t.re;if(t.$isMultiLine){var l,a=u.length,f=i.length-a;e:for(var c=u.offset||0;c<=f;c++){for(var h=0;h<a;h++)if(-1==i[c+h].search(u[h]))continue e;var p=i[c],d=i[c+a-1],v=p.length-p.match(u[0])[0].length,m=d.match(u[a-1])[0].length;l&&l.end.row===c&&l.end.column>v||(o.push(l=new s(c,v,c+a-1,m)),a>2&&(c=c+a-2))}}else for(var g=0;g<i.length;g++){var y=r.getMatchOffsets(i[g],u);for(h=0;h<y.length;h++){var b=y[h];o.push(new s(g,b.offset,g,b.offset+b.length))}}if(n){var w=n.start.column,E=n.start.column;for(g=0,h=o.length-1;g<h&&o[g].start.column<w&&o[g].start.row==n.start.row;)g++;for(;g<h&&o[h].end.column>E&&o[h].end.row==n.end.row;)h--;o=o.slice(g,h+1);for(g=0,h=o.length;g<h;g++)o[g].start.row+=n.start.row,o[g].end.row+=n.start.row}return o},this.replace=function(e,t){var n=this.$options,r=this.$assembleRegExp(n);if(n.$isMultiLine)return t;if(r){var i=r.exec(e);if(!i||i[0].length!=e.length)return null;t=e.replace(r,t);if(n.preserveCase){t=t.split("");for(var s=Math.min(e.length,e.length);s--;){var o=e[s];o&&o.toLowerCase()!=o?t[s]=t[s].toUpperCase():t[s]=t[s].toLowerCase()}t=t.join("")}return t}},this.$assembleRegExp=function(e,t){if(e.needle instanceof RegExp)return e.re=e.needle;var n=e.needle;if(!e.needle)return e.re=!1;e.regExp||(n=r.escapeRegExp(n)),e.wholeWord&&(n=function(e,t){function n(e){return/\w/.test(e)||t.regExp?"\\b":""}return n(e[0])+e+n(e[e.length-1])}(n,e));var i=e.caseSensitive?"gm":"gmi";e.$isMultiLine=!t&&/[\n\r]/.test(n);if(e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(n,i);try{var s=new RegExp(n,i)}catch(o){s=!1}return e.re=s},this.$assembleMultilineRegExp=function(e,t){for(var n=e.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),r=[],i=0;i<n.length;i++)try{r.push(new RegExp(n[i],t))}catch(s){return!1}return r},this.$matchIterator=function(e,t){var n=this.$assembleRegExp(t);if(!n)return!1;var r=1==t.backwards,i=0!=t.skipCurrent,s=t.range,o=t.start;o||(o=s?s[r?"end":"start"]:e.selection.getRange()),o.start&&(o=o[i!=r?"end":"start"]);var u=s?s.start.row:0,a=s?s.end.row:e.getLength()-1;if(r)var f=function(e){var n=o.row;if(!c(n,o.column,e)){for(n--;n>=u;n--)if(c(n,Number.MAX_VALUE,e))return;if(0!=t.wrap)for(n=a,u=o.row;n>=u;n--)if(c(n,Number.MAX_VALUE,e))return}};else f=function(e){var n=o.row;if(!c(n,o.column,e)){for(n+=1;n<=a;n++)if(c(n,0,e))return;if(0!=t.wrap)for(n=u,a=o.row;n<=a;n++)if(c(n,0,e))return}};if(t.$isMultiLine)var l=n.length,c=function(t,i,s){var o=r?t-l+1:t;if(!(o<0)){var u=e.getLine(o),a=u.search(n[0]);if(!(!r&&a<i||-1===a)){for(var f=1;f<l;f++)if(-1==(u=e.getLine(o+f)).search(n[f]))return;var c=u.match(n[l-1])[0].length;if(!(r&&c>i))return!!s(o,a,o+l-1,c)||void 0}}};else if(r)c=function(t,r,i){var u,s=e.getLine(t),o=[],a=0;n.lastIndex=0;for(;u=n.exec(s);){var f=u[0].length;a=u.index;if(!f){if(a>=s.length)break;n.lastIndex=a+=1}if(u.index+f>r)break;o.push(u.index,f)}for(var l=o.length-1;l>=0;l-=2){var c=o[l-1];if(i(t,c,t,c+(f=o[l])))return!0}};else c=function(t,r,i){var o,u,s=e.getLine(t);n.lastIndex=r;for(;u=n.exec(s);){var a=u[0].length;if(i(t,o=u.index,t,o+a))return!0;if(!a){n.lastIndex=o+=1;if(o>=s.length)return!1}}};return{forEach:f}}}).call(o.prototype),t.Search=o})),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],(function(e,t,n){"use strict";function o(e,t){this.platform=t||(i.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(e),this.$singleCommand=!0}function u(e,t){o.call(this,e,t),this.$singleCommand=!1}var r=e("../lib/keys"),i=e("../lib/useragent"),s=r.KEY_MODS;u.prototype=o.prototype,function(){function e(e){return"object"==typeof e&&e.bindKey&&e.bindKey.position||(e.isDefault?-100:0)}this.addCommand=function(e){this.commands[e.name]&&this.removeCommand(e),this.commands[e.name]=e,e.bindKey&&this._buildKeyHash(e)},this.removeCommand=function(e,t){var n=e&&("string"==typeof e?e:e.name);e=this.commands[n],t||delete this.commands[n];var r=this.commandKeyBinding;for(var i in r){var s=r[i];if(s==e)delete r[i];else if(Array.isArray(s)){var o=s.indexOf(e);-1!=o&&(s.splice(o,1),1==s.length&&(r[i]=s[0]))}}},this.bindKey=function(e,t,n){"object"==typeof e&&e&&(null==n&&(n=e.position),e=e[this.platform]);if(e){if("function"==typeof t)return this.addCommand({exec:t,bindKey:e,name:t.name||e});e.split("|").forEach((function(e){var r="";if(-1!=e.indexOf(" ")){var i=e.split(/\s+/);e=i.pop(),i.forEach((function(e){var t=this.parseKeys(e),n=s[t.hashId]+t.key;r+=(r?" ":"")+n,this._addCommandToBinding(r,"chainKeys")}),this),r+=" "}var o=this.parseKeys(e),u=s[o.hashId]+o.key;this._addCommandToBinding(r+u,t,n)}),this)}},this._addCommandToBinding=function(t,n,r){var s,i=this.commandKeyBinding;if(n)if(!i[t]||this.$singleCommand)i[t]=n;else{Array.isArray(i[t])?-1!=(s=i[t].indexOf(n))&&i[t].splice(s,1):i[t]=[i[t]],"number"!=typeof r&&(r=e(n));var o=i[t];for(s=0;s<o.length;s++){if(e(o[s])>r)break}o.splice(s,0,n)}else delete i[t]},this.addCommands=function(e){e&&Object.keys(e).forEach((function(t){var n=e[t];if(n){if("string"==typeof n)return this.bindKey(n,t);"function"==typeof n&&(n={exec:n});"object"==typeof n&&(n.name||(n.name=t),this.addCommand(n))}}),this)},this.removeCommands=function(e){Object.keys(e).forEach((function(t){this.removeCommand(e[t])}),this)},this.bindKeys=function(e){Object.keys(e).forEach((function(t){this.bindKey(t,e[t])}),this)},this._buildKeyHash=function(e){this.bindKey(e.bindKey,e)},this.parseKeys=function(e){var t=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter((function(e){return e})),n=t.pop(),i=r[n];if(r.FUNCTION_KEYS[i])n=r.FUNCTION_KEYS[i].toLowerCase();else{if(!t.length)return{key:n,hashId:-1};if(1==t.length&&"shift"==t[0])return{key:n.toUpperCase(),hashId:-1}}for(var s=0,o=t.length;o--;){var u=r.KEY_MODS[t[o]];if(null==u)return"undefined"!=typeof console&&console.error("invalid modifier "+t[o]+" in "+e),!1;s|=u}return{key:n,hashId:s}},this.findKeyCommand=function(t,n){var r=s[t]+n;return this.commandKeyBinding[r]},this.handleKeyboard=function(e,t,n,r){if(!(r<0)){var i=s[t]+n,o=this.commandKeyBinding[i];e.$keyChain&&(e.$keyChain+=" "+i,o=this.commandKeyBinding[e.$keyChain]||o);if(o&&("chainKeys"==o||"chainKeys"==o[o.length-1]))return e.$keyChain=e.$keyChain||i,{command:"null"};e.$keyChain&&(t&&4!=t||1!=n.length?(-1==t||r>0)&&(e.$keyChain=""):e.$keyChain=e.$keyChain.slice(0,-i.length-1));return{command:o}}},this.getStatusText=function(e,t){return t.$keyChain||""}}.call(o.prototype),t.HashHandler=o,t.MultiHashHandler=u})),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],(function(e,t,n){"use strict";var r=e("../lib/oop"),i=e("../keyboard/hash_handler").MultiHashHandler,s=e("../lib/event_emitter").EventEmitter,o=function(e,t){i.call(this,t,e),this.byName=this.commands,this.setDefaultHandler("exec",(function(e){return e.command.exec(e.editor,e.args||{})}))};r.inherits(o,i),function(){r.implement(this,s),this.exec=function(e,t,n){if(Array.isArray(e)){for(var r=e.length;r--;)if(this.exec(e[r],t,n))return!0;return!1}"string"==typeof e&&(e=this.commands[e]);if(!e)return!1;if(t&&t.$readOnly&&!e.readOnly)return!1;if(0!=this.$checkCommandState&&e.isAvailable&&!e.isAvailable(t))return!1;var i={editor:t,command:e,args:n};return i.returnValue=this._emit("exec",i),this._signal("afterExec",i),!1!==i.returnValue},this.toggleRecording=function(e){if(!this.$inReplay)return e&&e._emit("changeStatus"),this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(e){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(e);try{this.$inReplay=!0,this.macro.forEach((function(t){"string"==typeof t?this.exec(t,e):this.exec(t[0],e,t[1])}),this)}finally{this.$inReplay=!1}}},this.trimMacro=function(e){return e.map((function(e){return"string"!=typeof e[0]&&(e[0]=e[0].name),e[1]||(e=e[0]),e}))}}.call(o.prototype),t.CommandManager=o})),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],(function(e,t,n){"use strict";function o(e,t){return{win:e,mac:t}}var r=e("../lib/lang"),i=e("../config"),s=e("../range").Range;t.commands=[{name:"showSettingsMenu",bindKey:o("Ctrl-,","Command-,"),exec:function(e){i.loadModule("ace/ext/settings_menu",(function(t){t.init(e),e.showSettingsMenu()}))},readOnly:!0},{name:"goToNextError",bindKey:o("Alt-E","F4"),exec:function(e){i.loadModule("./ext/error_marker",(function(t){t.showErrorMarker(e,1)}))},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:o("Alt-Shift-E","Shift-F4"),exec:function(e){i.loadModule("./ext/error_marker",(function(t){t.showErrorMarker(e,-1)}))},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:o("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:o(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:o("Ctrl-L","Command-L"),exec:function(e,t){"number"==typeof t&&!isNaN(t)&&e.gotoLine(t),e.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:o("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:o("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:o("F2","F2"),exec:function(e){e.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:o("Alt-F2","Alt-F2"),exec:function(e){e.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:o(null,"Ctrl-Command-Option-0"),exec:function(e){e.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:o("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll(),e.session.unfold(e.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:o("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:o("Ctrl-K","Command-G"),exec:function(e){e.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:o("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:o("Alt-K","Ctrl-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:o("Alt-Shift-K","Ctrl-Shift-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:o("Ctrl-F","Command-F"),exec:function(e){i.loadModule("ace/ext/searchbox",(function(t){t.Search(e)}))},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:o("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:o("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:o("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:o("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:o("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:o("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:o("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:o("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:o("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:o("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:o("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:o("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:o("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:o("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:o("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:o("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:o("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:o("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:o("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:o("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:o(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:o("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:o(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:o("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:o("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:o("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording(e)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:o("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:o("Ctrl-P","Ctrl-P"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:o("Ctrl-Shift-P","Ctrl-Shift-P"),exec:function(e){e.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:o("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(e){e.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:o(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(e){},readOnly:!0},{name:"cut",description:"Cut",exec:function(e){var n=e.$copyWithEmptySelection&&e.selection.isEmpty()?e.selection.getLineRange():e.selection.getRange();e._emit("cut",n),n.isEmpty()||e.session.remove(n),e.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(e,t){e.$handlePaste(t)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:o("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:o("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:o("Ctrl-Alt-S","Command-Alt-S"),exec:function(e){e.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:o("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:o("Ctrl-Shift-/","Command-Shift-/"),exec:function(e){e.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:o("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(e){e.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:o("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(e){e.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:o("Ctrl-H","Command-Option-F"),exec:function(e){i.loadModule("ace/ext/searchbox",(function(t){t.Search(e,!0)}))}},{name:"undo",description:"Undo",bindKey:o("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",description:"Redo",bindKey:o("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:o("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:o("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:o("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:o("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:o("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(e){e.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:o("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:o("Shift-Delete",null),exec:function(e){if(!e.selection.isEmpty())return!1;e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:o("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:o("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:o("Ctrl-Shift-Backspace",null),exec:function(e){var t=e.selection.getRange();t.start.column=0,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:o("Ctrl-Shift-Delete",null),exec:function(e){var t=e.selection.getRange();t.end.column=Number.MAX_VALUE,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:o("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:o("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:o("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:o("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:o("Ctrl-[","Ctrl-["),exec:function(e){e.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:o("Ctrl-]","Ctrl-]"),exec:function(e){e.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(e,t){e.insert(r.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:o(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:o("Alt-Shift-X","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:o("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:o("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"expandtoline",description:"Expand to line",bindKey:o("Ctrl-Shift-L","Command-Shift-L"),exec:function(e){var t=e.selection.getRange();t.start.column=t.end.column=0,t.end.row++,e.selection.setRange(t,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",description:"Join lines",bindKey:o(null,null),exec:function(e){for(var t=e.selection.isBackwards(),n=t?e.selection.getSelectionLead():e.selection.getSelectionAnchor(),i=t?e.selection.getSelectionAnchor():e.selection.getSelectionLead(),o=e.session.doc.getLine(n.row).length,a=e.session.doc.getTextRange(e.selection.getRange()).replace(/\n\s*/," ").length,f=e.session.doc.getLine(n.row),l=n.row+1;l<=i.row+1;l++){var c=r.stringTrimLeft(r.stringTrimRight(e.session.doc.getLine(l)));0!==c.length&&(c=" "+c),f+=c}i.row+1<e.session.doc.getLength()-1&&(f+=e.session.doc.getNewLineCharacter()),e.clearSelection(),e.session.doc.replace(new s(n.row,0,i.row+2,0),f),a>0?(e.selection.moveCursorTo(n.row,n.column),e.selection.selectTo(n.row,n.column+a)):(o=e.session.doc.getLine(n.row).length>o?o+1:o,e.selection.moveCursorTo(n.row,o))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:o(null,null),exec:function(e){var t=e.session.doc.getLength()-1,n=e.session.doc.getLine(t).length,r=e.selection.rangeList.ranges,i=[];r.length<1&&(r=[e.selection.getRange()]);for(var o=0;o<r.length;o++)o==r.length-1&&(r[o].end.row!==t||r[o].end.column!==n)&&i.push(new s(r[o].end.row,r[o].end.column,t,n)),0===o?(0!==r[o].start.row||0!==r[o].start.column)&&i.push(new s(0,0,r[o].start.row,r[o].start.column)):i.push(new s(r[o-1].end.row,r[o-1].end.column,r[o].start.row,r[o].start.column));e.exitMultiSelectMode(),e.clearSelection();for(o=0;o<i.length;o++)e.selection.addRange(i[o],!1)},readOnly:!0,scrollIntoView:"none"},{name:"openCommandPallete",description:"Open command pallete",bindKey:o("F1","F1"),exec:function(e){e.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:o(null,null),exec:function(e){e.prompt({$type:"modes"})},readOnly:!0}]})),ace.define("ace/clipboard",["require","exports","module"],(function(e,t,n){"use strict";n.exports={lineMode:!1}})),ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/clipboard"],(function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./lib/lang"),o=e("./lib/useragent"),u=e("./keyboard/textinput").TextInput,a=e("./mouse/mouse_handler").MouseHandler,f=e("./mouse/fold_handler").FoldHandler,l=e("./keyboard/keybinding").KeyBinding,c=e("./edit_session").EditSession,h=e("./search").Search,p=e("./range").Range,d=e("./lib/event_emitter").EventEmitter,v=e("./commands/command_manager").CommandManager,m=e("./commands/default_commands").commands,g=e("./config"),y=e("./token_iterator").TokenIterator,b=e("./clipboard"),w=function(e,t,n){var r=e.getContainerElement();this.container=r,this.renderer=e,this.id="editor"+ ++w.$uid,this.commands=new v(o.isMac?"mac":"win",m),"object"==typeof document&&(this.textInput=new u(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new a(this),new f(this)),this.keyBinding=new l(this),this.$search=(new h).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=s.delayedCall(function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",(function(e,t){t._$emitInputEvent.schedule(31)})),this.setSession(t||n&&n.session||new c("")),g.resetOptions(this),n&&this.setOptions(n),g._signal("editor",this)};w.$uid=0,function(){r.implement(this,d),this.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=s.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(e){if(this.curOp){if(!e||this.curOp.command)return;this.prevOp=this.curOp}e||(this.previousCommand=null,e={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:e.command||{},args:e.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},this.endOperation=function(e){if(this.curOp){if(e&&!1===e.returnValue)return this.curOp=null;if(1==e&&this.curOp.command&&"mouse"==this.curOp.command.name)return;this._signal("beforeEndOperation");if(!this.curOp)return;var t=this.curOp.command,n=t&&t.scrollIntoView;if(n){switch(n){case"center-animate":n="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var r=this.selection.getRange(),i=this.renderer.layerConfig;(r.start.row>=i.lastRow||r.end.row<=i.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==n&&this.renderer.animateScrolling(this.curOp.scrollTop)}var s=this.selection.toJSON();this.curOp.selectionAfter=s,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(s),this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(e){if(this.$mergeUndoDeltas){var t=this.prevOp,n=this.$mergeableCommands,r=t.command&&e.command.name==t.command.name;if("insertstring"==e.command.name){var i=e.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),r=r&&this.mergeNextCommand&&(!/\s/.test(i)||/\s/.test(t.args)),this.mergeNextCommand=!0}else r=r&&-1!==n.indexOf(e.command.name);"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(r=!1),r?this.session.mergeUndoDeltas=!0:-1!==n.indexOf(e.command.name)&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(e,t){if(e&&"string"==typeof e&&"ace"!=e){this.$keybindingId=e;var n=this;g.loadModule(["keybinding",e],(function(r){n.$keybindingId==e&&n.keyBinding.setKeyboardHandler(r&&r.handler),t&&t()}))}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(e),t&&t()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(e){if(this.session!=e){this.curOp&&this.endOperation(),this.curOp={};var t=this.session;if(t){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var n=this.session.getSelection();n.off("changeCursor",this.$onCursorChange),n.off("changeSelection",this.$onSelectionChange)}this.session=e,e?(this.$onDocumentChange=this.onDocumentChange.bind(this),e.on("change",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),e.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),e.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=e.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(e)),this._signal("changeSession",{session:e,oldSession:t}),this.curOp=null,t&&t._signal("changeEditor",{oldEditor:this}),e&&e._signal("changeEditor",{editor:this}),e&&e.bgTokenizer&&e.bgTokenizer.scheduleStart()}},this.getSession=function(){return this.session},this.setValue=function(e,t){return this.session.doc.setValue(e),t?1==t?this.navigateFileEnd():-1==t&&this.navigateFileStart():this.selectAll(),e},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(e){this.renderer.onResize(e)},this.setTheme=function(e,t){this.renderer.setTheme(e,t)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(e){this.renderer.setStyle(e)},this.unsetStyle=function(e){this.renderer.unsetStyle(e)},this.getFontSize=function(){return this.getOption("fontSize")||i.computedStyle(this.container).fontSize},this.setFontSize=function(e){this.setOption("fontSize",e)},this.$highlightBrackets=function(){this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null);if(!this.$highlightPending){var e=this;this.$highlightPending=!0,setTimeout((function(){e.$highlightPending=!1;var t=e.session;if(t&&t.bgTokenizer){var n=t.findMatchingBracket(e.getCursorPosition());if(n)var r=new p(n.row,n.column,n.row,n.column+1);else if(t.$mode.getMatching)r=t.$mode.getMatching(e.session);r&&(t.$bracketHighlight=t.addMarker(r,"ace_bracket","text"))}}),50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var e=this;this.$highlightTagPending=!0,setTimeout((function(){e.$highlightTagPending=!1;var t=e.session;if(t&&t.bgTokenizer){var n=e.getCursorPosition(),r=new y(e.session,n.row,n.column),i=r.getCurrentToken();if(i&&/\b(?:tag-open|tag-name)/.test(i.type)){if(-1==i.type.indexOf("tag-open")||(i=r.stepForward())){var s=i.value,o=0,u=r.stepBackward();if("<"==u.value)do{u=i,(i=r.stepForward())&&i.value===s&&-1!==i.type.indexOf("tag-name")&&("<"===u.value?o++:"</"===u.value&&o--)}while(i&&o>=0);else{do{i=u,u=r.stepBackward(),i&&i.value===s&&-1!==i.type.indexOf("tag-name")&&("<"===u.value?o++:"</"===u.value&&o--)}while(u&&o<=0);r.stepForward()}if(i){var a=r.getCurrentTokenRow(),f=r.getCurrentTokenColumn(),l=new p(a,f,a,f+i.value.length),c=t.$backMarkers[t.$tagHighlight];t.$tagHighlight&&null!=c&&0!==l.compareRange(c.range)&&(t.removeMarker(t.$tagHighlight),t.$tagHighlight=null),t.$tagHighlight||(t.$tagHighlight=t.addMarker(l,"ace_bracket","text"))}else t.removeMarker(t.$tagHighlight),t.$tagHighlight=null}}else t.removeMarker(t.$tagHighlight),t.$tagHighlight=null}}),50)}},this.focus=function(){var e=this;setTimeout((function(){e.isFocused()||e.textInput.focus()})),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(e){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",e))},this.onBlur=function(e){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",e))},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(e){var t=this.session.$useWrapMode,n=e.start.row==e.end.row?e.end.row:1/0;this.renderer.updateLines(e.start.row,n,t),this._signal("change",e),this.$cursorChange(),this.$updateHighlightActiveLine()},this.onTokenizerUpdate=function(e){var t=e.data;this.renderer.updateLines(t.first,t.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var t,e=this.getSession();if(this.$highlightActiveLine){"line"==this.$selectionStyle&&this.selection.isMultiLine()||(t=this.getCursorPosition());this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(t=!1),this.renderer.$maxLines&&1===this.session.getLength()&&!(this.renderer.$minLines>1)&&(t=!1)}if(e.$highlightLineMarker&&!t)e.removeMarker(e.$highlightLineMarker.id),e.$highlightLineMarker=null;else if(!e.$highlightLineMarker&&t){var n=new p(t.row,t.column,t.row,1/0);n.id=e.addMarker(n,"ace_active-line","screenLine"),e.$highlightLineMarker=n}else t&&(e.$highlightLineMarker.start.row=t.row,e.$highlightLineMarker.end.row=t.row,e.$highlightLineMarker.start.column=t.column,e._signal("changeBackMarker"))},this.onSelectionChange=function(e){var t=this.session;t.$selectionMarker&&t.removeMarker(t.$selectionMarker),t.$selectionMarker=null;if(this.selection.isEmpty())this.$updateHighlightActiveLine();else{var n=this.selection.getRange(),r=this.getSelectionStyle();t.$selectionMarker=t.addMarker(n,"ace_selection",r)}var i=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(i),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var e=this.session,t=this.getSelectionRange();if(!t.isEmpty()&&!t.isMultiLine()){var n=t.start.column,r=t.end.column,i=e.getLine(t.start.row),s=i.substring(n,r);if(!(s.length>5e3)&&/[\w\d]/.test(s)){var o=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:s}),u=i.substring(n-1,r+1);if(o.test(u))return o}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(e){this.renderer.updateText(),this._emit("changeMode",e)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var e=this.getSelectedText(),t=this.session.doc.getNewLineCharacter(),n=!1;if(!e&&this.$copyWithEmptySelection){n=!0;for(var r=this.selection.getAllRanges(),i=0;i<r.length;i++){var s=r[i];i&&r[i-1].start.row==s.start.row||(e+=this.session.getLine(s.start.row)+t)}}var o={text:e};return this._signal("copy",o),b.lineMode=n?o.text:"",o.text},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(e,t){var n={text:e,event:t};this.commands.exec("paste",this,n)},this.$handlePaste=function(e){"string"==typeof e&&(e={text:e}),this._signal("paste",e);var t=e.text,n=t==b.lineMode,r=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)n?r.insert({row:this.selection.lead.row,column:0},t):this.insert(t);else if(n)this.selection.rangeList.ranges.forEach((function(e){r.insert({row:e.start.row,column:0},t)}));else{var i=t.split(/\r\n|\r|\n/),s=this.selection.rangeList.ranges;if(i.length>s.length||i.length<2||!i[1])return this.commands.exec("insertstring",this,t);for(var o=s.length;o--;){var u=s[o];u.isEmpty()||r.remove(u),r.insert(u.start,i[o])}}},this.execCommand=function(e,t){return this.commands.exec(e,this,t)},this.insert=function(e,t){var n=this.session,r=n.getMode(),i=this.getCursorPosition();if(this.getBehavioursEnabled()&&!t){var s=r.transformAction(n.getState(i.row),"insertion",this,n,e);s&&(e!==s.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),e=s.text)}"\t"==e&&(e=this.session.getTabString());if(this.selection.isEmpty()){if(this.session.getOverwrite()&&-1==e.indexOf("\n")){(o=new p.fromPoints(i,i)).end.column+=e.length,this.session.remove(o)}}else{var o=this.getSelectionRange();i=this.session.remove(o),this.clearSelection()}if("\n"==e||"\r\n"==e){var u=n.getLine(i.row);if(i.column>u.search(/\S|$/)){var a=u.substr(i.column).search(/\S|$/);n.doc.removeInLine(i.row,i.column,i.column+a)}}this.clearSelection();var f=i.column,l=n.getState(i.row),c=(u=n.getLine(i.row),r.checkOutdent(l,u,e));n.insert(i,e);s&&s.selection&&(2==s.selection.length?this.selection.setSelectionRange(new p(i.row,f+s.selection[0],i.row,f+s.selection[1])):this.selection.setSelectionRange(new p(i.row+s.selection[0],s.selection[1],i.row+s.selection[2],s.selection[3])));if(n.getDocument().isNewLine(e)){var d=r.getNextLineIndent(l,u.slice(0,i.column),n.getTabString());n.insert({row:i.row+1,column:0},d)}c&&r.autoOutdent(l,n,i.row)},this.onTextInput=function(e,t){if(!t)return this.keyBinding.onTextInput(e);this.startOperation({command:{name:"insertstring"}});var n=this.applyComposition.bind(this,e,t);this.selection.rangeCount?this.forEachSelection(n):n(),this.endOperation()},this.applyComposition=function(e,t){if(t.extendLeft||t.extendRight){(n=this.selection.getRange()).start.column-=t.extendLeft,n.end.column+=t.extendRight,this.selection.setRange(n),!e&&!n.isEmpty()&&this.remove()}(e||!this.selection.isEmpty())&&this.insert(e,!0);if(t.restoreStart||t.restoreEnd){var n;(n=this.selection.getRange()).start.column-=t.restoreStart,n.end.column-=t.restoreEnd,this.selection.setRange(n)}},this.onCommandKey=function(e,t,n){this.keyBinding.onCommandKey(e,t,n)},this.setOverwrite=function(e){this.session.setOverwrite(e)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(e){this.setOption("scrollSpeed",e)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(e){this.setOption("dragDelay",e)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(e){this.setOption("selectionStyle",e)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(e){this.setOption("highlightActiveLine",e)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(e){this.setOption("highlightSelectedWord",e)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(e){this.renderer.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(e){this.renderer.setDisplayIndentGuides(e)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(e){this.setOption("readOnly",e)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(e){this.setOption("behavioursEnabled",e)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(e){this.setOption("wrapBehavioursEnabled",e)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(e){this.setOption("showFoldWidgets",e)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(e){this.selection.isEmpty()&&("left"==e?this.selection.selectLeft():this.selection.selectRight());var t=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session,r=n.getState(t.start.row),i=n.getMode().transformAction(r,"deletion",this,n,t);if(0===t.end.column){var s=n.getTextRange(t);if("\n"==s[s.length-1]){var o=n.getLine(t.end.row);/^\s+$/.test(o)&&(t.end.column=o.length)}}i&&(t=i)}this.session.remove(t),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var e=this.getSelectionRange();e.start.column==e.end.column&&e.start.row==e.end.row&&(e.end.column=0,e.end.row++),this.session.remove(e),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var e=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(e)},this.transposeLetters=function(){if(this.selection.isEmpty()){var e=this.getCursorPosition(),t=e.column;if(0!==t){var r,i,n=this.session.getLine(e.row);t<n.length?(r=n.charAt(t)+n.charAt(t-1),i=new p(e.row,t-1,e.row,t+1)):(r=n.charAt(t-1)+n.charAt(t-2),i=new p(e.row,t-2,e.row,t)),this.session.replace(i,r),this.session.selection.moveToPosition(i.end)}}},this.toLowerCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toLowerCase()),this.selection.setSelectionRange(e)},this.toUpperCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toUpperCase()),this.selection.setSelectionRange(e)},this.indent=function(){var e=this.session,t=this.getSelectionRange();if(!(t.start.row<t.end.row)){if(t.start.column<t.end.column){var r=e.getTextRange(t);if(!/^\s+$/.test(r)){n=this.$getSelectedRows();e.indentRows(n.first,n.last,"\t");return}}var i=e.getLine(t.start.row),o=t.start,u=e.getTabSize(),a=e.documentToScreenColumn(o.row,o.column);if(this.session.getUseSoftTabs())var f=u-a%u,l=s.stringRepeat(" ",f);else{for(f=a%u;" "==i[t.start.column-1]&&f;)t.start.column--,f--;this.selection.setSelectionRange(t),l="\t"}return this.insert(l)}var n=this.$getSelectedRows();e.indentRows(n.first,n.last,"\t")},this.blockIndent=function(){var e=this.$getSelectedRows();this.session.indentRows(e.first,e.last,"\t")},this.blockOutdent=function(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())},this.sortLines=function(){for(var e=this.$getSelectedRows(),t=this.session,n=[],r=e.first;r<=e.last;r++)n.push(t.getLine(r));n.sort((function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}));var i=new p(0,0,0,0);for(r=e.first;r<=e.last;r++){var s=t.getLine(r);i.start.row=r,i.end.row=r,i.end.column=s.length,t.replace(i,n[r-e.first])}},this.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row),t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)},this.toggleBlockComment=function(){var e=this.getCursorPosition(),t=this.session.getState(e.row),n=this.getSelectionRange();this.session.getMode().toggleBlockComment(t,this.session,n,e)},this.getNumberAt=function(e,t){var n=/[\-]?[0-9]+(?:\.[0-9]+)?/g;n.lastIndex=0;for(var r=this.session.getLine(e);n.lastIndex<t;){var i=n.exec(r);if(i.index<=t&&i.index+i[0].length>=t){return{value:i[0],start:i.index,end:i.index+i[0].length}}}return null},this.modifyNumber=function(e){var t=this.selection.getCursor().row,n=this.selection.getCursor().column,r=new p(t,n-1,t,n),i=this.session.getTextRange(r);if(!isNaN(parseFloat(i))&&isFinite(i)){var s=this.getNumberAt(t,n);if(s){var o=s.value.indexOf(".")>=0?s.start+s.value.indexOf(".")+1:s.end,u=s.start+s.value.length-o,a=parseFloat(s.value);a*=Math.pow(10,u),o!==s.end&&n<o?e*=Math.pow(10,s.end-n-1):e*=Math.pow(10,s.end-n),a+=e;var f=(a/=Math.pow(10,u)).toFixed(u),l=new p(t,s.start,t,s.end);this.session.replace(l,f),this.moveCursorTo(t,Math.max(s.start+1,n+f.length-s.value.length))}}else this.toggleWord()},this.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],this.toggleWord=function(){var e=this.selection.getCursor().row,t=this.selection.getCursor().column;this.selection.selectWord();var n=this.getSelectedText(),r=this.selection.getWordRange().start.column,i=n.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),o=t-r-1;o<0&&(o=0);var u=0,a=0,f=this;n.match(/[A-Za-z0-9_]+/)&&i.forEach((function(t,i){a=u+t.length,o>=u&&o<=a&&(n=t,f.selection.clearSelection(),f.moveCursorTo(e,u+r),f.selection.selectTo(e,a+r)),u=a}));for(var c,l=this.$toggleWordPairs,h=0;h<l.length;h++)for(var p=l[h],d=0;d<=1;d++){var v=+!d,m=n.match(new RegExp("^\\s?_?("+s.escapeRegExp(p[d])+")\\s?$","i"));if(m){n.match(new RegExp("([_]|^|\\s)("+s.escapeRegExp(m[1])+")($|\\s)","g"))&&(c=n.replace(new RegExp(s.escapeRegExp(p[d]),"i"),(function(e){var t=p[v];return e.toUpperCase()==e?t=t.toUpperCase():e.charAt(0).toUpperCase()==e.charAt(0)&&(t=t.substr(0,0)+p[v].charAt(0).toUpperCase()+t.substr(1)),t})),this.insert(c),c="")}}},this.removeLines=function(){var e=this.$getSelectedRows();this.session.removeFullLines(e.first,e.last),this.clearSelection()},this.duplicateSelection=function(){var e=this.selection,t=this.session,n=e.getRange(),r=e.isBackwards();if(n.isEmpty()){var i=n.start.row;t.duplicateLines(i,i)}else{var s=r?n.start:n.end,o=t.insert(s,t.getTextRange(n),!1);n.start=s,n.end=o,e.setSelectionRange(n,r)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(e,t,n){return this.session.moveText(e,t,n)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(e,t){var n,r,i=this.selection;if(!i.inMultiSelectMode||this.inVirtualSelectionMode){var s=i.toOrientedRange();n=this.$getSelectedRows(s),r=this.session.$moveLines(n.first,n.last,t?0:e),t&&-1==e&&(r=0),s.moveBy(r,0),i.fromOrientedRange(s)}else{var o=i.rangeList.ranges;i.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var u=0,a=0,f=o.length,l=0;l<f;l++){var c=l;o[l].moveBy(u,0);for(var h=(n=this.$getSelectedRows(o[l])).first,p=n.last;++l<f;){a&&o[l].moveBy(a,0);var d=this.$getSelectedRows(o[l]);if(t&&d.first!=p)break;if(!t&&d.first>p+1)break;p=d.last}l--,u=this.session.$moveLines(h,p,t?0:e),t&&-1==e&&(c=l+1);for(;c<=l;)o[c].moveBy(u,0),c++;t||(u=0),a+=u}i.fromOrientedRange(i.ranges[0]),i.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(e){return e=(e||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(e.start.row),last:this.session.getRowFoldEnd(e.end.row)}},this.onCompositionStart=function(e){this.renderer.showComposition(e)},this.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()},this.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(e,t){var n=this.renderer,r=this.renderer.layerConfig,i=e*Math.floor(r.height/r.lineHeight);!0===t?this.selection.$moveSelection((function(){this.moveCursorBy(i,0)})):!1===t&&(this.selection.moveCursorBy(i,0),this.selection.clearSelection());var s=n.scrollTop;n.scrollBy(0,i*r.lineHeight),null!=t&&n.scrollCursorIntoView(null,.5),n.animateScrolling(s)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(e){this.renderer.scrollToRow(e)},this.scrollToLine=function(e,t,n,r){this.renderer.scrollToLine(e,t,n,r)},this.centerSelection=function(){var e=this.getSelectionRange(),t={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(t,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.selection.selectAll()},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)},this.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)},this.jumpToMatching=function(e,t){var n=this.getCursorPosition(),r=new y(this.session,n.row,n.column),i=r.getCurrentToken(),s=i||r.stepForward();if(s){var o,l,u=!1,a={},f=n.column-s.start,c={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(s.value.match(/[{}()\[\]]/g)){for(;f<s.value.length&&!u;f++)if(c[s.value[f]]){l=c[s.value[f]]+"."+s.type.replace("rparen","lparen"),isNaN(a[l])&&(a[l]=0);switch(s.value[f]){case"(":case"[":case"{":a[l]++;break;case")":case"]":case"}":a[l]--,-1===a[l]&&(o="bracket",u=!0)}}}else-1!==s.type.indexOf("tag-name")&&(isNaN(a[s.value])&&(a[s.value]=0),"<"===i.value?a[s.value]++:"</"===i.value&&a[s.value]--,-1===a[s.value]&&(o="tag",u=!0));u||(i=s,s=r.stepForward(),f=0)}while(s&&!u);if(o){var h,d;if("bracket"===o){if(!(h=this.session.getBracketRange(n))){d=(h=new p(r.getCurrentTokenRow(),r.getCurrentTokenColumn()+f-1,r.getCurrentTokenRow(),r.getCurrentTokenColumn()+f-1)).start;(t||d.row===n.row&&Math.abs(d.column-n.column)<2)&&(h=this.session.getBracketRange(d))}}else if("tag"===o){if(!s||-1===s.type.indexOf("tag-name"))return;var v=s.value;if(0===(h=new p(r.getCurrentTokenRow(),r.getCurrentTokenColumn()-2,r.getCurrentTokenRow(),r.getCurrentTokenColumn()-2)).compare(n.row,n.column)){u=!1;do{s=i,(i=r.stepBackward())&&(-1!==i.type.indexOf("tag-close")&&h.setEnd(r.getCurrentTokenRow(),r.getCurrentTokenColumn()+1),s.value===v&&-1!==s.type.indexOf("tag-name")&&("<"===i.value?a[v]++:"</"===i.value&&a[v]--,0===a[v]&&(u=!0)))}while(i&&!u)}s&&s.type.indexOf("tag-name")&&((d=h.start).row==n.row&&Math.abs(d.column-n.column)<2&&(d=h.end))}(d=h&&h.cursor||d)&&(e?h&&t?this.selection.setRange(h):h&&h.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(d.row,d.column):this.selection.moveTo(d.row,d.column))}}},this.gotoLine=function(e,t,n){this.selection.clearSelection(),this.session.unfold({row:e-1,column:t||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(e-1,t||0),this.isRowFullyVisible(e-1)||this.scrollToLine(e-1,!0,n)},this.navigateTo=function(e,t){this.selection.moveTo(e,t)},this.navigateUp=function(e){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(-e||-1,0)},this.navigateDown=function(e){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(e||1,0)},this.navigateLeft=function(e){if(this.selection.isEmpty()){e=e||1;for(;e--;)this.selection.moveCursorLeft()}else{var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateRight=function(e){if(this.selection.isEmpty()){e=e||1;for(;e--;)this.selection.moveCursorRight()}else{var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(e,t){t&&this.$search.set(t);var n=this.$search.find(this.session),r=0;return n?(this.$tryReplace(n,e)&&(r=1),this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end),r):r},this.replaceAll=function(e,t){t&&this.$search.set(t);var n=this.$search.findAll(this.session),r=0;if(!n.length)return r;var i=this.getSelectionRange();this.selection.moveTo(0,0);for(var s=n.length-1;s>=0;--s)this.$tryReplace(n[s],e)&&r++;return this.selection.setSelectionRange(i),r},this.$tryReplace=function(e,t){var n=this.session.getTextRange(e);return null!==(t=this.$search.replace(n,t))?(e.end=this.session.replace(e,t),e):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(e,t,n){t||(t={}),"string"==typeof e||e instanceof RegExp?t.needle=e:"object"==typeof e&&r.mixin(t,e);var i=this.selection.getRange();null==t.needle&&((e=this.session.getTextRange(i)||this.$search.$options.needle)||(i=this.session.getWordRange(i.start.row,i.start.column),e=this.session.getTextRange(i)),this.$search.set({needle:e})),this.$search.set(t),t.start||this.$search.set({start:i});var s=this.$search.find(this.session);if(t.preventScroll)return s;if(s)return this.revealRange(s,n),s;t.backwards?i.start=i.end:i.end=i.start,this.selection.setRange(i)},this.findNext=function(e,t){this.find({skipCurrent:!0,backwards:!1},e,t)},this.findPrevious=function(e,t){this.find(e,{skipCurrent:!0,backwards:!0},t)},this.revealRange=function(e,t){this.session.unfold(e),this.selection.setSelectionRange(e);var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5),!1!==t&&this.renderer.animateScrolling(n)},this.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy()},this.setAutoScrollEditorIntoView=function(e){if(e){var t,n=this,r=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var i=this.$scrollAnchor;i.style.cssText="position:absolute",this.container.insertBefore(i,this.container.firstChild);var s=this.on("changeSelection",(function(){r=!0})),o=this.renderer.on("beforeRender",(function(){r&&(t=n.renderer.container.getBoundingClientRect())})),u=this.renderer.on("afterRender",(function(){if(r&&t&&(n.isFocused()||n.searchBox&&n.searchBox.isFocused())){var e=n.renderer,s=e.$cursorLayer.$pixelPos,o=e.layerConfig,u=s.top-o.offset;null!=(r=s.top>=0&&u+t.top<0||!(s.top<o.height&&s.top+t.top+o.lineHeight>window.innerHeight)&&null)&&(i.style.top=u+"px",i.style.left=s.left+"px",i.style.height=o.lineHeight+"px",i.scrollIntoView(r)),r=t=null}}));this.setAutoScrollEditorIntoView=function(e){e||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",s),this.renderer.off("afterRender",u),this.renderer.off("beforeRender",o))}}},this.$resetCursorStyle=function(){var e=this.$cursorStyle||"ace",t=this.renderer.$cursorLayer;t&&(t.setSmoothBlinking(/smooth/.test(e)),t.isBlinking=!this.$readOnly&&"wide"!=e,i.setCssClass(t.element,"ace_slim-cursors",/slim/.test(e)))},this.prompt=function(e,t,n){var r=this;g.loadModule("./ext/prompt",(function(i){i.prompt(r,e,t,n)}))}}.call(w.prototype),g.defineOptions(w.prototype,"editor",{selectionStyle:{set:function(e){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:e})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(e){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(e){this.textInput.setReadOnly(e),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(e){this.textInput.setCopyWithEmptySelection(e)},initialValue:!1},cursorStyle:{set:function(e){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},autoScrollEditorIntoView:{set:function(e){this.setAutoScrollEditorIntoView(e)}},keyboardHandler:{set:function(e){this.setKeyboardHandler(e)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(e){this.session.setValue(e)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(e){this.setSession(e)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(e){this.renderer.$gutterLayer.setShowLineNumbers(e),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),e&&this.$relativeLineNumbers?E.attach(this):E.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(e){this.$showLineNumbers&&e?E.attach(this):E.detach(this)}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var E={getText:function(e,t){return(Math.abs(e.selection.lead.row-t)||t+1+(t<9?"Â·":""))+""},getWidth:function(e,t,n){return Math.max(t.toString().length,(n.lastRow+1).toString().length,2)*n.characterWidth},update:function(e,t){t.renderer.$loop.schedule(t.renderer.CHANGE_GUTTER)},attach:function(e){e.renderer.$gutterLayer.$renderer=this,e.on("changeSelection",this.update),this.update(null,e)},detach:function(e){e.renderer.$gutterLayer.$renderer==this&&(e.renderer.$gutterLayer.$renderer=null),e.off("changeSelection",this.update),this.update(null,e)}};t.Editor=w})),ace.define("ace/undomanager",["require","exports","module","ace/range"],(function(e,t,n){"use strict";function f(e){return{row:e.row,column:e.column}}function c(e){e=e||this;if(Array.isArray(e))return e.map(c).join("\n");var t="";e.action?(t="insert"==e.action?"+":"-",t+="["+e.lines+"]"):e.value&&(t=Array.isArray(e.value)?e.value.map(h).join("\n"):h(e.value)),e.start&&(t+=h(e));(e.id||e.rev)&&(t+="\t("+(e.id||e.rev)+")");return t}function h(e){return e.start.row+":"+e.start.column+"=>"+e.end.row+":"+e.end.column}function p(e,t){var n="insert"==e.action,r="insert"==t.action;if(n&&r)if(o(t.start,e.end)>=0)m(t,e,-1);else{if(!(o(t.start,e.start)<=0))return null;m(e,t,1)}else if(n&&!r)if(o(t.start,e.end)>=0)m(t,e,-1);else{if(!(o(t.end,e.start)<=0))return null;m(e,t,-1)}else if(!n&&r)if(o(t.start,e.start)>=0)m(t,e,1);else{if(!(o(t.start,e.start)<=0))return null;m(e,t,1)}else if(!n&&!r)if(o(t.start,e.start)>=0)m(t,e,1);else{if(!(o(t.end,e.start)<=0))return null;m(e,t,-1)}return[t,e]}function d(e,t){for(var n=e.length;n--;)for(var r=0;r<t.length;r++)if(!p(e[n],t[r])){for(;n<e.length;){for(;r--;)p(t[r],e[n]);r=t.length,n++}return[e,t]}return e.selectionBefore=t.selectionBefore=e.selectionAfter=t.selectionAfter=null,[t,e]}function v(e,t){var n="insert"==e.action,r="insert"==t.action;if(n&&r)o(e.start,t.start)<0?m(t,e,1):m(e,t,1);else if(n&&!r)o(e.start,t.end)>=0?m(e,t,-1):o(e.start,t.start)<=0?m(t,e,1):(m(e,s.fromPoints(t.start,e.start),-1),m(t,e,1));else if(!n&&r)o(t.start,e.end)>=0?m(t,e,-1):o(t.start,e.start)<=0?m(e,t,1):(m(t,s.fromPoints(e.start,t.start),-1),m(e,t,1));else if(!n&&!r)if(o(t.start,e.end)>=0)m(t,e,-1);else{if(!(o(t.end,e.start)<=0)){var i,u;return o(e.start,t.start)<0&&(i=e,e=y(e,t.start)),o(e.end,t.end)>0&&(u=y(e,t.end)),g(t.end,e.start,e.end,-1),u&&!i&&(e.lines=u.lines,e.start=u.start,e.end=u.end,u=e),[t,i,u].filter(Boolean)}m(e,t,-1)}return[t,e]}function m(e,t,n){g(e.start,t.start,t.end,n),g(e.end,t.start,t.end,n)}function g(e,t,n,r){e.row==(1==r?t:n).row&&(e.column+=r*(n.column-t.column)),e.row+=r*(n.row-t.row)}function y(e,t){var n=e.lines,r=e.end;e.end=f(t);var i=e.end.row-e.start.row,s=n.splice(i,n.length),o=i?t.column:t.column-e.start.column;n.push(s[0].substring(0,o)),s[0]=s[0].substr(o);return{start:f(t),end:r,lines:s,action:e.action}}function b(e,t){t=function(e){return{start:f(e.start),end:f(e.end),action:e.action,lines:e.lines.slice()}}(t);for(var n=e.length;n--;){for(var r=e[n],i=0;i<r.length;i++){var o=v(r[i],t);t=o[0],2!=o.length&&(o[2]?(r.splice(i+1,1,o[1],o[2]),i++):o[1]||(r.splice(i,1),i--))}r.length||e.splice(n,1)}return e}var r=function(){this.$maxRev=0,this.$fromUndo=!1,this.reset()};(function(){this.addSession=function(e){this.$session=e},this.add=function(e,t,n){if(!this.$fromUndo&&e!=this.$lastDelta){!1!==t&&this.lastDeltas||(this.lastDeltas=[],this.$undoStack.push(this.lastDeltas),e.id=this.$rev=++this.$maxRev);"remove"!=e.action&&"insert"!=e.action||(this.$lastDelta=e);this.lastDeltas.push(e)}},this.addSelection=function(e,t){this.selections.push({value:e,rev:t||this.$rev})},this.startNewGroup=function(){return this.lastDeltas=null,this.$rev},this.markIgnored=function(e,t){null==t&&(t=this.$rev+1);for(var n=this.$undoStack,r=n.length;r--;){var i=n[r][0];if(i.id<=e)break;i.id<t&&(i.ignore=!0)}this.lastDeltas=null},this.getSelection=function(e,t){for(var n=this.selections,r=n.length;r--;){var i=n[r];if(i.rev<e)return t&&(i=n[r+1]),i}},this.getRevision=function(){return this.$rev},this.getDeltas=function(e,t){null==t&&(t=this.$rev+1);for(var n=this.$undoStack,r=null,i=0,s=n.length;s--;){var o=n[s][0];o.id<t&&!r&&(r=s+1);if(o.id<=e){i=s+1;break}}return n.slice(i,r)},this.getChangedRanges=function(e,t){null==t&&(t=this.$rev+1)},this.getChangedLines=function(e,t){null==t&&(t=this.$rev+1)},this.undo=function(e,t){this.lastDeltas=null;var n=this.$undoStack;if(function(e,t){for(var n=t;n--;){var r=e[n];if(r&&!r[0].ignore){for(;n<t-1;){var i=d(e[n],e[n+1]);e[n]=i[0],e[n+1]=i[1],n++}return!0}}}(n,n.length)){e||(e=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var r=n.pop(),s=null;return r&&r.length&&(s=e.undoChanges(r,t),this.$redoStack.push(r),this.$syncRev()),this.$fromUndo=!1,s}},this.redo=function(e,t){this.lastDeltas=null,e||(e=this.$session),this.$fromUndo=!0;if(this.$redoStackBaseRev!=this.$rev){var n=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);(function(e,t){for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)b(e,r[i])})(this.$redoStack,n),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach((function(e){e[0].id=++this.$maxRev}),this)}var r=this.$redoStack.pop(),i=null;return r&&(i=e.redoChanges(r,t),this.$undoStack.push(r),this.$syncRev()),this.$fromUndo=!1,i},this.$syncRev=function(){var e=this.$undoStack,t=e[e.length-1],n=t&&t[0].id||0;this.$redoStackBaseRev=n,this.$rev=n},this.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},this.canUndo=function(){return this.$undoStack.length>0},this.canRedo=function(){return this.$redoStack.length>0},this.bookmark=function(e){null==e&&(e=this.$rev),this.mark=e},this.isAtBookmark=function(){return this.$rev===this.mark},this.toJSON=function(){},this.fromJSON=function(){},this.hasUndo=this.canUndo,this.hasRedo=this.canRedo,this.isClean=this.isAtBookmark,this.markClean=this.bookmark,this.$prettyPrint=function(e){return e?c(e):c(this.$undoStack)+"\n---\n"+c(this.$redoStack)}}).call(r.prototype);var s=e("./range").Range,o=s.comparePoints;s.comparePoints;t.UndoManager=r})),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],(function(e,t,n){"use strict";var r=e("../lib/dom"),i=function(e,t){this.element=e,this.canvasHeight=t||5e5,this.element.style.height=2*this.canvasHeight+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0};(function(){this.moveContainer=function(e){r.translate(this.element,0,-e.firstRowScreen*e.lineHeight%this.canvasHeight-e.offset*this.$offsetCoefficient)},this.pageChanged=function(e,t){return Math.floor(e.firstRowScreen*e.lineHeight/this.canvasHeight)!==Math.floor(t.firstRowScreen*t.lineHeight/this.canvasHeight)},this.computeLineTop=function(e,t,n){var r=t.firstRowScreen*t.lineHeight,i=Math.floor(r/this.canvasHeight);return n.documentToScreenRow(e,0)*t.lineHeight-i*this.canvasHeight},this.computeLineHeight=function(e,t,n){return t.lineHeight*n.getRowLength(e)},this.getLength=function(){return this.cells.length},this.get=function(e){return this.cells[e]},this.shift=function(){this.$cacheCell(this.cells.shift())},this.pop=function(){this.$cacheCell(this.cells.pop())},this.push=function(e){if(Array.isArray(e)){this.cells.push.apply(this.cells,e);for(var t=r.createFragment(this.element),n=0;n<e.length;n++)t.appendChild(e[n].element);this.element.appendChild(t)}else this.cells.push(e),this.element.appendChild(e.element)},this.unshift=function(e){if(Array.isArray(e)){this.cells.unshift.apply(this.cells,e);for(var t=r.createFragment(this.element),n=0;n<e.length;n++)t.appendChild(e[n].element);this.element.firstChild?this.element.insertBefore(t,this.element.firstChild):this.element.appendChild(t)}else this.cells.unshift(e),this.element.insertAdjacentElement("afterbegin",e.element)},this.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},this.$cacheCell=function(e){e&&(e.element.remove(),this.cellCache.push(e))},this.createCell=function(e,t,n,i){var s=this.cellCache.pop();if(!s){var o=r.createElement("div");i&&i(o),this.element.appendChild(o),s={element:o,text:"",row:e}}return s.row=e,s}}).call(i.prototype),t.Lines=i})),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines"],(function(e,t,n){"use strict";function f(e){var t=document.createTextNode("");e.appendChild(t);var n=r.createElement("span");return e.appendChild(n),e}var r=e("../lib/dom"),i=e("../lib/oop"),s=e("../lib/lang"),o=e("../lib/event_emitter").EventEmitter,u=e("./lines").Lines,a=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new u(this.element),this.$lines.$offsetCoefficient=1};(function(){i.implement(this,o),this.setSession=function(e){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),this.session=e,e&&e.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,t)},this.setAnnotations=function(e){this.$annotations=[];for(var t=0;t<e.length;t++){var n=e[t],r=n.row,i=this.$annotations[r];i||(i=this.$annotations[r]={text:[]});var o=n.text;o=o?s.escapeHTML(o):n.html||"",-1===i.text.indexOf(o)&&i.text.push(o);var u=n.type;"error"==u?i.className=" ace_error":"warning"==u&&" ace_error"!=i.className?i.className=" ace_warning":"info"==u&&!i.className&&(i.className=" ace_info")}},this.$updateAnnotations=function(e){if(this.$annotations.length){var t=e.start.row,n=e.end.row-t;if(0!==n)if("remove"==e.action)this.$annotations.splice(t,n+1,null);else{var r=new Array(n+1);r.unshift(t,1),this.$annotations.splice.apply(this.$annotations,r)}}},this.update=function(e){this.config=e;var t=this.session,n=e.firstRow,r=Math.min(e.lastRow+e.gutterOffset,t.getLength()-1);this.oldLastRow=r,this.config=e,this.$lines.moveContainer(e),this.$updateCursorRow();for(var i=t.getNextFoldLine(n),s=i?i.start.row:1/0,o=null,u=-1,a=n;;){a>s&&(a=i.end.row+1,s=(i=t.getNextFoldLine(a,i))?i.start.row:1/0);if(a>r){for(;this.$lines.getLength()>u+1;)this.$lines.pop();break}(o=this.$lines.get(++u))?o.row=a:(o=this.$lines.createCell(a,e,this.session,f),this.$lines.push(o)),this.$renderCell(o,e,i,a),a++}this._signal("afterRender"),this.$updateGutterWidth(e)},this.$updateGutterWidth=function(e){var t=this.session,n=t.gutterRenderer||this.$renderer,r=t.$firstLineNumber,i=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||t.$useWrapMode)&&(i=t.getLength()+r-1);var s=n?n.getWidth(t,i,e):i.toString().length*e.characterWidth,o=this.$padding||this.$computePadding();(s+=o.left+o.right)!==this.gutterWidth&&!isNaN(s)&&(this.gutterWidth=s,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",s))},this.$updateCursorRow=function(){if(this.$highlightGutterLine){var e=this.session.selection.getCursor();this.$cursorRow!==e.row&&(this.$cursorRow=e.row)}},this.updateLineHighlight=function(){if(this.$highlightGutterLine){var e=this.session.selection.cursor.row;this.$cursorRow=e;if(!this.$cursorCell||this.$cursorCell.row!=e){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var t=this.$lines.cells;this.$cursorCell=null;for(var n=0;n<t.length;n++){var r=t[n];if(r.row>=this.$cursorRow){if(r.row>this.$cursorRow){var i=this.session.getFoldLine(this.$cursorRow);if(!(n>0&&i&&i.start.row==t[n-1].row))break;r=t[n-1]}r.element.className="ace_gutter-active-line "+r.element.className,this.$cursorCell=r;break}}}}},this.scrollLines=function(e){var t=this.config;this.config=e,this.$updateCursorRow();if(this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var n=Math.min(e.lastRow+e.gutterOffset,this.session.getLength()-1),r=this.oldLastRow;this.oldLastRow=n;if(!t||r<e.firstRow)return this.update(e);if(n<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var i=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);i>0;i--)this.$lines.shift();if(r>n)for(i=this.session.getFoldedRowCount(n+1,r);i>0;i--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLines(e,e.firstRow,t.firstRow-1)),n>r&&this.$lines.push(this.$renderLines(e,r+1,n)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(e)},this.$renderLines=function(e,t,n){for(var r=[],i=t,s=this.session.getNextFoldLine(i),o=s?s.start.row:1/0;;){i>o&&(i=s.end.row+1,o=(s=this.session.getNextFoldLine(i,s))?s.start.row:1/0);if(i>n)break;var u=this.$lines.createCell(i,e,this.session,f);this.$renderCell(u,e,s,i),r.push(u),i++}return r},this.$renderCell=function(e,t,n,i){var s=e.element,o=this.session,u=s.childNodes[0],a=s.childNodes[1],f=o.$firstLineNumber,l=o.$breakpoints,c=o.$decorations,h=o.gutterRenderer||this.$renderer,p=this.$showFoldWidgets&&o.foldWidgets,d=n?n.start.row:Number.MAX_VALUE,v="ace_gutter-cell ";this.$highlightGutterLine&&(i==this.$cursorRow||n&&i<this.$cursorRow&&i>=d&&this.$cursorRow<=n.end.row)&&(v+="ace_gutter-active-line ",this.$cursorCell!=e&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=e)),l[i]&&(v+=l[i]),c[i]&&(v+=c[i]),this.$annotations[i]&&(v+=this.$annotations[i].className),s.className!=v&&(s.className=v);if(p){var m=p[i];null==m&&(m=p[i]=o.getFoldWidget(i))}if(m){v="ace_fold-widget ace_"+m;"start"==m&&i==d&&i<n.end.row?v+=" ace_closed":v+=" ace_open",a.className!=v&&(a.className=v);var g=t.lineHeight+"px";r.setStyle(a.style,"height",g),r.setStyle(a.style,"display","inline-block")}else a&&r.setStyle(a.style,"display","none");var y=(h?h.getText(o,i):i+f).toString();return y!==u.data&&(u.data=y),r.setStyle(e.element.style,"height",this.$lines.computeLineHeight(i,t,o)+"px"),r.setStyle(e.element.style,"top",this.$lines.computeLineTop(i,t,o)+"px"),e.text=y,e},this.$fixedWidth=!1,this.$highlightGutterLine=!0,this.$renderer="",this.setHighlightGutterLine=function(e){this.$highlightGutterLine=e},this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(e){this.$renderer=!e&&{getWidth:function(){return 0},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(e){e?r.addCssClass(this.element,"ace_folding-enabled"):r.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=r.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(e.borderLeftWidth)||0)+(parseInt(e.paddingLeft)||0)+1,this.$padding.right=(parseInt(e.borderRightWidth)||0)+(parseInt(e.paddingRight)||0),this.$padding},this.getRegion=function(e){var t=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();return e.x<t.left+n.left?"markers":this.$showFoldWidgets&&e.x>n.right-t.right?"foldWidgets":void 0}}).call(a.prototype),t.Gutter=a})),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],(function(e,t,n){"use strict";var r=e("../range").Range,i=e("../lib/dom"),s=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_marker-layer",e.appendChild(this.element)};(function(){function e(e,t,n,r){return(e?1:0)|(t?2:0)|(n?4:0)|(r?8:0)}this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setMarkers=function(e){this.markers=e},this.elt=function(e,t){var n=-1!=this.i&&this.element.childNodes[this.i];n?this.i++:(n=document.createElement("div"),this.element.appendChild(n),this.i=-1),n.style.cssText=t,n.className=e},this.update=function(e){if(e){this.config=e,this.i=0;var t;for(var n in this.markers){var r=this.markers[n];if(r.range){var i=r.range.clipRows(e.firstRow,e.lastRow);if(!i.isEmpty()){i=i.toScreenRange(this.session);if(r.renderer){var s=this.$getTop(i.start.row,e),o=this.$padding+i.start.column*e.characterWidth;r.renderer(t,i,o,s,e)}else"fullLine"==r.type?this.drawFullLineMarker(t,i,r.clazz,e):"screenLine"==r.type?this.drawScreenLineMarker(t,i,r.clazz,e):i.isMultiLine()?"text"==r.type?this.drawTextMarker(t,i,r.clazz,e):this.drawMultiLineMarker(t,i,r.clazz,e):this.drawSingleLineMarker(t,i,r.clazz+" ace_start ace_br15",e)}}else r.update(t,this,this.session,e)}if(-1!=this.i)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},this.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight},this.drawTextMarker=function(t,n,i,s,o){for(var u=this.session,a=n.start.row,f=n.end.row,l=a,c=0,h=0,p=u.getScreenLastRowColumn(l),d=new r(l,n.start.column,l,h);l<=f;l++)d.start.row=d.end.row=l,d.start.column=l==a?n.start.column:u.getRowWrapIndent(l),d.end.column=p,c=h,h=p,p=l+1<f?u.getScreenLastRowColumn(l+1):l==f?0:n.end.column,this.drawSingleLineMarker(t,d,i+(l==a?" ace_start":"")+" ace_br"+e(l==a||l==a+1&&n.start.column,c<h,h>p,l==f),s,l==f?0:1,o)},this.drawMultiLineMarker=function(e,t,n,r,i){var s=this.$padding,o=r.lineHeight,u=this.$getTop(t.start.row,r),a=s+t.start.column*r.characterWidth;i=i||"";if(this.session.$bidiHandler.isBidiRow(t.start.row)){(f=t.clone()).end.row=f.start.row,f.end.column=this.session.getLine(f.start.row).length,this.drawBidiSingleLineMarker(e,f,n+" ace_br1 ace_start",r,null,i)}else this.elt(n+" ace_br1 ace_start","height:"+o+"px;right:0;top:"+u+"px;left:"+a+"px;"+(i||""));if(this.session.$bidiHandler.isBidiRow(t.end.row)){var f;(f=t.clone()).start.row=f.end.row,f.start.column=0,this.drawBidiSingleLineMarker(e,f,n+" ace_br12",r,null,i)}else{u=this.$getTop(t.end.row,r);var l=t.end.column*r.characterWidth;this.elt(n+" ace_br12","height:"+o+"px;width:"+l+"px;top:"+u+"px;left:"+s+"px;"+(i||""))}if(!((o=(t.end.row-t.start.row-1)*r.lineHeight)<=0)){u=this.$getTop(t.start.row+1,r);var c=(t.start.column?1:0)|(t.end.column?0:8);this.elt(n+(c?" ace_br"+c:""),"height:"+o+"px;right:0;top:"+u+"px;left:"+s+"px;"+(i||""))}},this.drawSingleLineMarker=function(e,t,n,r,i,s){if(this.session.$bidiHandler.isBidiRow(t.start.row))return this.drawBidiSingleLineMarker(e,t,n,r,i,s);var o=r.lineHeight,u=(t.end.column+(i||0)-t.start.column)*r.characterWidth,a=this.$getTop(t.start.row,r),f=this.$padding+t.start.column*r.characterWidth;this.elt(n,"height:"+o+"px;width:"+u+"px;top:"+a+"px;left:"+f+"px;"+(s||""))},this.drawBidiSingleLineMarker=function(e,t,n,r,i,s){var o=r.lineHeight,u=this.$getTop(t.start.row,r),a=this.$padding;this.session.$bidiHandler.getSelections(t.start.column,t.end.column).forEach((function(e){this.elt(n,"height:"+o+"px;width:"+e.width+(i||0)+"px;top:"+u+"px;left:"+(a+e.left)+"px;"+(s||""))}),this)},this.drawFullLineMarker=function(e,t,n,r,i){var s=this.$getTop(t.start.row,r),o=r.lineHeight;t.start.row!=t.end.row&&(o+=this.$getTop(t.end.row,r)-s),this.elt(n,"height:"+o+"px;top:"+s+"px;left:0;right:0;"+(i||""))},this.drawScreenLineMarker=function(e,t,n,r,i){var s=this.$getTop(t.start.row,r),o=r.lineHeight;this.elt(n,"height:"+o+"px;top:"+s+"px;left:0;right:0;"+(i||""))}}).call(s.prototype),t.Marker=s})),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter"],(function(e,t,n){"use strict";var r=e("../lib/oop"),i=e("../lib/dom"),s=e("../lib/lang"),o=e("./lines").Lines,u=e("../lib/event_emitter").EventEmitter,a=function(e){this.dom=i,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new o(this.element)};(function(){r.implement(this,u),this.EOF_CHAR="Â¶",this.EOL_CHAR_LF="Â¬",this.EOL_CHAR_CRLF="Â¤",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="â€”",this.SPACE_CHAR="Â·",this.$padding=0,this.MAX_LINE_LENGTH=1e4,this.$updateEolChar=function(){var e=this.session.doc,n="\n"==e.getNewLineCharacter()&&"windows"!=e.getNewLineMode()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=n)return this.EOL_CHAR=n,!0},this.setPadding=function(e){this.$padding=e,this.element.style.margin="0 "+e+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(e){this.$fontMetrics=e,this.$fontMetrics.on("changeCharacterSize",function(e){this._signal("changeCharacterSize",e)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(e){this.session=e,e&&this.$computeTabString()},this.showInvisibles=!1,this.setShowInvisibles=function(e){return this.showInvisibles!=e&&(this.showInvisibles=e,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(e){return this.displayIndentGuides!=e&&(this.displayIndentGuides=e,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var e=this.session.getTabSize();this.tabSize=e;for(var t=this.$tabStrings=[0],n=1;n<e+1;n++)if(this.showInvisibles){(r=this.dom.createElement("span")).className="ace_invisible ace_invisible_tab",r.textContent=s.stringRepeat(this.TAB_CHAR,n),t.push(r)}else t.push(this.dom.createTextNode(s.stringRepeat(" ",n),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var r,i="ace_indent-guide",o="",u="";if(this.showInvisibles){i+=" ace_invisible",o=" ace_invisible_space",u=" ace_invisible_tab";var a=s.stringRepeat(this.SPACE_CHAR,this.tabSize),f=s.stringRepeat(this.TAB_CHAR,this.tabSize)}else f=a=s.stringRepeat(" ",this.tabSize);(r=this.dom.createElement("span")).className=i+o,r.textContent=a,this.$tabStrings[" "]=r;(r=this.dom.createElement("span")).className=i+u,r.textContent=f,this.$tabStrings["\t"]=r}},this.updateLines=function(e,t,n){if(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow)return this.update(e);this.config=e;for(var r=Math.max(t,e.firstRow),i=Math.min(n,e.lastRow),s=this.element.childNodes,o=0,u=e.firstRow;u<r;u++){if(a=this.session.getFoldLine(u)){if(a.containsRow(r)){r=a.start.row;break}u=a.end.row}o++}for(var a,f=!1,l=(u=r,(a=this.session.getNextFoldLine(u))?a.start.row:1/0);;){u>l&&(u=a.end.row+1,l=(a=this.session.getNextFoldLine(u,a))?a.start.row:1/0);if(u>i)break;var c=s[o++];if(c){this.dom.removeChildren(c),this.$renderLine(c,u,u==l&&a);var h=e.lineHeight*this.session.getRowLength(u)+"px";c.style.height!=h&&(f=!0,c.style.height=h)}u++}if(f)for(;o<this.$lines.cells.length;){var p=this.$lines.cells[o++];p.element.style.top=this.$lines.computeLineTop(p.row,e,this.session)+"px"}},this.scrollLines=function(e){var t=this.config;this.config=e;if(this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var n=e.lastRow,r=t?t.lastRow:-1;if(!t||r<e.firstRow)return this.update(e);if(n<t.firstRow)return this.update(e);if(!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var i=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);i>0;i--)this.$lines.shift();if(t.lastRow>e.lastRow)for(i=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);i>0;i--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLinesFragment(e,e.firstRow,t.firstRow-1)),e.lastRow>t.lastRow&&this.$lines.push(this.$renderLinesFragment(e,t.lastRow+1,e.lastRow))},this.$renderLinesFragment=function(e,t,n){for(var r=[],s=t,o=this.session.getNextFoldLine(s),u=o?o.start.row:1/0;;){s>u&&(s=o.end.row+1,u=(o=this.session.getNextFoldLine(s,o))?o.start.row:1/0);if(s>n)break;var a=this.$lines.createCell(s,e,this.session),f=a.element;this.dom.removeChildren(f),i.setStyle(f.style,"height",this.$lines.computeLineHeight(s,e,this.session)+"px"),i.setStyle(f.style,"top",this.$lines.computeLineTop(s,e,this.session)+"px"),this.$renderLine(f,s,s==u&&o),this.$useLineGroups()?f.className="ace_line_group":f.className="ace_line",r.push(a),s++}return r},this.update=function(e){this.$lines.moveContainer(e),this.config=e;for(var t=e.firstRow,n=e.lastRow,r=this.$lines;r.getLength();)r.pop();r.push(this.$renderLinesFragment(e,t,n))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(e,t,n,r){for(var a,i=this,o=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,u=this.dom.createFragment(this.element),f=0;a=o.exec(r);){var l=a[1],c=a[2],h=a[3],p=a[4],d=a[5];if(i.showInvisibles||!c){var v=f!=a.index?r.slice(f,a.index):"";f=a.index+a[0].length,v&&u.appendChild(this.dom.createTextNode(v,this.element));if(l){var m=i.session.getScreenTabSize(t+a.index);u.appendChild(i.$tabStrings[m].cloneNode(!0)),t+=m-1}else if(c)if(i.showInvisibles){(g=this.dom.createElement("span")).className="ace_invisible ace_invisible_space",g.textContent=s.stringRepeat(i.SPACE_CHAR,c.length),u.appendChild(g)}else u.appendChild(this.com.createTextNode(c,this.element));else if(h){(g=this.dom.createElement("span")).className="ace_invisible ace_invisible_space ace_invalid",g.textContent=s.stringRepeat(i.SPACE_CHAR,h.length),u.appendChild(g)}else if(p){i.showInvisibles&&i.SPACE_CHAR;t+=1;(g=this.dom.createElement("span")).style.width=2*i.config.characterWidth+"px",g.className=i.showInvisibles?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",g.textContent=i.showInvisibles?i.SPACE_CHAR:"",u.appendChild(g)}else if(d){t+=1;(g=this.dom.createElement("span")).style.width=2*i.config.characterWidth+"px",g.className="ace_cjk",g.textContent=d,u.appendChild(g)}}}u.appendChild(this.dom.createTextNode(f?r.slice(f):r,this.element));if(this.$textToken[n.type])e.appendChild(u);else{var b="ace_"+n.type.replace(/\./g," ace_"),g=this.dom.createElement("span");"fold"==n.type&&(g.style.width=n.value.length*this.config.characterWidth+"px"),g.className=b,g.appendChild(u),e.appendChild(g)}return t+r.length},this.renderIndentGuide=function(e,t,n){var r=t.search(this.$indentGuideRe);if(r<=0||r>=n)return t;if(" "==t[0]){for(var i=(r-=r%this.tabSize)/this.tabSize,s=0;s<i;s++)e.appendChild(this.$tabStrings[" "].cloneNode(!0));return t.substr(r)}if("\t"==t[0]){for(s=0;s<r;s++)e.appendChild(this.$tabStrings["\t"].cloneNode(!0));return t.substr(r)}return t},this.$createLineElement=function(e){var t=this.dom.createElement("div");return t.className="ace_line",t.style.height=this.config.lineHeight+"px",t},this.$renderWrappedLine=function(e,t,n){var r=0,i=0,o=n[0],u=0,a=this.$createLineElement();e.appendChild(a);for(var f=0;f<t.length;f++){var l=t[f],c=l.value;if(0==f&&this.displayIndentGuides){r=c.length;if(!(c=this.renderIndentGuide(a,c,o)))continue;r-=c.length}if(r+c.length<o)u=this.$renderToken(a,u,l,c),r+=c.length;else{for(;r+c.length>=o;)u=this.$renderToken(a,u,l,c.substring(0,o-r)),c=c.substring(o-r),r=o,a=this.$createLineElement(),e.appendChild(a),a.appendChild(this.dom.createTextNode(s.stringRepeat("Â ",n.indent),this.element)),u=0,o=n[++i]||Number.MAX_VALUE;0!=c.length&&(r+=c.length,u=this.$renderToken(a,u,l,c))}}n[n.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(a,u,null,"",!0)},this.$renderSimpleLine=function(e,t){var n=0,r=t[0],i=r.value;this.displayIndentGuides&&(i=this.renderIndentGuide(e,i)),i&&(n=this.$renderToken(e,n,r,i));for(var s=1;s<t.length;s++){if(n+(i=(r=t[s]).value).length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(e,n,r,i);n=this.$renderToken(e,n,r,i)}},this.$renderOverflowMessage=function(e,t,n,r,i){n&&this.$renderToken(e,t,n,r.slice(0,this.MAX_LINE_LENGTH-t));var s=this.dom.createElement("span");s.className="ace_inline_button ace_keyword ace_toggle_wrap",s.textContent=i?"<hide>":"<click to see more...>",e.appendChild(s)},this.$renderLine=function(e,t,n){!n&&0!=n&&(n=this.session.getFoldLine(t));if(n)var r=this.$getFoldLineTokens(t,n);else r=this.session.getTokens(t);var i=e;if(r.length){var s=this.session.getRowSplitData(t);if(s&&s.length){this.$renderWrappedLine(e,r,s);i=e.lastChild}else{i=e;this.$useLineGroups()&&(i=this.$createLineElement(),e.appendChild(i)),this.$renderSimpleLine(i,r)}}else this.$useLineGroups()&&(i=this.$createLineElement(),e.appendChild(i));if(this.showInvisibles&&i){n&&(t=n.end.row);var o=this.dom.createElement("span");o.className="ace_invisible ace_invisible_eol",o.textContent=t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,i.appendChild(o)}},this.$getFoldLineTokens=function(e,t){var n=this.session,r=[],s=n.getTokens(e);return t.walk((function(e,t,o,u,a){null!=e?r.push({type:"fold",value:e}):(a&&(s=n.getTokens(t)),s.length&&function(e,t,n){for(var i=0,s=0;s+e[i].value.length<t;){s+=e[i].value.length;if(++i==e.length)return}if(s!=t){(o=e[i].value.substring(t-s)).length>n-t&&(o=o.substring(0,n-t)),r.push({type:e[i].type,value:o}),s=t+o.length,i+=1}for(;s<n&&i<e.length;){var o;(o=e[i].value).length+s>n?r.push({type:e[i].type,value:o.substring(0,n-s)}):r.push(e[i]),s+=o.length,i+=1}}(s,u,o))}),t.end.row,this.session.getLine(t.end.row).length),r},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){}}).call(a.prototype),t.Text=a})),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],(function(e,t,n){"use strict";var r=e("../lib/dom"),i=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_cursor-layer",e.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),r.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)};(function(){this.$updateOpacity=function(e){for(var t=this.cursors,n=t.length;n--;)r.setStyle(t[n].style,"opacity",e?"":"0")},this.$startCssAnimation=function(){for(var e=this.cursors,t=e.length;t--;)e[t].style.animationDuration=this.blinkInterval+"ms";setTimeout(function(){r.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},this.$stopCssAnimation=function(){r.removeCssClass(this.element,"ace_animate-blinking")},this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setBlinking=function(e){e!=this.isBlinking&&(this.isBlinking=e,this.restartTimer())},this.setBlinkInterval=function(e){e!=this.blinkInterval&&(this.blinkInterval=e,this.restartTimer())},this.setSmoothBlinking=function(e){e!=this.smoothBlinking&&(this.smoothBlinking=e,r.setCssClass(this.element,"ace_smooth-blinking",e),this.$updateCursors(!0),this.restartTimer())},this.addCursor=function(){var e=r.createElement("div");return e.className="ace_cursor",this.element.appendChild(e),this.cursors.push(e),e},this.removeCursor=function(){if(this.cursors.length>1){var e=this.cursors.pop();return e.parentNode.removeChild(e),e}},this.hideCursor=function(){this.isVisible=!1,r.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,r.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var e=this.$updateCursors;clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&r.removeCssClass(this.element,"ace_smooth-blinking"),e(!0);if(this.isBlinking&&this.blinkInterval&&this.isVisible){this.smoothBlinking&&setTimeout(function(){r.addCssClass(this.element,"ace_smooth-blinking")}.bind(this));if(r.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var t=function(){this.timeoutId=setTimeout((function(){e(!1)}),.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval((function(){e(!0),t()}),this.blinkInterval),t()}}else this.$stopCssAnimation()},this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e||(e=this.session.selection.getCursor());var n=this.session.documentToScreenPosition(e);return{left:this.$padding+(this.session.$bidiHandler.isBidiRow(n.row,e.row)?this.session.$bidiHandler.getPosLeft(n.column):n.column*this.config.characterWidth),top:(n.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight}},this.isCursorInView=function(e,t){return e.top>=0&&e.top<t.maxHeight},this.update=function(e){this.config=e;var t=this.session.$selectionMarkers,n=0,i=0;void 0!==t&&0!==t.length||(t=[{cursor:null}]);n=0;for(var s=t.length;n<s;n++){var o=this.getPixelPosition(t[n].cursor,!0);if(!((o.top>e.height+e.offset||o.top<0)&&n>1)){var u=this.cursors[i++]||this.addCursor(),a=u.style;this.drawCursor?this.drawCursor(u,o,e,t[n],this.session):this.isCursorInView(o,e)?(r.setStyle(a,"display","block"),r.translate(u,o.left,o.top),r.setStyle(a,"width",Math.round(e.characterWidth)+"px"),r.setStyle(a,"height",e.lineHeight+"px")):r.setStyle(a,"display","none")}}for(;this.cursors.length>i;)this.removeCursor();var f=this.session.getOverwrite();this.$setOverwrite(f),this.$pixelPos=o,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(e){e!=this.overwrite&&(this.overwrite=e,e?r.addCssClass(this.element,"ace_overwrite-cursors"):r.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(i.prototype),t.Cursor=i})),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],(function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./lib/event"),o=e("./lib/event_emitter").EventEmitter,u=32768,a=function(e){this.element=i.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=i.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="Â ",this.element.appendChild(this.inner),e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,s.addListener(this.element,"scroll",this.onScroll.bind(this)),s.addListener(this.element,"mousedown",s.preventDefault)};(function(){r.implement(this,o),this.setVisible=function(e){this.element.style.display=e?"":"none",this.isVisible=e,this.coeff=1}}).call(a.prototype);var f=function(e,t){a.call(this,e),this.scrollTop=0,this.scrollHeight=0,t.$scrollbarWidth=this.width=i.scrollbarWidth(e.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0};r.inherits(f,a),function(){this.classSuffix="-v",this.onScroll=function(){if(!this.skipEvent){this.scrollTop=this.element.scrollTop;if(1!=this.coeff){var e=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-e)/(this.coeff-e)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(e){this.element.style.height=e+"px"},this.setInnerHeight=this.setScrollHeight=function(e){this.scrollHeight=e,e>u?(this.coeff=u/e,e=u):1!=this.coeff&&(this.coeff=1),this.inner.style.height=e+"px"},this.setScrollTop=function(e){this.scrollTop!=e&&(this.skipEvent=!0,this.scrollTop=e,this.element.scrollTop=e*this.coeff)}}.call(f.prototype);var l=function(e,t){a.call(this,e),this.scrollLeft=0,this.height=t.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};r.inherits(l,a),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(e){this.element.style.width=e+"px"},this.setInnerWidth=function(e){this.inner.style.width=e+"px"},this.setScrollWidth=function(e){this.inner.style.width=e+"px"},this.setScrollLeft=function(e){this.scrollLeft!=e&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=e)}}.call(l.prototype),t.ScrollBar=f,t.ScrollBarV=f,t.ScrollBarH=l,t.VScrollBar=f,t.HScrollBar=l})),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],(function(e,t,n){"use strict";var r=e("./lib/event"),i=function(e,t){this.onRender=e,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=t||window;var n=this;this._flush=function(e){n.pending=!1;var t=n.changes;t&&(r.blockIdle(100),n.changes=0,n.onRender(t));if(n.changes){if(n.$recursionLimit--<0)return;n.schedule()}else n.$recursionLimit=2}};(function(){this.schedule=function(e){this.changes=this.changes|e,this.changes&&!this.pending&&(r.nextFrame(this._flush),this.pending=!0)},this.clear=function(e){var t=this.changes;return this.changes=0,t}}).call(i.prototype),t.RenderLoop=i})),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],(function(e,t,n){var r=e("../lib/oop"),i=e("../lib/dom"),s=e("../lib/lang"),o=e("../lib/event"),u=e("../lib/useragent"),a=e("../lib/event_emitter").EventEmitter,f=256,l="function"==typeof ResizeObserver,c=200,h=t.FontMetrics=function(e){this.el=i.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=i.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=i.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),e.appendChild(this.el),this.$measureNode.innerHTML=s.stringRepeat("X",f),this.$characterSize={width:0,height:0},l?this.$addObserver():this.checkForSizeChanges()};(function(){r.implement(this,a),this.$characterSize={width:0,height:0},this.$setMeasureNodeStyles=function(e,t){e.width=e.height="auto",e.left=e.top="0px",e.visibility="hidden",e.position="absolute",e.whiteSpace="pre",u.isIE<8?e["font-family"]="inherit":e.font="inherit",e.overflow=t?"hidden":"visible"},this.checkForSizeChanges=function(e){void 0===e&&(e=this.$measureSizes());if(e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)){this.$measureNode.style.fontWeight="bold";var t=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=e,this.charSizes=Object.create(null),this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height,this._emit("changeCharacterSize",{data:e})}},this.$addObserver=function(){var e=this;this.$observer=new window.ResizeObserver((function(t){var n=t[0].contentRect;e.checkForSizeChanges({height:n.height,width:n.width/f})})),this.$observer.observe(this.$measureNode)},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var e=this;return this.$pollSizeChangesTimer=o.onIdle((function t(){e.checkForSizeChanges(),o.onIdle(t,500)}),500)},this.setPolling=function(e){e?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(e){var t={height:(e||this.$measureNode).clientHeight,width:(e||this.$measureNode).clientWidth/f};return 0===t.width||0===t.height?null:t},this.$measureCharWidth=function(e){this.$main.innerHTML=s.stringRepeat(e,f);return this.$main.getBoundingClientRect().width/f},this.getCharacterWidth=function(e){var t=this.charSizes[e];return void 0===t&&(t=this.charSizes[e]=this.$measureCharWidth(e)/this.$characterSize.width),t},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},this.$getZoom=function e(t){return t?(window.getComputedStyle(t).zoom||1)*e(t.parentElement):1},this.$initTransformMeasureNodes=function(){var e=function(e,t){return["div",{style:"position: absolute;top:"+e+"px;left:"+t+"px;"}]};this.els=i.buildDom([e(0,0),e(c,0),e(0,c),e(c,c)],this.el)},this.transformCoordinates=function(e,t){function r(e,t,n){var r=e[1]*t[0]-e[0]*t[1];return[(-t[1]*n[0]+t[0]*n[1])/r,(+e[1]*n[0]-e[0]*n[1])/r]}function i(e,t){return[e[0]-t[0],e[1]-t[1]]}function s(e,t){return[e[0]+t[0],e[1]+t[1]]}function o(e,t){return[e*t[0],e*t[1]]}function u(e){var t=e.getBoundingClientRect();return[t.left,t.top]}if(e){e=o(1/this.$getZoom(this.el),e)}this.els||this.$initTransformMeasureNodes();var a=u(this.els[0]),f=u(this.els[1]),l=u(this.els[2]),h=u(this.els[3]),p=r(i(h,f),i(h,l),i(s(f,l),s(h,a))),d=o(1+p[0],i(f,a)),v=o(1+p[1],i(l,a));if(t){var m=t,g=p[0]*m[0]/c+p[1]*m[1]/c+1,y=s(o(m[0],d),o(m[1],v));return s(o(1/g/c,y),a)}var b=i(e,a),w=r(i(d,o(p[0],b)),i(v,o(p[1],b)),b);return o(c,w)}}).call(h.prototype)})),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/lib/useragent"],(function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./config"),o=e("./layer/gutter").Gutter,u=e("./layer/marker").Marker,a=e("./layer/text").Text,f=e("./layer/cursor").Cursor,l=e("./scrollbar").HScrollBar,c=e("./scrollbar").VScrollBar,h=e("./renderloop").RenderLoop,p=e("./layer/font_metrics").FontMetrics,d=e("./lib/event_emitter").EventEmitter,v='.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_editor {position: relative;overflow: hidden;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;box-sizing: border-box;min-width: 100%;contain: style size layout;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;contain: style size layout;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {position: absolute;top: 0;left: 0;right: 0;padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {contain: strict;position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;contain: strict;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: transparent;color: inherit;z-index: 1000;opacity: 1;}.ace_composition_placeholder { color: transparent }.ace_composition_marker { border-bottom: 1px solid;position: absolute;border-radius: 0;margin-top: 1px;}[ace_nocontext=true] {transform: none!important;filter: none!important;perspective: none!important;clip-path: none!important;mask : none!important;contain: none!important;perspective: none!important;mix-blend-mode: initial!important;z-index: auto;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;height: 1000000px;contain: style size layout;}.ace_text-layer {font: inherit !important;position: absolute;height: 1000000px;width: 1000000px;contain: style size layout;}.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {contain: style size layout;position: absolute;top: 0;left: 0;right: 0;}.ace_hidpi .ace_text-layer,.ace_hidpi .ace_gutter-layer,.ace_hidpi .ace_content,.ace_hidpi .ace_gutter {contain: strict;will-change: transform;}.ace_hidpi .ace_text-layer > .ace_line, .ace_hidpi .ace_text-layer > .ace_line_group {contain: strict;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {transition: opacity 0.18s;}.ace_animate-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: step-end;animation-name: blink-ace-animate;animation-iteration-count: infinite;}.ace_animate-blinking.ace_smooth-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: ease-in-out;animation-name: blink-ace-animate-smooth;}@keyframes blink-ace-animate {from, to { opacity: 1; }60% { opacity: 0; }}@keyframes blink-ace-animate-smooth {from, to { opacity: 1; }45% { opacity: 1; }60% { opacity: 0; }85% { opacity: 0; }}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;box-sizing: border-box;}.ace_line .ace_fold {box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_inline_button {border: 1px solid lightgray;display: inline-block;margin: -1px 8px;padding: 0 5px;pointer-events: auto;cursor: pointer;}.ace_inline_button:hover {border-color: gray;background: rgba(200,200,200,0.2);display: inline-block;pointer-events: auto;}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}',m=e("./lib/useragent"),g=m.isIE;i.importCssString(v,"ace_editor.css");var y=function(e,t){var n=this;this.container=e||i.createElement("div"),i.addCssClass(this.container,"ace_editor"),i.HI_DPI&&i.addCssClass(this.container,"ace_hidpi"),this.setTheme(t),this.$gutter=i.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=i.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=i.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new o(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new u(this.content);var r=this.$textLayer=new a(this.content);this.canvas=r.element,this.$markerFront=new u(this.content),this.$cursorLayer=new f(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new c(this.container,this),this.scrollBarH=new l(this.container,this),this.scrollBarV.addEventListener("scroll",(function(e){n.$scrollAnimation||n.session.setScrollTop(e.data-n.scrollMargin.top)})),this.scrollBarH.addEventListener("scroll",(function(e){n.$scrollAnimation||n.session.setScrollLeft(e.data-n.scrollMargin.left)})),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new p(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.addEventListener("changeCharacterSize",(function(e){n.updateCharacterSize(),n.onResize(!0,n.gutterWidth,n.$size.width,n.$size.height),n._signal("changeCharacterSize",e)})),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!m.isIOS,this.$loop=new h(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),s.resetOptions(this),s._signal("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,r.implement(this,d),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin()},this.setSession=function(e){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=e,e&&this.scrollMargin.top&&e.getScrollTop()<=0&&e.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(e),this.$markerBack.setSession(e),this.$markerFront.setSession(e),this.$gutterLayer.setSession(e),this.$textLayer.setSession(e);e&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(e,t,n){void 0===t&&(t=1/0),this.$changedLines?(this.$changedLines.firstRow>e&&(this.$changedLines.firstRow=e),this.$changedLines.lastRow<t&&(this.$changedLines.lastRow=t)):this.$changedLines={firstRow:e,lastRow:t};if(this.$changedLines.lastRow<this.layerConfig.firstRow){if(!n)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(e){e?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(e,t,n,r){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=e?1:0;var i=this.container;r||(r=i.clientHeight||i.scrollHeight),n||(n=i.clientWidth||i.scrollWidth);var s=this.$updateCachedSize(e,t,n,r);if(!this.$size.scrollerHeight||!n&&!r)return this.resizing=0;e&&(this.$gutterLayer.$padding=null),e?this.$renderChanges(s|this.$changes,!0):this.$loop.schedule(s|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(e,t,n,r){r-=this.$extraHeight||0;var s=0,o=this.$size,u={width:o.width,height:o.height,scrollerHeight:o.scrollerHeight,scrollerWidth:o.scrollerWidth};r&&(e||o.height!=r)&&(o.height=r,s|=this.CHANGE_SIZE,o.scrollerHeight=o.height,this.$horizScroll&&(o.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",s|=this.CHANGE_SCROLL);if(n&&(e||o.width!=n)){s|=this.CHANGE_SIZE,o.width=n,null==t&&(t=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=t,i.setStyle(this.scrollBarH.element.style,"left",t+"px"),i.setStyle(this.scroller.style,"left",t+this.margin.left+"px"),o.scrollerWidth=Math.max(0,n-t-this.scrollBarV.getWidth()-this.margin.h),i.setStyle(this.$gutter.style,"left",this.margin.left+"px");var a=this.scrollBarV.getWidth()+"px";i.setStyle(this.scrollBarH.element.style,"right",a),i.setStyle(this.scroller.style,"right",a),i.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight());(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)&&(s|=this.CHANGE_FULL)}return o.$dirty=!n||!r,s&&this._signal("resize",u),s},this.onGutterResize=function(e){var t=this.$showGutter?e:0;t!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,t,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},this.adjustWrapLimit=function(){var e=this.$size.scrollerWidth-2*this.$padding,t=Math.floor(e/this.characterWidth);return this.session.adjustWrapLimit(t,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(e){this.setOption("animatedScroll",e)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(e){this.setOption("showInvisibles",e),this.session.$bidiHandler.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(e){this.setOption("displayIndentGuides",e)},this.setShowPrintMargin=function(e){this.setOption("showPrintMargin",e)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(e){this.setOption("printMarginColumn",e)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(e){return this.setOption("showGutter",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var e=i.createElement("div");e.className="ace_layer ace_print-margin-layer",this.$printMarginEl=i.createElement("div"),this.$printMarginEl.className="ace_print-margin",e.appendChild(this.$printMarginEl),this.content.insertBefore(e,this.content.firstChild)}var t=this.$printMarginEl.style;t.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",t.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var e=this.textarea.style,t=this.$composition;if(this.$keepTextAreaAtCursor||t){var n=this.$cursorLayer.$pixelPos;if(n){t&&t.markerRange&&(n=this.$cursorLayer.getPixelPosition(t.markerRange.start,!0));var r=this.layerConfig,s=n.top,o=n.left;s-=r.offset;var u=t&&t.useTextareaForIME?this.lineHeight:g?0:1;if(s<0||s>r.height-u)i.translate(this.textarea,0,0);else{var a=1;if(t)if(t.useTextareaForIME){var f=this.textarea.value;a=this.characterWidth*this.session.$getStringScreenWidth(f)[0],u+=2}else s+=this.lineHeight+2;else s+=this.lineHeight;(o-=this.scrollLeft)>this.$size.scrollerWidth-a&&(o=this.$size.scrollerWidth-a),o+=this.gutterWidth+this.margin.left,i.setStyle(e,"height",u+"px"),i.setStyle(e,"width",a+"px"),i.translate(this.textarea,Math.min(o,this.$size.scrollerWidth-a),Math.min(s,this.$size.height-u))}}}else i.translate(this.textarea,-100,0)}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var e=this.layerConfig,t=e.lastRow;return this.session.documentToScreenRow(t,0)*e.lineHeight-this.session.getScrollTop()>e.height-e.lineHeight?t-1:t},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(e){this.$padding=e,this.$textLayer.setPadding(e),this.$cursorLayer.setPadding(e),this.$markerFront.setPadding(e),this.$markerBack.setPadding(e),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(e,t,n,r){var i=this.scrollMargin;i.top=0|e,i.bottom=0|t,i.right=0|r,i.left=0|n,i.v=i.top+i.bottom,i.h=i.left+i.right,i.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-i.top),this.updateFull()},this.setMargin=function(e,t,n,r){var i=this.margin;i.top=0|e,i.bottom=0|t,i.right=0|r,i.left=0|n,i.v=i.top+i.bottom,i.h=i.left+i.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(e){this.setOption("hScrollBarAlwaysVisible",e)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(e){this.setOption("vScrollBarAlwaysVisible",e)},this.$updateScrollBarV=function(){var e=this.layerConfig.maxHeight,t=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(e-=(t-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>e-t&&(e=this.scrollTop+t,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(e+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(e,t){this.$changes&&(e|=this.$changes,this.$changes=0);if(this.session&&this.container.offsetWidth&&!this.$frozen&&(e||t)){if(this.$size.$dirty)return this.$changes|=e,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender"),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var n=this.layerConfig;if(e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL||e&this.CHANGE_H_SCROLL){e|=this.$computeLayerConfig()|this.$loop.clear();if(n.firstRow!=this.layerConfig.firstRow&&n.firstRowScreen==this.layerConfig.firstRowScreen){var r=this.scrollTop+(n.firstRow-this.layerConfig.firstRow)*this.lineHeight;r>0&&(this.scrollTop=r,e|=this.CHANGE_SCROLL,e|=this.$computeLayerConfig()|this.$loop.clear())}n=this.layerConfig,this.$updateScrollBarV(),e&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),i.translate(this.content,-this.scrollLeft,-n.offset);var s=n.width+2*this.$padding+"px",o=n.minHeight+"px";i.setStyle(this.content.style,"width",s),i.setStyle(this.content.style,"height",o)}e&this.CHANGE_H_SCROLL&&(i.translate(this.content,-this.scrollLeft,-n.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left");e&this.CHANGE_FULL?(this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),this._signal("afterRender")):e&this.CHANGE_SCROLL?(e&this.CHANGE_TEXT||e&this.CHANGE_LINES?this.$textLayer.update(n):this.$textLayer.scrollLines(n),this.$showGutter&&(e&this.CHANGE_GUTTER||e&this.CHANGE_LINES?this.$gutterLayer.update(n):this.$gutterLayer.scrollLines(n)),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),this._signal("afterRender")):(e&this.CHANGE_TEXT?(this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n)):e&this.CHANGE_LINES?(this.$updateLines()||e&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(n):e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER?this.$showGutter&&this.$gutterLayer.update(n):e&this.CHANGE_CURSOR&&this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(n),e&this.CHANGE_CURSOR&&(this.$cursorLayer.update(n),this.$moveTextAreaToCursor()),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(n),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(n),this._signal("afterRender"))}else this.$changes|=e},this.$autosize=function(){var e=this.session.getScreenLength()*this.lineHeight,t=this.$maxLines*this.lineHeight,n=Math.min(t,Math.max((this.$minLines||1)*this.lineHeight,e))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(n+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&n>this.$maxPixelHeight&&(n=this.$maxPixelHeight);var i=!(n<=2*this.lineHeight)&&e>t;if(n!=this.desiredHeight||this.$size.height!=this.desiredHeight||i!=this.$vScroll){i!=this.$vScroll&&(this.$vScroll=i,this.scrollBarV.setVisible(i));var s=this.container.clientWidth;this.container.style.height=n+"px",this.$updateCachedSize(!0,this.$gutterWidth,s,n),this.desiredHeight=n,this._signal("autosize")}},this.$computeLayerConfig=function(){var e=this.session,t=this.$size,n=t.height<=2*this.lineHeight,i=this.session.getScreenLength()*this.lineHeight,s=this.$getLongestLine(),o=!n&&(this.$hScrollBarAlwaysVisible||t.scrollerWidth-s-2*this.$padding<0),u=this.$horizScroll!==o;u&&(this.$horizScroll=o,this.scrollBarH.setVisible(o));var a=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var f=t.scrollerHeight+this.lineHeight,l=!this.$maxLines&&this.$scrollPastEnd?(t.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;i+=l;var c=this.scrollMargin;this.session.setScrollTop(Math.max(-c.top,Math.min(this.scrollTop,i-t.scrollerHeight+c.bottom))),this.session.setScrollLeft(Math.max(-c.left,Math.min(this.scrollLeft,s+2*this.$padding-t.scrollerWidth+c.right)));var h=!n&&(this.$vScrollBarAlwaysVisible||t.scrollerHeight-i+l<0||this.scrollTop>c.top),p=a!==h;p&&(this.$vScroll=h,this.scrollBarV.setVisible(h));var y,b,d=this.scrollTop%this.lineHeight,v=Math.ceil(f/this.lineHeight)-1,m=Math.max(0,Math.round((this.scrollTop-d)/this.lineHeight)),g=m+v,w=this.lineHeight;m=e.screenToDocumentRow(m,0);var E=e.getFoldLine(m);E&&(m=E.start.row),y=e.documentToScreenRow(m,0),b=e.getRowLength(m)*w,g=Math.min(e.screenToDocumentRow(g,0),e.getLength()-1),f=t.scrollerHeight+e.getRowLength(g)*w+b,d=this.scrollTop-y*w;var S=0;(this.layerConfig.width!=s||u)&&(S=this.CHANGE_H_SCROLL);(u||p)&&(S|=this.$updateCachedSize(!0,this.gutterWidth,t.width,t.height),this._signal("scrollbarVisibilityChanged"),p&&(s=this.$getLongestLine()));return this.layerConfig={width:s,padding:this.$padding,firstRow:m,firstRowScreen:y,lastRow:g,lineHeight:w,characterWidth:this.characterWidth,minHeight:f,maxHeight:i,offset:d,gutterOffset:w?Math.max(0,Math.ceil((d+t.height-t.scrollerHeight)/w)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(s-this.$padding),S},this.$updateLines=function(){if(this.$changedLines){var e=this.$changedLines.firstRow,t=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(!(e>n.lastRow+1||t<n.firstRow)){if(t!==1/0)return this.$textLayer.updateLines(n,e,t),!0;this.$showGutter&&this.$gutterLayer.update(n),this.$textLayer.update(n)}}},this.$getLongestLine=function(){var e=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(e+=1),this.$textLayer&&e>this.$textLayer.MAX_LINE_LENGTH&&(e=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t)},this.updateBreakpoints=function(e){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(e,t,n){this.scrollCursorIntoView(e,n),this.scrollCursorIntoView(t,n)},this.scrollCursorIntoView=function(e,t,n){if(0!==this.$size.scrollerHeight){var r=this.$cursorLayer.getPixelPosition(e),i=r.left,s=r.top,o=n&&n.top||0,u=n&&n.bottom||0,a=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;a+o>s?(t&&a+o>s+this.lineHeight&&(s-=t*this.$size.scrollerHeight),0===s&&(s=-this.scrollMargin.top),this.session.setScrollTop(s)):a+this.$size.scrollerHeight-u<s+this.lineHeight&&(t&&a+this.$size.scrollerHeight-u<s-this.lineHeight&&(s+=t*this.$size.scrollerHeight),this.session.setScrollTop(s+this.lineHeight+u-this.$size.scrollerHeight));var f=this.scrollLeft;f>i?(i<this.$padding+2*this.layerConfig.characterWidth&&(i=-this.scrollMargin.left),this.session.setScrollLeft(i)):f+this.$size.scrollerWidth<i+this.characterWidth?this.session.setScrollLeft(Math.round(i+this.characterWidth-this.$size.scrollerWidth)):f<=this.$padding&&i-f<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)},this.alignCursor=function(e,t){"number"==typeof e&&(e={row:e,column:0});var n=this.$cursorLayer.getPixelPosition(e),r=this.$size.scrollerHeight-this.lineHeight,i=n.top-r*(t||0);return this.session.setScrollTop(i),i},this.STEPS=8,this.$calcSteps=function(e,t){var n=0,r=this.STEPS,i=[],s=function(e,t,n){return n*(Math.pow(e-1,3)+1)+t};for(n=0;n<r;++n)i.push(s(n/this.STEPS,e,t-e));return i},this.scrollToLine=function(e,t,n,r){var s=this.$cursorLayer.getPixelPosition({row:e,column:0}).top;t&&(s-=this.$size.scrollerHeight/2);var o=this.scrollTop;this.session.setScrollTop(s),!1!==n&&this.animateScrolling(o,r)},this.animateScrolling=function(e,t){var n=this.scrollTop;if(this.$animatedScroll){var r=this;if(e!=n){if(this.$scrollAnimation){var i=this.$scrollAnimation.steps;if(i.length&&(e=i[0])==n)return}var s=r.$calcSteps(e,n);this.$scrollAnimation={from:e,to:n,steps:s},clearInterval(this.$timer),r.session.setScrollTop(s.shift()),r.session.$scrollTop=n,this.$timer=setInterval((function(){s.length?(r.session.setScrollTop(s.shift()),r.session.$scrollTop=n):null!=n?(r.session.$scrollTop=-1,r.session.setScrollTop(n),n=null):(r.$timer=clearInterval(r.$timer),r.$scrollAnimation=null,t&&t())}),10)}}},this.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},this.scrollToX=function(e){this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(e,t){this.session.setScrollTop(t),this.session.setScrollLeft(t)},this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},this.isScrollableBy=function(e,t){return t<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||(t>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||(e<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||(e>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0)))},this.pixelToScreenCoordinates=function(e,t){var n;if(this.$hasCssTransforms){n={top:0,left:0};var r=this.$fontMetrics.transformCoordinates([e,t]);e=r[1]-this.gutterWidth-this.margin.left,t=r[0]}else n=this.scroller.getBoundingClientRect();var i=e+this.scrollLeft-n.left-this.$padding,s=i/this.characterWidth,o=Math.floor((t+this.scrollTop-n.top)/this.lineHeight),u=this.$blockCursor?Math.floor(s):Math.round(s);return{row:o,column:u,side:s-u>0?1:-1,offsetX:i}},this.screenToTextCoordinates=function(e,t){var n;if(this.$hasCssTransforms){n={top:0,left:0};var r=this.$fontMetrics.transformCoordinates([e,t]);e=r[1]-this.gutterWidth-this.margin.left,t=r[0]}else n=this.scroller.getBoundingClientRect();var i=e+this.scrollLeft-n.left-this.$padding,s=i/this.characterWidth,o=this.$blockCursor?Math.floor(s):Math.round(s),u=Math.floor((t+this.scrollTop-n.top)/this.lineHeight);return this.session.screenToDocumentPosition(u,Math.max(o,0),i)},this.textToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=this.session.documentToScreenPosition(e,t),i=this.$padding+(this.session.$bidiHandler.isBidiRow(r.row,e)?this.session.$bidiHandler.getPosLeft(r.column):Math.round(r.column*this.characterWidth)),s=r.row*this.lineHeight;return{pageX:n.left+i-this.scrollLeft,pageY:n.top+s-this.scrollTop}},this.visualizeFocus=function(){i.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){i.removeCssClass(this.container,"ace_focus")},this.showComposition=function(e){this.$composition=e,e.cssText||(e.cssText=this.textarea.style.cssText),e.useTextareaForIME=this.$useTextareaForIME,this.$useTextareaForIME?(i.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):e.markerId=this.session.addMarker(e.markerRange,"ace_composition_marker","text")},this.setCompositionText=function(e){var t=this.session.selection.cursor;this.addToken(e,"composition_placeholder",t.row,t.column),this.$moveTextAreaToCursor()},this.hideComposition=function(){this.$composition&&(this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),i.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText,this.$composition=null,this.$cursorLayer.element.style.display="")},this.addToken=function(e,t,n,r){var i=this.session;i.bgTokenizer.lines[n]=null;var s={type:t,value:e},o=i.getTokens(n);if(null==r)o.push(s);else for(var u=0,a=0;a<o.length;a++){var f=o[a];if(r<=(u+=f.value.length)){var l=f.value.length-(u-r),c=f.value.slice(0,l),h=f.value.slice(l);o.splice(a,1,{type:f.type,value:c},s,{type:f.type,value:h});break}}this.updateLines(n,n)},this.setTheme=function(e,t){function o(r){if(n.$themeId!=e)return t&&t();if(!r||!r.cssClass)throw new Error("couldn't load module "+e+" or it didn't call define");r.$id&&(n.$themeId=r.$id),i.importCssString(r.cssText,r.cssClass,n.container),n.theme&&i.removeCssClass(n.container,n.theme.cssClass);var s="padding"in r?r.padding:"padding"in(n.theme||{})?4:n.$padding;n.$padding&&s!=n.$padding&&n.setPadding(s),n.$theme=r.cssClass,n.theme=r,i.addCssClass(n.container,r.cssClass),i.setCssClass(n.container,"ace_dark",r.isDark),n.$size&&(n.$size.width=0,n.$updateSizeAsync()),n._dispatchEvent("themeLoaded",{theme:r}),t&&t()}var n=this;this.$themeId=e,n._dispatchEvent("themeChange",{theme:e});if(e&&"string"!=typeof e)o(e);else{var r=e||this.$options.theme.initialValue;s.loadModule(["theme",r],o)}},this.getTheme=function(){return this.$themeId},this.setStyle=function(e,t){i.setCssClass(this.container,e,!1!==t)},this.unsetStyle=function(e){i.removeCssClass(this.container,e)},this.setCursorStyle=function(e){i.setStyle(this.scroller.style,"cursor",e)},this.setMouseCursor=function(e){i.setStyle(this.scroller.style,"cursor",e)},this.attachToShadowRoot=function(){i.importCssString(v,"ace_editor.css",this.container)},this.destroy=function(){this.$fontMetrics.destroy(),this.$cursorLayer.destroy()}}).call(y.prototype),s.defineOptions(y.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(e){this.$textLayer.setShowInvisibles(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(e){"number"==typeof e&&(this.$printMarginColumn=e),this.$showPrintMargin=!!e,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(e){this.$gutter.style.display=e?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(e){i.setCssClass(this.$gutter,"ace_fade-fold-widgets",e)},initialValue:!1},showFoldWidgets:{set:function(e){this.$gutterLayer.setShowFoldWidgets(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(e){this.$textLayer.setDisplayIndentGuides(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(e){this.$gutterLayer.setHighlightGutterLine(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(e){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(e){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(e){"number"==typeof e&&(e+="px"),this.container.style.fontSize=e,this.updateFontSize()},initialValue:12},fontFamily:{set:function(e){this.container.style.fontFamily=e,this.updateFontSize()}},maxLines:{set:function(e){this.updateFull()}},minLines:{set:function(e){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(e){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(e){e=+e||0;this.$scrollPastEnd!=e&&(this.$scrollPastEnd=e,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(e){this.$gutterLayer.$fixedWidth=!!e,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(e){this.setTheme(e)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!m.isMobile&&!m.isIE}}),t.VirtualRenderer=y})),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],(function(e,t,n){"use strict";function a(e){if("undefined"==typeof Worker)return{postMessage:function(){},terminate:function(){}};if(o.get("loadWorkerFromBlob")){var t=function(e){var t="importScripts('"+i.qualifyURL(e)+"');";try{return new Blob([t],{type:"application/javascript"})}catch(n){var s=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);return s.append(t),s.getBlob("application/javascript")}}(e),r=(window.URL||window.webkitURL).createObjectURL(t);return new Worker(r)}return new Worker(e)}var r=e("../lib/oop"),i=e("../lib/net"),s=e("../lib/event_emitter").EventEmitter,o=e("../config"),f=function(e){e.postMessage||(e=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=e,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){r.implement(this,s),this.$createWorkerFromOldConfig=function(t,n,r,i,s){e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl);if(o.get("packaged")||!e.toUrl)i=i||o.moduleUrl(n,"worker");else{var u=this.$normalizePath;i=i||u(e.toUrl("ace/worker/worker.js",null,"_"));var f={};t.forEach((function(t){f[t]=u(e.toUrl(t,null,"_").replace(/(\.js)?(\?.*)?$/,""))}))}return this.$worker=a(i),s&&this.send("importScripts",s),this.$worker.postMessage({init:!0,tlns:f,module:n,classname:r}),this.$worker},this.onMessage=function(e){var t=e.data;switch(t.type){case"event":this._signal(t.name,{data:t.data});break;case"call":var n=this.callbacks[t.id];n&&(n(t.data),delete this.callbacks[t.id]);break;case"error":this.reportError(t.data);break;case"log":window.console&&console.log&&console.log.apply(console,t.data)}},this.reportError=function(e){window.console&&console.error&&console.error(e)},this.$normalizePath=function(e){return i.qualifyURL(e)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(e,t){this.$worker.postMessage({command:e,args:t})},this.call=function(e,t,n){if(n){var r=this.callbackId++;this.callbacks[r]=n,t.push(r)}this.send(e,t)},this.emit=function(e,t){try{t.data&&t.data.err&&(t.data.err={message:t.data.err.message,stack:t.data.err.stack,code:t.data.err.code}),this.$worker.postMessage({event:e,data:{data:t.data}})}catch(n){console.error(n.stack)}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call("setValue",[e.getValue()]),e.on("change",this.changeListener)},this.changeListener=function(e){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),"insert"==e.action?this.deltaQueue.push(e.start,e.lines):this.deltaQueue.push(e.start,e.end)},this.$sendDeltaQueue=function(){var e=this.deltaQueue;e&&(this.deltaQueue=null,e.length>50&&e.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:e}))}}).call(f.prototype);t.UIWorkerClient=function(e,t,n){var r=null,i=!1,u=Object.create(s),a=[],l=new f({messageBuffer:a,terminate:function(){},postMessage:function(e){a.push(e);r&&(i?setTimeout(c):c())}});l.setEmitSync=function(e){i=e};var c=function(){var e=a.shift();e.command?r[e.command].apply(r,e.args):e.event&&u._signal(e.event,e.data)};return u.postMessage=function(e){l.onMessage({data:e})},u.callback=function(e,t){this.postMessage({type:"call",id:t,data:e})},u.emit=function(e,t){this.postMessage({type:"event",name:e,data:t})},o.loadModule(["worker",t],(function(e){r=new e[n](u);for(;a.length;)c()})),l},t.WorkerClient=f,t.createWorker=a})),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],(function(e,t,n){"use strict";var r=e("./range").Range,i=e("./lib/event_emitter").EventEmitter,s=e("./lib/oop"),o=function(e,t,n,r,i,s){var o=this;this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=i,this.othersClass=s,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=r,this.$onCursorChange=function(){setTimeout((function(){o.onCursorChange()}))},this.$pos=n;var u=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=u.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)};(function(){s.implement(this,i),this.setup=function(){var e=this,t=this.doc,n=this.session;this.selectionBefore=n.selection.toJSON(),n.selection.inMultiSelectMode&&n.selection.toSingleRange(),this.pos=t.createAnchor(this.$pos.row,this.$pos.column);var i=this.pos;i.$insertRight=!0,i.detach(),i.markerId=n.addMarker(new r(i.row,i.column,i.row,i.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach((function(n){var r=t.createAnchor(n.row,n.column);r.$insertRight=!0,r.detach(),e.others.push(r)})),n.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var e=this.session,t=this;this.othersActive=!0,this.others.forEach((function(n){n.markerId=e.addMarker(new r(n.row,n.column,n.row,n.column+t.length),t.othersClass,null,!1)}))}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)}},this.onUpdate=function(e){if(this.$updating)return this.updateAnchors(e);var t=e;if(t.start.row===t.end.row&&t.start.row===this.pos.row){this.$updating=!0;var n="insert"===e.action?t.end.column-t.start.column:t.start.column-t.end.column,i=t.start.column>=this.pos.column&&t.start.column<=this.pos.column+this.length+1,s=t.start.column-this.pos.column;this.updateAnchors(e),i&&(this.length+=n);if(i&&!this.session.$fromUndo)if("insert"===e.action)for(var o=this.others.length-1;o>=0;o--){var a={row:(u=this.others[o]).row,column:u.column+s};this.doc.insertMergedLines(a,e.lines)}else if("remove"===e.action)for(o=this.others.length-1;o>=0;o--){var u;a={row:(u=this.others[o]).row,column:u.column+s};this.doc.remove(new r(a.row,a.column,a.row,a.column-n))}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(e){this.pos.onChange(e);for(var t=this.others.length;t--;)this.others[t].onChange(e);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var e=this,t=this.session,n=function(n,i){t.removeMarker(n.markerId),n.markerId=t.addMarker(new r(n.row,n.column,n.row,n.column+e.length),i,null,!1)};n(this.pos,this.mainClass);for(var i=this.others.length;i--;)n(this.others[i],this.othersClass)}},this.onCursorChange=function(e){if(!this.$updating&&this.session){var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1!==this.$undoStackDepth){for(var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth,n=0;n<t;n++)e.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(o.prototype),t.PlaceHolder=o})),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],(function(e,t,n){function s(e,t){return e.row==t.row&&e.column==t.column}var r=e("../lib/event"),i=e("../lib/useragent");t.onMouseDown=function(e){var t=e.domEvent,n=t.altKey,o=t.shiftKey,u=t.ctrlKey,a=e.getAccelKey(),f=e.getButton();u&&i.isMac&&(f=t.button);if(e.editor.inMultiSelectMode&&2==f)e.editor.textInput.onContextMenu(e.domEvent);else if(u||n||a){if(0===f){var S,l=e.editor,c=l.selection,h=l.inMultiSelectMode,p=e.getDocumentPosition(),d=c.getCursor(),v=e.inSelection()||c.isEmpty()&&s(p,d),m=e.x,g=e.y,b=l.session,w=l.renderer.pixelToScreenCoordinates(m,g),E=w;if(l.$mouseHandler.$enableJumpToDef)u&&n||a&&n?S=o?"block":"add":n&&l.$blockSelectEnabled&&(S="block");else if(a&&!n){S="add";if(!h&&o)return}else n&&l.$blockSelectEnabled&&(S="block");S&&i.isMac&&t.ctrlKey&&l.$mouseHandler.cancelContextMenu();if("add"==S){if(!h&&v)return;if(!h){var x=c.toOrientedRange();l.addSelectionMarker(x)}var T=c.rangeList.rangeAtPoint(p);l.inVirtualSelectionMode=!0,o&&(T=null,x=c.ranges[0]||x,l.removeSelectionMarker(x)),l.once("mouseup",(function(){var e=c.toOrientedRange();T&&e.isEmpty()&&s(T.cursor,e.cursor)?c.substractPoint(e.cursor):(o?c.substractPoint(x.cursor):x&&(l.removeSelectionMarker(x),c.addRange(x)),c.addRange(e)),l.inVirtualSelectionMode=!1}))}else if("block"==S){e.stop(),l.inVirtualSelectionMode=!0;var N,C=[],k=function(){var e=l.renderer.pixelToScreenCoordinates(m,g),t=b.screenToDocumentPosition(e.row,e.column,e.offsetX);s(E,e)&&s(t,c.lead)||(E=e,l.selection.moveToPosition(t),l.renderer.scrollCursorIntoView(),l.removeSelectionMarkers(C),C=c.rectangularRangeBlock(E,w),l.$mouseHandler.$clickSelection&&1==C.length&&C[0].isEmpty()&&(C[0]=l.$mouseHandler.$clickSelection.clone()),C.forEach(l.addSelectionMarker,l),l.updateSelectionMarkers())};h&&!a?c.toSingleRange():!h&&a&&(N=c.toOrientedRange(),l.addSelectionMarker(N)),o?w=b.documentToScreenPosition(c.lead):c.moveToPosition(p),E={row:-1,column:-1};var A=k;r.capture(l.container,(function(e){m=e.clientX,g=e.clientY}),(function(e){k(),clearInterval(O),l.removeSelectionMarkers(C),C.length||(C=[c.toOrientedRange()]),N&&(l.removeSelectionMarker(N),c.toSingleRange(N));for(var t=0;t<C.length;t++)c.addRange(C[t]);l.inVirtualSelectionMode=!1,l.$mouseHandler.$clickSelection=null}));var O=setInterval((function(){A()}),20);return e.preventDefault()}}}else 0===f&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode()}})),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],(function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(e){e.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(e){e.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"splitIntoLines",description:"Split into lines",exec:function(e){e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(e){e.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(e){e.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(e){e.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(e){return e&&e.inMultiSelectMode}}];var r=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new r(t.multiSelectCommands)})),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],(function(e,t,n){function v(e,t){return e.row==t.row&&e.column==t.column}function m(e){e.$multiselectOnSessionChange||(e.$onAddRange=e.$onAddRange.bind(e),e.$onRemoveRange=e.$onRemoveRange.bind(e),e.$onMultiSelect=e.$onMultiSelect.bind(e),e.$onSingleSelect=e.$onSingleSelect.bind(e),e.$multiselectOnSessionChange=t.onSessionChange.bind(e),e.$checkMultiselectChange=e.$checkMultiselectChange.bind(e),e.$multiselectOnSessionChange(e),e.on("changeSession",e.$multiselectOnSessionChange),e.on("mousedown",o),e.commands.addCommands(f.defaultCommands),function(e){function r(t){n&&(e.renderer.setMouseCursor(""),n=!1)}var t=e.textInput.getElement(),n=!1;u.addListener(t,"keydown",(function(t){var i=18==t.keyCode&&!(t.ctrlKey||t.shiftKey||t.metaKey);e.$blockSelectEnabled&&i?n||(e.renderer.setMouseCursor("crosshair"),n=!0):n&&r()})),u.addListener(t,"keyup",r),u.addListener(t,"blur",r)}(e))}var r=e("./range_list").RangeList,i=e("./range").Range,s=e("./selection").Selection,o=e("./mouse/multi_select_handler").onMouseDown,u=e("./lib/event"),a=e("./lib/lang"),f=e("./commands/multi_select_commands");t.commands=f.defaultCommands.concat(f.multiSelectCommands);var c=new(0,e("./search").Search),p=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(p.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(e,t){if(e){if(!this.inMultiSelectMode&&0===this.rangeCount){var n=this.toOrientedRange();this.rangeList.add(n),this.rangeList.add(e);if(2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),t||this.fromOrientedRange(e);this.rangeList.removeAll(),this.rangeList.add(n),this.$onAddRange(n)}e.cursor||(e.cursor=e.end);var r=this.rangeList.add(e);return this.$onAddRange(e),r.length&&this.$onRemoveRange(r),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),t||this.fromOrientedRange(e)}},this.toSingleRange=function(e){e=e||this.ranges[0];var t=this.rangeList.removeAll();t.length&&this.$onRemoveRange(t),e&&this.fromOrientedRange(e)},this.substractPoint=function(e){var t=this.rangeList.substractPoint(e);if(t)return this.$onRemoveRange(t),t[0]},this.mergeOverlappingRanges=function(){var e=this.rangeList.merge();e.length&&this.$onRemoveRange(e)},this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(e),this._signal("addRange",{range:e})},this.$onRemoveRange=function(e){this.rangeCount=this.rangeList.ranges.length;if(1==this.rangeCount&&this.inMultiSelectMode){var t=this.rangeList.ranges.pop();e.push(t),this.rangeCount=0}for(var n=e.length;n--;){var r=this.ranges.indexOf(e[n]);this.ranges.splice(r,1)}this._signal("removeRange",{ranges:e}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),(t=t||this.ranges[0])&&!t.isEqual(this.getRange())&&this.fromOrientedRange(t)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new r,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=i.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{n=this.getRange();var r=this.isBackwards(),s=n.start.row,o=n.end.row;if(s==o){if(r)var u=n.end,a=n.start;else u=n.start,a=n.end;this.addRange(i.fromPoints(a,a)),this.addRange(i.fromPoints(u,u));return}var f=[],l=this.getLineRange(s,!0);l.start.column=n.start.column,f.push(l);for(var c=s+1;c<o;c++)f.push(this.getLineRange(c,!0));(l=this.getLineRange(o,!0)).end.column=n.end.column,f.push(l),f.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=i.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var r=this.session.documentToScreenPosition(this.cursor),s=this.session.documentToScreenPosition(this.anchor);this.rectangularRangeBlock(r,s).forEach(this.addRange,this)}},this.rectangularRangeBlock=function(e,t,n){var r=[],s=e.column<t.column;if(s)var o=e.column,u=t.column,a=e.offsetX,f=t.offsetX;else o=t.column,u=e.column,a=t.offsetX,f=e.offsetX;var p,l=e.row<t.row;if(l)var c=e.row,h=t.row;else c=t.row,h=e.row;o<0&&(o=0),c<0&&(c=0),c==h&&(n=!0);for(var d=c;d<=h;d++){var m=i.fromPoints(this.session.screenToDocumentPosition(d,o,a),this.session.screenToDocumentPosition(d,u,f));if(m.isEmpty()){if(p&&v(m.end,p))break;p=m.end}m.cursor=s?m.start:m.end,r.push(m)}l&&r.reverse();if(!n){for(var g=r.length-1;r[g].isEmpty()&&g>0;)g--;if(g>0)for(var y=0;r[y].isEmpty();)y++;for(var b=g;b>=y;b--)r[b].isEmpty()&&r.splice(b,1)}return r}}.call(s.prototype);var d=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(e){e.cursor||(e.cursor=e.end);var t=this.getSelectionStyle();return e.marker=this.session.addMarker(e,"ace_selection",t),this.session.$selectionMarkers.push(e),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,e},this.removeSelectionMarker=function(e){if(e.marker){this.session.removeMarker(e.marker);var t=this.session.$selectionMarkers.indexOf(e);-1!=t&&this.session.$selectionMarkers.splice(t,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(e){for(var t=this.session.$selectionMarkers,n=e.length;n--;){var r=e[n];if(r.marker){this.session.removeMarker(r.marker);var i=t.indexOf(r);-1!=i&&t.splice(i,1)}}this.session.selectionMarkerCount=t.length},this.$onAddRange=function(e){this.addSelectionMarker(e.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(e){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(f.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(e){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(f.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(e){var t=e.command,n=e.editor;if(n.multiSelect){if(t.multiSelectAction)"forEach"==t.multiSelectAction?r=n.forEachSelection(t,e.args):"forEachLine"==t.multiSelectAction?r=n.forEachSelection(t,e.args,!0):"single"==t.multiSelectAction?(n.exitMultiSelectMode(),r=t.exec(n,e.args||{})):r=t.multiSelectAction(n,e.args||{});else{var r=t.exec(n,e.args||{});n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()}return r}},this.forEachSelection=function(e,t,n){if(!this.inVirtualSelectionMode){var l,r=n&&n.keepOrder,i=1==n||n&&n.$byLines,o=this.session,u=this.selection,a=u.rangeList,f=(r?u:a).ranges;if(!f.length)return e.exec?e.exec(this,t||{}):e(this,t||{});var c=u._eventRegistry;u._eventRegistry={};var h=new s(o);this.inVirtualSelectionMode=!0;for(var p=f.length;p--;){if(i)for(;p>0&&f[p].start.row==f[p-1].end.row;)p--;h.fromOrientedRange(f[p]),h.index=p,this.selection=o.selection=h;var d=e.exec?e.exec(this,t||{}):e(this,t||{});!l&&void 0!==d&&(l=d),h.toOrientedRange(f[p])}h.detach(),this.selection=o.selection=u,this.inVirtualSelectionMode=!1,u._eventRegistry=c,u.mergeOverlappingRanges(),u.ranges[0]&&u.fromOrientedRange(u.ranges[0]);var v=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),v&&v.from==v.to&&this.renderer.animateScrolling(v.from),l}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var e="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var t=this.multiSelect.rangeList.ranges,n=[],r=0;r<t.length;r++)n.push(this.session.getTextRange(t[r]));var i=this.session.getDocument().getNewLineCharacter();(e=n.join(i)).length==(n.length-1)*i.length&&(e="")}else this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange()));return e},this.$checkMultiselectChange=function(e,t){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var n=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&t==this.multiSelect.anchor)return;var r=t==this.multiSelect.anchor?n.cursor==n.start?n.end:n.start:n.cursor;r.row!=t.row||this.session.$clipPositionToDocument(r.row,r.column).column!=t.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(e,t,n){(t=t||{}).needle=e||t.needle;if(null==t.needle){var r=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();t.needle=this.session.getTextRange(r)}this.$search.set(t);var i=this.$search.findAll(this.session);if(!i.length)return 0;var s=this.multiSelect;n||s.toSingleRange(i[0]);for(var o=i.length;o--;)s.addRange(i[o],!0);return r&&s.rangeList.rangeAtPoint(r.start)&&s.addRange(r,!0),i.length},this.selectMoreLines=function(e,t){var n=this.selection.toOrientedRange(),r=n.cursor==n.end,s=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(s.column=this.selection.$desiredColumn);var o=this.session.screenToDocumentPosition(s.row+e,s.column);if(n.isEmpty())a=o;else var u=this.session.documentToScreenPosition(r?n.end:n.start),a=this.session.screenToDocumentPosition(u.row+e,u.column);if(r){(f=i.fromPoints(o,a)).cursor=f.start}else{var f;(f=i.fromPoints(a,o)).cursor=f.end}f.desiredColumn=s.column;if(this.selection.inMultiSelectMode){if(t)var l=n.cursor}else this.selection.addRange(n);this.selection.addRange(f),l&&this.selection.substractPoint(l)},this.transposeSelections=function(e){for(var t=this.session,n=t.multiSelect,r=n.ranges,i=r.length;i--;){if((s=r[i]).isEmpty()){var o=t.getWordRange(s.start.row,s.start.column);s.start.row=o.start.row,s.start.column=o.start.column,s.end.row=o.end.row,s.end.column=o.end.column}}n.mergeOverlappingRanges();var u=[];for(i=r.length;i--;){var s=r[i];u.unshift(t.getTextRange(s))}e<0?u.unshift(u.pop()):u.push(u.shift());for(i=r.length;i--;){o=(s=r[i]).clone();t.replace(s,u[i]),s.start.row=o.start.row,s.start.column=o.start.column}n.fromOrientedRange(n.ranges[0])},this.selectMore=function(e,t,n){var r=this.session,s=r.multiSelect.toOrientedRange();if(s.isEmpty()){(s=r.getWordRange(s.start.row,s.start.column)).cursor=-1==e?s.start:s.end,this.multiSelect.addRange(s);if(n)return}var o=r.getTextRange(s),u=function(e,t,n){return c.$options.wrap=!0,c.$options.needle=t,c.$options.backwards=-1==n,c.find(e)}(r,o,e);u&&(u.cursor=-1==e?u.start:u.end,this.session.unfold(u),this.multiSelect.addRange(u),this.renderer.scrollCursorIntoView(null,.5)),t&&this.multiSelect.substractPoint(s.cursor)},this.alignCursors=function(){var e=this.session,t=e.multiSelect,n=t.ranges,r=-1,s=n.filter((function(e){if(e.cursor.row==r)return!0;r=e.cursor.row}));if(n.length&&s.length!=n.length-1){s.forEach((function(e){t.substractPoint(e.cursor)}));var d=0,v=1/0,m=n.map((function(t){var n=t.cursor,i=e.getLine(n.row).substr(n.column).search(/\S/g);return-1==i&&(i=0),n.column>d&&(d=n.column),i<v&&(v=i),i}));n.forEach((function(t,n){var r=t.cursor,s=d-r.column,o=m[n]-v;s>o?e.insert(r,a.stringRepeat(" ",s-o)):e.remove(new i(r.row,r.column,r.row,r.column-s+o)),t.start.column=t.end.column=d,t.start.row=t.end.row=r.row,t.cursor=t.end})),t.fromOrientedRange(n[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var o=this.selection.getRange(),u=o.start.row,f=o.end.row,l=u==f;if(l){var h,c=this.session.getLength();do{h=this.session.getLine(f)}while(/[=:]/.test(h)&&++f<c);do{h=this.session.getLine(u)}while(/[=:]/.test(h)&&--u>0);u<0&&(u=0),f>=c&&(f=c-1)}var p=this.session.removeFullLines(u,f);p=this.$reAlignText(p,l),this.session.insert({row:u,column:0},p.join("\n")+"\n"),l||(o.start.column=0,o.end.column=p[p.length-1].length),this.selection.setRange(o)}},this.$reAlignText=function(e,t){function u(e){return a.stringRepeat(" ",e)}function f(e){return e[2]?u(i)+e[2]+u(s-e[2].length+o)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}var i,s,o,n=!0,r=!0;return e.map((function(e){var t=e.match(/(\s*)(.*?)(\s*)([=:].*)/);return t?null==i?(i=t[1].length,s=t[2].length,o=t[3].length,t):(i+s+o!=t[1].length+t[2].length+t[3].length&&(r=!1),i!=t[1].length&&(n=!1),i>t[1].length&&(i=t[1].length),s<t[2].length&&(s=t[2].length),o>t[3].length&&(o=t[3].length),t):[e]})).map(t?f:n?r?function(e){return e[2]?u(i+s-e[2].length)+e[2]+u(o)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}:f:function(e){return e[2]?u(i)+e[2]+u(o)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]})}}).call(d.prototype),t.onSessionChange=function(e){var t=e.session;t&&!t.multiSelect&&(t.$selectionMarkers=[],t.selection.$initRangeList(),t.multiSelect=t.selection),this.multiSelect=t&&t.multiSelect;var n=e.oldSession;n&&(n.multiSelect.off("addRange",this.$onAddRange),n.multiSelect.off("removeRange",this.$onRemoveRange),n.multiSelect.off("multiSelect",this.$onMultiSelect),n.multiSelect.off("singleSelect",this.$onSingleSelect),n.multiSelect.lead.off("change",this.$checkMultiselectChange),n.multiSelect.anchor.off("change",this.$checkMultiselectChange)),t&&(t.multiSelect.on("addRange",this.$onAddRange),t.multiSelect.on("removeRange",this.$onRemoveRange),t.multiSelect.on("multiSelect",this.$onMultiSelect),t.multiSelect.on("singleSelect",this.$onSingleSelect),t.multiSelect.lead.on("change",this.$checkMultiselectChange),t.multiSelect.anchor.on("change",this.$checkMultiselectChange)),t&&this.inMultiSelectMode!=t.selection.inMultiSelectMode&&(t.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},t.MultiSelect=m,e("./config").defineOptions(d.prototype,"editor",{enableMultiselect:{set:function(e){m(this),e?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",o)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",o))},value:!0},enableBlockSelect:{set:function(e){this.$blockSelectEnabled=e},value:!0}})})),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],(function(e,t,n){"use strict";var r=e("../../range").Range,i=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(e,t,n){var r=e.getLine(n);return this.foldingStartMarker.test(r)?"start":"markbeginend"==t&&this.foldingStopMarker&&this.foldingStopMarker.test(r)?"end":""},this.getFoldWidgetRange=function(e,t,n){return null},this.indentationBlock=function(e,t,n){var i=/\S/,s=e.getLine(t),o=s.search(i);if(-1!=o){for(var u=n||s.length,a=e.getLength(),f=t,l=t;++t<a;){var c=e.getLine(t).search(i);if(-1!=c){if(c<=o)break;l=t}}if(l>f){var h=e.getLine(l).length;return new r(f,u,l,h)}}},this.openingBracketBlock=function(e,t,n,i,s){var o={row:n,column:i+1},u=e.$findClosingBracket(t,o,s);if(u){var a=e.foldWidgets[u.row];return null==a&&(a=e.getFoldWidget(u.row)),"start"==a&&u.row>o.row&&(u.row--,u.column=e.getLine(u.row).length),r.fromPoints(o,u)}},this.closingBracketBlock=function(e,t,n,i,s){var o={row:n,column:i},u=e.$findOpeningBracket(t,o);if(u)return u.column++,o.column--,r.fromPoints(u,o)}}).call(i.prototype)})),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],(function(e,t,n){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',t.$id="ace/theme/textmate";e("../lib/dom").importCssString(t.cssText,t.cssClass)})),ace.define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"],(function(e,t,n){"use strict";function o(e){this.session=e,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}e("./lib/oop");var i=e("./lib/dom");e("./range").Range;(function(){this.getRowLength=function(e){var t;return t=this.lineWidgets&&this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0,this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.$getWidgetScreenLength=function(){var e=0;return this.lineWidgets.forEach((function(t){t&&t.rowCount&&!t.hidden&&(e+=t.rowCount)})),e},this.$onChangeEditor=function(e){this.attach(e.editor)},this.attach=function(e){e&&e.widgetManager&&e.widgetManager!=this&&e.widgetManager.detach();this.editor!=e&&(this.detach(),this.editor=e,e&&(e.widgetManager=this,e.renderer.on("beforeRender",this.measureWidgets),e.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(e){var t=this.editor;if(t){this.editor=null,t.widgetManager=null,t.renderer.off("beforeRender",this.measureWidgets),t.renderer.off("afterRender",this.renderWidgets);var n=this.session.lineWidgets;n&&n.forEach((function(e){e&&e.el&&e.el.parentNode&&(e._inDocument=!1,e.el.parentNode.removeChild(e.el))}))}},this.updateOnFold=function(e,t){var n=t.lineWidgets;if(n&&e.action){for(var r=e.data,i=r.start.row,s=r.end.row,o="add"==e.action,u=i+1;u<s;u++)n[u]&&(n[u].hidden=o);n[s]&&(o?n[i]?n[s].hidden=o:n[i]=n[s]:(n[i]==n[s]&&(n[i]=void 0),n[s].hidden=o))}},this.updateOnChange=function(e){var t=this.session.lineWidgets;if(t){var n=e.start.row,r=e.end.row-n;if(0!==r)if("remove"==e.action){t.splice(n+1,r).forEach((function(e){e&&this.removeLineWidget(e)}),this),this.$updateRows()}else{var s=new Array(r);s.unshift(n,0),t.splice.apply(t,s),this.$updateRows()}}},this.$updateRows=function(){var e=this.session.lineWidgets;if(e){var t=!0;e.forEach((function(e,n){if(e){t=!1,e.row=n;for(;e.$oldWidget;)e.$oldWidget.row=n,e=e.$oldWidget}})),t&&(this.session.lineWidgets=null)}},this.addLineWidget=function(e){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var t=this.session.lineWidgets[e.row];t&&(e.$oldWidget=t,t.el&&t.el.parentNode&&(t.el.parentNode.removeChild(t.el),t._inDocument=!1)),this.session.lineWidgets[e.row]=e,e.session=this.session;var n=this.editor.renderer;e.html&&!e.el&&(e.el=i.createElement("div"),e.el.innerHTML=e.html),e.el&&(i.addCssClass(e.el,"ace_lineWidgetContainer"),e.el.style.position="absolute",e.el.style.zIndex=5,n.container.appendChild(e.el),e._inDocument=!0),e.coverGutter||(e.el.style.zIndex=3),null==e.pixelHeight&&(e.pixelHeight=e.el.offsetHeight),null==e.rowCount&&(e.rowCount=e.pixelHeight/n.layerConfig.lineHeight);var r=this.session.getFoldAt(e.row,0);e.$fold=r;if(r){var s=this.session.lineWidgets;e.row!=r.end.row||s[r.start.row]?e.hidden=!0:s[r.start.row]=e}return this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows(),this.renderWidgets(null,n),this.onWidgetChanged(e),e},this.removeLineWidget=function(e){e._inDocument=!1,e.session=null,e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el);if(e.editor&&e.editor.destroy)try{e.editor.destroy()}catch(t){}if(this.session.lineWidgets){var n=this.session.lineWidgets[e.row];if(n==e)this.session.lineWidgets[e.row]=e.$oldWidget,e.$oldWidget&&this.onWidgetChanged(e.$oldWidget);else for(;n;){if(n.$oldWidget==e){n.$oldWidget=e.$oldWidget;break}n=n.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(e){for(var t=this.session.lineWidgets,n=t&&t[e],r=[];n;)r.push(n),n=n.$oldWidget;return r},this.onWidgetChanged=function(e){this.session._changedWidgets.push(e),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(e,t){var n=this.session._changedWidgets,r=t.layerConfig;if(n&&n.length){for(var i=1/0,s=0;s<n.length;s++){var o=n[s];if(o&&o.el&&o.session==this.session){if(!o._inDocument){if(this.session.lineWidgets[o.row]!=o)continue;o._inDocument=!0,t.container.appendChild(o.el)}o.h=o.el.offsetHeight,o.fixedWidth||(o.w=o.el.offsetWidth,o.screenWidth=Math.ceil(o.w/r.characterWidth));var u=o.h/r.lineHeight;o.coverLine&&((u-=this.session.getRowLineCount(o.row))<0&&(u=0)),o.rowCount!=u&&(o.rowCount=u,o.row<i&&(i=o.row))}}i!=1/0&&(this.session._emit("changeFold",{data:{start:{row:i}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(e,t){var n=t.layerConfig,r=this.session.lineWidgets;if(r){for(var i=Math.min(this.firstRow,n.firstRow),s=Math.max(this.lastRow,n.lastRow,r.length);i>0&&!r[i];)i--;this.firstRow=n.firstRow,this.lastRow=n.lastRow,t.$cursorLayer.config=n;for(var o=i;o<=s;o++){var u=r[o];if(u&&u.el)if(u.hidden)u.el.style.top=-100-(u.pixelHeight||0)+"px";else{u._inDocument||(u._inDocument=!0,t.container.appendChild(u.el));var a=t.$cursorLayer.getPixelPosition({row:o,column:0},!0).top;u.coverLine||(a+=n.lineHeight*this.session.getRowLineCount(u.row)),u.el.style.top=a-n.offset+"px";var f=u.coverGutter?0:t.gutterWidth;u.fixedWidth||(f-=t.scrollLeft),u.el.style.left=f+"px",u.fullWidth&&u.screenWidth&&(u.el.style.minWidth=n.width+2*n.padding+"px"),u.fixedWidth?u.el.style.right=t.scrollBar.getWidth()+"px":u.el.style.right=""}}}}}).call(o.prototype),t.LineWidgets=o})),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],(function(e,t,n){"use strict";function u(e,t,n){var r=e.getAnnotations().sort(s.comparePoints);if(r.length){var i=function(e,t,n){for(var r=0,i=e.length-1;r<=i;){var s=r+i>>1,o=n(t,e[s]);if(o>0)r=s+1;else{if(!(o<0))return s;i=s-1}}return-(r+1)}(r,{row:t,column:-1},s.comparePoints);i<0&&(i=-i-1),i>=r.length?i=n>0?0:r.length-1:0===i&&n<0&&(i=r.length-1);var u=r[i];if(u&&n){if(u.row===t){do{u=r[i+=n]}while(u&&u.row===t);if(!u)return r.slice()}var a=[];t=u.row;do{a[n<0?"unshift":"push"](u),u=r[i+=n]}while(u&&u.row==t);return a.length&&a}}}var r=e("../line_widgets").LineWidgets,i=e("../lib/dom"),s=e("../range").Range;t.showErrorMarker=function(e,t){var n=e.session;n.widgetManager||(n.widgetManager=new r(n),n.widgetManager.attach(e));var s=e.getCursorPosition(),o=s.row,a=n.widgetManager.getWidgetsAtRow(o).filter((function(e){return"errorMarker"==e.type}))[0];a?a.destroy():o-=t;var l,f=u(n,o,t);if(f){var c=f[0];s.column=(c.pos&&"number"!=typeof c.column?c.pos.sc:c.column)||0,s.row=c.row,l=e.renderer.$gutterLayer.$annotations[s.row]}else{if(a)return;l={text:["Looks good!"],className:"ace_ok"}}e.session.unfold(s.row),e.selection.moveToPosition(s);var h={row:s.row,fixedWidth:!0,coverGutter:!0,el:i.createElement("div"),type:"errorMarker"},p=h.el.appendChild(i.createElement("div")),d=h.el.appendChild(i.createElement("div"));d.className="error_widget_arrow "+l.className;var v=e.renderer.$cursorLayer.getPixelPosition(s).left;d.style.left=v+e.renderer.gutterWidth-5+"px",h.el.className="error_widget_wrapper",p.className="error_widget "+l.className,p.innerHTML=l.text.join("<br>"),p.appendChild(i.createElement("div"));var m=function(e,t,n){if(0===t&&("esc"===n||"return"===n))return h.destroy(),{command:"null"}};h.destroy=function(){e.$mouseHandler.isMousePressed||(e.keyBinding.removeKeyboardHandler(m),n.widgetManager.removeLineWidget(h),e.off("changeSelection",h.destroy),e.off("changeSession",h.destroy),e.off("mouseup",h.destroy),e.off("change",h.destroy))},e.keyBinding.addKeyboardHandler(m),e.on("changeSelection",h.destroy),e.on("changeSession",h.destroy),e.on("mouseup",h.destroy),e.on("change",h.destroy),e.session.widgetManager.addLineWidget(h),h.el.onmousedown=e.focus.bind(e),e.renderer.scrollCursorIntoView(null,.5,{bottom:h.el.offsetHeight})},i.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")})),ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],(function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var r=e("./lib/dom"),i=e("./lib/event"),s=e("./range").Range,o=e("./editor").Editor,u=e("./edit_session").EditSession,a=e("./undomanager").UndoManager,f=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.require=e,"function"==typeof define&&(t.define=define),t.edit=function(e,n){if("string"==typeof e){var s=e;if(!(e=document.getElementById(s)))throw new Error("ace.edit can't find div #"+s)}if(e&&e.env&&e.env.editor instanceof o)return e.env.editor;var u="";if(e&&/input|textarea/i.test(e.tagName)){var a=e;u=a.value,e=r.createElement("pre"),a.parentNode.replaceChild(e,a)}else e&&(u=e.textContent,e.innerHTML="");var l=t.createEditSession(u),c=new o(new f(e),l,n),h={document:l,editor:c,onResize:c.resize.bind(c,null)};return a&&(h.textarea=a),i.addListener(window,"resize",h.onResize),c.on("destroy",(function(){i.removeListener(window,"resize",h.onResize),h.editor.container.env=null})),c.container.env=c.env=h,c},t.createEditSession=function(e,t){var n=new u(e,t);return n.setUndoManager(new a),n},t.Range=s,t.Editor=o,t.EditSession=u,t.UndoManager=a,t.VirtualRenderer=f,t.version=t.config.version}));ace.require(["ace/ace"],(function(a){if(a){a.config.init(!0);a.define=ace.define}window.ace||(window.ace=a);for(var key in a)a.hasOwnProperty(key)&&(window.ace[key]=a[key]);window.ace.default=window.ace;"object"==typeof module&&"object"==typeof exports&&module&&(module.exports=window.ace)}));/*! jQuery v3.6.0 | (c) OpenJS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,(function(C,e){"use strict";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.6.0",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,(function(e,t){return n.call(e,t,e)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(S.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e)||(t=r(e))&&("function"!=typeof(n=v.call(t,"constructor")&&t.constructor)||a.call(n)!==l))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:y}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){n["[object "+t+"]"]=t.toLowerCase()}));var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,S="sizzle"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),j=function(e,t){return e===t&&(l=!0),0},D={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",F=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",B=new RegExp(M+"+","g"),$=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp(F),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+" "]&&(!v||!v.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ye(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=S)),o=(l=h(t)).length;for(;o--;)l[o]=(s?"#"+s:":scope")+" "+xe(l[o]);c=l.join(",")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute("id")}}}return g(t.replace($,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){for(var n=e.split("|"),r=n.length;r--;)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ve(a){return le((function(o){return o=+o,le((function(e,t){for(var n,r=a([],e.length,o),i=r.length;i--;)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))}))}))}function ye(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.scope=ce((function(e){return a.appendChild(e).appendChild(C.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),d.attributes=ce((function(e){return e.className="i",!e.getAttribute("className")})),d.getElementsByTagName=ce((function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length})),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce((function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length})),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if(void 0!==t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if(void 0!==t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;for(;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce((function(e){var t;a.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+S+"-]").length||v.push("~="),(t=C.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\["+M+"*name"+M+"*="+M+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+S+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")})),ce((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")}))),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce((function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",F)})),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},j=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&y(p,e)?-1:t==C||t.ownerDocument==p&&y(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;for(;n=n.parentNode;)a.unshift(n);n=t;for(;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&D.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(j),l){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&m(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(B," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var y="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){for(;l;){a=e;for(;a=a[l];)if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];for(;a=++s&&a&&a[l]||(d=s=0)||u.pop();)if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)for(;(a=++s&&a&&a[l]||(d=s=0)||u.pop())&&((x?a.nodeName.toLowerCase()!==f:1!==a.nodeType)||!++d||(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a!==e)););return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[S]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le((function(e,t){for(var n,r=a(e,o),i=r.length;i--;)e[n=P(e,r[i])]=!(t[n]=r[i])})):function(e){return a(e,0,t)}):a}},pseudos:{not:le((function(e){var r=[],i=[],s=f(e.replace($,"$1"));return s[S]?le((function(e,t,n,r){for(var i,o=s(e,null,r,[]),a=e.length;a--;)(i=o[a])&&(e[a]=!(t[a]=i))})):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}})),has:le((function(t){return function(e){return 0<se(t,e).length}})),contains:le((function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}})),lang:le((function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve((function(){return[0]})),last:ve((function(e,t){return[t-1]})),eq:ve((function(e,t,n){return[n<0?n+t:n]})),even:ve((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:ve((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:ve((function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e})),gt:ve((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){for(;e=e[u];)if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){for(;e=e[u];)if((1===e.nodeType||f)&&s(e,t,n))return!0}else for(;e=e[u];)if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){for(var r=i.length;r--;)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[S]&&(v=Ce(v)),y&&!y[S]&&(y=Ce(y,e)),le((function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;for(;o--;)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;for(;o--;)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;for(;o--;)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)}))}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be((function(e){return e===i}),a,!0),l=be((function(e){return-1<P(i,e)}),a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r&&!b.relative[e[n].type];n++);return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace($,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;for(;a;){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace($," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=A[e+" "];if(!a){t||(t=h(e)),n=t.length;for(;n--;)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);for(;s=v[a++];)if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;for(;s=y[a++];)s(c,f,t,n);if(e){if(0<u)for(;l--;)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;for(;i--&&(a=o[i],!b.relative[s=a.type]);)if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=S.split("").sort(j).join("")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce((function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))})),ce((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||fe("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),d.attributes&&ce((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||fe("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ce((function(e){return null==e.getAttribute("disabled")}))||fe(R,(function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null})),se}(C);S.find=d,S.expr=d.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,n,r){return m(n)?S.grep(e,(function(e,t){return!!n.call(e,t,e)!==r})):n.nodeType?S.grep(e,(function(e){return e===n!==r})):"string"!=typeof n?S.grep(e,(function(e){return-1<i.call(n,e)!==r})):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,(function(e){return 1===e.nodeType})))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(S(e).filter((function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var D,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||D,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,D=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,"parentNode")},parentsUntil:function(e,t,n){return h(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return h(e,"nextSibling")},prevAll:function(e){return h(e,"previousSibling")},nextUntil:function(e,t,n){return h(e,"nextSibling",n)},prevUntil:function(e,t,n){return h(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},(function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}}));var P=/[^\x20\t\r\n\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},S.each(e.match(P)||[],(function(e,t){n[t]=!0})),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();for(;++l<s.length;)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,(function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)}))}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,(function(e,t){for(var n;-1<(n=S.inArray(t,s,n));)s.splice(n,1),n<=l&&l--})),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred((function(r){S.each(o,(function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]]((function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)}))})),i=null})).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred((function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))})).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,(function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add((function(){i=r}),o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith})),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();for(;t--;)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout((function(){throw e}))};var F=S.Deferred();function B(){E.removeEventListener("DOMContentLoaded",B),C.removeEventListener("load",B),S.ready()}S.fn.ready=function(e){return F.then(e).catch((function(e){S.readyException(e)})),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener("DOMContentLoaded",B),C.addEventListener("load",B));var $=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,"ms-").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){t=a.length;for(;t--;)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each((function(){Q.set(this,n)})):$(this,(function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each((function(){Q.set(this,n,e)}))}),null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each((function(){Q.remove(this,e)}))}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,(function(){S.dequeue(e,t)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks("once memory").add((function(){Y.remove(e,[t+"queue",n])}))})}}),S.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each((function(){var e=S.queue(this,t,n);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)}))},dequeue:function(e){return this.each((function(){S.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";for(;a--;)(n=Y.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ie(e)&&"none"===S.css(e,"display")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,"")},u=s(),l=n&&n[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;for(;a--;)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Y.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ue[s]=u)))):"none"!==n&&(l[c]="none",Y.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ae(this)?S(this).show():S(this).hide()}))}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement("div")),(fe=E.createElement("input")).setAttribute("type","radio"),fe.setAttribute("checked","checked"),fe.setAttribute("name","t"),ce.appendChild(fe),y.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML="<option></option>",y.option=!!ce.lastChild;var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,y.option||(ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]);var me=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];for(;c--;)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;for(;o=p[d++];)if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n){c=0;for(;o=a[c++];)he.test(o.type||"")&&n.push(o)}return f}var be=/^([^.]*)(?:\.(.+)|)/;function we(){return!0}function Te(){return!1}function Ce(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function Ee(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ee(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Te;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each((function(){S.event.add(this,t,i,r,n)}))}function Se(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n&&n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,we)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return void 0!==S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(P)||[""]).length;for(;l--;)d=g=(s=be.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(P)||[""]).length;for(;l--;)if(d=g=(s=be.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;for(;o--;)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||S.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,"events")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;for(;(i=a[t++])&&!u.isPropagationStopped();){u.currentTarget=i.elem,n=0;for(;(o=i.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Se(t,"click",we),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Se(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Y.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?we:Te,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=we,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=we,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=we,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},(function(e,t){S.event.special[e]={setup:function(){return Se(this,e,Ce),!1},trigger:function(){return Se(this,e),!0},_default:function(){return!0},delegateType:t}})),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}})),S.fn.extend({on:function(e,t,n,r){return Ee(this,e,t,n,r)},one:function(e,t,n,r){return Ee(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Te),this.each((function(){S.event.remove(this,e,n,t)}))}});var ke=/<script|<style|<link/i,Ae=/checked\s*(?:[^=]|=\s*.checked.)/i,Ne=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function je(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function De(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function qe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function He(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!y.checkClone&&Ae.test(d))return n.each((function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),He(t,r,i,o)}));if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ve(e,"script"),De)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ve(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,qe),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Y.access(u,"globalEval")&&S.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):b(u.textContent.replace(Ne,""),u,l))}return n}function Oe(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],"input"===(l=(u=a[r]).nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Le(o[r],a[r]);else Le(e,c);return 0<(a=ve(c,"script")).length&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Oe(this,e,!0)},remove:function(e){return Oe(this,e)},text:function(e){return $(this,(function(e){return void 0===e?S.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return He(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||je(this,e).appendChild(e)}))},prepend:function(){return He(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=je(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return He(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return He(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return S.clone(this,e,t)}))},html:function(e){return $(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ke.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var n=[];return He(this,arguments,(function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ve(this)),t&&t.replaceChild(e,this))}),n)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}}));var Pe=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Re=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Me=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Ie=new RegExp(ne.join("|"),"i");function We(e,t,n){var r,i,o,a,s=e.style;return(n=n||Re(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=S.style(e,t)),!y.pixelBoxStyles()&&Pe.test(a)&&Ie.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Fe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),r=36===t(e.width),l.style.position="absolute",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement("div"),l=E.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===l.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement("table"),t=E.createElement("tr"),n=E.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,re.removeChild(e)),a}}))}();var Be=["Webkit","Moz","ms"],$e=E.createElement("div").style,_e={};function ze(e){return S.cssProps[e]||_e[e]||(e in $e?e:_e[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Be.length;n--;)if((e=Be[n]+t)in $e)return e}(e)||e)}var Ue=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ve={position:"absolute",visibility:"hidden",display:"block"},Ge={letterSpacing:"0",fontWeight:"400"};function Ye(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Qe(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?("content"===n&&(u-=S.css(e,"padding"+ne[a],!0,i)),"margin"!==n&&(u-=S.css(e,"border"+ne[a]+"Width",!0,i))):(u+=S.css(e,"padding"+ne[a],!0,i),"padding"!==n?u+=S.css(e,"border"+ne[a]+"Width",!0,i):s+=S.css(e,"border"+ne[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Je(e,t,n){var r=Re(e),i=(!y.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,r),o=i,a=We(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Pe.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&A(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===S.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===S.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Qe(e,t,n||(i?"border":"content"),o,r,a)+"px"}function Ke(e,t,n,r,i){return new Ke.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=We(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Xe.test(t),l=e.style;if(u||(t=ze(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"==(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Xe.test(t)||(t=ze(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=We(e,t,r)),"normal"===i&&t in Ge&&(i=Ge[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each(["height","width"],(function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ue.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Je(e,u,n):Me(e,Ve,(function(){return Je(e,u,n)}))},set:function(e,t,n){var r,i=Re(e),o=!y.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===S.css(e,"boxSizing",!1,i),s=n?Qe(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Qe(e,u,"border",!1,i)-.5)),s&&(r=te.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=S.css(e,u)),Ye(0,t,s)}}})),S.cssHooks.marginLeft=Fe(y.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(We(e,"marginLeft"))||e.getBoundingClientRect().left-Me(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),S.each({margin:"",padding:"",border:"Width"},(function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(S.cssHooks[i+o].set=Ye)})),S.fn.extend({css:function(e,t){return $(this,(function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Re(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)}),e,t,1<arguments.length)}}),((S.Tween=Ke).prototype={constructor:Ke,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=Ke.propHooks[this.prop];return e&&e.get?e.get(this):Ke.propHooks._default.get(this)},run:function(e){var t,n=Ke.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ke.propHooks._default.set(this),this}}).init.prototype=Ke.prototype,(Ke.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[ze(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Ke.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=Ke.prototype.init,S.fx.step={};var Ze,et,tt,nt,rt=/^(?:toggle|show|hide)$/,it=/queueHooks$/;function ot(){et&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(ot):C.setTimeout(ot,S.fx.interval),S.fx.tick())}function at(){return C.setTimeout((function(){Ze=void 0})),Ze=Date.now()}function st(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ne[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ut(e,t,n){for(var r,i=(lt.tweeners[t]||[]).concat(lt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function lt(o,e,t){var n,a,r=0,i=lt.prefilters.length,s=S.Deferred().always((function(){delete u.elem})),u=function(){if(a)return!1;for(var e=Ze||at(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:Ze||at(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=lt.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ut,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(lt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],lt.tweeners[n]=lt.tweeners[n]||[],lt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,"fxshow");for(r in n.queue||(null==(a=S._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always((function(){p.always((function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()}))}))),t)if(i=t[r],rt.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,"display")),"none"===(c=S.css(e,"display"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,"display"),le([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===S.css(e,"float")&&(u||(p.done((function(){h.display=l})),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always((function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}))),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Y.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&le([e],!0),p.done((function(){for(r in g||le([e]),Y.remove(e,"fxshow"),d)S.style(e,r,d[r])}))),u=ut(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?lt.prefilters.unshift(e):lt.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=lt(this,S.extend({},t),o);(i||Y.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each((function(){var e=!0,t=null!=i&&i+"queueHooks",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&it.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)}))},finish:function(a){return!1!==a&&(a=a||"fx"),this.each((function(){var e,t=Y.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish}))}}),S.each(["toggle","show","hide"],(function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(st(r,!0),e,t,n)}})),S.each({slideDown:st("show"),slideUp:st("hide"),slideToggle:st("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}})),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(Ze=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),Ze=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){et||(et=!0,ot())},S.fx.stop=function(){et=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||"fx",this.queue(e,(function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}}))},tt=E.createElement("input"),nt=E.createElement("select").appendChild(E.createElement("option")),tt.type="checkbox",y.checkOn=""!==tt.value,y.optSelected=nt.selected,(tt=E.createElement("input")).value="t",tt.type="radio",y.radioValue="t"===tt.value;var ct,ft=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return $(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each((function(){S.removeAttr(this,e)}))}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?ct:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),ct={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),(function(e,t){var a=ft[t]||S.find.attr;ft[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=ft[o],ft[o]=r,r=null!=a(e,t,n)?o:null,ft[o]=i),r}}));var pt=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;function ht(e){return(e.match(P)||[]).join(" ")}function gt(e){return e.getAttribute&&e.getAttribute("class")||""}function vt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return $(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each((function(){delete this[S.propFix[e]||e]}))}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):pt.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),y.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){S.propFix[this.toLowerCase()]=this})),S.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each((function(e){S(this).addClass(t.call(this,e,gt(this)))}));if((e=vt(t)).length)for(;n=this[u++];)if(i=gt(n),r=1===n.nodeType&&" "+ht(i)+" "){a=0;for(;o=e[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each((function(e){S(this).removeClass(t.call(this,e,gt(this)))}));if(!arguments.length)return this.attr("class","");if((e=vt(t)).length)for(;n=this[u++];)if(i=gt(n),r=1===n.nodeType&&" "+ht(i)+" "){a=0;for(;o=e[a++];)for(;-1<r.indexOf(" "+o+" ");)r=r.replace(" "+o+" "," ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each((function(e){S(this).toggleClass(i.call(this,e,gt(this),t),t)})):this.each((function(){var e,t,n,r;if(a){t=0,n=S(this),r=vt(i);for(;e=r[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&"boolean"!==o||((e=gt(this))&&Y.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Y.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,r=0;t=" "+e+" ";for(;n=this[r++];)if(1===n.nodeType&&-1<(" "+ht(gt(n))+" ").indexOf(t))return!0;return!1}});var yt=/\r/g;S.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each((function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,S(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=S.map(t,(function(e){return null==e?"":e+""}))),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))}))):t?(r=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(yt,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:ht(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=S.makeArray(t),a=i.length;a--;)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],(function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},y.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),y.focusin="onfocusin"in C;var mt=/^(?:focusinfocus|focusoutblur)$/,xt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!mt.test(d+S.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[S.expando]?e:new S.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,mt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;for(;(o=p[i++])&&!e.isPropagationStopped();)f=o,e.type=1<i?s:c.bindType||d,(l=(Y.get(o,"events")||Object.create(null))[e.type]&&Y.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&V(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!V(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,xt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,xt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each((function(){S.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),y.focusin||S.each({focus:"focusin",blur:"focusout"},(function(n,r){var i=function(e){S.event.simulate(r,e.target,S.event.fix(e))};S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}}));var bt=C.location,wt={guid:Date.now()},Tt=/\?/;S.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||S.error("Invalid XML: "+(n?S.map(n.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var Ct=/\[\]$/,Et=/\r?\n/g,St=/^(?:submit|button|image|reset|file)$/i,kt=/^(?:input|select|textarea|keygen)/i;function At(n,e,r,i){var t;if(Array.isArray(e))S.each(e,(function(e,t){r||Ct.test(n)?i(n,t):At(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)}));else if(r||"object"!==w(e))i(n,e);else for(t in e)At(n+"["+t+"]",e[t],r,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,(function(){i(this.name,this.value)}));else for(n in e)At(n,e[n],t,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&kt.test(this.nodeName)&&!St.test(e)&&(this.checked||!pe.test(e))})).map((function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,(function(e){return{name:t.name,value:e.replace(Et,"\r\n")}})):{name:t.name,value:n.replace(Et,"\r\n")}})).get()}});var Nt=/%20/g,jt=/#.*$/,Dt=/([?&])_=[^&]*/,qt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Lt=/^(?:GET|HEAD)$/,Ht=/^\/\//,Ot={},Pt={},Rt="*/".concat("*"),Mt=E.createElement("a");function It(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(P)||[];if(m(t))for(;n=i[r++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Wt(t,i,o,a){var s={},u=t===Pt;function l(e){var r;return s[e]=!0,S.each(t[e]||[],(function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)})),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function Ft(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Mt.href=bt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:bt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(bt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ft(Ft(e,S.ajaxSettings),t):Ft(S.ajaxSettings,e)},ajaxPrefilter:It(Ot),ajaxTransport:It(Pt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=S.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?S(y):S.event,x=S.Deferred(),b=S.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};for(;t=qt.exec(p);)n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||bt.href)+"").replace(Ht,bt.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(P)||[""],null==v.crossDomain){r=E.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Mt.protocol+"//"+Mt.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=S.param(v.data,v.traditional)),Wt(Ot,v,t,T),h)return T;for(i in(g=S.event&&v.global)&&0==S.active++&&S.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Lt.test(v.type),f=v.url.replace(jt,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Nt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(Tt.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Dt,"$1"),o=(Tt.test(f)?"&":"?")+"_="+wt.guid+++o),v.url=f+o),v.ifModified&&(S.lastModified[f]&&T.setRequestHeader("If-Modified-Since",S.lastModified[f]),S.etag[f]&&T.setRequestHeader("If-None-Match",S.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+Rt+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Wt(Pt,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout((function(){T.abort("timeout")}),v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){for(var r,i,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<S.inArray("script",v.dataTypes)&&S.inArray("json",v.dataTypes)<0&&(v.converters["text script"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();for(;o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(S.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(S.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--S.active||S.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],(function(e,i){S[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}})),S.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(n){return m(n)?this.each((function(e){S(this).wrapInner(n.call(this,e))})):this.each((function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)}))},wrap:function(t){var n=m(t);return this.each((function(e){S(this).wrapAll(n?t.call(this,e):t)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){S(this).replaceWith(this.childNodes)})),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var Bt={0:200,1223:204},$t=S.ajaxSettings.xhr();y.cors=!!$t&&"withCredentials"in $t,y.ajax=$t=!!$t,S.ajaxTransport((function(i){var o,a;if(y.cors||$t&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Bt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout((function(){o&&a()}))},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}})),S.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),S.ajaxTransport("script",(function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}}));var _t,zt=[],Ut=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=zt.pop()||S.expando+"_"+wt.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",(function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Ut.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ut.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Ut,"$1"+r):!1!==e.jsonp&&(e.url+=(Tt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||S.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always((function(){void 0===i?S(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,zt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0})),"script"})),y.createHTMLDocument=((_t=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===_t.childNodes.length),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=ht(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&S.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done((function(e){o=arguments,a.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)})).always(n&&function(e,t){a.each((function(){n.apply(this,o||[e.responseText,t,e])}))}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,(function(e){return t===e.elem})).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=S.css(e,"position"),c=S(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=S.css(e,"top"),u=S.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){S.offset.setOffset(this,t,e)}));var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;for(;e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(r,"marginTop",!0),left:t.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===S.css(e,"position");)e=e.offsetParent;return e||re}))}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,i){var o="pageYOffset"===i;S.fn[t]=function(e){return $(this,(function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n}),t,e,arguments.length)}})),S.each(["top","left"],(function(e,n){S.cssHooks[n]=Fe(y.pixelPosition,(function(e,t){if(t)return t=We(e,n),Pe.test(t)?S(e).position()[n]+"px":t}))})),S.each({Height:"height",Width:"width"},(function(a,s){S.each({padding:"inner"+a,content:s,"":"outer"+a},(function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return $(this,(function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)}),s,n?e:void 0,n)}}))})),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){S.fn[t]=function(e){return this.on(t,e)}})),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}));var Xt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=x,S.camelCase=X,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Xt,"")},"function"==typeof define&&define.amd&&define("jquery",[],(function(){return S}));var Vt=C.jQuery,Gt=C.$;return S.noConflict=function(e){return C.$===S&&(C.$=Gt),e&&C.jQuery===S&&(C.jQuery=Vt),S},void 0===e&&(C.jQuery=C.$=S),S}));
/*!
  * Bootstrap v4.3.1 (https://getbootstrap.com/)
  * Copyright 2011-2019 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
  */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("jquery")):"function"==typeof define&&define.amd?define(["exports","jquery"],e):e((t=t||self).bootstrap={},t.jQuery)}(this,(function(t,p){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function l(o){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},e=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(r).filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})))),e.forEach((function(t){var e,n,i;e=o,i=r[n=t],n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i}))}return o}p=p&&p.hasOwnProperty("default")?p.default:p;var e="transitionend";var m={TRANSITION_END:"bsTransitionEnd",getUID:function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");if(!e||"#"===e){var n=t.getAttribute("href");e=n&&"#"!==n?n.trim():""}try{return document.querySelector(e)?e:null}catch(t){return null}},getTransitionDurationFromElement:function(t){if(!t)return 0;var e=p(t).css("transition-duration"),n=p(t).css("transition-delay"),i=parseFloat(e),o=parseFloat(n);return i||o?(e=e.split(",")[0],n=n.split(",")[0],1e3*(parseFloat(e)+parseFloat(n))):0},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(t){p(t).trigger(e)},supportsTransitionEnd:function(){return Boolean(e)},isElement:function(t){return(t[0]||t).nodeType},typeCheckConfig:function(t,e,n){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var o=n[i],r=e[i],s=r&&m.isElement(r)?"element":(a=r,{}.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase());if(!new RegExp(o).test(s))throw new Error(t.toUpperCase()+': Option "'+i+'" provided type "'+s+'" but expected type "'+o+'".')}var a},findShadowRoot:function(t){if(!document.documentElement.attachShadow)return null;if("function"!=typeof t.getRootNode)return t instanceof ShadowRoot?t:t.parentNode?m.findShadowRoot(t.parentNode):null;var e=t.getRootNode();return e instanceof ShadowRoot?e:null}};p.fn.emulateTransitionEnd=function(t){var e=this,n=!1;return p(this).one(m.TRANSITION_END,(function(){n=!0})),setTimeout((function(){n||m.triggerTransitionEnd(e)}),t),this},p.event.special[m.TRANSITION_END]={bindType:e,delegateType:e,handle:function(t){if(p(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}};var o="alert",r="bs.alert",a="."+r,c=p.fn[o],h={CLOSE:"close"+a,CLOSED:"closed"+a,CLICK_DATA_API:"click"+a+".data-api"},g=function(){function i(t){this._element=t}var t=i.prototype;return t.close=function(t){var e=this._element;t&&(e=this._getRootElement(t)),this._triggerCloseEvent(e).isDefaultPrevented()||this._removeElement(e)},t.dispose=function(){p.removeData(this._element,r),this._element=null},t._getRootElement=function(t){var e=m.getSelectorFromElement(t),n=!1;return e&&(n=document.querySelector(e)),n||(n=p(t).closest(".alert")[0]),n},t._triggerCloseEvent=function(t){var e=p.Event(h.CLOSE);return p(t).trigger(e),e},t._removeElement=function(e){var n=this;if(p(e).removeClass("show"),p(e).hasClass("fade")){var t=m.getTransitionDurationFromElement(e);p(e).one(m.TRANSITION_END,(function(t){return n._destroyElement(e,t)})).emulateTransitionEnd(t)}else this._destroyElement(e)},t._destroyElement=function(t){p(t).detach().trigger(h.CLOSED).remove()},i._jQueryInterface=function(n){return this.each((function(){var t=p(this),e=t.data(r);e||(e=new i(this),t.data(r,e)),"close"===n&&e[n](this)}))},i._handleDismiss=function(e){return function(t){t&&t.preventDefault(),e.close(this)}},s(i,null,[{key:"VERSION",get:function(){return"4.3.1"}}]),i}();p(document).on(h.CLICK_DATA_API,'[data-dismiss="alert"]',g._handleDismiss(new g)),p.fn[o]=g._jQueryInterface,p.fn[o].Constructor=g,p.fn[o].noConflict=function(){return p.fn[o]=c,g._jQueryInterface};var _="button",v="bs.button",y="."+v,E=".data-api",b=p.fn[_],w="active",S='[data-toggle^="button"]',O=".btn",N={CLICK_DATA_API:"click"+y+E,FOCUS_BLUR_DATA_API:"focus"+y+E+" blur"+y+E},k=function(){function n(t){this._element=t}var t=n.prototype;return t.toggle=function(){var t=!0,e=!0,n=p(this._element).closest('[data-toggle="buttons"]')[0];if(n){var i=this._element.querySelector('input:not([type="hidden"])');if(i){if("radio"===i.type)if(i.checked&&this._element.classList.contains(w))t=!1;else{var o=n.querySelector(".active");o&&p(o).removeClass(w)}if(t){if(i.hasAttribute("disabled")||n.hasAttribute("disabled")||i.classList.contains("disabled")||n.classList.contains("disabled"))return;i.checked=!this._element.classList.contains(w),p(i).trigger("change")}i.focus(),e=!1}}e&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(w)),t&&p(this._element).toggleClass(w)},t.dispose=function(){p.removeData(this._element,v),this._element=null},n._jQueryInterface=function(e){return this.each((function(){var t=p(this).data(v);t||(t=new n(this),p(this).data(v,t)),"toggle"===e&&t[e]()}))},s(n,null,[{key:"VERSION",get:function(){return"4.3.1"}}]),n}();p(document).on(N.CLICK_DATA_API,S,(function(t){t.preventDefault();var e=t.target;p(e).hasClass("btn")||(e=p(e).closest(O)),k._jQueryInterface.call(p(e),"toggle")})).on(N.FOCUS_BLUR_DATA_API,S,(function(t){var e=p(t.target).closest(O)[0];p(e).toggleClass("focus",/^focus(in)?$/.test(t.type))})),p.fn[_]=k._jQueryInterface,p.fn[_].Constructor=k,p.fn[_].noConflict=function(){return p.fn[_]=b,k._jQueryInterface};var L="carousel",x="bs.carousel",P="."+x,H=".data-api",j=p.fn[L],R={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},F={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},M="next",W="prev",q={SLIDE:"slide"+P,SLID:"slid"+P,KEYDOWN:"keydown"+P,MOUSEENTER:"mouseenter"+P,MOUSELEAVE:"mouseleave"+P,TOUCHSTART:"touchstart"+P,TOUCHMOVE:"touchmove"+P,TOUCHEND:"touchend"+P,POINTERDOWN:"pointerdown"+P,POINTERUP:"pointerup"+P,DRAG_START:"dragstart"+P,LOAD_DATA_API:"load"+P+H,CLICK_DATA_API:"click"+P+H},Q="active",Z=".active.carousel-item",it=".carousel-indicators",st={TOUCH:"touch",PEN:"pen"},at=function(){function r(t,e){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(e),this._element=t,this._indicatorsElement=this._element.querySelector(it),this._touchSupported="ontouchstart"in document.documentElement||0<navigator.maxTouchPoints,this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var t=r.prototype;return t.next=function(){this._isSliding||this._slide(M)},t.nextWhenVisible=function(){!document.hidden&&p(this._element).is(":visible")&&"hidden"!==p(this._element).css("visibility")&&this.next()},t.prev=function(){this._isSliding||this._slide(W)},t.pause=function(t){t||(this._isPaused=!0),this._element.querySelector(".carousel-item-next, .carousel-item-prev")&&(m.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},t.cycle=function(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},t.to=function(t){var e=this;this._activeElement=this._element.querySelector(Z);var n=this._getItemIndex(this._activeElement);if(!(t>this._items.length-1||t<0))if(this._isSliding)p(this._element).one(q.SLID,(function(){return e.to(t)}));else{if(n===t)return this.pause(),void this.cycle();var i=n<t?M:W;this._slide(i,this._items[t])}},t.dispose=function(){p(this._element).off(P),p.removeData(this._element,x),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},t._getConfig=function(t){return t=l({},R,t),m.typeCheckConfig(L,t,F),t},t._handleSwipe=function(){var t=Math.abs(this.touchDeltaX);if(!(t<=40)){var e=t/this.touchDeltaX;0<e&&this.prev(),e<0&&this.next()}},t._addEventListeners=function(){var e=this;this._config.keyboard&&p(this._element).on(q.KEYDOWN,(function(t){return e._keydown(t)})),"hover"===this._config.pause&&p(this._element).on(q.MOUSEENTER,(function(t){return e.pause(t)})).on(q.MOUSELEAVE,(function(t){return e.cycle(t)})),this._config.touch&&this._addTouchEventListeners()},t._addTouchEventListeners=function(){var n=this;if(this._touchSupported){var e=function(t){n._pointerEvent&&st[t.originalEvent.pointerType.toUpperCase()]?n.touchStartX=t.originalEvent.clientX:n._pointerEvent||(n.touchStartX=t.originalEvent.touches[0].clientX)},i=function(t){n._pointerEvent&&st[t.originalEvent.pointerType.toUpperCase()]&&(n.touchDeltaX=t.originalEvent.clientX-n.touchStartX),n._handleSwipe(),"hover"===n._config.pause&&(n.pause(),n.touchTimeout&&clearTimeout(n.touchTimeout),n.touchTimeout=setTimeout((function(t){return n.cycle(t)}),500+n._config.interval))};p(this._element.querySelectorAll(".carousel-item img")).on(q.DRAG_START,(function(t){return t.preventDefault()})),this._pointerEvent?(p(this._element).on(q.POINTERDOWN,(function(t){return e(t)})),p(this._element).on(q.POINTERUP,(function(t){return i(t)})),this._element.classList.add("pointer-event")):(p(this._element).on(q.TOUCHSTART,(function(t){return e(t)})),p(this._element).on(q.TOUCHMOVE,(function(t){var e;(e=t).originalEvent.touches&&1<e.originalEvent.touches.length?n.touchDeltaX=0:n.touchDeltaX=e.originalEvent.touches[0].clientX-n.touchStartX})),p(this._element).on(q.TOUCHEND,(function(t){return i(t)})))}},t._keydown=function(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.which){case 37:t.preventDefault(),this.prev();break;case 39:t.preventDefault(),this.next()}},t._getItemIndex=function(t){return this._items=t&&t.parentNode?[].slice.call(t.parentNode.querySelectorAll(".carousel-item")):[],this._items.indexOf(t)},t._getItemByDirection=function(t,e){var n=t===M,i=t===W,o=this._getItemIndex(e),r=this._items.length-1;if((i&&0===o||n&&o===r)&&!this._config.wrap)return e;var s=(o+(t===W?-1:1))%this._items.length;return-1===s?this._items[this._items.length-1]:this._items[s]},t._triggerSlideEvent=function(t,e){var n=this._getItemIndex(t),i=this._getItemIndex(this._element.querySelector(Z)),o=p.Event(q.SLIDE,{relatedTarget:t,direction:e,from:i,to:n});return p(this._element).trigger(o),o},t._setActiveIndicatorElement=function(t){if(this._indicatorsElement){var e=[].slice.call(this._indicatorsElement.querySelectorAll(".active"));p(e).removeClass(Q);var n=this._indicatorsElement.children[this._getItemIndex(t)];n&&p(n).addClass(Q)}},t._slide=function(t,e){var n,i,o,r=this,s=this._element.querySelector(Z),a=this._getItemIndex(s),l=e||s&&this._getItemByDirection(t,s),c=this._getItemIndex(l),h=Boolean(this._interval);if(o=t===M?(n="carousel-item-left",i="carousel-item-next","left"):(n="carousel-item-right",i="carousel-item-prev","right"),l&&p(l).hasClass(Q))this._isSliding=!1;else if(!this._triggerSlideEvent(l,o).isDefaultPrevented()&&s&&l){this._isSliding=!0,h&&this.pause(),this._setActiveIndicatorElement(l);var u=p.Event(q.SLID,{relatedTarget:l,direction:o,from:a,to:c});if(p(this._element).hasClass("slide")){p(l).addClass(i),m.reflow(l),p(s).addClass(n),p(l).addClass(n);var f=parseInt(l.getAttribute("data-interval"),10);this._config.interval=f?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,f):this._config.defaultInterval||this._config.interval;var d=m.getTransitionDurationFromElement(s);p(s).one(m.TRANSITION_END,(function(){p(l).removeClass(n+" "+i).addClass(Q),p(s).removeClass(Q+" "+i+" "+n),r._isSliding=!1,setTimeout((function(){return p(r._element).trigger(u)}),0)})).emulateTransitionEnd(d)}else p(s).removeClass(Q),p(l).addClass(Q),this._isSliding=!1,p(this._element).trigger(u);h&&this.cycle()}},r._jQueryInterface=function(i){return this.each((function(){var t=p(this).data(x),e=l({},R,p(this).data());"object"==typeof i&&(e=l({},e,i));var n="string"==typeof i?i:e.slide;if(t||(t=new r(this,e),p(this).data(x,t)),"number"==typeof i)t.to(i);else if("string"==typeof n){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n]()}else e.interval&&e.ride&&(t.pause(),t.cycle())}))},r._dataApiClickHandler=function(t){var e=m.getSelectorFromElement(this);if(e){var n=p(e)[0];if(n&&p(n).hasClass("carousel")){var i=l({},p(n).data(),p(this).data()),o=this.getAttribute("data-slide-to");o&&(i.interval=!1),r._jQueryInterface.call(p(n),i),o&&p(n).data(x).to(o),t.preventDefault()}}},s(r,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return R}}]),r}();p(document).on(q.CLICK_DATA_API,"[data-slide], [data-slide-to]",at._dataApiClickHandler),p(window).on(q.LOAD_DATA_API,(function(){for(var t=[].slice.call(document.querySelectorAll('[data-ride="carousel"]')),e=0,n=t.length;e<n;e++){var i=p(t[e]);at._jQueryInterface.call(i,i.data())}})),p.fn[L]=at._jQueryInterface,p.fn[L].Constructor=at,p.fn[L].noConflict=function(){return p.fn[L]=j,at._jQueryInterface};var lt="collapse",ct="bs.collapse",ht="."+ct,ut=p.fn[lt],ft={toggle:!0,parent:""},dt={toggle:"boolean",parent:"(string|element)"},pt={SHOW:"show"+ht,SHOWN:"shown"+ht,HIDE:"hide"+ht,HIDDEN:"hidden"+ht,CLICK_DATA_API:"click"+ht+".data-api"},mt="show",gt="collapse",_t="collapsing",vt="collapsed",wt='[data-toggle="collapse"]',Ct=function(){function a(e,t){this._isTransitioning=!1,this._element=e,this._config=this._getConfig(t),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'));for(var n=[].slice.call(document.querySelectorAll(wt)),i=0,o=n.length;i<o;i++){var r=n[i],s=m.getSelectorFromElement(r),a=[].slice.call(document.querySelectorAll(s)).filter((function(t){return t===e}));null!==s&&0<a.length&&(this._selector=s,this._triggerArray.push(r))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var t=a.prototype;return t.toggle=function(){p(this._element).hasClass(mt)?this.hide():this.show()},t.show=function(){var t,e,n=this;if(!(this._isTransitioning||p(this._element).hasClass(mt)||(this._parent&&0===(t=[].slice.call(this._parent.querySelectorAll(".show, .collapsing")).filter((function(t){return"string"==typeof n._config.parent?t.getAttribute("data-parent")===n._config.parent:t.classList.contains(gt)}))).length&&(t=null),t&&(e=p(t).not(this._selector).data(ct))&&e._isTransitioning))){var i=p.Event(pt.SHOW);if(p(this._element).trigger(i),!i.isDefaultPrevented()){t&&(a._jQueryInterface.call(p(t).not(this._selector),"hide"),e||p(t).data(ct,null));var o=this._getDimension();p(this._element).removeClass(gt).addClass(_t),this._element.style[o]=0,this._triggerArray.length&&p(this._triggerArray).removeClass(vt).attr("aria-expanded",!0),this.setTransitioning(!0);var r="scroll"+(o[0].toUpperCase()+o.slice(1)),s=m.getTransitionDurationFromElement(this._element);p(this._element).one(m.TRANSITION_END,(function(){p(n._element).removeClass(_t).addClass(gt).addClass(mt),n._element.style[o]="",n.setTransitioning(!1),p(n._element).trigger(pt.SHOWN)})).emulateTransitionEnd(s),this._element.style[o]=this._element[r]+"px"}}},t.hide=function(){var t=this;if(!this._isTransitioning&&p(this._element).hasClass(mt)){var e=p.Event(pt.HIDE);if(p(this._element).trigger(e),!e.isDefaultPrevented()){var n=this._getDimension();this._element.style[n]=this._element.getBoundingClientRect()[n]+"px",m.reflow(this._element),p(this._element).addClass(_t).removeClass(gt).removeClass(mt);var i=this._triggerArray.length;if(0<i)for(var o=0;o<i;o++){var r=this._triggerArray[o],s=m.getSelectorFromElement(r);null!==s&&(p([].slice.call(document.querySelectorAll(s))).hasClass(mt)||p(r).addClass(vt).attr("aria-expanded",!1))}this.setTransitioning(!0);this._element.style[n]="";var a=m.getTransitionDurationFromElement(this._element);p(this._element).one(m.TRANSITION_END,(function(){t.setTransitioning(!1),p(t._element).removeClass(_t).addClass(gt).trigger(pt.HIDDEN)})).emulateTransitionEnd(a)}}},t.setTransitioning=function(t){this._isTransitioning=t},t.dispose=function(){p.removeData(this._element,ct),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},t._getConfig=function(t){return(t=l({},ft,t)).toggle=Boolean(t.toggle),m.typeCheckConfig(lt,t,dt),t},t._getDimension=function(){return p(this._element).hasClass("width")?"width":"height"},t._getParent=function(){var t,n=this;m.isElement(this._config.parent)?(t=this._config.parent,void 0!==this._config.parent.jquery&&(t=this._config.parent[0])):t=document.querySelector(this._config.parent);var e='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',i=[].slice.call(t.querySelectorAll(e));return p(i).each((function(t,e){n._addAriaAndCollapsedClass(a._getTargetFromElement(e),[e])})),t},t._addAriaAndCollapsedClass=function(t,e){var n=p(t).hasClass(mt);e.length&&p(e).toggleClass(vt,!n).attr("aria-expanded",n)},a._getTargetFromElement=function(t){var e=m.getSelectorFromElement(t);return e?document.querySelector(e):null},a._jQueryInterface=function(i){return this.each((function(){var t=p(this),e=t.data(ct),n=l({},ft,t.data(),"object"==typeof i&&i?i:{});if(!e&&n.toggle&&/show|hide/.test(i)&&(n.toggle=!1),e||(e=new a(this,n),t.data(ct,e)),"string"==typeof i){if(void 0===e[i])throw new TypeError('No method named "'+i+'"');e[i]()}}))},s(a,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return ft}}]),a}();p(document).on(pt.CLICK_DATA_API,wt,(function(t){"A"===t.currentTarget.tagName&&t.preventDefault();var n=p(this),e=m.getSelectorFromElement(this),i=[].slice.call(document.querySelectorAll(e));p(i).each((function(){var t=p(this),e=t.data(ct)?"toggle":n.data();Ct._jQueryInterface.call(t,e)}))})),p.fn[lt]=Ct._jQueryInterface,p.fn[lt].Constructor=Ct,p.fn[lt].noConflict=function(){return p.fn[lt]=ut,Ct._jQueryInterface};for(var Tt="undefined"!=typeof window&&"undefined"!=typeof document,St=["Edge","Trident","Firefox"],Dt=0,It=0;It<St.length;It+=1)if(Tt&&0<=navigator.userAgent.indexOf(St[It])){Dt=1;break}var At=Tt&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then((function(){e=!1,t()})))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout((function(){e=!1,t()}),Dt))}};function Ot(t){return t&&"[object Function]"==={}.toString.call(t)}function Nt(t,e){if(1!==t.nodeType)return[];var n=t.ownerDocument.defaultView.getComputedStyle(t,null);return e?n[e]:n}function kt(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function Lt(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=Nt(t),n=e.overflow,i=e.overflowX,o=e.overflowY;return/(auto|scroll|overlay)/.test(n+o+i)?t:Lt(kt(t))}var xt=Tt&&!(!window.MSInputMethodContext||!document.documentMode),Pt=Tt&&/MSIE 10/.test(navigator.userAgent);function Ht(t){return 11===t?xt:10===t?Pt:xt||Pt}function jt(t){if(!t)return document.documentElement;for(var e=Ht(10)?document.body:null,n=t.offsetParent||null;n===e&&t.nextElementSibling;)n=(t=t.nextElementSibling).offsetParent;var i=n&&n.nodeName;return i&&"BODY"!==i&&"HTML"!==i?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===Nt(n,"position")?jt(n):n:t?t.ownerDocument.documentElement:document.documentElement}function Rt(t){return null!==t.parentNode?Rt(t.parentNode):t}function Ft(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,i=n?t:e,o=n?e:t,r=document.createRange();r.setStart(i,0),r.setEnd(o,0);var s,a,l=r.commonAncestorContainer;if(t!==l&&e!==l||i.contains(o))return"BODY"===(a=(s=l).nodeName)||"HTML"!==a&&jt(s.firstElementChild)!==s?jt(l):l;var c=Rt(t);return c.host?Ft(c.host,e):Ft(t,Rt(e).host)}function Mt(t){var e="top"===(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",n=t.nodeName;if("BODY"!==n&&"HTML"!==n)return t[e];var i=t.ownerDocument.documentElement;return(t.ownerDocument.scrollingElement||i)[e]}function Wt(t,e){var n="x"===e?"Left":"Top",i="Left"===n?"Right":"Bottom";return parseFloat(t["border"+n+"Width"],10)+parseFloat(t["border"+i+"Width"],10)}function Ut(t,e,n,i){return Math.max(e["offset"+t],e["scroll"+t],n["client"+t],n["offset"+t],n["scroll"+t],Ht(10)?parseInt(n["offset"+t])+parseInt(i["margin"+("Height"===t?"Top":"Left")])+parseInt(i["margin"+("Height"===t?"Bottom":"Right")]):0)}function Bt(t){var e=t.body,n=t.documentElement,i=Ht(10)&&getComputedStyle(n);return{height:Ut("Height",e,n,i),width:Ut("Width",e,n,i)}}var qt=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),Kt=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},Qt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function Vt(t){return Qt({},t,{right:t.left+t.width,bottom:t.top+t.height})}function Yt(t){var e={};try{if(Ht(10)){e=t.getBoundingClientRect();var n=Mt(t,"top"),i=Mt(t,"left");e.top+=n,e.left+=i,e.bottom+=n,e.right+=i}else e=t.getBoundingClientRect()}catch(t){}var o={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},r="HTML"===t.nodeName?Bt(t.ownerDocument):{},s=r.width||t.clientWidth||o.right-o.left,a=r.height||t.clientHeight||o.bottom-o.top,l=t.offsetWidth-s,c=t.offsetHeight-a;if(l||c){var h=Nt(t);l-=Wt(h,"x"),c-=Wt(h,"y"),o.width-=l,o.height-=c}return Vt(o)}function zt(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=Ht(10),o="HTML"===e.nodeName,r=Yt(t),s=Yt(e),a=Lt(t),l=Nt(e),c=parseFloat(l.borderTopWidth,10),h=parseFloat(l.borderLeftWidth,10);n&&o&&(s.top=Math.max(s.top,0),s.left=Math.max(s.left,0));var u=Vt({top:r.top-s.top-c,left:r.left-s.left-h,width:r.width,height:r.height});if(u.marginTop=0,u.marginLeft=0,!i&&o){var f=parseFloat(l.marginTop,10),d=parseFloat(l.marginLeft,10);u.top-=c-f,u.bottom-=c-f,u.left-=h-d,u.right-=h-d,u.marginTop=f,u.marginLeft=d}return(i&&!n?e.contains(a):e===a&&"BODY"!==a.nodeName)&&(u=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=Mt(e,"top"),o=Mt(e,"left"),r=n?-1:1;return t.top+=i*r,t.bottom+=i*r,t.left+=o*r,t.right+=o*r,t}(u,e)),u}function Xt(t){if(!t||!t.parentElement||Ht())return document.documentElement;for(var e=t.parentElement;e&&"none"===Nt(e,"transform");)e=e.parentElement;return e||document.documentElement}function Gt(t,e,n,i){var o=4<arguments.length&&void 0!==arguments[4]&&arguments[4],r={top:0,left:0},s=o?Xt(t):Ft(t,e);if("viewport"===i)r=function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=t.ownerDocument.documentElement,i=zt(t,n),o=Math.max(n.clientWidth,window.innerWidth||0),r=Math.max(n.clientHeight,window.innerHeight||0),s=e?0:Mt(n),a=e?0:Mt(n,"left");return Vt({top:s-i.top+i.marginTop,left:a-i.left+i.marginLeft,width:o,height:r})}(s,o);else{var a=void 0;"scrollParent"===i?"BODY"===(a=Lt(kt(e))).nodeName&&(a=t.ownerDocument.documentElement):a="window"===i?t.ownerDocument.documentElement:i;var l=zt(a,s,o);if("HTML"!==a.nodeName||function t(e){var n=e.nodeName;if("BODY"===n||"HTML"===n)return!1;if("fixed"===Nt(e,"position"))return!0;var i=kt(e);return!!i&&t(i)}(s))r=l;else{var c=Bt(t.ownerDocument),h=c.height,u=c.width;r.top+=l.top-l.marginTop,r.bottom=h+l.top,r.left+=l.left-l.marginLeft,r.right=u+l.left}}var f="number"==typeof(n=n||0);return r.left+=f?n:n.left||0,r.top+=f?n:n.top||0,r.right-=f?n:n.right||0,r.bottom-=f?n:n.bottom||0,r}function $t(t,e,i,n,o){var r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===t.indexOf("auto"))return t;var s=Gt(i,n,r,o),a={top:{width:s.width,height:e.top-s.top},right:{width:s.right-e.right,height:s.height},bottom:{width:s.width,height:s.bottom-e.bottom},left:{width:e.left-s.left,height:s.height}},l=Object.keys(a).map((function(t){return Qt({key:t},a[t],{area:(e=a[t],e.width*e.height)});var e})).sort((function(t,e){return e.area-t.area})),c=l.filter((function(t){var e=t.width,n=t.height;return e>=i.clientWidth&&n>=i.clientHeight})),h=0<c.length?c[0].key:l[0].key,u=t.split("-")[1];return h+(u?"-"+u:"")}function Jt(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return zt(n,i?Xt(e):Ft(e,n),i)}function Zt(t){var e=t.ownerDocument.defaultView.getComputedStyle(t),n=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),i=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:t.offsetWidth+i,height:t.offsetHeight+n}}function te(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,(function(t){return e[t]}))}function ee(t,e,n){n=n.split("-")[0];var i=Zt(t),o={width:i.width,height:i.height},r=-1!==["right","left"].indexOf(n),s=r?"top":"left",a=r?"left":"top",l=r?"height":"width",c=r?"width":"height";return o[s]=e[s]+e[l]/2-i[l]/2,o[a]=n===a?e[a]-i[c]:e[te(a)],o}function ne(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function ie(t,n,e){return(void 0===e?t:t.slice(0,function(t,e,n){if(Array.prototype.findIndex)return t.findIndex((function(t){return t[e]===n}));var i=ne(t,(function(t){return t[e]===n}));return t.indexOf(i)}(t,"name",e))).forEach((function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var e=t.function||t.fn;t.enabled&&Ot(e)&&(n.offsets.popper=Vt(n.offsets.popper),n.offsets.reference=Vt(n.offsets.reference),n=e(n,t))})),n}function oe(t,n){return t.some((function(t){var e=t.name;return t.enabled&&e===n}))}function re(t){for(var e=[!1,"ms","Webkit","Moz","O"],n=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<e.length;i++){var o=e[i],r=o?""+o+n:t;if(void 0!==document.body.style[r])return r}return null}function se(t){var e=t.ownerDocument;return e?e.defaultView:window}function le(){var t,e;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(t=this.reference,e=this.state,se(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach((function(t){t.removeEventListener("scroll",e.updateBound)})),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e))}function ce(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function he(n,i){Object.keys(i).forEach((function(t){var e="";-1!==["width","height","top","right","bottom","left"].indexOf(t)&&ce(i[t])&&(e="px"),n.style[t]=i[t]+e}))}var ue=Tt&&/Firefox/i.test(navigator.userAgent);function fe(t,e,n){var i=ne(t,(function(t){return t.name===e})),o=!!i&&t.some((function(t){return t.name===n&&t.enabled&&t.order<i.order}));if(!o){var r="`"+e+"`",s="`"+n+"`";console.warn(s+" modifier is required by "+r+" modifier in order to work, be sure to include it before "+r+"!")}return o}var de=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],pe=de.slice(3);function me(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=pe.indexOf(t),i=pe.slice(n+1).concat(pe.slice(0,n));return e?i.reverse():i}var Ee={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,n=e.split("-")[0],i=e.split("-")[1];if(i){var o=t.offsets,r=o.reference,s=o.popper,a=-1!==["bottom","top"].indexOf(n),l=a?"left":"top",c=a?"width":"height",h={start:Kt({},l,r[l]),end:Kt({},l,r[l]+r[c]-s[c])};t.offsets.popper=Qt({},s,h[i])}return t}},offset:{order:200,enabled:!0,fn:function(t,e){var l,n=e.offset,i=t.placement,o=t.offsets,r=o.popper,s=o.reference,a=i.split("-")[0];return l=ce(+n)?[+n,0]:function(t,o,r,e){var s=[0,0],a=-1!==["right","left"].indexOf(e),n=t.split(/(\+|\-)/).map((function(t){return t.trim()})),i=n.indexOf(ne(n,(function(t){return-1!==t.search(/,|\s/)})));n[i]&&-1===n[i].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,c=-1!==i?[n.slice(0,i).concat([n[i].split(l)[0]]),[n[i].split(l)[1]].concat(n.slice(i+1))]:[n];return(c=c.map((function(t,e){var n=(1===e?!a:a)?"height":"width",i=!1;return t.reduce((function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,i=!0,t):i?(t[t.length-1]+=e,i=!1,t):t.concat(e)}),[]).map((function(t){return function(t,e,n,i){var o=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),r=+o[1],s=o[2];if(!r)return t;if(0!==s.indexOf("%"))return"vh"!==s&&"vw"!==s?r:("vh"===s?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*r;var a=void 0;switch(s){case"%p":a=n;break;case"%":case"%r":default:a=i}return Vt(a)[e]/100*r}(t,n,o,r)}))}))).forEach((function(n,i){n.forEach((function(t,e){ce(t)&&(s[i]+=t*("-"===n[e-1]?-1:1))}))})),s}(n,r,s,a),"left"===a?(r.top+=l[0],r.left-=l[1]):"right"===a?(r.top+=l[0],r.left+=l[1]):"top"===a?(r.left+=l[0],r.top-=l[1]):"bottom"===a&&(r.left+=l[0],r.top+=l[1]),t.popper=r,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,i){var e=i.boundariesElement||jt(t.instance.popper);t.instance.reference===e&&(e=jt(e));var n=re("transform"),o=t.instance.popper.style,r=o.top,s=o.left,a=o[n];o.top="",o.left="",o[n]="";var l=Gt(t.instance.popper,t.instance.reference,i.padding,e,t.positionFixed);o.top=r,o.left=s,o[n]=a,i.boundaries=l;var c=i.priority,h=t.offsets.popper,u={primary:function(t){var e=h[t];return h[t]<l[t]&&!i.escapeWithReference&&(e=Math.max(h[t],l[t])),Kt({},t,e)},secondary:function(t){var e="right"===t?"left":"top",n=h[e];return h[t]>l[t]&&!i.escapeWithReference&&(n=Math.min(h[e],l[t]-("right"===t?h.width:h.height))),Kt({},e,n)}};return c.forEach((function(t){var e=-1!==["left","top"].indexOf(t)?"primary":"secondary";h=Qt({},h,u[e](t))})),t.offsets.popper=h,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,n=e.popper,i=e.reference,o=t.placement.split("-")[0],r=Math.floor,s=-1!==["top","bottom"].indexOf(o),a=s?"right":"bottom",l=s?"left":"top",c=s?"width":"height";return n[a]<r(i[l])&&(t.offsets.popper[l]=r(i[l])-n[c]),n[l]>r(i[a])&&(t.offsets.popper[l]=r(i[a])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){var n;if(!fe(t.instance.modifiers,"arrow","keepTogether"))return t;var i=e.element;if("string"==typeof i){if(!(i=t.instance.popper.querySelector(i)))return t}else if(!t.instance.popper.contains(i))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var o=t.placement.split("-")[0],r=t.offsets,s=r.popper,a=r.reference,l=-1!==["left","right"].indexOf(o),c=l?"height":"width",h=l?"Top":"Left",u=h.toLowerCase(),f=l?"left":"top",d=l?"bottom":"right",p=Zt(i)[c];a[d]-p<s[u]&&(t.offsets.popper[u]-=s[u]-(a[d]-p)),a[u]+p>s[d]&&(t.offsets.popper[u]+=a[u]+p-s[d]),t.offsets.popper=Vt(t.offsets.popper);var m=a[u]+a[c]/2-p/2,g=Nt(t.instance.popper),_=parseFloat(g["margin"+h],10),v=parseFloat(g["border"+h+"Width"],10),y=m-t.offsets.popper[u]-_-v;return y=Math.max(Math.min(s[c]-p,y),0),t.arrowElement=i,t.offsets.arrow=(Kt(n={},u,Math.round(y)),Kt(n,f,""),n),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(p,m){if(oe(p.instance.modifiers,"inner"))return p;if(p.flipped&&p.placement===p.originalPlacement)return p;var g=Gt(p.instance.popper,p.instance.reference,m.padding,m.boundariesElement,p.positionFixed),_=p.placement.split("-")[0],v=te(_),y=p.placement.split("-")[1]||"",E=[];switch(m.behavior){case"flip":E=[_,v];break;case"clockwise":E=me(_);break;case"counterclockwise":E=me(_,!0);break;default:E=m.behavior}return E.forEach((function(t,e){if(_!==t||E.length===e+1)return p;_=p.placement.split("-")[0],v=te(_);var n,i=p.offsets.popper,o=p.offsets.reference,r=Math.floor,s="left"===_&&r(i.right)>r(o.left)||"right"===_&&r(i.left)<r(o.right)||"top"===_&&r(i.bottom)>r(o.top)||"bottom"===_&&r(i.top)<r(o.bottom),a=r(i.left)<r(g.left),l=r(i.right)>r(g.right),c=r(i.top)<r(g.top),h=r(i.bottom)>r(g.bottom),u="left"===_&&a||"right"===_&&l||"top"===_&&c||"bottom"===_&&h,f=-1!==["top","bottom"].indexOf(_),d=!!m.flipVariations&&(f&&"start"===y&&a||f&&"end"===y&&l||!f&&"start"===y&&c||!f&&"end"===y&&h);(s||u||d)&&(p.flipped=!0,(s||u)&&(_=E[e+1]),d&&(y="end"===(n=y)?"start":"start"===n?"end":n),p.placement=_+(y?"-"+y:""),p.offsets.popper=Qt({},p.offsets.popper,ee(p.instance.popper,p.offsets.reference,p.placement)),p=ie(p.instance.modifiers,p,"flip"))})),p},behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,n=e.split("-")[0],i=t.offsets,o=i.popper,r=i.reference,s=-1!==["left","right"].indexOf(n),a=-1===["top","left"].indexOf(n);return o[s?"left":"top"]=r[n]-(a?o[s?"width":"height"]:0),t.placement=te(e),t.offsets.popper=Vt(o),t}},hide:{order:800,enabled:!0,fn:function(t){if(!fe(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,n=ne(t.instance.modifiers,(function(t){return"preventOverflow"===t.name})).boundaries;if(e.bottom<n.top||e.left>n.right||e.top>n.bottom||e.right<n.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var n=e.x,i=e.y,o=t.offsets.popper,r=ne(t.instance.modifiers,(function(t){return"applyStyle"===t.name})).gpuAcceleration;void 0!==r&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var s,a,l,c,h,u,f,d,p,m,g,_,v,y,A,O,E=void 0!==r?r:e.gpuAcceleration,b=jt(t.instance.popper),w=Yt(b),C={position:o.position},T=(s=t,a=window.devicePixelRatio<2||!ue,c=(l=s.offsets).popper,h=l.reference,u=Math.round,f=Math.floor,d=function(t){return t},p=u(h.width),m=u(c.width),g=-1!==["left","right"].indexOf(s.placement),_=-1!==s.placement.indexOf("-"),y=a?u:d,{left:(v=a?g||_||p%2==m%2?u:f:d)(p%2==1&&m%2==1&&!_&&a?c.left-1:c.left),top:y(c.top),bottom:y(c.bottom),right:v(c.right)}),S="bottom"===n?"top":"bottom",D="right"===i?"left":"right",I=re("transform");if(O="bottom"===S?"HTML"===b.nodeName?-b.clientHeight+T.bottom:-w.height+T.bottom:T.top,A="right"===D?"HTML"===b.nodeName?-b.clientWidth+T.right:-w.width+T.right:T.left,E&&I)C[I]="translate3d("+A+"px, "+O+"px, 0)",C[S]=0,C[D]=0,C.willChange="transform";else{var N="bottom"===S?-1:1,k="right"===D?-1:1;C[S]=O*N,C[D]=A*k,C.willChange=S+", "+D}var L={"x-placement":t.placement};return t.attributes=Qt({},L,t.attributes),t.styles=Qt({},C,t.styles),t.arrowStyles=Qt({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){var e,n;return he(t.instance.popper,t.styles),e=t.instance.popper,n=t.attributes,Object.keys(n).forEach((function(t){!1!==n[t]?e.setAttribute(t,n[t]):e.removeAttribute(t)})),t.arrowElement&&Object.keys(t.arrowStyles).length&&he(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,n,i,o){var r=Jt(o,e,t,n.positionFixed),s=$t(n.placement,r,e,t,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return e.setAttribute("x-placement",s),he(e,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},be=function(){function r(t,e){var n=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=At(this.update.bind(this)),this.options=Qt({},r.Defaults,i),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=e&&e.jquery?e[0]:e,this.options.modifiers={},Object.keys(Qt({},r.Defaults.modifiers,i.modifiers)).forEach((function(t){n.options.modifiers[t]=Qt({},r.Defaults.modifiers[t]||{},i.modifiers?i.modifiers[t]:{})})),this.modifiers=Object.keys(this.options.modifiers).map((function(t){return Qt({name:t},n.options.modifiers[t])})).sort((function(t,e){return t.order-e.order})),this.modifiers.forEach((function(t){t.enabled&&Ot(t.onLoad)&&t.onLoad(n.reference,n.popper,n.options,t,n.state)})),this.update();var o=this.options.eventsEnabled;o&&this.enableEventListeners(),this.state.eventsEnabled=o}return qt(r,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=Jt(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=$t(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=ee(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=ie(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,oe(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[re("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=function(t,e,n,i){n.updateBound=i,se(t).addEventListener("resize",n.updateBound,{passive:!0});var o=Lt(t);return function t(e,n,i,o){var r="BODY"===e.nodeName,s=r?e.ownerDocument.defaultView:e;s.addEventListener(n,i,{passive:!0}),r||t(Lt(s.parentNode),n,i,o),o.push(s)}(o,"scroll",n.updateBound,n.scrollParents),n.scrollElement=o,n.eventsEnabled=!0,n}(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return le.call(this)}}]),r}();be.Utils=("undefined"!=typeof window?window:global).PopperUtils,be.placements=de,be.Defaults=Ee;var we="dropdown",Ce="bs.dropdown",Te="."+Ce,Se=".data-api",De=p.fn[we],Ie=new RegExp("38|40|27"),Ae={HIDE:"hide"+Te,HIDDEN:"hidden"+Te,SHOW:"show"+Te,SHOWN:"shown"+Te,CLICK:"click"+Te,CLICK_DATA_API:"click"+Te+Se,KEYDOWN_DATA_API:"keydown"+Te+Se,KEYUP_DATA_API:"keyup"+Te+Se},Oe="disabled",Ne="show",Pe="dropdown-menu-right",je='[data-toggle="dropdown"]',Fe=".dropdown-menu",Ye={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic"},ze={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string"},Xe=function(){function c(t,e){this._element=t,this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var t=c.prototype;return t.toggle=function(){if(!this._element.disabled&&!p(this._element).hasClass(Oe)){var t=c._getParentFromElement(this._element),e=p(this._menu).hasClass(Ne);if(c._clearMenus(),!e){var n={relatedTarget:this._element},i=p.Event(Ae.SHOW,n);if(p(t).trigger(i),!i.isDefaultPrevented()){if(!this._inNavbar){if(void 0===be)throw new TypeError("Bootstrap's dropdowns require Popper.js (https://popper.js.org/)");var o=this._element;"parent"===this._config.reference?o=t:m.isElement(this._config.reference)&&(o=this._config.reference,void 0!==this._config.reference.jquery&&(o=this._config.reference[0])),"scrollParent"!==this._config.boundary&&p(t).addClass("position-static"),this._popper=new be(o,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===p(t).closest(".navbar-nav").length&&p(document.body).children().on("mouseover",null,p.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),p(this._menu).toggleClass(Ne),p(t).toggleClass(Ne).trigger(p.Event(Ae.SHOWN,n))}}}},t.show=function(){if(!(this._element.disabled||p(this._element).hasClass(Oe)||p(this._menu).hasClass(Ne))){var t={relatedTarget:this._element},e=p.Event(Ae.SHOW,t),n=c._getParentFromElement(this._element);p(n).trigger(e),e.isDefaultPrevented()||(p(this._menu).toggleClass(Ne),p(n).toggleClass(Ne).trigger(p.Event(Ae.SHOWN,t)))}},t.hide=function(){if(!this._element.disabled&&!p(this._element).hasClass(Oe)&&p(this._menu).hasClass(Ne)){var t={relatedTarget:this._element},e=p.Event(Ae.HIDE,t),n=c._getParentFromElement(this._element);p(n).trigger(e),e.isDefaultPrevented()||(p(this._menu).toggleClass(Ne),p(n).toggleClass(Ne).trigger(p.Event(Ae.HIDDEN,t)))}},t.dispose=function(){p.removeData(this._element,Ce),p(this._element).off(Te),this._element=null,(this._menu=null)!==this._popper&&(this._popper.destroy(),this._popper=null)},t.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},t._addEventListeners=function(){var e=this;p(this._element).on(Ae.CLICK,(function(t){t.preventDefault(),t.stopPropagation(),e.toggle()}))},t._getConfig=function(t){return t=l({},this.constructor.Default,p(this._element).data(),t),m.typeCheckConfig(we,t,this.constructor.DefaultType),t},t._getMenuElement=function(){if(!this._menu){var t=c._getParentFromElement(this._element);t&&(this._menu=t.querySelector(Fe))}return this._menu},t._getPlacement=function(){var t=p(this._element.parentNode),e="bottom-start";return t.hasClass("dropup")?(e="top-start",p(this._menu).hasClass(Pe)&&(e="top-end")):t.hasClass("dropright")?e="right-start":t.hasClass("dropleft")?e="left-start":p(this._menu).hasClass(Pe)&&(e="bottom-end"),e},t._detectNavbar=function(){return 0<p(this._element).closest(".navbar").length},t._getOffset=function(){var e=this,t={};return"function"==typeof this._config.offset?t.fn=function(t){return t.offsets=l({},t.offsets,e._config.offset(t.offsets,e._element)||{}),t}:t.offset=this._config.offset,t},t._getPopperConfig=function(){var t={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(t.modifiers.applyStyle={enabled:!1}),t},c._jQueryInterface=function(e){return this.each((function(){var t=p(this).data(Ce);if(t||(t=new c(this,"object"==typeof e?e:null),p(this).data(Ce,t)),"string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'+e+'"');t[e]()}}))},c._clearMenus=function(t){if(!t||3!==t.which&&("keyup"!==t.type||9===t.which))for(var e=[].slice.call(document.querySelectorAll(je)),n=0,i=e.length;n<i;n++){var o=c._getParentFromElement(e[n]),r=p(e[n]).data(Ce),s={relatedTarget:e[n]};if(t&&"click"===t.type&&(s.clickEvent=t),r){var a=r._menu;if(p(o).hasClass(Ne)&&!(t&&("click"===t.type&&/input|textarea/i.test(t.target.tagName)||"keyup"===t.type&&9===t.which)&&p.contains(o,t.target))){var l=p.Event(Ae.HIDE,s);p(o).trigger(l),l.isDefaultPrevented()||("ontouchstart"in document.documentElement&&p(document.body).children().off("mouseover",null,p.noop),e[n].setAttribute("aria-expanded","false"),p(a).removeClass(Ne),p(o).removeClass(Ne).trigger(p.Event(Ae.HIDDEN,s)))}}}},c._getParentFromElement=function(t){var e,n=m.getSelectorFromElement(t);return n&&(e=document.querySelector(n)),e||t.parentNode},c._dataApiKeydownHandler=function(t){if((/input|textarea/i.test(t.target.tagName)?!(32===t.which||27!==t.which&&(40!==t.which&&38!==t.which||p(t.target).closest(Fe).length)):Ie.test(t.which))&&(t.preventDefault(),t.stopPropagation(),!this.disabled&&!p(this).hasClass(Oe))){var e=c._getParentFromElement(this),n=p(e).hasClass(Ne);if(n&&(!n||27!==t.which&&32!==t.which)){var i=[].slice.call(e.querySelectorAll(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)"));if(0!==i.length){var o=i.indexOf(t.target);38===t.which&&0<o&&o--,40===t.which&&o<i.length-1&&o++,o<0&&(o=0),i[o].focus()}}else{if(27===t.which){var r=e.querySelector(je);p(r).trigger("focus")}p(this).trigger("click")}}},s(c,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return Ye}},{key:"DefaultType",get:function(){return ze}}]),c}();p(document).on(Ae.KEYDOWN_DATA_API,je,Xe._dataApiKeydownHandler).on(Ae.KEYDOWN_DATA_API,Fe,Xe._dataApiKeydownHandler).on(Ae.CLICK_DATA_API+" "+Ae.KEYUP_DATA_API,Xe._clearMenus).on(Ae.CLICK_DATA_API,je,(function(t){t.preventDefault(),t.stopPropagation(),Xe._jQueryInterface.call(p(this),"toggle")})).on(Ae.CLICK_DATA_API,".dropdown form",(function(t){t.stopPropagation()})),p.fn[we]=Xe._jQueryInterface,p.fn[we].Constructor=Xe,p.fn[we].noConflict=function(){return p.fn[we]=De,Xe._jQueryInterface};var Ge="modal",$e="bs.modal",Je="."+$e,Ze=p.fn[Ge],tn={backdrop:!0,keyboard:!0,focus:!0,show:!0},en={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},nn={HIDE:"hide"+Je,HIDDEN:"hidden"+Je,SHOW:"show"+Je,SHOWN:"shown"+Je,FOCUSIN:"focusin"+Je,RESIZE:"resize"+Je,CLICK_DISMISS:"click.dismiss"+Je,KEYDOWN_DISMISS:"keydown.dismiss"+Je,MOUSEUP_DISMISS:"mouseup.dismiss"+Je,MOUSEDOWN_DISMISS:"mousedown.dismiss"+Je,CLICK_DATA_API:"click"+Je+".data-api"},an="modal-open",ln="fade",cn="show",hn=".modal-dialog",pn=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",mn=".sticky-top",gn=function(){function o(t,e){this._config=this._getConfig(e),this._element=t,this._dialog=t.querySelector(hn),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var t=o.prototype;return t.toggle=function(t){return this._isShown?this.hide():this.show(t)},t.show=function(t){var e=this;if(!this._isShown&&!this._isTransitioning){p(this._element).hasClass(ln)&&(this._isTransitioning=!0);var n=p.Event(nn.SHOW,{relatedTarget:t});p(this._element).trigger(n),this._isShown||n.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),p(this._element).on(nn.CLICK_DISMISS,'[data-dismiss="modal"]',(function(t){return e.hide(t)})),p(this._dialog).on(nn.MOUSEDOWN_DISMISS,(function(){p(e._element).one(nn.MOUSEUP_DISMISS,(function(t){p(t.target).is(e._element)&&(e._ignoreBackdropClick=!0)}))})),this._showBackdrop((function(){return e._showElement(t)})))}},t.hide=function(t){var e=this;if(t&&t.preventDefault(),this._isShown&&!this._isTransitioning){var n=p.Event(nn.HIDE);if(p(this._element).trigger(n),this._isShown&&!n.isDefaultPrevented()){this._isShown=!1;var i=p(this._element).hasClass(ln);if(i&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),p(document).off(nn.FOCUSIN),p(this._element).removeClass(cn),p(this._element).off(nn.CLICK_DISMISS),p(this._dialog).off(nn.MOUSEDOWN_DISMISS),i){var o=m.getTransitionDurationFromElement(this._element);p(this._element).one(m.TRANSITION_END,(function(t){return e._hideModal(t)})).emulateTransitionEnd(o)}else this._hideModal()}}},t.dispose=function(){[window,this._element,this._dialog].forEach((function(t){return p(t).off(Je)})),p(document).off(nn.FOCUSIN),p.removeData(this._element,$e),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},t.handleUpdate=function(){this._adjustDialog()},t._getConfig=function(t){return t=l({},tn,t),m.typeCheckConfig(Ge,t,en),t},t._showElement=function(t){var e=this,n=p(this._element).hasClass(ln);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),p(this._dialog).hasClass("modal-dialog-scrollable")?this._dialog.querySelector(".modal-body").scrollTop=0:this._element.scrollTop=0,n&&m.reflow(this._element),p(this._element).addClass(cn),this._config.focus&&this._enforceFocus();var i=p.Event(nn.SHOWN,{relatedTarget:t}),o=function(){e._config.focus&&e._element.focus(),e._isTransitioning=!1,p(e._element).trigger(i)};if(n){var r=m.getTransitionDurationFromElement(this._dialog);p(this._dialog).one(m.TRANSITION_END,o).emulateTransitionEnd(r)}else o()},t._enforceFocus=function(){var e=this;p(document).off(nn.FOCUSIN).on(nn.FOCUSIN,(function(t){document!==t.target&&e._element!==t.target&&0===p(e._element).has(t.target).length&&e._element.focus()}))},t._setEscapeEvent=function(){var e=this;this._isShown&&this._config.keyboard?p(this._element).on(nn.KEYDOWN_DISMISS,(function(t){27===t.which&&(t.preventDefault(),e.hide())})):this._isShown||p(this._element).off(nn.KEYDOWN_DISMISS)},t._setResizeEvent=function(){var e=this;this._isShown?p(window).on(nn.RESIZE,(function(t){return e.handleUpdate(t)})):p(window).off(nn.RESIZE)},t._hideModal=function(){var t=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._isTransitioning=!1,this._showBackdrop((function(){p(document.body).removeClass(an),t._resetAdjustments(),t._resetScrollbar(),p(t._element).trigger(nn.HIDDEN)}))},t._removeBackdrop=function(){this._backdrop&&(p(this._backdrop).remove(),this._backdrop=null)},t._showBackdrop=function(t){var e=this,n=p(this._element).hasClass(ln)?ln:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className="modal-backdrop",n&&this._backdrop.classList.add(n),p(this._backdrop).appendTo(document.body),p(this._element).on(nn.CLICK_DISMISS,(function(t){e._ignoreBackdropClick?e._ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"===e._config.backdrop?e._element.focus():e.hide())})),n&&m.reflow(this._backdrop),p(this._backdrop).addClass(cn),!t)return;if(!n)return void t();var i=m.getTransitionDurationFromElement(this._backdrop);p(this._backdrop).one(m.TRANSITION_END,t).emulateTransitionEnd(i)}else if(!this._isShown&&this._backdrop){p(this._backdrop).removeClass(cn);var o=function(){e._removeBackdrop(),t&&t()};if(p(this._element).hasClass(ln)){var r=m.getTransitionDurationFromElement(this._backdrop);p(this._backdrop).one(m.TRANSITION_END,o).emulateTransitionEnd(r)}else o()}else t&&t()},t._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},t._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},t._checkScrollbar=function(){var t=document.body.getBoundingClientRect();this._isBodyOverflowing=t.left+t.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},t._setScrollbar=function(){var o=this;if(this._isBodyOverflowing){var t=[].slice.call(document.querySelectorAll(pn)),e=[].slice.call(document.querySelectorAll(mn));p(t).each((function(t,e){var n=e.style.paddingRight,i=p(e).css("padding-right");p(e).data("padding-right",n).css("padding-right",parseFloat(i)+o._scrollbarWidth+"px")})),p(e).each((function(t,e){var n=e.style.marginRight,i=p(e).css("margin-right");p(e).data("margin-right",n).css("margin-right",parseFloat(i)-o._scrollbarWidth+"px")}));var n=document.body.style.paddingRight,i=p(document.body).css("padding-right");p(document.body).data("padding-right",n).css("padding-right",parseFloat(i)+this._scrollbarWidth+"px")}p(document.body).addClass(an)},t._resetScrollbar=function(){var t=[].slice.call(document.querySelectorAll(pn));p(t).each((function(t,e){var n=p(e).data("padding-right");p(e).removeData("padding-right"),e.style.paddingRight=n||""}));var e=[].slice.call(document.querySelectorAll(""+mn));p(e).each((function(t,e){var n=p(e).data("margin-right");void 0!==n&&p(e).css("margin-right",n).removeData("margin-right")}));var n=p(document.body).data("padding-right");p(document.body).removeData("padding-right"),document.body.style.paddingRight=n||""},t._getScrollbarWidth=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e},o._jQueryInterface=function(n,i){return this.each((function(){var t=p(this).data($e),e=l({},tn,p(this).data(),"object"==typeof n&&n?n:{});if(t||(t=new o(this,e),p(this).data($e,t)),"string"==typeof n){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n](i)}else e.show&&t.show(i)}))},s(o,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return tn}}]),o}();p(document).on(nn.CLICK_DATA_API,'[data-toggle="modal"]',(function(t){var e,n=this,i=m.getSelectorFromElement(this);i&&(e=document.querySelector(i));var o=p(e).data($e)?"toggle":l({},p(e).data(),p(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||t.preventDefault();var r=p(e).one(nn.SHOW,(function(t){t.isDefaultPrevented()||r.one(nn.HIDDEN,(function(){p(n).is(":visible")&&n.focus()}))}));gn._jQueryInterface.call(p(e),o,this)})),p.fn[Ge]=gn._jQueryInterface,p.fn[Ge].Constructor=gn,p.fn[Ge].noConflict=function(){return p.fn[Ge]=Ze,gn._jQueryInterface};var _n=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],yn=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,En=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function bn(t,s,e){if(0===t.length)return t;if(e&&"function"==typeof e)return e(t);for(var n=(new window.DOMParser).parseFromString(t,"text/html"),a=Object.keys(s),l=[].slice.call(n.body.querySelectorAll("*")),i=function(t,e){var n=l[t],i=n.nodeName.toLowerCase();if(-1===a.indexOf(n.nodeName.toLowerCase()))return n.parentNode.removeChild(n),"continue";var o=[].slice.call(n.attributes),r=[].concat(s["*"]||[],s[i]||[]);o.forEach((function(t){(function(t,e){var n=t.nodeName.toLowerCase();if(-1!==e.indexOf(n))return-1===_n.indexOf(n)||Boolean(t.nodeValue.match(yn)||t.nodeValue.match(En));for(var i=e.filter((function(t){return t instanceof RegExp})),o=0,r=i.length;o<r;o++)if(n.match(i[o]))return!0;return!1})(t,r)||n.removeAttribute(t.nodeName)}))},o=0,r=l.length;o<r;o++)i(o);return n.body.innerHTML}var wn="tooltip",Cn="bs.tooltip",Tn="."+Cn,Sn=p.fn[wn],Dn="bs-tooltip",In=new RegExp("(^|\\s)"+Dn+"\\S+","g"),An=["sanitize","whiteList","sanitizeFn"],On={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object"},Nn={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},kn={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",sanitize:!0,sanitizeFn:null,whiteList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]}},Ln="show",Pn={HIDE:"hide"+Tn,HIDDEN:"hidden"+Tn,SHOW:"show"+Tn,SHOWN:"shown"+Tn,INSERTED:"inserted"+Tn,CLICK:"click"+Tn,FOCUSIN:"focusin"+Tn,FOCUSOUT:"focusout"+Tn,MOUSEENTER:"mouseenter"+Tn,MOUSELEAVE:"mouseleave"+Tn},Hn="fade",jn="show",Mn="hover",Wn="focus",qn=function(){function i(t,e){if(void 0===be)throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org/)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}var t=i.prototype;return t.enable=function(){this._isEnabled=!0},t.disable=function(){this._isEnabled=!1},t.toggleEnabled=function(){this._isEnabled=!this._isEnabled},t.toggle=function(t){if(this._isEnabled)if(t){var e=this.constructor.DATA_KEY,n=p(t.currentTarget).data(e);n||(n=new this.constructor(t.currentTarget,this._getDelegateConfig()),p(t.currentTarget).data(e,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)}else{if(p(this.getTipElement()).hasClass(jn))return void this._leave(null,this);this._enter(null,this)}},t.dispose=function(){clearTimeout(this._timeout),p.removeData(this.element,this.constructor.DATA_KEY),p(this.element).off(this.constructor.EVENT_KEY),p(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&p(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,(this._activeTrigger=null)!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},t.show=function(){var e=this;if("none"===p(this.element).css("display"))throw new Error("Please use show on visible elements");var t=p.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){p(this.element).trigger(t);var n=m.findShadowRoot(this.element),i=p.contains(null!==n?n:this.element.ownerDocument.documentElement,this.element);if(t.isDefaultPrevented()||!i)return;var o=this.getTipElement(),r=m.getUID(this.constructor.NAME);o.setAttribute("id",r),this.element.setAttribute("aria-describedby",r),this.setContent(),this.config.animation&&p(o).addClass(Hn);var s="function"==typeof this.config.placement?this.config.placement.call(this,o,this.element):this.config.placement,a=this._getAttachment(s);this.addAttachmentClass(a);var l=this._getContainer();p(o).data(this.constructor.DATA_KEY,this),p.contains(this.element.ownerDocument.documentElement,this.tip)||p(o).appendTo(l),p(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new be(this.element,o,{placement:a,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:".arrow"},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(t){t.originalPlacement!==t.placement&&e._handlePopperPlacementChange(t)},onUpdate:function(t){return e._handlePopperPlacementChange(t)}}),p(o).addClass(jn),"ontouchstart"in document.documentElement&&p(document.body).children().on("mouseover",null,p.noop);var c=function(){e.config.animation&&e._fixTransition();var t=e._hoverState;e._hoverState=null,p(e.element).trigger(e.constructor.Event.SHOWN),"out"===t&&e._leave(null,e)};if(p(this.tip).hasClass(Hn)){var h=m.getTransitionDurationFromElement(this.tip);p(this.tip).one(m.TRANSITION_END,c).emulateTransitionEnd(h)}else c()}},t.hide=function(t){var e=this,n=this.getTipElement(),i=p.Event(this.constructor.Event.HIDE),o=function(){e._hoverState!==Ln&&n.parentNode&&n.parentNode.removeChild(n),e._cleanTipClass(),e.element.removeAttribute("aria-describedby"),p(e.element).trigger(e.constructor.Event.HIDDEN),null!==e._popper&&e._popper.destroy(),t&&t()};if(p(this.element).trigger(i),!i.isDefaultPrevented()){if(p(n).removeClass(jn),"ontouchstart"in document.documentElement&&p(document.body).children().off("mouseover",null,p.noop),this._activeTrigger.click=!1,this._activeTrigger[Wn]=!1,this._activeTrigger[Mn]=!1,p(this.tip).hasClass(Hn)){var r=m.getTransitionDurationFromElement(n);p(n).one(m.TRANSITION_END,o).emulateTransitionEnd(r)}else o();this._hoverState=""}},t.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},t.isWithContent=function(){return Boolean(this.getTitle())},t.addAttachmentClass=function(t){p(this.getTipElement()).addClass(Dn+"-"+t)},t.getTipElement=function(){return this.tip=this.tip||p(this.config.template)[0],this.tip},t.setContent=function(){var t=this.getTipElement();this.setElementContent(p(t.querySelectorAll(".tooltip-inner")),this.getTitle()),p(t).removeClass(Hn+" "+jn)},t.setElementContent=function(t,e){"object"!=typeof e||!e.nodeType&&!e.jquery?this.config.html?(this.config.sanitize&&(e=bn(e,this.config.whiteList,this.config.sanitizeFn)),t.html(e)):t.text(e):this.config.html?p(e).parent().is(t)||t.empty().append(e):t.text(p(e).text())},t.getTitle=function(){var t=this.element.getAttribute("data-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t},t._getOffset=function(){var e=this,t={};return"function"==typeof this.config.offset?t.fn=function(t){return t.offsets=l({},t.offsets,e.config.offset(t.offsets,e.element)||{}),t}:t.offset=this.config.offset,t},t._getContainer=function(){return!1===this.config.container?document.body:m.isElement(this.config.container)?p(this.config.container):p(document).find(this.config.container)},t._getAttachment=function(t){return Nn[t.toUpperCase()]},t._setListeners=function(){var i=this;this.config.trigger.split(" ").forEach((function(t){if("click"===t)p(i.element).on(i.constructor.Event.CLICK,i.config.selector,(function(t){return i.toggle(t)}));else if("manual"!==t){var e=t===Mn?i.constructor.Event.MOUSEENTER:i.constructor.Event.FOCUSIN,n=t===Mn?i.constructor.Event.MOUSELEAVE:i.constructor.Event.FOCUSOUT;p(i.element).on(e,i.config.selector,(function(t){return i._enter(t)})).on(n,i.config.selector,(function(t){return i._leave(t)}))}})),p(this.element).closest(".modal").on("hide.bs.modal",(function(){i.element&&i.hide()})),this.config.selector?this.config=l({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},t._fixTitle=function(){var t=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==t)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},t._enter=function(t,e){var n=this.constructor.DATA_KEY;(e=e||p(t.currentTarget).data(n))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),p(t.currentTarget).data(n,e)),t&&(e._activeTrigger["focusin"===t.type?Wn:Mn]=!0),p(e.getTipElement()).hasClass(jn)||e._hoverState===Ln?e._hoverState=Ln:(clearTimeout(e._timeout),e._hoverState=Ln,e.config.delay&&e.config.delay.show?e._timeout=setTimeout((function(){e._hoverState===Ln&&e.show()}),e.config.delay.show):e.show())},t._leave=function(t,e){var n=this.constructor.DATA_KEY;(e=e||p(t.currentTarget).data(n))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),p(t.currentTarget).data(n,e)),t&&(e._activeTrigger["focusout"===t.type?Wn:Mn]=!1),e._isWithActiveTrigger()||(clearTimeout(e._timeout),e._hoverState="out",e.config.delay&&e.config.delay.hide?e._timeout=setTimeout((function(){"out"===e._hoverState&&e.hide()}),e.config.delay.hide):e.hide())},t._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},t._getConfig=function(t){var e=p(this.element).data();return Object.keys(e).forEach((function(t){-1!==An.indexOf(t)&&delete e[t]})),"number"==typeof(t=l({},this.constructor.Default,e,"object"==typeof t&&t?t:{})).delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),m.typeCheckConfig(wn,t,this.constructor.DefaultType),t.sanitize&&(t.template=bn(t.template,t.whiteList,t.sanitizeFn)),t},t._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},t._cleanTipClass=function(){var t=p(this.getTipElement()),e=t.attr("class").match(In);null!==e&&e.length&&t.removeClass(e.join(""))},t._handlePopperPlacementChange=function(t){var e=t.instance;this.tip=e.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(t.placement))},t._fixTransition=function(){var t=this.getTipElement(),e=this.config.animation;null===t.getAttribute("x-placement")&&(p(t).removeClass(Hn),this.config.animation=!1,this.hide(),this.show(),this.config.animation=e)},i._jQueryInterface=function(n){return this.each((function(){var t=p(this).data(Cn),e="object"==typeof n&&n;if((t||!/dispose|hide/.test(n))&&(t||(t=new i(this,e),p(this).data(Cn,t)),"string"==typeof n)){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n]()}}))},s(i,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return kn}},{key:"NAME",get:function(){return wn}},{key:"DATA_KEY",get:function(){return Cn}},{key:"Event",get:function(){return Pn}},{key:"EVENT_KEY",get:function(){return Tn}},{key:"DefaultType",get:function(){return On}}]),i}();p.fn[wn]=qn._jQueryInterface,p.fn[wn].Constructor=qn,p.fn[wn].noConflict=function(){return p.fn[wn]=Sn,qn._jQueryInterface};var Kn="popover",Qn="bs.popover",Vn="."+Qn,Yn=p.fn[Kn],zn="bs-popover",Xn=new RegExp("(^|\\s)"+zn+"\\S+","g"),Gn=l({},qn.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),$n=l({},qn.DefaultType,{content:"(string|element|function)"}),ni={HIDE:"hide"+Vn,HIDDEN:"hidden"+Vn,SHOW:"show"+Vn,SHOWN:"shown"+Vn,INSERTED:"inserted"+Vn,CLICK:"click"+Vn,FOCUSIN:"focusin"+Vn,FOCUSOUT:"focusout"+Vn,MOUSEENTER:"mouseenter"+Vn,MOUSELEAVE:"mouseleave"+Vn},ii=function(t){var e,n;function i(){return t.apply(this,arguments)||this}n=t,(e=i).prototype=Object.create(n.prototype),(e.prototype.constructor=e).__proto__=n;var o=i.prototype;return o.isWithContent=function(){return this.getTitle()||this._getContent()},o.addAttachmentClass=function(t){p(this.getTipElement()).addClass(zn+"-"+t)},o.getTipElement=function(){return this.tip=this.tip||p(this.config.template)[0],this.tip},o.setContent=function(){var t=p(this.getTipElement());this.setElementContent(t.find(".popover-header"),this.getTitle());var e=this._getContent();"function"==typeof e&&(e=e.call(this.element)),this.setElementContent(t.find(".popover-body"),e),t.removeClass("fade show")},o._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},o._cleanTipClass=function(){var t=p(this.getTipElement()),e=t.attr("class").match(Xn);null!==e&&0<e.length&&t.removeClass(e.join(""))},i._jQueryInterface=function(n){return this.each((function(){var t=p(this).data(Qn),e="object"==typeof n?n:null;if((t||!/dispose|hide/.test(n))&&(t||(t=new i(this,e),p(this).data(Qn,t)),"string"==typeof n)){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n]()}}))},s(i,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return Gn}},{key:"NAME",get:function(){return Kn}},{key:"DATA_KEY",get:function(){return Qn}},{key:"Event",get:function(){return ni}},{key:"EVENT_KEY",get:function(){return Vn}},{key:"DefaultType",get:function(){return $n}}]),i}(qn);p.fn[Kn]=ii._jQueryInterface,p.fn[Kn].Constructor=ii,p.fn[Kn].noConflict=function(){return p.fn[Kn]=Yn,ii._jQueryInterface};var oi="scrollspy",ri="bs.scrollspy",si="."+ri,ai=p.fn[oi],li={offset:10,method:"auto",target:""},ci={offset:"number",method:"string",target:"(string|element)"},hi={ACTIVATE:"activate"+si,SCROLL:"scroll"+si,LOAD_DATA_API:"load"+si+".data-api"},fi="active",pi=".nav, .list-group",mi=".nav-link",_i=".list-group-item",yi=".dropdown-item",wi="position",Ci=function(){function n(t,e){var n=this;this._element=t,this._scrollElement="BODY"===t.tagName?window:t,this._config=this._getConfig(e),this._selector=this._config.target+" "+mi+","+this._config.target+" "+_i+","+this._config.target+" "+yi,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,p(this._scrollElement).on(hi.SCROLL,(function(t){return n._process(t)})),this.refresh(),this._process()}var t=n.prototype;return t.refresh=function(){var e=this,t=this._scrollElement===this._scrollElement.window?"offset":wi,o="auto"===this._config.method?t:this._config.method,r=o===wi?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map((function(t){var e,n=m.getSelectorFromElement(t);if(n&&(e=document.querySelector(n)),e){var i=e.getBoundingClientRect();if(i.width||i.height)return[p(e)[o]().top+r,n]}return null})).filter((function(t){return t})).sort((function(t,e){return t[0]-e[0]})).forEach((function(t){e._offsets.push(t[0]),e._targets.push(t[1])}))},t.dispose=function(){p.removeData(this._element,ri),p(this._scrollElement).off(si),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},t._getConfig=function(t){if("string"!=typeof(t=l({},li,"object"==typeof t&&t?t:{})).target){var e=p(t.target).attr("id");e||(e=m.getUID(oi),p(t.target).attr("id",e)),t.target="#"+e}return m.typeCheckConfig(oi,t,ci),t},t._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},t._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},t._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},t._process=function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),n<=t){var i=this._targets[this._targets.length-1];this._activeTarget!==i&&this._activate(i)}else{if(this._activeTarget&&t<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(var o=this._offsets.length;o--;)this._activeTarget!==this._targets[o]&&t>=this._offsets[o]&&(void 0===this._offsets[o+1]||t<this._offsets[o+1])&&this._activate(this._targets[o])}},t._activate=function(e){this._activeTarget=e,this._clear();var t=this._selector.split(",").map((function(t){return t+'[data-target="'+e+'"],'+t+'[href="'+e+'"]'})),n=p([].slice.call(document.querySelectorAll(t.join(","))));n.hasClass("dropdown-item")?(n.closest(".dropdown").find(".dropdown-toggle").addClass(fi),n.addClass(fi)):(n.addClass(fi),n.parents(pi).prev(mi+", "+_i).addClass(fi),n.parents(pi).prev(".nav-item").children(mi).addClass(fi)),p(this._scrollElement).trigger(hi.ACTIVATE,{relatedTarget:e})},t._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter((function(t){return t.classList.contains(fi)})).forEach((function(t){return t.classList.remove(fi)}))},n._jQueryInterface=function(e){return this.each((function(){var t=p(this).data(ri);if(t||(t=new n(this,"object"==typeof e&&e),p(this).data(ri,t)),"string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'+e+'"');t[e]()}}))},s(n,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return li}}]),n}();p(window).on(hi.LOAD_DATA_API,(function(){for(var t=[].slice.call(document.querySelectorAll('[data-spy="scroll"]')),e=t.length;e--;){var n=p(t[e]);Ci._jQueryInterface.call(n,n.data())}})),p.fn[oi]=Ci._jQueryInterface,p.fn[oi].Constructor=Ci,p.fn[oi].noConflict=function(){return p.fn[oi]=ai,Ci._jQueryInterface};var Ti="bs.tab",Si="."+Ti,Di=p.fn.tab,Ii={HIDE:"hide"+Si,HIDDEN:"hidden"+Si,SHOW:"show"+Si,SHOWN:"shown"+Si,CLICK_DATA_API:"click"+Si+".data-api"},Oi="active",Hi=".active",ji="> li > .active",Wi=function(){function i(t){this._element=t}var t=i.prototype;return t.show=function(){var n=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&p(this._element).hasClass(Oi)||p(this._element).hasClass("disabled"))){var t,i,e=p(this._element).closest(".nav, .list-group")[0],o=m.getSelectorFromElement(this._element);if(e){var r="UL"===e.nodeName||"OL"===e.nodeName?ji:Hi;i=(i=p.makeArray(p(e).find(r)))[i.length-1]}var s=p.Event(Ii.HIDE,{relatedTarget:this._element}),a=p.Event(Ii.SHOW,{relatedTarget:i});if(i&&p(i).trigger(s),p(this._element).trigger(a),!a.isDefaultPrevented()&&!s.isDefaultPrevented()){o&&(t=document.querySelector(o)),this._activate(this._element,e);var l=function(){var t=p.Event(Ii.HIDDEN,{relatedTarget:n._element}),e=p.Event(Ii.SHOWN,{relatedTarget:i});p(i).trigger(t),p(n._element).trigger(e)};t?this._activate(t,t.parentNode,l):l()}}},t.dispose=function(){p.removeData(this._element,Ti),this._element=null},t._activate=function(t,e,n){var i=this,o=(!e||"UL"!==e.nodeName&&"OL"!==e.nodeName?p(e).children(Hi):p(e).find(ji))[0],r=n&&o&&p(o).hasClass("fade"),s=function(){return i._transitionComplete(t,o,n)};if(o&&r){var a=m.getTransitionDurationFromElement(o);p(o).removeClass("show").one(m.TRANSITION_END,s).emulateTransitionEnd(a)}else s()},t._transitionComplete=function(t,e,n){if(e){p(e).removeClass(Oi);var i=p(e.parentNode).find("> .dropdown-menu .active")[0];i&&p(i).removeClass(Oi),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!1)}if(p(t).addClass(Oi),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),m.reflow(t),t.classList.contains("fade")&&t.classList.add("show"),t.parentNode&&p(t.parentNode).hasClass("dropdown-menu")){var o=p(t).closest(".dropdown")[0];if(o){var r=[].slice.call(o.querySelectorAll(".dropdown-toggle"));p(r).addClass(Oi)}t.setAttribute("aria-expanded",!0)}n&&n()},i._jQueryInterface=function(n){return this.each((function(){var t=p(this),e=t.data(Ti);if(e||(e=new i(this),t.data(Ti,e)),"string"==typeof n){if(void 0===e[n])throw new TypeError('No method named "'+n+'"');e[n]()}}))},s(i,null,[{key:"VERSION",get:function(){return"4.3.1"}}]),i}();p(document).on(Ii.CLICK_DATA_API,'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',(function(t){t.preventDefault(),Wi._jQueryInterface.call(p(this),"show")})),p.fn.tab=Wi._jQueryInterface,p.fn.tab.Constructor=Wi,p.fn.tab.noConflict=function(){return p.fn.tab=Di,Wi._jQueryInterface};var Ui="toast",Bi="bs.toast",qi="."+Bi,Ki=p.fn[Ui],Qi={CLICK_DISMISS:"click.dismiss"+qi,HIDE:"hide"+qi,HIDDEN:"hidden"+qi,SHOW:"show"+qi,SHOWN:"shown"+qi},zi="show",Xi="showing",Gi={animation:"boolean",autohide:"boolean",delay:"number"},$i={animation:!0,autohide:!0,delay:500},Zi=function(){function i(t,e){this._element=t,this._config=this._getConfig(e),this._timeout=null,this._setListeners()}var t=i.prototype;return t.show=function(){var t=this;p(this._element).trigger(Qi.SHOW),this._config.animation&&this._element.classList.add("fade");var e=function(){t._element.classList.remove(Xi),t._element.classList.add(zi),p(t._element).trigger(Qi.SHOWN),t._config.autohide&&t.hide()};if(this._element.classList.remove("hide"),this._element.classList.add(Xi),this._config.animation){var n=m.getTransitionDurationFromElement(this._element);p(this._element).one(m.TRANSITION_END,e).emulateTransitionEnd(n)}else e()},t.hide=function(t){var e=this;this._element.classList.contains(zi)&&(p(this._element).trigger(Qi.HIDE),t?this._close():this._timeout=setTimeout((function(){e._close()}),this._config.delay))},t.dispose=function(){clearTimeout(this._timeout),this._timeout=null,this._element.classList.contains(zi)&&this._element.classList.remove(zi),p(this._element).off(Qi.CLICK_DISMISS),p.removeData(this._element,Bi),this._element=null,this._config=null},t._getConfig=function(t){return t=l({},$i,p(this._element).data(),"object"==typeof t&&t?t:{}),m.typeCheckConfig(Ui,t,this.constructor.DefaultType),t},t._setListeners=function(){var t=this;p(this._element).on(Qi.CLICK_DISMISS,'[data-dismiss="toast"]',(function(){return t.hide(!0)}))},t._close=function(){var t=this,e=function(){t._element.classList.add("hide"),p(t._element).trigger(Qi.HIDDEN)};if(this._element.classList.remove(zi),this._config.animation){var n=m.getTransitionDurationFromElement(this._element);p(this._element).one(m.TRANSITION_END,e).emulateTransitionEnd(n)}else e()},i._jQueryInterface=function(n){return this.each((function(){var t=p(this),e=t.data(Bi);if(e||(e=new i(this,"object"==typeof n&&n),t.data(Bi,e)),"string"==typeof n){if(void 0===e[n])throw new TypeError('No method named "'+n+'"');e[n](this)}}))},s(i,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"DefaultType",get:function(){return Gi}},{key:"Default",get:function(){return $i}}]),i}();p.fn[Ui]=Zi._jQueryInterface,p.fn[Ui].Constructor=Zi,p.fn[Ui].noConflict=function(){return p.fn[Ui]=Ki,Zi._jQueryInterface},function(){if(void 0===p)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var t=p.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1===t[0]&&9===t[1]&&t[2]<1||4<=t[0])throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(),t.Util=m,t.Alert=g,t.Button=k,t.Carousel=at,t.Collapse=Ct,t.Dropdown=Xe,t.Modal=gn,t.Popover=ii,t.Scrollspy=Ci,t.Tab=Wi,t.Toast=Zi,t.Tooltip=qn,Object.defineProperty(t,"__esModule",{value:!0})}));factory=function($){var defaults={element:"body",position:null,type:"info",allow_dismiss:!0,allow_duplicates:!0,newest_on_top:!1,showProgressbar:!1,placement:{from:"top",align:"right"},offset:20,spacing:10,z_index:1031,delay:5e3,timer:1e3,url_target:"_blank",mouse_over:null,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},onShow:null,onShown:null,onClose:null,onClosed:null,onClick:null,icon_type:"class",template:'<div data-notify="container" class="col-xs-11 col-sm-4 alert alert-{0}" role="alert"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">&times;</button><span data-notify="icon"></span> <span data-notify="title">{1}</span> <span data-notify="message">{2}</span><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a></div>'};String.format=function(){var args=arguments,str=arguments[0];return str.replace(/(\{\{\d\}\}|\{\d\})/g,(function(str){if("{{"===str.substring(0,2))return str;var num=parseInt(str.match(/\d/)[0]);return args[num+1]}))};function Notify(element,content,options){var contentObj={content:{message:"object"==typeof content?content.message:content,title:content.title?content.title:"",icon:content.icon?content.icon:"",url:content.url?content.url:"#",target:content.target?content.target:"-"}};options=$.extend(!0,{},contentObj,options);this.settings=$.extend(!0,{},defaults,options);this._defaults=defaults;"-"===this.settings.content.target&&(this.settings.content.target=this.settings.url_target);this.animations={start:"webkitAnimationStart oanimationstart MSAnimationStart animationstart",end:"webkitAnimationEnd oanimationend MSAnimationEnd animationend"};"number"==typeof this.settings.offset&&(this.settings.offset={x:this.settings.offset,y:this.settings.offset});(this.settings.allow_duplicates||!this.settings.allow_duplicates&&!function(notification){var isDupe=!1;$('[data-notify="container"]').each((function(i,el){var $el=$(el),title=$el.find('[data-notify="title"]').html().trim(),message=$el.find('[data-notify="message"]').html().trim(),isSameTitle=title===$("<div>"+notification.settings.content.title+"</div>").html().trim(),isSameMsg=message===$("<div>"+notification.settings.content.message+"</div>").html().trim(),isSameType=$el.hasClass("alert-"+notification.settings.type);isSameTitle&&isSameMsg&&isSameType&&(isDupe=!0);return!isDupe}));return isDupe}(this))&&this.init()}$.extend(Notify.prototype,{init:function(){var self=this;this.buildNotify();this.settings.content.icon&&this.setIcon();"#"!=this.settings.content.url&&this.styleURL();this.styleDismiss();this.placement();this.bind();this.notify={$ele:this.$ele,update:function(command,update){var commands={};"string"==typeof command?commands[command]=update:commands=command;for(var cmd in commands)switch(cmd){case"type":this.$ele.removeClass("alert-"+self.settings.type);this.$ele.find('[data-notify="progressbar"] > .progress-bar').removeClass("progress-bar-"+self.settings.type);self.settings.type=commands[cmd];this.$ele.addClass("alert-"+commands[cmd]).find('[data-notify="progressbar"] > .progress-bar').addClass("progress-bar-"+commands[cmd]);break;case"icon":var $icon=this.$ele.find('[data-notify="icon"]');if("class"===self.settings.icon_type.toLowerCase())$icon.removeClass(self.settings.content.icon).addClass(commands[cmd]);else{$icon.is("img")||$icon.find("img");$icon.attr("src",commands[cmd])}self.settings.content.icon=commands[command];break;case"progress":var newDelay=self.settings.delay-self.settings.delay*(commands[cmd]/100);this.$ele.data("notify-delay",newDelay);this.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",commands[cmd]).css("width",commands[cmd]+"%");break;case"url":this.$ele.find('[data-notify="url"]').attr("href",commands[cmd]);break;case"target":this.$ele.find('[data-notify="url"]').attr("target",commands[cmd]);break;default:this.$ele.find('[data-notify="'+cmd+'"]').html(commands[cmd])}var posX=this.$ele.outerHeight()+parseInt(self.settings.spacing)+parseInt(self.settings.offset.y);self.reposition(posX)},close:function(){self.close()}}},buildNotify:function(){var content=this.settings.content;this.$ele=$(String.format(this.settings.template,this.settings.type,content.title,content.message,content.url,content.target));this.$ele.attr("data-notify-position",this.settings.placement.from+"-"+this.settings.placement.align);this.settings.allow_dismiss||this.$ele.find('[data-notify="dismiss"]').css("display","none");(this.settings.delay<=0&&!this.settings.showProgressbar||!this.settings.showProgressbar)&&this.$ele.find('[data-notify="progressbar"]').remove()},setIcon:function(){"class"===this.settings.icon_type.toLowerCase()?this.$ele.find('[data-notify="icon"]').addClass(this.settings.content.icon):this.$ele.find('[data-notify="icon"]').is("img")?this.$ele.find('[data-notify="icon"]').attr("src",this.settings.content.icon):this.$ele.find('[data-notify="icon"]').append('<img src="'+this.settings.content.icon+'" alt="Notify Icon" />')},styleDismiss:function(){this.$ele.find('[data-notify="dismiss"]').css({position:"absolute",right:"10px",top:"5px",zIndex:this.settings.z_index+2})},styleURL:function(){this.$ele.find('[data-notify="url"]').css({backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)",height:"100%",left:0,position:"absolute",top:0,width:"100%",zIndex:this.settings.z_index+1})},placement:function(){var self=this,offsetAmt=this.settings.offset.y,css={display:"inline-block",margin:"0px auto",position:this.settings.position?this.settings.position:"body"===this.settings.element?"fixed":"absolute",transition:"all .5s ease-in-out",zIndex:this.settings.z_index},hasAnimation=!1,settings=this.settings;$('[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])').each((function(){offsetAmt=Math.max(offsetAmt,parseInt($(this).css(settings.placement.from))+parseInt($(this).outerHeight())+parseInt(settings.spacing))}));!0===this.settings.newest_on_top&&(offsetAmt=this.settings.offset.y);css[this.settings.placement.from]=offsetAmt+"px";switch(this.settings.placement.align){case"left":case"right":css[this.settings.placement.align]=this.settings.offset.x+"px";break;case"center":css.left=0;css.right=0}this.$ele.css(css).addClass(this.settings.animate.enter);$.each(Array("webkit-","moz-","o-","ms-",""),(function(index,prefix){self.$ele[0].style[prefix+"AnimationIterationCount"]=1}));$(this.settings.element).append(this.$ele);if(!0===this.settings.newest_on_top){offsetAmt=parseInt(offsetAmt)+parseInt(this.settings.spacing)+this.$ele.outerHeight();this.reposition(offsetAmt)}$.isFunction(self.settings.onShow)&&self.settings.onShow.call(this.$ele);this.$ele.one(this.animations.start,(function(){hasAnimation=!0})).one(this.animations.end,(function(){self.$ele.removeClass(self.settings.animate.enter);$.isFunction(self.settings.onShown)&&self.settings.onShown.call(this)}));setTimeout((function(){hasAnimation||$.isFunction(self.settings.onShown)&&self.settings.onShown.call(this)}),600)},bind:function(){var self=this;this.$ele.find('[data-notify="dismiss"]').on("click",(function(){self.close()}));$.isFunction(self.settings.onClick)&&this.$ele.on("click",(function(event){event.target!=self.$ele.find('[data-notify="dismiss"]')[0]&&self.settings.onClick.call(this,event)}));this.$ele.mouseover((function(){$(this).data("data-hover","true")})).mouseout((function(){$(this).data("data-hover","false")}));this.$ele.data("data-hover","false");if(this.settings.delay>0){self.$ele.data("notify-delay",self.settings.delay);var timer=setInterval((function(){var delay=parseInt(self.$ele.data("notify-delay"))-self.settings.timer;if("false"===self.$ele.data("data-hover")&&"pause"===self.settings.mouse_over||"pause"!=self.settings.mouse_over){var percent=(self.settings.delay-delay)/self.settings.delay*100;self.$ele.data("notify-delay",delay);self.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",percent).css("width",percent+"%")}if(delay<=-self.settings.timer){clearInterval(timer);self.close()}}),self.settings.timer)}},close:function(){var self=this,posX=parseInt(this.$ele.css(this.settings.placement.from)),hasAnimation=!1;this.$ele.attr("data-closing","true").addClass(this.settings.animate.exit);self.reposition(posX);$.isFunction(self.settings.onClose)&&self.settings.onClose.call(this.$ele);this.$ele.one(this.animations.start,(function(){hasAnimation=!0})).one(this.animations.end,(function(){$(this).remove();$.isFunction(self.settings.onClosed)&&self.settings.onClosed.call(this)}));setTimeout((function(){if(!hasAnimation){self.$ele.remove();$.isFunction(self.settings.onClosed)&&self.settings.onClosed.call(this)}}),600)},reposition:function(posX){var self=this,notifies='[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])',$elements=this.$ele.nextAll(notifies);!0===this.settings.newest_on_top&&($elements=this.$ele.prevAll(notifies));$elements.each((function(){$(this).css(self.settings.placement.from,posX);posX=parseInt(posX)+parseInt(self.settings.spacing)+$(this).outerHeight()}))}});$.notify=function(content,options){return new Notify(this,content,options).notify};$.notifyDefaults=function(options){return defaults=$.extend(!0,{},defaults,options)};$.notifyClose=function(selector){void 0===selector||"all"===selector?$("[data-notify]").find('[data-notify="dismiss"]').trigger("click"):"success"===selector||"info"===selector||"warning"===selector||"danger"===selector?$(".alert-"+selector+"[data-notify]").find('[data-notify="dismiss"]').trigger("click"):selector?$(selector+"[data-notify]").find('[data-notify="dismiss"]').trigger("click"):$('[data-notify-position="'+selector+'"]').find('[data-notify="dismiss"]').trigger("click")};$.notifyCloseExcept=function(selector){"success"===selector||"info"===selector||"warning"===selector||"danger"===selector?$("[data-notify]").not(".alert-"+selector).find('[data-notify="dismiss"]').trigger("click"):$("[data-notify]").not(selector).find('[data-notify="dismiss"]').trigger("click")}},"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?factory(require("jquery")):factory(jQuery);var factory,t,e,n;
/*!
 * Chart.js v2.8.0
 * https://www.chartjs.org
 * (c) 2019 Chart.js Contributors
 * Released under the MIT License
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(function(){try{return require("moment")}catch(t){}}()):"function"==typeof define&&define.amd?define(["require"],(function(t){return e(function(){try{return t("moment")}catch(t){}}())})):t.Chart=e(t.moment)}(this,(function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e={rgb2hsl:i,rgb2hsv:n,rgb2hwb:a,rgb2cmyk:o,rgb2keyword:s,rgb2xyz:l,rgb2lab:d,rgb2lch:function(t){return x(d(t))},hsl2rgb:u,hsl2hsv:function(t){var e=t[0],i=t[1]/100,n=t[2]/100;return 0===n?[0,0,0]:[e,2*(i*=(n*=2)<=1?n:2-n)/(n+i)*100,(n+i)/2*100]},hsl2hwb:function(t){return a(u(t))},hsl2cmyk:function(t){return o(u(t))},hsl2keyword:function(t){return s(u(t))},hsv2rgb:h,hsv2hsl:function(t){var e,i,n=t[0],a=t[1]/100,o=t[2]/100;return e=a*o,[n,100*(e=(e/=(i=(2-a)*o)<=1?i:2-i)||0),100*(i/=2)]},hsv2hwb:function(t){return a(h(t))},hsv2cmyk:function(t){return o(h(t))},hsv2keyword:function(t){return s(h(t))},hwb2rgb:c,hwb2hsl:function(t){return i(c(t))},hwb2hsv:function(t){return n(c(t))},hwb2cmyk:function(t){return o(c(t))},hwb2keyword:function(t){return s(c(t))},cmyk2rgb:f,cmyk2hsl:function(t){return i(f(t))},cmyk2hsv:function(t){return n(f(t))},cmyk2hwb:function(t){return a(f(t))},cmyk2keyword:function(t){return s(f(t))},keyword2rgb:w,keyword2hsl:function(t){return i(w(t))},keyword2hsv:function(t){return n(w(t))},keyword2hwb:function(t){return a(w(t))},keyword2cmyk:function(t){return o(w(t))},keyword2lab:function(t){return d(w(t))},keyword2xyz:function(t){return l(w(t))},xyz2rgb:p,xyz2lab:m,xyz2lch:function(t){return x(m(t))},lab2xyz:v,lab2rgb:y,lab2lch:x,lch2lab:k,lch2xyz:function(t){return v(k(t))},lch2rgb:function(t){return y(k(t))}};function i(t){var e,i,n=t[0]/255,a=t[1]/255,o=t[2]/255,r=Math.min(n,a,o),s=Math.max(n,a,o),l=s-r;return s==r?e=0:n==s?e=(a-o)/l:a==s?e=2+(o-n)/l:o==s&&(e=4+(n-a)/l),(e=Math.min(60*e,360))<0&&(e+=360),i=(r+s)/2,[e,100*(s==r?0:i<=.5?l/(s+r):l/(2-s-r)),100*i]}function n(t){var e,i,n=t[0],a=t[1],o=t[2],r=Math.min(n,a,o),s=Math.max(n,a,o),l=s-r;return i=0==s?0:l/s*1e3/10,s==r?e=0:n==s?e=(a-o)/l:a==s?e=2+(o-n)/l:o==s&&(e=4+(n-a)/l),(e=Math.min(60*e,360))<0&&(e+=360),[e,i,s/255*1e3/10]}function a(t){var e=t[0],n=t[1],a=t[2];return[i(t)[0],1/255*Math.min(e,Math.min(n,a))*100,100*(a=1-1/255*Math.max(e,Math.max(n,a)))]}function o(t){var e,i=t[0]/255,n=t[1]/255,a=t[2]/255;return[100*((1-i-(e=Math.min(1-i,1-n,1-a)))/(1-e)||0),100*((1-n-e)/(1-e)||0),100*((1-a-e)/(1-e)||0),100*e]}function s(t){return _[JSON.stringify(t)]}function l(t){var e=t[0]/255,i=t[1]/255,n=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*e+.7152*i+.0722*n),100*(.0193*e+.1192*i+.9505*n)]}function d(t){var e=l(t),i=e[0],n=e[1],a=e[2];return n/=100,a/=108.883,i=(i/=95.047)>.008856?Math.pow(i,1/3):7.787*i+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(i-n),200*(n-(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116))]}function u(t){var e,i,n,a,o,r=t[0]/360,s=t[1]/100,l=t[2]/100;if(0==s)return[o=255*l,o,o];e=2*l-(i=l<.5?l*(1+s):l+s-l*s),a=[0,0,0];for(var d=0;d<3;d++)(n=r+1/3*-(d-1))<0&&n++,n>1&&n--,o=6*n<1?e+6*(i-e)*n:2*n<1?i:3*n<2?e+(i-e)*(2/3-n)*6:e,a[d]=255*o;return a}function h(t){var e=t[0]/60,i=t[1]/100,n=t[2]/100,a=Math.floor(e)%6,o=e-Math.floor(e),r=255*n*(1-i),s=255*n*(1-i*o),l=255*n*(1-i*(1-o));n*=255;switch(a){case 0:return[n,l,r];case 1:return[s,n,r];case 2:return[r,n,l];case 3:return[r,s,n];case 4:return[l,r,n];case 5:return[n,r,s]}}function c(t){var e,i,n,a,o=t[0]/360,s=t[1]/100,l=t[2]/100,d=s+l;switch(d>1&&(s/=d,l/=d),n=6*o-(e=Math.floor(6*o)),0!=(1&e)&&(n=1-n),a=s+n*((i=1-l)-s),e){default:case 6:case 0:r=i,g=a,b=s;break;case 1:r=a,g=i,b=s;break;case 2:r=s,g=i,b=a;break;case 3:r=s,g=a,b=i;break;case 4:r=a,g=s,b=i;break;case 5:r=i,g=s,b=a}return[255*r,255*g,255*b]}function f(t){var e=t[0]/100,i=t[1]/100,n=t[2]/100,a=t[3]/100;return[255*(1-Math.min(1,e*(1-a)+a)),255*(1-Math.min(1,i*(1-a)+a)),255*(1-Math.min(1,n*(1-a)+a))]}function p(t){var e,i,n,a=t[0]/100,o=t[1]/100,r=t[2]/100;return i=-.9689*a+1.8758*o+.0415*r,n=.0557*a+-.204*o+1.057*r,e=(e=3.2406*a+-1.5372*o+-.4986*r)>.0031308?1.055*Math.pow(e,1/2.4)-.055:e*=12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,[255*(e=Math.min(Math.max(0,e),1)),255*(i=Math.min(Math.max(0,i),1)),255*(n=Math.min(Math.max(0,n),1))]}function m(t){var e=t[0],i=t[1],n=t[2];return i/=100,n/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(e-i),200*(i-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]}function v(t){var e,i,n,a,o=t[0],r=t[1],s=t[2];return o<=8?a=(i=100*o/903.3)/100*7.787+16/116:(i=100*Math.pow((o+16)/116,3),a=Math.pow(i/100,1/3)),[e=e/95.047<=.008856?e=95.047*(r/500+a-16/116)/7.787:95.047*Math.pow(r/500+a,3),i,n=n/108.883<=.008859?n=108.883*(a-s/200-16/116)/7.787:108.883*Math.pow(a-s/200,3)]}function x(t){var e,i=t[0],n=t[1],a=t[2];return(e=360*Math.atan2(a,n)/2/Math.PI)<0&&(e+=360),[i,Math.sqrt(n*n+a*a),e]}function y(t){return p(v(t))}function k(t){var e,i=t[0],n=t[1];return e=t[2]/360*2*Math.PI,[i,n*Math.cos(e),n*Math.sin(e)]}function w(t){return M[t]}var M={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},_={};for(var C in M)_[JSON.stringify(M[C])]=C;var S=function(){return new T};for(var P in e){S[P+"Raw"]=function(t){return function(i){return"number"==typeof i&&(i=Array.prototype.slice.call(arguments)),e[t](i)}}(P);var I=/(\w+)2(\w+)/.exec(P),A=I[1],D=I[2];(S[A]=S[A]||{})[D]=S[P]=function(t){return function(i){"number"==typeof i&&(i=Array.prototype.slice.call(arguments));var n=e[t](i);if("string"==typeof n||void 0===n)return n;for(var a=0;a<n.length;a++)n[a]=Math.round(n[a]);return n}}(P)}var T=function(){this.convs={}};T.prototype.routeSpace=function(t,e){var i=e[0];return void 0===i?this.getValues(t):("number"==typeof i&&(i=Array.prototype.slice.call(e)),this.setValues(t,i))},T.prototype.setValues=function(t,e){return this.space=t,this.convs={},this.convs[t]=e,this},T.prototype.getValues=function(t){var e=this.convs[t];if(!e){var i=this.space,n=this.convs[i];e=S[i][t](n),this.convs[t]=e}return e},["rgb","hsl","hsv","cmyk","keyword"].forEach((function(t){T.prototype[t]=function(e){return this.routeSpace(t,arguments)}}));var F=S,L={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},R={getRgba:O,getHsla:z,getRgb:function(t){var e=O(t);return e&&e.slice(0,3)},getHsl:function(t){var e=z(t);return e&&e.slice(0,3)},getHwb:B,getAlpha:function(t){var e=O(t);return e?e[3]:(e=z(t))?e[3]:(e=B(t))?e[3]:void 0},hexString:function(t,e){e=void 0!==e&&3===t.length?e:t[3];return"#"+H(t[0])+H(t[1])+H(t[2])+(e>=0&&e<1?H(Math.round(255*e)):"")},rgbString:function(t,e){return e<1||t[3]&&t[3]<1?N(t,e):"rgb("+t[0]+", "+t[1]+", "+t[2]+")"},rgbaString:N,percentString:function(t,e){return e<1||t[3]&&t[3]<1?W(t,e):"rgb("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%)"},percentaString:W,hslString:function(t,e){return e<1||t[3]&&t[3]<1?V(t,e):"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)"},hslaString:V,hwbString:function(t,e){void 0===e&&(e=void 0!==t[3]?t[3]:1);return"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+(void 0!==e&&1!==e?", "+e:"")+")"},keyword:function(t){return j[t.slice(0,3)]}};function O(t){if(t){var e=[0,0,0],i=1,n=t.match(/^#([a-fA-F0-9]{3,4})$/i),a="";if(n){a=(n=n[1])[3];for(var o=0;o<e.length;o++)e[o]=parseInt(n[o]+n[o],16);a&&(i=Math.round(parseInt(a+a,16)/255*100)/100)}else if(n=t.match(/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i)){a=n[2],n=n[1];for(o=0;o<e.length;o++)e[o]=parseInt(n.slice(2*o,2*o+2),16);a&&(i=Math.round(parseInt(a,16)/255*100)/100)}else if(n=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(o=0;o<e.length;o++)e[o]=parseInt(n[o+1]);i=parseFloat(n[4])}else if(n=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(o=0;o<e.length;o++)e[o]=Math.round(2.55*parseFloat(n[o+1]));i=parseFloat(n[4])}else if(n=t.match(/(\w+)/)){if("transparent"==n[1])return[0,0,0,0];if(!(e=L[n[1]]))return}for(o=0;o<e.length;o++)e[o]=E(e[o],0,255);return i=i||0==i?E(i,0,1):1,e[3]=i,e}}function z(t){if(t){var e=t.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var i=parseFloat(e[4]);return[E(parseInt(e[1]),0,360),E(parseFloat(e[2]),0,100),E(parseFloat(e[3]),0,100),E(isNaN(i)?1:i,0,1)]}}}function B(t){if(t){var e=t.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var i=parseFloat(e[4]);return[E(parseInt(e[1]),0,360),E(parseFloat(e[2]),0,100),E(parseFloat(e[3]),0,100),E(isNaN(i)?1:i,0,1)]}}}function N(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+e+")"}function W(t,e){return"rgba("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%, "+(e||t[3]||1)+")"}function V(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+e+")"}function E(t,e,i){return Math.min(Math.max(e,t),i)}function H(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}var j={};for(var q in L)j[L[q]]=q;var Y=function(t){return t instanceof Y?t:this instanceof Y?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof t?(e=R.getRgba(t))?this.setValues("rgb",e):(e=R.getHsla(t))?this.setValues("hsl",e):(e=R.getHwb(t))&&this.setValues("hwb",e):"object"==typeof t&&(void 0!==(e=t).r||void 0!==e.red?this.setValues("rgb",e):void 0!==e.l||void 0!==e.lightness?this.setValues("hsl",e):void 0!==e.v||void 0!==e.value?this.setValues("hsv",e):void 0!==e.w||void 0!==e.whiteness?this.setValues("hwb",e):void 0===e.c&&void 0===e.cyan||this.setValues("cmyk",e)))):new Y(t);var e};Y.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var t=this.values;return 1!==t.alpha?t.hwb.concat([t.alpha]):t.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var t=this.values;return t.rgb.concat([t.alpha])},hslaArray:function(){var t=this.values;return t.hsl.concat([t.alpha])},alpha:function(t){return void 0===t?this.values.alpha:(this.setValues("alpha",t),this)},red:function(t){return this.setChannel("rgb",0,t)},green:function(t){return this.setChannel("rgb",1,t)},blue:function(t){return this.setChannel("rgb",2,t)},hue:function(t){return t&&(t=(t%=360)<0?360+t:t),this.setChannel("hsl",0,t)},saturation:function(t){return this.setChannel("hsl",1,t)},lightness:function(t){return this.setChannel("hsl",2,t)},saturationv:function(t){return this.setChannel("hsv",1,t)},whiteness:function(t){return this.setChannel("hwb",1,t)},blackness:function(t){return this.setChannel("hwb",2,t)},value:function(t){return this.setChannel("hsv",2,t)},cyan:function(t){return this.setChannel("cmyk",0,t)},magenta:function(t){return this.setChannel("cmyk",1,t)},yellow:function(t){return this.setChannel("cmyk",2,t)},black:function(t){return this.setChannel("cmyk",3,t)},hexString:function(){return R.hexString(this.values.rgb)},rgbString:function(){return R.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return R.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return R.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return R.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return R.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return R.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return R.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var t=this.values.rgb;return t[0]<<16|t[1]<<8|t[2]},luminosity:function(){for(var t=this.values.rgb,e=[],i=0;i<t.length;i++){var n=t[i]/255;e[i]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),i=t.luminosity();return e>i?(e+.05)/(i+.05):(i+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},dark:function(){var t=this.values.rgb;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var t=[],e=0;e<3;e++)t[e]=255-this.values.rgb[e];return this.setValues("rgb",t),this},lighten:function(t){var e=this.values.hsl;return e[2]+=e[2]*t,this.setValues("hsl",e),this},darken:function(t){var e=this.values.hsl;return e[2]-=e[2]*t,this.setValues("hsl",e),this},saturate:function(t){var e=this.values.hsl;return e[1]+=e[1]*t,this.setValues("hsl",e),this},desaturate:function(t){var e=this.values.hsl;return e[1]-=e[1]*t,this.setValues("hsl",e),this},whiten:function(t){var e=this.values.hwb;return e[1]+=e[1]*t,this.setValues("hwb",e),this},blacken:function(t){var e=this.values.hwb;return e[2]+=e[2]*t,this.setValues("hwb",e),this},greyscale:function(){var t=this.values.rgb,e=.3*t[0]+.59*t[1]+.11*t[2];return this.setValues("rgb",[e,e,e]),this},clearer:function(t){var e=this.values.alpha;return this.setValues("alpha",e-e*t),this},opaquer:function(t){var e=this.values.alpha;return this.setValues("alpha",e+e*t),this},rotate:function(t){var e=this.values.hsl,i=(e[0]+t)%360;return e[0]=i<0?360+i:i,this.setValues("hsl",e),this},mix:function(t,e){var i=t,n=void 0===e?.5:e,a=2*n-1,o=this.alpha()-i.alpha(),r=((a*o==-1?a:(a+o)/(1+a*o))+1)/2,s=1-r;return this.rgb(r*this.red()+s*i.red(),r*this.green()+s*i.green(),r*this.blue()+s*i.blue()).alpha(this.alpha()*n+i.alpha()*(1-n))},toJSON:function(){return this.rgb()},clone:function(){var t,e,i=new Y,n=this.values,a=i.values;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],"[object Array]"===(e={}.toString.call(t))?a[o]=t.slice(0):"[object Number]"===e?a[o]=t:console.error("unexpected color value:",t));return i}},Y.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},Y.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},Y.prototype.getValues=function(t){for(var e=this.values,i={},n=0;n<t.length;n++)i[t.charAt(n)]=e[t][n];return 1!==e.alpha&&(i.a=e.alpha),i},Y.prototype.setValues=function(t,e){var i,n,a=this.values,o=this.spaces,r=this.maxes,s=1;if(this.valid=!0,"alpha"===t)s=e;else if(e.length)a[t]=e.slice(0,t.length),s=e[t.length];else if(void 0!==e[t.charAt(0)]){for(i=0;i<t.length;i++)a[t][i]=e[t.charAt(i)];s=e.a}else if(void 0!==e[o[t][0]]){var l=o[t];for(i=0;i<t.length;i++)a[t][i]=e[l[i]];s=e.alpha}if(a.alpha=Math.max(0,Math.min(1,void 0===s?a.alpha:s)),"alpha"===t)return!1;for(i=0;i<t.length;i++)n=Math.max(0,Math.min(r[t][i],a[t][i])),a[t][i]=Math.round(n);for(var d in o)d!==t&&(a[d]=F[t][d](a[t]));return!0},Y.prototype.setSpace=function(t,e){var i=e[0];return void 0===i?this.getValues(t):("number"==typeof i&&(i=Array.prototype.slice.call(e)),this.setValues(t,i),this)},Y.prototype.setChannel=function(t,e,i){var n=this.values[t];return void 0===i?n[e]:i===n[e]?this:(n[e]=i,this.setValues(t,n),this)},"undefined"!=typeof window&&(window.Color=Y);var U,X=Y,K={noop:function(){},uid:(U=0,function(){return U++}),isNullOrUndef:function(t){return null==t},isArray:function(t){if(Array.isArray&&Array.isArray(t))return!0;var e=Object.prototype.toString.call(t);return"[object"===e.substr(0,7)&&"Array]"===e.substr(-6)},isObject:function(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)},isFinite:function(t){return("number"==typeof t||t instanceof Number)&&isFinite(t)},valueOrDefault:function(t,e){return void 0===t?e:t},valueAtIndexOrDefault:function(t,e,i){return K.valueOrDefault(K.isArray(t)?t[e]:t,i)},callback:function(t,e,i){if(t&&"function"==typeof t.call)return t.apply(i,e)},each:function(t,e,i,n){var a,o,r;if(K.isArray(t))if(o=t.length,n)for(a=o-1;a>=0;a--)e.call(i,t[a],a);else for(a=0;a<o;a++)e.call(i,t[a],a);else if(K.isObject(t))for(o=(r=Object.keys(t)).length,a=0;a<o;a++)e.call(i,t[r[a]],r[a])},arrayEquals:function(t,e){var i,n,a,o;if(!t||!e||t.length!==e.length)return!1;for(i=0,n=t.length;i<n;++i)if(a=t[i],o=e[i],a instanceof Array&&o instanceof Array){if(!K.arrayEquals(a,o))return!1}else if(a!==o)return!1;return!0},clone:function(t){if(K.isArray(t))return t.map(K.clone);if(K.isObject(t)){for(var e={},i=Object.keys(t),n=i.length,a=0;a<n;++a)e[i[a]]=K.clone(t[i[a]]);return e}return t},_merger:function(t,e,i,n){var a=e[t],o=i[t];K.isObject(a)&&K.isObject(o)?K.merge(a,o,n):e[t]=K.clone(o)},_mergerIf:function(t,e,i){var n=e[t],a=i[t];K.isObject(n)&&K.isObject(a)?K.mergeIf(n,a):e.hasOwnProperty(t)||(e[t]=K.clone(a))},merge:function(t,e,i){var n,a,o,r,s,l=K.isArray(e)?e:[e],d=l.length;if(!K.isObject(t))return t;for(n=(i=i||{}).merger||K._merger,a=0;a<d;++a)if(e=l[a],K.isObject(e))for(s=0,r=(o=Object.keys(e)).length;s<r;++s)n(o[s],t,e,i);return t},mergeIf:function(t,e){return K.merge(t,e,{merger:K._mergerIf})},extend:function(t){for(var e=function(e,i){t[i]=e},i=1,n=arguments.length;i<n;++i)K.each(arguments[i],e);return t},inherits:function(t){var e=this,i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},n=function(){this.constructor=i};return n.prototype=e.prototype,i.prototype=new n,i.extend=K.inherits,t&&K.extend(i.prototype,t),i.__super__=e.prototype,i}},G=K;K.callCallback=K.callback,K.indexOf=function(t,e,i){return Array.prototype.indexOf.call(t,e,i)},K.getValueOrDefault=K.valueOrDefault,K.getValueAtIndexOrDefault=K.valueAtIndexOrDefault;var Z={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return(t-=1)*t*t+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-((t-=1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return(t-=1)*t*t*t*t+1},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return 1-Math.cos(t*(Math.PI/2))},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return t>=1?t:-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-(t-=1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1===t?1:(i||(i=.3),n<1?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i))},easeOutElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1===t?1:(i||(i=.3),n<1?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/i)+1)},easeInOutElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:2==(t/=.5)?1:(i||(i=.45),n<1?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),t<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*.5+1)},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:function(t){return 1-Z.easeOutBounce(1-t)},easeOutBounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:function(t){return t<.5?.5*Z.easeInBounce(2*t):.5*Z.easeOutBounce(2*t-1)+.5}},$={effects:Z};G.easingEffects=Z;var J=Math.PI,Q=J/180,tt=2*J,et=J/2,it=J/4,nt=2*J/3,at={clear:function(t){t.ctx.clearRect(0,0,t.width,t.height)},roundedRect:function(t,e,i,n,a,o){if(o){var r=Math.min(o,a/2,n/2),s=e+r,l=i+r,d=e+n-r,u=i+a-r;t.moveTo(e,l),s<d&&l<u?(t.arc(s,l,r,-J,-et),t.arc(d,l,r,-et,0),t.arc(d,u,r,0,et),t.arc(s,u,r,et,J)):s<d?(t.moveTo(s,i),t.arc(d,l,r,-et,et),t.arc(s,l,r,et,J+et)):l<u?(t.arc(s,l,r,-J,0),t.arc(s,u,r,0,J)):t.arc(s,l,r,-J,J),t.closePath(),t.moveTo(e,i)}else t.rect(e,i,n,a)},drawPoint:function(t,e,i,n,a,o){var r,s,l,d,u,h=(o||0)*Q;if(!e||"object"!=typeof e||"[object HTMLImageElement]"!==(r=e.toString())&&"[object HTMLCanvasElement]"!==r){if(!(isNaN(i)||i<=0)){switch(t.beginPath(),e){default:t.arc(n,a,i,0,tt),t.closePath();break;case"triangle":t.moveTo(n+Math.sin(h)*i,a-Math.cos(h)*i),h+=nt,t.lineTo(n+Math.sin(h)*i,a-Math.cos(h)*i),h+=nt,t.lineTo(n+Math.sin(h)*i,a-Math.cos(h)*i),t.closePath();break;case"rectRounded":d=i-(u=.516*i),s=Math.cos(h+it)*d,l=Math.sin(h+it)*d,t.arc(n-s,a-l,u,h-J,h-et),t.arc(n+l,a-s,u,h-et,h),t.arc(n+s,a+l,u,h,h+et),t.arc(n-l,a+s,u,h+et,h+J),t.closePath();break;case"rect":if(!o){d=Math.SQRT1_2*i,t.rect(n-d,a-d,2*d,2*d);break}h+=it;case"rectRot":s=Math.cos(h)*i,l=Math.sin(h)*i,t.moveTo(n-s,a-l),t.lineTo(n+l,a-s),t.lineTo(n+s,a+l),t.lineTo(n-l,a+s),t.closePath();break;case"crossRot":h+=it;case"cross":s=Math.cos(h)*i,l=Math.sin(h)*i,t.moveTo(n-s,a-l),t.lineTo(n+s,a+l),t.moveTo(n+l,a-s),t.lineTo(n-l,a+s);break;case"star":s=Math.cos(h)*i,l=Math.sin(h)*i,t.moveTo(n-s,a-l),t.lineTo(n+s,a+l),t.moveTo(n+l,a-s),t.lineTo(n-l,a+s),h+=it,s=Math.cos(h)*i,l=Math.sin(h)*i,t.moveTo(n-s,a-l),t.lineTo(n+s,a+l),t.moveTo(n+l,a-s),t.lineTo(n-l,a+s);break;case"line":s=Math.cos(h)*i,l=Math.sin(h)*i,t.moveTo(n-s,a-l),t.lineTo(n+s,a+l);break;case"dash":t.moveTo(n,a),t.lineTo(n+Math.cos(h)*i,a+Math.sin(h)*i)}t.fill(),t.stroke()}}else t.drawImage(e,n-e.width/2,a-e.height/2,e.width,e.height)},_isPointInArea:function(t,e){return t.x>e.left-1e-6&&t.x<e.right+1e-6&&t.y>e.top-1e-6&&t.y<e.bottom+1e-6},clipArea:function(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()},unclipArea:function(t){t.restore()},lineTo:function(t,e,i,n){var a=i.steppedLine;if(a){if("middle"===a){var o=(e.x+i.x)/2;t.lineTo(o,n?i.y:e.y),t.lineTo(o,n?e.y:i.y)}else"after"===a&&!n||"after"!==a&&n?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}else i.tension?t.bezierCurveTo(n?e.controlPointPreviousX:e.controlPointNextX,n?e.controlPointPreviousY:e.controlPointNextY,n?i.controlPointNextX:i.controlPointPreviousX,n?i.controlPointNextY:i.controlPointPreviousY,i.x,i.y):t.lineTo(i.x,i.y)}},ot=at;G.clear=at.clear,G.drawRoundedRectangle=function(t){t.beginPath(),at.roundedRect.apply(at,arguments)};var rt={_set:function(t,e){return G.merge(this[t]||(this[t]={}),e)}};rt._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var st=rt,lt=G.valueOrDefault,dt={toLineHeight:function(t,e){var i=(""+t).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!i||"normal"===i[1])return 1.2*e;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100}return e*t},toPadding:function(t){var e,i,n,a;return G.isObject(t)?(e=+t.top||0,i=+t.right||0,n=+t.bottom||0,a=+t.left||0):e=i=n=a=+t||0,{top:e,right:i,bottom:n,left:a,height:e+n,width:a+i}},_parseFont:function(t){var e=st.global,i=lt(t.fontSize,e.defaultFontSize),n={family:lt(t.fontFamily,e.defaultFontFamily),lineHeight:G.options.toLineHeight(lt(t.lineHeight,e.defaultLineHeight),i),size:i,style:lt(t.fontStyle,e.defaultFontStyle),weight:null,string:""};return n.string=function(t){return!t||G.isNullOrUndef(t.size)||G.isNullOrUndef(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(n),n},resolve:function(t,e,i){var n,a,o;for(n=0,a=t.length;n<a;++n)if(void 0!==(o=t[n])&&(void 0!==e&&"function"==typeof o&&(o=o(e)),void 0!==i&&G.isArray(o)&&(o=o[i]),void 0!==o))return o}},ut=G,ht=$,ct=ot,ft=dt;ut.easing=ht,ut.canvas=ct,ut.options=ft;var gt=function(t){ut.extend(this,t),this.initialize.apply(this,arguments)};ut.extend(gt.prototype,{initialize:function(){this.hidden=!1},pivot:function(){var t=this;return t._view||(t._view=ut.clone(t._model)),t._start={},t},transition:function(t){var e=this,i=e._model,n=e._start,a=e._view;return i&&1!==t?(a||(a=e._view={}),n||(n=e._start={}),function(t,e,i,n){var a,o,r,s,l,d,u,h,c,f=Object.keys(i);for(a=0,o=f.length;a<o;++a)if(d=i[r=f[a]],e.hasOwnProperty(r)||(e[r]=d),(s=e[r])!==d&&"_"!==r[0]){if(t.hasOwnProperty(r)||(t[r]=s),(u=typeof d)==typeof(l=t[r]))if("string"===u){if((h=X(l)).valid&&(c=X(d)).valid){e[r]=c.mix(h,n).rgbString();continue}}else if(ut.isFinite(l)&&ut.isFinite(d)){e[r]=l+(d-l)*n;continue}e[r]=d}}(n,a,i,t),e):(e._view=i,e._start=null,e)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return ut.isNumber(this._model.x)&&ut.isNumber(this._model.y)}}),gt.extend=ut.inherits;var pt=gt,mt=pt.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),vt=mt;Object.defineProperty(mt.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(mt.prototype,"chartInstance",{get:function(){return this.chart},set:function(t){this.chart=t}}),st._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:ut.noop,onComplete:ut.noop}});var bt={animations:[],request:null,addAnimation:function(t,e,i,n){var a,o,r=this.animations;for(e.chart=t,e.startTime=Date.now(),e.duration=i,n||(t.animating=!0),a=0,o=r.length;a<o;++a)if(r[a].chart===t)return void(r[a]=e);r.push(e),1===r.length&&this.requestAnimationFrame()},cancelAnimation:function(t){var e=ut.findIndex(this.animations,(function(e){return e.chart===t}));-1!==e&&(this.animations.splice(e,1),t.animating=!1)},requestAnimationFrame:function(){var t=this;null===t.request&&(t.request=ut.requestAnimFrame.call(window,(function(){t.request=null,t.startDigest()})))},startDigest:function(){this.advance(),this.animations.length>0&&this.requestAnimationFrame()},advance:function(){for(var t,e,i,n,a=this.animations,o=0;o<a.length;)e=(t=a[o]).chart,i=t.numSteps,n=Math.floor((Date.now()-t.startTime)/t.duration*i)+1,t.currentStep=Math.min(n,i),ut.callback(t.render,[e,t],e),ut.callback(t.onAnimationProgress,[t],e),t.currentStep>=i?(ut.callback(t.onAnimationComplete,[t],e),e.animating=!1,a.splice(o,1)):++o}},xt=ut.options.resolve,yt=["push","pop","shift","splice","unshift"];function kt(t,e){var i=t._chartjs;if(i){var n=i.listeners,a=n.indexOf(e);-1!==a&&n.splice(a,1),n.length>0||(yt.forEach((function(e){delete t[e]})),delete t._chartjs)}}var wt=function(t,e){this.initialize(t,e)};ut.extend(wt.prototype,{datasetElementType:null,dataElementType:null,initialize:function(t,e){this.chart=t,this.index=e,this.linkScales(),this.addElements()},updateIndex:function(t){this.index=t},linkScales:function(){var t=this,e=t.getMeta(),i=t.getDataset();null!==e.xAxisID&&e.xAxisID in t.chart.scales||(e.xAxisID=i.xAxisID||t.chart.options.scales.xAxes[0].id),null!==e.yAxisID&&e.yAxisID in t.chart.scales||(e.yAxisID=i.yAxisID||t.chart.options.scales.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(t){return this.chart.scales[t]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this.update(!0)},destroy:function(){this._data&&kt(this._data,this)},createMetaDataset:function(){var t=this.datasetElementType;return t&&new t({_chart:this.chart,_datasetIndex:this.index})},createMetaData:function(t){var e=this.dataElementType;return e&&new e({_chart:this.chart,_datasetIndex:this.index,_index:t})},addElements:function(){var t,e,i=this.getMeta(),n=this.getDataset().data||[],a=i.data;for(t=0,e=n.length;t<e;++t)a[t]=a[t]||this.createMetaData(t);i.dataset=i.dataset||this.createMetaDataset()},addElementAndReset:function(t){var e=this.createMetaData(t);this.getMeta().data.splice(t,0,e),this.updateElement(e,t,!0)},buildOrUpdateElements:function(){var t,e,i=this,n=i.getDataset(),a=n.data||(n.data=[]);i._data!==a&&(i._data&&kt(i._data,i),a&&Object.isExtensible(a)&&(e=i,(t=a)._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),yt.forEach((function(e){var i="onData"+e.charAt(0).toUpperCase()+e.slice(1),n=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:function(){var e=Array.prototype.slice.call(arguments),a=n.apply(this,e);return ut.each(t._chartjs.listeners,(function(t){"function"==typeof t[i]&&t[i].apply(t,e)})),a}})})))),i._data=a),i.resyncElements()},update:ut.noop,transition:function(t){for(var e=this.getMeta(),i=e.data||[],n=i.length,a=0;a<n;++a)i[a].transition(t);e.dataset&&e.dataset.transition(t)},draw:function(){var t=this.getMeta(),e=t.data||[],i=e.length,n=0;for(t.dataset&&t.dataset.draw();n<i;++n)e[n].draw()},removeHoverStyle:function(t){ut.merge(t._model,t.$previousStyle||{}),delete t.$previousStyle},setHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex],i=t._index,n=t.custom||{},a=t._model,o=ut.getHoverColor;t.$previousStyle={backgroundColor:a.backgroundColor,borderColor:a.borderColor,borderWidth:a.borderWidth},a.backgroundColor=xt([n.hoverBackgroundColor,e.hoverBackgroundColor,o(a.backgroundColor)],void 0,i),a.borderColor=xt([n.hoverBorderColor,e.hoverBorderColor,o(a.borderColor)],void 0,i),a.borderWidth=xt([n.hoverBorderWidth,e.hoverBorderWidth,a.borderWidth],void 0,i)},resyncElements:function(){var t=this.getMeta(),e=this.getDataset().data,i=t.data.length,n=e.length;n<i?t.data.splice(n,i-n):n>i&&this.insertElements(i,n-i)},insertElements:function(t,e){for(var i=0;i<e;++i)this.addElementAndReset(t+i)},onDataPush:function(){var t=arguments.length;this.insertElements(this.getDataset().data.length-t,t)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(t,e){this.getMeta().data.splice(t,e),this.insertElements(t,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),wt.extend=ut.inherits;var Mt=wt;st._set("global",{elements:{arc:{backgroundColor:st.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var _t=pt.extend({inLabelRange:function(t){var e=this._view;return!!e&&Math.pow(t-e.x,2)<Math.pow(e.radius+e.hoverRadius,2)},inRange:function(t,e){var i=this._view;if(i){for(var n=ut.getAngleFromPoint(i,{x:t,y:e}),a=n.angle,o=n.distance,r=i.startAngle,s=i.endAngle;s<r;)s+=2*Math.PI;for(;a>s;)a-=2*Math.PI;for(;a<r;)a+=2*Math.PI;var l=a>=r&&a<=s,d=o>=i.innerRadius&&o<=i.outerRadius;return l&&d}return!1},getCenterPoint:function(){var t=this._view,e=(t.startAngle+t.endAngle)/2,i=(t.innerRadius+t.outerRadius)/2;return{x:t.x+Math.cos(e)*i,y:t.y+Math.sin(e)*i}},getArea:function(){var t=this._view;return Math.PI*((t.endAngle-t.startAngle)/(2*Math.PI))*(Math.pow(t.outerRadius,2)-Math.pow(t.innerRadius,2))},tooltipPosition:function(){var t=this._view,e=t.startAngle+(t.endAngle-t.startAngle)/2,i=(t.outerRadius-t.innerRadius)/2+t.innerRadius;return{x:t.x+Math.cos(e)*i,y:t.y+Math.sin(e)*i}},draw:function(){var t,e=this._chart.ctx,i=this._view,n=i.startAngle,a=i.endAngle,o="inner"===i.borderAlign?.33:0;e.save(),e.beginPath(),e.arc(i.x,i.y,Math.max(i.outerRadius-o,0),n,a),e.arc(i.x,i.y,i.innerRadius,a,n,!0),e.closePath(),e.fillStyle=i.backgroundColor,e.fill(),i.borderWidth&&("inner"===i.borderAlign?(e.beginPath(),t=o/i.outerRadius,e.arc(i.x,i.y,i.outerRadius,n-t,a+t),i.innerRadius>o?(t=o/i.innerRadius,e.arc(i.x,i.y,i.innerRadius-o,a+t,n-t,!0)):e.arc(i.x,i.y,o,a+Math.PI/2,n-Math.PI/2),e.closePath(),e.clip(),e.beginPath(),e.arc(i.x,i.y,i.outerRadius,n,a),e.arc(i.x,i.y,i.innerRadius,a,n,!0),e.closePath(),e.lineWidth=2*i.borderWidth,e.lineJoin="round"):(e.lineWidth=i.borderWidth,e.lineJoin="bevel"),e.strokeStyle=i.borderColor,e.stroke()),e.restore()}}),Ct=ut.valueOrDefault,St=st.global.defaultColor;st._set("global",{elements:{line:{tension:.4,backgroundColor:St,borderWidth:3,borderColor:St,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var Pt=pt.extend({draw:function(){var t,e,i,n,a=this._view,o=this._chart.ctx,r=a.spanGaps,s=this._children.slice(),l=st.global,d=l.elements.line,u=-1;for(this._loop&&s.length&&s.push(s[0]),o.save(),o.lineCap=a.borderCapStyle||d.borderCapStyle,o.setLineDash&&o.setLineDash(a.borderDash||d.borderDash),o.lineDashOffset=Ct(a.borderDashOffset,d.borderDashOffset),o.lineJoin=a.borderJoinStyle||d.borderJoinStyle,o.lineWidth=Ct(a.borderWidth,d.borderWidth),o.strokeStyle=a.borderColor||l.defaultColor,o.beginPath(),u=-1,t=0;t<s.length;++t)e=s[t],i=ut.previousItem(s,t),n=e._view,0===t?n.skip||(o.moveTo(n.x,n.y),u=t):(i=-1===u?i:s[u],n.skip||(u!==t-1&&!r||-1===u?o.moveTo(n.x,n.y):ut.canvas.lineTo(o,i._view,e._view),u=t));o.stroke(),o.restore()}}),It=ut.valueOrDefault,At=st.global.defaultColor;function Dt(t){var e=this._view;return!!e&&Math.abs(t-e.x)<e.radius+e.hitRadius}st._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:At,borderColor:At,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var Tt=pt.extend({inRange:function(t,e){var i=this._view;return!!i&&Math.pow(t-i.x,2)+Math.pow(e-i.y,2)<Math.pow(i.hitRadius+i.radius,2)},inLabelRange:Dt,inXRange:Dt,inYRange:function(t){var e=this._view;return!!e&&Math.abs(t-e.y)<e.radius+e.hitRadius},getCenterPoint:function(){var t=this._view;return{x:t.x,y:t.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y,padding:t.radius+t.borderWidth}},draw:function(t){var e=this._view,i=this._chart.ctx,n=e.pointStyle,a=e.rotation,o=e.radius,r=e.x,s=e.y,l=st.global,d=l.defaultColor;e.skip||(void 0===t||ut.canvas._isPointInArea(e,t))&&(i.strokeStyle=e.borderColor||d,i.lineWidth=It(e.borderWidth,l.elements.point.borderWidth),i.fillStyle=e.backgroundColor||d,ut.canvas.drawPoint(i,n,o,r,s,a))}}),Ft=st.global.defaultColor;function Lt(t){return t&&void 0!==t.width}function Rt(t){var e,i,n,a,o;return Lt(t)?(o=t.width/2,e=t.x-o,i=t.x+o,n=Math.min(t.y,t.base),a=Math.max(t.y,t.base)):(o=t.height/2,e=Math.min(t.x,t.base),i=Math.max(t.x,t.base),n=t.y-o,a=t.y+o),{left:e,top:n,right:i,bottom:a}}function Ot(t,e,i){return t===e?i:t===i?e:t}function Bt(t,e,i){var n=null===e,a=null===i,o=!(!t||n&&a)&&Rt(t);return o&&(n||e>=o.left&&e<=o.right)&&(a||i>=o.top&&i<=o.bottom)}st._set("global",{elements:{rectangle:{backgroundColor:Ft,borderColor:Ft,borderSkipped:"bottom",borderWidth:0}}});var Nt=pt.extend({draw:function(){var t=this._chart.ctx,e=this._view,i=function(t){var e=Rt(t),i=e.right-e.left,n=e.bottom-e.top,a=function(t,e,i){var n,a,o,r,s=t.borderWidth,l=function(t){var e=t.borderSkipped,i={};return e?(t.horizontal?t.base>t.x&&(e=Ot(e,"left","right")):t.base<t.y&&(e=Ot(e,"bottom","top")),i[e]=!0,i):i}(t);return ut.isObject(s)?(n=+s.top||0,a=+s.right||0,o=+s.bottom||0,r=+s.left||0):n=a=o=r=+s||0,{t:l.top||n<0?0:n>i?i:n,r:l.right||a<0?0:a>e?e:a,b:l.bottom||o<0?0:o>i?i:o,l:l.left||r<0?0:r>e?e:r}}(t,i/2,n/2);return{outer:{x:e.left,y:e.top,w:i,h:n},inner:{x:e.left+a.l,y:e.top+a.t,w:i-a.l-a.r,h:n-a.t-a.b}}}(e),n=i.outer,a=i.inner;t.fillStyle=e.backgroundColor,t.fillRect(n.x,n.y,n.w,n.h),n.w===a.w&&n.h===a.h||(t.save(),t.beginPath(),t.rect(n.x,n.y,n.w,n.h),t.clip(),t.fillStyle=e.borderColor,t.rect(a.x,a.y,a.w,a.h),t.fill("evenodd"),t.restore())},height:function(){var t=this._view;return t.base-t.y},inRange:function(t,e){return Bt(this._view,t,e)},inLabelRange:function(t,e){var i=this._view;return Lt(i)?Bt(i,t,null):Bt(i,null,e)},inXRange:function(t){return Bt(this._view,t,null)},inYRange:function(t){return Bt(this._view,null,t)},getCenterPoint:function(){var t,e,i=this._view;return Lt(i)?(t=i.x,e=(i.y+i.base)/2):(t=(i.x+i.base)/2,e=i.y),{x:t,y:e}},getArea:function(){var t=this._view;return Lt(t)?t.width*Math.abs(t.y-t.base):t.height*Math.abs(t.x-t.base)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y}}}),Wt={},Vt=_t,Et=Pt,Ht=Tt,jt=Nt;Wt.Arc=Vt,Wt.Line=Et,Wt.Point=Ht,Wt.Rectangle=jt;var qt=ut.options.resolve;st._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}});var Yt=Mt.extend({dataElementType:Wt.Rectangle,initialize:function(){var t;Mt.prototype.initialize.apply(this,arguments),(t=this.getMeta()).stack=this.getDataset().stack,t.bar=!0},update:function(t){var e,i,n=this.getMeta().data;for(this._ruler=this.getRuler(),e=0,i=n.length;e<i;++e)this.updateElement(n[e],e,t)},updateElement:function(t,e,i){var n=this,a=n.getMeta(),o=n.getDataset(),r=n._resolveElementOptions(t,e);t._xScale=n.getScaleForId(a.xAxisID),t._yScale=n.getScaleForId(a.yAxisID),t._datasetIndex=n.index,t._index=e,t._model={backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderSkipped:r.borderSkipped,borderWidth:r.borderWidth,datasetLabel:o.label,label:n.chart.data.labels[e]},n._updateElementGeometry(t,e,i),t.pivot()},_updateElementGeometry:function(t,e,i){var n=this,a=t._model,o=n._getValueScale(),r=o.getBasePixel(),s=o.isHorizontal(),l=n._ruler||n.getRuler(),d=n.calculateBarValuePixels(n.index,e),u=n.calculateBarIndexPixels(n.index,e,l);a.horizontal=s,a.base=i?r:d.base,a.x=s?i?r:d.head:u.center,a.y=s?u.center:i?r:d.head,a.height=s?u.size:void 0,a.width=s?void 0:u.size},_getStacks:function(t){var e,i,n=this.chart,a=this._getIndexScale().options.stacked,o=void 0===t?n.data.datasets.length:t+1,r=[];for(e=0;e<o;++e)(i=n.getDatasetMeta(e)).bar&&n.isDatasetVisible(e)&&(!1===a||!0===a&&-1===r.indexOf(i.stack)||void 0===a&&(void 0===i.stack||-1===r.indexOf(i.stack)))&&r.push(i.stack);return r},getStackCount:function(){return this._getStacks().length},getStackIndex:function(t,e){var i=this._getStacks(t),n=void 0!==e?i.indexOf(e):-1;return-1===n?i.length-1:n},getRuler:function(){var t,e,i=this._getIndexScale(),n=this.getStackCount(),a=this.index,o=i.isHorizontal(),r=o?i.left:i.top,s=r+(o?i.width:i.height),l=[];for(t=0,e=this.getMeta().data.length;t<e;++t)l.push(i.getPixelForValue(null,t,a));return{min:ut.isNullOrUndef(i.options.barThickness)?function(t,e){var i,n,a,o,r=t.isHorizontal()?t.width:t.height,s=t.getTicks();for(a=1,o=e.length;a<o;++a)r=Math.min(r,Math.abs(e[a]-e[a-1]));for(a=0,o=s.length;a<o;++a)n=t.getPixelForTick(a),r=a>0?Math.min(r,n-i):r,i=n;return r}(i,l):-1,pixels:l,start:r,end:s,stackCount:n,scale:i}},calculateBarValuePixels:function(t,e){var i,n,a,o,r,s,l=this.chart,d=this.getMeta(),u=this._getValueScale(),h=u.isHorizontal(),c=l.data.datasets,f=+u.getRightValue(c[t].data[e]),g=u.options.minBarLength,p=u.options.stacked,m=d.stack,v=0;if(p||void 0===p&&void 0!==m)for(i=0;i<t;++i)(n=l.getDatasetMeta(i)).bar&&n.stack===m&&n.controller._getValueScaleId()===u.id&&l.isDatasetVisible(i)&&(a=+u.getRightValue(c[i].data[e]),(f<0&&a<0||f>=0&&a>0)&&(v+=a));return o=u.getPixelForValue(v),s=(r=u.getPixelForValue(v+f))-o,void 0!==g&&Math.abs(s)<g&&(s=g,r=f>=0&&!h||f<0&&h?o-g:o+g),{size:s,base:o,head:r,center:r+s/2}},calculateBarIndexPixels:function(t,e,i){var n=i.scale.options,a="flex"===n.barThickness?function(t,e,i){var n,a=e.pixels,o=a[t],r=t>0?a[t-1]:null,s=t<a.length-1?a[t+1]:null,l=i.categoryPercentage;return null===r&&(r=o-(null===s?e.end-e.start:s-o)),null===s&&(s=o+o-r),n=o-(o-Math.min(r,s))/2*l,{chunk:Math.abs(s-r)/2*l/e.stackCount,ratio:i.barPercentage,start:n}}(e,i,n):function(t,e,i){var n,a,o=i.barThickness,r=e.stackCount,s=e.pixels[t];return ut.isNullOrUndef(o)?(n=e.min*i.categoryPercentage,a=i.barPercentage):(n=o*r,a=1),{chunk:n/r,ratio:a,start:s-n/2}}(e,i,n),o=this.getStackIndex(t,this.getMeta().stack),r=a.start+a.chunk*o+a.chunk/2,s=Math.min(ut.valueOrDefault(n.maxBarThickness,1/0),a.chunk*a.ratio);return{base:r-s/2,head:r+s/2,center:r,size:s}},draw:function(){var t=this.chart,e=this._getValueScale(),i=this.getMeta().data,n=this.getDataset(),a=i.length,o=0;for(ut.canvas.clipArea(t.ctx,t.chartArea);o<a;++o)isNaN(e.getRightValue(n.data[o]))||i[o].draw();ut.canvas.unclipArea(t.ctx)},_resolveElementOptions:function(t,e){var i,n,a,o=this.chart,r=o.data.datasets[this.index],s=t.custom||{},l=o.options.elements.rectangle,d={},u={chart:o,dataIndex:e,dataset:r,datasetIndex:this.index},h=["backgroundColor","borderColor","borderSkipped","borderWidth"];for(i=0,n=h.length;i<n;++i)d[a=h[i]]=qt([s[a],r[a],l[a]],u,e);return d}}),Ut=ut.valueOrDefault,Xt=ut.options.resolve;st._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(t,e){var i=e.datasets[t.datasetIndex].label||"",n=e.datasets[t.datasetIndex].data[t.index];return i+": ("+t.xLabel+", "+t.yLabel+", "+n.r+")"}}}});var Kt=Mt.extend({dataElementType:Wt.Point,update:function(t){var e=this,i=e.getMeta().data;ut.each(i,(function(i,n){e.updateElement(i,n,t)}))},updateElement:function(t,e,i){var n=this,a=n.getMeta(),o=t.custom||{},r=n.getScaleForId(a.xAxisID),s=n.getScaleForId(a.yAxisID),l=n._resolveElementOptions(t,e),d=n.getDataset().data[e],u=n.index,h=i?r.getPixelForDecimal(.5):r.getPixelForValue("object"==typeof d?d:NaN,e,u),c=i?s.getBasePixel():s.getPixelForValue(d,e,u);t._xScale=r,t._yScale=s,t._options=l,t._datasetIndex=u,t._index=e,t._model={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,hitRadius:l.hitRadius,pointStyle:l.pointStyle,rotation:l.rotation,radius:i?0:l.radius,skip:o.skip||isNaN(h)||isNaN(c),x:h,y:c},t.pivot()},setHoverStyle:function(t){var e=t._model,i=t._options,n=ut.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=Ut(i.hoverBackgroundColor,n(i.backgroundColor)),e.borderColor=Ut(i.hoverBorderColor,n(i.borderColor)),e.borderWidth=Ut(i.hoverBorderWidth,i.borderWidth),e.radius=i.radius+i.hoverRadius},_resolveElementOptions:function(t,e){var i,n,a,o=this.chart,r=o.data.datasets[this.index],s=t.custom||{},l=o.options.elements.point,d=r.data[e],u={},h={chart:o,dataIndex:e,dataset:r,datasetIndex:this.index},c=["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"];for(i=0,n=c.length;i<n;++i)u[a=c[i]]=Xt([s[a],r[a],l[a]],h,e);return u.radius=Xt([s.radius,d?d.r:void 0,r.radius,l.radius],h,e),u}}),Gt=ut.options.resolve,Zt=ut.valueOrDefault;st._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(t){var e=[];e.push('<ul class="'+t.id+'-legend">');var i=t.data,n=i.datasets,a=i.labels;if(n.length)for(var o=0;o<n[0].data.length;++o)e.push('<li><span style="background-color:'+n[0].backgroundColor[o]+'"></span>'),a[o]&&e.push(a[o]),e.push("</li>");return e.push("</ul>"),e.join("")},legend:{labels:{generateLabels:function(t){var e=t.data;return e.labels.length&&e.datasets.length?e.labels.map((function(i,n){var a=t.getDatasetMeta(0),o=e.datasets[0],r=a.data[n],s=r&&r.custom||{},l=t.options.elements.arc;return{text:i,fillStyle:Gt([s.backgroundColor,o.backgroundColor,l.backgroundColor],void 0,n),strokeStyle:Gt([s.borderColor,o.borderColor,l.borderColor],void 0,n),lineWidth:Gt([s.borderWidth,o.borderWidth,l.borderWidth],void 0,n),hidden:isNaN(o.data[n])||a.data[n].hidden,index:n}})):[]}},onClick:function(t,e){var i,n,a,o=e.index,r=this.chart;for(i=0,n=(r.data.datasets||[]).length;i<n;++i)(a=r.getDatasetMeta(i)).data[o]&&(a.data[o].hidden=!a.data[o].hidden);r.update()}},cutoutPercentage:50,rotation:-.5*Math.PI,circumference:2*Math.PI,tooltips:{callbacks:{title:function(){return""},label:function(t,e){var i=e.labels[t.index],n=": "+e.datasets[t.datasetIndex].data[t.index];return ut.isArray(i)?(i=i.slice())[0]+=n:i+=n,i}}}});var $t=Mt.extend({dataElementType:Wt.Arc,linkScales:ut.noop,getRingIndex:function(t){for(var e=0,i=0;i<t;++i)this.chart.isDatasetVisible(i)&&++e;return e},update:function(t){var e,i,n=this,a=n.chart,o=a.chartArea,r=a.options,s=o.right-o.left,l=o.bottom-o.top,d=Math.min(s,l),u={x:0,y:0},h=n.getMeta(),c=h.data,f=r.cutoutPercentage,g=r.circumference,p=n._getRingWeight(n.index);if(g<2*Math.PI){var m=r.rotation%(2*Math.PI),v=(m+=2*Math.PI*(m>=Math.PI?-1:m<-Math.PI?1:0))+g,b={x:Math.cos(m),y:Math.sin(m)},x={x:Math.cos(v),y:Math.sin(v)},y=m<=0&&v>=0||m<=2*Math.PI&&2*Math.PI<=v,k=m<=.5*Math.PI&&.5*Math.PI<=v||m<=2.5*Math.PI&&2.5*Math.PI<=v,w=m<=-Math.PI&&-Math.PI<=v||m<=Math.PI&&Math.PI<=v,M=m<=.5*-Math.PI&&.5*-Math.PI<=v||m<=1.5*Math.PI&&1.5*Math.PI<=v,_=f/100,C={x:w?-1:Math.min(b.x*(b.x<0?1:_),x.x*(x.x<0?1:_)),y:M?-1:Math.min(b.y*(b.y<0?1:_),x.y*(x.y<0?1:_))},S={x:y?1:Math.max(b.x*(b.x>0?1:_),x.x*(x.x>0?1:_)),y:k?1:Math.max(b.y*(b.y>0?1:_),x.y*(x.y>0?1:_))},P={width:.5*(S.x-C.x),height:.5*(S.y-C.y)};d=Math.min(s/P.width,l/P.height),u={x:-.5*(S.x+C.x),y:-.5*(S.y+C.y)}}for(e=0,i=c.length;e<i;++e)c[e]._options=n._resolveElementOptions(c[e],e);for(a.borderWidth=n.getMaxBorderWidth(),a.outerRadius=Math.max((d-a.borderWidth)/2,0),a.innerRadius=Math.max(f?a.outerRadius/100*f:0,0),a.radiusLength=(a.outerRadius-a.innerRadius)/(n._getVisibleDatasetWeightTotal()||1),a.offsetX=u.x*a.outerRadius,a.offsetY=u.y*a.outerRadius,h.total=n.calculateTotal(),n.outerRadius=a.outerRadius-a.radiusLength*n._getRingWeightOffset(n.index),n.innerRadius=Math.max(n.outerRadius-a.radiusLength*p,0),e=0,i=c.length;e<i;++e)n.updateElement(c[e],e,t)},updateElement:function(t,e,i){var n=this,a=n.chart,o=a.chartArea,r=a.options,s=r.animation,l=(o.left+o.right)/2,d=(o.top+o.bottom)/2,u=r.rotation,h=r.rotation,c=n.getDataset(),f=i&&s.animateRotate?0:t.hidden?0:n.calculateCircumference(c.data[e])*(r.circumference/(2*Math.PI)),g=i&&s.animateScale?0:n.innerRadius,p=i&&s.animateScale?0:n.outerRadius,m=t._options||{};ut.extend(t,{_datasetIndex:n.index,_index:e,_model:{backgroundColor:m.backgroundColor,borderColor:m.borderColor,borderWidth:m.borderWidth,borderAlign:m.borderAlign,x:l+a.offsetX,y:d+a.offsetY,startAngle:u,endAngle:h,circumference:f,outerRadius:p,innerRadius:g,label:ut.valueAtIndexOrDefault(c.label,e,a.data.labels[e])}});var v=t._model;i&&s.animateRotate||(v.startAngle=0===e?r.rotation:n.getMeta().data[e-1]._model.endAngle,v.endAngle=v.startAngle+v.circumference),t.pivot()},calculateTotal:function(){var t,e=this.getDataset(),i=this.getMeta(),n=0;return ut.each(i.data,(function(i,a){t=e.data[a],isNaN(t)||i.hidden||(n+=Math.abs(t))})),n},calculateCircumference:function(t){var e=this.getMeta().total;return e>0&&!isNaN(t)?2*Math.PI*(Math.abs(t)/e):0},getMaxBorderWidth:function(t){var e,i,n,a,o,r,s,l,d=0,u=this.chart;if(!t)for(e=0,i=u.data.datasets.length;e<i;++e)if(u.isDatasetVisible(e)){t=(n=u.getDatasetMeta(e)).data,e!==this.index&&(o=n.controller);break}if(!t)return 0;for(e=0,i=t.length;e<i;++e)a=t[e],"inner"!==(r=o?o._resolveElementOptions(a,e):a._options).borderAlign&&(s=r.borderWidth,d=(l=r.hoverBorderWidth)>(d=s>d?s:d)?l:d);return d},setHoverStyle:function(t){var e=t._model,i=t._options,n=ut.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=Zt(i.hoverBackgroundColor,n(i.backgroundColor)),e.borderColor=Zt(i.hoverBorderColor,n(i.borderColor)),e.borderWidth=Zt(i.hoverBorderWidth,i.borderWidth)},_resolveElementOptions:function(t,e){var i,n,a,o=this.chart,r=this.getDataset(),s=t.custom||{},l=o.options.elements.arc,d={},u={chart:o,dataIndex:e,dataset:r,datasetIndex:this.index},h=["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"];for(i=0,n=h.length;i<n;++i)d[a=h[i]]=Gt([s[a],r[a],l[a]],u,e);return d},_getRingWeightOffset:function(t){for(var e=0,i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e},_getRingWeight:function(t){return Math.max(Zt(this.chart.data.datasets[t].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});st._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}});var Jt=Yt.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),Qt=ut.valueOrDefault,te=ut.options.resolve,ee=ut.canvas._isPointInArea;function ie(t,e){return Qt(t.showLine,e.showLines)}st._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var ne=Mt.extend({datasetElementType:Wt.Line,dataElementType:Wt.Point,update:function(t){var e,i,n=this,a=n.getMeta(),o=a.dataset,r=a.data||[],s=n.getScaleForId(a.yAxisID),l=n.getDataset(),d=ie(l,n.chart.options);for(d&&(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),o._scale=s,o._datasetIndex=n.index,o._children=r,o._model=n._resolveLineOptions(o),o.pivot()),e=0,i=r.length;e<i;++e)n.updateElement(r[e],e,t);for(d&&0!==o._model.tension&&n.updateBezierControlPoints(),e=0,i=r.length;e<i;++e)r[e].pivot()},updateElement:function(t,e,i){var n,a,o=this,r=o.getMeta(),s=t.custom||{},l=o.getDataset(),d=o.index,u=l.data[e],h=o.getScaleForId(r.yAxisID),c=o.getScaleForId(r.xAxisID),f=r.dataset._model,g=o._resolvePointOptions(t,e);n=c.getPixelForValue("object"==typeof u?u:NaN,e,d),a=i?h.getBasePixel():o.calculatePointY(u,e,d),t._xScale=c,t._yScale=h,t._options=g,t._datasetIndex=d,t._index=e,t._model={x:n,y:a,skip:s.skip||isNaN(n)||isNaN(a),radius:g.radius,pointStyle:g.pointStyle,rotation:g.rotation,backgroundColor:g.backgroundColor,borderColor:g.borderColor,borderWidth:g.borderWidth,tension:Qt(s.tension,f?f.tension:0),steppedLine:!!f&&f.steppedLine,hitRadius:g.hitRadius}},_resolvePointOptions:function(t,e){var i,n,a,o=this.chart,r=o.data.datasets[this.index],s=t.custom||{},l=o.options.elements.point,d={},u={chart:o,dataIndex:e,dataset:r,datasetIndex:this.index},h={backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},c=Object.keys(h);for(i=0,n=c.length;i<n;++i)d[a=c[i]]=te([s[a],r[h[a]],r[a],l[a]],u,e);return d},_resolveLineOptions:function(t){var e,i,n,a=this.chart,o=a.data.datasets[this.index],r=t.custom||{},s=a.options,l=s.elements.line,d={},u=["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill","cubicInterpolationMode"];for(e=0,i=u.length;e<i;++e)d[n=u[e]]=te([r[n],o[n],l[n]]);return d.spanGaps=Qt(o.spanGaps,s.spanGaps),d.tension=Qt(o.lineTension,l.tension),d.steppedLine=te([r.steppedLine,o.steppedLine,l.stepped]),d},calculatePointY:function(t,e,i){var n,a,o,r=this.chart,s=this.getMeta(),l=this.getScaleForId(s.yAxisID),d=0,u=0;if(l.options.stacked){for(n=0;n<i;n++)if(a=r.data.datasets[n],"line"===(o=r.getDatasetMeta(n)).type&&o.yAxisID===l.id&&r.isDatasetVisible(n)){var h=Number(l.getRightValue(a.data[e]));h<0?u+=h||0:d+=h||0}var c=Number(l.getRightValue(t));return c<0?l.getPixelForValue(u+c):l.getPixelForValue(d+c)}return l.getPixelForValue(t)},updateBezierControlPoints:function(){var t,e,i,n,a=this.chart,o=this.getMeta(),r=o.dataset._model,s=a.chartArea,l=o.data||[];function d(t,e,i){return Math.max(Math.min(t,i),e)}if(r.spanGaps&&(l=l.filter((function(t){return!t._model.skip}))),"monotone"===r.cubicInterpolationMode)ut.splineCurveMonotone(l);else for(t=0,e=l.length;t<e;++t)i=l[t]._model,n=ut.splineCurve(ut.previousItem(l,t)._model,i,ut.nextItem(l,t)._model,r.tension),i.controlPointPreviousX=n.previous.x,i.controlPointPreviousY=n.previous.y,i.controlPointNextX=n.next.x,i.controlPointNextY=n.next.y;if(a.options.elements.line.capBezierPoints)for(t=0,e=l.length;t<e;++t)i=l[t]._model,ee(i,s)&&(t>0&&ee(l[t-1]._model,s)&&(i.controlPointPreviousX=d(i.controlPointPreviousX,s.left,s.right),i.controlPointPreviousY=d(i.controlPointPreviousY,s.top,s.bottom)),t<l.length-1&&ee(l[t+1]._model,s)&&(i.controlPointNextX=d(i.controlPointNextX,s.left,s.right),i.controlPointNextY=d(i.controlPointNextY,s.top,s.bottom)))},draw:function(){var t,e=this.chart,i=this.getMeta(),n=i.data||[],a=e.chartArea,o=n.length,r=0;for(ie(this.getDataset(),e.options)&&(t=(i.dataset._model.borderWidth||0)/2,ut.canvas.clipArea(e.ctx,{left:a.left,right:a.right,top:a.top-t,bottom:a.bottom+t}),i.dataset.draw(),ut.canvas.unclipArea(e.ctx));r<o;++r)n[r].draw(a)},setHoverStyle:function(t){var e=t._model,i=t._options,n=ut.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=Qt(i.hoverBackgroundColor,n(i.backgroundColor)),e.borderColor=Qt(i.hoverBorderColor,n(i.borderColor)),e.borderWidth=Qt(i.hoverBorderWidth,i.borderWidth),e.radius=Qt(i.hoverRadius,i.radius)}}),ae=ut.options.resolve;st._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(t){var e=[];e.push('<ul class="'+t.id+'-legend">');var i=t.data,n=i.datasets,a=i.labels;if(n.length)for(var o=0;o<n[0].data.length;++o)e.push('<li><span style="background-color:'+n[0].backgroundColor[o]+'"></span>'),a[o]&&e.push(a[o]),e.push("</li>");return e.push("</ul>"),e.join("")},legend:{labels:{generateLabels:function(t){var e=t.data;return e.labels.length&&e.datasets.length?e.labels.map((function(i,n){var a=t.getDatasetMeta(0),o=e.datasets[0],r=a.data[n].custom||{},s=t.options.elements.arc;return{text:i,fillStyle:ae([r.backgroundColor,o.backgroundColor,s.backgroundColor],void 0,n),strokeStyle:ae([r.borderColor,o.borderColor,s.borderColor],void 0,n),lineWidth:ae([r.borderWidth,o.borderWidth,s.borderWidth],void 0,n),hidden:isNaN(o.data[n])||a.data[n].hidden,index:n}})):[]}},onClick:function(t,e){var i,n,a,o=e.index,r=this.chart;for(i=0,n=(r.data.datasets||[]).length;i<n;++i)(a=r.getDatasetMeta(i)).data[o].hidden=!a.data[o].hidden;r.update()}},tooltips:{callbacks:{title:function(){return""},label:function(t,e){return e.labels[t.index]+": "+t.yLabel}}}});var oe=Mt.extend({dataElementType:Wt.Arc,linkScales:ut.noop,update:function(t){var e,i,n,a=this,o=a.getDataset(),r=a.getMeta(),s=a.chart.options.startAngle||0,l=a._starts=[],d=a._angles=[],u=r.data;for(a._updateRadius(),r.count=a.countVisibleElements(),e=0,i=o.data.length;e<i;e++)l[e]=s,n=a._computeAngle(e),d[e]=n,s+=n;for(e=0,i=u.length;e<i;++e)u[e]._options=a._resolveElementOptions(u[e],e),a.updateElement(u[e],e,t)},_updateRadius:function(){var t=this,e=t.chart,i=e.chartArea,n=e.options,a=Math.min(i.right-i.left,i.bottom-i.top);e.outerRadius=Math.max(a/2,0),e.innerRadius=Math.max(n.cutoutPercentage?e.outerRadius/100*n.cutoutPercentage:1,0),e.radiusLength=(e.outerRadius-e.innerRadius)/e.getVisibleDatasetCount(),t.outerRadius=e.outerRadius-e.radiusLength*t.index,t.innerRadius=t.outerRadius-e.radiusLength},updateElement:function(t,e,i){var n=this,a=n.chart,o=n.getDataset(),r=a.options,s=r.animation,l=a.scale,d=a.data.labels,u=l.xCenter,h=l.yCenter,c=r.startAngle,f=t.hidden?0:l.getDistanceFromCenterForValue(o.data[e]),g=n._starts[e],p=g+(t.hidden?0:n._angles[e]),m=s.animateScale?0:l.getDistanceFromCenterForValue(o.data[e]),v=t._options||{};ut.extend(t,{_datasetIndex:n.index,_index:e,_scale:l,_model:{backgroundColor:v.backgroundColor,borderColor:v.borderColor,borderWidth:v.borderWidth,borderAlign:v.borderAlign,x:u,y:h,innerRadius:0,outerRadius:i?m:f,startAngle:i&&s.animateRotate?c:g,endAngle:i&&s.animateRotate?c:p,label:ut.valueAtIndexOrDefault(d,e,d[e])}}),t.pivot()},countVisibleElements:function(){var t=this.getDataset(),e=this.getMeta(),i=0;return ut.each(e.data,(function(e,n){isNaN(t.data[n])||e.hidden||i++})),i},setHoverStyle:function(t){var e=t._model,i=t._options,n=ut.getHoverColor,a=ut.valueOrDefault;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=a(i.hoverBackgroundColor,n(i.backgroundColor)),e.borderColor=a(i.hoverBorderColor,n(i.borderColor)),e.borderWidth=a(i.hoverBorderWidth,i.borderWidth)},_resolveElementOptions:function(t,e){var i,n,a,o=this.chart,r=this.getDataset(),s=t.custom||{},l=o.options.elements.arc,d={},u={chart:o,dataIndex:e,dataset:r,datasetIndex:this.index},h=["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"];for(i=0,n=h.length;i<n;++i)d[a=h[i]]=ae([s[a],r[a],l[a]],u,e);return d},_computeAngle:function(t){var e=this,i=this.getMeta().count,n=e.getDataset(),a=e.getMeta();if(isNaN(n.data[t])||a.data[t].hidden)return 0;var o={chart:e.chart,dataIndex:t,dataset:n,datasetIndex:e.index};return ae([e.chart.options.elements.arc.angle,2*Math.PI/i],o,t)}});st._set("pie",ut.clone(st.doughnut)),st._set("pie",{cutoutPercentage:0});var re=$t,se=ut.valueOrDefault,le=ut.options.resolve;st._set("radar",{scale:{type:"radialLinear"},elements:{line:{tension:0}}});var de=Mt.extend({datasetElementType:Wt.Line,dataElementType:Wt.Point,linkScales:ut.noop,update:function(t){var e,i,n=this,a=n.getMeta(),o=a.dataset,r=a.data||[],s=n.chart.scale,l=n.getDataset();for(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),o._scale=s,o._datasetIndex=n.index,o._children=r,o._loop=!0,o._model=n._resolveLineOptions(o),o.pivot(),e=0,i=r.length;e<i;++e)n.updateElement(r[e],e,t);for(n.updateBezierControlPoints(),e=0,i=r.length;e<i;++e)r[e].pivot()},updateElement:function(t,e,i){var n=this,a=t.custom||{},o=n.getDataset(),r=n.chart.scale,s=r.getPointPositionForValue(e,o.data[e]),l=n._resolvePointOptions(t,e),d=n.getMeta().dataset._model,u=i?r.xCenter:s.x,h=i?r.yCenter:s.y;t._scale=r,t._options=l,t._datasetIndex=n.index,t._index=e,t._model={x:u,y:h,skip:a.skip||isNaN(u)||isNaN(h),radius:l.radius,pointStyle:l.pointStyle,rotation:l.rotation,backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,tension:se(a.tension,d?d.tension:0),hitRadius:l.hitRadius}},_resolvePointOptions:function(t,e){var i,n,a,o=this.chart,r=o.data.datasets[this.index],s=t.custom||{},l=o.options.elements.point,d={},u={chart:o,dataIndex:e,dataset:r,datasetIndex:this.index},h={backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},c=Object.keys(h);for(i=0,n=c.length;i<n;++i)d[a=c[i]]=le([s[a],r[h[a]],r[a],l[a]],u,e);return d},_resolveLineOptions:function(t){var e,i,n,a=this.chart,o=a.data.datasets[this.index],r=t.custom||{},s=a.options.elements.line,l={},d=["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"];for(e=0,i=d.length;e<i;++e)l[n=d[e]]=le([r[n],o[n],s[n]]);return l.tension=se(o.lineTension,s.tension),l},updateBezierControlPoints:function(){var t,e,i,n,a=this.getMeta(),o=this.chart.chartArea,r=a.data||[];function s(t,e,i){return Math.max(Math.min(t,i),e)}for(t=0,e=r.length;t<e;++t)i=r[t]._model,n=ut.splineCurve(ut.previousItem(r,t,!0)._model,i,ut.nextItem(r,t,!0)._model,i.tension),i.controlPointPreviousX=s(n.previous.x,o.left,o.right),i.controlPointPreviousY=s(n.previous.y,o.top,o.bottom),i.controlPointNextX=s(n.next.x,o.left,o.right),i.controlPointNextY=s(n.next.y,o.top,o.bottom)},setHoverStyle:function(t){var e=t._model,i=t._options,n=ut.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=se(i.hoverBackgroundColor,n(i.backgroundColor)),e.borderColor=se(i.hoverBorderColor,n(i.borderColor)),e.borderWidth=se(i.hoverBorderWidth,i.borderWidth),e.radius=se(i.hoverRadius,i.radius)}});st._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},showLines:!1,tooltips:{callbacks:{title:function(){return""},label:function(t){return"("+t.xLabel+", "+t.yLabel+")"}}}});var ue={bar:Yt,bubble:Kt,doughnut:$t,horizontalBar:Jt,line:ne,polarArea:oe,pie:re,radar:de,scatter:ne};function he(t,e){return t.native?{x:t.x,y:t.y}:ut.getRelativePosition(t,e)}function ce(t,e){var i,n,a,o,r;for(n=0,o=t.data.datasets.length;n<o;++n)if(t.isDatasetVisible(n))for(a=0,r=(i=t.getDatasetMeta(n)).data.length;a<r;++a){var s=i.data[a];s._view.skip||e(s)}}function fe(t,e){var i=[];return ce(t,(function(t){t.inRange(e.x,e.y)&&i.push(t)})),i}function ge(t,e,i,n){var a=Number.POSITIVE_INFINITY,o=[];return ce(t,(function(t){if(!i||t.inRange(e.x,e.y)){var r=t.getCenterPoint(),s=n(e,r);s<a?(o=[t],a=s):s===a&&o.push(t)}})),o}function pe(t){var e=-1!==t.indexOf("x"),i=-1!==t.indexOf("y");return function(t,n){var a=e?Math.abs(t.x-n.x):0,o=i?Math.abs(t.y-n.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(o,2))}}function me(t,e,i){var n=he(e,t);i.axis=i.axis||"x";var a=pe(i.axis),o=i.intersect?fe(t,n):ge(t,n,!1,a),r=[];return o.length?(t.data.datasets.forEach((function(e,i){if(t.isDatasetVisible(i)){var n=t.getDatasetMeta(i).data[o[0]._index];n&&!n._view.skip&&r.push(n)}})),r):[]}var ve={modes:{single:function(t,e){var i=he(e,t),n=[];return ce(t,(function(t){if(t.inRange(i.x,i.y))return n.push(t),n})),n.slice(0,1)},label:me,index:me,dataset:function(t,e,i){var n=he(e,t);i.axis=i.axis||"xy";var a=pe(i.axis),o=i.intersect?fe(t,n):ge(t,n,!1,a);return o.length>0&&(o=t.getDatasetMeta(o[0]._datasetIndex).data),o},"x-axis":function(t,e){return me(t,e,{intersect:!1})},point:function(t,e){return fe(t,he(e,t))},nearest:function(t,e,i){var n=he(e,t);i.axis=i.axis||"xy";var a=pe(i.axis);return ge(t,n,i.intersect,a)},x:function(t,e,i){var n=he(e,t),a=[],o=!1;return ce(t,(function(t){t.inXRange(n.x)&&a.push(t),t.inRange(n.x,n.y)&&(o=!0)})),i.intersect&&!o&&(a=[]),a},y:function(t,e,i){var n=he(e,t),a=[],o=!1;return ce(t,(function(t){t.inYRange(n.y)&&a.push(t),t.inRange(n.x,n.y)&&(o=!0)})),i.intersect&&!o&&(a=[]),a}}};function be(t,e){return ut.where(t,(function(t){return t.position===e}))}function xe(t,e){t.forEach((function(t,e){return t._tmpIndex_=e,t})),t.sort((function(t,i){var n=e?i:t,a=e?t:i;return n.weight===a.weight?n._tmpIndex_-a._tmpIndex_:n.weight-a.weight})),t.forEach((function(t){delete t._tmpIndex_}))}function ye(t,e){ut.each(t,(function(t){e[t.position]+=t.isHorizontal()?t.height:t.width}))}st._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var we,ke={defaults:{},addBox:function(t,e){t.boxes||(t.boxes=[]),e.fullWidth=e.fullWidth||!1,e.position=e.position||"top",e.weight=e.weight||0,t.boxes.push(e)},removeBox:function(t,e){var i=t.boxes?t.boxes.indexOf(e):-1;-1!==i&&t.boxes.splice(i,1)},configure:function(t,e,i){for(var n,a=["fullWidth","position","weight"],o=a.length,r=0;r<o;++r)n=a[r],i.hasOwnProperty(n)&&(e[n]=i[n])},update:function(t,e,i){if(t){var n=t.options.layout||{},a=ut.options.toPadding(n.padding),o=a.left,r=a.right,s=a.top,l=a.bottom,d=be(t.boxes,"left"),u=be(t.boxes,"right"),h=be(t.boxes,"top"),c=be(t.boxes,"bottom"),f=be(t.boxes,"chartArea");xe(d,!0),xe(u,!1),xe(h,!0),xe(c,!1);var g,p=d.concat(u),m=h.concat(c),v=p.concat(m),b=e-o-r,x=i-s-l,y=(e-b/2)/p.length,k=b,w=x,M={top:s,left:o,bottom:l,right:r},_=[];ut.each(v,(function(t){var e,i=t.isHorizontal();i?(e=t.update(t.fullWidth?b:k,x/2),w-=e.height):(e=t.update(y,w),k-=e.width),_.push({horizontal:i,width:e.width,box:t})})),g=function(t){var e=0,i=0,n=0,a=0;return ut.each(t,(function(t){if(t.getPadding){var o=t.getPadding();e=Math.max(e,o.top),i=Math.max(i,o.left),n=Math.max(n,o.bottom),a=Math.max(a,o.right)}})),{top:e,left:i,bottom:n,right:a}}(v),ut.each(p,T),ye(p,M),ut.each(m,T),ye(m,M),ut.each(p,(function(t){var e=ut.findNextWhere(_,(function(e){return e.box===t})),i={left:0,right:0,top:M.top,bottom:M.bottom};e&&t.update(e.width,w,i)})),ye(v,M={top:s,left:o,bottom:l,right:r});var C=Math.max(g.left-M.left,0);M.left+=C,M.right+=Math.max(g.right-M.right,0);var S=Math.max(g.top-M.top,0);M.top+=S,M.bottom+=Math.max(g.bottom-M.bottom,0);var P=i-M.top-M.bottom,I=e-M.left-M.right;I===k&&P===w||(ut.each(p,(function(t){t.height=P})),ut.each(m,(function(t){t.fullWidth||(t.width=I)})),w=P,k=I);var A=o+C,D=s+S;ut.each(d.concat(h),F),A+=k,D+=w,ut.each(u,F),ut.each(c,F),t.chartArea={left:M.left,top:M.top,right:M.left+k,bottom:M.top+w},ut.each(f,(function(e){e.left=t.chartArea.left,e.top=t.chartArea.top,e.right=t.chartArea.right,e.bottom=t.chartArea.bottom,e.update(k,w)}))}function T(t){var e=ut.findNextWhere(_,(function(e){return e.box===t}));if(e)if(e.horizontal){var i={left:Math.max(M.left,g.left),right:Math.max(M.right,g.right),top:0,bottom:0};t.update(t.fullWidth?b:k,x/2,i)}else t.update(e.width,w)}function F(t){t.isHorizontal()?(t.left=t.fullWidth?o:M.left,t.right=t.fullWidth?e-r:M.left+k,t.top=D,t.bottom=D+t.height,D=t.bottom):(t.left=A,t.right=A+t.width,t.top=M.top,t.bottom=M.top+w,A=t.right)}}},Me=(we=Object.freeze({default:"@keyframes chartjs-render-animation{from{opacity:.99}to{opacity:1}}.chartjs-render-monitor{animation:chartjs-render-animation 1ms}.chartjs-size-monitor,.chartjs-size-monitor-expand,.chartjs-size-monitor-shrink{position:absolute;direction:ltr;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1}.chartjs-size-monitor-expand>div{position:absolute;width:1000000px;height:1000000px;left:0;top:0}.chartjs-size-monitor-shrink>div{position:absolute;width:200%;height:200%;left:0;top:0}"}))&&we.default||we,_e="$chartjs",Ce="chartjs-size-monitor",Se="chartjs-render-monitor",Pe="chartjs-render-animation",Ie=["animationstart","webkitAnimationStart"],Ae={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function De(t,e){var i=ut.getStyle(t,e),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?Number(n[1]):void 0}var Te=!!function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("e",null,e)}catch(t){}return t}()&&{passive:!0};function Fe(t,e,i){t.addEventListener(e,i,Te)}function Le(t,e,i){t.removeEventListener(e,i,Te)}function Re(t,e,i,n,a){return{type:t,chart:e,native:a||null,x:void 0!==i?i:null,y:void 0!==n?n:null}}function Oe(t){var e=document.createElement("div");return e.className=t||"",e}var Ne={disableCSSInjection:!1,_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,_ensureLoaded:function(){var e,i;this._loaded||(this._loaded=!0,this.disableCSSInjection||(e=Me,i=this._style||document.createElement("style"),this._style||(this._style=i,e="/* Chart.js */\n"+e,i.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(i)),i.appendChild(document.createTextNode(e))))},acquireContext:function(t,e){"string"==typeof t?t=document.getElementById(t):t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas);var i=t&&t.getContext&&t.getContext("2d");return this._ensureLoaded(),i&&i.canvas===t?(function(t,e){var i=t.style,n=t.getAttribute("height"),a=t.getAttribute("width");if(t[_e]={initial:{height:n,width:a,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",null===a||""===a){var o=De(t,"width");void 0!==o&&(t.width=o)}if(null===n||""===n)if(""===t.style.height)t.height=t.width/(e.options.aspectRatio||2);else{var r=De(t,"height");void 0!==o&&(t.height=r)}}(t,e),i):null},releaseContext:function(t){var e=t.canvas;if(e[_e]){var i=e[_e].initial;["height","width"].forEach((function(t){var n=i[t];ut.isNullOrUndef(n)?e.removeAttribute(t):e.setAttribute(t,n)})),ut.each(i.style||{},(function(t,i){e.style[i]=t})),e.width=e.width,delete e[_e]}},addEventListener:function(t,e,i){var n=t.canvas;if("resize"!==e){var a=i[_e]||(i[_e]={});Fe(n,e,(a.proxies||(a.proxies={}))[t.id+"_"+e]=function(e){i(function(t,e){var i=Ae[t.type]||t.type,n=ut.getRelativePosition(t,e);return Re(i,e,n.x,n.y,t)}(e,t))})}else!function(t,e,i){var n,a,o,r,s=t[_e]||(t[_e]={}),l=s.resizer=function(t){var e=Oe(Ce),i=Oe(Ce+"-expand"),n=Oe(Ce+"-shrink");i.appendChild(Oe()),n.appendChild(Oe()),e.appendChild(i),e.appendChild(n),e._reset=function(){i.scrollLeft=1e6,i.scrollTop=1e6,n.scrollLeft=1e6,n.scrollTop=1e6};var a=function(){e._reset(),t()};return Fe(i,"scroll",a.bind(i,"expand")),Fe(n,"scroll",a.bind(n,"shrink")),e}((n=function(){if(s.resizer){var n=i.options.maintainAspectRatio&&t.parentNode,a=n?n.clientWidth:0;e(Re("resize",i)),n&&n.clientWidth<a&&i.canvas&&e(Re("resize",i))}},o=!1,r=[],function(){r=Array.prototype.slice.call(arguments),a=a||this,o||(o=!0,ut.requestAnimFrame.call(window,(function(){o=!1,n.apply(a,r)})))}));!function(t,e){var i=t[_e]||(t[_e]={}),n=i.renderProxy=function(t){t.animationName===Pe&&e()};ut.each(Ie,(function(e){Fe(t,e,n)})),i.reflow=!!t.offsetParent,t.classList.add(Se)}(t,(function(){if(s.resizer){var e=t.parentNode;e&&e!==l.parentNode&&e.insertBefore(l,e.firstChild),l._reset()}}))}(n,i,t)},removeEventListener:function(t,e,i){var n=t.canvas;if("resize"!==e){var a=((i[_e]||{}).proxies||{})[t.id+"_"+e];a&&Le(n,e,a)}else!function(t){var e=t[_e]||{},i=e.resizer;delete e.resizer,function(t){var e=t[_e]||{},i=e.renderProxy;i&&(ut.each(Ie,(function(e){Le(t,e,i)})),delete e.renderProxy),t.classList.remove(Se)}(t),i&&i.parentNode&&i.parentNode.removeChild(i)}(n)}};ut.addEvent=Fe,ut.removeEvent=Le;var We=Ne._enabled?Ne:{acquireContext:function(t){return t&&t.canvas&&(t=t.canvas),t&&t.getContext("2d")||null}},Ve=ut.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},We);st._set("global",{plugins:{}});var Ee={_plugins:[],_cacheId:0,register:function(t){var e=this._plugins;[].concat(t).forEach((function(t){-1===e.indexOf(t)&&e.push(t)})),this._cacheId++},unregister:function(t){var e=this._plugins;[].concat(t).forEach((function(t){var i=e.indexOf(t);-1!==i&&e.splice(i,1)})),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(t,e,i){var n,a,o,r,s,l=this.descriptors(t),d=l.length;for(n=0;n<d;++n)if("function"==typeof(s=(o=(a=l[n]).plugin)[e])&&((r=[t].concat(i||[])).push(a.options),!1===s.apply(o,r)))return!1;return!0},descriptors:function(t){var e=t.$plugins||(t.$plugins={});if(e.id===this._cacheId)return e.descriptors;var i=[],n=[],a=t&&t.config||{},o=a.options&&a.options.plugins||{};return this._plugins.concat(a.plugins||[]).forEach((function(t){if(-1===i.indexOf(t)){var e=t.id,a=o[e];!1!==a&&(!0===a&&(a=ut.clone(st.global.plugins[e])),i.push(t),n.push({plugin:t,options:a||{}}))}})),e.descriptors=n,e.id=this._cacheId,n},_invalidate:function(t){delete t.$plugins}},He={constructors:{},defaults:{},registerScaleType:function(t,e,i){this.constructors[t]=e,this.defaults[t]=ut.clone(i)},getScaleConstructor:function(t){return this.constructors.hasOwnProperty(t)?this.constructors[t]:void 0},getScaleDefaults:function(t){return this.defaults.hasOwnProperty(t)?ut.merge({},[st.scale,this.defaults[t]]):{}},updateScaleDefaults:function(t,e){this.defaults.hasOwnProperty(t)&&(this.defaults[t]=ut.extend(this.defaults[t],e))},addScalesToLayout:function(t){ut.each(t.scales,(function(e){e.fullWidth=e.options.fullWidth,e.position=e.options.position,e.weight=e.options.weight,ke.addBox(t,e)}))}},je=ut.valueOrDefault;st._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:ut.noop,title:function(t,e){var i="",n=e.labels,a=n?n.length:0;if(t.length>0){var o=t[0];o.label?i=o.label:o.xLabel?i=o.xLabel:a>0&&o.index<a&&(i=n[o.index])}return i},afterTitle:ut.noop,beforeBody:ut.noop,beforeLabel:ut.noop,label:function(t,e){var i=e.datasets[t.datasetIndex].label||"";return i&&(i+=": "),ut.isNullOrUndef(t.value)?i+=t.yLabel:i+=t.value,i},labelColor:function(t,e){var i=e.getDatasetMeta(t.datasetIndex).data[t.index]._view;return{borderColor:i.borderColor,backgroundColor:i.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:ut.noop,afterBody:ut.noop,beforeFooter:ut.noop,footer:ut.noop,afterFooter:ut.noop}}});var qe={average:function(t){if(!t.length)return!1;var e,i,n=0,a=0,o=0;for(e=0,i=t.length;e<i;++e){var r=t[e];if(r&&r.hasValue()){var s=r.tooltipPosition();n+=s.x,a+=s.y,++o}}return{x:n/o,y:a/o}},nearest:function(t,e){var i,n,a,o=e.x,r=e.y,s=Number.POSITIVE_INFINITY;for(i=0,n=t.length;i<n;++i){var l=t[i];if(l&&l.hasValue()){var d=l.getCenterPoint(),u=ut.distanceBetweenPoints(e,d);u<s&&(s=u,a=l)}}if(a){var h=a.tooltipPosition();o=h.x,r=h.y}return{x:o,y:r}}};function Ye(t,e){return e&&(ut.isArray(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Ue(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function Xe(t){var e=st.global;return{xPadding:t.xPadding,yPadding:t.yPadding,xAlign:t.xAlign,yAlign:t.yAlign,bodyFontColor:t.bodyFontColor,_bodyFontFamily:je(t.bodyFontFamily,e.defaultFontFamily),_bodyFontStyle:je(t.bodyFontStyle,e.defaultFontStyle),_bodyAlign:t.bodyAlign,bodyFontSize:je(t.bodyFontSize,e.defaultFontSize),bodySpacing:t.bodySpacing,titleFontColor:t.titleFontColor,_titleFontFamily:je(t.titleFontFamily,e.defaultFontFamily),_titleFontStyle:je(t.titleFontStyle,e.defaultFontStyle),titleFontSize:je(t.titleFontSize,e.defaultFontSize),_titleAlign:t.titleAlign,titleSpacing:t.titleSpacing,titleMarginBottom:t.titleMarginBottom,footerFontColor:t.footerFontColor,_footerFontFamily:je(t.footerFontFamily,e.defaultFontFamily),_footerFontStyle:je(t.footerFontStyle,e.defaultFontStyle),footerFontSize:je(t.footerFontSize,e.defaultFontSize),_footerAlign:t.footerAlign,footerSpacing:t.footerSpacing,footerMarginTop:t.footerMarginTop,caretSize:t.caretSize,cornerRadius:t.cornerRadius,backgroundColor:t.backgroundColor,opacity:0,legendColorBackground:t.multiKeyBackground,displayColors:t.displayColors,borderColor:t.borderColor,borderWidth:t.borderWidth}}function Ke(t,e){return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-t.xPadding:t.x+t.xPadding}function Ge(t){return Ye([],Ue(t))}var Ze=pt.extend({initialize:function(){this._model=Xe(this._options),this._lastActive=[]},getTitle:function(){var t=this._options.callbacks,e=t.beforeTitle.apply(this,arguments),i=t.title.apply(this,arguments),n=t.afterTitle.apply(this,arguments),a=[];return a=Ye(a,Ue(e)),a=Ye(a,Ue(i)),Ye(a,Ue(n))},getBeforeBody:function(){return Ge(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(t,e){var i=this,n=i._options.callbacks,a=[];return ut.each(t,(function(t){var o={before:[],lines:[],after:[]};Ye(o.before,Ue(n.beforeLabel.call(i,t,e))),Ye(o.lines,n.label.call(i,t,e)),Ye(o.after,Ue(n.afterLabel.call(i,t,e))),a.push(o)})),a},getAfterBody:function(){return Ge(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var t=this._options.callbacks,e=t.beforeFooter.apply(this,arguments),i=t.footer.apply(this,arguments),n=t.afterFooter.apply(this,arguments),a=[];return a=Ye(a,Ue(e)),a=Ye(a,Ue(i)),Ye(a,Ue(n))},update:function(t){var e,i,n,a,o,r,s,l,d,u,h=this,c=h._options,f=h._model,g=h._model=Xe(c),p=h._active,m=h._data,v={xAlign:f.xAlign,yAlign:f.yAlign},b={x:f.x,y:f.y},x={width:f.width,height:f.height},y={x:f.caretX,y:f.caretY};if(p.length){g.opacity=1;var k=[],w=[];y=qe[c.position].call(h,p,h._eventPosition);var M=[];for(e=0,i=p.length;e<i;++e)M.push((a=void 0,o=void 0,void 0,void 0,l=void 0,d=void 0,u=void 0,a=(n=p[e])._xScale,o=n._yScale||n._scale,r=n._index,s=n._datasetIndex,d=(l=n._chart.getDatasetMeta(s).controller)._getIndexScale(),u=l._getValueScale(),{xLabel:a?a.getLabelForIndex(r,s):"",yLabel:o?o.getLabelForIndex(r,s):"",label:d?""+d.getLabelForIndex(r,s):"",value:u?""+u.getLabelForIndex(r,s):"",index:r,datasetIndex:s,x:n._model.x,y:n._model.y}));c.filter&&(M=M.filter((function(t){return c.filter(t,m)}))),c.itemSort&&(M=M.sort((function(t,e){return c.itemSort(t,e,m)}))),ut.each(M,(function(t){k.push(c.callbacks.labelColor.call(h,t,h._chart)),w.push(c.callbacks.labelTextColor.call(h,t,h._chart))})),g.title=h.getTitle(M,m),g.beforeBody=h.getBeforeBody(M,m),g.body=h.getBody(M,m),g.afterBody=h.getAfterBody(M,m),g.footer=h.getFooter(M,m),g.x=y.x,g.y=y.y,g.caretPadding=c.caretPadding,g.labelColors=k,g.labelTextColors=w,g.dataPoints=M,b=function(t,e,i,n){var a=t.x,o=t.y,r=t.caretSize,s=t.caretPadding,l=t.cornerRadius,d=i.xAlign,u=i.yAlign,h=r+s,c=l+s;return"right"===d?a-=e.width:"center"===d&&((a-=e.width/2)+e.width>n.width&&(a=n.width-e.width),a<0&&(a=0)),"top"===u?o+=h:o-="bottom"===u?e.height+h:e.height/2,"center"===u?"left"===d?a+=h:"right"===d&&(a-=h):"left"===d?a-=c:"right"===d&&(a+=c),{x:a,y:o}}(g,x=function(t,e){var i=t._chart.ctx,n=2*e.yPadding,a=0,o=e.body,r=o.reduce((function(t,e){return t+e.before.length+e.lines.length+e.after.length}),0);r+=e.beforeBody.length+e.afterBody.length;var s=e.title.length,l=e.footer.length,d=e.titleFontSize,u=e.bodyFontSize,h=e.footerFontSize;n+=s*d,n+=s?(s-1)*e.titleSpacing:0,n+=s?e.titleMarginBottom:0,n+=r*u,n+=r?(r-1)*e.bodySpacing:0,n+=l?e.footerMarginTop:0,n+=l*h,n+=l?(l-1)*e.footerSpacing:0;var c=0,f=function(t){a=Math.max(a,i.measureText(t).width+c)};return i.font=ut.fontString(d,e._titleFontStyle,e._titleFontFamily),ut.each(e.title,f),i.font=ut.fontString(u,e._bodyFontStyle,e._bodyFontFamily),ut.each(e.beforeBody.concat(e.afterBody),f),c=e.displayColors?u+2:0,ut.each(o,(function(t){ut.each(t.before,f),ut.each(t.lines,f),ut.each(t.after,f)})),c=0,i.font=ut.fontString(h,e._footerFontStyle,e._footerFontFamily),ut.each(e.footer,f),{width:a+=2*e.xPadding,height:n}}(this,g),v=function(t,e){var i,n,a,o,r,s=t._model,l=t._chart,d=t._chart.chartArea,u="center",h="center";s.y<e.height?h="top":s.y>l.height-e.height&&(h="bottom");var c=(d.left+d.right)/2,f=(d.top+d.bottom)/2;"center"===h?(i=function(t){return t<=c},n=function(t){return t>c}):(i=function(t){return t<=e.width/2},n=function(t){return t>=l.width-e.width/2}),a=function(t){return t+e.width+s.caretSize+s.caretPadding>l.width},o=function(t){return t-e.width-s.caretSize-s.caretPadding<0},r=function(t){return t<=f?"top":"bottom"},i(s.x)?(u="left",a(s.x)&&(u="center",h=r(s.y))):n(s.x)&&(u="right",o(s.x)&&(u="center",h=r(s.y)));var g=t._options;return{xAlign:g.xAlign?g.xAlign:u,yAlign:g.yAlign?g.yAlign:h}}(this,x),h._chart)}else g.opacity=0;return g.xAlign=v.xAlign,g.yAlign=v.yAlign,g.x=b.x,g.y=b.y,g.width=x.width,g.height=x.height,g.caretX=y.x,g.caretY=y.y,h._model=g,t&&c.custom&&c.custom.call(h,g),h},drawCaret:function(t,e){var i=this._chart.ctx,n=this._view,a=this.getCaretPosition(t,e,n);i.lineTo(a.x1,a.y1),i.lineTo(a.x2,a.y2),i.lineTo(a.x3,a.y3)},getCaretPosition:function(t,e,i){var n,a,o,r,s,l,d=i.caretSize,u=i.cornerRadius,h=i.xAlign,c=i.yAlign,f=t.x,g=t.y,p=e.width,m=e.height;if("center"===c)s=g+m/2,"left"===h?(a=(n=f)-d,o=n,r=s+d,l=s-d):(a=(n=f+p)+d,o=n,r=s-d,l=s+d);else if("left"===h?(n=(a=f+u+d)-d,o=a+d):"right"===h?(n=(a=f+p-u-d)-d,o=a+d):(n=(a=i.caretX)-d,o=a+d),"top"===c)s=(r=g)-d,l=r;else{s=(r=g+m)+d,l=r;var v=o;o=n,n=v}return{x1:n,x2:a,x3:o,y1:r,y2:s,y3:l}},drawTitle:function(t,e,i){var n=e.title;if(n.length){t.x=Ke(e,e._titleAlign),i.textAlign=e._titleAlign,i.textBaseline="top";var a,o,r=e.titleFontSize,s=e.titleSpacing;for(i.fillStyle=e.titleFontColor,i.font=ut.fontString(r,e._titleFontStyle,e._titleFontFamily),a=0,o=n.length;a<o;++a)i.fillText(n[a],t.x,t.y),t.y+=r+s,a+1===n.length&&(t.y+=e.titleMarginBottom-s)}},drawBody:function(t,e,i){var n,a=e.bodyFontSize,o=e.bodySpacing,r=e._bodyAlign,s=e.body,l=e.displayColors,d=e.labelColors,u=0,h=l?Ke(e,"left"):0;i.textAlign=r,i.textBaseline="top",i.font=ut.fontString(a,e._bodyFontStyle,e._bodyFontFamily),t.x=Ke(e,r);var c=function(e){i.fillText(e,t.x+u,t.y),t.y+=a+o};i.fillStyle=e.bodyFontColor,ut.each(e.beforeBody,c),u=l&&"right"!==r?"center"===r?a/2+1:a+2:0,ut.each(s,(function(o,r){n=e.labelTextColors[r],i.fillStyle=n,ut.each(o.before,c),ut.each(o.lines,(function(o){l&&(i.fillStyle=e.legendColorBackground,i.fillRect(h,t.y,a,a),i.lineWidth=1,i.strokeStyle=d[r].borderColor,i.strokeRect(h,t.y,a,a),i.fillStyle=d[r].backgroundColor,i.fillRect(h+1,t.y+1,a-2,a-2),i.fillStyle=n),c(o)})),ut.each(o.after,c)})),u=0,ut.each(e.afterBody,c),t.y-=o},drawFooter:function(t,e,i){var n=e.footer;n.length&&(t.x=Ke(e,e._footerAlign),t.y+=e.footerMarginTop,i.textAlign=e._footerAlign,i.textBaseline="top",i.fillStyle=e.footerFontColor,i.font=ut.fontString(e.footerFontSize,e._footerFontStyle,e._footerFontFamily),ut.each(n,(function(n){i.fillText(n,t.x,t.y),t.y+=e.footerFontSize+e.footerSpacing})))},drawBackground:function(t,e,i,n){i.fillStyle=e.backgroundColor,i.strokeStyle=e.borderColor,i.lineWidth=e.borderWidth;var a=e.xAlign,o=e.yAlign,r=t.x,s=t.y,l=n.width,d=n.height,u=e.cornerRadius;i.beginPath(),i.moveTo(r+u,s),"top"===o&&this.drawCaret(t,n),i.lineTo(r+l-u,s),i.quadraticCurveTo(r+l,s,r+l,s+u),"center"===o&&"right"===a&&this.drawCaret(t,n),i.lineTo(r+l,s+d-u),i.quadraticCurveTo(r+l,s+d,r+l-u,s+d),"bottom"===o&&this.drawCaret(t,n),i.lineTo(r+u,s+d),i.quadraticCurveTo(r,s+d,r,s+d-u),"center"===o&&"left"===a&&this.drawCaret(t,n),i.lineTo(r,s+u),i.quadraticCurveTo(r,s,r+u,s),i.closePath(),i.fill(),e.borderWidth>0&&i.stroke()},draw:function(){var t=this._chart.ctx,e=this._view;if(0!==e.opacity){var i={width:e.width,height:e.height},n={x:e.x,y:e.y},a=Math.abs(e.opacity<.001)?0:e.opacity,o=e.title.length||e.beforeBody.length||e.body.length||e.afterBody.length||e.footer.length;this._options.enabled&&o&&(t.save(),t.globalAlpha=a,this.drawBackground(n,e,t,i),n.y+=e.yPadding,this.drawTitle(n,e,t),this.drawBody(n,e,t),this.drawFooter(n,e,t),t.restore())}},handleEvent:function(t){var e,i=this,n=i._options;return i._lastActive=i._lastActive||[],"mouseout"===t.type?i._active=[]:i._active=i._chart.getElementsAtEventForMode(t,n.mode,n),(e=!ut.arrayEquals(i._active,i._lastActive))&&(i._lastActive=i._active,(n.enabled||n.custom)&&(i._eventPosition={x:t.x,y:t.y},i.update(!0),i.pivot())),e}}),$e=qe,Je=Ze;Je.positioners=$e;var Qe=ut.valueOrDefault;function ti(){return ut.merge({},[].slice.call(arguments),{merger:function(t,e,i,n){if("xAxes"===t||"yAxes"===t){var a,o,r,s=i[t].length;for(e[t]||(e[t]=[]),a=0;a<s;++a)r=i[t][a],o=Qe(r.type,"xAxes"===t?"category":"linear"),a>=e[t].length&&e[t].push({}),!e[t][a].type||r.type&&r.type!==e[t][a].type?ut.merge(e[t][a],[He.getScaleDefaults(o),r]):ut.merge(e[t][a],r)}else ut._merger(t,e,i,n)}})}function ei(){return ut.merge({},[].slice.call(arguments),{merger:function(t,e,i,n){var a=e[t]||{},o=i[t];"scales"===t?e[t]=ti(a,o):"scale"===t?e[t]=ut.merge(a,[He.getScaleDefaults(o.type),o]):ut._merger(t,e,i,n)}})}function ii(t){return"top"===t||"bottom"===t}st._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var ni=function(t,e){return this.construct(t,e),this};ut.extend(ni.prototype,{construct:function(t,e){var i=this;e=function(t){var e=(t=t||{}).data=t.data||{};return e.datasets=e.datasets||[],e.labels=e.labels||[],t.options=ei(st.global,st[t.type],t.options||{}),t}(e);var n=Ve.acquireContext(t,e),a=n&&n.canvas,o=a&&a.height,r=a&&a.width;i.id=ut.uid(),i.ctx=n,i.canvas=a,i.config=e,i.width=r,i.height=o,i.aspectRatio=o?r/o:null,i.options=e.options,i._bufferedRender=!1,i.chart=i,i.controller=i,ni.instances[i.id]=i,Object.defineProperty(i,"data",{get:function(){return i.config.data},set:function(t){i.config.data=t}}),n&&a?(i.initialize(),i.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var t=this;return Ee.notify(t,"beforeInit"),ut.retinaScale(t,t.options.devicePixelRatio),t.bindEvents(),t.options.responsive&&t.resize(!0),t.ensureScalesHaveIDs(),t.buildOrUpdateScales(),t.initToolTip(),Ee.notify(t,"afterInit"),t},clear:function(){return ut.canvas.clear(this),this},stop:function(){return bt.cancelAnimation(this),this},resize:function(t){var e=this,i=e.options,n=e.canvas,a=i.maintainAspectRatio&&e.aspectRatio||null,o=Math.max(0,Math.floor(ut.getMaximumWidth(n))),r=Math.max(0,Math.floor(a?o/a:ut.getMaximumHeight(n)));if((e.width!==o||e.height!==r)&&(n.width=e.width=o,n.height=e.height=r,n.style.width=o+"px",n.style.height=r+"px",ut.retinaScale(e,i.devicePixelRatio),!t)){var s={width:o,height:r};Ee.notify(e,"resize",[s]),i.onResize&&i.onResize(e,s),e.stop(),e.update({duration:i.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var t=this.options,e=t.scales||{},i=t.scale;ut.each(e.xAxes,(function(t,e){t.id=t.id||"x-axis-"+e})),ut.each(e.yAxes,(function(t,e){t.id=t.id||"y-axis-"+e})),i&&(i.id=i.id||"scale")},buildOrUpdateScales:function(){var t=this,e=t.options,i=t.scales||{},n=[],a=Object.keys(i).reduce((function(t,e){return t[e]=!1,t}),{});e.scales&&(n=n.concat((e.scales.xAxes||[]).map((function(t){return{options:t,dtype:"category",dposition:"bottom"}})),(e.scales.yAxes||[]).map((function(t){return{options:t,dtype:"linear",dposition:"left"}})))),e.scale&&n.push({options:e.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),ut.each(n,(function(e){var n=e.options,o=n.id,r=Qe(n.type,e.dtype);ii(n.position)!==ii(e.dposition)&&(n.position=e.dposition),a[o]=!0;var s=null;if(o in i&&i[o].type===r)(s=i[o]).options=n,s.ctx=t.ctx,s.chart=t;else{var l=He.getScaleConstructor(r);if(!l)return;s=new l({id:o,type:r,options:n,ctx:t.ctx,chart:t}),i[s.id]=s}s.mergeTicksOptions(),e.isDefault&&(t.scale=s)})),ut.each(a,(function(t,e){t||delete i[e]})),t.scales=i,He.addScalesToLayout(this)},buildOrUpdateControllers:function(){var t=this,e=[];return ut.each(t.data.datasets,(function(i,n){var a=t.getDatasetMeta(n),o=i.type||t.config.type;if(a.type&&a.type!==o&&(t.destroyDatasetMeta(n),a=t.getDatasetMeta(n)),a.type=o,a.controller)a.controller.updateIndex(n),a.controller.linkScales();else{var r=ue[a.type];if(void 0===r)throw new Error('"'+a.type+'" is not a chart type.');a.controller=new r(t,n),e.push(a.controller)}}),t),e},resetElements:function(){var t=this;ut.each(t.data.datasets,(function(e,i){t.getDatasetMeta(i).controller.reset()}),t)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(t){var e,i,n=this;if(t&&"object"==typeof t||(t={duration:t,lazy:arguments[1]}),i=(e=n).options,ut.each(e.scales,(function(t){ke.removeBox(e,t)})),i=ei(st.global,st[e.config.type],i),e.options=e.config.options=i,e.ensureScalesHaveIDs(),e.buildOrUpdateScales(),e.tooltip._options=i.tooltips,e.tooltip.initialize(),Ee._invalidate(n),!1!==Ee.notify(n,"beforeUpdate")){n.tooltip._data=n.data;var a=n.buildOrUpdateControllers();ut.each(n.data.datasets,(function(t,e){n.getDatasetMeta(e).controller.buildOrUpdateElements()}),n),n.updateLayout(),n.options.animation&&n.options.animation.duration&&ut.each(a,(function(t){t.reset()})),n.updateDatasets(),n.tooltip.initialize(),n.lastActive=[],Ee.notify(n,"afterUpdate"),n._bufferedRender?n._bufferedRequest={duration:t.duration,easing:t.easing,lazy:t.lazy}:n.render(t)}},updateLayout:function(){!1!==Ee.notify(this,"beforeLayout")&&(ke.update(this,this.width,this.height),Ee.notify(this,"afterScaleUpdate"),Ee.notify(this,"afterLayout"))},updateDatasets:function(){if(!1!==Ee.notify(this,"beforeDatasetsUpdate")){for(var t=0,e=this.data.datasets.length;t<e;++t)this.updateDataset(t);Ee.notify(this,"afterDatasetsUpdate")}},updateDataset:function(t){var e=this.getDatasetMeta(t),i={meta:e,index:t};!1!==Ee.notify(this,"beforeDatasetUpdate",[i])&&(e.controller.update(),Ee.notify(this,"afterDatasetUpdate",[i]))},render:function(t){var e=this;t&&"object"==typeof t||(t={duration:t,lazy:arguments[1]});var i=e.options.animation,n=Qe(t.duration,i&&i.duration),a=t.lazy;if(!1!==Ee.notify(e,"beforeRender")){var o=function(t){Ee.notify(e,"afterRender"),ut.callback(i&&i.onComplete,[t],e)};if(i&&n){var r=new vt({numSteps:n/16.66,easing:t.easing||i.easing,render:function(t,e){var i=ut.easing.effects[e.easing],n=e.currentStep,a=n/e.numSteps;t.draw(i(a),a,n)},onAnimationProgress:i.onProgress,onAnimationComplete:o});bt.addAnimation(e,r,n,a)}else e.draw(),o(new vt({numSteps:0,chart:e}));return e}},draw:function(t){var e=this;e.clear(),ut.isNullOrUndef(t)&&(t=1),e.transition(t),e.width<=0||e.height<=0||!1!==Ee.notify(e,"beforeDraw",[t])&&(ut.each(e.boxes,(function(t){t.draw(e.chartArea)}),e),e.drawDatasets(t),e._drawTooltip(t),Ee.notify(e,"afterDraw",[t]))},transition:function(t){for(var e=0,i=(this.data.datasets||[]).length;e<i;++e)this.isDatasetVisible(e)&&this.getDatasetMeta(e).controller.transition(t);this.tooltip.transition(t)},drawDatasets:function(t){var e=this;if(!1!==Ee.notify(e,"beforeDatasetsDraw",[t])){for(var i=(e.data.datasets||[]).length-1;i>=0;--i)e.isDatasetVisible(i)&&e.drawDataset(i,t);Ee.notify(e,"afterDatasetsDraw",[t])}},drawDataset:function(t,e){var i=this.getDatasetMeta(t),n={meta:i,index:t,easingValue:e};!1!==Ee.notify(this,"beforeDatasetDraw",[n])&&(i.controller.draw(e),Ee.notify(this,"afterDatasetDraw",[n]))},_drawTooltip:function(t){var e=this.tooltip,i={tooltip:e,easingValue:t};!1!==Ee.notify(this,"beforeTooltipDraw",[i])&&(e.draw(),Ee.notify(this,"afterTooltipDraw",[i]))},getElementAtEvent:function(t){return ve.modes.single(this,t)},getElementsAtEvent:function(t){return ve.modes.label(this,t,{intersect:!0})},getElementsAtXAxis:function(t){return ve.modes["x-axis"](this,t,{intersect:!0})},getElementsAtEventForMode:function(t,e,i){var n=ve.modes[e];return"function"==typeof n?n(this,t,i):[]},getDatasetAtEvent:function(t){return ve.modes.dataset(this,t,{intersect:!0})},getDatasetMeta:function(t){var e=this.data.datasets[t];e._meta||(e._meta={});var i=e._meta[this.id];return i||(i=e._meta[this.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null}),i},getVisibleDatasetCount:function(){for(var t=0,e=0,i=this.data.datasets.length;e<i;++e)this.isDatasetVisible(e)&&t++;return t},isDatasetVisible:function(t){var e=this.getDatasetMeta(t);return"boolean"==typeof e.hidden?!e.hidden:!this.data.datasets[t].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(t){var e=this.id,i=this.data.datasets[t],n=i._meta&&i._meta[e];n&&(n.controller.destroy(),delete i._meta[e])},destroy:function(){var t,e,i=this,n=i.canvas;for(i.stop(),t=0,e=i.data.datasets.length;t<e;++t)i.destroyDatasetMeta(t);n&&(i.unbindEvents(),ut.canvas.clear(i),Ve.releaseContext(i.ctx),i.canvas=null,i.ctx=null),Ee.notify(i,"destroy"),delete ni.instances[i.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var t=this;t.tooltip=new Je({_chart:t,_chartInstance:t,_data:t.data,_options:t.options.tooltips},t)},bindEvents:function(){var t=this,e=t._listeners={},i=function(){t.eventHandler.apply(t,arguments)};ut.each(t.options.events,(function(n){Ve.addEventListener(t,n,i),e[n]=i})),t.options.responsive&&(i=function(){t.resize()},Ve.addEventListener(t,"resize",i),e.resize=i)},unbindEvents:function(){var t=this,e=t._listeners;e&&(delete t._listeners,ut.each(e,(function(e,i){Ve.removeEventListener(t,i,e)})))},updateHoverStyle:function(t,e,i){var n,a,o,r=i?"setHoverStyle":"removeHoverStyle";for(a=0,o=t.length;a<o;++a)(n=t[a])&&this.getDatasetMeta(n._datasetIndex).controller[r](n)},eventHandler:function(t){var e=this,i=e.tooltip;if(!1!==Ee.notify(e,"beforeEvent",[t])){e._bufferedRender=!0,e._bufferedRequest=null;var n=e.handleEvent(t);i&&(n=i._start?i.handleEvent(t):n|i.handleEvent(t)),Ee.notify(e,"afterEvent",[t]);var a=e._bufferedRequest;return a?e.render(a):n&&!e.animating&&(e.stop(),e.render({duration:e.options.hover.animationDuration,lazy:!0})),e._bufferedRender=!1,e._bufferedRequest=null,e}},handleEvent:function(t){var e,i=this,n=i.options||{},a=n.hover;return i.lastActive=i.lastActive||[],"mouseout"===t.type?i.active=[]:i.active=i.getElementsAtEventForMode(t,a.mode,a),ut.callback(n.onHover||n.hover.onHover,[t.native,i.active],i),"mouseup"!==t.type&&"click"!==t.type||n.onClick&&n.onClick.call(i,t.native,i.active),i.lastActive.length&&i.updateHoverStyle(i.lastActive,a.mode,!1),i.active.length&&a.mode&&i.updateHoverStyle(i.active,a.mode,!0),e=!ut.arrayEquals(i.active,i.lastActive),i.lastActive=i.active,e}}),ni.instances={};var ai=ni;ni.Controller=ni,ni.types={},ut.configMerge=ei,ut.scaleMerge=ti;function oi(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function ri(t){this.options=t||{}}ut.extend(ri.prototype,{formats:oi,parse:oi,format:oi,add:oi,diff:oi,startOf:oi,endOf:oi,_create:function(t){return t}}),ri.override=function(t){ut.extend(ri.prototype,t)};var si={_date:ri},li={formatters:{values:function(t){return ut.isArray(t)?t:""+t},linear:function(t,e,i){var n=i.length>3?i[2]-i[1]:i[1]-i[0];Math.abs(n)>1&&t!==Math.floor(t)&&(n=t-Math.floor(t));var a=ut.log10(Math.abs(n)),o="";if(0!==t)if(Math.max(Math.abs(i[0]),Math.abs(i[i.length-1]))<1e-4){var r=ut.log10(Math.abs(t));o=t.toExponential(Math.floor(r)-Math.floor(a))}else{var s=-1*Math.floor(a);s=Math.max(Math.min(s,20),0),o=t.toFixed(s)}else o="0";return o},logarithmic:function(t,e,i){var n=t/Math.pow(10,Math.floor(ut.log10(t)));return 0===t?"0":1===n||2===n||5===n||0===e||e===i.length-1?t.toExponential():""}}},di=ut.valueOrDefault,ui=ut.valueAtIndexOrDefault;function hi(t){var e,i,n=[];for(e=0,i=t.length;e<i;++e)n.push(t[e].label);return n}function ci(t,e,i){return ut.isArray(e)?ut.longestText(t,i,e):t.measureText(e).width}st._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:li.formatters.values,minor:{},major:{}}});var fi=pt.extend({getPadding:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}},getTicks:function(){return this._ticks},mergeTicksOptions:function(){var t=this.options.ticks;for(var e in!1===t.minor&&(t.minor={display:!1}),!1===t.major&&(t.major={display:!1}),t)"major"!==e&&"minor"!==e&&(void 0===t.minor[e]&&(t.minor[e]=t[e]),void 0===t.major[e]&&(t.major[e]=t[e]))},beforeUpdate:function(){ut.callback(this.options.beforeUpdate,[this])},update:function(t,e,i){var n,a,o,r,s,l,d=this;for(d.beforeUpdate(),d.maxWidth=t,d.maxHeight=e,d.margins=ut.extend({left:0,right:0,top:0,bottom:0},i),d._maxLabelLines=0,d.longestLabelWidth=0,d.longestTextCache=d.longestTextCache||{},d.beforeSetDimensions(),d.setDimensions(),d.afterSetDimensions(),d.beforeDataLimits(),d.determineDataLimits(),d.afterDataLimits(),d.beforeBuildTicks(),s=d.buildTicks()||[],s=d.afterBuildTicks(s)||s,d.beforeTickToLabelConversion(),o=d.convertTicksToLabels(s)||d.ticks,d.afterTickToLabelConversion(),d.ticks=o,n=0,a=o.length;n<a;++n)r=o[n],(l=s[n])?l.label=r:s.push(l={label:r,major:!1});return d._ticks=s,d.beforeCalculateTickRotation(),d.calculateTickRotation(),d.afterCalculateTickRotation(),d.beforeFit(),d.fit(),d.afterFit(),d.afterUpdate(),d.minSize},afterUpdate:function(){ut.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){ut.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0},afterSetDimensions:function(){ut.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){ut.callback(this.options.beforeDataLimits,[this])},determineDataLimits:ut.noop,afterDataLimits:function(){ut.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){ut.callback(this.options.beforeBuildTicks,[this])},buildTicks:ut.noop,afterBuildTicks:function(t){var e=this;return ut.isArray(t)&&t.length?ut.callback(e.options.afterBuildTicks,[e,t]):(e.ticks=ut.callback(e.options.afterBuildTicks,[e,e.ticks])||e.ticks,t)},beforeTickToLabelConversion:function(){ut.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var t=this.options.ticks;this.ticks=this.ticks.map(t.userCallback||t.callback,this)},afterTickToLabelConversion:function(){ut.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){ut.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var t=this,e=t.ctx,i=t.options.ticks,n=hi(t._ticks),a=ut.options._parseFont(i);e.font=a.string;var o=i.minRotation||0;if(n.length&&t.options.display&&t.isHorizontal())for(var r,s=ut.longestText(e,a.string,n,t.longestTextCache),l=s,d=t.getPixelForTick(1)-t.getPixelForTick(0)-6;l>d&&o<i.maxRotation;){var u=ut.toRadians(o);if(r=Math.cos(u),Math.sin(u)*s>t.maxHeight){o--;break}o++,l=r*s}t.labelRotation=o},afterCalculateTickRotation:function(){ut.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){ut.callback(this.options.beforeFit,[this])},fit:function(){var t=this,e=t.minSize={width:0,height:0},i=hi(t._ticks),n=t.options,a=n.ticks,o=n.scaleLabel,r=n.gridLines,s=t._isVisible(),l=n.position,d=t.isHorizontal(),u=ut.options._parseFont,h=u(a),c=n.gridLines.tickMarkLength;if(e.width=d?t.isFullWidth()?t.maxWidth-t.margins.left-t.margins.right:t.maxWidth:s&&r.drawTicks?c:0,e.height=d?s&&r.drawTicks?c:0:t.maxHeight,o.display&&s){var f=u(o),g=ut.options.toPadding(o.padding),p=f.lineHeight+g.height;d?e.height+=p:e.width+=p}if(a.display&&s){var m=ut.longestText(t.ctx,h.string,i,t.longestTextCache),v=ut.numberOfLabelLines(i),b=.5*h.size,x=t.options.ticks.padding;if(t._maxLabelLines=v,t.longestLabelWidth=m,d){var y=ut.toRadians(t.labelRotation),k=Math.cos(y),w=Math.sin(y)*m+h.lineHeight*v+b;e.height=Math.min(t.maxHeight,e.height+w+x),t.ctx.font=h.string;var M,_,C=ci(t.ctx,i[0],h.string),S=ci(t.ctx,i[i.length-1],h.string),P=t.getPixelForTick(0)-t.left,I=t.right-t.getPixelForTick(i.length-1);0!==t.labelRotation?(M="bottom"===l?k*C:k*b,_="bottom"===l?k*b:k*S):(M=C/2,_=S/2),t.paddingLeft=Math.max(M-P,0)+3,t.paddingRight=Math.max(_-I,0)+3}else a.mirror?m=0:m+=x+b,e.width=Math.min(t.maxWidth,e.width+m),t.paddingTop=h.size/2,t.paddingBottom=h.size/2}t.handleMargins(),t.width=e.width,t.height=e.height},handleMargins:function(){var t=this;t.margins&&(t.paddingLeft=Math.max(t.paddingLeft-t.margins.left,0),t.paddingTop=Math.max(t.paddingTop-t.margins.top,0),t.paddingRight=Math.max(t.paddingRight-t.margins.right,0),t.paddingBottom=Math.max(t.paddingBottom-t.margins.bottom,0))},afterFit:function(){ut.callback(this.options.afterFit,[this])},isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(t){if(ut.isNullOrUndef(t))return NaN;if(("number"==typeof t||t instanceof Number)&&!isFinite(t))return NaN;if(t)if(this.isHorizontal()){if(void 0!==t.x)return this.getRightValue(t.x)}else if(void 0!==t.y)return this.getRightValue(t.y);return t},getLabelForIndex:ut.noop,getPixelForValue:ut.noop,getValueForPixel:ut.noop,getPixelForTick:function(t){var e=this,i=e.options.offset;if(e.isHorizontal()){var n=(e.width-(e.paddingLeft+e.paddingRight))/Math.max(e._ticks.length-(i?0:1),1),a=n*t+e.paddingLeft;i&&(a+=n/2);return e.left+a+(e.isFullWidth()?e.margins.left:0)}var r=e.height-(e.paddingTop+e.paddingBottom);return e.top+t*(r/(e._ticks.length-1))},getPixelForDecimal:function(t){var e=this;if(e.isHorizontal()){var i=(e.width-(e.paddingLeft+e.paddingRight))*t+e.paddingLeft;return e.left+i+(e.isFullWidth()?e.margins.left:0)}return e.top+t*e.height},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var t=this.min,e=this.max;return this.beginAtZero?0:t<0&&e<0?e:t>0&&e>0?t:0},_autoSkip:function(t){var e,i,n=this,a=n.isHorizontal(),o=n.options.ticks.minor,r=t.length,s=!1,l=o.maxTicksLimit,d=n._tickSize()*(r-1),u=a?n.width-(n.paddingLeft+n.paddingRight):n.height-(n.paddingTop+n.PaddingBottom),h=[];for(d>u&&(s=1+Math.floor(d/u)),r>l&&(s=Math.max(s,1+Math.floor(r/l))),e=0;e<r;e++)i=t[e],s>1&&e%s>0&&delete i.label,h.push(i);return h},_tickSize:function(){var t=this,e=t.isHorizontal(),i=t.options.ticks.minor,n=ut.toRadians(t.labelRotation),a=Math.abs(Math.cos(n)),o=Math.abs(Math.sin(n)),r=i.autoSkipPadding||0,s=t.longestLabelWidth+r||0,l=ut.options._parseFont(i),d=t._maxLabelLines*l.lineHeight+r||0;return e?d*a>s*o?s/a:d/o:d*o<s*a?d/a:s/o},_isVisible:function(){var t,e,i,n=this.chart,a=this.options.display;if("auto"!==a)return!!a;for(t=0,e=n.data.datasets.length;t<e;++t)if(n.isDatasetVisible(t)&&((i=n.getDatasetMeta(t)).xAxisID===this.id||i.yAxisID===this.id))return!0;return!1},draw:function(t){var e=this,i=e.options;if(e._isVisible()){var n,a,o,r=e.chart,s=e.ctx,l=st.global.defaultFontColor,d=i.ticks.minor,u=i.ticks.major||d,h=i.gridLines,c=i.scaleLabel,f=i.position,g=0!==e.labelRotation,p=d.mirror,m=e.isHorizontal(),v=ut.options._parseFont,b=d.display&&d.autoSkip?e._autoSkip(e.getTicks()):e.getTicks(),x=di(d.fontColor,l),y=v(d),k=y.lineHeight,w=di(u.fontColor,l),M=v(u),_=d.padding,C=d.labelOffset,S=h.drawTicks?h.tickMarkLength:0,P=di(c.fontColor,l),I=v(c),A=ut.options.toPadding(c.padding),D=ut.toRadians(e.labelRotation),T=[],F=h.drawBorder?ui(h.lineWidth,0,0):0,L=ut._alignPixel;"top"===f?(n=L(r,e.bottom,F),a=e.bottom-S,o=n-F/2):"bottom"===f?(n=L(r,e.top,F),a=n+F/2,o=e.top+S):"left"===f?(n=L(r,e.right,F),a=e.right-S,o=n-F/2):(n=L(r,e.left,F),a=n+F/2,o=e.left+S);if(ut.each(b,(function(n,s){if(!ut.isNullOrUndef(n.label)){var l,d,u,c,v,b,x,y,w,M,P,I,A,R,O,z,B=n.label;s===e.zeroLineIndex&&i.offset===h.offsetGridLines?(l=h.zeroLineWidth,d=h.zeroLineColor,u=h.zeroLineBorderDash||[],c=h.zeroLineBorderDashOffset||0):(l=ui(h.lineWidth,s),d=ui(h.color,s),u=h.borderDash||[],c=h.borderDashOffset||0);var N=ut.isArray(B)?B.length:1,W=function(t,e,i){var n=t.getPixelForTick(e);return i&&(1===t.getTicks().length?n-=t.isHorizontal()?Math.max(n-t.left,t.right-n):Math.max(n-t.top,t.bottom-n):n-=0===e?(t.getPixelForTick(1)-n)/2:(n-t.getPixelForTick(e-1))/2),n}(e,s,h.offsetGridLines);if(m){var V=S+_;W<e.left-1e-7&&(d="rgba(0,0,0,0)"),v=x=w=P=L(r,W,l),b=a,y=o,A=e.getPixelForTick(s)+C,"top"===f?(M=L(r,t.top,F)+F/2,I=t.bottom,O=((g?1:.5)-N)*k,z=g?"left":"center",R=e.bottom-V):(M=t.top,I=L(r,t.bottom,F)-F/2,O=(g?0:.5)*k,z=g?"right":"center",R=e.top+V)}else{var E=(p?0:S)+_;W<e.top-1e-7&&(d="rgba(0,0,0,0)"),v=a,x=o,b=y=M=I=L(r,W,l),R=e.getPixelForTick(s)+C,O=(1-N)*k/2,"left"===f?(w=L(r,t.left,F)+F/2,P=t.right,z=p?"left":"right",A=e.right-E):(w=t.left,P=L(r,t.right,F)-F/2,z=p?"right":"left",A=e.left+E)}T.push({tx1:v,ty1:b,tx2:x,ty2:y,x1:w,y1:M,x2:P,y2:I,labelX:A,labelY:R,glWidth:l,glColor:d,glBorderDash:u,glBorderDashOffset:c,rotation:-1*D,label:B,major:n.major,textOffset:O,textAlign:z})}})),ut.each(T,(function(t){var e=t.glWidth,i=t.glColor;if(h.display&&e&&i&&(s.save(),s.lineWidth=e,s.strokeStyle=i,s.setLineDash&&(s.setLineDash(t.glBorderDash),s.lineDashOffset=t.glBorderDashOffset),s.beginPath(),h.drawTicks&&(s.moveTo(t.tx1,t.ty1),s.lineTo(t.tx2,t.ty2)),h.drawOnChartArea&&(s.moveTo(t.x1,t.y1),s.lineTo(t.x2,t.y2)),s.stroke(),s.restore()),d.display){s.save(),s.translate(t.labelX,t.labelY),s.rotate(t.rotation),s.font=t.major?M.string:y.string,s.fillStyle=t.major?w:x,s.textBaseline="middle",s.textAlign=t.textAlign;var n=t.label,a=t.textOffset;if(ut.isArray(n))for(var o=0;o<n.length;++o)s.fillText(""+n[o],0,a),a+=k;else s.fillText(n,0,a);s.restore()}})),c.display){var R,O,z=0,B=I.lineHeight/2;if(m)R=e.left+(e.right-e.left)/2,O="bottom"===f?e.bottom-B-A.bottom:e.top+B+A.top;else{var N="left"===f;R=N?e.left+B+A.top:e.right-B-A.top,O=e.top+(e.bottom-e.top)/2,z=N?-.5*Math.PI:.5*Math.PI}s.save(),s.translate(R,O),s.rotate(z),s.textAlign="center",s.textBaseline="middle",s.fillStyle=P,s.font=I.string,s.fillText(c.labelString,0,0),s.restore()}if(F){var W,V,E,H,j=F,q=ui(h.lineWidth,b.length-1,0);m?(W=L(r,e.left,j)-j/2,V=L(r,e.right,q)+q/2,E=H=n):(E=L(r,e.top,j)-j/2,H=L(r,e.bottom,q)+q/2,W=V=n),s.lineWidth=F,s.strokeStyle=ui(h.color,0),s.beginPath(),s.moveTo(W,E),s.lineTo(V,H),s.stroke()}}}}),gi=fi.extend({getLabels:function(){var t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels},determineDataLimits:function(){var t,e=this,i=e.getLabels();e.minIndex=0,e.maxIndex=i.length-1,void 0!==e.options.ticks.min&&(t=i.indexOf(e.options.ticks.min),e.minIndex=-1!==t?t:e.minIndex),void 0!==e.options.ticks.max&&(t=i.indexOf(e.options.ticks.max),e.maxIndex=-1!==t?t:e.maxIndex),e.min=i[e.minIndex],e.max=i[e.maxIndex]},buildTicks:function(){var t=this,e=t.getLabels();t.ticks=0===t.minIndex&&t.maxIndex===e.length-1?e:e.slice(t.minIndex,t.maxIndex+1)},getLabelForIndex:function(t,e){var i=this,n=i.chart;return n.getDatasetMeta(e).controller._getValueScaleId()===i.id?i.getRightValue(n.data.datasets[e].data[t]):i.ticks[t-i.minIndex]},getPixelForValue:function(t,e){var i,n=this,a=n.options.offset,o=Math.max(n.maxIndex+1-n.minIndex-(a?0:1),1);if(null!=t&&(i=n.isHorizontal()?t.x:t.y),void 0!==i||void 0!==t&&isNaN(e)){t=i||t;var r=n.getLabels().indexOf(t);e=-1!==r?r:e}if(n.isHorizontal()){var s=n.width/o,l=s*(e-n.minIndex);return a&&(l+=s/2),n.left+l}var d=n.height/o,u=d*(e-n.minIndex);return a&&(u+=d/2),n.top+u},getPixelForTick:function(t){return this.getPixelForValue(this.ticks[t],t+this.minIndex,null)},getValueForPixel:function(t){var e=this,i=e.options.offset,n=Math.max(e._ticks.length-(i?0:1),1),a=e.isHorizontal(),o=(a?e.width:e.height)/n;return t-=a?e.left:e.top,i&&(t-=o/2),(t<=0?0:Math.round(t/o))+e.minIndex},getBasePixel:function(){return this.bottom}});gi._defaults={position:"bottom"};var mi=ut.noop,vi=ut.isNullOrUndef,bi=fi.extend({getRightValue:function(t){return"string"==typeof t?+t:fi.prototype.getRightValue.call(this,t)},handleTickRangeOptions:function(){var t=this,e=t.options.ticks;if(e.beginAtZero){var i=ut.sign(t.min),n=ut.sign(t.max);i<0&&n<0?t.max=0:i>0&&n>0&&(t.min=0)}var a=void 0!==e.min||void 0!==e.suggestedMin,o=void 0!==e.max||void 0!==e.suggestedMax;void 0!==e.min?t.min=e.min:void 0!==e.suggestedMin&&(null===t.min?t.min=e.suggestedMin:t.min=Math.min(t.min,e.suggestedMin)),void 0!==e.max?t.max=e.max:void 0!==e.suggestedMax&&(null===t.max?t.max=e.suggestedMax:t.max=Math.max(t.max,e.suggestedMax)),a!==o&&t.min>=t.max&&(a?t.max=t.min+1:t.min=t.max-1),t.min===t.max&&(t.max++,e.beginAtZero||t.min--)},getTickLimit:function(){var t,e=this.options.ticks,i=e.stepSize,n=e.maxTicksLimit;return i?t=Math.ceil(this.max/i)-Math.floor(this.min/i)+1:(t=this._computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:mi,buildTicks:function(){var t=this,e=t.options.ticks,i=t.getTickLimit(),n={maxTicks:i=Math.max(2,i),min:e.min,max:e.max,precision:e.precision,stepSize:ut.valueOrDefault(e.fixedStepSize,e.stepSize)},a=t.ticks=function(t,e){var i,n,a,o,r=[],s=t.stepSize,l=s||1,d=t.maxTicks-1,u=t.min,h=t.max,c=t.precision,f=e.min,g=e.max,p=ut.niceNum((g-f)/d/l)*l;if(p<1e-14&&vi(u)&&vi(h))return[f,g];(o=Math.ceil(g/p)-Math.floor(f/p))>d&&(p=ut.niceNum(o*p/d/l)*l),s||vi(c)?i=Math.pow(10,ut._decimalPlaces(p)):(i=Math.pow(10,c),p=Math.ceil(p*i)/i),n=Math.floor(f/p)*p,a=Math.ceil(g/p)*p,s&&(!vi(u)&&ut.almostWhole(u/p,p/1e3)&&(n=u),!vi(h)&&ut.almostWhole(h/p,p/1e3)&&(a=h)),o=(a-n)/p,o=ut.almostEquals(o,Math.round(o),p/1e3)?Math.round(o):Math.ceil(o),n=Math.round(n*i)/i,a=Math.round(a*i)/i,r.push(vi(u)?n:u);for(var m=1;m<o;++m)r.push(Math.round((n+m*p)*i)/i);return r.push(vi(h)?a:h),r}(n,t);t.handleDirectionalChanges(),t.max=ut.max(a),t.min=ut.min(a),e.reverse?(a.reverse(),t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max)},convertTicksToLabels:function(){var t=this;t.ticksAsNumbers=t.ticks.slice(),t.zeroLineIndex=t.ticks.indexOf(0),fi.prototype.convertTicksToLabels.call(t)}}),xi={position:"left",ticks:{callback:li.formatters.linear}},yi=bi.extend({determineDataLimits:function(){var t=this,e=t.options,i=t.chart,n=i.data.datasets,a=t.isHorizontal();function o(e){return a?e.xAxisID===t.id:e.yAxisID===t.id}t.min=null,t.max=null;var r=e.stacked;if(void 0===r&&ut.each(n,(function(t,e){if(!r){var n=i.getDatasetMeta(e);i.isDatasetVisible(e)&&o(n)&&void 0!==n.stack&&(r=!0)}})),e.stacked||r){var s={};ut.each(n,(function(n,a){var r=i.getDatasetMeta(a),l=[r.type,void 0===e.stacked&&void 0===r.stack?a:"",r.stack].join(".");void 0===s[l]&&(s[l]={positiveValues:[],negativeValues:[]});var d=s[l].positiveValues,u=s[l].negativeValues;i.isDatasetVisible(a)&&o(r)&&ut.each(n.data,(function(i,n){var a=+t.getRightValue(i);isNaN(a)||r.data[n].hidden||(d[n]=d[n]||0,u[n]=u[n]||0,e.relativePoints?d[n]=100:a<0?u[n]+=a:d[n]+=a)}))})),ut.each(s,(function(e){var i=e.positiveValues.concat(e.negativeValues),n=ut.min(i),a=ut.max(i);t.min=null===t.min?n:Math.min(t.min,n),t.max=null===t.max?a:Math.max(t.max,a)}))}else ut.each(n,(function(e,n){var a=i.getDatasetMeta(n);i.isDatasetVisible(n)&&o(a)&&ut.each(e.data,(function(e,i){var n=+t.getRightValue(e);isNaN(n)||a.data[i].hidden||(null===t.min?t.min=n:n<t.min&&(t.min=n),null===t.max?t.max=n:n>t.max&&(t.max=n))}))}));t.min=isFinite(t.min)&&!isNaN(t.min)?t.min:0,t.max=isFinite(t.max)&&!isNaN(t.max)?t.max:1,this.handleTickRangeOptions()},_computeTickLimit:function(){var t;return this.isHorizontal()?Math.ceil(this.width/40):(t=ut.options._parseFont(this.options.ticks),Math.ceil(this.height/t.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},getPixelForValue:function(t){var e=this,i=e.start,n=+e.getRightValue(t),a=e.end-i;return e.isHorizontal()?e.left+e.width/a*(n-i):e.bottom-e.height/a*(n-i)},getValueForPixel:function(t){var e=this,i=e.isHorizontal(),n=i?e.width:e.height,a=(i?t-e.left:e.bottom-t)/n;return e.start+(e.end-e.start)*a},getPixelForTick:function(t){return this.getPixelForValue(this.ticksAsNumbers[t])}}),ki=xi;yi._defaults=ki;var wi=ut.valueOrDefault,Mi={position:"left",ticks:{callback:li.formatters.logarithmic}};function _i(t,e){return ut.isFinite(t)&&t>=0?t:e}var Ci=fi.extend({determineDataLimits:function(){var t=this,e=t.options,i=t.chart,n=i.data.datasets,a=t.isHorizontal();function o(e){return a?e.xAxisID===t.id:e.yAxisID===t.id}t.min=null,t.max=null,t.minNotZero=null;var r=e.stacked;if(void 0===r&&ut.each(n,(function(t,e){if(!r){var n=i.getDatasetMeta(e);i.isDatasetVisible(e)&&o(n)&&void 0!==n.stack&&(r=!0)}})),e.stacked||r){var s={};ut.each(n,(function(n,a){var r=i.getDatasetMeta(a),l=[r.type,void 0===e.stacked&&void 0===r.stack?a:"",r.stack].join(".");i.isDatasetVisible(a)&&o(r)&&(void 0===s[l]&&(s[l]=[]),ut.each(n.data,(function(e,i){var n=s[l],a=+t.getRightValue(e);isNaN(a)||r.data[i].hidden||a<0||(n[i]=n[i]||0,n[i]+=a)})))})),ut.each(s,(function(e){if(e.length>0){var i=ut.min(e),n=ut.max(e);t.min=null===t.min?i:Math.min(t.min,i),t.max=null===t.max?n:Math.max(t.max,n)}}))}else ut.each(n,(function(e,n){var a=i.getDatasetMeta(n);i.isDatasetVisible(n)&&o(a)&&ut.each(e.data,(function(e,i){var n=+t.getRightValue(e);isNaN(n)||a.data[i].hidden||n<0||(null===t.min?t.min=n:n<t.min&&(t.min=n),null===t.max?t.max=n:n>t.max&&(t.max=n),0!==n&&(null===t.minNotZero||n<t.minNotZero)&&(t.minNotZero=n))}))}));this.handleTickRangeOptions()},handleTickRangeOptions:function(){var t=this,e=t.options.ticks;t.min=_i(e.min,t.min),t.max=_i(e.max,t.max),t.min===t.max&&(0!==t.min&&null!==t.min?(t.min=Math.pow(10,Math.floor(ut.log10(t.min))-1),t.max=Math.pow(10,Math.floor(ut.log10(t.max))+1)):(t.min=1,t.max=10)),null===t.min&&(t.min=Math.pow(10,Math.floor(ut.log10(t.max))-1)),null===t.max&&(t.max=0!==t.min?Math.pow(10,Math.floor(ut.log10(t.min))+1):10),null===t.minNotZero&&(t.min>0?t.minNotZero=t.min:t.max<1?t.minNotZero=Math.pow(10,Math.floor(ut.log10(t.max))):t.minNotZero=1)},buildTicks:function(){var t=this,e=t.options.ticks,i=!t.isHorizontal(),n={min:_i(e.min),max:_i(e.max)},a=t.ticks=function(t,e){var i,n,a=[],o=wi(t.min,Math.pow(10,Math.floor(ut.log10(e.min)))),r=Math.floor(ut.log10(e.max)),s=Math.ceil(e.max/Math.pow(10,r));0===o?(i=Math.floor(ut.log10(e.minNotZero)),n=Math.floor(e.minNotZero/Math.pow(10,i)),a.push(o),o=n*Math.pow(10,i)):(i=Math.floor(ut.log10(o)),n=Math.floor(o/Math.pow(10,i)));var l=i<0?Math.pow(10,Math.abs(i)):1;do{a.push(o),10==++n&&(n=1,l=++i>=0?1:l),o=Math.round(n*Math.pow(10,i)*l)/l}while(i<r||i===r&&n<s);var d=wi(t.max,o);return a.push(d),a}(n,t);t.max=ut.max(a),t.min=ut.min(a),e.reverse?(i=!i,t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max),i&&a.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),fi.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},getPixelForTick:function(t){return this.getPixelForValue(this.tickValues[t])},_getFirstTickValue:function(t){var e=Math.floor(ut.log10(t));return Math.floor(t/Math.pow(10,e))*Math.pow(10,e)},getPixelForValue:function(t){var e,i,n,a,o,r=this,s=r.options.ticks,l=s.reverse,d=ut.log10,u=r._getFirstTickValue(r.minNotZero),h=0;return t=+r.getRightValue(t),l?(n=r.end,a=r.start,o=-1):(n=r.start,a=r.end,o=1),r.isHorizontal()?(e=r.width,i=l?r.right:r.left):(e=r.height,o*=-1,i=l?r.top:r.bottom),t!==n&&(0===n&&(e-=h=wi(s.fontSize,st.global.defaultFontSize),n=u),0!==t&&(h+=e/(d(a)-d(n))*(d(t)-d(n))),i+=o*h),i},getValueForPixel:function(t){var e,i,n,a,o=this,r=o.options.ticks,s=r.reverse,l=ut.log10,d=o._getFirstTickValue(o.minNotZero);if(s?(i=o.end,n=o.start):(i=o.start,n=o.end),o.isHorizontal()?(e=o.width,a=s?o.right-t:t-o.left):(e=o.height,a=s?t-o.top:o.bottom-t),a!==i){if(0===i){var u=wi(r.fontSize,st.global.defaultFontSize);a-=u,e-=u,i=d}a*=l(n)-l(i),a/=e,a=Math.pow(10,l(i)+a)}return a}}),Si=Mi;Ci._defaults=Si;var Pi=ut.valueOrDefault,Ii=ut.valueAtIndexOrDefault,Ai=ut.options.resolve,Di={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:li.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(t){return t}}};function Ti(t){var e=t.options;return e.angleLines.display||e.pointLabels.display?t.chart.data.labels.length:0}function Fi(t){var e=t.ticks;return e.display&&t.display?Pi(e.fontSize,st.global.defaultFontSize)+2*e.backdropPaddingY:0}function Li(t,e,i,n,a){return t===n||t===a?{start:e-i/2,end:e+i/2}:t<n||t>a?{start:e-i,end:e}:{start:e,end:e+i}}function Ri(t){return 0===t||180===t?"center":t<180?"left":"right"}function Oi(t,e,i,n){var a,o,r=i.y+n/2;if(ut.isArray(e))for(a=0,o=e.length;a<o;++a)t.fillText(e[a],i.x,r),r+=n;else t.fillText(e,i.x,r)}function zi(t,e,i){90===t||270===t?i.y-=e.h/2:(t>270||t<90)&&(i.y-=e.h)}function Bi(t){return ut.isNumber(t)?t:0}var Ni=bi.extend({setDimensions:function(){var t=this;t.width=t.maxWidth,t.height=t.maxHeight,t.paddingTop=Fi(t.options)/2,t.xCenter=Math.floor(t.width/2),t.yCenter=Math.floor((t.height-t.paddingTop)/2),t.drawingArea=Math.min(t.height-t.paddingTop,t.width)/2},determineDataLimits:function(){var t=this,e=t.chart,i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;ut.each(e.data.datasets,(function(a,o){if(e.isDatasetVisible(o)){var r=e.getDatasetMeta(o);ut.each(a.data,(function(e,a){var o=+t.getRightValue(e);isNaN(o)||r.data[a].hidden||(i=Math.min(o,i),n=Math.max(o,n))}))}})),t.min=i===Number.POSITIVE_INFINITY?0:i,t.max=n===Number.NEGATIVE_INFINITY?0:n,t.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/Fi(this.options))},convertTicksToLabels:function(){var t=this;bi.prototype.convertTicksToLabels.call(t),t.pointLabels=t.chart.data.labels.map(t.options.pointLabels.callback,t)},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},fit:function(){var t=this.options;t.display&&t.pointLabels.display?function(t){var e,i,n,a=ut.options._parseFont(t.options.pointLabels),o={l:0,r:t.width,t:0,b:t.height-t.paddingTop},r={};t.ctx.font=a.string,t._pointLabelSizes=[];var s,l,d,u=Ti(t);for(e=0;e<u;e++){n=t.getPointPosition(e,t.drawingArea+5),s=t.ctx,l=a.lineHeight,d=t.pointLabels[e]||"",i=ut.isArray(d)?{w:ut.longestText(s,s.font,d),h:d.length*l}:{w:s.measureText(d).width,h:l},t._pointLabelSizes[e]=i;var h=t.getIndexAngle(e),c=ut.toDegrees(h)%360,f=Li(c,n.x,i.w,0,180),g=Li(c,n.y,i.h,90,270);f.start<o.l&&(o.l=f.start,r.l=h),f.end>o.r&&(o.r=f.end,r.r=h),g.start<o.t&&(o.t=g.start,r.t=h),g.end>o.b&&(o.b=g.end,r.b=h)}t.setReductions(t.drawingArea,o,r)}(this):this.setCenterPoint(0,0,0,0)},setReductions:function(t,e,i){var n=this,a=e.l/Math.sin(i.l),o=Math.max(e.r-n.width,0)/Math.sin(i.r),r=-e.t/Math.cos(i.t),s=-Math.max(e.b-(n.height-n.paddingTop),0)/Math.cos(i.b);a=Bi(a),o=Bi(o),r=Bi(r),s=Bi(s),n.drawingArea=Math.min(Math.floor(t-(a+o)/2),Math.floor(t-(r+s)/2)),n.setCenterPoint(a,o,r,s)},setCenterPoint:function(t,e,i,n){var a=this,o=a.width-e-a.drawingArea,r=t+a.drawingArea,s=i+a.drawingArea,l=a.height-a.paddingTop-n-a.drawingArea;a.xCenter=Math.floor((r+o)/2+a.left),a.yCenter=Math.floor((s+l)/2+a.top+a.paddingTop)},getIndexAngle:function(t){return t*(2*Math.PI/Ti(this))+(this.chart.options&&this.chart.options.startAngle?this.chart.options.startAngle:0)*Math.PI*2/360},getDistanceFromCenterForValue:function(t){var e=this;if(null===t)return 0;var i=e.drawingArea/(e.max-e.min);return e.options.ticks.reverse?(e.max-t)*i:(t-e.min)*i},getPointPosition:function(t,e){var i=this.getIndexAngle(t)-Math.PI/2;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter}},getPointPositionForValue:function(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))},getBasePosition:function(){var t=this.min,e=this.max;return this.getPointPositionForValue(0,this.beginAtZero?0:t<0&&e<0?e:t>0&&e>0?t:0)},draw:function(){var t=this,e=t.options,i=e.gridLines,n=e.ticks;if(e.display){var a=t.ctx,o=this.getIndexAngle(0),r=ut.options._parseFont(n);(e.angleLines.display||e.pointLabels.display)&&function(t){var e=t.ctx,i=t.options,n=i.angleLines,a=i.gridLines,o=i.pointLabels,r=Pi(n.lineWidth,a.lineWidth),s=Pi(n.color,a.color),l=Fi(i);e.save(),e.lineWidth=r,e.strokeStyle=s,e.setLineDash&&(e.setLineDash(Ai([n.borderDash,a.borderDash,[]])),e.lineDashOffset=Ai([n.borderDashOffset,a.borderDashOffset,0]));var d=t.getDistanceFromCenterForValue(i.ticks.reverse?t.min:t.max),u=ut.options._parseFont(o);e.font=u.string,e.textBaseline="middle";for(var h=Ti(t)-1;h>=0;h--){if(n.display&&r&&s){var c=t.getPointPosition(h,d);e.beginPath(),e.moveTo(t.xCenter,t.yCenter),e.lineTo(c.x,c.y),e.stroke()}if(o.display){var f=0===h?l/2:0,g=t.getPointPosition(h,d+f+5),p=Ii(o.fontColor,h,st.global.defaultFontColor);e.fillStyle=p;var m=t.getIndexAngle(h),v=ut.toDegrees(m);e.textAlign=Ri(v),zi(v,t._pointLabelSizes[h],g),Oi(e,t.pointLabels[h]||"",g,u.lineHeight)}}e.restore()}(t),ut.each(t.ticks,(function(e,s){if(s>0||n.reverse){var l=t.getDistanceFromCenterForValue(t.ticksAsNumbers[s]);if(i.display&&0!==s&&function(t,e,i,n){var a,o=t.ctx,r=e.circular,s=Ti(t),l=Ii(e.color,n-1),d=Ii(e.lineWidth,n-1);if((r||s)&&l&&d){if(o.save(),o.strokeStyle=l,o.lineWidth=d,o.setLineDash&&(o.setLineDash(e.borderDash||[]),o.lineDashOffset=e.borderDashOffset||0),o.beginPath(),r)o.arc(t.xCenter,t.yCenter,i,0,2*Math.PI);else{a=t.getPointPosition(0,i),o.moveTo(a.x,a.y);for(var u=1;u<s;u++)a=t.getPointPosition(u,i),o.lineTo(a.x,a.y)}o.closePath(),o.stroke(),o.restore()}}(t,i,l,s),n.display){var d=Pi(n.fontColor,st.global.defaultFontColor);if(a.font=r.string,a.save(),a.translate(t.xCenter,t.yCenter),a.rotate(o),n.showLabelBackdrop){var u=a.measureText(e).width;a.fillStyle=n.backdropColor,a.fillRect(-u/2-n.backdropPaddingX,-l-r.size/2-n.backdropPaddingY,u+2*n.backdropPaddingX,r.size+2*n.backdropPaddingY)}a.textAlign="center",a.textBaseline="middle",a.fillStyle=d,a.fillText(e,0,-l),a.restore()}}}))}}}),Wi=Di;Ni._defaults=Wi;var Vi=ut.valueOrDefault,Ei=Number.MIN_SAFE_INTEGER||-9007199254740991,Hi=Number.MAX_SAFE_INTEGER||9007199254740991,ji={millisecond:{common:!0,size:1,steps:[1,2,5,10,20,50,100,250,500]},second:{common:!0,size:1e3,steps:[1,2,5,10,15,30]},minute:{common:!0,size:6e4,steps:[1,2,5,10,15,30]},hour:{common:!0,size:36e5,steps:[1,2,3,6,12]},day:{common:!0,size:864e5,steps:[1,2,5]},week:{common:!1,size:6048e5,steps:[1,2,3,4]},month:{common:!0,size:2628e6,steps:[1,2,3]},quarter:{common:!1,size:7884e6,steps:[1,2,3,4]},year:{common:!0,size:3154e7}},qi=Object.keys(ji);function Yi(t,e){return t-e}function Ui(t){var e,i,n,a={},o=[];for(e=0,i=t.length;e<i;++e)a[n=t[e]]||(a[n]=!0,o.push(n));return o}function Xi(t,e,i,n){var a=function(t,e,i){for(var n,a,o,r=0,s=t.length-1;r>=0&&r<=s;){if(a=t[(n=r+s>>1)-1]||null,o=t[n],!a)return{lo:null,hi:o};if(o[e]<i)r=n+1;else{if(!(a[e]>i))return{lo:a,hi:o};s=n-1}}return{lo:o,hi:null}}(t,e,i),o=a.lo?a.hi?a.lo:t[t.length-2]:t[0],r=a.lo?a.hi?a.hi:t[t.length-1]:t[1],s=r[e]-o[e],l=s?(i-o[e])/s:0,d=(r[n]-o[n])*l;return o[n]+d}function Ki(t,e){var i=t._adapter,n=t.options.time,a=n.parser,o=a||n.format,r=e;return"function"==typeof a&&(r=a(r)),ut.isFinite(r)||(r="string"==typeof o?i.parse(r,o):i.parse(r)),null!==r?+r:(a||"function"!=typeof o||(r=o(e),ut.isFinite(r)||(r=i.parse(r))),r)}function Gi(t,e){if(ut.isNullOrUndef(e))return null;var i=t.options.time,n=Ki(t,t.getRightValue(e));return null===n?n:(i.round&&(n=+t._adapter.startOf(n,i.round)),n)}function Zi(t){for(var e=qi.indexOf(t)+1,i=qi.length;e<i;++e)if(ji[qi[e]].common)return qi[e]}var Ji=fi.extend({initialize:function(){this.mergeTicksOptions(),fi.prototype.initialize.call(this)},update:function(){var t=this.options,e=t.time||(t.time={}),i=this._adapter=new si._date(t.adapters.date);return e.format&&console.warn("options.time.format is deprecated and replaced by options.time.parser."),ut.mergeIf(e.displayFormats,i.formats()),fi.prototype.update.apply(this,arguments)},getRightValue:function(t){return t&&void 0!==t.t&&(t=t.t),fi.prototype.getRightValue.call(this,t)},determineDataLimits:function(){var t,e,i,n,a,o,r=this,s=r.chart,l=r._adapter,d=r.options.time,u=d.unit||"day",h=Hi,c=Ei,f=[],g=[],p=[],m=s.data.labels||[];for(t=0,i=m.length;t<i;++t)p.push(Gi(r,m[t]));for(t=0,i=(s.data.datasets||[]).length;t<i;++t)if(s.isDatasetVisible(t))if(a=s.data.datasets[t].data,ut.isObject(a[0]))for(g[t]=[],e=0,n=a.length;e<n;++e)o=Gi(r,a[e]),f.push(o),g[t][e]=o;else{for(e=0,n=p.length;e<n;++e)f.push(p[e]);g[t]=p.slice(0)}else g[t]=[];p.length&&(p=Ui(p).sort(Yi),h=Math.min(h,p[0]),c=Math.max(c,p[p.length-1])),f.length&&(f=Ui(f).sort(Yi),h=Math.min(h,f[0]),c=Math.max(c,f[f.length-1])),h=Gi(r,d.min)||h,c=Gi(r,d.max)||c,h=h===Hi?+l.startOf(Date.now(),u):h,c=c===Ei?+l.endOf(Date.now(),u)+1:c,r.min=Math.min(h,c),r.max=Math.max(h+1,c),r._horizontal=r.isHorizontal(),r._table=[],r._timestamps={data:f,datasets:g,labels:p}},buildTicks:function(){var t,e,i,n=this,a=n.min,o=n.max,r=n.options,s=r.time,l=[],d=[];switch(r.ticks.source){case"data":l=n._timestamps.data;break;case"labels":l=n._timestamps.labels;break;case"auto":default:l=function(t,e,i,n){var a,o=t._adapter,r=t.options,s=r.time,l=s.unit||function(t,e,i,n){var a,o,r,s=qi.length;for(a=qi.indexOf(t);a<s-1;++a)if(r=(o=ji[qi[a]]).steps?o.steps[o.steps.length-1]:Hi,o.common&&Math.ceil((i-e)/(r*o.size))<=n)return qi[a];return qi[s-1]}(s.minUnit,e,i,n),d=Zi(l),u=Vi(s.stepSize,s.unitStepSize),h="week"===l&&s.isoWeekday,c=r.ticks.major.enabled,f=ji[l],g=e,p=i,m=[];for(u||(u=function(t,e,i,n){var a,o,r,s=e-t,l=ji[i],d=l.size,u=l.steps;if(!u)return Math.ceil(s/(n*d));for(a=0,o=u.length;a<o&&(r=u[a],!(Math.ceil(s/(d*r))<=n));++a);return r}(e,i,l,n)),h&&(g=+o.startOf(g,"isoWeek",h),p=+o.startOf(p,"isoWeek",h)),g=+o.startOf(g,h?"day":l),(p=+o.startOf(p,h?"day":l))<i&&(p=+o.add(p,1,l)),a=g,c&&d&&!h&&!s.round&&(a=+o.startOf(a,d),a=+o.add(a,~~((g-a)/(f.size*u))*u,l));a<p;a=+o.add(a,u,l))m.push(+a);return m.push(+a),m}(n,a,o,n.getLabelCapacity(a))}for("ticks"===r.bounds&&l.length&&(a=l[0],o=l[l.length-1]),a=Gi(n,s.min)||a,o=Gi(n,s.max)||o,t=0,e=l.length;t<e;++t)(i=l[t])>=a&&i<=o&&d.push(i);return n.min=a,n.max=o,n._unit=s.unit||function(t,e,i,n,a){var o,r;for(o=qi.length-1;o>=qi.indexOf(i);o--)if(r=qi[o],ji[r].common&&t._adapter.diff(a,n,r)>=e.length)return r;return qi[i?qi.indexOf(i):0]}(n,d,s.minUnit,n.min,n.max),n._majorUnit=Zi(n._unit),n._table=function(t,e,i,n){if("linear"===n||!t.length)return[{time:e,pos:0},{time:i,pos:1}];var a,o,r,s,l,d=[],u=[e];for(a=0,o=t.length;a<o;++a)(s=t[a])>e&&s<i&&u.push(s);for(u.push(i),a=0,o=u.length;a<o;++a)l=u[a+1],r=u[a-1],s=u[a],void 0!==r&&void 0!==l&&Math.round((l+r)/2)===s||d.push({time:s,pos:a/(o-1)});return d}(n._timestamps.data,a,o,r.distribution),n._offsets=function(t,e,i,n,a){var o,r,s=0,l=0;return a.offset&&e.length&&(a.time.min||(o=Xi(t,"time",e[0],"pos"),s=1===e.length?1-o:(Xi(t,"time",e[1],"pos")-o)/2),a.time.max||(r=Xi(t,"time",e[e.length-1],"pos"),l=1===e.length?r:(r-Xi(t,"time",e[e.length-2],"pos"))/2)),{start:s,end:l}}(n._table,d,0,0,r),r.ticks.reverse&&d.reverse(),function(t,e,i){var n,a,o,r,s=[];for(n=0,a=e.length;n<a;++n)o=e[n],r=!!i&&o===+t._adapter.startOf(o,i),s.push({value:o,major:r});return s}(n,d,n._majorUnit)},getLabelForIndex:function(t,e){var i=this,n=i._adapter,a=i.chart.data,o=i.options.time,r=a.labels&&t<a.labels.length?a.labels[t]:"",s=a.datasets[e].data[t];return ut.isObject(s)&&(r=i.getRightValue(s)),o.tooltipFormat?n.format(Ki(i,r),o.tooltipFormat):"string"==typeof r?r:n.format(Ki(i,r),o.displayFormats.datetime)},tickFormatFunction:function(t,e,i,n){var a=this._adapter,o=this.options,r=o.time.displayFormats,s=r[this._unit],l=this._majorUnit,d=r[l],u=+a.startOf(t,l),h=o.ticks.major,c=h.enabled&&l&&d&&t===u,f=a.format(t,n||(c?d:s)),g=c?h:o.ticks.minor,p=Vi(g.callback,g.userCallback);return p?p(f,e,i):f},convertTicksToLabels:function(t){var e,i,n=[];for(e=0,i=t.length;e<i;++e)n.push(this.tickFormatFunction(t[e].value,e,t));return n},getPixelForOffset:function(t){var e=this,i=e.options.ticks.reverse,n=e._horizontal?e.width:e.height,a=e._horizontal?i?e.right:e.left:i?e.bottom:e.top,o=Xi(e._table,"time",t,"pos"),r=n*(e._offsets.start+o)/(e._offsets.start+1+e._offsets.end);return i?a-r:a+r},getPixelForValue:function(t,e,i){var n=null;if(void 0!==e&&void 0!==i&&(n=this._timestamps.datasets[i][e]),null===n&&(n=Gi(this,t)),null!==n)return this.getPixelForOffset(n)},getPixelForTick:function(t){var e=this.getTicks();return t>=0&&t<e.length?this.getPixelForOffset(e[t].value):null},getValueForPixel:function(t){var e=this,i=e._horizontal?e.width:e.height,n=e._horizontal?e.left:e.top,a=(i?(t-n)/i:0)*(e._offsets.start+1+e._offsets.start)-e._offsets.end,o=Xi(e._table,"pos",a,"time");return e._adapter._create(o)},getLabelWidth:function(t){var e=this.options.ticks,i=this.ctx.measureText(t).width,n=ut.toRadians(e.maxRotation),a=Math.cos(n),o=Math.sin(n);return i*a+Vi(e.fontSize,st.global.defaultFontSize)*o},getLabelCapacity:function(t){var e=this,i=e.options.time.displayFormats.millisecond,n=e.tickFormatFunction(t,0,[],i),a=e.getLabelWidth(n),o=e.isHorizontal()?e.width:e.height,r=Math.floor(o/a);return r>0?r:1}});Ji._defaults={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,format:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}};var tn={category:gi,linear:yi,logarithmic:Ci,radialLinear:Ni,time:Ji},en={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};si._date.override("function"==typeof t?{_id:"moment",formats:function(){return en},parse:function(e,i){return"string"==typeof e&&"string"==typeof i?e=t(e,i):e instanceof t||(e=t(e)),e.isValid()?e.valueOf():null},format:function(e,i){return t(e).format(i)},add:function(e,i,n){return t(e).add(i,n).valueOf()},diff:function(e,i,n){return t.duration(t(e).diff(t(i))).as(n)},startOf:function(e,i,n){return e=t(e),"isoWeek"===i?e.isoWeekday(n).valueOf():e.startOf(i).valueOf()},endOf:function(e,i){return t(e).endOf(i).valueOf()},_create:function(e){return t(e)}}:{}),st._set("global",{plugins:{filler:{propagate:!0}}});var nn={dataset:function(t){var e=t.fill,i=t.chart,n=i.getDatasetMeta(e),a=n&&i.isDatasetVisible(e)&&n.dataset._children||[],o=a.length||0;return o?function(t,e){return e<o&&a[e]._view||null}:null},boundary:function(t){var e=t.boundary,i=e?e.x:null,n=e?e.y:null;return function(t){return{x:null===i?t.x:i,y:null===n?t.y:n}}}};function an(t,e,i){var n,a=t._model||{},o=a.fill;if(void 0===o&&(o=!!a.backgroundColor),!1===o||null===o)return!1;if(!0===o)return"origin";if(n=parseFloat(o,10),isFinite(n)&&Math.floor(n)===n)return"-"!==o[0]&&"+"!==o[0]||(n=e+n),!(n===e||n<0||n>=i)&&n;switch(o){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return o;default:return!1}}function on(t){var e,i=t.el._model||{},n=t.el._scale||{},a=t.fill,o=null;if(isFinite(a))return null;if("start"===a?o=void 0===i.scaleBottom?n.bottom:i.scaleBottom:"end"===a?o=void 0===i.scaleTop?n.top:i.scaleTop:void 0!==i.scaleZero?o=i.scaleZero:n.getBasePosition?o=n.getBasePosition():n.getBasePixel&&(o=n.getBasePixel()),null!=o){if(void 0!==o.x&&void 0!==o.y)return o;if(ut.isFinite(o))return{x:(e=n.isHorizontal())?o:null,y:e?null:o}}return null}function rn(t,e,i){var n,a=t[e].fill,o=[e];if(!i)return a;for(;!1!==a&&-1===o.indexOf(a);){if(!isFinite(a))return a;if(!(n=t[a]))return!1;if(n.visible)return a;o.push(a),a=n.fill}return!1}function sn(t){var e=t.fill,i="dataset";return!1===e?null:(isFinite(e)||(i="boundary"),nn[i](t))}function ln(t){return t&&!t.skip}function dn(t,e,i,n,a){var o;if(n&&a){for(t.moveTo(e[0].x,e[0].y),o=1;o<n;++o)ut.canvas.lineTo(t,e[o-1],e[o]);for(t.lineTo(i[a-1].x,i[a-1].y),o=a-1;o>0;--o)ut.canvas.lineTo(t,i[o],i[o-1],!0)}}var un={id:"filler",afterDatasetsUpdate:function(t,e){var i,n,a,o,r=(t.data.datasets||[]).length,s=e.propagate,l=[];for(n=0;n<r;++n)o=null,(a=(i=t.getDatasetMeta(n)).dataset)&&a._model&&a instanceof Wt.Line&&(o={visible:t.isDatasetVisible(n),fill:an(a,n,r),chart:t,el:a}),i.$filler=o,l.push(o);for(n=0;n<r;++n)(o=l[n])&&(o.fill=rn(l,n,s),o.boundary=on(o),o.mapper=sn(o))},beforeDatasetDraw:function(t,e){var i=e.meta.$filler;if(i){var n=t.ctx,a=i.el,o=a._view,r=a._children||[],s=i.mapper,l=o.backgroundColor||st.global.defaultColor;s&&l&&r.length&&(ut.canvas.clipArea(n,t.chartArea),function(t,e,i,n,a,o){var r,s,l,d,u,h,c,f=e.length,g=n.spanGaps,p=[],m=[],v=0,b=0;for(t.beginPath(),r=0,s=f+!!o;r<s;++r)u=i(d=e[l=r%f]._view,l,n),h=ln(d),c=ln(u),h&&c?(v=p.push(d),b=m.push(u)):v&&b&&(g?(h&&p.push(d),c&&m.push(u)):(dn(t,p,m,v,b),v=b=0,p=[],m=[]));dn(t,p,m,v,b),t.closePath(),t.fillStyle=a,t.fill()}(n,r,s,o,l,a._loop),ut.canvas.unclipArea(n))}}},hn=ut.noop,cn=ut.valueOrDefault;function fn(t,e){return t.usePointStyle&&t.boxWidth>e?e:t.boxWidth}st._set("global",{legend:{display:!0,position:"top",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(t,e){var i=e.datasetIndex,n=this.chart,a=n.getDatasetMeta(i);a.hidden=null===a.hidden?!n.data.datasets[i].hidden:null,n.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(t){var e=t.data;return ut.isArray(e.datasets)?e.datasets.map((function(e,i){return{text:e.label,fillStyle:ut.isArray(e.backgroundColor)?e.backgroundColor[0]:e.backgroundColor,hidden:!t.isDatasetVisible(i),lineCap:e.borderCapStyle,lineDash:e.borderDash,lineDashOffset:e.borderDashOffset,lineJoin:e.borderJoinStyle,lineWidth:e.borderWidth,strokeStyle:e.borderColor,pointStyle:e.pointStyle,datasetIndex:i}}),this):[]}}},legendCallback:function(t){var e=[];e.push('<ul class="'+t.id+'-legend">');for(var i=0;i<t.data.datasets.length;i++)e.push('<li><span style="background-color:'+t.data.datasets[i].backgroundColor+'"></span>'),t.data.datasets[i].label&&e.push(t.data.datasets[i].label),e.push("</li>");return e.push("</ul>"),e.join("")}});var gn=pt.extend({initialize:function(t){ut.extend(this,t),this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1},beforeUpdate:hn,update:function(t,e,i){var n=this;return n.beforeUpdate(),n.maxWidth=t,n.maxHeight=e,n.margins=i,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:hn,beforeSetDimensions:hn,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:hn,beforeBuildLabels:hn,buildLabels:function(){var t=this,e=t.options.labels||{},i=ut.callback(e.generateLabels,[t.chart],t)||[];e.filter&&(i=i.filter((function(i){return e.filter(i,t.chart.data)}))),t.options.reverse&&i.reverse(),t.legendItems=i},afterBuildLabels:hn,beforeFit:hn,fit:function(){var t=this,e=t.options,i=e.labels,n=e.display,a=t.ctx,o=ut.options._parseFont(i),r=o.size,s=t.legendHitBoxes=[],l=t.minSize,d=t.isHorizontal();if(d?(l.width=t.maxWidth,l.height=n?10:0):(l.width=n?10:0,l.height=t.maxHeight),n)if(a.font=o.string,d){var u=t.lineWidths=[0],h=0;a.textAlign="left",a.textBaseline="top",ut.each(t.legendItems,(function(t,e){var n=fn(i,r)+r/2+a.measureText(t.text).width;(0===e||u[u.length-1]+n+i.padding>l.width)&&(h+=r+i.padding,u[u.length-(e>0?0:1)]=i.padding),s[e]={left:0,top:0,width:n,height:r},u[u.length-1]+=n+i.padding})),l.height+=h}else{var c=i.padding,f=t.columnWidths=[],g=i.padding,p=0,m=0,v=r+c;ut.each(t.legendItems,(function(t,e){var n=fn(i,r)+r/2+a.measureText(t.text).width;e>0&&m+v>l.height-c&&(g+=p+i.padding,f.push(p),p=0,m=0),p=Math.max(p,n),m+=v,s[e]={left:0,top:0,width:n,height:r}})),g+=p,f.push(p),l.width+=g}t.width=l.width,t.height=l.height},afterFit:hn,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var t=this,e=t.options,i=e.labels,n=st.global,a=n.defaultColor,o=n.elements.line,r=t.width,s=t.lineWidths;if(e.display){var l,d=t.ctx,u=cn(i.fontColor,n.defaultFontColor),h=ut.options._parseFont(i),c=h.size;d.textAlign="left",d.textBaseline="middle",d.lineWidth=.5,d.strokeStyle=u,d.fillStyle=u,d.font=h.string;var f=fn(i,c),g=t.legendHitBoxes,p=t.isHorizontal();l=p?{x:t.left+(r-s[0])/2+i.padding,y:t.top+i.padding,line:0}:{x:t.left+i.padding,y:t.top+i.padding,line:0};var m=c+i.padding;ut.each(t.legendItems,(function(n,u){var h=d.measureText(n.text).width,v=f+c/2+h,b=l.x,x=l.y;p?u>0&&b+v+i.padding>t.left+t.minSize.width&&(x=l.y+=m,l.line++,b=l.x=t.left+(r-s[l.line])/2+i.padding):u>0&&x+m>t.top+t.minSize.height&&(b=l.x=b+t.columnWidths[l.line]+i.padding,x=l.y=t.top+i.padding,l.line++),function(t,i,n){if(!(isNaN(f)||f<=0)){d.save();var r=cn(n.lineWidth,o.borderWidth);if(d.fillStyle=cn(n.fillStyle,a),d.lineCap=cn(n.lineCap,o.borderCapStyle),d.lineDashOffset=cn(n.lineDashOffset,o.borderDashOffset),d.lineJoin=cn(n.lineJoin,o.borderJoinStyle),d.lineWidth=r,d.strokeStyle=cn(n.strokeStyle,a),d.setLineDash&&d.setLineDash(cn(n.lineDash,o.borderDash)),e.labels&&e.labels.usePointStyle){var s=f*Math.SQRT2/2,l=t+f/2,u=i+c/2;ut.canvas.drawPoint(d,n.pointStyle,s,l,u)}else 0!==r&&d.strokeRect(t,i,f,c),d.fillRect(t,i,f,c);d.restore()}}(b,x,n),g[u].left=b,g[u].top=x,function(t,e,i,n){var a=c/2,o=f+a+t,r=e+a;d.fillText(i.text,o,r),i.hidden&&(d.beginPath(),d.lineWidth=2,d.moveTo(o,r),d.lineTo(o+n,r),d.stroke())}(b,x,n,h),p?l.x+=v+i.padding:l.y+=m}))}},_getLegendItemAt:function(t,e){var i,n,a,o=this;if(t>=o.left&&t<=o.right&&e>=o.top&&e<=o.bottom)for(a=o.legendHitBoxes,i=0;i<a.length;++i)if(t>=(n=a[i]).left&&t<=n.left+n.width&&e>=n.top&&e<=n.top+n.height)return o.legendItems[i];return null},handleEvent:function(t){var e,i=this,n=i.options,a="mouseup"===t.type?"click":t.type;if("mousemove"===a){if(!n.onHover&&!n.onLeave)return}else{if("click"!==a)return;if(!n.onClick)return}e=i._getLegendItemAt(t.x,t.y),"click"===a?e&&n.onClick&&n.onClick.call(i,t.native,e):(n.onLeave&&e!==i._hoveredItem&&(i._hoveredItem&&n.onLeave.call(i,t.native,i._hoveredItem),i._hoveredItem=e),n.onHover&&e&&n.onHover.call(i,t.native,e))}});function pn(t,e){var i=new gn({ctx:t.ctx,options:e,chart:t});ke.configure(t,i,e),ke.addBox(t,i),t.legend=i}var mn={id:"legend",_element:gn,beforeInit:function(t){var e=t.options.legend;e&&pn(t,e)},beforeUpdate:function(t){var e=t.options.legend,i=t.legend;e?(ut.mergeIf(e,st.global.legend),i?(ke.configure(t,i,e),i.options=e):pn(t,e)):i&&(ke.removeBox(t,i),delete t.legend)},afterEvent:function(t,e){var i=t.legend;i&&i.handleEvent(e)}},vn=ut.noop;st._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var bn=pt.extend({initialize:function(t){ut.extend(this,t),this.legendHitBoxes=[]},beforeUpdate:vn,update:function(t,e,i){var n=this;return n.beforeUpdate(),n.maxWidth=t,n.maxHeight=e,n.margins=i,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:vn,beforeSetDimensions:vn,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:vn,beforeBuildLabels:vn,buildLabels:vn,afterBuildLabels:vn,beforeFit:vn,fit:function(){var t=this,e=t.options,i=e.display,n=t.minSize,a=ut.isArray(e.text)?e.text.length:1,o=ut.options._parseFont(e),r=i?a*o.lineHeight+2*e.padding:0;t.isHorizontal()?(n.width=t.maxWidth,n.height=r):(n.width=r,n.height=t.maxHeight),t.width=n.width,t.height=n.height},afterFit:vn,isHorizontal:function(){var t=this.options.position;return"top"===t||"bottom"===t},draw:function(){var t=this,e=t.ctx,i=t.options;if(i.display){var n,a,o,r=ut.options._parseFont(i),s=r.lineHeight,l=s/2+i.padding,d=0,u=t.top,h=t.left,c=t.bottom,f=t.right;e.fillStyle=ut.valueOrDefault(i.fontColor,st.global.defaultFontColor),e.font=r.string,t.isHorizontal()?(a=h+(f-h)/2,o=u+l,n=f-h):(a="left"===i.position?h+l:f-l,o=u+(c-u)/2,n=c-u,d=Math.PI*("left"===i.position?-.5:.5)),e.save(),e.translate(a,o),e.rotate(d),e.textAlign="center",e.textBaseline="middle";var g=i.text;if(ut.isArray(g))for(var p=0,m=0;m<g.length;++m)e.fillText(g[m],0,p,n),p+=s;else e.fillText(g,0,0,n);e.restore()}}});function xn(t,e){var i=new bn({ctx:t.ctx,options:e,chart:t});ke.configure(t,i,e),ke.addBox(t,i),t.titleBlock=i}var yn={},kn=un,wn=mn,Mn={id:"title",_element:bn,beforeInit:function(t){var e=t.options.title;e&&xn(t,e)},beforeUpdate:function(t){var e=t.options.title,i=t.titleBlock;e?(ut.mergeIf(e,st.global.title),i?(ke.configure(t,i,e),i.options=e):xn(t,e)):i&&(ke.removeBox(t,i),delete t.titleBlock)}};for(var _n in yn.filler=kn,yn.legend=wn,yn.title=Mn,ai.helpers=ut,function(){function t(t,e,i){var n;return"string"==typeof t?(n=parseInt(t,10),-1!==t.indexOf("%")&&(n=n/100*e.parentNode[i])):n=t,n}function e(t){return null!=t&&"none"!==t}function i(i,n,a){var o=document.defaultView,r=ut._getParentNode(i),s=o.getComputedStyle(i)[n],l=o.getComputedStyle(r)[n],d=e(s),u=e(l),h=Number.POSITIVE_INFINITY;return d||u?Math.min(d?t(s,i,a):h,u?t(l,r,a):h):"none"}ut.where=function(t,e){if(ut.isArray(t)&&Array.prototype.filter)return t.filter(e);var i=[];return ut.each(t,(function(t){e(t)&&i.push(t)})),i},ut.findIndex=Array.prototype.findIndex?function(t,e,i){return t.findIndex(e,i)}:function(t,e,i){i=void 0===i?t:i;for(var n=0,a=t.length;n<a;++n)if(e.call(i,t[n],n,t))return n;return-1},ut.findNextWhere=function(t,e,i){ut.isNullOrUndef(i)&&(i=-1);for(var n=i+1;n<t.length;n++){var a=t[n];if(e(a))return a}},ut.findPreviousWhere=function(t,e,i){ut.isNullOrUndef(i)&&(i=t.length);for(var n=i-1;n>=0;n--){var a=t[n];if(e(a))return a}},ut.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},ut.almostEquals=function(t,e,i){return Math.abs(t-e)<i},ut.almostWhole=function(t,e){var i=Math.round(t);return i-e<t&&i+e>t},ut.max=function(t){return t.reduce((function(t,e){return isNaN(e)?t:Math.max(t,e)}),Number.NEGATIVE_INFINITY)},ut.min=function(t){return t.reduce((function(t,e){return isNaN(e)?t:Math.min(t,e)}),Number.POSITIVE_INFINITY)},ut.sign=Math.sign?function(t){return Math.sign(t)}:function(t){return 0==(t=+t)||isNaN(t)?t:t>0?1:-1},ut.log10=Math.log10?function(t){return Math.log10(t)}:function(t){var e=Math.log(t)*Math.LOG10E,i=Math.round(e);return t===Math.pow(10,i)?i:e},ut.toRadians=function(t){return t*(Math.PI/180)},ut.toDegrees=function(t){return t*(180/Math.PI)},ut._decimalPlaces=function(t){if(ut.isFinite(t)){for(var e=1,i=0;Math.round(t*e)/e!==t;)e*=10,i++;return i}},ut.getAngleFromPoint=function(t,e){var i=e.x-t.x,n=e.y-t.y,a=Math.sqrt(i*i+n*n),o=Math.atan2(n,i);return o<-.5*Math.PI&&(o+=2*Math.PI),{angle:o,distance:a}},ut.distanceBetweenPoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},ut.aliasPixel=function(t){return t%2==0?0:.5},ut._alignPixel=function(t,e,i){var n=t.currentDevicePixelRatio,a=i/2;return Math.round((e-a)*n)/n+a},ut.splineCurve=function(t,e,i,n){var a=t.skip?e:t,o=e,r=i.skip?e:i,s=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2)),l=Math.sqrt(Math.pow(r.x-o.x,2)+Math.pow(r.y-o.y,2)),d=s/(s+l),u=l/(s+l),h=n*(d=isNaN(d)?0:d),c=n*(u=isNaN(u)?0:u);return{previous:{x:o.x-h*(r.x-a.x),y:o.y-h*(r.y-a.y)},next:{x:o.x+c*(r.x-a.x),y:o.y+c*(r.y-a.y)}}},ut.EPSILON=Number.EPSILON||1e-14,ut.splineCurveMonotone=function(t){var e,i,n,a,o,r,s,l,d,u=(t||[]).map((function(t){return{model:t._model,deltaK:0,mK:0}})),h=u.length;for(e=0;e<h;++e)if(!(n=u[e]).model.skip){if(i=e>0?u[e-1]:null,(a=e<h-1?u[e+1]:null)&&!a.model.skip){var c=a.model.x-n.model.x;n.deltaK=0!==c?(a.model.y-n.model.y)/c:0}!i||i.model.skip?n.mK=n.deltaK:!a||a.model.skip?n.mK=i.deltaK:this.sign(i.deltaK)!==this.sign(n.deltaK)?n.mK=0:n.mK=(i.deltaK+n.deltaK)/2}for(e=0;e<h-1;++e)n=u[e],a=u[e+1],n.model.skip||a.model.skip||(ut.almostEquals(n.deltaK,0,this.EPSILON)?n.mK=a.mK=0:(o=n.mK/n.deltaK,r=a.mK/n.deltaK,(l=Math.pow(o,2)+Math.pow(r,2))<=9||(s=3/Math.sqrt(l),n.mK=o*s*n.deltaK,a.mK=r*s*n.deltaK)));for(e=0;e<h;++e)(n=u[e]).model.skip||(i=e>0?u[e-1]:null,a=e<h-1?u[e+1]:null,i&&!i.model.skip&&(d=(n.model.x-i.model.x)/3,n.model.controlPointPreviousX=n.model.x-d,n.model.controlPointPreviousY=n.model.y-d*n.mK),a&&!a.model.skip&&(d=(a.model.x-n.model.x)/3,n.model.controlPointNextX=n.model.x+d,n.model.controlPointNextY=n.model.y+d*n.mK))},ut.nextItem=function(t,e,i){return i?e>=t.length-1?t[0]:t[e+1]:e>=t.length-1?t[t.length-1]:t[e+1]},ut.previousItem=function(t,e,i){return i?e<=0?t[t.length-1]:t[e-1]:e<=0?t[0]:t[e-1]},ut.niceNum=function(t,e){var i=Math.floor(ut.log10(t)),n=t/Math.pow(10,i);return(e?n<1.5?1:n<3?2:n<7?5:10:n<=1?1:n<=2?2:n<=5?5:10)*Math.pow(10,i)},ut.requestAnimFrame="undefined"==typeof window?function(t){t()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},ut.getRelativePosition=function(t,e){var i,n,a=t.originalEvent||t,o=t.target||t.srcElement,r=o.getBoundingClientRect(),s=a.touches;s&&s.length>0?(i=s[0].clientX,n=s[0].clientY):(i=a.clientX,n=a.clientY);var l=parseFloat(ut.getStyle(o,"padding-left")),d=parseFloat(ut.getStyle(o,"padding-top")),u=parseFloat(ut.getStyle(o,"padding-right")),h=parseFloat(ut.getStyle(o,"padding-bottom")),c=r.right-r.left-l-u,f=r.bottom-r.top-d-h;return{x:i=Math.round((i-r.left-l)/c*o.width/e.currentDevicePixelRatio),y:n=Math.round((n-r.top-d)/f*o.height/e.currentDevicePixelRatio)}},ut.getConstraintWidth=function(t){return i(t,"max-width","clientWidth")},ut.getConstraintHeight=function(t){return i(t,"max-height","clientHeight")},ut._calculatePadding=function(t,e,i){return(e=ut.getStyle(t,e)).indexOf("%")>-1?i*parseInt(e,10)/100:parseInt(e,10)},ut._getParentNode=function(t){var e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e},ut.getMaximumWidth=function(t){var e=ut._getParentNode(t);if(!e)return t.clientWidth;var i=e.clientWidth,n=i-ut._calculatePadding(e,"padding-left",i)-ut._calculatePadding(e,"padding-right",i),a=ut.getConstraintWidth(t);return isNaN(a)?n:Math.min(n,a)},ut.getMaximumHeight=function(t){var e=ut._getParentNode(t);if(!e)return t.clientHeight;var i=e.clientHeight,n=i-ut._calculatePadding(e,"padding-top",i)-ut._calculatePadding(e,"padding-bottom",i),a=ut.getConstraintHeight(t);return isNaN(a)?n:Math.min(n,a)},ut.getStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null).getPropertyValue(e)},ut.retinaScale=function(t,e){var i=t.currentDevicePixelRatio=e||"undefined"!=typeof window&&window.devicePixelRatio||1;if(1!==i){var n=t.canvas,a=t.height,o=t.width;n.height=a*i,n.width=o*i,t.ctx.scale(i,i),n.style.height||n.style.width||(n.style.height=a+"px",n.style.width=o+"px")}},ut.fontString=function(t,e,i){return e+" "+t+"px "+i},ut.longestText=function(t,e,i,n){var a=(n=n||{}).data=n.data||{},o=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(a=n.data={},o=n.garbageCollect=[],n.font=e),t.font=e;var r=0;ut.each(i,(function(e){null!=e&&!0!==ut.isArray(e)?r=ut.measureText(t,a,o,r,e):ut.isArray(e)&&ut.each(e,(function(e){null==e||ut.isArray(e)||(r=ut.measureText(t,a,o,r,e))}))}));var s=o.length/2;if(s>i.length){for(var l=0;l<s;l++)delete a[o[l]];o.splice(0,s)}return r},ut.measureText=function(t,e,i,n,a){var o=e[a];return o||(o=e[a]=t.measureText(a).width,i.push(a)),o>n&&(n=o),n},ut.numberOfLabelLines=function(t){var e=1;return ut.each(t,(function(t){ut.isArray(t)&&t.length>e&&(e=t.length)})),e},ut.color=X?function(t){return t instanceof CanvasGradient&&(t=st.global.defaultColor),X(t)}:function(t){return console.error("Color.js not found!"),t},ut.getHoverColor=function(t){return t instanceof CanvasPattern||t instanceof CanvasGradient?t:ut.color(t).saturate(.5).darken(.1).rgbString()}}(),ai._adapters=si,ai.Animation=vt,ai.animationService=bt,ai.controllers=ue,ai.DatasetController=Mt,ai.defaults=st,ai.Element=pt,ai.elements=Wt,ai.Interaction=ve,ai.layouts=ke,ai.platform=Ve,ai.plugins=Ee,ai.Scale=fi,ai.scaleService=He,ai.Ticks=li,ai.Tooltip=Je,ai.helpers.each(tn,(function(t,e){ai.scaleService.registerScaleType(e,t,t._defaults)})),yn)yn.hasOwnProperty(_n)&&ai.plugins.register(yn[_n]);ai.platform.initialize();var Cn=ai;return"undefined"!=typeof window&&(window.Chart=ai),ai.Chart=ai,ai.Legend=yn.legend._element,ai.Title=yn.title._element,ai.pluginService=ai.plugins,ai.PluginBase=ai.Element.extend({}),ai.canvasHelpers=ai.helpers.canvas,ai.layoutService=ai.layouts,ai.LinearScaleBase=bi,ai.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],(function(t){ai[t]=function(e,i){return new ai(e,ai.helpers.merge(i||{},{type:t.charAt(0).toLowerCase()+t.slice(1)}))}})),Cn}));!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).peaks=t()}((function(){return function n(o,r,a){function s(e,t){if(!r[e]){if(!o[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(h)return h(e,!0);throw(i=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",i}i=r[e]={exports:{}},o[e][0].call(i.exports,(function(t){return s(o[e][1][t]||t)}),i,i.exports,n,o,r,a)}return r[e].exports}for(var h="function"==typeof require&&require,t=0;t<a.length;t++)s(a[t]);return s}({1:[function(t,e,i){"use strict";var n=Object.prototype.hasOwnProperty,u="~";function o(){}function r(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function a(t,e,i,n,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");o=new r(i,n||t,o),e=u?u+e:e;return t._events[e]?t._events[e].fn?t._events[e]=[t._events[e],o]:t._events[e].push(o):(t._events[e]=o,t._eventsCount++),t}function h(t,e){0==--t._eventsCount?t._events=new o:delete t._events[e]}function s(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(u=!1)),s.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)n.call(t,e)&&i.push(u?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},s.prototype.listeners=function(t){t=u?u+t:t;var e=this._events[t];if(!e)return[];if(e.fn)return[e.fn];for(var i=0,n=e.length,o=new Array(n);i<n;i++)o[i]=e[i].fn;return o},s.prototype.listenerCount=function(t){t=u?u+t:t;return(t=this._events[t])?t.fn?1:t.length:0},s.prototype.emit=function(t,e,i,n,o,r){var a=u?u+t:t;if(!this._events[a])return!1;var s,h=this._events[a],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,i),!0;case 4:return h.fn.call(h.context,e,i,n),!0;case 5:return h.fn.call(h.context,e,i,n,o),!0;case 6:return h.fn.call(h.context,e,i,n,o,r),!0}for(c=1,s=new Array(l-1);c<l;c++)s[c-1]=arguments[c];h.fn.apply(h.context,s)}else for(var d,p=h.length,c=0;c<p;c++)switch(h[c].once&&this.removeListener(t,h[c].fn,void 0,!0),l){case 1:h[c].fn.call(h[c].context);break;case 2:h[c].fn.call(h[c].context,e);break;case 3:h[c].fn.call(h[c].context,e,i);break;case 4:h[c].fn.call(h[c].context,e,i,n);break;default:if(!s)for(d=1,s=new Array(l-1);d<l;d++)s[d-1]=arguments[d];h[c].fn.apply(h[c].context,s)}return!0},s.prototype.on=function(t,e,i){return a(this,t,e,i,!1)},s.prototype.once=function(t,e,i){return a(this,t,e,i,!0)},s.prototype.removeListener=function(t,e,i,n){t=u?u+t:t;if(!this._events[t])return this;if(!e)return h(this,t),this;var o=this._events[t];if(o.fn)o.fn!==e||n&&!o.once||i&&o.context!==i||h(this,t);else{for(var r=0,a=[],s=o.length;r<s;r++)(o[r].fn!==e||n&&!o[r].once||i&&o[r].context!==i)&&a.push(o[r]);a.length?this._events[t]=1===a.length?a[0]:a:h(this,t)}return this},s.prototype.removeAllListeners=function(t){return t?(t=u?u+t:t,this._events[t]&&h(this,t)):(this._events=new o,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=u,s.EventEmitter=s,void 0!==e&&(e.exports=s)},{}],2:[function(t,e,i){(function(r){(function(){var o=!!(r===r.window&&r.URL&&r.Blob&&r.Worker);function t(t,e){var i,n=this;if(e=e||{},o)return i=t.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1],new r.Worker(r.URL.createObjectURL(new r.Blob([i],{type:"text/javascript"})));this.self=e,this.self.postMessage=function(t){setTimeout((function(){n.onmessage({data:t})}),0)},setTimeout(t.bind(e,e),0)}t.prototype.postMessage=function(t){var e=this;setTimeout((function(){e.self.onmessage({data:t})}),0)},e.exports=t}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Animation=void 0;var n=t("./Global"),d=n.glob.performance&&n.glob.performance.now?function(){return n.glob.performance.now()}:function(){return(new Date).getTime()};t=(o.prototype.setLayers=function(t){var e=t?0<t.length?t:[t]:[];return this.layers=e,this},o.prototype.getLayers=function(){return this.layers},o.prototype.addLayer=function(t){for(var e=this.layers,i=e.length,n=0;n<i;n++)if(e[n]._id===t._id)return!1;return this.layers.push(t),!0},o.prototype.isRunning=function(){for(var t=o.animations,e=t.length,i=0;i<e;i++)if(t[i].id===this.id)return!0;return!1},o.prototype.start=function(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=d(),o._addAnimation(this),this},o.prototype.stop=function(){return o._removeAnimation(this),this},o.prototype._updateFrameObject=function(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff},o._addAnimation=function(t){this.animations.push(t),this._handleAnimation()},o._removeAnimation=function(t){for(var e=t.id,i=this.animations,n=i.length,o=0;o<n;o++)if(i[o].id===e){this.animations.splice(o,1);break}},o._runFrames=function(){for(var t,e,i,n,o,r,a,s={},h=this.animations,l=0;l<h.length;l++)if(e=(t=h[l]).layers,i=t.func,t._updateFrameObject(d()),o=e.length,!i||!1!==i.call(t,t.frame))for(n=0;n<o;n++)void 0!==(r=e[n])._id&&(s[r._id]=r);for(a in s)s.hasOwnProperty(a)&&s[a].draw()},o._animationLoop=function(){var t=o;t.animations.length?(t._runFrames(),requestAnimationFrame(t._animationLoop)):t.animRunning=!1},o._handleAnimation=function(){this.animRunning||(this.animRunning=!0,requestAnimationFrame(this._animationLoop))},o.animations=[],o.animIdCounter=0,o.animRunning=!1,o);function o(t,e){this.id=o.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:d(),frameRate:0},this.func=t,this.setLayers(e)}i.Animation=t},{"./Global":10}],4:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.HitCanvas=i.SceneCanvas=i.Canvas=void 0;var r,a=t("./Util"),s=t("./Context"),h=t("./Global"),l=t("./Factory"),d=t("./Validators");p.prototype.getContext=function(){return this.context},p.prototype.getPixelRatio=function(){return this.pixelRatio},p.prototype.setPixelRatio=function(t){var e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)},p.prototype.setWidth=function(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";t=this.pixelRatio;this.getContext()._context.scale(t,t)},p.prototype.setHeight=function(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";t=this.pixelRatio;this.getContext()._context.scale(t,t)},p.prototype.getWidth=function(){return this.width},p.prototype.getHeight=function(){return this.height},p.prototype.setSize=function(t,e){this.setWidth(t||0),this.setHeight(e||0)},p.prototype.toDataURL=function(t,e){try{return this._canvas.toDataURL(t,e)}catch(t){try{return this._canvas.toDataURL()}catch(t){return a.Util.error("Unable to get data URL. "+t.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}},t=p;function p(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;t=(t||{}).pixelRatio||h.Konva.pixelRatio||function(){if(r)return r;var t=a.Util.createCanvasElement().getContext("2d");return r=(h.Konva._global.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}();this.pixelRatio=t,this._canvas=a.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}i.Canvas=t,l.Factory.addGetterSetter(t,"pixelRatio",void 0,d.getNumberValidator());var c;d=(o(u,c=t),u);function u(t){var e=c.call(this,t=void 0===t?{width:0,height:0}:t)||this;return e.context=new s.SceneContext(e),e.setSize(t.width,t.height),e}i.SceneCanvas=d;var f;t=(o(g,f=t),g);function g(t){var e=f.call(this,t=void 0===t?{width:0,height:0}:t)||this;return e.hitCanvas=!0,e.context=new s.HitContext(e),e.setSize(t.width,t.height),e}i.HitCanvas=t},{"./Context":6,"./Factory":8,"./Global":10,"./Util":18,"./Validators":19}],5:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.Container=void 0;var r,a=t("./Util"),s=t("./Factory"),h=t("./Node");t=t("./Validators"),o=(o(l,r=h.Node),l.prototype.getChildren=function(e){if(!e)return this.children;var i=new a.Collection;return this.children.each((function(t){e(t)&&i.push(t)})),i},l.prototype.hasChildren=function(){return 0<this.getChildren().length},l.prototype.removeChildren=function(){for(var t,e=0;e<this.children.length;e++)(t=this.children[e]).parent=null,t.index=0,t.remove();return this.children=new a.Collection,this},l.prototype.destroyChildren=function(){for(var t,e=0;e<this.children.length;e++)(t=this.children[e]).parent=null,t.index=0,t.destroy();return this.children=new a.Collection,this},l.prototype.add=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1<arguments.length){for(var i=0;i<arguments.length;i++)this.add(arguments[i]);return this}var n=t[0];if(n.getParent())return n.moveTo(this),this;var o=this.children;return this._validateAdd(n),n._clearCaches(),n.index=o.length,n.parent=this,o.push(n),this._fire("add",{child:n}),this},l.prototype.destroy=function(){return this.hasChildren()&&this.destroyChildren(),r.prototype.destroy.call(this),this},l.prototype.find=function(t){return this._generalFind(t,!1)},l.prototype.get=function(t){return a.Util.warn("collection.get() method is deprecated. Please use collection.find() instead."),this.find(t)},l.prototype.findOne=function(t){return 0<(t=this._generalFind(t,!0)).length?t[0]:void 0},l.prototype._generalFind=function(i,n){var o=[];return this._descendants((function(t){var e=t._isMatch(i);return e&&o.push(t),!(!e||!n)})),a.Collection.toCollection(o)},l.prototype._descendants=function(t){for(var e=0;e<this.children.length;e++){var i=this.children[e];if(t(i))return!0;if(i.hasChildren()&&i._descendants(t))return!0}return!1},l.prototype.toObject=function(){var t=h.Node.prototype.toObject.call(this);t.children=[];for(var e=this.getChildren(),i=e.length,n=0;n<i;n++){var o=e[n];t.children.push(o.toObject())}return t},l.prototype.isAncestorOf=function(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1},l.prototype.clone=function(t){var e=h.Node.prototype.clone.call(this,t);return this.getChildren().each((function(t){e.add(t.clone())})),e},l.prototype.getAllIntersections=function(e){var i=[];return this.find("Shape").each((function(t){t.isVisible()&&t.intersects(e)&&i.push(t)})),i},l.prototype._setChildrenIndices=function(){this.children.each((function(t,e){t.index=e}))},l.prototype.drawScene=function(t,e){var i=this.getLayer(),n=t||i&&i.getCanvas(),o=n&&n.getContext();i=(t=this._getCanvasCache())&&t.scene,t=n&&n.isCache;return(this.isVisible()||t)&&(i?(o.save(),i=this.getAbsoluteTransform(e).getMatrix(),o.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this._drawCachedSceneCanvas(o),o.restore()):this._drawChildren("drawScene",n,e)),this},l.prototype.drawHit=function(t,e){if(!this.shouldDrawHit(e))return this;var i=this.getLayer(),n=t||i&&i.hitCanvas;t=n&&n.getContext();return(i=this._getCanvasCache())&&i.hit?(t.save(),i=this.getAbsoluteTransform(e).getMatrix(),t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this._drawCachedHitCanvas(t),t.restore()):this._drawChildren("drawHit",n,e),this},l.prototype._drawChildren=function(e,i,n){var t,o,r,a=i&&i.getContext(),s=this.clipWidth(),h=this.clipHeight(),l=this.clipFunc(),d=s&&h||l,p=n===this;d&&(a.save(),o=(t=this.getAbsoluteTransform(n)).getMatrix(),a.transform(o[0],o[1],o[2],o[3],o[4],o[5]),a.beginPath(),l?l.call(this,a,this):(r=this.clipX(),l=this.clipY(),a.rect(r,l,s,h)),a.clip(),o=t.copy().invert().getMatrix(),a.transform(o[0],o[1],o[2],o[3],o[4],o[5]));(p=!p&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===e)&&(a.save(),a._applyGlobalCompositeOperation(this)),this.children.each((function(t){t[e](i,n)})),p&&a.restore(),d&&a.restore()},l.prototype.getClientRect=function(e){var i,n,o,r,s,t=(e=e||{}).skipTransform,a=e.relativeTo,h=this;this.children.each((function(t){t.visible()&&(0===(t=t.getClientRect({relativeTo:h,skipShadow:e.skipShadow,skipStroke:e.skipStroke})).width&&0===t.height||(r=void 0===i?(i=t.x,n=t.y,o=t.x+t.width,t.y+t.height):(i=Math.min(i,t.x),n=Math.min(n,t.y),o=Math.max(o,t.x+t.width),Math.max(r,t.y+t.height))))}));for(var l=this.find("Shape"),d=!1,p=0;p<l.length;p++)if(l[p]._isVisible(this)){d=!0;break}return s=d&&void 0!==i?{x:i,y:n,width:o-i,height:r-n}:{x:0,y:0,width:0,height:0},t?s:this._transformedRect(s,a)},l);function l(){var t=null!==r&&r.apply(this,arguments)||this;return t.children=new a.Collection,t}i.Container=o,s.Factory.addComponentsGetterSetter(o,"clip",["x","y","width","height"]),s.Factory.addGetterSetter(o,"clipX",void 0,t.getNumberValidator()),s.Factory.addGetterSetter(o,"clipY",void 0,t.getNumberValidator()),s.Factory.addGetterSetter(o,"clipWidth",void 0,t.getNumberValidator()),s.Factory.addGetterSetter(o,"clipHeight",void 0,t.getNumberValidator()),s.Factory.addGetterSetter(o,"clipFunc"),a.Collection.mapMethods(o)},{"./Factory":8,"./Node":13,"./Util":18,"./Validators":19}],6:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.HitContext=i.SceneContext=i.Context=void 0;var h=t("./Util"),a=t("./Global"),s=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],r=(l.prototype.fillShape=function(t){t.fillEnabled()&&this._fill(t)},l.prototype._fill=function(t){},l.prototype.strokeShape=function(t){t.hasStroke()&&this._stroke(t)},l.prototype._stroke=function(t){},l.prototype.fillStrokeShape=function(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))},l.prototype.getTrace=function(t){for(var e,i,n,o=this.traceArr,r=o.length,a="",s=0;s<r;s++)(i=(e=o[s]).method)?(n=e.args,a+=i,t?a+="()":h.Util._isArray(n[0])?a+="(["+n.join(",")+"])":a+="("+n.join(",")+")"):(a+=e.property,t||(a+="="+e.val)),a+=";";return a},l.prototype.clearTrace=function(){this.traceArr=[]},l.prototype._trace=function(t){var e=this.traceArr;e.push(t),100<=e.length&&e.shift()},l.prototype.reset=function(){var t=this.getCanvas().getPixelRatio();this.setTransform(+t,0,0,+t,0,0)},l.prototype.getCanvas=function(){return this.canvas},l.prototype.clear=function(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)},l.prototype._applyLineCap=function(t){(t=t.getLineCap())&&this.setAttr("lineCap",t)},l.prototype._applyOpacity=function(t){1!==(t=t.getAbsoluteOpacity())&&this.setAttr("globalAlpha",t)},l.prototype._applyLineJoin=function(t){(t=t.attrs.lineJoin)&&this.setAttr("lineJoin",t)},l.prototype.setAttr=function(t,e){this._context[t]=e},l.prototype.arc=function(t,e,i,n,o,r){this._context.arc(t,e,i,n,o,r)},l.prototype.arcTo=function(t,e,i,n,o){this._context.arcTo(t,e,i,n,o)},l.prototype.beginPath=function(){this._context.beginPath()},l.prototype.bezierCurveTo=function(t,e,i,n,o,r){this._context.bezierCurveTo(t,e,i,n,o,r)},l.prototype.clearRect=function(t,e,i,n){this._context.clearRect(t,e,i,n)},l.prototype.clip=function(){this._context.clip()},l.prototype.closePath=function(){this._context.closePath()},l.prototype.createImageData=function(t,e){var i=arguments;return 2===i.length?this._context.createImageData(t,e):1===i.length?this._context.createImageData(t):void 0},l.prototype.createLinearGradient=function(t,e,i,n){return this._context.createLinearGradient(t,e,i,n)},l.prototype.createPattern=function(t,e){return this._context.createPattern(t,e)},l.prototype.createRadialGradient=function(t,e,i,n,o,r){return this._context.createRadialGradient(t,e,i,n,o,r)},l.prototype.drawImage=function(t,e,i,n,o,r,a,s,h){var l=arguments,d=this._context;3===l.length?d.drawImage(t,e,i):5===l.length?d.drawImage(t,e,i,n,o):9===l.length&&d.drawImage(t,e,i,n,o,r,a,s,h)},l.prototype.ellipse=function(t,e,i,n,o,r,a,s){this._context.ellipse(t,e,i,n,o,r,a,s)},l.prototype.isPointInPath=function(t,e){return this._context.isPointInPath(t,e)},l.prototype.fill=function(){this._context.fill()},l.prototype.fillRect=function(t,e,i,n){this._context.fillRect(t,e,i,n)},l.prototype.strokeRect=function(t,e,i,n){this._context.strokeRect(t,e,i,n)},l.prototype.fillText=function(t,e,i){this._context.fillText(t,e,i)},l.prototype.measureText=function(t){return this._context.measureText(t)},l.prototype.getImageData=function(t,e,i,n){return this._context.getImageData(t,e,i,n)},l.prototype.lineTo=function(t,e){this._context.lineTo(t,e)},l.prototype.moveTo=function(t,e){this._context.moveTo(t,e)},l.prototype.rect=function(t,e,i,n){this._context.rect(t,e,i,n)},l.prototype.putImageData=function(t,e,i){this._context.putImageData(t,e,i)},l.prototype.quadraticCurveTo=function(t,e,i,n){this._context.quadraticCurveTo(t,e,i,n)},l.prototype.restore=function(){this._context.restore()},l.prototype.rotate=function(t){this._context.rotate(t)},l.prototype.save=function(){this._context.save()},l.prototype.scale=function(t,e){this._context.scale(t,e)},l.prototype.setLineDash=function(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)},l.prototype.getLineDash=function(){return this._context.getLineDash()},l.prototype.setTransform=function(t,e,i,n,o,r){this._context.setTransform(t,e,i,n,o,r)},l.prototype.stroke=function(){this._context.stroke()},l.prototype.strokeText=function(t,e,i,n){this._context.strokeText(t,e,i,n)},l.prototype.transform=function(t,e,i,n,o,r){this._context.transform(t,e,i,n,o,r)},l.prototype.translate=function(t,e){this._context.translate(t,e)},l.prototype._enableTrace=function(){for(var n,o=this,t=s.length,r=h.Util._simplifyArray,i=this.setAttr,e=0;e<t;e++)!function(t){var e,i=o[t];o[t]=function(){return n=r(Array.prototype.slice.call(arguments,0)),e=i.apply(o,arguments),o._trace({method:t,args:n}),e}}(s[e]);o.setAttr=function(){i.apply(o,arguments);var t=arguments[0],e=arguments[1];"shadowOffsetX"!==t&&"shadowOffsetY"!==t&&"shadowBlur"!==t||(e/=this.canvas.getPixelRatio()),o._trace({property:t,val:e})}},l.prototype._applyGlobalCompositeOperation=function(t){"source-over"!==(t=t.getGlobalCompositeOperation())&&this.setAttr("globalCompositeOperation",t)},l);function l(t){this.canvas=t,this._context=t._canvas.getContext("2d"),a.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}i.Context=r,["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach((function(e){Object.defineProperty(r.prototype,e,{get:function(){return this._context[e]},set:function(t){this._context[e]=t}})}));var d;t=(o(p,d=r),p.prototype._fillColor=function(t){var e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)},p.prototype._fillPattern=function(t){var e=t.getFillPatternX(),i=t.getFillPatternY(),n=a.Konva.getAngle(t.getFillPatternRotation()),o=t.getFillPatternOffsetX(),r=t.getFillPatternOffsetY();t.getFillPatternScaleX(),t.getFillPatternScaleY();(e||i)&&this.translate(e||0,i||0),n&&this.rotate(n),(o||r)&&this.translate(-1*o,-1*r),this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)},p.prototype._fillLinearGradient=function(t){var e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))},p.prototype._fillRadialGradient=function(t){var e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))},p.prototype._fill=function(t){var e,i,n,o=t.fill(),r=t.getFillPriority();o&&"color"===r?this._fillColor(t):(e=t.getFillPatternImage())&&"pattern"===r?this._fillPattern(t):(i=t.getFillLinearGradientColorStops())&&"linear-gradient"===r?this._fillLinearGradient(t):(n=t.getFillRadialGradientColorStops())&&"radial-gradient"===r?this._fillRadialGradient(t):o?this._fillColor(t):e?this._fillPattern(t):i?this._fillLinearGradient(t):n&&this._fillRadialGradient(t)},p.prototype._strokeLinearGradient=function(t){var e=t.getStrokeLinearGradientStartPoint(),i=t.getStrokeLinearGradientEndPoint(),n=t.getStrokeLinearGradientColorStops(),o=this.createLinearGradient(e.x,e.y,i.x,i.y);if(n){for(var r=0;r<n.length;r+=2)o.addColorStop(n[r],n[r+1]);this.setAttr("strokeStyle",o)}},p.prototype._stroke=function(t){var e,i=t.dash(),n=t.getStrokeScaleEnabled();t.hasStroke()&&(n||(this.save(),e=this.getCanvas().getPixelRatio(),this.setTransform(e,0,0,e,0,0)),this._applyLineCap(t),i&&t.dashEnabled()&&(this.setLineDash(i),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),n||this.restore())},p.prototype._applyShadow=function(t){var i=(e=h.Util).get(t.getShadowRGBA(),"black"),n=e.get(t.getShadowBlur(),5),o=e.get(t.getShadowOffset(),{x:0,y:0}),r=t.getAbsoluteScale(),e=this.canvas.getPixelRatio();t=r.x*e,e=r.y*e;this.setAttr("shadowColor",i),this.setAttr("shadowBlur",n*Math.min(Math.abs(t),Math.abs(e))),this.setAttr("shadowOffsetX",o.x*t),this.setAttr("shadowOffsetY",o.y*e)},p);function p(){return null!==d&&d.apply(this,arguments)||this}i.SceneContext=t;var c;o=(o(u,c=r),u.prototype._fill=function(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()},u.prototype.strokeShape=function(t){t.hasHitStroke()&&this._stroke(t)},u.prototype._stroke=function(t){var e,i;t.hasHitStroke()&&((e=t.getStrokeScaleEnabled())||(this.save(),i=this.getCanvas().getPixelRatio(),this.setTransform(i,0,0,i,0,0)),this._applyLineCap(t),i="auto"===(i=t.hitStrokeWidth())?t.strokeWidth():i,this.setAttr("lineWidth",i),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore())},u);function u(){return null!==c&&c.apply(this,arguments)||this}i.HitContext=o},{"./Global":10,"./Util":18}],7:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.DD=void 0;var r=t("./Global"),s=t("./Util");o.DD={get isDragging(){var e=!1;return o.DD._dragElements.forEach((function(t){"dragging"===t.dragStatus&&(e=!0)})),e},justDragged:!1,get node(){var e;return o.DD._dragElements.forEach((function(t){e=t.node})),e},_dragElements:new Map,_drag:function(r){var a=[];o.DD._dragElements.forEach((function(e,t){var i=e.node,n=i.getStage();n.setPointersPositions(r),void 0===e.pointerId&&(e.pointerId=s.Util._getFirstPointerId(r));var o=n._changedPointerPositions.find((function(t){return t.id===e.pointerId}));if(o){if("dragging"!==e.dragStatus){n=i.dragDistance();if(Math.max(Math.abs(o.x-e.startPointerPos.x),Math.abs(o.y-e.startPointerPos.y))<n)return;if(i.startDrag({evt:r}),!i.isDragging())return}i._setDragPosition(r,e),a.push(i)}})),a.forEach((function(t){t.fire("dragmove",{type:"dragmove",target:t,evt:r},!0)}))},_endDragBefore:function(n){o.DD._dragElements.forEach((function(e,t){var i=e.node.getStage();n&&i.setPointersPositions(n),i._changedPointerPositions.find((function(t){return t.id===e.pointerId}))&&("dragging"!==e.dragStatus&&"stopped"!==e.dragStatus||(o.DD.justDragged=!0,r.Konva.listenClickTap=!1,e.dragStatus="stopped"),(i=e.node.getLayer()||e.node instanceof r.Konva.Stage&&e.node)&&i.batchDraw())}))},_endDragAfter:function(i){o.DD._dragElements.forEach((function(t,e){"stopped"===t.dragStatus&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:i},!0),"dragging"!==t.dragStatus&&o.DD._dragElements.delete(e)}))}},r.Konva.isBrowser&&(window.addEventListener("mouseup",o.DD._endDragBefore,!0),window.addEventListener("touchend",o.DD._endDragBefore,!0),window.addEventListener("mousemove",o.DD._drag),window.addEventListener("touchmove",o.DD._drag),window.addEventListener("mouseup",o.DD._endDragAfter,!1),window.addEventListener("touchend",o.DD._endDragAfter,!1))},{"./Global":10,"./Util":18}],8:[function(t,e,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.Factory=void 0;var u=t("./Util"),f=t("./Validators"),g="get",_="set";c.Factory={addGetterSetter:function(t,e,i,n,o){c.Factory.addGetter(t,e,i),c.Factory.addSetter(t,e,n,o),c.Factory.addOverloadedGetterSetter(t,e)},addGetter:function(t,e,i){var n=g+u.Util._capitalize(e);t.prototype[n]=t.prototype[n]||function(){var t=this.attrs[e];return void 0===t?i:t}},addSetter:function(t,e,i,n){var o=_+u.Util._capitalize(e);t.prototype[o]||c.Factory.overWriteSetter(t,e,i,n)},overWriteSetter:function(t,e,i,n){var o=_+u.Util._capitalize(e);t.prototype[o]=function(t){return i&&null!=t&&(t=i.call(this,t,e)),this._setAttr(e,t),n&&n.call(this),this}},addComponentsGetterSetter:function(t,n,e,o,r){var i,a,s=e.length,h=u.Util._capitalize,l=g+h(n),d=_+h(n);t.prototype[l]=function(){var t={};for(i=0;i<s;i++)t[a=e[i]]=this.getAttr(n+h(a));return t};var p=f.getComponentValidator(e);t.prototype[d]=function(t){var e,i=this.attrs[n];for(e in o&&(t=o.call(this,t)),p&&p.call(this,t,n),t)t.hasOwnProperty(e)&&this._setAttr(n+h(e),t[e]);return this._fireChangeEvent(n,i,t),r&&r.call(this),this},c.Factory.addOverloadedGetterSetter(t,n)},addOverloadedGetterSetter:function(t,e){var i=u.Util._capitalize(e),n=_+i,o=g+i;t.prototype[e]=function(){return arguments.length?(this[n](arguments[0]),this):this[o]()}},addDeprecatedGetterSetter:function(t,e,i,n){u.Util.error("Adding deprecated "+e);var o=g+u.Util._capitalize(e),r=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[o]=function(){u.Util.error(r);var t=this.attrs[e];return void 0===t?i:t},c.Factory.addSetter(t,e,n,(function(){u.Util.error(r)})),c.Factory.addOverloadedGetterSetter(t,e)},backCompat:function(a,t){u.Util.each(t,(function(t,e){var i=a.prototype[e],n=g+u.Util._capitalize(t),o=_+u.Util._capitalize(t);function r(){i.apply(this,arguments),u.Util.error('"'+t+'" method is deprecated and will be removed soon. Use ""'+e+'" instead.')}a.prototype[t]=r,a.prototype[n]=r,a.prototype[o]=r}))},afterSetFilter:function(){this._filterUpToDate=!1}}},{"./Util":18,"./Validators":19}],9:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.FastLayer=void 0;var r,a=t("./Util"),s=t("./Layer");t=t("./Global"),o=(o(h,r=s.Layer),h);function h(t){return(t=r.call(this,t)||this).listening(!1),a.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.'),t}(i.FastLayer=o).prototype.nodeType="FastLayer",t._registerNode(o),a.Collection.mapMethods(o)},{"./Global":10,"./Layer":12,"./Util":18}],10:[function(t,e,i){(function(t){(function(){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i._registerNode=i._NODES_REGISTRY=i.Konva=i.glob=i._parseUA=void 0;var e=Math.PI/180;i._parseUA=function(t){var e=t.toLowerCase(),i=/(chrome)[ /]([\w.]+)/.exec(e)||/(webkit)[ /]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ /]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],n=!!t.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i);t=!!t.match(/IEMobile/i);return{browser:i[1]||"",version:i[2]||"0",isIE:function(t){var e=t.indexOf("msie ");if(0<e)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(0<t.indexOf("trident/")){var i=t.indexOf("rv:");return parseInt(t.substring(i+3,t.indexOf(".",i)),10)}return 0<(i=t.indexOf("edge/"))&&parseInt(t.substring(i+5,t.indexOf(".",i)),10)}(e),mobile:n,ieMobile:t}},i.glob=void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{},i.Konva={_global:i.glob,version:"7.2.5",isBrowser:"undefined"!=typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window)),isUnminified:/param/.test(function(t){}.toString()),dblClickWindow:400,getAngle:function(t){return i.Konva.angleDeg?t*e:t},enableTrace:!1,_pointerEventsEnabled:!1,hitOnDragEnabled:!1,captureTouchEventsEnabled:!1,listenClickTap:!1,inDblClickWindow:!1,pixelRatio:void 0,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:function(){return i.Konva.DD.isDragging},isDragReady:function(){return!!i.Konva.DD.node},UA:i._parseUA(i.glob.navigator&&i.glob.navigator.userAgent||""),document:i.glob.document,_injectGlobal:function(t){i.glob.Konva=t},_parseUA:i._parseUA},i._NODES_REGISTRY={};i._registerNode=function(t){i._NODES_REGISTRY[t.prototype.getClassName()]=t,i.Konva[t.prototype.getClassName()]=t}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.Group=void 0;var r,a=t("./Util"),s=t("./Container");t=t("./Global"),o=(o(h,r=s.Container),h.prototype._validateAdd=function(t){"Group"!==(t=t.getType())&&"Shape"!==t&&a.Util.throw("You may only add groups and shapes to groups.")},h);function h(){return null!==r&&r.apply(this,arguments)||this}(i.Group=o).prototype.nodeType="Group",t._registerNode(o),a.Collection.mapMethods(o)},{"./Container":5,"./Global":10,"./Util":18}],12:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.Layer=void 0;var r,a=t("./Util"),s=t("./Container"),h=t("./Node"),l=t("./Factory"),d=t("./Canvas"),p=t("./Validators"),c=t("./Shape"),u=(t=t("./Global"),[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}]),f=u.length;o=(o(g,r=s.Container),g.prototype.createPNGStream=function(){return this.canvas._canvas.createPNGStream()},g.prototype.getCanvas=function(){return this.canvas},g.prototype.getHitCanvas=function(){return this.hitCanvas},g.prototype.getContext=function(){return this.getCanvas().getContext()},g.prototype.clear=function(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this},g.prototype.setZIndex=function(t){r.prototype.setZIndex.call(this,t);var e=this.getStage();return e&&(e.content.removeChild(this.getCanvas()._canvas),t<e.children.length-1?e.content.insertBefore(this.getCanvas()._canvas,e.children[t+1].getCanvas()._canvas):e.content.appendChild(this.getCanvas()._canvas)),this},g.prototype.moveToTop=function(){h.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&(t.content.removeChild(this.getCanvas()._canvas),t.content.appendChild(this.getCanvas()._canvas)),!0},g.prototype.moveUp=function(){if(!h.Node.prototype.moveUp.call(this))return!1;var t=this.getStage();return!!t&&(t.content.removeChild(this.getCanvas()._canvas),this.index<t.children.length-1?t.content.insertBefore(this.getCanvas()._canvas,t.children[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getCanvas()._canvas),!0)},g.prototype.moveDown=function(){if(h.Node.prototype.moveDown.call(this)){var t,e=this.getStage();return e&&(t=e.children,e.content.removeChild(this.getCanvas()._canvas),e.content.insertBefore(this.getCanvas()._canvas,t[this.index+1].getCanvas()._canvas)),!0}return!1},g.prototype.moveToBottom=function(){if(h.Node.prototype.moveToBottom.call(this)){var t,e=this.getStage();return e&&(t=e.children,e.content.removeChild(this.getCanvas()._canvas),e.content.insertBefore(this.getCanvas()._canvas,t[1].getCanvas()._canvas)),!0}return!1},g.prototype.getLayer=function(){return this},g.prototype.remove=function(){var t=this.getCanvas()._canvas;return h.Node.prototype.remove.call(this),t&&t.parentNode&&a.Util._isInDocument(t)&&t.parentNode.removeChild(t),this},g.prototype.getStage=function(){return this.parent},g.prototype.setSize=function(t){var e=t.width;t=t.height;return this.canvas.setSize(e,t),this.hitCanvas.setSize(e,t),this._setSmoothEnabled(),this},g.prototype._validateAdd=function(t){"Group"!==(t=t.getType())&&"Shape"!==t&&a.Util.throw("You may only add groups and shapes to a layer.")},g.prototype._toKonvaCanvas=function(t){return(t=t||{}).width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=void 0!==t.x?t.x:this.x(),t.y=void 0!==t.y?t.y:this.y(),h.Node.prototype._toKonvaCanvas.call(this,t)},g.prototype._checkVisibility=function(){var t=this.visible();this.canvas._canvas.style.display=t?"block":"none"},g.prototype._setSmoothEnabled=function(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()},g.prototype.getWidth=function(){if(this.parent)return this.parent.width()},g.prototype.setWidth=function(){a.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')},g.prototype.getHeight=function(){if(this.parent)return this.parent.height()},g.prototype.setHeight=function(){a.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')},g.prototype.batchDraw=function(){var t=this;return this._waitingForDraw||(this._waitingForDraw=!0,a.Util.requestAnimFrame((function(){t.draw(),t._waitingForDraw=!1}))),this},g.prototype.getIntersection=function(t,e){if(!this.isListening()||!this.isVisible())return null;for(var i=1,n=!1;;){for(var o=0;o<f;o++){var r=u[o],a=this._getIntersection({x:t.x+r.x*i,y:t.y+r.y*i});if((r=a.shape)&&e)return r.findAncestor(e,!0);if(r)return r;if(n=!!a.antialiased,!a.antialiased)break}if(!n)return null;i+=1}},g.prototype._getIntersection=function(t){var e=this.hitCanvas.pixelRatio;if(255!==(e=(t=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data)[3]))return 0<e?{antialiased:!0}:{};t=a.Util._rgbToHex(t[0],t[1],t[2]);return(t=c.shapes["#"+t])?{shape:t}:{antialiased:!0}},g.prototype.drawScene=function(t,e){var i=this.getLayer();i=t||i&&i.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),s.Container.prototype.drawScene.call(this,i,e),this._fire("draw",{node:this}),this},g.prototype.drawHit=function(t,e){var i=this.getLayer();t=t||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),s.Container.prototype.drawHit.call(this,t,e),this},g.prototype.enableHitGraph=function(){return this.hitGraphEnabled(!0),this},g.prototype.disableHitGraph=function(){return this.hitGraphEnabled(!1),this},g.prototype.setHitGraphEnabled=function(t){a.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)},g.prototype.getHitGraphEnabled=function(t){return a.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()},g.prototype.toggleHitCanvas=function(){var t;this.parent&&(t=this.parent,this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas))},g);function g(t){return(t=r.call(this,t)||this).canvas=new d.SceneCanvas,t.hitCanvas=new d.HitCanvas({pixelRatio:1}),t._waitingForDraw=!1,t.on("visibleChange.konva",t._checkVisibility),t._checkVisibility(),t.on("imageSmoothingEnabledChange.konva",t._setSmoothEnabled),t._setSmoothEnabled(),t}(i.Layer=o).prototype.nodeType="Layer",t._registerNode(o),l.Factory.addGetterSetter(o,"imageSmoothingEnabled",!0),l.Factory.addGetterSetter(o,"clearBeforeDraw",!0),l.Factory.addGetterSetter(o,"hitGraphEnabled",!0,p.getBooleanValidator()),a.Collection.mapMethods(o)},{"./Canvas":4,"./Container":5,"./Factory":8,"./Global":10,"./Node":13,"./Shape":15,"./Util":18,"./Validators":19}],13:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Node=r._removeName=r._addName=r._removeId=r.names=r.ids=void 0;var p=t("./Util"),i=t("./Factory"),c=t("./Canvas"),d=t("./Global"),o=t("./DragAndDrop"),n=t("./Validators");r.ids={},r.names={};r._removeId=function(t,e){t&&r.ids[t]===e&&delete r.ids[t]};r._addName=function(t,e){e&&(r.names[e]||(r.names[e]=[]),r.names[e].push(t))};r._removeName=function(t,e){if(t){var i=r.names[t];if(i){for(var n=0;n<i.length;n++)i[n]._id===e&&i.splice(n,1);0===i.length&&delete r.names[t]}}};var u="absoluteOpacity",l="allEventListeners",a="absoluteTransform",f="absoluteScale",g="canvas",s="listening",h="mouseenter",_="mouseleave",y="transform",m="visible",v=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(" "),b=(["scaleXChange.konva","scaleYChange.konva"].join(" "),new p.Collection),w=1;t=(S.prototype.hasChildren=function(){return!1},S.prototype.getChildren=function(){return b},S.prototype._clearCache=function(t){t!==y&&t!==a||!this._cache.get(t)?t?this._cache.delete(t):this._cache.clear():this._cache.get(t).dirty=!0},S.prototype._getCache=function(t,e){var i=this._cache.get(t);return(void 0===i||(t===y||t===a)&&!0===i.dirty)&&(i=e.call(this),this._cache.set(t,i)),i},S.prototype._calculate=function(t,e,i){var n=this;return this._attachedDepsListeners.get(t)||(e=e.map((function(t){return t+"Change.konva"})).join(" "),this.on(e,(function(){n._clearCache(t)})),this._attachedDepsListeners.set(t,!0)),this._getCache(t,i)},S.prototype._getCanvasCache=function(){return this._cache.get(g)},S.prototype._clearSelfAndDescendantCache=function(e,t){this._clearCache(e),t&&e===a&&this.fire("_clearTransformCache"),this.isCached()||this.children&&this.children.each((function(t){t._clearSelfAndDescendantCache(e,!0)}))},S.prototype.clearCache=function(){return this._cache.delete(g),this._clearSelfAndDescendantCache(),this},S.prototype.cache=function(t){var e=t||{},i={};void 0!==e.x&&void 0!==e.y&&void 0!==e.width&&void 0!==e.height||(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var n=Math.ceil(e.width||i.width),o=Math.ceil(e.height||i.height),r=e.pixelRatio,a=(void 0===e.x?i:e).x,s=(void 0===e.y?i:e).y,h=e.offset||0,l=e.drawBorder||!1;if(n&&o){a-=h,s-=h;var d=new c.SceneCanvas({pixelRatio:r,width:n+=2*h,height:o+=2*h});t=new c.SceneCanvas({pixelRatio:r,width:0,height:0}),i=new c.HitCanvas({pixelRatio:1,width:n,height:o}),h=d.getContext(),r=i.getContext();return i.isCache=!0,d.isCache=!0,this._cache.delete("canvas"),(this._filterUpToDate=!1)===e.imageSmoothingEnabled&&(d.getContext()._context.imageSmoothingEnabled=!1,t.getContext()._context.imageSmoothingEnabled=!1),h.save(),r.save(),h.translate(-a,-s),r.translate(-a,-s),this._isUnderCache=!0,this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(f),this.drawScene(d,this),this.drawHit(i,this),this._isUnderCache=!1,h.restore(),r.restore(),l&&(h.save(),h.beginPath(),h.rect(0,0,n,o),h.closePath(),h.setAttr("strokeStyle","red"),h.setAttr("lineWidth",5),h.stroke(),h.restore()),this._cache.set(g,{scene:d,filter:t,hit:i,x:a,y:s}),this}p.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")},S.prototype.isCached=function(){return this._cache.has("canvas")},S.prototype.getClientRect=function(t){throw new Error('abstract "getClientRect" method call')},S.prototype._transformedRect=function(t,e){t=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}];var i,n,o,r,a=this.getAbsoluteTransform(e);return t.forEach((function(t){t=a.point(t);void 0===i&&(i=o=t.x,n=r=t.y),i=Math.min(i,t.x),n=Math.min(n,t.y),o=Math.max(o,t.x),r=Math.max(r,t.y)})),{x:i,y:n,width:o-i,height:r-n}},S.prototype._drawCachedSceneCanvas=function(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);var e=this._getCanvasCache();t.translate(e.x,e.y);var i=this._getCachedSceneCanvas();e=i.pixelRatio;t.drawImage(i._canvas,0,0,i.width/e,i.height/e),t.restore()},S.prototype._drawCachedHitCanvas=function(t){var e=this._getCanvasCache(),i=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(i._canvas,0,0),t.restore()},S.prototype._getCachedSceneCanvas=function(){var t,e,i,n,o=this.filters(),r=this._getCanvasCache(),a=r.scene,s=r.filter,h=s.getContext();if(o){if(!this._filterUpToDate){r=a.pixelRatio;s.setSize(a.width/a.pixelRatio,a.height/a.pixelRatio);try{for(t=o.length,h.clear(),h.drawImage(a._canvas,0,0,a.getWidth()/r,a.getHeight()/r),e=h.getImageData(0,0,s.getWidth(),s.getHeight()),i=0;i<t;i++)"function"==typeof(n=o[i])?(n.call(this,e),h.putImageData(e,0,0)):p.Util.error("Filter should be type of function, but got "+typeof n+" instead. Please check correct filters")}catch(t){p.Util.error("Unable to apply filter. "+t.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return s}return a},S.prototype.on=function(t,e){if(this._cache&&this._cache.delete(l),3===arguments.length)return this._delegate.apply(this,arguments);for(var i,n,o=t.split(" "),r=o.length,a=0;a<r;a++)i=(n=o[a].split("."))[0],n=n[1]||"",this.eventListeners[i]||(this.eventListeners[i]=[]),this.eventListeners[i].push({name:n,handler:e});return this},S.prototype.off=function(t,e){var i,n,o,r,a,s=(t||"").split(" "),h=s.length;if(this._cache&&this._cache.delete(l),!t)for(n in this.eventListeners)this._off(n);for(i=0;i<h;i++)if(r=(o=s[i].split("."))[0],a=o[1],r)this.eventListeners[r]&&this._off(r,a,e);else for(n in this.eventListeners)this._off(n,a,e);return this},S.prototype.dispatchEvent=function(t){var e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this},S.prototype.addEventListener=function(t,e){return this.on(t,(function(t){e.call(this,t.evt)})),this},S.prototype.removeEventListener=function(t){return this.off(t),this},S.prototype._delegate=function(t,n,o){var r=this;this.on(t,(function(t){for(var e=t.target.findAncestors(n,!0,r),i=0;i<e.length;i++)(t=p.Util.cloneObject(t)).currentTarget=e[i],o.call(e[i],t)}))},S.prototype.remove=function(){return this.isDragging()&&this.stopDrag(),o.DD._dragElements.delete(this._id),this._remove(),this},S.prototype._clearCaches=function(){this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(f),this._clearSelfAndDescendantCache("stage"),this._clearSelfAndDescendantCache(m),this._clearSelfAndDescendantCache(s)},S.prototype._remove=function(){this._clearCaches();var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)},S.prototype.destroy=function(){r._removeId(this.id(),this);for(var t=(this.name()||"").split(/\s/g),e=0;e<t.length;e++){var i=t[e];r._removeName(i,this._id)}return this.remove(),this},S.prototype.getAttr=function(t){var e="get"+p.Util._capitalize(t);return p.Util._isFunction(this[e])?this[e]():this.attrs[t]},S.prototype.getAncestors=function(){for(var t=this.getParent(),e=new p.Collection;t;)e.push(t),t=t.getParent();return e},S.prototype.getAttrs=function(){return this.attrs||{}},S.prototype.setAttrs=function(i){var n=this;return this._batchTransformChanges((function(){var t,e;if(!i)return n;for(t in i)"children"!==t&&(e="set"+p.Util._capitalize(t),p.Util._isFunction(n[e])?n[e](i[t]):n._setAttr(t,i[t]))})),this},S.prototype.isListening=function(){return this._getCache(s,this._isListening)},S.prototype._isListening=function(t){if(!this.listening())return!1;var e=this.getParent();return!e||e===t||this===t||e._isListening(t)},S.prototype.isVisible=function(){return this._getCache(m,this._isVisible)},S.prototype._isVisible=function(t){if(!this.visible())return!1;var e=this.getParent();return!e||e===t||this===t||e._isVisible(t)},S.prototype.shouldDrawHit=function(t,e){if(void 0===e&&(e=!1),t)return this._isVisible(t)&&this._isListening(t);var i=this.getLayer(),n=!1;o.DD._dragElements.forEach((function(t){"dragging"!==t.dragStatus||"Stage"!==t.node.nodeType&&t.node.getLayer()!==i||(n=!0)}));e=!e&&!d.Konva.hitOnDragEnabled&&n;return this.isListening()&&this.isVisible()&&!e},S.prototype.show=function(){return this.visible(!0),this},S.prototype.hide=function(){return this.visible(!1),this},S.prototype.getZIndex=function(){return this.index||0},S.prototype.getAbsoluteZIndex=function(){var i,n,o,r,a=this.getDepth(),s=this,h=0;return"Stage"!==s.nodeType&&function t(e){for(i=[],n=e.length,o=0;o<n;o++)r=e[o],h++,"Shape"!==r.nodeType&&(i=i.concat(r.getChildren().toArray())),r._id===s._id&&(o=n);0<i.length&&i[0].getDepth()<=a&&t(i)}(s.getStage().getChildren()),h},S.prototype.getDepth=function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t},S.prototype._batchTransformChanges=function(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(y),this._clearSelfAndDescendantCache(a,!0)),this._needClearTransformCache=!1},S.prototype.setPosition=function(t){var e=this;return this._batchTransformChanges((function(){e.x(t.x),e.y(t.y)})),this},S.prototype.getPosition=function(){return{x:this.x(),y:this.y()}},S.prototype.getAbsolutePosition=function(t){for(var e=!1,i=this.parent;i;){if(i.isCached()){e=!0;break}i=i.parent}var n=this.getAbsoluteTransform(t=!(!e||t)||t).getMatrix(),o=new p.Transform;t=this.offset();return o.m=n.slice(),o.translate(t.x,t.y),o.getTranslation()},S.prototype.setAbsolutePosition=function(t){var e=this._clearTransform();this.attrs.x=e.x,this.attrs.y=e.y,delete e.x,delete e.y,this._clearCache(y);var i=this._getAbsoluteTransform().copy();return i.invert(),i.translate(t.x,t.y),t={x:this.attrs.x+i.getTranslation().x,y:this.attrs.y+i.getTranslation().y},this._setTransform(e),this.setPosition({x:t.x,y:t.y}),this._clearCache(y),this._clearSelfAndDescendantCache(a),this},S.prototype._setTransform=function(t){for(var e in t)this.attrs[e]=t[e]},S.prototype._clearTransform=function(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t},S.prototype.move=function(t){var e=t.x,i=t.y,n=this.x();t=this.y();return void 0!==e&&(n+=e),void 0!==i&&(t+=i),this.setPosition({x:n,y:t}),this},S.prototype._eachAncestorReverse=function(t,e){var i,n,o=[],r=this.getParent();if(!e||e._id!==this._id){for(o.unshift(this);r&&(!e||r._id!==e._id);)o.unshift(r),r=r.parent;for(i=o.length,n=0;n<i;n++)t(o[n])}},S.prototype.rotate=function(t){return this.rotation(this.rotation()+t),this},S.prototype.moveToTop=function(){if(!this.parent)return p.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var t=this.index;return this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},S.prototype.moveUp=function(){if(!this.parent)return p.Util.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0)},S.prototype.moveDown=function(){if(!this.parent)return p.Util.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return 0<t&&(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0)},S.prototype.moveToBottom=function(){if(!this.parent)return p.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return 0<t&&(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)},S.prototype.setZIndex=function(t){if(!this.parent)return p.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&p.Util.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this},S.prototype.getAbsoluteOpacity=function(){return this._getCache(u,this._getAbsoluteOpacity)},S.prototype._getAbsoluteOpacity=function(){var t=this.opacity(),e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t},S.prototype.moveTo=function(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this},S.prototype.toObject=function(){var t,e,i,n={},o=this.getAttrs();for(t in n.attrs={},o)e=o[t],p.Util.isObject(e)&&!p.Util._isPlainObject(e)&&!p.Util._isArray(e)||(i="function"==typeof this[t]&&this[t],delete o[t],(i?i.call(this):null)!==(o[t]=e)&&(n.attrs[t]=e));return n.className=this.getClassName(),p.Util._prepareToStringify(n)},S.prototype.toJSON=function(){return JSON.stringify(this.toObject())},S.prototype.getParent=function(){return this.parent},S.prototype.findAncestors=function(t,e,i){var n=[];e&&this._isMatch(t)&&n.push(this);for(var o=this.parent;o;){if(o===i)return n;o._isMatch(t)&&n.push(o),o=o.parent}return n},S.prototype.isAncestorOf=function(t){return!1},S.prototype.findAncestor=function(t,e,i){return this.findAncestors(t,e,i)[0]},S.prototype._isMatch=function(t){if(!t)return!1;if("function"==typeof t)return t(this);for(var e,i=t.replace(/ /g,"").split(","),n=i.length,o=0;o<n;o++)if(e=i[o],p.Util.isValidSelector(e)||(p.Util.warn('Selector "'+e+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),p.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),p.Util.warn("Konva is awesome, right?")),"#"===e.charAt(0)){if(this.id()===e.slice(1))return!0}else if("."===e.charAt(0)){if(this.hasName(e.slice(1)))return!0}else if(this.className===e||this.nodeType===e)return!0;return!1},S.prototype.getLayer=function(){var t=this.getParent();return t?t.getLayer():null},S.prototype.getStage=function(){return this._getCache("stage",this._getStage)},S.prototype._getStage=function(){var t=this.getParent();if(t)return t.getStage()},S.prototype.fire=function(t,e,i){return(e=void 0===e?{}:e).target=e.target||this,i?this._fireAndBubble(t,e):this._fire(t,e),this},S.prototype.getAbsoluteTransform=function(t){return t?this._getAbsoluteTransform(t):this._getCache(a,this._getAbsoluteTransform)},S.prototype._getAbsoluteTransform=function(t){var i;if(t)return i=new p.Transform,this._eachAncestorReverse((function(t){var e=t.transformsEnabled();"all"===e?i.multiply(t.getTransform()):"position"===e&&i.translate(t.x()-t.offsetX(),t.y()-t.offsetY())}),t),i;i=this._cache.get(a)||new p.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(i):i.reset();var e,n,o=this.transformsEnabled();return"all"===o?i.multiply(this.getTransform()):"position"===o&&(e=this.attrs.x||0,n=this.attrs.y||0,t=this.attrs.offsetX||0,o=this.attrs.offsetY||0,i.translate(e-t,n-o)),i.dirty=!1,i},S.prototype.getAbsoluteScale=function(t){for(var e=this;e;)e._isUnderCache&&(t=e),e=e.getParent();var i=this.getAbsoluteTransform(t).decompose();return{x:i.scaleX,y:i.scaleY}},S.prototype.getAbsoluteRotation=function(){return this.getAbsoluteTransform().decompose().rotation},S.prototype.getTransform=function(){return this._getCache(y,this._getTransform)},S.prototype._getTransform=function(){var t=this._cache.get(y)||new p.Transform;t.reset();var e=this.x(),i=this.y(),n=d.Konva.getAngle(this.rotation()),o=null!==(h=this.attrs.scaleX)&&void 0!==h?h:1,r=null!==(l=this.attrs.scaleY)&&void 0!==l?l:1,a=this.attrs.skewX||0,s=this.attrs.skewY||0,h=this.attrs.offsetX||0,l=this.attrs.offsetY||0;return 0===e&&0===i||t.translate(e,i),0!==n&&t.rotate(n),0===a&&0===s||t.skew(a,s),1===o&&1===r||t.scale(o,r),0===h&&0===l||t.translate(-1*h,-1*l),t.dirty=!1,t},S.prototype.clone=function(t){var e,i,n,o,r,a=p.Util.cloneObject(this.attrs);for(e in t)a[e]=t[e];var s=new this.constructor(a);for(e in this.eventListeners)for(n=(i=this.eventListeners[e]).length,o=0;o<n;o++)(r=i[o]).name.indexOf("konva")<0&&(s.eventListeners[e]||(s.eventListeners[e]=[]),s.eventListeners[e].push(r));return s},S.prototype._toKonvaCanvas=function(t){t=t||{};var e=this.getClientRect(),i=this.getStage(),n=(void 0!==t.x?t:e).x,o=(void 0!==t.y?t:e).y,r=t.pixelRatio||1;return(r=(i=new c.SceneCanvas({width:t.width||e.width||(i?i.width():0),height:t.height||e.height||(i?i.height():0),pixelRatio:r})).getContext()).save(),(n||o)&&r.translate(-1*n,-1*o),this.drawScene(i),r.restore(),i},S.prototype.toCanvas=function(t){return this._toKonvaCanvas(t)._canvas},S.prototype.toDataURL=function(t){var e=(t=t||{}).mimeType||null,i=t.quality||null;i=this._toKonvaCanvas(t).toDataURL(e,i);return t.callback&&t.callback(i),i},S.prototype.toImage=function(t){if(!t||!t.callback)throw"callback required for toImage method config argument";var e=t.callback;delete t.callback,p.Util._urlToImage(this.toDataURL(t),(function(t){e(t)}))},S.prototype.setSize=function(t){return this.width(t.width),this.height(t.height),this},S.prototype.getSize=function(){return{width:this.width(),height:this.height()}},S.prototype.getClassName=function(){return this.className||this.nodeType},S.prototype.getType=function(){return this.nodeType},S.prototype.getDragDistance=function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():d.Konva.dragDistance},S.prototype._off=function(t,e,i){for(var n,o,r=this.eventListeners[t],a=0;a<r.length;a++)if(n=r[a].name,o=r[a].handler,!("konva"===n&&"konva"!==e||e&&n!==e||i&&i!==o)){if(r.splice(a,1),0===r.length){delete this.eventListeners[t];break}a--}},S.prototype._fireChangeEvent=function(t,e,i){this._fire(t+"Change",{oldVal:e,newVal:i})},S.prototype.setId=function(t){var i=this.id();return r._removeId(i,this),this,(i=t)&&(r.ids[i]=this),this._setAttr("id",t),this},S.prototype.setName=function(t){for(var e,i=(this.name()||"").split(/\s/g),n=(t||"").split(/\s/g),o=0;o<i.length;o++)e=i[o],-1===n.indexOf(e)&&e&&r._removeName(e,this._id);for(o=0;o<n.length;o++)e=n[o],-1===i.indexOf(e)&&e&&r._addName(this,e);return this._setAttr("name",t),this},S.prototype.addName=function(t){var e;return this.hasName(t)||(e=this.name(),this.setName(e?e+" "+t:t)),this},S.prototype.hasName=function(t){if(!t)return!1;var e=this.name();return!!e&&-1!==(e||"").split(/\s/g).indexOf(t)},S.prototype.removeName=function(t){var e=(this.name()||"").split(/\s/g);return-1!==(t=e.indexOf(t))&&(e.splice(t,1),this.setName(e.join(" "))),this},S.prototype.setAttr=function(t,e){var i=this["set"+p.Util._capitalize(t)];return p.Util._isFunction(i)?i.call(this,e):this._setAttr(t,e),this},S.prototype._setAttr=function(t,e,i){void 0===i&&(i=!1);(i=this.attrs[t])===e&&!p.Util.isObject(e)||(null==e?delete this.attrs[t]:this.attrs[t]=e,this._shouldFireChangeEvents&&this._fireChangeEvent(t,i,e))},S.prototype._setComponentAttr=function(t,e,i){var n;void 0!==i&&((n=this.attrs[t])||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=i,this._fireChangeEvent(t,n,i))},S.prototype._fireAndBubble=function(t,e,i){var n;e&&"Shape"===this.nodeType&&(e.target=this),(t===h||t===_)&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||"Stage"===this.nodeType&&!i)||(this._fire(t,e),n=(t===h||t===_)&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent),(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!n&&(i&&i.parent?this._fireAndBubble.call(this.parent,t,e,i):this._fireAndBubble.call(this.parent,t,e)))},S.prototype._getProtoListeners=function(t){if(!(e=this._cache.get(l))){for(var e={},i=Object.getPrototypeOf(this);i;)if(i.eventListeners){for(var n in i.eventListeners){var o=i.eventListeners[n],r=e[n]||[];e[n]=o.concat(r)}i=Object.getPrototypeOf(i)}else i=Object.getPrototypeOf(i);this._cache.set(l,e)}return e[t]},S.prototype._fire=function(t,e){(e=e||{}).currentTarget=this,e.type=t;var i=this._getProtoListeners(t);if(i)for(var n=0;n<i.length;n++)i[n].handler.call(this,e);var o=this.eventListeners[t];if(o)for(n=0;n<o.length;n++)o[n].handler.call(this,e)},S.prototype.draw=function(){return this.drawScene(),this.drawHit(),this},S.prototype._createDragElement=function(t){var e=t?t.pointerId:void 0,i=this.getStage();t=this.getAbsolutePosition(),i=i._getPointerById(e)||i._changedPointerPositions[0]||t;o.DD._dragElements.set(this._id,{node:this,startPointerPos:i,offset:{x:i.x-t.x,y:i.y-t.y},dragStatus:"ready",pointerId:e})},S.prototype.startDrag=function(t,e){void 0===e&&(e=!0),o.DD._dragElements.has(this._id)||this._createDragElement(t),o.DD._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},e)},S.prototype._setDragPosition=function(t,e){var i=this.getStage()._getPointerById(e.pointerId);i&&(i={x:i.x-e.offset.x,y:i.y-e.offset.y},void 0!==(e=this.dragBoundFunc())&&((t=e.call(this,i,t))?i=t:p.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")),this._lastPos&&this._lastPos.x===i.x&&this._lastPos.y===i.y||(this.setAbsolutePosition(i),this.getLayer()?this.getLayer().batchDraw():this.getStage()&&this.getStage().batchDraw()),this._lastPos=i)},S.prototype.stopDrag=function(t){var e=o.DD._dragElements.get(this._id);e&&(e.dragStatus="stopped"),o.DD._endDragBefore(t),o.DD._endDragAfter(t)},S.prototype.setDraggable=function(t){this._setAttr("draggable",t),this._dragChange()},S.prototype.isDragging=function(){var t=o.DD._dragElements.get(this._id);return!!t&&"dragging"===t.dragStatus},S.prototype._listenDrag=function(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",(function(t){var e,i=this;void 0!==t.evt.button&&!(0<=d.Konva.dragButtons.indexOf(t.evt.button))||this.isDragging()||(e=!1,o.DD._dragElements.forEach((function(t){i.isAncestorOf(t.node)&&(e=!0)})),e||this._createDragElement(t))}))},S.prototype._dragChange=function(){var t,e;this.attrs.draggable?this._listenDrag():(this._dragCleanup(),this.getStage()&&(t=(e=o.DD._dragElements.get(this._id))&&"dragging"===e.dragStatus,e=e&&"ready"===e.dragStatus,t?this.stopDrag():e&&o.DD._dragElements.delete(this._id)))},S.prototype._dragCleanup=function(){this.off("mousedown.konva"),this.off("touchstart.konva")},S.create=function(t,e){return p.Util._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)},S._createNode=function(t,e){var i,n,o=S.prototype.getClassName.call(t),r=t.children;e&&(t.attrs.container=e),d._NODES_REGISTRY[o]||(p.Util.warn('Can not find a node with class name "'+o+'". Fallback to "Shape".'),o="Shape");var a=new d._NODES_REGISTRY[o](t.attrs);if(r)for(i=r.length,n=0;n<i;n++)a.add(S._createNode(r[n]));return a},S);function S(t){this._id=w++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this.children=b,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}(r.Node=t).prototype.nodeType="Node",t.prototype._attrsAffectingSize=[],t.prototype.eventListeners={},t.prototype.on.call(t.prototype,v,(function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache(y),this._clearSelfAndDescendantCache(a))})),t.prototype.on.call(t.prototype,"visibleChange.konva",(function(){this._clearSelfAndDescendantCache(m)})),t.prototype.on.call(t.prototype,"listeningChange.konva",(function(){this._clearSelfAndDescendantCache(s)})),t.prototype.on.call(t.prototype,"opacityChange.konva",(function(){this._clearSelfAndDescendantCache(u)}));(v=i.Factory.addGetterSetter)(t,"zIndex"),v(t,"absolutePosition"),v(t,"position"),v(t,"x",0,n.getNumberValidator()),v(t,"y",0,n.getNumberValidator()),v(t,"globalCompositeOperation","source-over",n.getStringValidator()),v(t,"opacity",1,n.getNumberValidator()),v(t,"name","",n.getStringValidator()),v(t,"id","",n.getStringValidator()),v(t,"rotation",0,n.getNumberValidator()),i.Factory.addComponentsGetterSetter(t,"scale",["x","y"]),v(t,"scaleX",1,n.getNumberValidator()),v(t,"scaleY",1,n.getNumberValidator()),i.Factory.addComponentsGetterSetter(t,"skew",["x","y"]),v(t,"skewX",0,n.getNumberValidator()),v(t,"skewY",0,n.getNumberValidator()),i.Factory.addComponentsGetterSetter(t,"offset",["x","y"]),v(t,"offsetX",0,n.getNumberValidator()),v(t,"offsetY",0,n.getNumberValidator()),v(t,"dragDistance",null,n.getNumberValidator()),v(t,"width",0,n.getNumberValidator()),v(t,"height",0,n.getNumberValidator()),v(t,"listening",!0,n.getBooleanValidator()),v(t,"preventDefault",!0,n.getBooleanValidator()),v(t,"filters",null,(function(t){return this._filterUpToDate=!1,t})),v(t,"visible",!0,n.getBooleanValidator()),v(t,"transformsEnabled","all",n.getStringValidator()),v(t,"size"),v(t,"dragBoundFunc"),v(t,"draggable",!1,n.getBooleanValidator()),i.Factory.backCompat(t,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),p.Collection.mapMethods(t)},{"./Canvas":4,"./DragAndDrop":7,"./Factory":8,"./Global":10,"./Util":18,"./Validators":19}],14:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.releaseCapture=i.setPointerCapture=i.hasPointerCapture=i.createEvent=i.getCapturedShape=void 0;t=t("./Global");var o=new Map,r=void 0!==t.Konva._global.PointerEvent;function a(t){return{evt:t,pointerId:t.pointerId}}function n(t,e){var i,n=o.get(t);n&&((i=n.getStage())&&i.content,o.delete(t),r&&n._fire("lostpointercapture",a(new PointerEvent("lostpointercapture"))))}i.getCapturedShape=function(t){return o.get(t)},i.createEvent=a,i.hasPointerCapture=function(t,e){return o.get(t)===e},i.setPointerCapture=function(t,e){n(t),e.getStage()&&(o.set(t,e),r&&e._fire("gotpointercapture",a(new PointerEvent("gotpointercapture"))))},i.releaseCapture=n},{"./Global":10}],15:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.Shape=i.shapes=void 0;var r,d=t("./Util"),a=t("./Factory"),s=t("./Node"),h=t("./Validators"),l=t("./Global"),p=t("./PointerEvents"),c="hasShadow",u="shadowRGBA",f="patternImage",g="linearGradient",_="radialGradient";function y(){return r=r||d.Util.createCanvasElement().getContext("2d")}i.shapes={};var m;o=(o(v,m=s.Node),v.prototype.getContext=function(){return this.getLayer().getContext()},v.prototype.getCanvas=function(){return this.getLayer().getCanvas()},v.prototype.getSceneFunc=function(){return this.attrs.sceneFunc||this._sceneFunc},v.prototype.getHitFunc=function(){return this.attrs.hitFunc||this._hitFunc},v.prototype.hasShadow=function(){return this._getCache(c,this._hasShadow)},v.prototype._hasShadow=function(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())},v.prototype._getFillPattern=function(){return this._getCache(f,this.__getFillPattern)},v.prototype.__getFillPattern=function(){if(this.fillPatternImage()){var t=y().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");return t&&t.setTransform&&t.setTransform({a:this.fillPatternScaleX(),b:0,c:0,d:this.fillPatternScaleY(),e:0,f:0}),t}},v.prototype._getLinearGradient=function(){return this._getCache(g,this.__getLinearGradient)},v.prototype.__getLinearGradient=function(){var t=this.fillLinearGradientColorStops();if(t){for(var e=y(),i=this.fillLinearGradientStartPoint(),n=this.fillLinearGradientEndPoint(),o=e.createLinearGradient(i.x,i.y,n.x,n.y),r=0;r<t.length;r+=2)o.addColorStop(t[r],t[r+1]);return o}},v.prototype._getRadialGradient=function(){return this._getCache(_,this.__getRadialGradient)},v.prototype.__getRadialGradient=function(){var t=this.fillRadialGradientColorStops();if(t){for(var e=y(),i=this.fillRadialGradientStartPoint(),n=this.fillRadialGradientEndPoint(),o=e.createRadialGradient(i.x,i.y,this.fillRadialGradientStartRadius(),n.x,n.y,this.fillRadialGradientEndRadius()),r=0;r<t.length;r+=2)o.addColorStop(t[r],t[r+1]);return o}},v.prototype.getShadowRGBA=function(){return this._getCache(u,this._getShadowRGBA)},v.prototype._getShadowRGBA=function(){if(this.hasShadow()){var t=d.Util.colorToRGBA(this.shadowColor());return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}},v.prototype.hasFill=function(){var t=this;return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],(function(){return t.fillEnabled()&&!!(t.fill()||t.fillPatternImage()||t.fillLinearGradientColorStops()||t.fillRadialGradientColorStops())}))},v.prototype.hasStroke=function(){var t=this;return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],(function(){return t.strokeEnabled()&&t.strokeWidth()&&!(!t.stroke()&&!t.strokeLinearGradientColorStops())}))},v.prototype.hasHitStroke=function(){var t=this.hitStrokeWidth();return"auto"===t?this.hasStroke():this.strokeEnabled()&&!!t},v.prototype.intersects=function(t){var e=this.getStage().bufferHitCanvas;return e.getContext().clear(),this.drawHit(e,null,!0),0<e.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]},v.prototype.destroy=function(){return s.Node.prototype.destroy.call(this),delete i.shapes[this.colorKey],delete this.colorKey,this},v.prototype._useBufferCanvas=function(t){if(!this.getStage())return!1;if(null!==(n=this.attrs.perfectDrawEnabled)&&void 0!==n&&!n)return!1;var e=t||this.hasFill(),i=this.hasStroke(),n=1!==this.getAbsoluteOpacity();if(e&&i&&n)return!0;t=this.hasShadow(),n=this.shadowForStrokeEnabled();return!!(e&&i&&t&&n)},v.prototype.setStrokeHitEnabled=function(t){d.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)},v.prototype.getStrokeHitEnabled=function(){return 0!==this.hitStrokeWidth()},v.prototype.getSelfRect=function(){var t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}},v.prototype.getClientRect=function(t){var e=(t=void 0===t?{}:t).skipTransform,i=t.relativeTo,n=this.getSelfRect(),o=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,r=n.width+o,a=n.height+o,h=(s=!t.skipShadow&&this.hasShadow())?this.shadowOffsetX():0,l=s?this.shadowOffsetY():0,s=(t=r+Math.abs(h),(r=a+Math.abs(l))+2*(a=s&&this.shadowBlur()||0));r=0,n={width:t+2*a+(r=Math.round(o/2)!==o/2?1:r),height:s+r,x:-Math.round(o/2+a)+Math.min(h,0)+n.x,y:-Math.round(o/2+a)+Math.min(l,0)+n.y};return e?n:this._transformedRect(n,i)},v.prototype.drawScene=function(t,e){var i,n=this.getLayer(),r=(o=t||n.getCanvas()).getContext(),a=this._getCanvasCache(),s=this.getSceneFunc(),h=this.hasShadow(),o=(t=o.isCache,n=o.isCache,e===this);if(!this.isVisible()&&!t)return this;if(a){r.save();var l=this.getAbsoluteTransform(e).getMatrix();return r.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedSceneCanvas(r),r.restore(),this}return s&&(r.save(),this._useBufferCanvas()&&!n?((n=(l=this.getStage().bufferCanvas).getContext()).clear(),n.save(),n._applyLineJoin(this),i=this.getAbsoluteTransform(e).getMatrix(),n.transform(i[0],i[1],i[2],i[3],i[4],i[5]),s.call(this,n,this),n.restore(),n=l.pixelRatio,h&&r._applyShadow(this),r._applyOpacity(this),r._applyGlobalCompositeOperation(this),r.drawImage(l._canvas,0,0,l.width/n,l.height/n)):(r._applyLineJoin(this),o||(i=this.getAbsoluteTransform(e).getMatrix(),r.transform(i[0],i[1],i[2],i[3],i[4],i[5]),r._applyOpacity(this),r._applyGlobalCompositeOperation(this)),h&&r._applyShadow(this),s.call(this,r,this)),r.restore()),this},v.prototype.drawHit=function(t,e,i){if(!this.shouldDrawHit(e,i=void 0!==i&&i))return this;var n=this.getLayer();t=(i=t||n.hitCanvas)&&i.getContext(),n=this.hitFunc()||this.sceneFunc(),i=(i=this._getCanvasCache())&&i.hit;if(this.colorKey||(console.log(this),d.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. See the shape in logs above. If you want to reuse shape you should call remove() instead of destroy()")),i){t.save();i=this.getAbsoluteTransform(e).getMatrix();return t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this._drawCachedHitCanvas(t),t.restore(),this}return n&&(t.save(),t._applyLineJoin(this),this===e||(e=this.getAbsoluteTransform(e).getMatrix(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5])),n.call(this,t,this),t.restore()),this},v.prototype.drawHitFromCache=function(t){void 0===t&&(t=0);var e,i,n,o,r,a=this._getCanvasCache(),s=this._getCachedSceneCanvas(),l=(h=a.hit).getContext(),h=(a=h.getWidth(),h.getHeight());l.clear(),l.drawImage(s._canvas,0,0,a,h);try{for(n=(i=(e=l.getImageData(0,0,a,h)).data).length,o=d.Util._hexToRgb(this.colorKey),r=0;r<n;r+=4)t<i[r+3]?(i[r]=o.r,i[r+1]=o.g,i[r+2]=o.b,i[r+3]=255):i[r+3]=0;l.putImageData(e,0,0)}catch(t){d.Util.error("Unable to draw hit graph from cached scene canvas. "+t.message)}return this},v.prototype.hasPointerCapture=function(t){return p.hasPointerCapture(t,this)},v.prototype.setPointerCapture=function(t){p.setPointerCapture(t,this)},v.prototype.releaseCapture=function(t){p.releaseCapture(t,this)},v);function v(t){var e;for(t=m.call(this,t)||this;!(e=d.Util.getRandomColor())||e in i.shapes;);return t.colorKey=e,i.shapes[e]=t}(i.Shape=o).prototype._fillFunc=function(t){t.fill()},o.prototype._strokeFunc=function(t){t.stroke()},o.prototype._fillFuncHit=function(t){t.fill()},o.prototype._strokeFuncHit=function(t){t.stroke()},o.prototype._centroid=!1,o.prototype.nodeType="Shape",l._registerNode(o),o.prototype.eventListeners={},o.prototype.on.call(o.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",(function(){this._clearCache(c)})),o.prototype.on.call(o.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",(function(){this._clearCache(u)})),o.prototype.on.call(o.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva",(function(){this._clearCache(f)})),o.prototype.on.call(o.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",(function(){this._clearCache(g)})),o.prototype.on.call(o.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",(function(){this._clearCache(_)})),a.Factory.addGetterSetter(o,"stroke",void 0,h.getStringOrGradientValidator()),a.Factory.addGetterSetter(o,"strokeWidth",2,h.getNumberValidator()),a.Factory.addGetterSetter(o,"fillAfterStrokeEnabled",!1),a.Factory.addGetterSetter(o,"hitStrokeWidth","auto",h.getNumberOrAutoValidator()),a.Factory.addGetterSetter(o,"strokeHitEnabled",!0,h.getBooleanValidator()),a.Factory.addGetterSetter(o,"perfectDrawEnabled",!0,h.getBooleanValidator()),a.Factory.addGetterSetter(o,"shadowForStrokeEnabled",!0,h.getBooleanValidator()),a.Factory.addGetterSetter(o,"lineJoin"),a.Factory.addGetterSetter(o,"lineCap"),a.Factory.addGetterSetter(o,"sceneFunc"),a.Factory.addGetterSetter(o,"hitFunc"),a.Factory.addGetterSetter(o,"dash"),a.Factory.addGetterSetter(o,"dashOffset",0,h.getNumberValidator()),a.Factory.addGetterSetter(o,"shadowColor",void 0,h.getStringValidator()),a.Factory.addGetterSetter(o,"shadowBlur",0,h.getNumberValidator()),a.Factory.addGetterSetter(o,"shadowOpacity",1,h.getNumberValidator()),a.Factory.addComponentsGetterSetter(o,"shadowOffset",["x","y"]),a.Factory.addGetterSetter(o,"shadowOffsetX",0,h.getNumberValidator()),a.Factory.addGetterSetter(o,"shadowOffsetY",0,h.getNumberValidator()),a.Factory.addGetterSetter(o,"fillPatternImage"),a.Factory.addGetterSetter(o,"fill",void 0,h.getStringOrGradientValidator()),a.Factory.addGetterSetter(o,"fillPatternX",0,h.getNumberValidator()),a.Factory.addGetterSetter(o,"fillPatternY",0,h.getNumberValidator()),a.Factory.addGetterSetter(o,"fillLinearGradientColorStops"),a.Factory.addGetterSetter(o,"strokeLinearGradientColorStops"),a.Factory.addGetterSetter(o,"fillRadialGradientStartRadius",0),a.Factory.addGetterSetter(o,"fillRadialGradientEndRadius",0),a.Factory.addGetterSetter(o,"fillRadialGradientColorStops"),a.Factory.addGetterSetter(o,"fillPatternRepeat","repeat"),a.Factory.addGetterSetter(o,"fillEnabled",!0),a.Factory.addGetterSetter(o,"strokeEnabled",!0),a.Factory.addGetterSetter(o,"shadowEnabled",!0),a.Factory.addGetterSetter(o,"dashEnabled",!0),a.Factory.addGetterSetter(o,"strokeScaleEnabled",!0),a.Factory.addGetterSetter(o,"fillPriority","color"),a.Factory.addComponentsGetterSetter(o,"fillPatternOffset",["x","y"]),a.Factory.addGetterSetter(o,"fillPatternOffsetX",0,h.getNumberValidator()),a.Factory.addGetterSetter(o,"fillPatternOffsetY",0,h.getNumberValidator()),a.Factory.addComponentsGetterSetter(o,"fillPatternScale",["x","y"]),a.Factory.addGetterSetter(o,"fillPatternScaleX",1,h.getNumberValidator()),a.Factory.addGetterSetter(o,"fillPatternScaleY",1,h.getNumberValidator()),a.Factory.addComponentsGetterSetter(o,"fillLinearGradientStartPoint",["x","y"]),a.Factory.addComponentsGetterSetter(o,"strokeLinearGradientStartPoint",["x","y"]),a.Factory.addGetterSetter(o,"fillLinearGradientStartPointX",0),a.Factory.addGetterSetter(o,"strokeLinearGradientStartPointX",0),a.Factory.addGetterSetter(o,"fillLinearGradientStartPointY",0),a.Factory.addGetterSetter(o,"strokeLinearGradientStartPointY",0),a.Factory.addComponentsGetterSetter(o,"fillLinearGradientEndPoint",["x","y"]),a.Factory.addComponentsGetterSetter(o,"strokeLinearGradientEndPoint",["x","y"]),a.Factory.addGetterSetter(o,"fillLinearGradientEndPointX",0),a.Factory.addGetterSetter(o,"strokeLinearGradientEndPointX",0),a.Factory.addGetterSetter(o,"fillLinearGradientEndPointY",0),a.Factory.addGetterSetter(o,"strokeLinearGradientEndPointY",0),a.Factory.addComponentsGetterSetter(o,"fillRadialGradientStartPoint",["x","y"]),a.Factory.addGetterSetter(o,"fillRadialGradientStartPointX",0),a.Factory.addGetterSetter(o,"fillRadialGradientStartPointY",0),a.Factory.addComponentsGetterSetter(o,"fillRadialGradientEndPoint",["x","y"]),a.Factory.addGetterSetter(o,"fillRadialGradientEndPointX",0),a.Factory.addGetterSetter(o,"fillRadialGradientEndPointY",0),a.Factory.addGetterSetter(o,"fillPatternRotation",0),a.Factory.backCompat(o,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),d.Collection.mapMethods(o)},{"./Factory":8,"./Global":10,"./Node":13,"./PointerEvents":14,"./Util":18,"./Validators":19}],16:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.Stage=i.stages=void 0;var a=t("./Util"),r=t("./Factory"),s=t("./Container"),d=t("./Global"),h=t("./Canvas"),p=t("./DragAndDrop"),l=t("./Global"),c=t("./PointerEvents"),u="mouseout",f="mouseleave",g="mouseover",_="mouseenter",y="mousemove",m="mousedown",v="mouseup",b="pointermove",w="pointerdown",S="pointerup",x="contextmenu",T="dblclick",P="touchstart",k="touchend",C="touchmove",A="wheel",F=[_,m,y,v,f,P,C,k,g,A,x,w,b,S,"pointercancel","lostpointercapture"],L=F.length;function E(t){return((t=void 0===t?{}:t).clipFunc||t.clipWidth||t.clipHeight)&&a.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}i.stages=[];var O;o=(o(D,O=s.Container),D.prototype._validateAdd=function(t){var e="Layer"===t.getType();t="FastLayer"===t.getType();e||t||a.Util.throw("You may only add layers to the stage.")},D.prototype._checkVisibility=function(){var t;this.content&&(t=this.visible()?"":"none",this.content.style.display=t)},D.prototype.setContainer=function(t){var e,i;if("string"==typeof t&&!(t="."===t.charAt(0)?(e=t.slice(1),document.getElementsByClassName(e)[0]):(i="#"!==t.charAt(0)?t:t.slice(1),document.getElementById(i))))throw"Can not find container in document with id "+i;return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this},D.prototype.shouldDrawHit=function(){return!0},D.prototype.clear=function(){for(var t=this.children,e=t.length,i=0;i<e;i++)t[i].clear();return this},D.prototype.clone=function(t){return(t=t||{}).container=document.createElement("div"),s.Container.prototype.clone.call(this,t)},D.prototype.destroy=function(){O.prototype.destroy.call(this);var t=this.content;t&&a.Util._isInDocument(t)&&this.container().removeChild(t);return-1<(t=i.stages.indexOf(this))&&i.stages.splice(t,1),this},D.prototype.getPointerPosition=function(){var t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(a.Util.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)},D.prototype._getPointerById=function(e){return this._pointerPositions.find((function(t){return t.id===e}))},D.prototype.getPointersPositions=function(){return this._pointerPositions},D.prototype.getStage=function(){return this},D.prototype.getContent=function(){return this.content},D.prototype._toKonvaCanvas=function(e){(e=e||{}).x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();var t=new h.SceneCanvas({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),i=t.getContext()._context,n=this.children;return(e.x||e.y)&&i.translate(-1*e.x,-1*e.y),n.each((function(t){t.isVisible()&&(t=t._toKonvaCanvas(e),i.drawImage(t._canvas,e.x,e.y,t.getWidth()/t.getPixelRatio(),t.getHeight()/t.getPixelRatio()))})),t},D.prototype.getIntersection=function(t,e){if(!t)return null;for(var i,n=this.children,o=n.length-1;0<=o;o--)if(i=n[o].getIntersection(t,e))return i;return null},D.prototype._resizeDOM=function(){var e=this.width(),i=this.height();this.content&&(this.content.style.width=e+"px",this.content.style.height=i+"px"),this.bufferCanvas.setSize(e,i),this.bufferHitCanvas.setSize(e,i),this.children.each((function(t){t.setSize({width:e,height:i}),t.draw()}))},D.prototype.add=function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}O.prototype.add.call(this,t);var i=this.children.length;return 5<i&&a.Util.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),d.Konva.isBrowser&&this.content.appendChild(t.canvas._canvas),this},D.prototype.getParent=function(){return null},D.prototype.getLayer=function(){return null},D.prototype.hasPointerCapture=function(t){return c.hasPointerCapture(t,this)},D.prototype.setPointerCapture=function(t){c.setPointerCapture(t,this)},D.prototype.releaseCapture=function(t){c.releaseCapture(t,this)},D.prototype.getLayers=function(){return this.getChildren()},D.prototype._bindContentEvents=function(){if(d.Konva.isBrowser)for(var t=0;t<L;t++)!function(e,i){e.content.addEventListener(i,(function(t){e["_"+i](t)}),!1)}(this,F[t])},D.prototype._mouseenter=function(t){this.setPointersPositions(t),this._fire(_,{evt:t,target:this,currentTarget:this})},D.prototype._mouseover=function(t){this.setPointersPositions(t),this._fire("contentMouseover",{evt:t}),this._fire(g,{evt:t,target:this,currentTarget:this})},D.prototype._mouseleave=function(t){this.setPointersPositions(t);var e=null!==(i=this.targetShape)&&void 0!==i&&i.getStage()?this.targetShape:null,i=!p.DD.isDragging||d.Konva.hitOnDragEnabled;e&&i?(e._fireAndBubble(u,{evt:t}),e._fireAndBubble(f,{evt:t}),this._fire(f,{evt:t,target:this,currentTarget:this}),this.targetShape=null):i&&(this._fire(f,{evt:t,target:this,currentTarget:this}),this._fire(u,{evt:t,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[],this._fire("contentMouseout",{evt:t})},D.prototype._mousemove=function(t){if(d.Konva.UA.ieMobile)return this._touchmove(t);this.setPointersPositions(t);var e,i=a.Util._getFirstPointerId(t),n=null!==(e=this.targetShape)&&void 0!==e&&e.getStage()?this.targetShape:null,o=!p.DD.isDragging||d.Konva.hitOnDragEnabled;o&&((e=this.getIntersection(this.getPointerPosition()))&&e.isListening()?o&&n!==e?(n&&(n._fireAndBubble(u,{evt:t,pointerId:i},e),n._fireAndBubble(f,{evt:t,pointerId:i},e)),e._fireAndBubble(g,{evt:t,pointerId:i},n),e._fireAndBubble(_,{evt:t,pointerId:i},n),e._fireAndBubble(y,{evt:t,pointerId:i}),this.targetShape=e):e._fireAndBubble(y,{evt:t,pointerId:i}):(n&&o&&(n._fireAndBubble(u,{evt:t,pointerId:i}),n._fireAndBubble(f,{evt:t,pointerId:i}),this._fire(g,{evt:t,target:this,currentTarget:this,pointerId:i}),this.targetShape=null),this._fire(y,{evt:t,target:this,currentTarget:this,pointerId:i})),this._fire("contentMousemove",{evt:t})),t.cancelable&&t.preventDefault()},D.prototype._mousedown=function(t){if(d.Konva.UA.ieMobile)return this._touchstart(t);this.setPointersPositions(t);var e=a.Util._getFirstPointerId(t),i=this.getIntersection(this.getPointerPosition());p.DD.justDragged=!1,d.Konva.listenClickTap=!0,i&&i.isListening()?(this.clickStartShape=i)._fireAndBubble(m,{evt:t,pointerId:e}):this._fire(m,{evt:t,target:this,currentTarget:this,pointerId:e}),this._fire("contentMousedown",{evt:t})},D.prototype._mouseup=function(t){if(d.Konva.UA.ieMobile)return this._touchend(t);this.setPointersPositions(t);var e=a.Util._getFirstPointerId(t),i=this.getIntersection(this.getPointerPosition()),n=this.clickStartShape,o=this.clickEndShape,r=!1;d.Konva.inDblClickWindow?(r=!0,clearTimeout(this.dblTimeout)):p.DD.justDragged||(d.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout((function(){d.Konva.inDblClickWindow=!1}),d.Konva.dblClickWindow),i&&i.isListening()?((this.clickEndShape=i)._fireAndBubble(v,{evt:t,pointerId:e}),d.Konva.listenClickTap&&n&&n._id===i._id&&(i._fireAndBubble("click",{evt:t,pointerId:e}),r&&o&&o===i&&i._fireAndBubble(T,{evt:t,pointerId:e}))):(this.clickEndShape=null,this._fire(v,{evt:t,target:this,currentTarget:this,pointerId:e}),d.Konva.listenClickTap&&this._fire("click",{evt:t,target:this,currentTarget:this,pointerId:e}),r&&this._fire(T,{evt:t,target:this,currentTarget:this,pointerId:e})),this._fire("contentMouseup",{evt:t}),d.Konva.listenClickTap&&(this._fire("contentClick",{evt:t}),r&&this._fire("contentDblclick",{evt:t})),d.Konva.listenClickTap=!1,t.cancelable&&t.preventDefault()},D.prototype._contextmenu=function(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(x,{evt:t}):this._fire(x,{evt:t,target:this,currentTarget:this}),this._fire("contentContextmenu",{evt:t})},D.prototype._touchstart=function(i){var n=this;this.setPointersPositions(i);var o=!1;this._changedPointerPositions.forEach((function(t){var e=n.getIntersection(t);d.Konva.listenClickTap=!0,p.DD.justDragged=!1,e&&e.isListening()&&(d.Konva.captureTouchEventsEnabled&&e.setPointerCapture(t.id),(n.tapStartShape=e)._fireAndBubble(P,{evt:i,pointerId:t.id},n),o=!0,e.isListening()&&e.preventDefault()&&i.cancelable&&i.preventDefault())})),o||this._fire(P,{evt:i,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire("contentTouchstart",{evt:i})},D.prototype._touchmove=function(i){var n,o,r=this;this.setPointersPositions(i),p.DD.isDragging&&!d.Konva.hitOnDragEnabled||(n=!1,o={},this._changedPointerPositions.forEach((function(t){var e=c.getCapturedShape(t.id)||r.getIntersection(t);e&&e.isListening()&&(o[e._id]||(o[e._id]=!0,e._fireAndBubble(C,{evt:i,pointerId:t.id}),n=!0,e.isListening()&&e.preventDefault()&&i.cancelable&&i.preventDefault()))})),n||this._fire(C,{evt:i,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire("contentTouchmove",{evt:i})),p.DD.isDragging&&p.DD.node.preventDefault()&&i.cancelable&&i.preventDefault()},D.prototype._touchend=function(i){var n=this;this.setPointersPositions(i);var o=this.tapEndShape,r=!1;d.Konva.inDblClickWindow?(r=!0,clearTimeout(this.dblTimeout)):p.DD.justDragged||(d.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout((function(){d.Konva.inDblClickWindow=!1}),d.Konva.dblClickWindow);var a=!1,s={},h=!1,l=!1;this._changedPointerPositions.forEach((function(t){var e=c.getCapturedShape(t.id)||n.getIntersection(t);e&&e.releaseCapture(t.id),e&&e.isListening()&&(s[e._id]||(s[e._id]=!0,(n.tapEndShape=e)._fireAndBubble(k,{evt:i,pointerId:t.id}),a=!0,d.Konva.listenClickTap&&e===n.tapStartShape&&(h=!0,e._fireAndBubble("tap",{evt:i,pointerId:t.id}),r&&o&&o===e&&(l=!0,e._fireAndBubble("dbltap",{evt:i,pointerId:t.id}))),e.isListening()&&e.preventDefault()&&i.cancelable&&i.preventDefault()))})),a||this._fire(k,{evt:i,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),d.Konva.listenClickTap&&!h&&(this.tapEndShape=null,this._fire("tap",{evt:i,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})),r&&!l&&this._fire("dbltap",{evt:i,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire("contentTouchend",{evt:i}),d.Konva.listenClickTap&&(this._fire("contentTap",{evt:i}),r&&this._fire("contentDbltap",{evt:i})),this.preventDefault()&&i.cancelable&&i.preventDefault(),d.Konva.listenClickTap=!1},D.prototype._wheel=function(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(A,{evt:t}):this._fire(A,{evt:t,target:this,currentTarget:this}),this._fire("contentWheel",{evt:t})},D.prototype._pointerdown=function(t){var e;d.Konva._pointerEventsEnabled&&(this.setPointersPositions(t),(e=c.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition()))&&e._fireAndBubble(w,c.createEvent(t)))},D.prototype._pointermove=function(t){var e;d.Konva._pointerEventsEnabled&&(this.setPointersPositions(t),(e=c.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition()))&&e._fireAndBubble(b,c.createEvent(t)))},D.prototype._pointerup=function(t){var e;d.Konva._pointerEventsEnabled&&(this.setPointersPositions(t),(e=c.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition()))&&e._fireAndBubble(S,c.createEvent(t)),c.releaseCapture(t.pointerId))},D.prototype._pointercancel=function(t){var e;d.Konva._pointerEventsEnabled&&(this.setPointersPositions(t),(e=c.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition()))&&e._fireAndBubble(S,c.createEvent(t)),c.releaseCapture(t.pointerId))},D.prototype._lostpointercapture=function(t){c.releaseCapture(t.pointerId)},D.prototype.setPointersPositions=function(t){var e,i,n=this,o=this._getContentPosition();void 0!==(t=t||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],a.Collection.prototype.each.call(t.touches,(function(t){n._pointerPositions.push({id:t.identifier,x:(t.clientX-o.left)/o.scaleX,y:(t.clientY-o.top)/o.scaleY})})),a.Collection.prototype.each.call(t.changedTouches||t.touches,(function(t){n._changedPointerPositions.push({id:t.identifier,x:(t.clientX-o.left)/o.scaleX,y:(t.clientY-o.top)/o.scaleY})}))):(e=(t.clientX-o.left)/o.scaleX,i=(t.clientY-o.top)/o.scaleY,this.pointerPos={x:e,y:i},this._pointerPositions=[{x:e,y:i,id:a.Util._getFirstPointerId(t)}],this._changedPointerPositions=[{x:e,y:i,id:a.Util._getFirstPointerId(t)}])},D.prototype._setPointerPosition=function(t){a.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)},D.prototype._getContentPosition=function(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}},D.prototype._buildDOM=function(){if(this.bufferCanvas=new h.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new h.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),d.Konva.isBrowser){var t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}},D.prototype.cache=function(){return a.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this},D.prototype.clearCache=function(){return this},D.prototype.batchDraw=function(){return this.children.each((function(t){t.batchDraw()})),this},D);function D(t){var e=O.call(this,E(t))||this;return e._pointerPositions=[],e._changedPointerPositions=[],e._buildDOM(),e._bindContentEvents(),i.stages.push(e),e.on("widthChange.konva heightChange.konva",e._resizeDOM),e.on("visibleChange.konva",e._checkVisibility),e.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",(function(){E(e.attrs)})),e._checkVisibility(),e}(i.Stage=o).prototype.nodeType="Stage",l._registerNode(o),r.Factory.addGetterSetter(o,"container")},{"./Canvas":4,"./Container":5,"./DragAndDrop":7,"./Factory":8,"./Global":10,"./PointerEvents":14,"./Util":18}],17:[function(t,e,h){"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.Easings=h.Tween=void 0;var u=t("./Util"),l=t("./Animation"),i=t("./Node"),d=t("./Global"),p={node:1,duration:1,easing:1,onFinish:1,yoyo:1},c=0,f=["fill","stroke","shadowColor"],g=(n.prototype.fire=function(t){(t=this[t])&&t()},n.prototype.setTime=function(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())},n.prototype.getTime=function(){return this._time},n.prototype.setPosition=function(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t},n.prototype.getPosition=function(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)},n.prototype.play=function(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},n.prototype.reverse=function(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},n.prototype.seek=function(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")},n.prototype.reset=function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},n.prototype.finish=function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},n.prototype.update=function(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")},n.prototype.onEnterFrame=function(){var t=this.getTimer()-this._startTime;2===this.state?this.setTime(t):3===this.state&&this.setTime(this.duration-t)},n.prototype.pause=function(){this.state=1,this.fire("onPause")},n.prototype.getTimer=function(){return(new Date).getTime()},n);function n(t,e,i,n,o,r,a){this.prop=t,this.propFunc=e,this.begin=n,this._pos=n,this.duration=r,this._change=0,this.prevPos=0,this.yoyo=a,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=o-this.begin,this.pause()}var o=(_.prototype._addAttr=function(t,e){var i,n,o,r,a,s,h,l,d=this.node,p=d._id,c=_.tweens[p][t];if(c&&delete _.attrs[p][c][t],i=d.getAttr(t),u.Util._isArray(e))if(n=[],r=Math.max(e.length,i.length),"points"===t&&e.length!==i.length&&(e.length>i.length?(s=i,i=u.Util._prepareArrayForTween(i,e,d.closed())):(a=e,e=u.Util._prepareArrayForTween(e,i,d.closed()))),0===t.indexOf("fill"))for(o=0;o<r;o++)o%2==0?n.push(e[o]-i[o]):(h=u.Util.colorToRGBA(i[o]),l=u.Util.colorToRGBA(e[o]),i[o]=h,n.push({r:l.r-h.r,g:l.g-h.g,b:l.b-h.b,a:l.a-h.a}));else for(o=0;o<r;o++)n.push(e[o]-i[o]);else n=-1!==f.indexOf(t)?(i=u.Util.colorToRGBA(i),{r:(l=u.Util.colorToRGBA(e)).r-i.r,g:l.g-i.g,b:l.b-i.b,a:l.a-i.a}):e-i;_.attrs[p][this._id][t]={start:i,diff:n,end:e,trueEnd:a,trueStart:s},_.tweens[p][t]=this._id},_.prototype._tweenFunc=function(t){var e,i,n,o,r,a,s,h=this.node,l=_.attrs[h._id][this._id];for(e in l){if(i=(s=l[e]).start,n=s.diff,s=s.end,u.Util._isArray(i))if(o=[],a=Math.max(i.length,s.length),0===e.indexOf("fill"))for(r=0;r<a;r++)r%2==0?o.push((i[r]||0)+n[r]*t):o.push("rgba("+Math.round(i[r].r+n[r].r*t)+","+Math.round(i[r].g+n[r].g*t)+","+Math.round(i[r].b+n[r].b*t)+","+(i[r].a+n[r].a*t)+")");else for(r=0;r<a;r++)o.push((i[r]||0)+n[r]*t);else o=-1!==f.indexOf(e)?"rgba("+Math.round(i.r+n.r*t)+","+Math.round(i.g+n.g*t)+","+Math.round(i.b+n.b*t)+","+(i.a+n.a*t)+")":i+n*t;h.setAttr(e,o)}},_.prototype._addListeners=function(){var i=this;this.tween.onPlay=function(){i.anim.start()},this.tween.onReverse=function(){i.anim.start()},this.tween.onPause=function(){i.anim.stop()},this.tween.onFinish=function(){var t=i.node,e=_.attrs[t._id][i._id];e.points&&e.points.trueEnd&&t.setAttr("points",e.points.trueEnd),i.onFinish&&i.onFinish.call(i)},this.tween.onReset=function(){var t=i.node,e=_.attrs[t._id][i._id];e.points&&e.points.trueStart&&t.points(e.points.trueStart),i.onReset&&i.onReset()},this.tween.onUpdate=function(){i.onUpdate&&i.onUpdate.call(i)}},_.prototype.play=function(){return this.tween.play(),this},_.prototype.reverse=function(){return this.tween.reverse(),this},_.prototype.reset=function(){return this.tween.reset(),this},_.prototype.seek=function(t){return this.tween.seek(1e3*t),this},_.prototype.pause=function(){return this.tween.pause(),this},_.prototype.finish=function(){return this.tween.finish(),this},_.prototype.destroy=function(){var t,e=this.node._id,i=this._id,n=_.tweens[e];for(t in this.pause(),n)delete _.tweens[e][t];delete _.attrs[e][i]},_.attrs={},_.tweens={},_);function _(t){var e,i=this,n=t.node,o=n._id,r=t.easing||h.Easings.Linear,a=!!t.yoyo,s=void 0===t.duration?.3:0===t.duration?.001:t.duration;this.node=n,this._id=c++;n=n.getLayer()||(n instanceof d.Konva.Stage?n.getLayers():null);for(e in n||u.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new l.Animation((function(){i.tween.onEnterFrame()}),n),this.tween=new g(e,(function(t){i._tweenFunc(t)}),r,0,1,1e3*s,a),this._addListeners(),_.attrs[o]||(_.attrs[o]={}),_.attrs[o][this._id]||(_.attrs[o][this._id]={}),_.tweens[o]||(_.tweens[o]={}),t)void 0===p[e]&&this._addAttr(e,t[e]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}h.Tween=o,i.Node.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()},new o(t).play()},h.Easings={BackEaseIn:function(t,e,i,n){return i*(t/=n)*t*(2.70158*t-1.70158)+e},BackEaseOut:function(t,e,i,n){return i*((t=t/n-1)*t*(2.70158*t+1.70158)+1)+e},BackEaseInOut:function(t,e,i,n){var o=1.70158;return(t/=n/2)<1?i/2*(t*t*((1+(o*=1.525))*t-o))+e:i/2*((t-=2)*t*((1+(o*=1.525))*t+o)+2)+e},ElasticEaseIn:function(t,e,i,n,o,r){var a=0;return 0===t?e:1==(t/=n)?e+i:(r=r||.3*n,a=!o||o<Math.abs(i)?(o=i,r/4):r/(2*Math.PI)*Math.asin(i/o),-o*Math.pow(2,10*--t)*Math.sin((t*n-a)*(2*Math.PI)/r)+e)},ElasticEaseOut:function(t,e,i,n,o,r){var a=0;return 0===t?e:1==(t/=n)?e+i:(r=r||.3*n,a=!o||o<Math.abs(i)?(o=i,r/4):r/(2*Math.PI)*Math.asin(i/o),o*Math.pow(2,-10*t)*Math.sin((t*n-a)*(2*Math.PI)/r)+i+e)},ElasticEaseInOut:function(t,e,i,n,o,r){var a=0;return 0===t?e:2==(t/=n/2)?e+i:(r=r||n*(.3*1.5),a=!o||o<Math.abs(i)?(o=i,r/4):r/(2*Math.PI)*Math.asin(i/o),t<1?o*Math.pow(2,10*--t)*Math.sin((t*n-a)*(2*Math.PI)/r)*-.5+e:o*Math.pow(2,-10*--t)*Math.sin((t*n-a)*(2*Math.PI)/r)*.5+i+e)},BounceEaseOut:function(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn:function(t,e,i,n){return i-h.Easings.BounceEaseOut(n-t,0,i,n)+e},BounceEaseInOut:function(t,e,i,n){return t<n/2?.5*h.Easings.BounceEaseIn(2*t,0,i,n)+e:.5*h.Easings.BounceEaseOut(2*t-n,0,i,n)+.5*i+e},EaseIn:function(t,e,i,n){return i*(t/=n)*t+e},EaseOut:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},EaseInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},StrongEaseIn:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},StrongEaseOut:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},StrongEaseInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},Linear:function(t,e,i,n){return i*t/n+e}}},{"./Animation":3,"./Global":10,"./Node":13,"./Util":18}],18:[function(t,e,h){"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.Util=h.Transform=h.Collection=void 0;var n=t("./Global");t=(o.toCollection=function(t){for(var e=new o,i=t.length,n=0;n<i;n++)e.push(t[n]);return e},o._mapMethod=function(n){o.prototype[n]=function(){for(var t=this.length,e=[].slice.call(arguments),i=0;i<t;i++)this[i][n].apply(this[i],e);return this}},o.mapMethods=function(t){for(var e in t.prototype)o._mapMethod(e)},o);function o(){}(h.Collection=t).prototype=[],t.prototype.each=function(t){for(var e=0;e<this.length;e++)t(this[e],e)},t.prototype.toArray=function(){for(var t=[],e=this.length,i=0;i<e;i++)t.push(this[i]);return t};i.prototype.reset=function(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0},i.prototype.copy=function(){return new i(this.m)},i.prototype.copyInto=function(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]},i.prototype.point=function(t){var e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}},i.prototype.translate=function(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this},i.prototype.scale=function(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this},i.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.m[0]*e+this.m[2]*i,o=this.m[1]*e+this.m[3]*i;t=this.m[0]*-i+this.m[2]*e,e=this.m[1]*-i+this.m[3]*e;return this.m[0]=n,this.m[1]=o,this.m[2]=t,this.m[3]=e,this},i.prototype.getTranslation=function(){return{x:this.m[4],y:this.m[5]}},i.prototype.skew=function(t,e){var i=this.m[0]+this.m[2]*e,n=this.m[1]+this.m[3]*e;e=this.m[2]+this.m[0]*t,t=this.m[3]+this.m[1]*t;return this.m[0]=i,this.m[1]=n,this.m[2]=e,this.m[3]=t,this},i.prototype.multiply=function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],i=this.m[1]*t.m[0]+this.m[3]*t.m[1],n=this.m[0]*t.m[2]+this.m[2]*t.m[3],o=this.m[1]*t.m[2]+this.m[3]*t.m[3],r=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4];t=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=i,this.m[2]=n,this.m[3]=o,this.m[4]=r,this.m[5]=t,this},i.prototype.invert=function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,i=-this.m[1]*t,n=-this.m[2]*t,o=this.m[0]*t,r=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]);t*=this.m[1]*this.m[4]-this.m[0]*this.m[5];return this.m[0]=e,this.m[1]=i,this.m[2]=n,this.m[3]=o,this.m[4]=r,this.m[5]=t,this},i.prototype.getMatrix=function(){return this.m},i.prototype.setAbsolutePosition=function(t,e){var i=this.m[0],n=this.m[1],o=this.m[2],r=this.m[3],a=this.m[4];n=(i*(e-this.m[5])-n*(t-a))/(i*r-n*o);return this.translate((t-a-o*n)/i,n)},i.prototype.decompose=function(){var t,e=this.m[0],i=this.m[1],n=this.m[2],o=this.m[3],r=e*o-i*n,a={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};return 0!=e||0!=i?(t=Math.sqrt(e*e+i*i),a.rotation=0<i?Math.acos(e/t):-Math.acos(e/t),a.scaleX=t,a.scaleY=r/t,a.skewX=(e*n+i*o)/r,a.skewY=0):0==n&&0==o||(t=Math.sqrt(n*n+o*o),a.rotation=Math.PI/2-(0<o?Math.acos(-n/t):-Math.acos(n/t)),a.scaleX=r/t,a.scaleY=t,a.skewX=0,a.skewY=(e*n+i*o)/r),a.rotation=h.Util._getRotation(a.rotation),a},t=i;function i(t){void 0===t&&(t=[1,0,0,1,0,0]),this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}h.Transform=t;var r=Math.PI/180,a=180/Math.PI,s="Konva error: ",l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},d=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,p=[];h.Util={_isElement:function(t){return!(!t||1!=t.nodeType)},_isFunction:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isPlainObject:function(t){return!!t&&t.constructor===Object},_isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},_isNumber:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&!isNaN(t)&&isFinite(t)},_isString:function(t){return"[object String]"===Object.prototype.toString.call(t)},_isBoolean:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},isObject:function(t){return t instanceof Object},isValidSelector:function(t){return"string"==typeof t&&("#"===(t=t[0])||"."===t||t===t.toUpperCase())},_sign:function(t){return 0===t||0<t?1:-1},requestAnimFrame:function(t){p.push(t),1===p.length&&requestAnimationFrame((function(){var t=p;p=[],t.forEach((function(t){t()}))}))},createCanvasElement:function(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch(t){}return t},createImageElement:function(){return document.createElement("img")},_isInDocument:function(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_simplifyArray:function(t){for(var e,i=[],n=t.length,o=h.Util,r=0;r<n;r++)e=t[r],o._isNumber(e)?e=Math.round(1e3*e)/1e3:o._isString(e)||(e=e.toString()),i.push(e);return i},_urlToImage:function(t,e){var i=new n.glob.Image;i.onload=function(){e(i)},i.src=t},_rgbToHex:function(t,e,i){return((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)},_hexToRgb:function(t){t=t.replace("#","");return{r:(t=parseInt(t,16))>>16&255,g:t>>8&255,b:255&t}},getRandomColor:function(){for(var t=(16777215*Math.random()<<0).toString(16);t.length<6;)t="0"+t;return"#"+t},get:function(t,e){return void 0===t?e:t},getRGB:function(t){var e;return t in l?{r:(e=l[t])[0],g:e[1],b:e[2]}:"#"===t[0]?this._hexToRgb(t.substring(1)):"rgb("===t.substr(0,4)?(e=d.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA:function(t){return h.Util._namedColorToRBA(t=t||"black")||h.Util._hex3ColorToRGBA(t)||h.Util._hex6ColorToRGBA(t)||h.Util._rgbColorToRGBA(t)||h.Util._rgbaColorToRGBA(t)||h.Util._hslColorToRGBA(t)},_namedColorToRBA:function(t){return(t=l[t.toLowerCase()])?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA:function(t){if(0===t.indexOf("rgb("))return{r:(t=(t=t.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number))[0],g:t[1],b:t[2],a:1}},_rgbaColorToRGBA:function(t){if(0===t.indexOf("rgba("))return{r:(t=(t=t.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map(Number))[0],g:t[1],b:t[2],a:t[3]}},_hex6ColorToRGBA:function(t){if("#"===t[0]&&7===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex3ColorToRGBA:function(t){if("#"===t[0]&&4===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA:function(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){t=((e=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t))[0],e.slice(1));var n,i=Number(t[0])/360,e=Number(t[1])/100,o=(t=Number(t[2])/100,void 0),r=void 0;if(0==e)return r=255*t,{r:Math.round(r),g:Math.round(r),b:Math.round(r),a:1};for(var a=2*t-(n=t<.5?t*(1+e):t+e-t*e),s=[0,0,0],h=0;h<3;h++)(o=i+1/3*-(h-1))<0&&o++,1<o&&o--,s[h]=255*(r=6*o<1?a+6*(n-a)*o:2*o<1?n:3*o<2?a+(n-a)*(2/3-o)*6:a);return{r:Math.round(s[0]),g:Math.round(s[1]),b:Math.round(s[2]),a:1}}},haveIntersection:function(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject:function(t){var e,i={};for(e in t)this._isPlainObject(t[e])?i[e]=this.cloneObject(t[e]):this._isArray(t[e])?i[e]=this.cloneArray(t[e]):i[e]=t[e];return i},cloneArray:function(t){return t.slice(0)},_degToRad:function(t){return t*r},_radToDeg:function(t){return t*a},_getRotation:function(t){return n.Konva.angleDeg?h.Util._radToDeg(t):t},_capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw:function(t){throw new Error(s+t)},error:function(t){console.error(s+t)},warn:function(t){n.Konva.showWarnings&&console.warn("Konva warning: "+t)},extend:function(t,e){function i(){this.constructor=t}i.prototype=e.prototype;var n,o=t.prototype;for(n in t.prototype=new i,o)o.hasOwnProperty(n)&&(t.prototype[n]=o[n]);t.__super__=e.prototype,t.super=e},_getControlPoints:function(t,e,i,n,o,r,a){var h,s=Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2)),l=a*s/(s+(h=Math.sqrt(Math.pow(o-i,2)+Math.pow(r-n,2))));return[i-l*(o-t),n-l*(r-e),i+(h=a*h/(s+h))*(o-t),n+h*(r-e)]},_expandPoints:function(t,e){for(var i,n=t.length,o=[],r=2;r<n-2;r+=2)i=h.Util._getControlPoints(t[r-2],t[r-1],t[r],t[r+1],t[r+2],t[r+3],e),isNaN(i[0])||(o.push(i[0]),o.push(i[1]),o.push(t[r]),o.push(t[r+1]),o.push(i[2]),o.push(i[3]));return o},each:function(t,e){for(var i in t)e(i,t[i])},_inRange:function(t,e,i){return e<=t&&t<i},_getProjectionToSegment:function(t,e,i,n,o,r){var a,s,h=(t-i)*(t-i)+(e-n)*(e-n);return r=0==h?(a=t,s=e,(o-i)*(o-i)+(r-n)*(r-n)):(h=((o-t)*(i-t)+(r-e)*(n-e))/h)<0?((a=t)-o)*(t-o)+((s=e)-r)*(e-r):1<h?((a=i)-o)*(i-o)+((s=n)-r)*(n-r):((a=t+h*(i-t))-o)*(a-o)+((s=e+h*(n-e))-r)*(s-r),[a,s,r]},_getProjectionToLine:function(n,o,r){var a=h.Util.cloneObject(n),s=Number.MAX_VALUE;return o.forEach((function(t,e){var i;!r&&e===o.length-1||(i=o[(e+1)%o.length],t=(e=h.Util._getProjectionToSegment(t.x,t.y,i.x,i.y,n.x,n.y))[0],i=e[1],(e=e[2])<s&&(a.x=t,a.y=i,s=e))})),a},_prepareArrayForTween:function(t,e,i){var n,o,r=[],a=[];for(t.length>e.length&&(o=e,e=t,t=o),n=0;n<t.length;n+=2)r.push({x:t[n],y:t[n+1]});for(n=0;n<e.length;n+=2)a.push({x:e[n],y:e[n+1]});var s=[];return a.forEach((function(t){t=h.Util._getProjectionToLine(t,r,i);s.push(t.x),s.push(t.y)})),s},_prepareToStringify:function(t){var e,i;for(i in t.visitedByCircularReferenceRemoval=!0,t)if(t.hasOwnProperty(i)&&t[i]&&"object"==typeof t[i])if(e=Object.getOwnPropertyDescriptor(t,i),t[i].visitedByCircularReferenceRemoval||h.Util._isElement(t[i])){if(!e.configurable)return null;delete t[i]}else if(null===h.Util._prepareToStringify(t[i])){if(!e.configurable)return null;delete t[i]}return delete t.visitedByCircularReferenceRemoval,t},_assign:function(t,e){for(var i in e)t[i]=e[i];return t},_getFirstPointerId:function(t){return t.touches?t.changedTouches[0].identifier:999}}},{"./Global":10}],19:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getComponentValidator=i.getBooleanValidator=i.getNumberArrayValidator=i.getFunctionValidator=i.getStringOrGradientValidator=i.getStringValidator=i.getNumberOrAutoValidator=i.getNumberOrArrayOfNumbersValidator=i.getNumberValidator=i.alphaComponent=i.RGBComponent=void 0;var n=t("./Global"),r=t("./Util");function a(t){return r.Util._isString(t)?'"'+t+'"':"[object Number]"===Object.prototype.toString.call(t)||r.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}i.RGBComponent=function(t){return 255<t?255:t<0?0:Math.round(t)},i.alphaComponent=function(t){return 1<t?1:t<1e-4?1e-4:t},i.getNumberValidator=function(){if(n.Konva.isUnminified)return function(t,e){return r.Util._isNumber(t)||r.Util.warn(a(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}},i.getNumberOrArrayOfNumbersValidator=function(o){if(n.Konva.isUnminified)return function(t,e){var i=r.Util._isNumber(t),n=r.Util._isArray(t)&&t.length==o;return i||n||r.Util.warn(a(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or Array<number>('+o+")"),t}},i.getNumberOrAutoValidator=function(){if(n.Konva.isUnminified)return function(t,e){return r.Util._isNumber(t)||"auto"===t||r.Util.warn(a(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}},i.getStringValidator=function(){if(n.Konva.isUnminified)return function(t,e){return r.Util._isString(t)||r.Util.warn(a(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}},i.getStringOrGradientValidator=function(){if(n.Konva.isUnminified)return function(t,e){var i=r.Util._isString(t),n="[object CanvasGradient]"===Object.prototype.toString.call(t);return i||n||r.Util.warn(a(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}},i.getFunctionValidator=function(){if(n.Konva.isUnminified)return function(t,e){return r.Util._isFunction(t)||r.Util.warn(a(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}},i.getNumberArrayValidator=function(){if(n.Konva.isUnminified)return function(t,e){return r.Util._isArray(t)?t.forEach((function(t){r.Util._isNumber(t)||r.Util.warn('"'+e+'" attribute has non numeric element '+t+". Make sure that all elements are numbers.")})):r.Util.warn(a(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.'),t}},i.getBooleanValidator=function(){if(n.Konva.isUnminified)return function(t,e){return!0===t||!1===t||r.Util.warn(a(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}},i.getComponentValidator=function(i){if(n.Konva.isUnminified)return function(t,e){return r.Util.isObject(t)||r.Util.warn(a(t)+' is a not valid value for "'+e+'" attribute. The value should be an object with properties '+i),t}}},{"./Global":10,"./Util":18}],20:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Konva=void 0;var n=t("./Global"),o=t("./Util"),r=t("./Node"),a=t("./Container"),s=t("./Stage"),h=t("./Layer"),l=t("./FastLayer"),d=t("./Group"),p=t("./DragAndDrop"),c=t("./Shape"),u=t("./Animation"),f=t("./Tween"),g=t("./Context");t=t("./Canvas");i.Konva=o.Util._assign(n.Konva,{Collection:o.Collection,Util:o.Util,Transform:o.Transform,Node:r.Node,ids:r.ids,names:r.names,Container:a.Container,Stage:s.Stage,stages:s.stages,Layer:h.Layer,FastLayer:l.FastLayer,Group:d.Group,DD:p.DD,Shape:c.Shape,shapes:c.shapes,Animation:u.Animation,Tween:f.Tween,Easings:f.Easings,Context:g.Context,Canvas:t.Canvas})},{"./Animation":3,"./Canvas":4,"./Container":5,"./Context":6,"./DragAndDrop":7,"./FastLayer":9,"./Global":10,"./Group":11,"./Layer":12,"./Node":13,"./Shape":15,"./Stage":16,"./Tween":17,"./Util":18}],21:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Konva=void 0;var n=t("./_CoreInternals"),o=t("./shapes/Arc"),r=t("./shapes/Arrow"),a=t("./shapes/Circle"),s=t("./shapes/Ellipse"),h=t("./shapes/Image"),l=t("./shapes/Label"),d=t("./shapes/Line"),p=t("./shapes/Path"),c=t("./shapes/Rect"),u=t("./shapes/RegularPolygon"),f=t("./shapes/Ring"),g=t("./shapes/Sprite"),_=t("./shapes/Star"),y=t("./shapes/Text"),m=t("./shapes/TextPath"),v=t("./shapes/Transformer"),b=t("./shapes/Wedge"),w=t("./filters/Blur"),S=t("./filters/Brighten"),x=t("./filters/Contrast"),T=t("./filters/Emboss"),P=t("./filters/Enhance"),k=t("./filters/Grayscale"),C=t("./filters/HSL"),A=t("./filters/HSV"),M=t("./filters/Invert"),F=t("./filters/Kaleidoscope"),L=t("./filters/Mask"),E=t("./filters/Noise"),O=t("./filters/Pixelate"),D=t("./filters/Posterize"),G=t("./filters/RGB"),N=t("./filters/RGBA"),R=t("./filters/Sepia"),U=t("./filters/Solarize");t=t("./filters/Threshold");i.Konva=n.Konva.Util._assign(n.Konva,{Arc:o.Arc,Arrow:r.Arrow,Circle:a.Circle,Ellipse:s.Ellipse,Image:h.Image,Label:l.Label,Tag:l.Tag,Line:d.Line,Path:p.Path,Rect:c.Rect,RegularPolygon:u.RegularPolygon,Ring:f.Ring,Sprite:g.Sprite,Star:_.Star,Text:y.Text,TextPath:m.TextPath,Transformer:v.Transformer,Wedge:b.Wedge,Filters:{Blur:w.Blur,Brighten:S.Brighten,Contrast:x.Contrast,Emboss:T.Emboss,Enhance:P.Enhance,Grayscale:k.Grayscale,HSL:C.HSL,HSV:A.HSV,Invert:M.Invert,Kaleidoscope:F.Kaleidoscope,Mask:L.Mask,Noise:E.Noise,Pixelate:O.Pixelate,Posterize:D.Posterize,RGB:G.RGB,RGBA:N.RGBA,Sepia:R.Sepia,Solarize:U.Solarize,Threshold:t.Threshold}})},{"./_CoreInternals":20,"./filters/Blur":22,"./filters/Brighten":23,"./filters/Contrast":24,"./filters/Emboss":25,"./filters/Enhance":26,"./filters/Grayscale":27,"./filters/HSL":28,"./filters/HSV":29,"./filters/Invert":30,"./filters/Kaleidoscope":31,"./filters/Mask":32,"./filters/Noise":33,"./filters/Pixelate":34,"./filters/Posterize":35,"./filters/RGB":36,"./filters/RGBA":37,"./filters/Sepia":38,"./filters/Solarize":39,"./filters/Threshold":40,"./shapes/Arc":42,"./shapes/Arrow":43,"./shapes/Circle":44,"./shapes/Ellipse":45,"./shapes/Image":46,"./shapes/Label":47,"./shapes/Line":48,"./shapes/Path":49,"./shapes/Rect":50,"./shapes/RegularPolygon":51,"./shapes/Ring":52,"./shapes/Sprite":53,"./shapes/Star":54,"./shapes/Text":55,"./shapes/TextPath":56,"./shapes/Transformer":57,"./shapes/Wedge":58}],22:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Blur=void 0;var n=t("../Factory"),o=t("../Node");t=t("../Validators");function z(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var H=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],W=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];i.Blur=function(t){var e=Math.round(this.blurRadius());0<e&&function(t,e){for(var i,n,o,r,a,s,h,l,d,p,c,u,f,g,_,y,m,v,b,w,S,x,T,P=t.data,k=t.width,C=t.height,A=e+e+1,M=k-1,F=C-1,L=e+1,E=L*(L+1)/2,O=new z,D=null,G=O,N=null,R=null,U=H[e],I=W[e],V=1;V<A;V++)G=G.next=new z,V===L&&(D=G);for(G.next=O,n=s=a=0;n<C;n++){for(_=y=m=v=h=l=d=p=0,c=L*(b=P[a]),u=L*(w=P[a+1]),f=L*(S=P[a+2]),g=L*(x=P[a+3]),h+=E*b,l+=E*w,d+=E*S,p+=E*x,G=O,V=0;V<L;V++)G.r=b,G.g=w,G.b=S,G.a=x,G=G.next;for(V=1;V<L;V++)h+=(G.r=b=P[o=a+((M<V?M:V)<<2)])*(T=L-V),l+=(G.g=w=P[o+1])*T,d+=(G.b=S=P[o+2])*T,p+=(G.a=x=P[o+3])*T,_+=b,y+=w,m+=S,v+=x,G=G.next;for(N=O,R=D,i=0;i<k;i++)P[a+3]=x=p*U>>I,0!==x?(P[a]=(h*U>>I)*(x=255/x),P[a+1]=(l*U>>I)*x,P[a+2]=(d*U>>I)*x):P[a]=P[a+1]=P[a+2]=0,h-=c,l-=u,d-=f,p-=g,c-=N.r,u-=N.g,f-=N.b,g-=N.a,o=s+((o=i+e+1)<M?o:M)<<2,h+=_+=N.r=P[o],l+=y+=N.g=P[o+1],d+=m+=N.b=P[o+2],p+=v+=N.a=P[o+3],N=N.next,c+=b=R.r,u+=w=R.g,f+=S=R.b,g+=x=R.a,_-=b,y-=w,m-=S,v-=x,R=R.next,a+=4;s+=k}for(i=0;i<k;i++){for(y=m=v=_=l=d=p=h=0,c=L*(b=P[a=i<<2]),u=L*(w=P[a+1]),f=L*(S=P[a+2]),g=L*(x=P[a+3]),h+=E*b,l+=E*w,d+=E*S,p+=E*x,G=O,V=0;V<L;V++)G.r=b,G.g=w,G.b=S,G.a=x,G=G.next;for(r=k,V=1;V<=e;V++)h+=(G.r=b=P[a=r+i<<2])*(T=L-V),l+=(G.g=w=P[a+1])*T,d+=(G.b=S=P[a+2])*T,p+=(G.a=x=P[a+3])*T,_+=b,y+=w,m+=S,v+=x,G=G.next,V<F&&(r+=k);for(a=i,N=O,R=D,n=0;n<C;n++)P[3+(o=a<<2)]=x=p*U>>I,0<x?(P[o]=(h*U>>I)*(x=255/x),P[o+1]=(l*U>>I)*x,P[o+2]=(d*U>>I)*x):P[o]=P[o+1]=P[o+2]=0,h-=c,l-=u,d-=f,p-=g,c-=N.r,u-=N.g,f-=N.b,g-=N.a,o=i+((o=n+L)<F?o:F)*k<<2,h+=_+=N.r=P[o],l+=y+=N.g=P[o+1],d+=m+=N.b=P[o+2],p+=v+=N.a=P[o+3],N=N.next,c+=b=R.r,u+=w=R.g,f+=S=R.b,g+=x=R.a,_-=b,y-=w,m-=S,v-=x,R=R.next,a+=k}}(t,e)},n.Factory.addGetterSetter(o.Node,"blurRadius",0,t.getNumberValidator(),n.Factory.afterSetFilter)},{"../Factory":8,"../Node":13,"../Validators":19}],23:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Brighten=void 0;var n=t("../Factory"),o=t("../Node");t=t("../Validators");i.Brighten=function(t){for(var e=255*this.brightness(),i=t.data,n=i.length,o=0;o<n;o+=4)i[o]+=e,i[o+1]+=e,i[o+2]+=e},n.Factory.addGetterSetter(o.Node,"brightness",0,t.getNumberValidator(),n.Factory.afterSetFilter)},{"../Factory":8,"../Node":13,"../Validators":19}],24:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Contrast=void 0;var n=t("../Factory"),o=t("../Node");t=t("../Validators");i.Contrast=function(t){for(var e=Math.pow((this.contrast()+100)/100,2),i=t.data,n=i.length,o=150,r=150,a=150,s=0;s<n;s+=4)o=i[s],r=i[s+1],a=i[s+2],o/=255,o-=.5,o*=e,o+=.5,r/=255,r-=.5,r*=e,r+=.5,a/=255,a-=.5,a*=e,a+=.5,r=(r*=255)<0?0:255<r?255:r,a=(a*=255)<0?0:255<a?255:a,i[s]=o=(o*=255)<0?0:255<o?255:o,i[s+1]=r,i[s+2]=a},n.Factory.addGetterSetter(o.Node,"contrast",0,t.getNumberValidator(),n.Factory.afterSetFilter)},{"../Factory":8,"../Node":13,"../Validators":19}],25:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Emboss=void 0;var n=t("../Factory"),o=t("../Node"),w=t("../Util");t=t("../Validators");i.Emboss=function(t){var e=10*this.embossStrength(),i=255*this.embossWhiteLevel(),n=this.embossDirection(),o=this.embossBlend(),r=0,a=0,s=t.data,h=t.width,l=t.height,d=4*h,p=l;switch(n){case"top-left":a=r=-1;break;case"top":r=-1,a=0;break;case"top-right":r=-1,a=1;break;case"right":r=0,a=1;break;case"bottom-right":a=r=1;break;case"bottom":r=1,a=0;break;case"bottom-left":a=-(r=1);break;case"left":r=0,a=-1;break;default:w.Util.error("Unknown emboss direction: "+n)}do{var c=(p-1)*d,u=r,f=(p-1+(u=l<p+(u=p+r<1?0:r)?0:u))*h*4,g=h;do{var _=c+4*(g-1),y=a,m=f+4*(g-1+(y=h<g+(y=g+a<1?0:a)?0:y)),v=s[_]-s[m],b=s[1+_]-s[1+m];y=s[2+_]-s[2+m],v=0<(m=v)?m:-m}while(v<(0<b?b:-b)&&(m=b),v<(0<y?y:-y)&&(m=y),m*=e,o?(b=s[_]+m,v=s[1+_]+m,y=s[2+_]+m,s[_]=255<b?255:b<0?0:b,s[1+_]=255<v?255:v<0?0:v,s[2+_]=255<y?255:y<0?0:y):((m=i-m)<0?m=0:255<m&&(m=255),s[_]=s[1+_]=s[2+_]=m),--g)}while(--p)},n.Factory.addGetterSetter(o.Node,"embossStrength",.5,t.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(o.Node,"embossWhiteLevel",.5,t.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(o.Node,"embossDirection","top-left",null,n.Factory.afterSetFilter),n.Factory.addGetterSetter(o.Node,"embossBlend",!1,null,n.Factory.afterSetFilter)},{"../Factory":8,"../Node":13,"../Util":18,"../Validators":19}],26:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Enhance=void 0;var n=t("../Factory"),o=t("../Node");t=t("../Validators");function m(t,e,i,n,o){o-=n;return 0==(i-=e)?n+o/2:0==o?n:o*((t-e)/i)+n}i.Enhance=function(t){var e,i,n,o,r,a,s,h,l=t.data,d=l.length,p=l[0],c=p,u=l[1],f=u,g=l[2],_=g,y=this.enhance();if(0!==y){for(i=0;i<d;i+=4)(e=l[i+0])<p?p=e:c<e&&(c=e),(e=l[i+1])<u?u=e:f<e&&(f=e),(e=l[i+2])<g?g=e:_<e&&(_=e);for(c===p&&(c=255,p=0),f===u&&(f=255,u=0),_===g&&(_=255,g=0),h=0<y?(n=c+y*(255-c),o=p-y*+p,r=f+y*(255-f),a=u-y*+u,s=_+y*(255-_),g-y*+g):(n=c+y*(c-(t=.5*(c+p))),o=p+y*(p-t),r=f+y*(f-(t=.5*(f+u))),a=u+y*(u-t),s=_+y*(_-(t=.5*(_+g))),g+y*(g-t)),i=0;i<d;i+=4)l[i+0]=m(l[i+0],p,c,o,n),l[i+1]=m(l[i+1],u,f,a,r),l[i+2]=m(l[i+2],g,_,h,s)}},n.Factory.addGetterSetter(o.Node,"enhance",0,t.getNumberValidator(),n.Factory.afterSetFilter)},{"../Factory":8,"../Node":13,"../Validators":19}],27:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Grayscale=void 0;i.Grayscale=function(t){for(var e,i=t.data,n=i.length,o=0;o<n;o+=4)e=.34*i[o]+.5*i[o+1]+.16*i[o+2],i[o]=e,i[o+1]=e,i[o+2]=e}},{}],28:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.HSL=void 0;var n=t("../Factory"),o=t("../Node");t=t("../Validators");n.Factory.addGetterSetter(o.Node,"hue",0,t.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(o.Node,"saturation",0,t.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(o.Node,"luminance",0,t.getNumberValidator(),n.Factory.afterSetFilter);i.HSL=function(t){for(var e,i,n,o,r=t.data,a=r.length,s=Math.pow(2,this.saturation()),h=Math.abs(this.hue()+360)%360,l=127*this.luminance(),d=.299+.701*(t=+s*Math.cos(h*Math.PI/180))+.167*(h=+s*Math.sin(h*Math.PI/180)),p=.587-.587*t+.33*h,c=.114-.114*t-.497*h,u=.299-.299*t-.328*h,f=.587+.413*t+.035*h,g=.114-.114*t+.293*h,_=.299-.3*t+1.25*h,y=.587-.586*t-1.05*h,m=.114+.886*t-.2*h,v=0;v<a;v+=4)e=r[v+0],i=r[v+1],n=r[v+2],o=r[v+3],r[v+0]=d*e+p*i+c*n+l,r[v+1]=u*e+f*i+g*n+l,r[v+2]=_*e+y*i+m*n+l,r[v+3]=o}},{"../Factory":8,"../Node":13,"../Validators":19}],29:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.HSV=void 0;var n=t("../Factory"),o=t("../Node");t=t("../Validators");i.HSV=function(t){for(var e,i,n,o,r=t.data,a=r.length,s=Math.pow(2,this.value()),h=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,d=.299*s+.701*(t=s*h*Math.cos(l*Math.PI/180))+.167*(l=s*h*Math.sin(l*Math.PI/180)),p=.587*s-.587*t+.33*l,c=.114*s-.114*t-.497*l,u=.299*s-.299*t-.328*l,f=.587*s+.413*t+.035*l,g=.114*s-.114*t+.293*l,_=.299*s-.3*t+1.25*l,y=.587*s-.586*t-1.05*l,m=.114*s+.886*t-.2*l,v=0;v<a;v+=4)e=r[v+0],i=r[v+1],n=r[v+2],o=r[v+3],r[v+0]=d*e+p*i+c*n,r[v+1]=u*e+f*i+g*n,r[v+2]=_*e+y*i+m*n,r[v+3]=o},n.Factory.addGetterSetter(o.Node,"hue",0,t.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(o.Node,"saturation",0,t.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(o.Node,"value",0,t.getNumberValidator(),n.Factory.afterSetFilter)},{"../Factory":8,"../Node":13,"../Validators":19}],30:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Invert=void 0;i.Invert=function(t){for(var e=t.data,i=e.length,n=0;n<i;n+=4)e[n]=255-e[n],e[n+1]=255-e[n+1],e[n+2]=255-e[n+2]}},{}],31:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Kaleidoscope=void 0;var n=t("../Factory"),o=t("../Node"),S=t("../Util");t=t("../Validators");i.Kaleidoscope=function(t){var e,i,n,o,r,a,s,h,l,d,p=t.width,c=t.height,u=Math.round(this.kaleidoscopePower()),f=Math.round(this.kaleidoscopeAngle()),g=Math.floor(p*(f%360)/360);if(!(u<1)){(f=S.Util.createCanvasElement()).width=p,f.height=c;var _=f.getContext("2d").getImageData(0,0,p,c);!function(t,e,i){for(var n,o,r,a,s,h,l,d,p=t.data,c=e.data,u=t.width,f=(t=t.height,i.polarCenterX||u/2),g=i.polarCenterY||t/2,y=u-f,m=t-g,_=(_=Math.sqrt(f*f+g*g))<(i=Math.sqrt(y*y+m*m))?i:_,v=t,b=u,w=360/b*Math.PI/180,S=0;S<b;S+=1)for(l=Math.sin(S*w),d=Math.cos(S*w),h=0;h<v;h+=1)y=Math.floor(f+_*h/v*d),o=p[0+(n=4*(Math.floor(g+_*h/v*l)*u+y))],r=p[1+n],a=p[2+n],s=p[3+n],c[0+(n=4*(S+h*u))]=o,c[1+n]=r,c[2+n]=a,c[3+n]=s}(t,_,{polarCenterX:p/2,polarCenterY:c/2});for(var y=p/Math.pow(2,u);y<=8;)y*=2,--u;var m=y=Math.ceil(y),v=0,b=m,w=1;for(p<g+y&&(v=m,b=0,w=-1),i=0;i<c;i+=1)for(e=v;e!==b;e+=w)n=Math.round(e+g)%p,r=_.data[0+(l=4*(p*i+n))],a=_.data[l+1],s=_.data[l+2],h=_.data[l+3],_.data[0+(d=4*(p*i+e))]=r,_.data[d+1]=a,_.data[d+2]=s,_.data[d+3]=h;for(i=0;i<c;i+=1)for(m=Math.floor(y),o=0;o<u;o+=1){for(e=0;e<m+1;e+=1)r=_.data[0+(l=4*(p*i+e))],a=_.data[l+1],s=_.data[l+2],h=_.data[l+3],_.data[0+(d=4*(p*i+2*m-e-1))]=r,_.data[d+1]=a,_.data[d+2]=s,_.data[d+3]=h;m*=2}!function(t,e,i){var n,o,r,a,s,h,l,d=t.data,p=e.data,c=t.width,u=t.height,f=i.polarCenterX||c/2,g=i.polarCenterY||u/2,y=c-f,m=u-g,_=(_=Math.sqrt(f*f+g*g))<(t=Math.sqrt(y*y+m*m))?t:_,v=u,b=c,w=i.polarRotation||0;for(y=0;y<c;y+=1)for(m=0;m<u;m+=1)l=y-f,n=m-g,h=Math.sqrt(l*l+n*n)*v/_,l=(180*Math.atan2(n,l)/Math.PI+360+w)%360*b/360,l=Math.floor(l),o=d[0+(l=4*(Math.floor(h)*c+l))],r=d[1+l],a=d[2+l],s=d[3+l],p[0+(l=4*(m*c+y))]=o,p[1+l]=r,p[2+l]=a,p[3+l]=s}(_,t,{polarRotation:0})}},n.Factory.addGetterSetter(o.Node,"kaleidoscopePower",2,t.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(o.Node,"kaleidoscopeAngle",0,t.getNumberValidator(),n.Factory.afterSetFilter)},{"../Factory":8,"../Node":13,"../Util":18,"../Validators":19}],32:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Mask=void 0;var n=t("../Factory"),o=t("../Node");t=t("../Validators");function p(t,e,i){i=4*(i*t.width+e);return(e=[]).push(t.data[i++],t.data[i++],t.data[i++],t.data[i++]),e}function c(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}i.Mask=function(t){var e=function(t,e){var i=p(t,0,0),n=p(t,t.width-1,0),o=p(t,0,t.height-1),r=p(t,t.width-1,t.height-1),a=e||10;if(c(i,n)<a&&c(n,r)<a&&c(r,o)<a&&c(o,i)<a){for(var s=function(t){for(var e=[0,0,0],i=0;i<t.length;i++)e[0]+=t[i][0],e[1]+=t[i][1],e[2]+=t[i][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}([n,i,r,o]),h=[],l=0;l<t.width*t.height;l++){var d=c(s,[t.data[4*l],t.data[4*l+1],t.data[4*l+2]]);h[l]=d<a?0:255}return h}}(t,this.threshold());return e&&function(t,e){for(var i=0;i<t.width*t.height;i++)t.data[4*i+3]=e[i]}(t,function(t,e,i){for(var n=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],o=Math.round(Math.sqrt(n.length)),r=Math.floor(o/2),a=[],s=0;s<i;s++)for(var h=0;h<e;h++){for(var l=s*e+h,d=0,p=0;p<o;p++)for(var c=0;c<o;c++){var u=s+p-r,f=h+c-r;0<=u&&u<i&&0<=f&&f<e&&(d+=t[u*e+f]*n[p*o+c])}a[l]=d}return a}(function(t,e,i){for(var n=[1,1,1,1,1,1,1,1,1],o=Math.round(Math.sqrt(n.length)),r=Math.floor(o/2),a=[],s=0;s<i;s++)for(var h=0;h<e;h++){for(var l=s*e+h,d=0,p=0;p<o;p++)for(var c=0;c<o;c++){var u=s+p-r,f=h+c-r;0<=u&&u<i&&0<=f&&f<e&&(d+=t[u*e+f]*n[p*o+c])}a[l]=1020<=d?255:0}return a}(function(t,e,i){for(var n=[1,1,1,1,0,1,1,1,1],o=Math.round(Math.sqrt(n.length)),r=Math.floor(o/2),a=[],s=0;s<i;s++)for(var h=0;h<e;h++){for(var l=s*e+h,d=0,p=0;p<o;p++)for(var c=0;c<o;c++){var u=s+p-r,f=h+c-r;0<=u&&u<i&&0<=f&&f<e&&(d+=t[u*e+f]*n[p*o+c])}a[l]=2040===d?255:0}return a}(e,t.width,t.height),t.width,t.height),t.width,t.height)),t},n.Factory.addGetterSetter(o.Node,"threshold",0,t.getNumberValidator(),n.Factory.afterSetFilter)},{"../Factory":8,"../Node":13,"../Validators":19}],33:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Noise=void 0;var n=t("../Factory"),o=t("../Node");t=t("../Validators");i.Noise=function(t){for(var e=255*this.noise(),i=t.data,n=i.length,o=e/2,r=0;r<n;r+=4)i[r+0]+=o-2*o*Math.random(),i[r+1]+=o-2*o*Math.random(),i[r+2]+=o-2*o*Math.random()},n.Factory.addGetterSetter(o.Node,"noise",.2,t.getNumberValidator(),n.Factory.afterSetFilter)},{"../Factory":8,"../Node":13,"../Validators":19}],34:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Pixelate=void 0;var n=t("../Factory"),w=t("../Util"),o=t("../Node");t=t("../Validators");i.Pixelate=function(t){var e,i,n,o,r,a,s,h,l,d,p,c,u,f,g=Math.ceil(this.pixelSize()),_=t.width,y=t.height,m=Math.ceil(_/g),v=Math.ceil(y/g),b=t.data;if(g<=0)w.Util.error("pixelSize value can not be <= 0");else for(c=0;c<m;c+=1)for(u=0;u<v;u+=1){for(l=(h=c*g)+g,p=(d=u*g)+g,f=s=a=r=o=0,e=h;e<l;e+=1)if(!(_<=e))for(i=d;i<p;i+=1)y<=i||(o+=b[0+(n=4*(_*i+e))],r+=b[n+1],a+=b[n+2],s+=b[n+3],f+=1);for(o/=f,r/=f,a/=f,s/=f,e=h;e<l;e+=1)if(!(_<=e))for(i=d;i<p;i+=1)y<=i||(b[0+(n=4*(_*i+e))]=o,b[n+1]=r,b[n+2]=a,b[n+3]=s)}},n.Factory.addGetterSetter(o.Node,"pixelSize",8,t.getNumberValidator(),n.Factory.afterSetFilter)},{"../Factory":8,"../Node":13,"../Util":18,"../Validators":19}],35:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Posterize=void 0;var n=t("../Factory"),o=t("../Node");t=t("../Validators");i.Posterize=function(t){for(var e=Math.round(254*this.levels())+1,i=t.data,n=i.length,o=255/e,r=0;r<n;r+=1)i[r]=Math.floor(i[r]/o)*o},n.Factory.addGetterSetter(o.Node,"levels",.5,t.getNumberValidator(),n.Factory.afterSetFilter)},{"../Factory":8,"../Node":13,"../Validators":19}],36:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.RGB=void 0;var n=t("../Factory"),o=t("../Node");t=t("../Validators");i.RGB=function(t){for(var e,i=t.data,n=i.length,o=this.red(),r=this.green(),a=this.blue(),s=0;s<n;s+=4)e=(.34*i[s]+.5*i[s+1]+.16*i[s+2])/255,i[s]=e*o,i[s+1]=e*r,i[s+2]=e*a,i[s+3]=i[s+3]},n.Factory.addGetterSetter(o.Node,"red",0,(function(t){return this._filterUpToDate=!1,255<t?255:t<0?0:Math.round(t)})),n.Factory.addGetterSetter(o.Node,"green",0,(function(t){return this._filterUpToDate=!1,255<t?255:t<0?0:Math.round(t)})),n.Factory.addGetterSetter(o.Node,"blue",0,t.RGBComponent,n.Factory.afterSetFilter)},{"../Factory":8,"../Node":13,"../Validators":19}],37:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.RGBA=void 0;var n=t("../Factory"),o=t("../Node");t=t("../Validators");i.RGBA=function(t){for(var e,i=t.data,n=i.length,o=this.red(),r=this.green(),a=this.blue(),s=this.alpha(),h=0;h<n;h+=4)i[h]=o*s+i[h]*(e=1-s),i[h+1]=r*s+i[h+1]*e,i[h+2]=a*s+i[h+2]*e},n.Factory.addGetterSetter(o.Node,"red",0,(function(t){return this._filterUpToDate=!1,255<t?255:t<0?0:Math.round(t)})),n.Factory.addGetterSetter(o.Node,"green",0,(function(t){return this._filterUpToDate=!1,255<t?255:t<0?0:Math.round(t)})),n.Factory.addGetterSetter(o.Node,"blue",0,t.RGBComponent,n.Factory.afterSetFilter),n.Factory.addGetterSetter(o.Node,"alpha",1,(function(t){return this._filterUpToDate=!1,1<t?1:t<0?0:t}))},{"../Factory":8,"../Node":13,"../Validators":19}],38:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Sepia=void 0;i.Sepia=function(t){for(var e,i,n,o=t.data,r=o.length,a=0;a<r;a+=4)e=o[a+0],i=o[a+1],n=o[a+2],o[a+0]=Math.min(255,.393*e+.769*i+.189*n),o[a+1]=Math.min(255,.349*e+.686*i+.168*n),o[a+2]=Math.min(255,.272*e+.534*i+.131*n)}},{}],39:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Solarize=void 0;i.Solarize=function(t){var e=t.data,i=t.width,n=4*i,o=t.height;do{var r=(o-1)*n,a=i;do{var s=r+4*(a-1),h=e[s],l=e[1+s],d=e[2+s]}while(127<h&&(h=255-h),127<l&&(l=255-l),127<d&&(d=255-d),e[s]=h,e[1+s]=l,e[2+s]=d,--a)}while(--o)}},{}],40:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Threshold=void 0;var n=t("../Factory"),o=t("../Node");t=t("../Validators");i.Threshold=function(t){for(var e=255*this.threshold(),i=t.data,n=i.length,o=0;o<n;o+=1)i[o]=i[o]<e?0:255},n.Factory.addGetterSetter(o.Node,"threshold",.5,t.getNumberValidator(),n.Factory.afterSetFilter)},{"../Factory":8,"../Node":13,"../Validators":19}],41:[function(t,e,i){(t=t("./_FullInternals").Konva)._injectGlobal(t),i.default=t,e.exports=i.default},{"./_FullInternals":21}],42:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.Arc=void 0;var r,a=t("../Util"),s=t("../Factory"),h=t("../Shape"),l=t("../Global"),d=t("../Validators");t=t("../Global"),o=(o(p,r=h.Shape),p.prototype._sceneFunc=function(t){var e=l.Konva.getAngle(this.angle()),i=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,i),t.arc(0,0,this.innerRadius(),e,0,!i),t.closePath(),t.fillStrokeShape(this)},p.prototype.getWidth=function(){return 2*this.outerRadius()},p.prototype.getHeight=function(){return 2*this.outerRadius()},p.prototype.setWidth=function(t){this.outerRadius(t/2)},p.prototype.setHeight=function(t){this.outerRadius(t/2)},p);function p(){return null!==r&&r.apply(this,arguments)||this}(i.Arc=o).prototype._centroid=!0,o.prototype.className="Arc",o.prototype._attrsAffectingSize=["innerRadius","outerRadius"],t._registerNode(o),s.Factory.addGetterSetter(o,"innerRadius",0,d.getNumberValidator()),s.Factory.addGetterSetter(o,"outerRadius",0,d.getNumberValidator()),s.Factory.addGetterSetter(o,"angle",0,d.getNumberValidator()),s.Factory.addGetterSetter(o,"clockwise",!1,d.getBooleanValidator()),a.Collection.mapMethods(o)},{"../Factory":8,"../Global":10,"../Shape":15,"../Util":18,"../Validators":19}],43:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.Arrow=void 0;var p,r=t("../Util"),a=t("../Factory"),s=t("./Line"),h=t("../Validators");t=t("../Global"),o=(o(l,p=s.Line),l.prototype._sceneFunc=function(t){p.prototype._sceneFunc.call(this,t);var e=2*Math.PI,i=this.points(),n=i,o=0!==this.tension()&&4<i.length;o&&(n=this.getTensionPoints());var r,a=i.length,s=o?(r=i[a-2]-(n[n.length-2]+n[n.length-4])/2,i[a-1]-(n[n.length-1]+n[n.length-3])/2):(r=i[a-2]-i[a-4],i[a-1]-i[a-3]),h=(Math.atan2(s,r)+e)%e,l=this.pointerLength(),d=this.pointerWidth();t.save(),t.beginPath(),t.translate(i[a-2],i[a-1]),t.rotate(h),t.moveTo(0,0),t.lineTo(-l,d/2),t.lineTo(-l,-d/2),t.closePath(),t.restore(),this.pointerAtBeginning()&&(t.save(),t.translate(i[0],i[1]),s=o?(r=(n[0]+n[2])/2-i[0],(n[1]+n[3])/2-i[1]):(r=i[2]-i[0],i[3]-i[1]),t.rotate((Math.atan2(-s,-r)+e)%e),t.moveTo(0,0),t.lineTo(-l,d/2),t.lineTo(-l,-d/2),t.closePath(),t.restore());(d=this.dashEnabled())&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),d&&(this.attrs.dashEnabled=!0)},l.prototype.getSelfRect=function(){var t=p.prototype.getSelfRect.call(this),e=this.pointerWidth()/2;return{x:t.x-e,y:t.y-e,width:t.width+2*e,height:t.height+2*e}},l);function l(){return null!==p&&p.apply(this,arguments)||this}(i.Arrow=o).prototype.className="Arrow",t._registerNode(o),a.Factory.addGetterSetter(o,"pointerLength",10,h.getNumberValidator()),a.Factory.addGetterSetter(o,"pointerWidth",10,h.getNumberValidator()),a.Factory.addGetterSetter(o,"pointerAtBeginning",!1),r.Collection.mapMethods(o)},{"../Factory":8,"../Global":10,"../Util":18,"../Validators":19,"./Line":48}],44:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.Circle=void 0;var r,a=t("../Util"),s=t("../Factory"),h=t("../Shape"),l=t("../Validators");t=t("../Global"),o=(o(d,r=h.Shape),d.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),t.closePath(),t.fillStrokeShape(this)},d.prototype.getWidth=function(){return 2*this.radius()},d.prototype.getHeight=function(){return 2*this.radius()},d.prototype.setWidth=function(t){this.radius()!==t/2&&this.radius(t/2)},d.prototype.setHeight=function(t){this.radius()!==t/2&&this.radius(t/2)},d);function d(){return null!==r&&r.apply(this,arguments)||this}(i.Circle=o).prototype._centroid=!0,o.prototype.className="Circle",o.prototype._attrsAffectingSize=["radius"],t._registerNode(o),s.Factory.addGetterSetter(o,"radius",0,l.getNumberValidator()),a.Collection.mapMethods(o)},{"../Factory":8,"../Global":10,"../Shape":15,"../Util":18,"../Validators":19}],45:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.Ellipse=void 0;var r,a=t("../Util"),s=t("../Factory"),h=t("../Shape"),l=t("../Validators");t=t("../Global"),o=(o(d,r=h.Shape),d.prototype._sceneFunc=function(t){var e=this.radiusX(),i=this.radiusY();t.beginPath(),t.save(),e!==i&&t.scale(1,i/e),t.arc(0,0,e,0,2*Math.PI,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)},d.prototype.getWidth=function(){return 2*this.radiusX()},d.prototype.getHeight=function(){return 2*this.radiusY()},d.prototype.setWidth=function(t){this.radiusX(t/2)},d.prototype.setHeight=function(t){this.radiusY(t/2)},d);function d(){return null!==r&&r.apply(this,arguments)||this}(i.Ellipse=o).prototype.className="Ellipse",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["radiusX","radiusY"],t._registerNode(o),s.Factory.addComponentsGetterSetter(o,"radius",["x","y"]),s.Factory.addGetterSetter(o,"radiusX",0,l.getNumberValidator()),s.Factory.addGetterSetter(o,"radiusY",0,l.getNumberValidator()),a.Collection.mapMethods(o)},{"../Factory":8,"../Global":10,"../Shape":15,"../Util":18,"../Validators":19}],46:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.Image=void 0;var r,a=t("../Util"),s=t("../Factory"),h=t("../Shape"),l=t("../Validators");t=t("../Global"),o=(o(d,r=h.Shape),d.prototype._useBufferCanvas=function(){return r.prototype._useBufferCanvas.call(this,!0)},d.prototype._sceneFunc=function(t){var e,i,n=this.getWidth(),o=this.getHeight(),r=this.attrs.image;r&&(e=this.attrs.cropWidth,i=this.attrs.cropHeight,i=e&&i?[r,this.cropX(),this.cropY(),e,i,0,0,n,o]:[r,0,0,n,o]),(this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,n,o),t.closePath(),t.fillStrokeShape(this)),r&&t.drawImage.apply(t,i)},d.prototype._hitFunc=function(t){var e=this.width(),i=this.height();t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)},d.prototype.getWidth=function(){var t;return null!==(t=this.attrs.width)&&void 0!==t?t:(null===(t=this.image())||void 0===t?void 0:t.width)||0},d.prototype.getHeight=function(){var t;return null!==(t=this.attrs.height)&&void 0!==t?t:(null===(t=this.image())||void 0===t?void 0:t.height)||0},d.fromURL=function(t,e){var i=a.Util.createImageElement();i.onload=function(){var t=new d({image:i});e(t)},i.crossOrigin="Anonymous",i.src=t},d);function d(){return null!==r&&r.apply(this,arguments)||this}(i.Image=o).prototype.className="Image",t._registerNode(o),s.Factory.addGetterSetter(o,"image"),s.Factory.addComponentsGetterSetter(o,"crop",["x","y","width","height"]),s.Factory.addGetterSetter(o,"cropX",0,l.getNumberValidator()),s.Factory.addGetterSetter(o,"cropY",0,l.getNumberValidator()),s.Factory.addGetterSetter(o,"cropWidth",0,l.getNumberValidator()),s.Factory.addGetterSetter(o,"cropHeight",0,l.getNumberValidator()),a.Collection.mapMethods(o)},{"../Factory":8,"../Global":10,"../Shape":15,"../Util":18,"../Validators":19}],47:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.Tag=i.Label=void 0;var r,a=t("../Util"),s=t("../Factory"),h=t("../Shape"),l=t("../Group"),d=t("../Validators"),p=(t=t("../Global"),["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height"]),c="right",u="down",f="left",g=p.length;l=(o(_,r=l.Group),_.prototype.getText=function(){return this.find("Text")[0]},_.prototype.getTag=function(){return this.find("Tag")[0]},_.prototype._addListeners=function(t){for(var e=this,i=function(){e._sync()},n=0;n<g;n++)t.on(p[n]+"Change.konva",i)},_.prototype.getWidth=function(){return this.getText().width()},_.prototype.getHeight=function(){return this.getText().height()},_.prototype._sync=function(){var t,e,i,n,o,r,a,s=this.getText(),h=this.getTag();if(s&&h){switch(t=s.width(),e=s.height(),i=h.pointerDirection(),n=h.pointerWidth(),a=h.pointerHeight(),r=o=0,i){case"up":o=t/2,r=-1*a;break;case c:o=t+n,r=e/2;break;case u:o=t/2,r=e+a;break;case f:o=-1*n,r=e/2}h.setAttrs({x:-1*o,y:-1*r,width:t,height:e}),s.setAttrs({x:-1*o,y:-1*r})}},_);function _(t){return(t=r.call(this,t)||this).on("add.konva",(function(t){this._addListeners(t.child),this._sync()})),t}(i.Label=l).prototype.className="Label",t._registerNode(l),a.Collection.mapMethods(l);var y;o=(o(m,y=h.Shape),m.prototype._sceneFunc=function(t){var e=this.width(),i=this.height(),n=this.pointerDirection(),o=this.pointerWidth(),r=this.pointerHeight(),a=this.cornerRadius(),s=0,h=0,l=0,d=0;"number"==typeof a?s=h=l=d=Math.min(a,e/2,i/2):(s=Math.min(a[0]||0,e/2,i/2),h=Math.min(a[1]||0,e/2,i/2),d=Math.min(a[2]||0,e/2,i/2),l=Math.min(a[3]||0,e/2,i/2)),t.beginPath(),t.moveTo(s,0),"up"===n&&(t.lineTo((e-o)/2,0),t.lineTo(e/2,-1*r),t.lineTo((e+o)/2,0)),t.lineTo(e-h,0),t.arc(e-h,h,h,3*Math.PI/2,0,!1),n===c&&(t.lineTo(e,(i-r)/2),t.lineTo(e+o,i/2),t.lineTo(e,(i+r)/2)),t.lineTo(e,i-d),t.arc(e-d,i-d,d,0,Math.PI/2,!1),n===u&&(t.lineTo((e+o)/2,i),t.lineTo(e/2,i+r),t.lineTo((e-o)/2,i)),t.lineTo(l,i),t.arc(l,i-l,l,Math.PI/2,Math.PI,!1),n===f&&(t.lineTo(0,(i+r)/2),t.lineTo(-1*o,i/2),t.lineTo(0,(i-r)/2)),t.lineTo(0,s),t.arc(s,s,s,Math.PI,3*Math.PI/2,!1),t.closePath(),t.fillStrokeShape(this)},m.prototype.getSelfRect=function(){var t=0,e=0,i=this.pointerWidth(),n=this.pointerHeight(),o=this.pointerDirection(),r=this.width(),a=this.height();return"up"===o?(e-=n,a+=n):o===u?a+=n:o===f?(t-=1.5*i,r+=i):o===c&&(r+=1.5*i),{x:t,y:e,width:r,height:a}},m);function m(){return null!==y&&y.apply(this,arguments)||this}(i.Tag=o).prototype.className="Tag",t._registerNode(o),s.Factory.addGetterSetter(o,"pointerDirection","none"),s.Factory.addGetterSetter(o,"pointerWidth",0,d.getNumberValidator()),s.Factory.addGetterSetter(o,"pointerHeight",0,d.getNumberValidator()),s.Factory.addGetterSetter(o,"cornerRadius",0,d.getNumberOrArrayOfNumbersValidator(4)),a.Collection.mapMethods(o)},{"../Factory":8,"../Global":10,"../Group":11,"../Shape":15,"../Util":18,"../Validators":19}],48:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),h=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,o++)n[o]=r[a];return n};Object.defineProperty(i,"__esModule",{value:!0}),i.Line=void 0;var r,a=t("../Util"),s=t("../Factory"),l=t("../Shape"),d=t("../Validators");t=t("../Global"),o=(o(p,r=l.Shape),p.prototype._sceneFunc=function(t){var e,i,n,o=this.points(),r=o.length,a=this.tension(),s=this.closed(),h=this.bezier();if(r){if(t.beginPath(),t.moveTo(o[0],o[1]),0!==a&&4<r){for(i=(e=this.getTensionPoints()).length,n=s?0:4,s||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);n<i-2;)t.bezierCurveTo(e[n++],e[n++],e[n++],e[n++],e[n++],e[n++]);s||t.quadraticCurveTo(e[i-2],e[i-1],o[r-2],o[r-1])}else if(h)for(n=2;n<r;)t.bezierCurveTo(o[n++],o[n++],o[n++],o[n++],o[n++],o[n++]);else for(n=2;n<r;n+=2)t.lineTo(o[n],o[n+1]);s?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}},p.prototype.getTensionPoints=function(){return this._getCache("tensionPoints",this._getTensionPoints)},p.prototype._getTensionPoints=function(){return this.closed()?this._getTensionPointsClosed():a.Util._expandPoints(this.points(),this.tension())},p.prototype._getTensionPointsClosed=function(){var t=this.points(),e=t.length,i=this.tension(),n=a.Util._getControlPoints(t[e-2],t[e-1],t[0],t[1],t[2],t[3],i),o=a.Util._getControlPoints(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],i);i=a.Util._expandPoints(t,i);return[n[2],n[3]].concat(i).concat([o[0],o[1],t[e-2],t[e-1],o[2],o[3],n[0],n[1],t[0],t[1]])},p.prototype.getWidth=function(){return this.getSelfRect().width},p.prototype.getHeight=function(){return this.getSelfRect().height},p.prototype.getSelfRect=function(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};for(var e,i,n=(t=0!==this.tension()?h([t[0],t[1]],this._getTensionPoints(),[t[t.length-2],t[t.length-1]]):this.points())[0],o=t[0],r=t[1],a=t[1],s=0;s<t.length/2;s++)e=t[2*s],i=t[2*s+1],n=Math.min(n,e),o=Math.max(o,e),r=Math.min(r,i),a=Math.max(a,i);return{x:n,y:r,width:o-n,height:a-r}},p);function p(t){return(t=r.call(this,t)||this).on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",(function(){this._clearCache("tensionPoints")})),t}(i.Line=o).prototype.className="Line",o.prototype._attrsAffectingSize=["points","bezier","tension"],t._registerNode(o),s.Factory.addGetterSetter(o,"closed",!1),s.Factory.addGetterSetter(o,"bezier",!1),s.Factory.addGetterSetter(o,"tension",0,d.getNumberValidator()),s.Factory.addGetterSetter(o,"points",[],d.getNumberArrayValidator()),a.Collection.mapMethods(o)},{"../Factory":8,"../Global":10,"../Shape":15,"../Util":18,"../Validators":19}],49:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.Path=void 0;var r,a=t("../Util"),s=t("../Factory"),h=t("../Shape");t=t("../Global"),o=(o(u,r=h.Shape),u.prototype._sceneFunc=function(t){var e=this.dataArray;t.beginPath();for(var i=!1,n=0;n<e.length;n++){var o=e[n].command,r=e[n].points;switch(o){case"L":t.lineTo(r[0],r[1]);break;case"M":t.moveTo(r[0],r[1]);break;case"C":t.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);break;case"Q":t.quadraticCurveTo(r[0],r[1],r[2],r[3]);break;case"A":var a=r[0],s=r[1],h=r[2],l=r[3],d=r[4],p=r[5],c=r[6],u=r[7],f=l<h?h:l,g=l<h?1:h/l;h=l<h?l/h:1;t.translate(a,s),t.rotate(c),t.scale(g,h),t.arc(0,0,f,d,d+p,1-u),t.scale(1/g,1/h),t.rotate(-c),t.translate(-a,-s);break;case"z":i=!0,t.closePath()}}i||this.hasFill()?t.fillStrokeShape(this):t.strokeShape(this)},u.prototype.getSelfRect=function(){var s=[];this.dataArray.forEach((function(t){if("A"===t.command){var e=t.points[4],i=t.points[5],n=t.points[4]+i,o=Math.PI/180;if(Math.abs(e-n)<o&&(o=Math.abs(e-n)),i<0)for(var r=e-o;n<r;r-=o){var a=u.getPointOnEllipticalArc(t.points[0],t.points[1],t.points[2],t.points[3],r,0);s.push(a.x,a.y)}else for(r=e+o;r<n;r+=o){a=u.getPointOnEllipticalArc(t.points[0],t.points[1],t.points[2],t.points[3],r,0);s.push(a.x,a.y)}}else if("C"===t.command)for(r=0;r<=1;r+=.01){a=u.getPointOnCubicBezier(r,t.start.x,t.start.y,t.points[0],t.points[1],t.points[2],t.points[3],t.points[4],t.points[5]);s.push(a.x,a.y)}else s=s.concat(t.points)}));for(var t,e,i=s[0],n=s[0],o=s[1],r=s[1],a=0;a<s.length/2;a++)t=s[2*a],e=s[2*a+1],isNaN(t)||(i=Math.min(i,t),n=Math.max(n,t)),isNaN(e)||(o=Math.min(o,e),r=Math.max(r,e));return{x:Math.round(i),y:Math.round(o),width:Math.round(n-i),height:Math.round(r-o)}},u.prototype.getLength=function(){return this.pathLength},u.prototype.getPointAtLength=function(t){var e,i=0,n=this.dataArray.length;if(!n)return null;for(;i<n&&t>this.dataArray[i].pathLength;)t-=this.dataArray[i].pathLength,++i;if(i===n)return{x:(e=this.dataArray[i-1].points.slice(-2))[0],y:e[1]};if(t<.01)return{x:(e=this.dataArray[i].points.slice(0,2))[0],y:e[1]};var o=this.dataArray[i],r=o.points;switch(o.command){case"L":return u.getPointOnLine(t,o.start.x,o.start.y,r[0],r[1]);case"C":return u.getPointOnCubicBezier(t/o.pathLength,o.start.x,o.start.y,r[0],r[1],r[2],r[3],r[4],r[5]);case"Q":return u.getPointOnQuadraticBezier(t/o.pathLength,o.start.x,o.start.y,r[0],r[1],r[2],r[3]);case"A":var a=r[0],s=r[1],h=r[2],l=r[3],d=r[4],p=r[5],c=r[6];return d+=p*t/o.pathLength,u.getPointOnEllipticalArc(a,s,h,l,d,c)}return null},u.getLineLength=function(t,e,i,n){return Math.sqrt((i-t)*(i-t)+(n-e)*(n-e))},u.getPointOnLine=function(t,e,i,n,o,r,a){void 0===r&&(r=e),void 0===a&&(a=i);var s=(o-i)/(n-e+1e-8),h=Math.sqrt(t*t/(1+s*s));n<e&&(h*=-1);var l,d,p=s*h;return p=n===e?{x:r,y:a+p}:(a-i)/(r-e+1e-8)==s?{x:r+h,y:a+p}:(d=this.getLineLength(e,i,n,o),l=(r-e)*(n-e)+(a-i)*(o-i),i=this.getLineLength(r,a,d=e+(l/=d*d)*(n-e),o=i+l*(o-i)),i=Math.sqrt(t*t-i*i),h=Math.sqrt(i*i/(1+s*s)),n<e&&(h*=-1),{x:d+h,y:o+(p=s*h)})},u.getPointOnCubicBezier=function(t,e,i,n,o,r,a,s,h){function l(t){return t*t*t}function d(t){return 3*t*t*(1-t)}function p(t){return 3*t*(1-t)*(1-t)}function c(t){return(1-t)*(1-t)*(1-t)}return{x:s*l(t)+r*d(t)+n*p(t)+e*c(t),y:h*l(t)+a*d(t)+o*p(t)+i*c(t)}},u.getPointOnQuadraticBezier=function(t,e,i,n,o,r,a){function s(t){return t*t}function h(t){return 2*t*(1-t)}function l(t){return(1-t)*(1-t)}return{x:r*s(t)+n*h(t)+e*l(t),y:a*s(t)+o*h(t)+i*l(t)}},u.getPointOnEllipticalArc=function(t,e,i,n,o,r){var a=Math.cos(r);r=Math.sin(r);return{x:t+((i=i*Math.cos(o))*a-(o=n*Math.sin(o))*r),y:e+(i*r+o*a)}},u.parsePathData=function(t){if(!t)return[];for(var e=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"],i=(i=t).replace(new RegExp(" ","g"),","),n=0;n<e.length;n++)i=i.replace(new RegExp(e[n],"g"),"|"+e[n]);var o,r=i.split("|"),a=[],s=[],h=0,l=0,d=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(n=1;n<r.length;n++){var p=(c=r[n]).charAt(0),c=c.slice(1);for(s.length=0;o=d.exec(c);)s.push(o[0]);for(var u=[],f=0,g=s.length;f<g;f++){var _=parseFloat(s[f]);isNaN(_)?u.push(0):u.push(_)}for(;0<u.length&&!isNaN(u[0]);){var y,m,v,b,w,S,x,T,P,k,C=null,A=[],M=h,F=l;switch(p){case"l":h+=u.shift(),l+=u.shift(),C="L",A.push(h,l);break;case"L":h=u.shift(),l=u.shift(),A.push(h,l);break;case"m":var L=u.shift(),E=u.shift();if(h+=L,l+=E,C="M",2<a.length&&"z"===a[a.length-1].command)for(var O=a.length-2;0<=O;O--)if("M"===a[O].command){h=a[O].points[0]+L,l=a[O].points[1]+E;break}A.push(h,l),p="l";break;case"M":h=u.shift(),l=u.shift(),C="M",A.push(h,l),p="L";break;case"h":h+=u.shift(),C="L",A.push(h,l);break;case"H":h=u.shift(),C="L",A.push(h,l);break;case"v":l+=u.shift(),C="L",A.push(h,l);break;case"V":l=u.shift(),C="L",A.push(h,l);break;case"C":A.push(u.shift(),u.shift(),u.shift(),u.shift()),h=u.shift(),l=u.shift(),A.push(h,l);break;case"c":A.push(h+u.shift(),l+u.shift(),h+u.shift(),l+u.shift()),h+=u.shift(),l+=u.shift(),C="C",A.push(h,l);break;case"S":m=h,v=l,"C"===(y=a[a.length-1]).command&&(m=h+(h-y.points[2]),v=l+(l-y.points[3])),A.push(m,v,u.shift(),u.shift()),h=u.shift(),l=u.shift(),C="C",A.push(h,l);break;case"s":m=h,v=l,"C"===(y=a[a.length-1]).command&&(m=h+(h-y.points[2]),v=l+(l-y.points[3])),A.push(m,v,h+u.shift(),l+u.shift()),h+=u.shift(),l+=u.shift(),C="C",A.push(h,l);break;case"Q":A.push(u.shift(),u.shift()),h=u.shift(),l=u.shift(),A.push(h,l);break;case"q":A.push(h+u.shift(),l+u.shift()),h+=u.shift(),l+=u.shift(),C="Q",A.push(h,l);break;case"T":m=h,v=l,"Q"===(y=a[a.length-1]).command&&(m=h+(h-y.points[0]),v=l+(l-y.points[1])),h=u.shift(),l=u.shift(),C="Q",A.push(m,v,h,l);break;case"t":m=h,v=l,"Q"===(y=a[a.length-1]).command&&(m=h+(h-y.points[0]),v=l+(l-y.points[1])),h+=u.shift(),l+=u.shift(),C="Q",A.push(m,v,h,l);break;case"A":b=u.shift(),w=u.shift(),S=u.shift(),x=u.shift(),T=u.shift(),P=h,k=l,h=u.shift(),l=u.shift(),C="A",A=this.convertEndpointToCenterParameterization(P,k,h,l,x,T,b,w,S);break;case"a":b=u.shift(),w=u.shift(),S=u.shift(),x=u.shift(),T=u.shift(),P=h,k=l,h+=u.shift(),l+=u.shift(),C="A",A=this.convertEndpointToCenterParameterization(P,k,h,l,x,T,b,w,S)}a.push({command:C||p,points:A,start:{x:M,y:F},pathLength:this.calcLength(M,F,C||p,A)})}"z"!==p&&"Z"!==p||a.push({command:"z",points:[],start:void 0,pathLength:0})}return a},u.calcLength=function(t,e,i,n){var o,r,a,s=u;switch(i){case"L":return s.getLineLength(t,e,n[0],n[1]);case"C":for(o=s.getPointOnCubicBezier(h=0,t,e,n[0],n[1],n[2],n[3],n[4],n[5]),a=.01;a<=1;a+=.01)r=s.getPointOnCubicBezier(a,t,e,n[0],n[1],n[2],n[3],n[4],n[5]),h+=s.getLineLength(o.x,o.y,r.x,r.y),o=r;return h;case"Q":for(o=s.getPointOnQuadraticBezier(h=0,t,e,n[0],n[1],n[2],n[3]),a=.01;a<=1;a+=.01)r=s.getPointOnQuadraticBezier(a,t,e,n[0],n[1],n[2],n[3]),h+=s.getLineLength(o.x,o.y,r.x,r.y),o=r;return h;case"A":var h=0,l=n[4],d=n[5],p=n[4]+d,c=Math.PI/180;if(Math.abs(l-p)<c&&(c=Math.abs(l-p)),o=s.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),d<0)for(a=l-c;p<a;a-=c)r=s.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],a,0),h+=s.getLineLength(o.x,o.y,r.x,r.y),o=r;else for(a=l+c;a<p;a+=c)r=s.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],a,0),h+=s.getLineLength(o.x,o.y,r.x,r.y),o=r;return r=s.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],p,0),h+s.getLineLength(o.x,o.y,r.x,r.y)}return 0},u.convertEndpointToCenterParameterization=function(t,e,i,n,o,r,a,s,h){var l=h*(Math.PI/180),d=Math.cos(l)*(t-i)/2+Math.sin(l)*(e-n)/2,p=-1*Math.sin(l)*(t-i)/2+Math.cos(l)*(e-n)/2,c=d*d/(a*a)+p*p/(s*s);1<c&&(a*=Math.sqrt(c),s*=Math.sqrt(c));h=Math.sqrt((a*a*(s*s)-a*a*(p*p)-s*s*(d*d))/(a*a*(p*p)+s*s*(d*d)));o===r&&(h*=-1);function u(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function f(t,e){return(t[0]*e[0]+t[1]*e[1])/(u(t)*u(e))}c=(h=isNaN(h)?0:h)*a*p/s,o=h*-s*d/a,h=(t+i)/2+Math.cos(l)*c-Math.sin(l)*o,t=(e+n)/2+Math.sin(l)*c+Math.cos(l)*o,e=(i=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(f(t,e))})([1,0],[(d-c)/a,(p-o)/s]),i=i(n=[(d-c)/a,(p-o)/s],o=[(-1*d-c)/a,(-1*p-o)/s]);return f(n,o)<=-1&&(i=Math.PI),1<=f(n,o)&&(i=0),0===r&&0<i&&(i-=2*Math.PI),1===r&&i<0&&(i+=2*Math.PI),[h,t,a,s,e,i,l,r]},u);function u(t){var e=r.call(this,t)||this;e.dataArray=[],e.pathLength=0,e.dataArray=u.parsePathData(e.data());for(var i=e.pathLength=0;i<e.dataArray.length;++i)e.pathLength+=e.dataArray[i].pathLength;return e.on("dataChange.konva",(function(){this.dataArray=u.parsePathData(this.data());for(var t=this.pathLength=0;t<this.dataArray.length;++t)this.pathLength+=this.dataArray[t].pathLength})),e}(i.Path=o).prototype.className="Path",o.prototype._attrsAffectingSize=["data"],t._registerNode(o),s.Factory.addGetterSetter(o,"data"),a.Collection.mapMethods(o)},{"../Factory":8,"../Global":10,"../Shape":15,"../Util":18}],50:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.Rect=void 0;var r,a=t("../Util"),s=t("../Factory"),h=t("../Shape"),l=t("../Global");t=t("../Validators"),o=(o(d,r=h.Shape),d.prototype._sceneFunc=function(t){var e,i,n,o,r=this.cornerRadius(),a=this.width(),s=this.height();t.beginPath(),r?(o=n=i=e=0,"number"==typeof r?e=i=n=o=Math.min(r,a/2,s/2):(e=Math.min(r[0]||0,a/2,s/2),i=Math.min(r[1]||0,a/2,s/2),o=Math.min(r[2]||0,a/2,s/2),n=Math.min(r[3]||0,a/2,s/2)),t.moveTo(e,0),t.lineTo(a-i,0),t.arc(a-i,i,i,3*Math.PI/2,0,!1),t.lineTo(a,s-o),t.arc(a-o,s-o,o,0,Math.PI/2,!1),t.lineTo(n,s),t.arc(n,s-n,n,Math.PI/2,Math.PI,!1),t.lineTo(0,e),t.arc(e,e,e,Math.PI,3*Math.PI/2,!1)):t.rect(0,0,a,s),t.closePath(),t.fillStrokeShape(this)},d);function d(){return null!==r&&r.apply(this,arguments)||this}(i.Rect=o).prototype.className="Rect",l._registerNode(o),s.Factory.addGetterSetter(o,"cornerRadius",0,t.getNumberOrArrayOfNumbersValidator(4)),a.Collection.mapMethods(o)},{"../Factory":8,"../Global":10,"../Shape":15,"../Util":18,"../Validators":19}],51:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.RegularPolygon=void 0;var r,a=t("../Util"),s=t("../Factory"),h=t("../Shape"),l=t("../Validators");t=t("../Global"),o=(o(d,r=h.Shape),d.prototype._sceneFunc=function(t){var e=this._getPoints();t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var i=1;i<e.length;i++)t.lineTo(e[i].x,e[i].y);t.closePath(),t.fillStrokeShape(this)},d.prototype._getPoints=function(){for(var t=this.attrs.sides,e=this.attrs.radius||0,i=[],n=0;n<t;n++)i.push({x:e*Math.sin(2*n*Math.PI/t),y:-1*e*Math.cos(2*n*Math.PI/t)});return i},d.prototype.getSelfRect=function(){var t=this._getPoints(),e=t[0].x,i=t[0].y,n=t[0].x,o=t[0].y;return t.forEach((function(t){e=Math.min(e,t.x),i=Math.max(i,t.x),n=Math.min(n,t.y),o=Math.max(o,t.y)})),{x:e,y:n,width:i-e,height:o-n}},d.prototype.getWidth=function(){return 2*this.radius()},d.prototype.getHeight=function(){return 2*this.radius()},d.prototype.setWidth=function(t){this.radius(t/2)},d.prototype.setHeight=function(t){this.radius(t/2)},d);function d(){return null!==r&&r.apply(this,arguments)||this}(i.RegularPolygon=o).prototype.className="RegularPolygon",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["radius"],t._registerNode(o),s.Factory.addGetterSetter(o,"radius",0,l.getNumberValidator()),s.Factory.addGetterSetter(o,"sides",0,l.getNumberValidator()),a.Collection.mapMethods(o)},{"../Factory":8,"../Global":10,"../Shape":15,"../Util":18,"../Validators":19}],52:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.Ring=void 0;var r,a=t("../Util"),s=t("../Factory"),h=t("../Shape"),l=t("../Validators"),d=(t=t("../Global"),2*Math.PI);o=(o(p,r=h.Shape),p.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,d,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),d,0,!0),t.closePath(),t.fillStrokeShape(this)},p.prototype.getWidth=function(){return 2*this.outerRadius()},p.prototype.getHeight=function(){return 2*this.outerRadius()},p.prototype.setWidth=function(t){this.outerRadius(t/2)},p.prototype.setHeight=function(t){this.outerRadius(t/2)},p);function p(){return null!==r&&r.apply(this,arguments)||this}(i.Ring=o).prototype.className="Ring",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["innerRadius","outerRadius"],t._registerNode(o),s.Factory.addGetterSetter(o,"innerRadius",0,l.getNumberValidator()),s.Factory.addGetterSetter(o,"outerRadius",0,l.getNumberValidator()),a.Collection.mapMethods(o)},{"../Factory":8,"../Global":10,"../Shape":15,"../Util":18,"../Validators":19}],53:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.Sprite=void 0;var r,a=t("../Util"),s=t("../Factory"),h=t("../Shape"),l=t("../Animation"),d=t("../Validators");t=t("../Global"),o=(o(p,r=h.Shape),p.prototype._sceneFunc=function(t){var e=this.animation(),i=this.frameIndex(),n=4*i,o=this.animations()[e],r=this.frameOffsets(),a=o[0+n],s=o[1+n],h=o[2+n];o=o[3+n],n=this.image();(this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,h,o),t.closePath(),t.fillStrokeShape(this)),n&&(r?(e=r[e],t.drawImage(n,a,s,h,o,e[0+(i*=2)],e[1+i],h,o)):t.drawImage(n,a,s,h,o,0,0,h,o))},p.prototype._hitFunc=function(t){var e=this.animation(),i=this.frameIndex(),n=4*i,o=this.animations()[e],r=this.frameOffsets(),a=o[2+n];n=o[3+n];t.beginPath(),r?(e=r[e],t.rect(e[0+(i*=2)],e[1+i],a,n)):t.rect(0,0,a,n),t.closePath(),t.fillShape(this)},p.prototype._useBufferCanvas=function(){return r.prototype._useBufferCanvas.call(this,!0)},p.prototype._setInterval=function(){var t=this;this.interval=setInterval((function(){t._updateIndex()}),1e3/this.frameRate())},p.prototype.start=function(){var t;this.isRunning()||(t=this.getLayer(),this.anim.setLayers(t),this._setInterval(),this.anim.start())},p.prototype.stop=function(){this.anim.stop(),clearInterval(this.interval)},p.prototype.isRunning=function(){return this.anim.isRunning()},p.prototype._updateIndex=function(){var t=this.frameIndex(),e=this.animation();t<this.animations()[e].length/4-1?this.frameIndex(t+1):this.frameIndex(0)},p);function p(t){var e=r.call(this,t)||this;return e._updated=!0,e.anim=new l.Animation((function(){var t=e._updated;return e._updated=!1,t})),e.on("animationChange.konva",(function(){this.frameIndex(0)})),e.on("frameIndexChange.konva",(function(){this._updated=!0})),e.on("frameRateChange.konva",(function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})),e}(i.Sprite=o).prototype.className="Sprite",t._registerNode(o),s.Factory.addGetterSetter(o,"animation"),s.Factory.addGetterSetter(o,"animations"),s.Factory.addGetterSetter(o,"frameOffsets"),s.Factory.addGetterSetter(o,"image"),s.Factory.addGetterSetter(o,"frameIndex",0,d.getNumberValidator()),s.Factory.addGetterSetter(o,"frameRate",17,d.getNumberValidator()),s.Factory.backCompat(o,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),a.Collection.mapMethods(o)},{"../Animation":3,"../Factory":8,"../Global":10,"../Shape":15,"../Util":18,"../Validators":19}],54:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.Star=void 0;var r,a=t("../Util"),s=t("../Factory"),h=t("../Shape"),l=t("../Validators");t=t("../Global"),o=(o(d,r=h.Shape),d.prototype._sceneFunc=function(t){var e=this.innerRadius(),i=this.outerRadius(),n=this.numPoints();t.beginPath(),t.moveTo(0,0-i);for(var o=1;o<2*n;o++){var a=(r=o%2==0?i:e)*Math.sin(o*Math.PI/n),r=-1*r*Math.cos(o*Math.PI/n);t.lineTo(a,r)}t.closePath(),t.fillStrokeShape(this)},d.prototype.getWidth=function(){return 2*this.outerRadius()},d.prototype.getHeight=function(){return 2*this.outerRadius()},d.prototype.setWidth=function(t){this.outerRadius(t/2)},d.prototype.setHeight=function(t){this.outerRadius(t/2)},d);function d(){return null!==r&&r.apply(this,arguments)||this}(i.Star=o).prototype.className="Star",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["innerRadius","outerRadius"],t._registerNode(o),s.Factory.addGetterSetter(o,"numPoints",5,l.getNumberValidator()),s.Factory.addGetterSetter(o,"innerRadius",0,l.getNumberValidator()),s.Factory.addGetterSetter(o,"outerRadius",0,l.getNumberValidator()),a.Collection.mapMethods(o)},{"../Factory":8,"../Global":10,"../Shape":15,"../Util":18,"../Validators":19}],55:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.Text=i.stringToArray=void 0;var r=t("../Util"),a=t("../Factory"),s=t("../Shape"),h=t("../Global"),l=t("../Validators");t=t("../Global");function C(t){return Array.from(t)}i.stringToArray=C;var d,A="auto",M="justify",p="2d",c=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],u=c.length;function F(){return d=d||r.Util.createCanvasElement().getContext(p)}var f;o=(o(g,f=s.Shape),g.prototype._sceneFunc=function(t){var e=this.textArr,i=e.length;if(this.text()){var n,o=this.padding(),r=this.fontSize(),a=this.lineHeight()*r,s=this.verticalAlign(),h=0,l=this.align(),d=this.getWidth(),p=this.letterSpacing(),c=this.fill(),u=this.textDecoration(),f=-1!==u.indexOf("underline"),g=-1!==u.indexOf("line-through"),_=0,y=(_=a/2,0);for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline","middle"),t.setAttr("textAlign","left"),"middle"===s?h=(this.getHeight()-i*a-2*o)/2:"bottom"===s&&(h=this.getHeight()-i*a-2*o),t.translate(o,h+o),n=0;n<i;n++){y=0;var m,v,w=(b=e[n]).text,S=b.width,b=n!==i-1;if(t.save(),"right"===l?y+=d-S-2*o:"center"===l&&(y+=(d-S-2*o)/2),f&&(t.save(),t.beginPath(),t.moveTo(y,_+0+Math.round(r/2)),m=0==(x=w.split(" ").length-1),v=l===M&&b&&!m?d-2*o:S,t.lineTo(y+Math.round(v),_+0+Math.round(r/2)),t.lineWidth=r/15,t.strokeStyle=c,t.stroke(),t.restore()),g&&(t.save(),t.beginPath(),t.moveTo(y,_+0),m=0==(x=w.split(" ").length-1),v=l===M&&b&&!m?d-2*o:S,t.lineTo(y+Math.round(v),_+0),t.lineWidth=r/15,t.strokeStyle=c,t.stroke(),t.restore()),0!==p||l===M)for(var x=w.split(" ").length-1,T=C(w),P=0;P<T.length;P++){var k=T[P];" "===k&&n!==i-1&&l===M&&(y+=(d-2*o-S)/x),this._partialTextX=y,this._partialTextY=_+0,this._partialText=k,t.fillStrokeShape(this),y+=this.measureSize(k).width+p}else this._partialTextX=y,this._partialTextY=_+0,this._partialText=w,t.fillStrokeShape(this);t.restore(),1<i&&(_+=a)}}},g.prototype._hitFunc=function(t){var e=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)},g.prototype.setText=function(t){t=r.Util._isString(t)?t:null==t?"":t+"";return this._setAttr("text",t),this},g.prototype.getWidth=function(){return this.attrs.width===A||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width},g.prototype.getHeight=function(){return this.attrs.height===A||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height},g.prototype.getTextWidth=function(){return this.textWidth},g.prototype.getTextHeight=function(){return r.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},g.prototype.measureSize=function(t){var e=F(),i=this.fontSize();return e.save(),e.font=this._getContextFont(),t=e.measureText(t),e.restore(),{width:t.width,height:i}},g.prototype._getContextFont=function(){return h.Konva.UA.isIE?this.fontStyle()+" "+this.fontSize()+"px "+this.fontFamily():this.fontStyle()+" "+this.fontVariant()+" "+this.fontSize()+"px "+this.fontFamily().split(",").map((function(t){var e=0<=(t=t.trim()).indexOf(" "),i=0<=t.indexOf('"')||0<=t.indexOf("'");return e&&!i?'"'+t+'"':t})).join(", ")},g.prototype._addTextLine=function(t){this.align()===M&&(t=t.trim());var e=this._getTextWidth(t);return this.textArr.push({text:t,width:e})},g.prototype._getTextWidth=function(t){var e=this.letterSpacing(),i=t.length;return F().measureText(t).width+(i?e*(i-1):0)},g.prototype._setTextData=function(){var h,t=this.text().split("\n"),e=+this.fontSize(),i=0,n=this.lineHeight()*e,o=this.attrs.width,r=this.attrs.height,a=o!==A&&void 0!==o,s=r!==A&&void 0!==r,l=o-2*(h=this.padding()),d=r-2*h,p=0,c="none"!==(h=this.wrap()),u="char"!==h&&c,f=this.ellipsis();this.textArr=[],F().font=this._getContextFont();for(var g=f?this._getTextWidth("â€¦"):0,_=0,y=t.length;_<y;++_){var m=t[_],v=this._getTextWidth(m);if(a&&l<v)for(;0<m.length;){for(var b=0,w=m.length,S="",x=0;b<w;){var T=b+w>>>1,P=m.slice(0,1+T),k=this._getTextWidth(P)+g;k<=l?(b=1+T,S=P,x=k):w=T}if(!S)break;if(!u||0<(C=(" "===(C=m[S.length])||"-"===C)&&x<=l?S.length:Math.max(S.lastIndexOf(" "),S.lastIndexOf("-"))+1)&&(b=C,S=S.slice(0,b),x=this._getTextWidth(S)),S=S.trimRight(),this._addTextLine(S),i=Math.max(i,x),p+=n,!c||s&&d<p+n){var C=this.textArr[this.textArr.length-1];C&&f&&(this._getTextWidth(C.text+"â€¦")<l||(C.text=C.text.slice(0,C.text.length-3)),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(C.text+"â€¦"));break}if(0<(m=(m=m.slice(b)).trimLeft()).length&&(v=this._getTextWidth(m))<=l){this._addTextLine(m),p+=n,i=Math.max(i,v);break}}else this._addTextLine(m),p+=n,i=Math.max(i,v);if(s&&d<p+n)break}this.textHeight=e,this.textWidth=i},g.prototype.getStrokeScaleEnabled=function(){return!0},g);function g(t){var e=f.call(this,((t=(t=t)||{}).fillLinearGradientColorStops||t.fillRadialGradientColorStops||t.fillPatternImage||(t.fill=t.fill||"black"),t))||this;e._partialTextX=0;for(var i=e._partialTextY=0;i<u;i++)e.on(c[i]+"Change.konva",e._setTextData);return e._setTextData(),e}(i.Text=o).prototype._fillFunc=function(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)},o.prototype._strokeFunc=function(t){t.strokeText(this._partialText,this._partialTextX,this._partialTextY)},o.prototype.className="Text",o.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],t._registerNode(o),a.Factory.overWriteSetter(o,"width",l.getNumberOrAutoValidator()),a.Factory.overWriteSetter(o,"height",l.getNumberOrAutoValidator()),a.Factory.addGetterSetter(o,"fontFamily","Arial"),a.Factory.addGetterSetter(o,"fontSize",12,l.getNumberValidator()),a.Factory.addGetterSetter(o,"fontStyle","normal"),a.Factory.addGetterSetter(o,"fontVariant","normal"),a.Factory.addGetterSetter(o,"padding",0,l.getNumberValidator()),a.Factory.addGetterSetter(o,"align","left"),a.Factory.addGetterSetter(o,"verticalAlign","top"),a.Factory.addGetterSetter(o,"lineHeight",1,l.getNumberValidator()),a.Factory.addGetterSetter(o,"wrap","word"),a.Factory.addGetterSetter(o,"ellipsis",!1,l.getBooleanValidator()),a.Factory.addGetterSetter(o,"letterSpacing",0,l.getNumberValidator()),a.Factory.addGetterSetter(o,"text","",l.getStringValidator()),a.Factory.addGetterSetter(o,"textDecoration",""),r.Collection.mapMethods(o)},{"../Factory":8,"../Global":10,"../Shape":15,"../Util":18,"../Validators":19}],56:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.TextPath=void 0;var r=t("../Util"),a=t("../Factory"),s=t("../Shape"),w=t("./Path"),S=t("./Text"),h=t("../Validators");t=t("../Global");function l(t){t.fillText(this.partialText,0,0)}function d(t){t.strokeText(this.partialText,0,0)}var p;o=(o(c,p=s.Shape),c.prototype._sceneFunc=function(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var e=this.textDecoration(),i=this.fill(),n=this.fontSize(),o=this.glyphInfo;"underline"===e&&t.beginPath();for(var r=0;r<o.length;r++){t.save();var a=o[r].p0;t.translate(a.x,a.y),t.rotate(o[r].rotation),this.partialText=o[r].text,t.fillStrokeShape(this),"underline"===e&&(0===r&&t.moveTo(0,n/2+1),t.lineTo(n,n/2+1)),t.restore()}"underline"===e&&(t.strokeStyle=i,t.lineWidth=n/20,t.stroke()),t.restore()},c.prototype._hitFunc=function(t){t.beginPath();var e,i=this.glyphInfo;1<=i.length&&(e=i[0].p0,t.moveTo(e.x,e.y));for(var n=0;n<i.length;n++){var o=i[n].p1;t.lineTo(o.x,o.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()},c.prototype.getTextWidth=function(){return this.textWidth},c.prototype.getTextHeight=function(){return r.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},c.prototype.setText=function(t){return S.Text.prototype.setText.call(this,t)},c.prototype._getContextFont=function(){return S.Text.prototype._getContextFont.call(this)},c.prototype._getTextSize=function(t){var e=this.dummyCanvas.getContext("2d");e.save(),e.font=this._getContextFont();t=e.measureText(t);return e.restore(),{width:t.width,height:parseInt(this.attrs.fontSize,10)}},c.prototype._setTextData=function(){var l=this,t=this._getTextSize(this.attrs.text),d=this.letterSpacing(),p=this.align(),e=this.kerningFunc();this.textWidth=t.width,this.textHeight=t.height;var c=Math.max(this.textWidth+((this.attrs.text||"").length-1)*d,0);this.glyphInfo=[];for(var u=0,i=0;i<l.dataArray.length;i++)0<l.dataArray[i].pathLength&&(u+=l.dataArray[i].pathLength);t=0;"center"===p&&(t=Math.max(0,u/2-c/2)),"right"===p&&(t=Math.max(0,u-c));for(var f,g,_,n=S.stringToArray(this.text()),y=this.text().split(" ").length-1,m=-1,v=0,o=function(t){var e=l._getTextSize(t).width+d;" "===t&&"justify"===p&&(e+=(u-c)/y);var i=0,n=0;for(g=void 0;.01<Math.abs(e-i)/e&&n<20;){n++;for(var o=i;void 0===_;)(_=function(){v=0;for(var t=l.dataArray,e=m+1;e<t.length;e++){if(0<t[e].pathLength)return t[m=e];"M"===t[e].command&&(f={x:t[e].points[0],y:t[e].points[1]})}return{}}())&&o+_.pathLength<e&&(o+=_.pathLength,_=void 0);if(_==={}||void 0===f)return;var r=!1;switch(_.command){case"L":w.Path.getLineLength(f.x,f.y,_.points[0],_.points[1])>e?g=w.Path.getPointOnLine(e,f.x,f.y,_.points[0],_.points[1],f.x,f.y):_=void 0;break;case"A":var a=_.points[4],s=_.points[5],h=_.points[4]+s;0===v?v=a+1e-8:i<e?v+=Math.PI/180*s/Math.abs(s):v-=Math.PI/360*s/Math.abs(s),(s<0&&v<h||0<=s&&h<v)&&(v=h,r=!0),g=w.Path.getPointOnEllipticalArc(_.points[0],_.points[1],_.points[2],_.points[3],v,_.points[6]);break;case"C":0===v?v=e>_.pathLength?1e-8:e/_.pathLength:i<e?v+=(e-i)/_.pathLength/2:v=Math.max(v-(i-e)/_.pathLength/2,0),1<v&&(v=1,r=!0),g=w.Path.getPointOnCubicBezier(v,_.start.x,_.start.y,_.points[0],_.points[1],_.points[2],_.points[3],_.points[4],_.points[5]);break;case"Q":0===v?v=e/_.pathLength:i<e?v+=(e-i)/_.pathLength:v-=(i-e)/_.pathLength,1<v&&(v=1,r=!0),g=w.Path.getPointOnQuadraticBezier(v,_.start.x,_.start.y,_.points[0],_.points[1],_.points[2],_.points[3])}void 0!==g&&(i=w.Path.getLineLength(f.x,f.y,g.x,g.y)),r&&(r=!1,_=void 0)}},r=t/(l._getTextSize("C").width+d)-1,a=0;a<r&&(o("C"),void 0!==f&&void 0!==g);a++)f=g;for(var s=0;s<n.length&&(o(n[s]),void 0!==f&&void 0!==g);s++){var h=w.Path.getLineLength(f.x,f.y,g.x,g.y),b=0;if(e)try{b=e(n[s-1],n[s])*this.fontSize()}catch(t){b=0}f.x+=b,g.x+=b,this.textWidth+=b;b=w.Path.getPointOnLine(b+h/2,f.x,f.y,g.x,g.y),h=Math.atan2(g.y-f.y,g.x-f.x);this.glyphInfo.push({transposeX:b.x,transposeY:b.y,text:n[s],rotation:h,p0:f,p1:g}),f=g}},c.prototype.getSelfRect=function(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach((function(t){e.push(t.p0.x),e.push(t.p0.y),e.push(t.p1.x),e.push(t.p1.y)}));for(var t,i,n=e[0]||0,o=e[0]||0,r=e[1]||0,a=e[1]||0,s=0;s<e.length/2;s++)t=e[2*s],i=e[2*s+1],n=Math.min(n,t),o=Math.max(o,t),r=Math.min(r,i),a=Math.max(a,i);var h=this.fontSize();return{x:n-h/2,y:r-h/2,width:o-n+h,height:a-r+h}},c);function c(t){var e=p.call(this,t)||this;return e.dummyCanvas=r.Util.createCanvasElement(),e.dataArray=[],e.dataArray=w.Path.parsePathData(e.attrs.data),e.on("dataChange.konva",(function(){this.dataArray=w.Path.parsePathData(this.attrs.data),this._setTextData()})),e.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva",e._setTextData),t&&t.getKerning&&(r.Util.warn('getKerning TextPath API is deprecated. Please use "kerningFunc" instead.'),e.kerningFunc(t.getKerning)),e._setTextData(),e}(i.TextPath=o).prototype._fillFunc=l,o.prototype._strokeFunc=d,o.prototype._fillFuncHit=l,o.prototype._strokeFuncHit=d,o.prototype.className="TextPath",o.prototype._attrsAffectingSize=["text","fontSize","data"],t._registerNode(o),a.Factory.addGetterSetter(o,"data"),a.Factory.addGetterSetter(o,"fontFamily","Arial"),a.Factory.addGetterSetter(o,"fontSize",12,h.getNumberValidator()),a.Factory.addGetterSetter(o,"fontStyle","normal"),a.Factory.addGetterSetter(o,"align","left"),a.Factory.addGetterSetter(o,"letterSpacing",0,h.getNumberValidator()),a.Factory.addGetterSetter(o,"textBaseline","middle"),a.Factory.addGetterSetter(o,"fontVariant","normal"),a.Factory.addGetterSetter(o,"text",""),a.Factory.addGetterSetter(o,"textDecoration",null),a.Factory.addGetterSetter(o,"kerningFunc",null),r.Collection.mapMethods(o)},{"../Factory":8,"../Global":10,"../Shape":15,"../Util":18,"../Validators":19,"./Path":49,"./Text":55}],57:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(i,"__esModule",{value:!0}),i.Transformer=void 0;var h=t("../Util"),a=t("../Factory"),s=t("../Node"),l=t("../Shape"),d=t("./Rect"),p=t("../Group"),u=t("../Global"),c=t("../Validators"),f=(t=t("../Global"),"tr-konva"),g=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map((function(t){return t+"."+f})).join(" "),_=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"].map((function(t){return t+"."+f})).join(" "),y={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},m="ontouchstart"in u.Konva._global,v=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function b(t,e,i){var n=i.x+(t.x-i.x)*Math.cos(e)-(t.y-i.y)*Math.sin(e);i=i.y+(t.x-i.x)*Math.sin(e)+(t.y-i.y)*Math.cos(e);return r(r({},t),{rotation:t.rotation+e,x:n,y:i})}var S;o=(o(x,S=p.Group),x.prototype.attachTo=function(t){return this.setNode(t),this},x.prototype.setNode=function(t){return h.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])},x.prototype.getNode=function(){return this._nodes&&this._nodes[0]},x.prototype.setNodes=function(t){var n=this;return void 0===t&&(t=[]),this._nodes&&this._nodes.length&&this.detach(),1===(this._nodes=t).length?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach((function(t){function e(){1===n.nodes().length&&n.rotation(n.nodes()[0].getAbsoluteRotation()),n._resetTransformCache(),n._transforming||n.isDragging()||n.update()}var i=t._attrsAffectingSize.map((function(t){return t+"Change."+f})).join(" ");t.on(i,e),t.on(_,e),t.on("_clearTransformCache."+f,e),t.on("xChange."+f+" yChange."+f,e),n._proxyDrag(t)})),this._resetTransformCache(),!this.findOne(".top-left")||this.update(),this},x.prototype._proxyDrag=function(r){var e,a=this;r.on("dragstart."+f,(function(t){e=r.getAbsolutePosition(),a.isDragging()||r===a.findOne(".back")||a.startDrag(t,!1)})),r.on("dragmove."+f,(function(i){var t,n,o;e&&(t=r.getAbsolutePosition(),n=t.x-e.x,o=t.y-e.y,a.nodes().forEach((function(t){var e;t!==r&&(t.isDragging()||(e=t.getAbsolutePosition(),t.setAbsolutePosition({x:e.x+n,y:e.y+o}),t.startDrag(i)))})),e=null)}))},x.prototype.getNodes=function(){return this._nodes||[]},x.prototype.getActiveAnchor=function(){return this._movingAnchorName},x.prototype.detach=function(){this._nodes&&this._nodes.forEach((function(t){t.off("."+f)})),this._nodes=[],this._resetTransformCache()},x.prototype._resetTransformCache=function(){this._clearCache("nodesRect"),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")},x.prototype._getNodeRect=function(){return this._getCache("nodesRect",this.__getNodeRect)},x.prototype.__getNodeShape=function(t,e,i){void 0===e&&(e=this.rotation());var n=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),o=t.getAbsoluteScale(i),r=t.getAbsolutePosition(i),a=n.x*o.x-t.offsetX()*o.x;i=n.y*o.y-t.offsetY()*o.y,t=(u.Konva.getAngle(t.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return b({x:r.x+a*Math.cos(t)+i*Math.sin(-t),y:r.y+i*Math.cos(t)+a*Math.sin(t),width:n.width*o.x,height:n.height*o.y,rotation:t},-u.Konva.getAngle(e),{x:0,y:0})},x.prototype.__getNodeRect=function(){var n=this;if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};var o=[];this.nodes().map((function(t){var e=[{x:(e=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:n.ignoreStroke()})).x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],i=t.getAbsoluteTransform();e.forEach((function(t){t=i.point(t);o.push(t)}))}));var e,i,r,a,s=new h.Transform;s.rotate(-u.Konva.getAngle(this.rotation())),o.forEach((function(t){t=s.point(t);void 0===e&&(e=r=t.x,i=a=t.y),e=Math.min(e,t.x),i=Math.min(i,t.y),r=Math.max(r,t.x),a=Math.max(a,t.y)})),s.invert();var t=s.point({x:e,y:i});return{x:t.x,y:t.y,width:r-e,height:a-i,rotation:u.Konva.getAngle(this.rotation())}},x.prototype.getX=function(){return this._getNodeRect().x},x.prototype.getY=function(){return this._getNodeRect().y},x.prototype.getWidth=function(){return this._getNodeRect().width},x.prototype.getHeight=function(){return this._getNodeRect().height},x.prototype._createElements=function(){this._createBack(),v.forEach(function(t){this._createAnchor(t)}.bind(this)),this._createAnchor("rotater")},x.prototype._createAnchor=function(i){var n=this,o=new d.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:i+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:m?10:"auto"}),e=this;o.on("mousedown touchstart",(function(t){e._handleMouseDown(t)})),o.on("dragstart",(function(t){o.stopDrag(),t.cancelBubble=!0})),o.on("dragend",(function(t){t.cancelBubble=!0})),o.on("mouseenter",(function(){var e=u.Konva.getAngle(n.rotation()),t=(t=e,"rotater"===(e=i)?"crosshair":(t+=h.Util._degToRad(y[e]||0),t=(h.Util._radToDeg(t)%360+360)%360,h.Util._inRange(t,337.5,360)||h.Util._inRange(t,0,22.5)?"ns-resize":h.Util._inRange(t,22.5,67.5)?"nesw-resize":h.Util._inRange(t,67.5,112.5)?"ew-resize":h.Util._inRange(t,112.5,157.5)?"nwse-resize":h.Util._inRange(t,157.5,202.5)?"ns-resize":h.Util._inRange(t,202.5,247.5)?"nesw-resize":h.Util._inRange(t,247.5,292.5)?"ew-resize":h.Util._inRange(t,292.5,337.5)?"nwse-resize":(h.Util.error("Transformer has unknown angle for cursor detection: "+t),"pointer")));o.getStage().content.style.cursor=t,n._cursorChange=!0})),o.on("mouseout",(function(){o.getStage().content.style.cursor="",n._cursorChange=!1})),this.add(o)},x.prototype._createBack=function(){var n=this,t=new l.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc:function(t){var e=this.getParent(),i=e.padding();t.beginPath(),t.rect(-i,-i,this.width()+2*i,this.height()+2*i),t.moveTo(this.width()/2,-i),e.rotateEnabled()&&t.lineTo(this.width()/2,-e.rotateAnchorOffset()*h.Util._sign(this.height())-i),t.fillStrokeShape(this)},hitFunc:function(t,e){var i;n.shouldOverdrawWholeArea()&&(i=n.padding(),t.beginPath(),t.rect(-i,-i,e.width()+2*i,e.height()+2*i),t.fillStrokeShape(e))}});this.add(t),this._proxyDrag(t),t.on("dragstart",(function(t){t.cancelBubble=!0})),t.on("dragmove",(function(t){t.cancelBubble=!0})),t.on("dragend",(function(t){t.cancelBubble=!0}))},x.prototype._handleMouseDown=function(e){this._movingAnchorName=e.target.name().split(" ")[0];var i=(t=this._getNodeRect()).width,n=t.height,t=Math.sqrt(Math.pow(i,2)+Math.pow(n,2));this.sin=Math.abs(n/t),this.cos=Math.abs(i/t),window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0),this._transforming=!0;i=e.target.getAbsolutePosition(),t=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:t.x-i.x,y:t.y-i.y},this._fire("transformstart",{evt:e,target:this.getNode()}),this._nodes.forEach((function(t){t._fire("transformstart",{evt:e,target:t})}))},x.prototype._handleMouseMove=function(t){var e=this.findOne("."+this._movingAnchorName);(i=e.getStage()).setPointersPositions(t);var i={x:(n=i.getPointerPosition()).x-this._anchorDragOffset.x,y:n.y-this._anchorDragOffset.y},n=e.getAbsolutePosition();e.setAbsolutePosition(i);var o,r,a,s,h,l,d,p,c;i=e.getAbsolutePosition();n.x===i.x&&n.y===i.y||("rotater"!==this._movingAnchorName?(n=this.keepRatio()||t.shiftKey,i=this.centeredScaling()||t.altKey,"top-left"===this._movingAnchorName?n&&(h=i?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()},a=Math.sqrt(Math.pow(h.x-e.x(),2)+Math.pow(h.y-e.y(),2)),r=this.findOne(".top-left").x()>h.x?-1:1,s=this.findOne(".top-left").y()>h.y?-1:1,d=a*this.cos*r,p=a*this.sin*s,this.findOne(".top-left").x(h.x-d),this.findOne(".top-left").y(h.y-p)):"top-center"===this._movingAnchorName?this.findOne(".top-left").y(e.y()):"top-right"===this._movingAnchorName?(n&&(h=i?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()},a=Math.sqrt(Math.pow(e.x()-h.x,2)+Math.pow(h.y-e.y(),2)),r=this.findOne(".top-right").x()<h.x?-1:1,s=this.findOne(".top-right").y()>h.y?-1:1,d=a*this.cos*r,p=a*this.sin*s,this.findOne(".top-right").x(h.x+d),this.findOne(".top-right").y(h.y-p)),o=e.position(),this.findOne(".top-left").y(o.y),this.findOne(".bottom-right").x(o.x)):"middle-left"===this._movingAnchorName?this.findOne(".top-left").x(e.x()):"middle-right"===this._movingAnchorName?this.findOne(".bottom-right").x(e.x()):"bottom-left"===this._movingAnchorName?(n&&(h=i?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()},a=Math.sqrt(Math.pow(h.x-e.x(),2)+Math.pow(e.y()-h.y,2)),r=h.x<e.x()?-1:1,s=e.y()<h.y?-1:1,d=a*this.cos*r,p=a*this.sin*s,e.x(h.x-d),e.y(h.y+p)),o=e.position(),this.findOne(".top-left").x(o.x),this.findOne(".bottom-right").y(o.y)):"bottom-center"===this._movingAnchorName?this.findOne(".bottom-right").y(e.y()):"bottom-right"===this._movingAnchorName?n&&(h=i?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()},a=Math.sqrt(Math.pow(e.x()-h.x,2)+Math.pow(e.y()-h.y,2)),r=this.findOne(".bottom-right").x()<h.x?-1:1,s=this.findOne(".bottom-right").y()<h.y?-1:1,d=a*this.cos*r,p=a*this.sin*s,this.findOne(".bottom-right").x(h.x+d),this.findOne(".bottom-right").y(h.y+p)):console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName)),(i=this.centeredScaling()||t.altKey)&&(a=this.findOne(".top-left"),s=this.findOne(".bottom-right"),h=a.x(),i=a.y(),c=this.getWidth()-s.x(),l=this.getHeight()-s.y(),s.move({x:-h,y:-i}),a.move({x:c,y:l})),d=(c=this.findOne(".top-left").getAbsolutePosition()).x,p=c.y,l=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),c=this.findOne(".bottom-right").y()-this.findOne(".top-left").y(),this._fitNodesInto({x:d,y:p,width:l,height:c,rotation:u.Konva.getAngle(this.rotation())},t)):(c=this._getNodeRect(),d=e.x()-c.width/2,p=-e.y()+c.height/2,p=Math.atan2(-p,d)+Math.PI/2,c.height<0&&(p-=Math.PI),d=u.Konva.getAngle(this.rotation())+p,p=u.Konva.getAngle(this.rotationSnapTolerance()),c=function(t,e){return b(t,e,{x:(t=t).x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)})}(c,function(t,e,i){for(var n=e,o=0;o<t.length;o++){var r=u.Konva.getAngle(t[o]),a=Math.abs(r-e)%(2*Math.PI);Math.min(a,2*Math.PI-a)<i&&(n=r)}return n}(this.rotationSnaps(),d,p)-c.rotation),this._fitNodesInto(c,t)))},x.prototype._handleMouseUp=function(t){this._removeEvents(t)},x.prototype.getAbsoluteTransform=function(){return this.getTransform()},x.prototype._removeEvents=function(e){var t;this._transforming&&(this._transforming=!1,window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0),t=this.getNode(),this._fire("transformend",{evt:e,target:t}),t&&this._nodes.forEach((function(t){t._fire("transformend",{evt:e,target:t})})),this._movingAnchorName=null)},x.prototype._fitNodesInto=function(t,o){var e,i,n,r,a=this,s=this._getNodeRect();h.Util._inRange(t.width,2*-this.padding()-1,1)||h.Util._inRange(t.height,2*-this.padding()-1,1)?this.update():((e=new h.Transform).rotate(u.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&0<=this._movingAnchorName.indexOf("left")?(i=e.point({x:2*-this.padding(),y:0}),t.x+=i.x,t.y+=i.y,t.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=i.x,this._anchorDragOffset.y-=i.y):this._movingAnchorName&&t.width<0&&0<=this._movingAnchorName.indexOf("right")&&(i=e.point({x:2*this.padding(),y:0}),this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=i.x,this._anchorDragOffset.y-=i.y,t.width+=2*this.padding()),this._movingAnchorName&&t.height<0&&0<=this._movingAnchorName.indexOf("top")?(i=e.point({x:0,y:2*-this.padding()}),t.x+=i.x,t.y+=i.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=i.x,this._anchorDragOffset.y-=i.y,t.height+=2*this.padding()):this._movingAnchorName&&t.height<0&&0<=this._movingAnchorName.indexOf("bottom")&&(i=e.point({x:0,y:2*this.padding()}),this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=i.x,this._anchorDragOffset.y-=i.y,t.height+=2*this.padding()),this.boundBoxFunc()&&((n=this.boundBoxFunc()(s,t))?t=n:h.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")),(n=new h.Transform).translate(s.x,s.y),n.rotate(s.rotation),n.scale(s.width/1e7,s.height/1e7),(s=new h.Transform).translate(t.x,t.y),s.rotate(t.rotation),s.scale(t.width/1e7,t.height/1e7),r=s.multiply(n.invert()),this._nodes.forEach((function(t){var e=t.getParent().getAbsoluteTransform(),i=t.getTransform().copy();i.translate(t.offsetX(),t.offsetY());var n=new h.Transform;n.multiply(e.copy().invert()).multiply(r).multiply(e).multiply(i);n=n.decompose();t.setAttrs(n),a._fire("transform",{evt:o,target:t}),t._fire("transform",{evt:o,target:t}),null!==(t=t.getLayer())&&void 0!==t&&t.batchDraw()})),this.rotation(h.Util._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw())},x.prototype.forceUpdate=function(){this._resetTransformCache(),this.update()},x.prototype._batchChangeChild=function(t,e){this.findOne(t).setAttrs(e)},x.prototype.update=function(){var e=this,t=this._getNodeRect();this.rotation(h.Util._getRotation(t.rotation));var i=t.width,n=t.height,o=this.enabledAnchors(),r=this.resizeEnabled(),a=(t=this.padding(),this.anchorSize());this.find("._anchor").each((function(t){t.setAttrs({width:a,height:a,offsetX:a/2,offsetY:a/2,stroke:e.anchorStroke(),strokeWidth:e.anchorStrokeWidth(),fill:e.anchorFill(),cornerRadius:e.anchorCornerRadius()})})),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:a/2+t,offsetY:a/2+t,visible:r&&0<=o.indexOf("top-left")}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:a/2+t,visible:r&&0<=o.indexOf("top-center")}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:a/2-t,offsetY:a/2+t,visible:r&&0<=o.indexOf("top-right")}),this._batchChangeChild(".middle-left",{x:0,y:n/2,offsetX:a/2+t,visible:r&&0<=o.indexOf("middle-left")}),this._batchChangeChild(".middle-right",{x:i,y:n/2,offsetX:a/2-t,visible:r&&0<=o.indexOf("middle-right")}),this._batchChangeChild(".bottom-left",{x:0,y:n,offsetX:a/2+t,offsetY:a/2-t,visible:r&&0<=o.indexOf("bottom-left")}),this._batchChangeChild(".bottom-center",{x:i/2,y:n,offsetY:a/2-t,visible:r&&0<=o.indexOf("bottom-center")}),this._batchChangeChild(".bottom-right",{x:i,y:n,offsetX:a/2-t,offsetY:a/2-t,visible:r&&0<=o.indexOf("bottom-right")}),this._batchChangeChild(".rotater",{x:i/2,y:-this.rotateAnchorOffset()*h.Util._sign(n)-t,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:n,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),null!==(n=this.getLayer())&&void 0!==n&&n.batchDraw()},x.prototype.isTransforming=function(){return this._transforming},x.prototype.stopTransform=function(){var t;this._transforming&&(this._removeEvents(),(t=this.findOne("."+this._movingAnchorName))&&t.stopDrag())},x.prototype.destroy=function(){return this.getStage()&&this._cursorChange&&(this.getStage().content.style.cursor=""),p.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this},x.prototype.toObject=function(){return s.Node.prototype.toObject.call(this)},x);function x(t){return(t=S.call(this,t)||this)._transforming=!1,t._createElements(),t._handleMouseMove=t._handleMouseMove.bind(t),t._handleMouseUp=t._handleMouseUp.bind(t),t.update=t.update.bind(t),t.on(g,t.update),t.getNode()&&t.update(),t}(i.Transformer=o).prototype.className="Transformer",t._registerNode(o),a.Factory.addGetterSetter(o,"enabledAnchors",v,(function(t){return t instanceof Array||h.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach((function(t){-1===v.indexOf(t)&&h.Util.warn("Unknown anchor name: "+t+". Available names are: "+v.join(", "))})),t||[]})),a.Factory.addGetterSetter(o,"resizeEnabled",!0),a.Factory.addGetterSetter(o,"anchorSize",10,c.getNumberValidator()),a.Factory.addGetterSetter(o,"rotateEnabled",!0),a.Factory.addGetterSetter(o,"rotationSnaps",[]),a.Factory.addGetterSetter(o,"rotateAnchorOffset",50,c.getNumberValidator()),a.Factory.addGetterSetter(o,"rotationSnapTolerance",5,c.getNumberValidator()),a.Factory.addGetterSetter(o,"borderEnabled",!0),a.Factory.addGetterSetter(o,"anchorStroke","rgb(0, 161, 255)"),a.Factory.addGetterSetter(o,"anchorStrokeWidth",1,c.getNumberValidator()),a.Factory.addGetterSetter(o,"anchorFill","white"),a.Factory.addGetterSetter(o,"anchorCornerRadius",0,c.getNumberValidator()),a.Factory.addGetterSetter(o,"borderStroke","rgb(0, 161, 255)"),a.Factory.addGetterSetter(o,"borderStrokeWidth",1,c.getNumberValidator()),a.Factory.addGetterSetter(o,"borderDash"),a.Factory.addGetterSetter(o,"keepRatio",!0),a.Factory.addGetterSetter(o,"centeredScaling",!1),a.Factory.addGetterSetter(o,"ignoreStroke",!1),a.Factory.addGetterSetter(o,"padding",0,c.getNumberValidator()),a.Factory.addGetterSetter(o,"node"),a.Factory.addGetterSetter(o,"nodes"),a.Factory.addGetterSetter(o,"boundBoxFunc"),a.Factory.addGetterSetter(o,"shouldOverdrawWholeArea",!1),a.Factory.backCompat(o,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),h.Collection.mapMethods(o)},{"../Factory":8,"../Global":10,"../Group":11,"../Node":13,"../Shape":15,"../Util":18,"../Validators":19,"./Rect":50}],58:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.Wedge=void 0;var r,a=t("../Util"),s=t("../Factory"),h=t("../Shape"),l=t("../Global"),d=t("../Validators");t=t("../Global"),o=(o(p,r=h.Shape),p.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.radius(),0,l.Konva.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)},p.prototype.getWidth=function(){return 2*this.radius()},p.prototype.getHeight=function(){return 2*this.radius()},p.prototype.setWidth=function(t){this.radius(t/2)},p.prototype.setHeight=function(t){this.radius(t/2)},p);function p(){return null!==r&&r.apply(this,arguments)||this}(i.Wedge=o).prototype.className="Wedge",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["radius"],t._registerNode(o),s.Factory.addGetterSetter(o,"radius",0,d.getNumberValidator()),s.Factory.addGetterSetter(o,"angle",0,d.getNumberValidator()),s.Factory.addGetterSetter(o,"clockwise",!1),s.Factory.backCompat(o,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),a.Collection.mapMethods(o)},{"../Factory":8,"../Global":10,"../Shape":15,"../Util":18,"../Validators":19}],59:[function(t,e,i){"use strict";function n(t){this._data=new DataView(t),this._offset=2===this.version?24:20}n.isCompatible=function(t){var e;if((e=t&&"object"==typeof t&&"byteLength"in t)&&1!==(t=new DataView(t).getInt32(0,!0))&&2!==t)throw new TypeError("This waveform data version not supported.");return e},n.prototype={get version(){return this._data.getInt32(0,!0)},get bits(){return Boolean(this._data.getUint32(4,!0))?8:16},get channels(){return 2===this.version?this._data.getInt32(20,!0):1},get sample_rate(){return this._data.getInt32(8,!0)},get scale(){return this._data.getInt32(12,!0)},get length(){return this._data.getUint32(16,!0)},at:function(t){return this._data.getInt8(this._offset+t)},concatBuffers:function(){for(var t=Array.prototype.slice.call(arguments),e=this._offset,i=e,n=0,o=[this].concat(t).map((function(t){return t._data.buffer})),r=0;r<o.length;r++){var a=o[r],s=new DataView(a).getInt32(16,!0);i+=a.byteLength-e,n+=s}t=new ArrayBuffer(i);var h=new DataView(o[0]),l=new DataView(t);for(r=0;r<e;r++)l.setUint8(r,h.getUint8(r));l.setInt32(16,n,!0);var d=0,p=new Uint8Array(t,e);for(r=0;r<o.length;r++)a=o[r],p.set(new Uint8Array(a,e),d),d+=a.byteLength-e;return t}},e.exports=n},{}],60:[function(t,e,i){"use strict";function n(t){this._data=t}n.isCompatible=function(t){return t&&"object"==typeof t&&"sample_rate"in t&&"samples_per_pixel"in t&&"bits"in t&&"length"in t&&"data"in t},n.prototype={get version(){return this._data.version||1},get bits(){return this._data.bits},get channels(){return this._data.channels||1},get sample_rate(){return this._data.sample_rate},get scale(){return this._data.samples_per_pixel},get length(){return this._data.length},at:function(t){var e=this._data.data;if(0<=t&&t<e.length)return e[t];throw new RangeError("Invalid index: "+t)},concatBuffers:function(){var t=Array.prototype.slice.call(arguments),e=t.map((function(t){return t._data.data})),i=Object.assign({},this._data);return i.data=i.data.concat.apply(i.data,e),i.length+=t.reduce((function(t,e){return t+e.length}),0),i}},e.exports=n},{}],61:[function(t,e,i){"use strict";var r=t("../core"),o=t("inline-worker"),a=t("../util/main-thread-worker");function s(t,i){var n=new(t.disable_worker?a:o)((function(){this.addEventListener("message",(function t(e){if(e.data.audio_buffer){for(var i,n,o=e.data.scale,r=e.data.amplitude_scale,a=e.data.split_channels,s=e.data.audio_buffer,h=s.channels,l=a?h.length:1,d=1===l?1:2,p=1==d?20:24,c=(a=(e=o,0<(i=s.length)-(a=Math.floor(i/e))*e&&a++,a),new DataView(new ArrayBuffer(p+2*a*l))),u=0,f=s.length,g=p,_=new Array(l),y=new Array(l),m=0;m<l;m++)_[m]=1/0,y[m]=-1/0;for(c.setInt32(0,d,!0),c.setUint32(4,1,!0),c.setInt32(8,s.sampleRate,!0),c.setInt32(12,o,!0),c.setInt32(16,a,!0),2==d&&c.setInt32(20,l,!0),n=0;n<f;n++){var v=0;if(1===l){for(m=0;m<h.length;++m)v+=h[m][n];(v=Math.floor(127*v*r/h.length))<_[0]&&(_[0]=v,_[0]<-128&&(_[0]=-128)),v>y[0]&&(y[0]=v,127<y[0]&&(y[0]=127))}else for(m=0;m<l;++m)(v=Math.floor(127*h[m][n]*r))<_[m]&&(_[m]=v,_[m]<-128&&(_[m]=-128)),v>y[m]&&(y[m]=v,127<y[m]&&(y[m]=127));if(++u===o){for(m=0;m<l;m++)c.setInt8(g++,_[m]),c.setInt8(g++,y[m]),_[m]=1/0,y[m]=-1/0;u=0}}if(0<u)for(m=0;m<l;m++)c.setInt8(g++,_[m]),c.setInt8(g++,y[m]);this.postMessage(c),this.removeEventListener("message",t),this.close()}}))}));n.addEventListener("message",(function t(e){e.data.audio_buffer||(i(e.data),n.removeEventListener("message",t))})),n.postMessage(t)}e.exports=function(n,o){return function(e){for(var t={length:e.length,sampleRate:e.sampleRate,channels:[]},i=0;i<e.numberOfChannels;++i)t.channels[i]=e.getChannelData(i);s({scale:n.scale,amplitude_scale:n.amplitude_scale,split_channels:n.split_channels,audio_buffer:t,disable_worker:n.disable_worker},(function(t){o(null,new r(t.buffer),e)}))}}},{"../core":65,"../util/main-thread-worker":66,"inline-worker":2}],62:[function(t,e,i){"use strict";e.exports=function(t){return{scale:t.scale||512,amplitude_scale:t.amplitude_scale||1,split_channels:t.split_channels||!1,disable_worker:t.disable_worker||!1}}},{}],63:[function(t,e,i){"use strict";var o=t("./audiodecoder"),n=t("./options");e.exports=function(t,e){var i=n(t);if(t.audio_context&&t.array_buffer)return function(t,e,i,n){t.decodeAudioData(e,o(i,n),(function(t){t=t||new DOMException("EncodingError"),n(t)}))}(t.audio_context,t.array_buffer,i,e);if(t.audio_buffer)return t=t.audio_buffer,o(i,e)(t);throw new TypeError("WaveformData.createFromAudio(): Pass either an AudioContext and ArrayBuffer, or an AudioBuffer object")}},{"./audiodecoder":61,"./options":62}],64:[function(t,e,i){"use strict";function n(t,e){this._waveformData=t,this._channelIndex=e}n.prototype.min_sample=function(t){t=2*(t*this._waveformData.channels+this._channelIndex);return this._waveformData._adapter.at(t)},n.prototype.max_sample=function(t){t=2*(t*this._waveformData.channels+this._channelIndex)+1;return this._waveformData._adapter.at(t)},n.prototype.min_array=function(){return this._waveformData._offsetValues(0,this._waveformData.length,2*this._channelIndex)},n.prototype.max_array=function(){return this._waveformData._offsetValues(0,this._waveformData.length,2*this._channelIndex+1)},e.exports=n},{}],65:[function(t,e,i){"use strict";var n=t("./channel"),o=t("./adapters/object"),r=t("./adapters/arraybuffer"),a=[r,o];function m(t){var e=this._getAdapter(t);this._adapter=new e(t),this._channels=[];for(var i=0;i<this.channels;i++)this._channels[i]=new n(this,i)}m.create=function(t){return new m(t)},m.prototype={_getAdapter:function(e){var i=null;if(a.some((function(t){if(t.isCompatible(e))return i=t,!0})),null===i)throw new TypeError("WaveformData.create(): Could not detect a WaveformData adapter from the input");return i},resample:function(t){t.input_index="number"==typeof t.input_index?t.input_index:null,t.output_index="number"==typeof t.output_index?t.output_index:null,t.scale="number"==typeof t.scale?t.scale:null,t.width="number"==typeof t.width?t.width:null;var u,f,g,_,e=Boolean(t.input_index)||Boolean(t.output_index);if(null!=t.input_index&&t.input_index<0)throw new RangeError("WaveformData.resample(): input_index should be a positive integer value");if(null!=t.output_index&&t.output_index<0)throw new RangeError("WaveformData.resample(): output_index should be a positive integer value");if(null!=t.width&&t.width<=0)throw new RangeError("WaveformData.resample(): width should be a positive integer value");if(null!=t.scale&&t.scale<=0)throw new RangeError("WaveformData.resample(): scale should be a positive integer value");if(!t.scale&&!t.width)throw new Error("WaveformData.resample(): Missing scale or width option");if(e&&(null===t.width||null===t.scale||null===t.input_index||null===t.output_index))throw new Error("WaveformData.resample(): Missing width, scale, input_index, or output_index option");for(var i=[],n=t.scale||Math.floor(this.duration*this.sample_rate/t.width),o=this.scale,r=2*this.channels,a=this.length,s=t.input_index||0,h=t.output_index||0,l=this.channels,d=new Array(l),p=new Array(l),c=0;c<l;++c)0<a?(d[c]=this.channel(c).min_sample(s),p[c]=this.channel(c).max_sample(s)):(d[c]=0,p[c]=0);if(n<o)throw new Error("WaveformData.resample(): Zoom level "+n+" too low, minimum: "+o);function y(t){return Math.floor(t*n)}for(;s<a;){for(;Math.floor(y(h)/o)<=s;){if(0<h)for(c=0;c<l;++c)i.push(d[c],p[c]);if(_=s,(u=y(++h))!==y(h-1))for(c=0;c<l;++c)d[c]=127,p[c]=-128}for(u=y(h),a<(f=Math.floor(u/o))&&(f=a);s<f;){for(c=0;c<l;++c)(g=this.channel(c).min_sample(s))<d[c]&&(d[c]=g),(g=this.channel(c).max_sample(s))>p[c]&&(p[c]=g);s++}if(e&&i.length/r>=t.width)break}if(e){if(i.length/r>t.width&&s!==_)for(c=0;c<l;++c)i.push(d[c],p[c])}else if(s!==_)for(c=0;c<l;++c)i.push(d[c],p[c]);return new m({version:this._adapter.version,bits:this.bits,samples_per_pixel:n,length:i.length/r,data:i,sample_rate:this.sample_rate,channels:l})},concat:function(){var e=this,t=Array.prototype.slice.call(arguments);t.forEach((function(t){if(e.channels!==t.channels||e.sample_rate!==t.sample_rate||e.scale!==t.scale||Object.getPrototypeOf(e._adapter)!==Object.getPrototypeOf(t._adapter)||e._adapter.version!==t._adapter.version)throw new Error("WaveformData.concat(): Waveforms are incompatible")}));t=t.map((function(t){return t._adapter}));return new m(this._adapter.concatBuffers.apply(this._adapter,t))},_offsetValues:function(t,e,i){var n=this._adapter,o=[],r=this.channels;i+=t*r*2;for(var a=0;a<e;a++)o.push(n.at(a*r*2+i));return o},get length(){return this._adapter.length},get bits(){return this._adapter.bits},get duration(){return this.length*this.scale/this.sample_rate},get pixels_per_second(){return this.sample_rate/this.scale},get seconds_per_pixel(){return this.scale/this.sample_rate},get channels(){return this._adapter.channels},channel:function(t){if(0<=t&&t<this._channels.length)return this._channels[t];throw new RangeError("Invalid channel: "+t)},get sample_rate(){return this._adapter.sample_rate},get scale(){return this._adapter.scale},at_time:function(t){return Math.floor(t*this.sample_rate/this.scale)},time:function(t){return t*this.scale/this.sample_rate},toJSON:function(){const t={version:2,channels:this.channels,sample_rate:this.sample_rate,samples_per_pixel:this.scale,bits:this.bits,length:this.length,data:[]};for(var e=0;e<this.length;e++)for(var i=0;i<this.channels;i++)t.data.push(this.channel(i).min_sample(e)),t.data.push(this.channel(i).max_sample(e));return t},toArrayBuffer:function(){if(this._adapter instanceof r)return this._adapter._data.buffer;var t=24+2*this.length*this.channels,e=(t=new ArrayBuffer(t),new DataView(t));e.setInt32(0,2,!0),e.setUint32(4,1,!0),e.setInt32(8,this.sample_rate,!0),e.setInt32(12,this.scale,!0),e.setInt32(16,this.length,!0),e.setInt32(20,this.channels,!0);for(var i=24,n=0;n<this.length;n++)for(var o=0;o<this.channels;o++)e.setInt8(i++,this.channel(o).min_sample(n),!0),e.setInt8(i++,this.channel(o).max_sample(n),!0);return t}},e.exports=m},{"./adapters/arraybuffer":59,"./adapters/object":60,"./channel":64}],66:[function(t,e,i){"use strict";function n(t){this._listeners={},t.call(this)}n.prototype.addEventListener=function(t,e){this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)},n.prototype.removeEventListener=function(t,e){this._listeners[t]&&(this._listeners[t]=this._listeners[t].filter((function(t){return t!==e})))},n.prototype.postMessage=function(t){for(var e={data:t},i=this._listeners.message,n=0;n<i.length;n++)i[n].call(this,e)},n.prototype.close=function(){this._listeners={}},e.exports=n},{}],67:[function(t,e,i){"use strict";var n=t("./lib/core");n.createFromAudio=t("./lib/builders/webaudio"),e.exports=n},{"./lib/builders/webaudio":63,"./lib/core":65}],68:[function(t,e,i){e.exports=function(l,o){"use strict";var e=/HeadlessChrome/.test(navigator.userAgent),i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame,d={forward:{},reverse:{}};d.forward[l.POINT]=0,d.forward[l.SEGMENT_START]=1,d.forward[l.SEGMENT_END]=2,d.reverse[l.POINT]=0,d.reverse[l.SEGMENT_START]=2,d.reverse[l.SEGMENT_END]=1;var p={};function n(t){this._cues=[],this._peaks=t,this._previousTime=-1,this._updateCues=this._updateCues.bind(this),this._onPlaying=this.onPlaying.bind(this),this._onSeeked=this.onSeeked.bind(this),this._onTimeUpdate=this.onTimeUpdate.bind(this),this._onAnimationFrame=this.onAnimationFrame.bind(this),this._rAFHandle=null,this._activeSegments={},this._attachEventHandlers()}p[0]="points.enter",p[1]="segments.enter",p[2]="segments.exit",n.prototype._updateCues=function(){var e=this,t=e._peaks.points.getPoints(),i=e._peaks.segments.getSegments();e._cues.length=0,t.forEach((function(t){e._cues.push(new l(t.time,l.POINT,t.id))})),i.forEach((function(t){e._cues.push(new l(t.startTime,l.SEGMENT_START,t.id)),e._cues.push(new l(t.endTime,l.SEGMENT_END,t.id))})),e._cues.sort(l.sorter);i=e._peaks.player.getCurrentTime();e._updateActiveSegments(i)},n.prototype._onUpdate=function(t,e){for(var i,n,o=e<t,r=o?(i=0,n=this._cues.length,1):(i=this._cues.length-1,n=-1),a=i;o?a<n:n<a;a+=r){var s=this._cues[a];if(o?s.time>e:s.time<e){if(o?s.time>t:s.time<t)break;var h=function(t,e){switch(e.type){case l.POINT:return t.points.getPoint(e.id);case l.SEGMENT_START:case l.SEGMENT_END:return t.segments.getSegment(e.id);default:throw new Error("getPointOrSegment: id not found?")}}(this._peaks,s);1===(s=(o?d.forward:d.reverse)[s.type])?this._activeSegments[h.id]=h:2===s&&delete this._activeSegments[h.id],this._peaks.emit(p[s],h)}}},n.prototype.onTimeUpdate=function(t){!e&&!navigator.webdriver&&"object"==typeof document&&"visibilityState"in document&&"visible"===document.visibilityState||(this._peaks.player.isPlaying()&&!this._peaks.player.isSeeking()&&this._onUpdate(t,this._previousTime),this._previousTime=t)},n.prototype.onAnimationFrame=function(){var t=this._peaks.player.getCurrentTime();this._peaks.player.isSeeking()||this._onUpdate(t,this._previousTime),this._previousTime=t,this._peaks.player.isPlaying()&&(this._rAFHandle=i(this._onAnimationFrame))},n.prototype.onPlaying=function(){this._previousTime=this._peaks.player.getCurrentTime(),this._rAFHandle=i(this._onAnimationFrame)},n.prototype.onSeeked=function(t){this._previousTime=t,this._updateActiveSegments(t)},n.prototype._updateActiveSegments=function(t){var e,i=this,n=i._peaks.segments.getSegmentsAtTime(t);for(e in i._activeSegments)o.objectHasProperty(i._activeSegments,e)&&(n.find(function(e){return function(t){return t.id===e}}(e))||(i._peaks.emit("segments.exit",i._activeSegments[e]),delete i._activeSegments[e]));n.forEach((function(t){t.id in i._activeSegments||(i._activeSegments[t.id]=t,i._peaks.emit("segments.enter",t))}))};var r=Array("points.update","points.dragmove","points.add","points.remove","points.remove_all","segments.update","segments.dragged","segments.add","segments.remove","segments.remove_all");return n.prototype._attachEventHandlers=function(){this._peaks.on("player.timeupdate",this._onTimeUpdate),this._peaks.on("player.playing",this._onPlaying),this._peaks.on("player.seeked",this._onSeeked);for(var t=0;t<r.length;t++)this._peaks.on(r[t],this._updateCues);this._updateCues()},n.prototype._detachEventHandlers=function(){this._peaks.off("player.timeupdate",this._onTimeUpdate),this._peaks.off("player.playing",this._onPlaying),this._peaks.off("player.seeked",this._onSeeked);for(var t=0;t<r.length;t++)this._peaks.off(r[t],this._updateCues)},n.prototype.destroy=function(){this._rAFHandle&&(t(this._rAFHandle),this._rAFHandle=null),this._detachEventHandlers(),this._previousTime=-1},n}(t("./cue"),t("./utils"))},{"./cue":69,"./utils":87}],69:[function(t,e,i){e.exports=function(){"use strict";function t(t,e,i){this.time=t,this.type=e,this.id=i}return t.POINT=0,t.SEGMENT_START=1,t.SEGMENT_END=2,t.sorter=function(t,e){return t.time-e.time},t}()},{}],70:[function(t,e,i){e.exports=function(e){"use strict";function t(t){this._options=t}return t.prototype.init=function(t){"zoomview"===this._options.view&&(this._label=new e.Text({x:2,y:0,text:this._options.point.labelText,textAlign:"left",fontFamily:this._options.fontFamily||"sans-serif",fontSize:this._options.fontSize||10,fontStyle:this._options.fontStyle||"normal",fill:"#000"})),this._options.draggable&&(this._handle=new e.Rect({x:-4.5,y:0,width:10,height:20,fill:this._options.color})),this._line=new e.Line({x:0,y:0,stroke:this._options.color,strokeWidth:1}),this._handle&&(this._time=new e.Text({x:-24,y:0,text:this._options.layer.formatTime(this._options.point.time),fontFamily:this._options.fontFamily,fontSize:this._options.fontSize,fontStyle:this._options.fontStyle,fill:"#000",textAlign:"center"}),this._time.hide()),this._handle&&t.add(this._handle),t.add(this._line),this._label&&t.add(this._label),this._time&&t.add(this._time),this.fitToView(),this.bindEventHandlers(t)},t.prototype.bindEventHandlers=function(t){var e=this;e._handle&&(e._handle.on("mouseover touchstart",(function(){e._time.setX(-24-e._time.getWidth()),e._time.show(),e._options.layer.draw()})),e._handle.on("mouseout touchend",(function(){e._time.hide(),e._options.layer.draw()})),t.on("dragstart",(function(){e._time.setX(-24-e._time.getWidth()),e._time.show(),e._options.layer.draw()})),t.on("dragend",(function(){e._time.hide(),e._options.layer.draw()})))},t.prototype.fitToView=function(){var t=this._options.layer.getHeight();this._line.points([.5,0,.5,t]),this._label&&this._label.y(12),this._handle&&this._handle.y(t/2-10.5),this._time&&this._time.y(t/2-5)},t.prototype.timeUpdated=function(t){this._time&&this._time.setText(this._options.layer.formatTime(t))},t}(t("konva"))},{konva:41}],71:[function(t,e,i){e.exports=function(n){"use strict";function t(t){this._options=t}return t.prototype.init=function(t){var e=this._options.startMarker?-24:24,i=this._options.startMarker?this._options.segment.startTime:this._options.segment.endTime;this._label=new n.Text({x:e,y:0,text:this._options.layer.formatTime(i),fontFamily:this._options.fontFamily,fontSize:this._options.fontSize,fontStyle:this._options.fontStyle,fill:"#000",textAlign:"center"}),this._label.hide(),this._handle=new n.Rect({x:-4.5,y:0,width:10,height:20,fill:this._options.color,stroke:this._options.color,strokeWidth:1}),this._line=new n.Line({x:0,y:0,stroke:this._options.color,strokeWidth:1}),t.add(this._label),t.add(this._line),t.add(this._handle),this.fitToView(),this.bindEventHandlers(t)},t.prototype.bindEventHandlers=function(t){var e=this,i=e._options.startMarker?-24:24;e._options.draggable&&(t.on("dragstart",(function(){e._options.startMarker&&e._label.setX(i-e._label.getWidth()),e._label.show(),e._options.layer.draw()})),t.on("dragend",(function(){e._label.hide(),e._options.layer.draw()}))),e._handle.on("mouseover touchstart",(function(){e._options.startMarker&&e._label.setX(i-e._label.getWidth()),e._label.show(),e._options.layer.draw()})),e._handle.on("mouseout touchend",(function(){e._label.hide(),e._options.layer.draw()}))},t.prototype.fitToView=function(){var t=this._options.layer.getHeight();this._label.y(t/2-5),this._handle.y(t/2-10.5),this._line.points([.5,0,.5,t])},t.prototype.timeUpdated=function(t){this._label.setText(this._options.layer.formatTime(t))},t}(t("konva"))},{konva:41}],72:[function(t,e,i){e.exports=function(i,n){"use strict";function t(t,e,i){this._view=t,this._offset=e,this._color=i,this._layer=new n.Layer({listening:!1}),this._highlightRect=null,this._startTime=null,this._endTime=null}return t.prototype.addToStage=function(t){t.add(this._layer)},t.prototype.showHighlight=function(t,e){this._highlightRect||this._createHighlightRect(t,e),this._update(t,e)},t.prototype._update=function(t,e){this._startTime=t,this._endTime=e;t=this._view.timeToPixels(t),e=this._view.timeToPixels(e);this._highlightRect.setAttrs({x:t,width:e-t}),this._layer.draw()},t.prototype._createHighlightRect=function(t,e){this._startTime=t,this._endTime=e;t=this._view.timeToPixels(t),e=this._view.timeToPixels(e);this._highlightRect=new n.Rect({startOffset:0,y:0,width:e-t,stroke:this._color,strokeWidth:1,height:0,fill:this._color,opacity:.3,cornerRadius:2}),this.fitToView(),this._layer.add(this._highlightRect)},t.prototype.removeHighlight=function(){this._highlightRect&&(this._highlightRect.destroy(),this._highlightRect=null,this._layer.draw())},t.prototype.updateHighlight=function(){this._highlightRect&&this._update(this._startTime,this._endTime)},t.prototype.fitToView=function(){var t,e;this._highlightRect&&(t=this._view.getHeight(),e=i.clamp(this._offset,0,Math.floor(t/2)),this._highlightRect.setAttrs({y:e,height:t-2*e}))},t}(t("./utils"),t("konva"))},{"./utils":87,konva:41}],73:[function(t,e,i){e.exports=function(){"use strict";var e=["OBJECT","TEXTAREA","INPUT","SELECT","OPTION"],i=[32,9,37,39];function t(t){this.eventEmitter=t,this._handleKeyEvent=this._handleKeyEvent.bind(this),document.addEventListener("keydown",this._handleKeyEvent),document.addEventListener("keypress",this._handleKeyEvent),document.addEventListener("keyup",this._handleKeyEvent)}return t.prototype._handleKeyEvent=function(t){if(-1===e.indexOf(t.target.nodeName))if(-1<i.indexOf(t.type)&&t.preventDefault(),"keydown"===t.type||"keypress"===t.type)switch(t.keyCode){case 32:this.eventEmitter.emit("keyboard.space");break;case 9:this.eventEmitter.emit("keyboard.tab")}else if("keyup"===t.type)switch(t.keyCode){case 37:t.shiftKey?this.eventEmitter.emit("keyboard.shift_left"):this.eventEmitter.emit("keyboard.left");break;case 39:t.shiftKey?this.eventEmitter.emit("keyboard.shift_right"):this.eventEmitter.emit("keyboard.right")}},t.prototype.destroy=function(){document.removeEventListener("keydown",this._handleKeyEvent),document.removeEventListener("keypress",this._handleKeyEvent),document.removeEventListener("keyup",this._handleKeyEvent)},t}()},{}],74:[function(t,e,i){e.exports=function(t,r,e,a,s,h,l,i,d,p,c,u){"use strict";function f(){return t.call(this),this.options={zoomLevels:[512,1024,2048,4096],dataUri:null,dataUriDefaultFormat:"json",withCredentials:!1,waveformData:null,logger:null,keyboard:!1,nudgeIncrement:1,segmentStartMarkerColor:"#aaaaaa",segmentEndMarkerColor:"#aaaaaa",zoomWaveformColor:"rgba(0, 225, 128, 1)",overviewWaveformColor:"rgba(0,0,0,0.2)",overviewHighlightColor:"#aaaaaa",overviewHighlightOffset:11,randomizeSegmentColor:!0,segmentColor:"#ff851b",playheadColor:"#111111",playheadTextColor:"#aaaaaa",timeLabelPrecision:2,showPlayheadTime:!1,axisGridlineColor:"#cccccc",axisLabelColor:"#aaaaaa",pointMarkerColor:"#39cccc",webAudio:null,zoomAdapter:"static",emitCueEvents:!1,createSegmentMarker:i.createSegmentMarker,createSegmentLabel:i.createSegmentLabel,createPointMarker:i.createPointMarker},this.logger=console.error.bind(console),this}return f.prototype=Object.create(t.prototype),f.init=function(t,i){var n,o=new f;(t=o._setOptions(t=t||{}))?i(t):(n=o.options.containers,u.isHTMLElement(n.zoomview)||u.isHTMLElement(n.overview)?n.zoomview&&n.zoomview.clientWidth<=0?i(new TypeError("Peaks.init(): Please ensure that the zoomview container is visible and has non-zero width")):n.overview&&n.overview.clientWidth<=0?i(new TypeError("Peaks.init(): Please ensure that the overview container is visible and has non-zero width")):(o.options.keyboard&&(o._keyboardHandler=new s(o)),t=o.options.player||new h(o,o.options.mediaElement),o.player=new l(o,t),o.segments=new a(o),o.points=new e(o),o.zoom=new p(o,o.options.zoomLevels),o.views=new d(o),new c(o).init(o.options,(function(t,e){t?i&&i(t):(o._waveformData=e,n.overview&&o.views.createOverview(n.overview),n.zoomview&&o.views.createZoomview(n.zoomview),o._addWindowResizeHandler(),o.options.segments&&o.segments.add(o.options.segments),o.options.points&&o.points.add(o.options.points),o.options.emitCueEvents&&(o._cueEmitter=new r(o)),setTimeout((function(){o.emit("peaks.ready")}),0),i&&i(null,o))}))):i(new TypeError("Peaks.init(): The containers.zoomview and/or containers.overview options must be valid HTML elements")))},f.prototype._setOptions=function(t){if(!t.player){if(!t.mediaElement)return new Error("Peaks.init(): Missing mediaElement option");if(!(t.mediaElement instanceof HTMLMediaElement))return new TypeError("Peaks.init(): The mediaElement option should be an HTMLMediaElement")}return t.container?new Error("Peaks.init(): The container option has been removed, please use containers instead"):t.containers?t.logger&&!u.isFunction(t.logger)?new TypeError("Peaks.init(): The logger option should be a function"):t.segments&&!Array.isArray(t.segments)?new TypeError("Peaks.init(): options.segments must be an array of segment objects"):t.points&&!Array.isArray(t.points)?new TypeError("Peaks.init(): options.points must be an array of point objects"):(u.extend(this.options,t),Array.isArray(this.options.zoomLevels)?0===this.options.zoomLevels.length?new Error("Peaks.init(): The zoomLevels array must not be empty"):u.isInAscendingOrder(this.options.zoomLevels)?void(t.logger&&(this.logger=t.logger)):new Error("Peaks.init(): The zoomLevels array must be sorted in ascending order"):new TypeError("Peaks.init(): The zoomLevels option should be an array")):new Error("Peaks.init(): Missing containers option")},f.prototype.setSource=function(i,n){var o=this;function e(){o.removeAllListeners("player.canplay"),o.removeAllListeners("player.error")}function t(){e(),i.zoomLevels||(i.zoomLevels=o.options.zoomLevels),new c(o).init(i,(function(t,e){t?n(t):(o._waveformData=e,["overview","zoomview"].forEach((function(t){(t=o.views.getView(t))&&t.setWaveformData(e)})),o.zoom.setZoomLevels(i.zoomLevels),n())}))}!this.options.mediaElement||i.mediaUrl?(o.once("player.canplay",t),o.once("player.error",(function(t){e(),n(t)})),this.options.mediaElement?o.options.mediaElement.setAttribute("src",i.mediaUrl):t()):n(new Error("peaks.setSource(): options must contain a mediaUrl when using mediaElement"))},f.prototype.getWaveformData=function(){return this._waveformData},f.prototype._addWindowResizeHandler=function(){this._onResize=this._onResize.bind(this),window.addEventListener("resize",this._onResize)},f.prototype._onResize=function(){this.emit("window_resize")},f.prototype._removeWindowResizeHandler=function(){window.removeEventListener("resize",this._onResize)},f.prototype.destroy=function(){this._removeWindowResizeHandler(),this._keyboardHandler&&this._keyboardHandler.destroy(),this.views&&this.views.destroy(),this.player&&this.player.destroy(),this._cueEmitter&&this._cueEmitter.destroy()},f}(t("eventemitter3"),t("./cue-emitter"),t("./waveform-points"),t("./waveform-segments"),t("./keyboard-handler"),t("./mediaelement-player"),t("./player"),t("./marker-factories"),t("./view-controller"),t("./zoom-controller"),t("./waveform-builder"),t("./utils"))},{"./cue-emitter":68,"./keyboard-handler":73,"./marker-factories":75,"./mediaelement-player":76,"./player":78,"./utils":87,"./view-controller":88,"./waveform-builder":90,"./waveform-points":92,"./waveform-segments":93,"./zoom-controller":96,eventemitter3:1}],75:[function(t,e,i){e.exports=function(e,i,n){"use strict";return{createSegmentMarker:function(t){return"zoomview"===t.view?new i(t):null},createSegmentLabel:function(t){return new n.Text({x:12,y:12,text:t.segment.labelText,textAlign:"center",fontFamily:t.fontFamily||"sans-serif",fontSize:t.fontSize||12,fontStyle:t.fontStyle||"normal",fill:"#000"})},createPointMarker:function(t){return new e(t)}}}(t("./default-point-marker"),t("./default-segment-marker"),t("konva"))},{"./default-point-marker":70,"./default-segment-marker":71,konva:41}],76:[function(t,e,i){e.exports=function(){"use strict";function t(t,e){this._peaks=t,this._listeners=[],this._mediaElement=e}return t.prototype._addMediaListener=function(t,e){this._listeners.push({type:t,callback:e}),this._mediaElement.addEventListener(t,e)},t.prototype.init=function(t){var e=this;e._player=t,e._listeners=[],e._duration=e.getDuration(),e._isPlaying=!1,e._addMediaListener("timeupdate",(function(){e._peaks.emit("player.timeupdate",e.getCurrentTime())})),e._addMediaListener("playing",(function(){e._isPlaying=!0,e._peaks.emit("player.playing",e.getCurrentTime())})),e._addMediaListener("pause",(function(){e._isPlaying=!1,e._peaks.emit("player.pause",e.getCurrentTime())})),e._addMediaListener("ended",(function(){e._peaks.emit("player.ended")})),e._addMediaListener("seeked",(function(){e._peaks.emit("player.seeked",e.getCurrentTime())})),e._addMediaListener("canplay",(function(){e._peaks.emit("player.canplay")})),e._addMediaListener("error",(function(t){e._peaks.emit("player.error",t.target.error)})),e._interval=null,e._mediaElement.readyState===HTMLMediaElement.HAVE_NOTHING&&e._mediaElement.load()},t.prototype.destroy=function(){for(var t=0;t<this._listeners.length;t++){var e=this._listeners[t];this._mediaElement.removeEventListener(e.type,e.callback)}this._listeners.length=0,this._mediaElement=null},t.prototype.play=function(){return this._mediaElement.play()},t.prototype.pause=function(){this._mediaElement.pause()},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isSeeking=function(){return this._mediaElement.seeking},t.prototype.getCurrentTime=function(){return this._mediaElement.currentTime},t.prototype.getDuration=function(){return this._mediaElement.duration},t.prototype.seek=function(t){this._mediaElement.currentTime=t},t}()},{}],77:[function(t,e,i){e.exports=function(i){"use strict";function t(t,e){this._stage=t,this._handlers=e,this._dragging=!1,this._mouseDown=this._mouseDown.bind(this),this._mouseUp=this._mouseUp.bind(this),this._mouseMove=this._mouseMove.bind(this),this._stage.on("mousedown",this._mouseDown),this._stage.on("touchstart",this._mouseDown),this._mouseDownClientX=null}return t.prototype._mouseDown=function(t){var e=function(t){for(;null!==t.parent;){if(t.parent instanceof i.Layer)return t;t=t.parent}return null}(t.target);e&&e.attrs.draggable||(this._mouseDownClientX=Math.floor(("touchstart"===t.type?t.evt.touches[0]:t.evt).clientX),this._handlers.onMouseDown&&(t=this._getMousePosX(this._mouseDownClientX),this._handlers.onMouseDown(t)),window.addEventListener("mousemove",this._mouseMove,!1),window.addEventListener("touchmove",this._mouseMove,!1),window.addEventListener("mouseup",this._mouseUp,!1),window.addEventListener("touchend",this._mouseUp,!1),window.addEventListener("blur",this._mouseUp,!1))},t.prototype._mouseMove=function(t){(t=Math.floor(("touchmove"===t.type?t.changedTouches[0]:t).clientX))!==this._mouseDownClientX&&(this._dragging=!0,this._handlers.onMouseMove&&(t=this._getMousePosX(t),this._handlers.onMouseMove(t)))},t.prototype._mouseUp=function(t){var e;"touchend"===t.type?(e=Math.floor(t.changedTouches[0].clientX),t.cancelable&&t.preventDefault()):e=Math.floor(t.clientX),this._handlers.onMouseUp&&(e=this._getMousePosX(e),this._handlers.onMouseUp(e)),window.removeEventListener("mousemove",this._mouseMove,!1),window.removeEventListener("touchmove",this._mouseMove,!1),window.removeEventListener("mouseup",this._mouseUp,!1),window.removeEventListener("touchend",this._mouseUp,!1),window.removeEventListener("blur",this._mouseUp,!1),this._dragging=!1},t.prototype._getMousePosX=function(t){return t-this._stage.getContainer().getBoundingClientRect().left},t.prototype.isDragging=function(){return this._dragging},t}(t("konva"))},{konva:41}],78:[function(t,e,i){e.exports=function(n){"use strict";function t(t,e){this._peaks=t,this._playingSegment=!1,this._segment=null,this._loop=!1,this._playSegmentTimerCallback=this._playSegmentTimerCallback.bind(this),function(e){var i=function(t){for(var e=[],i=t;i;)Object.getOwnPropertyNames(i).forEach((function(t){e.push(t)})),i=Object.getPrototypeOf(i);return e}(e);["init","destroy","play","pause","isPlaying","isSeeking","getCurrentTime","getDuration","seek"].forEach((function(t){if(!i.includes(t))throw new TypeError("Peaks.init(): Player method "+t+" is undefined");if("function"!=typeof e[t])throw new TypeError("Peaks.init(): Player method "+t+" is not a function")}))}(e),this._adapter=e,this._adapter.init(t)}return t.prototype.destroy=function(){this._adapter.destroy()},t.prototype.play=function(){return this._adapter.play()},t.prototype.pause=function(){this._adapter.pause()},t.prototype.isPlaying=function(){return this._adapter.isPlaying()},t.prototype.isSeeking=function(){return this._adapter.isSeeking()},t.prototype.getCurrentTime=function(){return this._adapter.getCurrentTime()},t.prototype.getDuration=function(){return this._adapter.getDuration()},t.prototype.seek=function(t){n.isValidTime(t)?this._adapter.seek(t):this._peaks.logger("peaks.player.seek(): parameter must be a valid time, in seconds")},t.prototype.playSegment=function(t,e){var i=this;t&&n.isValidTime(t.startTime)&&n.isValidTime(t.endTime)?(i._segment=t,i._loop=e,i.seek(t.startTime),i._peaks.once("player.playing",(function(){i._playingSegment||(i._playingSegment=!0,window.requestAnimationFrame(i._playSegmentTimerCallback))})),i.play()):i._peaks.logger("peaks.player.playSegment(): parameter must be a segment object")},t.prototype._playSegmentTimerCallback=function(){if(!this.isPlaying())return this.pause(),void(this._playingSegment=!1);if(this.getCurrentTime()>=this._segment.endTime){if(!this._loop)return this.pause(),this._peaks.emit("player.ended"),void(this._playingSegment=!1);this.seek(this._segment.startTime)}window.requestAnimationFrame(this._playSegmentTimerCallback)},t}(t("./utils"))},{"./utils":87}],79:[function(t,e,i){e.exports=function(o){"use strict";function t(t){this._player=t.player,this._view=t.view,this._playheadPixel=0,this._playheadLineAnimation=null,this._playheadVisible=!1,this._playheadColor=t.playheadColor,this._playheadTextColor=t.playheadTextColor,this._playheadFontFamily=t.playheadFontFamily||"sans-serif",this._playheadFontSize=t.playheadFontSize||11,this._playheadFontStyle=t.playheadFontStyle||"normal",this._playheadLayer=new o.Layer,this._createPlayhead(this._playheadColor),t.showPlayheadTime&&this._createPlayheadText(this._playheadTextColor),this.fitToView(),this.zoomLevelChanged()}return t.prototype.addToStage=function(t){t.add(this._playheadLayer)},t.prototype.zoomLevelChanged=function(){var t=this._view.timeToPixels(1);this._useAnimation=5<=t,this._useAnimation?this._player.isPlaying()&&!this._playheadLineAnimation&&this._start():this._playheadLineAnimation&&(t=this._player.getCurrentTime(),this.stop(t))},t.prototype.fitToView=function(){var t=this._view.getHeight();this._playheadLine.points([.5,0,.5,t]),this._playheadText&&this._playheadText.y(12)},t.prototype._createPlayhead=function(t){this._playheadLine=new o.Line({stroke:t,strokeWidth:1}),this._playheadGroup=new o.Group({x:0,y:0}),this._playheadGroup.add(this._playheadLine),this._playheadLayer.add(this._playheadGroup)},t.prototype._createPlayheadText=function(t){var e=this._player.getCurrentTime();e=this._view.formatTime(e);this._playheadText=new o.Text({x:2,y:0,text:e,fontSize:this._playheadFontSize,fontFamily:this._playheadFontFamily,fontStyle:this._playheadFontStyle,fill:t,align:"right"}),this._playheadGroup.add(this._playheadText)},t.prototype.updatePlayheadTime=function(t){this._syncPlayhead(t),this._player.isPlaying()&&this._start()},t.prototype._syncPlayhead=function(t){var e=this._view.timeToPixels(t),i=this._view.getFrameOffset(),n=this._view.getWidth(),o=i<=e&&e<i+n;this._playheadPixel=e,o?(o=this._playheadPixel-i,this._playheadVisible||(this._playheadVisible=!0,this._playheadGroup.show()),this._playheadGroup.setX(o),this._playheadText&&(i=this._view.formatTime(t),t=this._playheadText.getTextWidth(),this._playheadText.setText(i),n-2<t+o?this._playheadText.setX(-t-2):t+o<n&&this._playheadText.setX(2)),this._playheadLayer.draw()):this._playheadVisible&&(this._playheadVisible=!1,this._playheadGroup.hide(),this._playheadLayer.draw())},t.prototype._start=function(){var i,n=this;n._playheadLineAnimation&&(n._playheadLineAnimation.stop(),n._playheadLineAnimation=null),n._useAnimation&&(i=null,n._playheadLineAnimation=new o.Animation((function(){var t=n._player.getCurrentTime(),e=n._view.timeToPixels(t);e!==i&&(n._syncPlayhead(t),i=e)}),n._playheadLayer),n._playheadLineAnimation.start())},t.prototype.stop=function(t){this._playheadLineAnimation&&(this._playheadLineAnimation.stop(),this._playheadLineAnimation=null),this._syncPlayhead(t)},t.prototype.getPlayheadOffset=function(){return this._playheadPixel-this._view.getFrameOffset()},t.prototype.getPlayheadPixel=function(){return this._playheadPixel},t.prototype.showPlayheadTime=function(t){var e=!1;t?this._playheadText||(this._createPlayheadText(this._playheadTextColor),this.fitToView(),e=!0):this._playheadText&&(this._playheadText.remove(),this._playheadText.destroy(),e=!(this._playheadText=null)),e&&this._playheadLayer.draw()},t.prototype.updatePlayheadText=function(){var t;this._playheadText&&(t=this._player.getCurrentTime(),t=this._view.formatTime(t),this._playheadText.setText(t)),this._playheadLayer.draw()},t.prototype.destroy=function(){this._playheadLineAnimation&&(this._playheadLineAnimation.stop(),this._playheadLineAnimation=null)},t}(t("konva"))},{konva:41}],80:[function(t,e,i){e.exports=function(e){"use strict";function t(t){this._point=t.point,this._marker=t.marker,this._draggable=t.draggable,this._onDblClick=t.onDblClick,this._onDragStart=t.onDragStart,this._onDragMove=t.onDragMove,this._onDragEnd=t.onDragEnd,this._onMouseEnter=t.onMouseEnter,this._onMouseLeave=t.onMouseLeave,this._dragBoundFunc=this._dragBoundFunc.bind(this),this._group=new e.Group({draggable:this._draggable,dragBoundFunc:this._dragBoundFunc}),this._bindDefaultEventHandlers(),this._marker.init(this._group)}return t.prototype._bindDefaultEventHandlers=function(){var t=this;t._group.on("dragstart",(function(){t._onDragStart(t._point)})),t._group.on("dragmove",(function(){t._onDragMove(t._point)})),t._group.on("dragend",(function(){t._onDragEnd(t._point)})),t._group.on("dblclick",(function(){t._onDblClick(t._point)})),t._group.on("mouseenter",(function(){t._onMouseEnter(t._point)})),t._group.on("mouseleave",(function(){t._onMouseLeave(t._point)}))},t.prototype._dragBoundFunc=function(t){return{x:t.x,y:this._group.getAbsolutePosition().y}},t.prototype.addToLayer=function(t){t.add(this._group)},t.prototype.fitToView=function(){this._marker.fitToView()},t.prototype.getPoint=function(){return this._point},t.prototype.getX=function(){return this._group.getX()},t.prototype.getWidth=function(){return this._group.getWidth()},t.prototype.setX=function(t){this._group.setX(t)},t.prototype.timeUpdated=function(t){this._marker.timeUpdated&&this._marker.timeUpdated(t)},t.prototype.destroy=function(){this._marker.destroy&&this._marker.destroy(),this._group.destroyChildren(),this._group.destroy()},t}(t("konva"))},{konva:41}],81:[function(t,e,i){e.exports=function(i){"use strict";var n=["peaks","id","time","labelText","color","editable"];function o(t,e){if(!i.isValidTime(t.time))throw new TypeError("peaks.points."+e+": time should be a numeric value");if(t.time<0)throw new RangeError("peaks.points."+e+": time should not be negative");if(i.isNullOrUndefined(t.labelText))t.labelText="";else if(!i.isString(t.labelText))throw new TypeError("peaks.points."+e+": labelText must be a string");if(!i.isBoolean(t.editable))throw new TypeError("peaks.points."+e+": editable must be true or false")}function t(t){o(t,"add()"),this._peaks=t.peaks,this._id=t.id,this._time=t.time,this._labelText=t.labelText,this._color=t.color,this._editable=t.editable,this._setUserData(t)}return t.prototype._setUserData=function(t){for(var e in t)i.objectHasProperty(t,e)&&-1===n.indexOf(e)&&(this[e]=t[e])},Object.defineProperties(t.prototype,{id:{enumerable:!0,get:function(){return this._id}},time:{enumerable:!0,get:function(){return this._time}},labelText:{get:function(){return this._labelText}},color:{enumerable:!0,get:function(){return this._color}},editable:{enumerable:!0,get:function(){return this._editable}}}),t.prototype.update=function(t){var e={time:this.time,labelText:this.labelText,color:this.color,editable:this.editable};i.extend(e,t),o(e,"update()"),this._time=e.time,this._labelText=e.labelText,this._color=e.color,this._editable=e.editable,this._setUserData(t),this._peaks.emit("points.update",this)},t.prototype.isVisible=function(t,e){return this.time>=t&&this.time<e},t.prototype._setTime=function(t){this._time=t},t}(t("./utils"))},{"./utils":87}],82:[function(t,e,i){e.exports=function(n,r,o){"use strict";function t(t,e,i){this._peaks=t,this._view=e,this._allowEditing=i,this._pointMarkers={},this._layer=new o.Layer,this._onPointsDrag=this._onPointsDrag.bind(this),this._onPointHandleDblClick=this._onPointHandleDblClick.bind(this),this._onPointHandleDragStart=this._onPointHandleDragStart.bind(this),this._onPointHandleDragMove=this._onPointHandleDragMove.bind(this),this._onPointHandleDragEnd=this._onPointHandleDragEnd.bind(this),this._onPointHandleMouseEnter=this._onPointHandleMouseEnter.bind(this),this._onPointHandleMouseLeave=this._onPointHandleMouseLeave.bind(this),this._onPointsUpdate=this._onPointsUpdate.bind(this),this._onPointsAdd=this._onPointsAdd.bind(this),this._onPointsRemove=this._onPointsRemove.bind(this),this._onPointsRemoveAll=this._onPointsRemoveAll.bind(this),this._peaks.on("points.update",this._onPointsUpdate),this._peaks.on("points.add",this._onPointsAdd),this._peaks.on("points.remove",this._onPointsRemove),this._peaks.on("points.remove_all",this._onPointsRemoveAll),this._peaks.on("points.dragstart",this._onPointsDrag),this._peaks.on("points.dragmove",this._onPointsDrag),this._peaks.on("points.dragend",this._onPointsDrag)}return t.prototype.addToStage=function(t){t.add(this._layer)},t.prototype.enableEditing=function(t){this._allowEditing=t},t.prototype.formatTime=function(t){return this._view.formatTime(t)},t.prototype._onPointsUpdate=function(t){var e=this._view.getFrameOffset(),i=this._view.getWidth(),n=this._view.pixelsToTime(e);i=this._view.pixelsToTime(e+i);this._removePoint(t),t.isVisible(n,i)&&this._addPointMarker(t),this.updatePoints(n,i)},t.prototype._onPointsAdd=function(t){var e=this,i=e._view.getFrameOffset(),n=e._view.getWidth(),o=e._view.pixelsToTime(i),r=e._view.pixelsToTime(i+n);t.forEach((function(t){t.isVisible(o,r)&&e._addPointMarker(t)})),e.updatePoints(o,r)},t.prototype._onPointsRemove=function(t){var e=this;t.forEach((function(t){e._removePoint(t)})),e._layer.draw()},t.prototype._onPointsRemoveAll=function(){this._layer.removeChildren(),this._pointMarkers={},this._layer.draw()},t.prototype._onPointsDrag=function(t){this._updatePoint(t),this._layer.draw()},t.prototype._createPointMarker=function(t){var e=this._allowEditing&&t.editable,i=this._peaks.options.createPointMarker({point:t,draggable:e,color:t.color||this._peaks.options.pointMarkerColor,fontFamily:this._peaks.options.fontFamily||"sans-serif",fontSize:this._peaks.options.fontSize||10,fontStyle:this._peaks.options.fontStyle||"normal",layer:this,view:this._view.getName()});return new n({point:t,draggable:e,marker:i,onDblClick:this._onPointHandleDblClick,onDragStart:this._onPointHandleDragStart,onDragMove:this._onPointHandleDragMove,onDragEnd:this._onPointHandleDragEnd,onMouseEnter:this._onPointHandleMouseEnter,onMouseLeave:this._onPointHandleMouseLeave})},t.prototype.getHeight=function(){return this._view.getHeight()},t.prototype._addPointMarker=function(t){var e=this._createPointMarker(t);return(this._pointMarkers[t.id]=e).addToLayer(this._layer),e},t.prototype._onPointHandleDragMove=function(t){var e=this._pointMarkers[t.id],i=e.getX();0<=i&&i<this._view.getWidth()&&(i=this._view.getFrameOffset()+i+e.getWidth(),t._setTime(this._view.pixelsToTime(i)),e.timeUpdated(t.time)),this._peaks.emit("points.dragmove",t)},t.prototype._onPointHandleMouseEnter=function(t){this._peaks.emit("points.mouseenter",t)},t.prototype._onPointHandleMouseLeave=function(t){this._peaks.emit("points.mouseleave",t)},t.prototype._onPointHandleDblClick=function(t){this._peaks.emit("points.dblclick",t)},t.prototype._onPointHandleDragStart=function(t){this._peaks.emit("points.dragstart",t)},t.prototype._onPointHandleDragEnd=function(t){this._peaks.emit("points.dragend",t)},t.prototype.updatePoints=function(t,e){var i=this._peaks.points.find(t,e),n=i.length;i.forEach(this._updatePoint.bind(this)),0<(n+=this._removeInvisiblePoints(t,e))&&this._layer.draw()},t.prototype._updatePoint=function(t){var e=this._findOrAddPointMarker(t);t=this._view.timeToPixels(t.time)-this._view.getFrameOffset();e.setX(t)},t.prototype._findOrAddPointMarker=function(t){return this._pointMarkers[t.id]||this._addPointMarker(t)},t.prototype._removeInvisiblePoints=function(t,e){var i,n,o=0;for(i in this._pointMarkers)r.objectHasProperty(this._pointMarkers,i)&&((n=this._pointMarkers[i].getPoint()).isVisible(t,e)||(this._removePoint(n),o++));return o},t.prototype._removePoint=function(t){var e=this._pointMarkers[t.id];e&&(e.destroy(),delete this._pointMarkers[t.id])},t.prototype.setVisible=function(t){this._layer.setVisible(t)},t.prototype.destroy=function(){this._peaks.off("points.update",this._onPointsUpdate),this._peaks.off("points.add",this._onPointsAdd),this._peaks.off("points.remove",this._onPointsRemove),this._peaks.off("points.remove_all",this._onPointsRemoveAll),this._peaks.off("points.dragstart",this._onPointsDrag),this._peaks.off("points.dragmove",this._onPointsDrag),this._peaks.off("points.dragend",this._onPointsDrag)},t.prototype.fitToView=function(){for(var t in this._pointMarkers)r.objectHasProperty(this._pointMarkers,t)&&this._pointMarkers[t].fitToView()},t.prototype.draw=function(){this._layer.draw()},t}(t("./point-marker"),t("./utils"),t("konva"))},{"./point-marker":80,"./utils":87,konva:41}],83:[function(t,e,i){e.exports=function(e){"use strict";function t(t){this._segment=t.segment,this._marker=t.marker,this._segmentShape=t.segmentShape,this._draggable=t.draggable,this._layer=t.layer,this._startMarker=t.startMarker,this._onDrag=t.onDrag,this._onDragStart=t.onDragStart,this._onDragEnd=t.onDragEnd,this._dragBoundFunc=this._dragBoundFunc.bind(this),this._group=new e.Group({draggable:this._draggable,dragBoundFunc:this._dragBoundFunc}),this._bindDefaultEventHandlers(),this._marker.init(this._group)}return t.prototype._bindDefaultEventHandlers=function(){var t=this;t._draggable&&(t._group.on("dragmove",(function(){t._onDrag(t)})),t._group.on("dragstart",(function(){t._onDragStart(t)})),t._group.on("dragend",(function(){t._onDragEnd(t)})))},t.prototype._dragBoundFunc=function(t){var e,i;return this._startMarker?(i=(e=this._segmentShape.getEndMarker()).getX()-e.getWidth(),t.x>i&&(t.x=i)):(i=(e=this._segmentShape.getStartMarker()).getX()+e.getWidth(),t.x<i&&(t.x=i)),{x:t.x,y:this._group.getAbsolutePosition().y}},t.prototype.addToLayer=function(t){t.add(this._group)},t.prototype.fitToView=function(){this._marker.fitToView()},t.prototype.getSegment=function(){return this._segment},t.prototype.getX=function(){return this._group.getX()},t.prototype.getWidth=function(){return this._group.getWidth()},t.prototype.isStartMarker=function(){return this._startMarker},t.prototype.setX=function(t){this._group.setX(t)},t.prototype.timeUpdated=function(t){this._marker.timeUpdated&&this._marker.timeUpdated(t)},t.prototype.destroy=function(){this._marker.destroy&&this._marker.destroy(),this._group.destroyChildren(),this._group.destroy()},t}(t("konva"))},{konva:41}],84:[function(t,e,i){e.exports=function(i,o){"use strict";var n="sans-serif";function t(t,e,i,n){this._segment=t,this._peaks=e,this._layer=i,this._view=n,this._waveformShape=null,this._label=null,this._startMarker=null,this._endMarker=null,this._color=t.color,this._waveformShape=new o({color:t.color,view:n,segment:t}),this._onMouseEnter=this._onMouseEnter.bind(this),this._onMouseLeave=this._onMouseLeave.bind(this),this._onClick=this._onClick.bind(this),this._waveformShape.on("mouseenter",this._onMouseEnter),this._waveformShape.on("mouseleave",this._onMouseLeave),this._waveformShape.on("click",this._onClick),this._onSegmentHandleDrag=this._onSegmentHandleDrag.bind(this),this._onSegmentHandleDragStart=this._onSegmentHandleDragStart.bind(this),this._onSegmentHandleDragEnd=this._onSegmentHandleDragEnd.bind(this),this._label=this._peaks.options.createSegmentLabel({segment:t,view:this._view.getName(),layer:this._layer,fontFamily:this._peaks.options.fontFamily,fontSize:this._peaks.options.fontSize,fontStyle:this._peaks.options.fontStyle}),this._label&&this._label.hide(),this._createMarkers()}return t.prototype.updatePosition=function(){var i,t=this._view.timeToPixels(this._segment.startTime),e=this._view.timeToPixels(this._segment.endTime);t-=i=this._view.getFrameOffset(),e-=i;(i=this.getStartMarker())&&i.setX(t-i.getWidth()),(i=this.getEndMarker())&&i.setX(e)},t.prototype.getSegment=function(){return this._segment},t.prototype.getStartMarker=function(){return this._startMarker},t.prototype.getEndMarker=function(){return this._endMarker},t.prototype.addToLayer=function(t){t.add(this._waveformShape),this._label&&t.add(this._label),this._startMarker&&this._startMarker.addToLayer(t),this._endMarker&&this._endMarker.addToLayer(t)},t.prototype._createMarkers=function(){var t,e=this._layer.isEditingEnabled()&&this._segment.editable;e&&((t=this._peaks.options.createSegmentMarker({segment:this._segment,draggable:e,startMarker:!0,color:this._peaks.options.segmentStartMarkerColor,fontFamily:this._peaks.options.fontFamily||n,fontSize:this._peaks.options.fontSize||10,fontStyle:this._peaks.options.fontStyle||"normal",layer:this._layer,view:this._view.getName()}))&&(this._startMarker=new i({segment:this._segment,segmentShape:this,draggable:e,startMarker:!0,marker:t,onDrag:this._onSegmentHandleDrag,onDragStart:this._onSegmentHandleDragStart,onDragEnd:this._onSegmentHandleDragEnd})),(t=this._peaks.options.createSegmentMarker({segment:this._segment,draggable:e,startMarker:!1,color:this._peaks.options.segmentEndMarkerColor,fontFamily:this._peaks.options.fontFamily||n,fontSize:this._peaks.options.fontSize||10,fontStyle:this._peaks.options.fontStyle||"normal",layer:this._layer,view:this._view.getName()}))&&(this._endMarker=new i({segment:this._segment,segmentShape:this,draggable:e,startMarker:!1,marker:t,onDrag:this._onSegmentHandleDrag,onDragStart:this._onSegmentHandleDragStart,onDragEnd:this._onSegmentHandleDragEnd})))},t.prototype._onMouseEnter=function(){this._label&&(this._label.show(),this._layer.draw()),this._peaks.emit("segments.mouseenter",this._segment)},t.prototype._onMouseLeave=function(){this._label&&(this._label.hide(),this._layer.draw()),this._peaks.emit("segments.mouseleave",this._segment)},t.prototype._onClick=function(){this._peaks.emit("segments.click",this._segment)},t.prototype._onSegmentHandleDrag=function(t){var e=this._view.getFrameOffset(),i=this._view.getWidth(),n=t.isStartMarker(),o=this._startMarker.getX(),r=this._endMarker.getX();n&&0<=o&&(o=e+o+this._startMarker.getWidth(),this._segment._setStartTime(this._view.pixelsToTime(o)),t.timeUpdated(this._segment.startTime)),!n&&r<i&&(this._segment._setEndTime(this._view.pixelsToTime(e+r)),t.timeUpdated(this._segment.endTime)),this._peaks.emit("segments.dragged",this._segment,n)},t.prototype._onSegmentHandleDragStart=function(t){t=t.isStartMarker();this._peaks.emit("segments.dragstart",this._segment,t)},t.prototype._onSegmentHandleDragEnd=function(t){t=t.isStartMarker();this._peaks.emit("segments.dragend",this._segment,t)},t.prototype.fitToView=function(){this._startMarker&&this._startMarker.fitToView(),this._endMarker&&this._endMarker.fitToView(),this._waveformShape.setWaveformColor(this._color)},t.prototype.destroy=function(){this._waveformShape.destroy(),this._label&&this._label.destroy(),this._startMarker&&this._startMarker.destroy(),this._endMarker&&this._endMarker.destroy()},t}(t("./segment-marker"),t("./waveform-shape"))},{"./segment-marker":83,"./waveform-shape":94}],85:[function(t,e,i){e.exports=function(i){"use strict";var n=["peaks","id","startTime","endTime","labelText","color","editable"];function o(t,e){if(!i.isValidTime(t.startTime))throw new TypeError("peaks.segments."+e+": startTime should be a valid number");if(!i.isValidTime(t.endTime))throw new TypeError("peaks.segments."+e+": endTime should be a valid number");if(t.startTime<0)throw new RangeError("peaks.segments."+e+": startTime should not be negative");if(t.endTime<0)throw new RangeError("peaks.segments."+e+": endTime should not be negative");if(t.endTime<t.startTime)throw new RangeError("peaks.segments."+e+": endTime should not be less than startTime");if(i.isNullOrUndefined(t.labelText))t.labelText="";else if(!i.isString(t.labelText))throw new TypeError("peaks.segments."+e+": labelText must be a string");if(!i.isBoolean(t.editable))throw new TypeError("peaks.segments."+e+": editable must be true or false");if(t.color&&!i.isString(t.color)&&!i.isLinearGradientColor(t.color))throw new TypeError("peaks.segments."+e+": color must be a string or a valid linear gradient object")}function t(t){o(t,"add()"),this._peaks=t.peaks,this._id=t.id,this._startTime=t.startTime,this._endTime=t.endTime,this._labelText=t.labelText,this._color=t.color,this._editable=t.editable,this._setUserData(t)}return t.prototype._setUserData=function(t){for(var e in t)i.objectHasProperty(t,e)&&-1===n.indexOf(e)&&(this[e]=t[e])},Object.defineProperties(t.prototype,{id:{enumerable:!0,get:function(){return this._id}},startTime:{enumerable:!0,get:function(){return this._startTime}},endTime:{enumerable:!0,get:function(){return this._endTime}},labelText:{enumerable:!0,get:function(){return this._labelText}},color:{enumerable:!0,get:function(){return this._color}},editable:{enumerable:!0,get:function(){return this._editable}}}),t.prototype.update=function(t){var e={startTime:this.startTime,endTime:this.endTime,labelText:this.labelText,color:this.color,editable:this.editable};i.extend(e,t),o(e,"update()"),this._startTime=e.startTime,this._endTime=e.endTime,this._labelText=e.labelText,this._color=e.color,this._editable=e.editable,this._setUserData(t),this._peaks.emit("segments.update",this)},t.prototype.isVisible=function(t,e){return this.startTime<e&&t<this.endTime},t.prototype._setStartTime=function(t){this._startTime=t},t.prototype._setEndTime=function(t){this._endTime=t},t}(t("./utils"))},{"./utils":87}],86:[function(t,e,i){e.exports=function(e,r,n){"use strict";function t(t,e,i){this._peaks=t,this._view=e,this._allowEditing=i,this._segmentShapes={},this._layer=new n.Layer,this._onSegmentsUpdate=this._onSegmentsUpdate.bind(this),this._onSegmentsAdd=this._onSegmentsAdd.bind(this),this._onSegmentsRemove=this._onSegmentsRemove.bind(this),this._onSegmentsRemoveAll=this._onSegmentsRemoveAll.bind(this),this._onSegmentsDragged=this._onSegmentsDragged.bind(this),this._peaks.on("segments.update",this._onSegmentsUpdate),this._peaks.on("segments.add",this._onSegmentsAdd),this._peaks.on("segments.remove",this._onSegmentsRemove),this._peaks.on("segments.remove_all",this._onSegmentsRemoveAll),this._peaks.on("segments.dragged",this._onSegmentsDragged)}return t.prototype.addToStage=function(t){t.add(this._layer)},t.prototype.enableEditing=function(t){this._allowEditing=t},t.prototype.isEditingEnabled=function(){return this._allowEditing},t.prototype.formatTime=function(t){return this._view.formatTime(t)},t.prototype._onSegmentsUpdate=function(t){var e=!1,i=this._segmentShapes[t.id],n=this._view.getFrameOffset(),o=this._view.getWidth(),r=this._view.pixelsToTime(n);o=this._view.pixelsToTime(n+o);i&&(this._removeSegment(t),e=!0),t.isVisible(r,o)&&(this._addSegmentShape(t),e=!0),e&&this.updateSegments(r,o)},t.prototype._onSegmentsAdd=function(t){var e=this,i=e._view.getFrameOffset(),n=e._view.getWidth(),o=e._view.pixelsToTime(i),r=e._view.pixelsToTime(i+n);t.forEach((function(t){t.isVisible(o,r)&&e._addSegmentShape(t)})),e.updateSegments(o,r)},t.prototype._onSegmentsRemove=function(t){var e=this;t.forEach((function(t){e._removeSegment(t)})),e._layer.draw()},t.prototype._onSegmentsRemoveAll=function(){this._layer.removeChildren(),this._segmentShapes={},this._layer.draw()},t.prototype._onSegmentsDragged=function(t){this._updateSegment(t),this._layer.draw()},t.prototype._createSegmentShape=function(t){return new e(t,this._peaks,this,this._view)},t.prototype._addSegmentShape=function(t){var e=this._createSegmentShape(t);return e.addToLayer(this._layer),this._segmentShapes[t.id]=e},t.prototype.updateSegments=function(t,e){var i=this._peaks.segments.find(t,e),n=i.length;i.forEach(this._updateSegment.bind(this)),0<(n+=this._removeInvisibleSegments(t,e))&&this._layer.draw()},t.prototype._updateSegment=function(t){this._findOrAddSegmentShape(t).updatePosition()},t.prototype._findOrAddSegmentShape=function(t){return this._segmentShapes[t.id]||this._addSegmentShape(t)},t.prototype._removeInvisibleSegments=function(t,e){var i,n,o=0;for(i in this._segmentShapes)r.objectHasProperty(this._segmentShapes,i)&&((n=this._segmentShapes[i].getSegment()).isVisible(t,e)||(this._removeSegment(n),o++));return o},t.prototype._removeSegment=function(t){var e=this._segmentShapes[t.id];e&&(e.destroy(),delete this._segmentShapes[t.id])},t.prototype.setVisible=function(t){this._layer.setVisible(t)},t.prototype.draw=function(){this._layer.draw()},t.prototype.destroy=function(){this._peaks.off("segments.update",this._onSegmentsUpdate),this._peaks.off("segments.add",this._onSegmentsAdd),this._peaks.off("segments.remove",this._onSegmentsRemove),this._peaks.off("segments.remove_all",this._onSegmentsRemoveAll),this._peaks.off("segments.dragged",this._onSegmentsDragged)},t.prototype.fitToView=function(){for(var t in this._segmentShapes)r.objectHasProperty(this._segmentShapes,t)&&this._segmentShapes[t].fitToView()},t.prototype.draw=function(){this._layer.draw()},t.prototype.getHeight=function(){return this._layer.getHeight()},t}(t("./segment-shape"),t("./utils"),t("konva"))},{"./segment-shape":84,"./utils":87,konva:41}],87:[function(t,e,i){e.exports=function(){"use strict";function s(t,e){for(t=t.toString();t.length<e;)t="0"+t;return t}return"function"!=typeof Number.isFinite&&(Number.isFinite=function(t){return"number"==typeof t&&t==t&&t!==1/0&&t!==-1/0}),{formatTime:function(t,e){var i=[],n=Math.floor(t%1*Math.pow(10,e)),o=Math.floor(t),r=Math.floor(o/60);0<(t=Math.floor(r/60))&&i.push(t),i.push(r%60),i.push(o%60);for(var a=0;a<i.length;a++)i[a]=s(i[a],2);return i=i.join(":"),0<e&&(i+="."+s(n,e)),i},roundUpToNearest:function(t,e){if(0===e)return 0;var i=1;return t<0&&(i=-1,t=-t),i*((Math.ceil(t)+e-1)/e|0)*e},clamp:function(t,e,i){return t<e?e:i<t?i:t},extend:function(t,e){for(var i in e)this.objectHasProperty(e,i)&&(t[i]=e[i]);return t},isInAscendingOrder:function(t){if(0===t.length)return!0;for(var e=t[0],i=1;i<t.length;i++){if(e>=t[i])return!1;e=t[i]}return!0},isNumber:function(t){return"number"==typeof t},isValidTime:function(t){return"number"==typeof t&&Number.isFinite(t)},isObject:function(t){return null!==t&&"object"==typeof t&&!Array.isArray(t)},isString:function(t){return"string"==typeof t},isArrayBuffer:function(t){return Object.prototype.toString.call(t).includes("ArrayBuffer")},isNullOrUndefined:function(t){return null==t},isFunction:function(t){return"function"==typeof t},isBoolean:function(t){return!0===t||!1===t},isHTMLElement:function(t){return t instanceof HTMLElement},isArray:function(t){return Array.isArray(t)},isLinearGradientColor:function(t){return this.isObject(t)&&this.objectHasProperty(t,"linearGradientStart")&&this.objectHasProperty(t,"linearGradientEnd")&&this.objectHasProperty(t,"linearGradientColorStops")&&this.isNumber(t.linearGradientStart)&&this.isNumber(t.linearGradientEnd)&&this.isArray(t.linearGradientColorStops)&&2===t.linearGradientColorStops.length},objectHasProperty:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}}()},{}],88:[function(t,e,i){e.exports=function(i,n,e){"use strict";function t(t){this._peaks=t,this._overview=null,this._zoomview=null}return t.prototype.createOverview=function(t){if(this._overview)return this._overview;var e=this._peaks.getWaveformData();return this._overview=new i(e,t,this._peaks),this._zoomview&&this._overview.showHighlight(this._zoomview.getStartTime(),this._zoomview.getEndTime()),this._overview},t.prototype.createZoomview=function(t){if(this._zoomview)return this._zoomview;var e=this._peaks.getWaveformData();return this._zoomview=new n(e,t,this._peaks),this._zoomview},t.prototype.destroyOverview=function(){this._overview&&this._zoomview&&(this._overview.destroy(),this._overview=null)},t.prototype.destroyZoomview=function(){this._zoomview&&this._overview&&(this._zoomview.destroy(),this._zoomview=null,this._overview.removeHighlightRect())},t.prototype.destroy=function(){this._overview&&(this._overview.destroy(),this._overview=null),this._zoomview&&(this._zoomview.destroy(),this._zoomview=null)},t.prototype.getView=function(t){if(e.isNullOrUndefined(t))return(!this._overview||!this._zoomview)&&(this._overview||this._zoomview)||null;switch(t){case"overview":return this._overview;case"zoomview":return this._zoomview;default:return null}},t}(t("./waveform-overview"),t("./waveform-zoomview"),t("./utils"))},{"./utils":87,"./waveform-overview":91,"./waveform-zoomview":95}],89:[function(t,e,i){e.exports=function(p,n){"use strict";function o(e,t){var i=this;i._axisGridlineColor=t.axisGridlineColor,i._axisLabelColor=t.axisLabelColor,i._axisLabelFont=o._buildFontString(t.axisLabelFontFamily,t.axisLabelFontSize,t.axisLabelFontStyle),i._axisShape=new n.Shape({sceneFunc:function(t){i.drawAxis(t,e)}})}return o._buildFontString=function(t,e,i){return(i=i||"normal")+" "+(e=e||11)+"px "+(t||"sans-serif")},o.prototype.addToLayer=function(t){t.add(this._axisShape)},o.prototype.getAxisLabelScale=function(t){for(var e=1,i=[1,2,5,10,20,30],n=0;;){var o=e*i[n];if(!(t.timeToPixels(o)<60))break;++n===i.length&&(e*=60,n=0)}return o},o.prototype.drawAxis=function(t,e){var i=e.pixelsToTime(e.getFrameOffset()),n=this.getAxisLabelScale(e),o=p.roundUpToNearest(i,n),r=e.timeToPixels(o-i);t.setAttr("strokeStyle",this._axisGridlineColor),t.setAttr("lineWidth",1),t.setAttr("font",this._axisLabelFont),t.setAttr("fillStyle",this._axisLabelColor),t.setAttr("textAlign","left"),t.setAttr("textBaseline","bottom");for(var a=o,s=e.getWidth(),h=e.getHeight();!(s<=(d=r+e.timeToPixels(a-o)));){t.beginPath(),t.moveTo(d+.5,0),t.lineTo(d+.5,10),t.moveTo(d+.5,h),t.lineTo(d+.5,h-10),t.stroke();var l=p.formatTime(a,0),d=d-t.measureText(l).width/2;0<=d&&t.fillText(l,d,h-1-10),a+=n}},o}(t("./utils"),t("konva"))},{"./utils":87,konva:41}],90:[function(t,e,i){e.exports=function(r,a){"use strict";var s="withCredentials"in new XMLHttpRequest;function t(t){this._peaks=t}return t.prototype.init=function(t,e){if(!(t.dataUri&&(t.webAudio||t.audioContext)||t.waveformData&&(t.webAudio||t.audioContext)||t.dataUri&&t.waveformData))return t.audioContext&&(this._peaks.logger("Peaks.init(): The audioContext option is deprecated, please pass a webAudio object instead"),t.webAudio={audioContext:t.audioContext}),t.dataUri?this._getRemoteWaveformData(t,e):t.waveformData?this._buildWaveformFromLocalData(t,e):t.webAudio?t.webAudio.audioBuffer?this._buildWaveformDataFromAudioBuffer(t,e):this._buildWaveformDataUsingWebAudio(t,e):void e(new Error("Peaks.init(): You must pass an audioContext, or dataUri, or waveformData to render waveform data"));e(new TypeError("Peaks.init(): You may only pass one source (webAudio, dataUri, or waveformData) to render waveform data."))},t.prototype._getRemoteWaveformData=function(t,e){var i,n=null,o=null;if(a.isObject(t.dataUri))n=t.dataUri;else{if(!a.isString(t.dataUri))return void e(new TypeError("Peaks.init(): The dataUri option must be an object"));(n={})[t.dataUriDefaultFormat||"json"]=t.dataUri}["ArrayBuffer","JSON"].some((function(t){if(window[t])return o=t.toLowerCase(),i=n[o],Boolean(i)})),i?this._createXHR(i,o,t.withCredentials,(function(t){4===this.readyState&&(200===this.status?1===(t=r.create(t.target.response)).channels||2===t.channels?e(null,t):e(new Error("Peaks.init(): Only mono or stereo waveforms are currently supported")):e(new Error("Unable to fetch remote data. HTTP status "+this.status)))}),(function(){e(new Error("XHR Failed"))})).send():e(new Error("Peaks.init(): Unable to determine a compatible dataUri format for this browser"))},t.prototype._buildWaveformFromLocalData=function(t,e){var i=null,n=null;if(a.isObject(t.waveformData))if(i=t.waveformData,a.isObject(i.json)?n=i.json:a.isArrayBuffer(i.arraybuffer)&&(n=i.arraybuffer),n)try{var o=r.create(n);if(1!==o.channels&&2!==o.channels)return void e(new Error("Peaks.init(): Only mono or stereo waveforms are currently supported"));e(null,o)}catch(t){e(t)}else e(new Error("Peaks.init(): Unable to determine a compatible waveformData format"));else e(new Error("Peaks.init(): The waveformData option must be an object"))},t.prototype._buildWaveformDataUsingWebAudio=function(t,e){var i,n=this,o=window.AudioContext||window.webkitAudioContext;t.webAudio.audioContext instanceof o?((i=t.webAudio).scale!==t.zoomLevels[0]&&(i.scale=t.zoomLevels[0]),(o=n._peaks.options.mediaElement.currentSrc)?n._requestAudioAndBuildWaveformData(o,i,t.withCredentials,e):n._peaks.once("player.canplay",(function(){n._requestAudioAndBuildWaveformData(n._peaks.options.mediaElement.currentSrc,i,t.withCredentials,e)}))):e(new TypeError("Peaks.init(): The webAudio.audioContext option must be a valid AudioContext"))},t.prototype._buildWaveformDataFromAudioBuffer=function(t,e){var i=t.webAudio;i.scale!==t.zoomLevels[0]&&(i.scale=t.zoomLevels[0]);i={audio_buffer:i.audioBuffer,split_channels:i.multiChannel,scale:i.scale};r.createFromAudio(i,e)},t.prototype._requestAudioAndBuildWaveformData=function(t,e,i,n){t?this._createXHR(t,"arraybuffer",i,(function(t){4===this.readyState&&(200===this.status?(t={audio_context:e.audioContext,array_buffer:t.target.response,split_channels:e.multiChannel,scale:e.scale},r.createFromAudio(t,n)):n(new Error("Unable to fetch remote data. HTTP status "+this.status)))}),(function(){n(new Error("XHR Failed"))})).send():this._peaks.logger("Peaks.init(): The mediaElement src is invalid")},t.prototype._createXHR=function(t,e,i,n,o){var r=new XMLHttpRequest;if(r.open("GET",t,!0),s)try{r.responseType=e}catch(t){}return r.onload=n,r.onerror=o,s&&i&&(r.withCredentials=!0),r},t}(t("waveform-data"),t("./utils"))},{"./utils":87,"waveform-data":67}],91:[function(t,e,i){e.exports=function(o,r,a,s,h,t,e,l,d){"use strict";function i(t,e,i){var n=this;if(n._originalWaveformData=t,n._container=e,n._peaks=i,n._options=i.options,n._onTimeUpdate=n._onTimeUpdate.bind(this),n._onPlay=n._onPlay.bind(this),n._onPause=n._onPause.bind(this),n._onZoomviewDisplaying=n._onZoomviewDisplaying.bind(this),n._onWindowResize=n._onWindowResize.bind(this),i.on("player.timeupdate",n._onTimeUpdate),i.on("player.play",n._onPlay),i.on("player.pause",n._onPause),i.on("zoomview.displaying",n._onZoomviewDisplaying),i.on("window_resize",n._onWindowResize),n._amplitudeScale=1,n._timeLabelPrecision=i.options.timeLabelPrecision,n._width=e.clientWidth,n._height=e.clientHeight,n._data=t,0!==n._width)try{n._data=t.resample({width:n._width})}catch(t){}d.showWarnings=!1,n._resizeTimeoutId=null,n._stage=new d.Stage({container:e,width:n._width,height:n._height}),n._waveformLayer=new d.Layer({listening:!1}),n._createWaveform(),n._segmentsLayer=new h(i,n,!1),n._segmentsLayer.addToStage(n._stage),n._pointsLayer=new s(i,n,!1),n._pointsLayer.addToStage(n._stage),n._highlightLayer=new o(n,n._options.overviewHighlightOffset,n._options.overviewHighlightColor),n._highlightLayer.addToStage(n._stage),n._createAxisLabels(),n._playheadLayer=new a({player:n._peaks.player,view:n,showPlayheadTime:!1,playheadColor:n._options.playheadColor,playheadTextColor:n._options.playheadTextColor,playheadFontFamily:n._options.fontFamily,playheadFontSize:n._options.fontSize,playheadFontStyle:n._options.fontStyle}),n._playheadLayer.addToStage(n._stage);e=n._peaks.player.getCurrentTime();this._playheadLayer.updatePlayheadTime(e),n._mouseDragHandler=new r(n._stage,{onMouseDown:function(t){t=l.clamp(t,0,n._width);var e=n.pixelsToTime(t);t=n._getDuration();n._playheadLayer.updatePlayheadTime(e=t<e?t:e),i.player.seek(e)},onMouseMove:function(t){t=l.clamp(t,0,n._width);var e=n.pixelsToTime(t);t=n._getDuration();n._playheadLayer.updatePlayheadTime(e=t<e?t:e),n._peaks.player.seek(e)}}),this._stage.on("dblclick",(function(t){t=t.evt.layerX,t=n.pixelsToTime(t);n._peaks.emit("overview.dblclick",t)}))}return i.prototype.getName=function(){return"overview"},i.prototype._onTimeUpdate=function(t){this._playheadLayer.updatePlayheadTime(t)},i.prototype._onPlay=function(t){this._playheadLayer.updatePlayheadTime(t)},i.prototype._onPause=function(t){this._playheadLayer.stop(t)},i.prototype._onZoomviewDisplaying=function(t,e){this.showHighlight(t,e)},i.prototype.showHighlight=function(t,e){this._highlightLayer.showHighlight(t,e)},i.prototype._onWindowResize=function(){var t=this;t._resizeTimeoutId&&(clearTimeout(t._resizeTimeoutId),t._resizeTimeoutId=null),0!==t._container.clientWidth&&(t._width=t._container.clientWidth,t._stage.setWidth(t._width),t._resizeTimeoutId=setTimeout((function(){t._width=t._container.clientWidth,t._data=t._originalWaveformData.resample({width:t._width}),t._stage.setWidth(t._width),t._updateWaveform()}),500))},i.prototype.setWaveformData=function(t){this._originalWaveformData=t,0!==this._width?this._data=t.resample({width:this._width}):this._data=t,this._updateWaveform()},i.prototype.timeToPixels=function(t){return Math.floor(t*this._data.sample_rate/this._data.scale)},i.prototype.pixelsToTime=function(t){return t*this._data.scale/this._data.sample_rate},i.prototype.getFrameOffset=function(){return 0},i.prototype.getWidth=function(){return this._width},i.prototype.getHeight=function(){return this._height},i.prototype._getDuration=function(){return this._peaks.player.getDuration()},i.prototype.setAmplitudeScale=function(t){if(!l.isNumber(t)||!Number.isFinite(t))throw new Error("view.setAmplitudeScale(): Scale must be a valid number");this._amplitudeScale=t,this._waveformLayer.draw(),this._segmentsLayer.draw()},i.prototype.getAmplitudeScale=function(){return this._amplitudeScale},i.prototype.getWaveformData=function(){return this._data},i.prototype._createWaveform=function(){this._waveformShape=new e({color:this._options.overviewWaveformColor,view:this}),this._waveformLayer.add(this._waveformShape),this._stage.add(this._waveformLayer)},i.prototype._createAxisLabels=function(){this._axisLayer=new d.Layer({listening:!1}),this._axis=new t(this,{axisGridlineColor:this._options.axisGridlineColor,axisLabelColor:this._options.axisLabelColor,axisLabelFontFamily:this._options.fontFamily,axisLabelFontSize:this._options.fontSize,axisLabelFontStyle:this._options.fontStyle}),this._axis.addToLayer(this._axisLayer),this._stage.add(this._axisLayer)},i.prototype.removeHighlightRect=function(){this._highlightLayer.removeHighlight()},i.prototype._updateWaveform=function(){this._waveformLayer.draw(),this._axisLayer.draw();var t=this._peaks.player.getCurrentTime();this._playheadLayer.updatePlayheadTime(t),this._highlightLayer.updateHighlight();t=this.pixelsToTime(this._width);this._pointsLayer.updatePoints(0,t),this._segmentsLayer.updateSegments(0,t)},i.prototype.setWaveformColor=function(t){this._waveformShape.setWaveformColor(t),this._waveformLayer.draw()},i.prototype.showPlayheadTime=function(t){this._playheadLayer.showPlayheadTime(t)},i.prototype.setTimeLabelPrecision=function(t){this._timeLabelPrecision=t,this._playheadLayer.updatePlayheadText()},i.prototype.formatTime=function(t){return l.formatTime(t,this._timeLabelPrecision)},i.prototype.enableAutoScroll=function(){},i.prototype.enableMarkerEditing=function(t){this._segmentsLayer.enableEditing(t),this._pointsLayer.enableEditing(t)},i.prototype.fitToContainer=function(){if(0!==this._container.clientWidth||0!==this._container.clientHeight){var t=!1;if(this._container.clientWidth!==this._width){this._width=this._container.clientWidth,this._stage.setWidth(this._width);try{this._data=this._originalWaveformData.resample({width:this._width}),t=!0}catch(t){}}this._height=this._container.clientHeight,this._stage.setHeight(this._height),this._waveformShape.fitToView(),this._playheadLayer.fitToView(),this._segmentsLayer.fitToView(),this._pointsLayer.fitToView(),this._highlightLayer.fitToView(),t&&this._updateWaveform(),this._stage.draw()}},i.prototype.destroy=function(){this._resizeTimeoutId&&(clearTimeout(this._resizeTimeoutId),this._resizeTimeoutId=null),this._peaks.off("player.play",this._onPlay),this._peaks.off("player.pause",this._onPause),this._peaks.off("player.timeupdate",this._onTimeUpdate),this._peaks.off("zoomview.displaying",this._onZoomviewDisplaying),this._peaks.off("window_resize",this._onWindowResize),this._playheadLayer.destroy(),this._segmentsLayer.destroy(),this._pointsLayer.destroy(),this._stage&&(this._stage.destroy(),this._stage=null)},i}(t("./highlight-layer"),t("./mouse-drag-handler"),t("./playhead-layer"),t("./points-layer"),t("./segments-layer"),t("./waveform-axis"),t("./waveform-shape"),t("./utils"),t("konva"))},{"./highlight-layer":72,"./mouse-drag-handler":77,"./playhead-layer":79,"./points-layer":82,"./segments-layer":86,"./utils":87,"./waveform-axis":89,"./waveform-shape":94,konva:41}],92:[function(t,e,i){e.exports=function(i,n){"use strict";function t(t){this._peaks=t,this._points=[],this._pointsById={},this._pointIdCounter=0}return t.prototype._getNextPointId=function(){return"peaks.point."+this._pointIdCounter++},t.prototype._addPoint=function(t){this._points.push(t),this._pointsById[t.id]=t},t.prototype._createPoint=function(t){var e={peaks:this._peaks};return n.extend(e,t),n.isNullOrUndefined(e.id)&&(e.id=this._getNextPointId()),n.isNullOrUndefined(e.labelText)&&(e.labelText=""),n.isNullOrUndefined(e.editable)&&(e.editable=!1),new i(e)},t.prototype.getPoints=function(){return this._points},t.prototype.getPoint=function(t){return this._pointsById[t]||null},t.prototype.find=function(e,i){return this._points.filter((function(t){return t.isVisible(e,i)}))},t.prototype.add=function(){var e=this,t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);(t=t.map((function(t){t=e._createPoint(t);if(n.objectHasProperty(e._pointsById,t.id))throw new Error("peaks.points.add(): duplicate id");return t}))).forEach((function(t){e._addPoint(t)})),this._peaks.emit("points.add",t)},t.prototype._findPoint=function(t){for(var e=[],i=0,n=this._points.length;i<n;i++)t(this._points[i])&&e.push(i);return e},t.prototype._removeIndexes=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i]-e.length;n=this._points.splice(n,1)[0];delete this._pointsById[n.id],e.push(n)}return e},t.prototype._removePoints=function(t){t=this._findPoint(t),t=this._removeIndexes(t);return this._peaks.emit("points.remove",t),t},t.prototype.remove=function(e){return this._removePoints((function(t){return t===e}))},t.prototype.removeById=function(e){return this._removePoints((function(t){return t.id===e}))},t.prototype.removeByTime=function(e){return this._removePoints((function(t){return t.time===e}))},t.prototype.removeAll=function(){this._points=[],this._pointsById={},this._peaks.emit("points.remove_all")},t}(t("./point"),t("./utils"))},{"./point":81,"./utils":87}],93:[function(t,e,i){e.exports=function(i,n){"use strict";function t(t){this._peaks=t,this._segments=[],this._segmentsById={},this._segmentIdCounter=0,this._colorIndex=0}t.prototype._getNextSegmentId=function(){return"peaks.segment."+this._segmentIdCounter++};var e=["#001f3f","#0074d9","#7fdbff","#39cccc","#ffdc00","#ff851b","#ff4136","#85144b","#f012be","#b10dc9"];return t.prototype._getSegmentColor=function(){return this._peaks.options.randomizeSegmentColor?(++this._colorIndex===e.length&&(this._colorIndex=0),e[this._colorIndex]):this._peaks.options.segmentColor},t.prototype._addSegment=function(t){this._segments.push(t),this._segmentsById[t.id]=t},t.prototype._createSegment=function(t){if(!n.isObject(t))throw new TypeError("peaks.segments.add(): expected a Segment object parameter");var e={peaks:this._peaks};return n.extend(e,t),n.isNullOrUndefined(e.id)&&(e.id=this._getNextSegmentId()),n.isNullOrUndefined(e.color)&&(e.color=this._getSegmentColor()),n.isNullOrUndefined(e.labelText)&&(e.labelText=""),n.isNullOrUndefined(e.editable)&&(e.editable=!1),new i(e)},t.prototype.getSegments=function(){return this._segments},t.prototype.getSegment=function(t){return this._segmentsById[t]||null},t.prototype.getSegmentsAtTime=function(e){return this._segments.filter((function(t){return e>=t.startTime&&e<t.endTime}))},t.prototype.find=function(e,i){return this._segments.filter((function(t){return t.isVisible(e,i)}))},t.prototype.add=function(){var e=this,t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);(t=t.map((function(t){t=e._createSegment(t);if(n.objectHasProperty(e._segmentsById,t.id))throw new Error("peaks.segments.add(): duplicate id");return t}))).forEach((function(t){e._addSegment(t)})),this._peaks.emit("segments.add",t)},t.prototype._findSegment=function(t){for(var e=[],i=0,n=this._segments.length;i<n;i++)t(this._segments[i])&&e.push(i);return e},t.prototype._removeIndexes=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i]-e.length;n=this._segments.splice(n,1)[0];delete this._segmentsById[n.id],e.push(n)}return e},t.prototype._removeSegments=function(t){t=this._findSegment(t),t=this._removeIndexes(t);return this._peaks.emit("segments.remove",t),t},t.prototype.remove=function(e){return this._removeSegments((function(t){return t===e}))},t.prototype.removeById=function(e){return this._removeSegments((function(t){return t.id===e}))},t.prototype.removeByTime=function(e,i){var t=0<(i="number"==typeof i?i:0)?function(t){return t.startTime===e&&t.endTime===i}:function(t){return t.startTime===e};return this._removeSegments(t)},t.prototype.removeAll=function(){this._segments=[],this._segmentsById={},this._peaks.emit("segments.remove_all")},t}(t("./segment"),t("./utils"))},{"./segment":85,"./utils":87}],94:[function(t,e,i){e.exports=function(o,r){"use strict";function c(t){this._color=t.color;var e={};if(o.isString(t.color))e.fill=t.color;else{if(!o.isLinearGradientColor(t.color))throw new TypeError("Unknown type for color property");var i=t.view._height*(t.color.linearGradientStart/100),n=t.view._height*(t.color.linearGradientEnd/100);e.fillLinearGradientStartPointY=i,e.fillLinearGradientEndPointY=n,e.fillLinearGradientColorStops=[0,t.color.linearGradientColorStops[0],1,t.color.linearGradientColorStops[1]]}r.Shape.call(this,e),this._view=t.view,this._segment=t.segment,this.sceneFunc(this._sceneFunc),this.hitFunc(this._waveformShapeHitFunc)}return(c.prototype=Object.create(r.Shape.prototype)).setWaveformColor=function(t){if(o.isString(t))this.fill(t),this.fillLinearGradientStartPointY(null),this.fillLinearGradientEndPointY(null),this.fillLinearGradientColorStops(null);else{if(!o.isLinearGradientColor(t))throw new TypeError("Unknown type for color property");this.fill(null);var e=this._view._height*(t.linearGradientStart/100),i=this._view._height*(t.linearGradientEnd/100);this.fillLinearGradientStartPointY(e),this.fillLinearGradientEndPointY(i),this.fillLinearGradientColorStops([0,t.linearGradientColorStops[0],1,t.linearGradientColorStops[1]])}},c.prototype.fitToView=function(){this.setWaveformColor(this._color)},c.prototype._sceneFunc=function(t){var e=this._view.getFrameOffset(),i=this._view.getWidth(),n=this._view.getHeight();this._drawWaveform(t,this._view.getWaveformData(),e,this._segment?this._view.timeToPixels(this._segment.startTime):e,this._segment?this._view.timeToPixels(this._segment.endTime):e+i,i,n)},c.prototype._drawWaveform=function(t,e,i,n,o,r,a){n<i&&(n=i);(o=(r=i+r)<o?r:o)>e.length&&(o=e.length);for(var s=e.channels,h=0,l=Math.floor(a/s),d=0;d<s;d++)d===s-1&&(l=a-(s-1)*l),this._drawChannel(t,e.channel(d),i,n,o,h,l),h+=l},c.prototype._drawChannel=function(t,e,i,n,o,r,a){var s,h,l,d,p=this._view.getAmplitudeScale();for(t.beginPath(),s=n;s<o;s++)h=e.min_sample(s),l=s-i+.5,d=r+c.scaleY(h,a,p)+.5,t.lineTo(l,d);for(s=o-1;n<=s;s--)h=e.max_sample(s),l=s-i+.5,d=r+c.scaleY(h,a,p)+.5,t.lineTo(l,d);t.closePath(),t.fillShape(this)},c.prototype._waveformShapeHitFunc=function(t){var e,i,n,o;this._segment&&(n=this._view.getFrameOffset(),e=this._view.getWidth(),(i=this._view.getHeight()-20)<0&&(i=0),n=(o=this._view.timeToPixels(this._segment.startTime))-n,o=this._view.timeToPixels(this._segment.endTime)-o,n<0&&(o-=-n,n=0),e<n+o&&(o-=n+o-e),t.beginPath(),t.rect(n,10,o,i),t.closePath(),t.fillStrokeShape(this))},c.scaleY=function(t,e,i){return o.clamp(Math.floor(-(e-1)*(t*i+128)/255+(e-1)),0,e-1)},c}(t("./utils"),t("konva"))},{"./utils":87,konva:41}],95:[function(t,e,i){e.exports=function(o,r,a,s,t,e,h,l){"use strict";function i(t,e,i){var n=this;n._originalWaveformData=t,n._container=e,n._peaks=i,n._options=i.options,n._onTimeUpdate=n._onTimeUpdate.bind(n),n._onPlay=n._onPlay.bind(n),n._onPause=n._onPause.bind(n),n._onWindowResize=n._onWindowResize.bind(n),n._onKeyboardLeft=n._onKeyboardLeft.bind(n),n._onKeyboardRight=n._onKeyboardRight.bind(n),n._onKeyboardShiftLeft=n._onKeyboardShiftLeft.bind(n),n._onKeyboardShiftRight=n._onKeyboardShiftRight.bind(n),n._peaks.on("player.timeupdate",n._onTimeUpdate),n._peaks.on("player.play",n._onPlay),n._peaks.on("player.pause",n._onPause),n._peaks.on("window_resize",n._onWindowResize),n._peaks.on("keyboard.left",n._onKeyboardLeft),n._peaks.on("keyboard.right",n._onKeyboardRight),n._peaks.on("keyboard.shift_left",n._onKeyboardShiftLeft),n._peaks.on("keyboard.shift_right",n._onKeyboardShiftRight),n._enableAutoScroll=!0,n._amplitudeScale=1,n._timeLabelPrecision=n._options.timeLabelPrecision,n._data=null,n._pixelLength=0;t=i.zoom.getZoomLevel();n._zoomLevelAuto=!1,n._zoomLevelSeconds=null,n._resizeTimeoutId=null,n._resampleData({scale:t}),n._width=e.clientWidth,n._height=e.clientHeight,n._frameOffset=0,n._stage=new l.Stage({container:e,width:n._width,height:n._height}),n._waveformLayer=new l.Layer({listening:!1}),n._createWaveform(),n._segmentsLayer=new s(i,n,!0),n._segmentsLayer.addToStage(n._stage),n._pointsLayer=new a(i,n,!0),n._pointsLayer.addToStage(n._stage),n._createAxisLabels(),n._playheadLayer=new r({player:n._peaks.player,view:n,showPlayheadTime:n._options.showPlayheadTime,playheadColor:n._options.playheadColor,playheadTextColor:n._options.playheadTextColor,playheadFontFamily:n._options.fontFamily,playheadFontSize:n._options.fontSize,playheadFontStyle:n._options.fontStyle}),n._playheadLayer.addToStage(n._stage);i=n._peaks.player.getCurrentTime();n._syncPlayhead(i),n._mouseDragHandler=new o(n._stage,{onMouseDown:function(t){this.initialFrameOffset=n._frameOffset,this.mouseDownX=t},onMouseMove:function(t){t=this.mouseDownX-t;(t=h.clamp(this.initialFrameOffset+t,0,n._pixelLength-n._width))!==this.initialFrameOffset&&n._updateWaveform(t)},onMouseUp:function(){var t,e;n._mouseDragHandler.isDragging()||(t=Math.floor(this.mouseDownX),e=n._frameOffset+t,t=n.pixelsToTime(e),e=n._getDuration(),n._playheadLayer.updatePlayheadTime(t=e<t?e:t),n._peaks.player.seek(t))}}),this._stage.on("dblclick",(function(t){t=t.evt.layerX,t=n._frameOffset+t,t=n.pixelsToTime(t);n._peaks.emit("zoomview.dblclick",t)}))}return i.prototype.getName=function(){return"zoomview"},i.prototype._onTimeUpdate=function(t){this._mouseDragHandler.isDragging()||this._syncPlayhead(t)},i.prototype._onPlay=function(t){this._playheadLayer.updatePlayheadTime(t)},i.prototype._onPause=function(t){this._playheadLayer.stop(t)},i.prototype._onWindowResize=function(){var t=this,e=t._container.clientWidth;t._zoomLevelAuto?(t._resizeTimeoutId&&(clearTimeout(t._resizeTimeoutId),t._resizeTimeoutId=null),0!==e&&(t._width=e,t._stage.width(e),t._resizeTimeoutId=setTimeout((function(){t._width=e,t._data=t._originalWaveformData.resample(e),t._stage.width(e),t._updateWaveform(t._frameOffset)}),500))):(t._width=e,t._stage.width(e),t._updateWaveform(t._frameOffset))},i.prototype._onKeyboardLeft=function(){this._keyboardScroll(-1,!1)},i.prototype._onKeyboardRight=function(){this._keyboardScroll(1,!1)},i.prototype._onKeyboardShiftLeft=function(){this._keyboardScroll(-1,!0)},i.prototype._onKeyboardShiftRight=function(){this._keyboardScroll(1,!0)},i.prototype._keyboardScroll=function(t,e){t=e?t*this._width:t*this.timeToPixels(this._options.nudgeIncrement);this._updateWaveform(this._frameOffset+t)},i.prototype.setWaveformData=function(t){this._originalWaveformData=t},i.prototype._syncPlayhead=function(t){this._playheadLayer.updatePlayheadTime(t),this._enableAutoScroll&&(t=this.timeToPixels(t),(this._frameOffset+this._width-100<=t||t<this._frameOffset)&&(this._frameOffset=t-100,this._frameOffset<0&&(this._frameOffset=0),this._updateWaveform(this._frameOffset)))},i.prototype._getScale=function(t){return t*this._data.sample_rate/this._width},i.prototype.setZoom=function(t){var e;if(o=t,h.objectHasProperty(o,"scale")&&"auto"===o.scale||h.objectHasProperty(o,"seconds")&&"auto"===o.seconds){var i=this._peaks.player.getDuration();if(!h.isValidTime(i))return!1;this._zoomLevelAuto=!0,this._zoomLevelSeconds=null,e=this._getScale(i)}else{if(h.objectHasProperty(t,"scale"))this._zoomLevelSeconds=null,e=t.scale;else if(h.objectHasProperty(t,"seconds")){if(!h.isValidTime(t.seconds))return!1;this._zoomLevelSeconds=t.seconds,e=this._getScale(t.seconds)}this._zoomLevelAuto=!1}e<this._originalWaveformData.scale&&(this._peaks.logger("peaks.zoomview.setZoom(): zoom level must be at least "+this._originalWaveformData.scale),e=this._originalWaveformData.scale);var n=this._peaks.player.getCurrentTime(),o=this._playheadLayer.getPlayheadOffset();i=0<=o&&o<this._width?n:(o=Math.floor(this._width/2),this.pixelsToTime(this._frameOffset+o)),t=this._scale;this._resampleData({scale:e});i=this.timeToPixels(i);return this._frameOffset=i-o,this._updateWaveform(this._frameOffset),this._playheadLayer.zoomLevelChanged(),this._playheadLayer.updatePlayheadTime(n),this._peaks.emit("zoom.update",e,t),!0},i.prototype._resampleData=function(t){this._data=this._originalWaveformData.resample(t),this._scale=this._data.scale,this._pixelLength=this._data.length},i.prototype.getStartTime=function(){return this.pixelsToTime(this._frameOffset)},i.prototype.getEndTime=function(){return this.pixelsToTime(this._frameOffset+this._width)},i.prototype.setStartTime=function(t){t<0&&(t=0),this._zoomLevelAuto&&(t=0),this._updateWaveform(this.timeToPixels(t))},i.prototype.timeToPixels=function(t){return Math.floor(t*this._data.sample_rate/this._data.scale)},i.prototype.pixelsToTime=function(t){return t*this._data.scale/this._data.sample_rate},i.prototype.getFrameOffset=function(){return this._frameOffset},i.prototype.getWidth=function(){return this._width},i.prototype.getHeight=function(){return this._height},i.prototype._getDuration=function(){return this._peaks.player.getDuration()},i.prototype.setAmplitudeScale=function(t){if(!h.isNumber(t)||!Number.isFinite(t))throw new Error("view.setAmplitudeScale(): Scale must be a valid number");this._amplitudeScale=t,this._waveformLayer.draw(),this._segmentsLayer.draw()},i.prototype.getAmplitudeScale=function(){return this._amplitudeScale},i.prototype.getWaveformData=function(){return this._data},i.prototype._createWaveform=function(){this._waveformShape=new e({color:this._options.zoomWaveformColor,view:this}),this._waveformLayer.add(this._waveformShape),this._stage.add(this._waveformLayer),this._peaks.emit("zoomview.displaying",0,this.pixelsToTime(this._width))},i.prototype._createAxisLabels=function(){this._axisLayer=new l.Layer({listening:!1}),this._axis=new t(this,{axisGridlineColor:this._options.axisGridlineColor,axisLabelColor:this._options.axisLabelColor,axisLabelFontFamily:this._options.fontFamily,axisLabelFontSize:this._options.fontSize,axisLabelFontStyle:this._options.fontStyle}),this._axis.addToLayer(this._axisLayer),this._stage.add(this._axisLayer)},i.prototype._updateWaveform=function(t){var e=this._pixelLength<this._width?(t=0,this._width):this._pixelLength-this._width;t=h.clamp(t,0,e),this._frameOffset=t;e=this._playheadLayer.getPlayheadPixel();this._playheadLayer.updatePlayheadTime(this.pixelsToTime(e)),this._waveformLayer.draw(),this._axisLayer.draw();t=this.pixelsToTime(this._frameOffset),e=this.pixelsToTime(this._frameOffset+this._width);this._pointsLayer.updatePoints(t,e),this._segmentsLayer.updateSegments(t,e),this._peaks.emit("zoomview.displaying",t,e)},i.prototype.setWaveformColor=function(t){this._waveformShape.setWaveformColor(t),this._waveformLayer.draw()},i.prototype.showPlayheadTime=function(t){this._playheadLayer.showPlayheadTime(t)},i.prototype.setTimeLabelPrecision=function(t){this._timeLabelPrecision=t,this._playheadLayer.updatePlayheadText()},i.prototype.formatTime=function(t){return h.formatTime(t,this._timeLabelPrecision)},i.prototype.enableAutoScroll=function(t){this._enableAutoScroll=t},i.prototype.enableMarkerEditing=function(t){this._segmentsLayer.enableEditing(t),this._pointsLayer.enableEditing(t)},i.prototype.fitToContainer=function(){if(0!==this._container.clientWidth||0!==this._container.clientHeight){var t=!1;if(this._container.clientWidth!==this._width){this._width=this._container.clientWidth,this._stage.width(this._width);var e,i=!1;if(this._zoomLevelAuto?(i=!0,e={width:this._width}):null!==this._zoomLevelSeconds&&(i=!0,e={scale:this._getScale(this._zoomLevelSeconds)}),i)try{this._resampleData(e),t=!0}catch(t){}}this._height=this._container.clientHeight,this._stage.height(this._height),this._waveformShape.fitToView(),this._playheadLayer.fitToView(),this._segmentsLayer.fitToView(),this._pointsLayer.fitToView(),t&&this._updateWaveform(this._frameOffset),this._stage.draw()}},i.prototype.destroy=function(){this._resizeTimeoutId&&(clearTimeout(this._resizeTimeoutId),this._resizeTimeoutId=null),this._peaks.off("player.timeupdate",this._onTimeUpdate),this._peaks.off("player.play",this._onPlay),this._peaks.off("player.pause",this._onPause),this._peaks.off("window_resize",this._onWindowResize),this._peaks.off("keyboard.left",this._onKeyboardLeft),this._peaks.off("keyboard.right",this._onKeyboardRight),this._peaks.off("keyboard.shift_left",this._onKeyboardShiftLeft),this._peaks.off("keyboard.shift_right",this._onKeyboardShiftRight),this._playheadLayer.destroy(),this._segmentsLayer.destroy(),this._pointsLayer.destroy(),this._stage&&(this._stage.destroy(),this._stage=null)},i}(t("./mouse-drag-handler"),t("./playhead-layer"),t("./points-layer"),t("./segments-layer"),t("./waveform-axis"),t("./waveform-shape"),t("./utils"),t("konva"))},{"./mouse-drag-handler":77,"./playhead-layer":79,"./points-layer":82,"./segments-layer":86,"./utils":87,"./waveform-axis":89,"./waveform-shape":94,konva:41}],96:[function(t,e,i){e.exports=function(){"use strict";function t(t,e){this._peaks=t,this._zoomLevels=e,this._zoomLevelIndex=0}return t.prototype.setZoomLevels=function(t){this._zoomLevels=t,this.setZoom(0,!0)},t.prototype.zoomIn=function(){this.setZoom(this._zoomLevelIndex-1)},t.prototype.zoomOut=function(){this.setZoom(this._zoomLevelIndex+1)},t.prototype.setZoom=function(t,e){(t=t>=this._zoomLevels.length?this._zoomLevels.length-1:t)<0&&(t=0),!e&&t===this._zoomLevelIndex||(this._zoomLevelIndex=t,(e=this._peaks.views.getView("zoomview"))&&e.setZoom({scale:this._zoomLevels[t]}))},t.prototype.getZoom=function(){return this._zoomLevelIndex},t.prototype.getZoomLevel=function(){return this._zoomLevels[this._zoomLevelIndex]},t}()},{}]},{},[74])(74)}));
/*!
 * clipboard.js v2.0.1
 * https://zenorocha.github.io/clipboard.js
 * 
 * Licensed MIT Â© Zeno Rocha
 */
t=this,e=function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,n){var o,r,i;r=[t,n(7)],o=function(t,e){"use strict";var o=function(t){return t&&t.__esModule?t:{default:t}}(e),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),a=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.resolveOptions(e),this.initSelection()}return i(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,o.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,o.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==(void 0===t?"undefined":r(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=a},void 0!==(i="function"==typeof o?o.apply(e,r):o)&&(t.exports=i)},function(t,e,n){var c=n(6),u=n(5);t.exports=function(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!c.string(e))throw new TypeError("Second argument must be a String");if(!c.fn(n))throw new TypeError("Third argument must be a Function");if(c.node(t))return function(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}(t,e,n);if(c.nodeList(t))return function(t,e,n){return Array.prototype.forEach.call(t,(function(t){t.addEventListener(e,n)})),{destroy:function(){Array.prototype.forEach.call(t,(function(t){t.removeEventListener(e,n)}))}}}(t,e,n);if(c.string(t))return function(t,e,n){return u(document.body,t,e,n)}(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},function(t,e){function n(){}n.prototype={on:function(t,e,n){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function o(){r.off(t,o),e.apply(n,arguments)}var r=this;return o._=e,this.on(t,o,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),o=0,r=n.length;o<r;o++)n[o].fn.apply(n[o].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),o=n[t],r=[];if(o&&e)for(var i=0,a=o.length;i<a;i++)o[i].fn!==e&&o[i].fn._!==e&&r.push(o[i]);return r.length?n[t]=r:delete n[t],this}},t.exports=n},function(t,e,n){var o,r,i;r=[t,n(0),n(2),n(1)],void 0!==(i="function"==typeof(o=function(t,e,n,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function u(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}var l=r(e),s=r(n),f=r(o),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),p=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.resolveOptions(n),o.listenClick(t),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),h(e,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===d(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,f.default)(t,"click",(function(t){return e.onClick(t)}))}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new l.default({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return u("action",t)}},{key:"defaultTarget",value:function(t){var e=u("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return u("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,n=!!document.queryCommandSupported;return e.forEach((function(t){n=n&&!!document.queryCommandSupported(t)})),n}}]),e}(s.default);t.exports=p})?o.apply(e,r):o)&&(t.exports=i)},function(t,e){var o=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}t.exports=function(t,e){for(;t&&t.nodeType!==o;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}},function(t,e,n){function o(t,e,n,o,r){var a=i.apply(this,arguments);return t.addEventListener(n,a,r),{destroy:function(){t.removeEventListener(n,a,r)}}}function i(t,e,n,o){return function(n){n.delegateTarget=a(n.target,e),n.delegateTarget&&o.call(t,n)}}var a=n(4);t.exports=function(t,e,n,r,i){return"function"==typeof t.addEventListener?o.apply(null,arguments):"function"==typeof n?o.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,(function(t){return o(t,e,n,r,i)})))}},function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var n=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},function(t,e){t.exports=function(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var o=window.getSelection(),r=document.createRange();r.selectNodeContents(t),o.removeAllRanges(),o.addRange(r),e=o.toString()}return e}}])},"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ClipboardJS=e():t.ClipboardJS=e();/*! nouislider - 14.0.1 - 6/21/2019 */!function(t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():window.noUiSlider=t()}((function(){"use strict";var lt="14.0.1";function ut(t){t.parentElement.removeChild(t)}function s(t){return null!=t}function ct(t){t.preventDefault()}function i(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function pt(t,e,r){0<r&&(ht(t,e),setTimeout((function(){mt(t,e)}),r))}function ft(t){return Math.max(Math.min(t,100),0)}function dt(t){return Array.isArray(t)?t:[t]}function e(t){var e=(t=String(t)).split(".");return 1<e.length?e[1].length:0}function ht(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function mt(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function gt(t){var e=void 0!==window.pageXOffset,r="CSS1Compat"===(t.compatMode||"");return{x:e?window.pageXOffset:r?t.documentElement.scrollLeft:t.body.scrollLeft,y:e?window.pageYOffset:r?t.documentElement.scrollTop:t.body.scrollTop}}function c(t,e){return 100/(e-t)}function p(t,e){return 100*e/(t[1]-t[0])}function f(t,e){for(var r=1;t>=e[r];)r+=1;return r}function o(t,e,r){var n;if("number"==typeof e&&(e=[e]),!Array.isArray(e))throw new Error("noUiSlider ("+lt+"): 'range' contains invalid value.");if(!i(n="min"===t?0:"max"===t?100:parseFloat(t))||!i(e[0]))throw new Error("noUiSlider ("+lt+"): 'range' value isn't numeric.");r.xPct.push(n),r.xVal.push(e[0]),n?r.xSteps.push(!isNaN(e[1])&&e[1]):isNaN(e[1])||(r.xSteps[0]=e[1]),r.xHighestCompleteStep.push(0)}function a(t,e,r){if(e)if(r.xVal[t]!==r.xVal[t+1]){r.xSteps[t]=p([r.xVal[t],r.xVal[t+1]],e)/c(r.xPct[t],r.xPct[t+1]);var n=(r.xVal[t+1]-r.xVal[t])/r.xNumSteps[t],i=Math.ceil(Number(n.toFixed(3))-1),o=r.xVal[t]+r.xNumSteps[t]*i;r.xHighestCompleteStep[t]=o}else r.xSteps[t]=r.xHighestCompleteStep[t]=r.xVal[t]}function l(t,e,r){var n;this.xPct=[],this.xVal=[],this.xSteps=[r||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=e;var i=[];for(n in t)t.hasOwnProperty(n)&&i.push([t[n],n]);for(i.length&&"object"==typeof i[0][0]?i.sort((function(t,e){return t[0][0]-e[0][0]})):i.sort((function(t,e){return t[0]-e[0]})),n=0;n<i.length;n++)o(i[n][1],i[n][0],this);for(this.xNumSteps=this.xSteps.slice(0),n=0;n<this.xNumSteps.length;n++)a(n,this.xNumSteps[n],this)}l.prototype.getMargin=function(t){var e=this.xNumSteps[0];if(e&&t/e%1!=0)throw new Error("noUiSlider ("+lt+"): 'limit', 'margin' and 'padding' must be divisible by step.");return 2===this.xPct.length&&p(this.xVal,t)},l.prototype.toStepping=function(t){return function(t,e,r){if(r>=t.slice(-1)[0])return 100;var n,i,o=f(r,t),a=t[o-1],s=t[o],l=e[o-1],u=e[o];return l+(i=r,p(n=[a,s],n[0]<0?i+Math.abs(n[0]):i-n[0])/c(l,u))}(this.xVal,this.xPct,t)},l.prototype.fromStepping=function(t){return function(t,e,r){if(100<=r)return t.slice(-1)[0];var n,i=f(r,e),o=t[i-1],a=t[i],s=e[i-1];return n=[o,a],(r-s)*c(s,e[i])*(n[1]-n[0])/100+n[0]}(this.xVal,this.xPct,t)},l.prototype.getStep=function(t){return function(t,e,r,n){if(100===n)return n;var i,o,a=f(n,t),s=t[a-1],l=t[a];return r?(l-s)/2<n-s?l:s:e[a-1]?t[a-1]+(i=n-t[a-1],o=e[a-1],Math.round(i/o)*o):n}(this.xPct,this.xSteps,this.snap,t)},l.prototype.getDefaultStep=function(t,e,r){var n=f(t,this.xPct);return(100===t||e&&t===this.xPct[n-1])&&(n=Math.max(n-1,1)),(this.xVal[n]-this.xVal[n-1])/r},l.prototype.getNearbySteps=function(t){var e=f(t,this.xPct);return{stepBefore:{startValue:this.xVal[e-2],step:this.xNumSteps[e-2],highestStep:this.xHighestCompleteStep[e-2]},thisStep:{startValue:this.xVal[e-1],step:this.xNumSteps[e-1],highestStep:this.xHighestCompleteStep[e-1]},stepAfter:{startValue:this.xVal[e],step:this.xNumSteps[e],highestStep:this.xHighestCompleteStep[e]}}},l.prototype.countStepDecimals=function(){var t=this.xNumSteps.map(e);return Math.max.apply(null,t)},l.prototype.convert=function(t){return this.getStep(this.toStepping(t))};var u={to:function(t){return void 0!==t&&t.toFixed(2)},from:Number};function d(t){if("object"==typeof(e=t)&&"function"==typeof e.to&&"function"==typeof e.from)return!0;var e;throw new Error("noUiSlider ("+lt+"): 'format' requires 'to' and 'from' methods.")}function h(t,e){if(!i(e))throw new Error("noUiSlider ("+lt+"): 'step' is not numeric.");t.singleStep=e}function m(t,e){if("object"!=typeof e||Array.isArray(e))throw new Error("noUiSlider ("+lt+"): 'range' is not an object.");if(void 0===e.min||void 0===e.max)throw new Error("noUiSlider ("+lt+"): Missing 'min' or 'max' in 'range'.");if(e.min===e.max)throw new Error("noUiSlider ("+lt+"): 'range' 'min' and 'max' cannot be equal.");t.spectrum=new l(e,t.snap,t.singleStep)}function g(t,e){if(e=dt(e),!Array.isArray(e)||!e.length)throw new Error("noUiSlider ("+lt+"): 'start' option is incorrect.");t.handles=e.length,t.start=e}function v(t,e){if("boolean"!=typeof(t.snap=e))throw new Error("noUiSlider ("+lt+"): 'snap' option must be a boolean.")}function b(t,e){if("boolean"!=typeof(t.animate=e))throw new Error("noUiSlider ("+lt+"): 'animate' option must be a boolean.")}function S(t,e){if("number"!=typeof(t.animationDuration=e))throw new Error("noUiSlider ("+lt+"): 'animationDuration' option must be a number.")}function x(t,e){var r,n=[!1];if("lower"===e?e=[!0,!1]:"upper"===e&&(e=[!1,!0]),!0===e||!1===e){for(r=1;r<t.handles;r++)n.push(e);n.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==t.handles+1)throw new Error("noUiSlider ("+lt+"): 'connect' option doesn't match handle count.");n=e}t.connect=n}function w(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider ("+lt+"): 'orientation' option is invalid.")}}function y(t,e){if(!i(e))throw new Error("noUiSlider ("+lt+"): 'margin' option must be numeric.");if(0!==e&&(t.margin=t.spectrum.getMargin(e),!t.margin))throw new Error("noUiSlider ("+lt+"): 'margin' option is only supported on linear sliders.")}function E(t,e){if(!i(e))throw new Error("noUiSlider ("+lt+"): 'limit' option must be numeric.");if(t.limit=t.spectrum.getMargin(e),!t.limit||t.handles<2)throw new Error("noUiSlider ("+lt+"): 'limit' option is only supported on linear sliders with 2 or more handles.")}function C(t,e){if(!i(e)&&!Array.isArray(e))throw new Error("noUiSlider ("+lt+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(e)&&2!==e.length&&!i(e[0])&&!i(e[1]))throw new Error("noUiSlider ("+lt+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==e){if(Array.isArray(e)||(e=[e,e]),!(t.padding=[t.spectrum.getMargin(e[0]),t.spectrum.getMargin(e[1])])===t.padding[0]||!1===t.padding[1])throw new Error("noUiSlider ("+lt+"): 'padding' option is only supported on linear sliders.");if(t.padding[0]<0||t.padding[1]<0)throw new Error("noUiSlider ("+lt+"): 'padding' option must be a positive number(s).");if(100<t.padding[0]+t.padding[1])throw new Error("noUiSlider ("+lt+"): 'padding' option must not exceed 100% of the range.")}}function N(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1;break;default:throw new Error("noUiSlider ("+lt+"): 'direction' option was not recognized.")}}function U(t,e){if("string"!=typeof e)throw new Error("noUiSlider ("+lt+"): 'behaviour' must be a string containing options.");var r=0<=e.indexOf("tap"),n=0<=e.indexOf("drag"),i=0<=e.indexOf("fixed"),o=0<=e.indexOf("snap"),a=0<=e.indexOf("hover"),s=0<=e.indexOf("unconstrained");if(i){if(2!==t.handles)throw new Error("noUiSlider ("+lt+"): 'fixed' behaviour must be used with 2 handles");y(t,t.start[1]-t.start[0])}if(s&&(t.margin||t.limit))throw new Error("noUiSlider ("+lt+"): 'unconstrained' behaviour cannot be used with margin or limit");t.events={tap:r||o,drag:n,fixed:i,snap:o,hover:a,unconstrained:s}}function k(t,e){if(!1!==e)if(!0===e){t.tooltips=[];for(var r=0;r<t.handles;r++)t.tooltips.push(!0)}else{if(t.tooltips=dt(e),t.tooltips.length!==t.handles)throw new Error("noUiSlider ("+lt+"): must pass a formatter for all handles.");t.tooltips.forEach((function(t){if("boolean"!=typeof t&&("object"!=typeof t||"function"!=typeof t.to))throw new Error("noUiSlider ("+lt+"): 'tooltips' must be passed a formatter or 'false'.")}))}}function P(t,e){d(t.ariaFormat=e)}function A(t,e){d(t.format=e)}function V(t,e){if("boolean"!=typeof(t.keyboardSupport=e))throw new Error("noUiSlider ("+lt+"): 'keyboardSupport' option must be a boolean.")}function M(t,e){t.documentElement=e}function O(t,e){if("string"!=typeof e&&!1!==e)throw new Error("noUiSlider ("+lt+"): 'cssPrefix' must be a string or `false`.");t.cssPrefix=e}function L(t,e){if("object"!=typeof e)throw new Error("noUiSlider ("+lt+"): 'cssClasses' must be an object.");if("string"==typeof t.cssPrefix)for(var r in t.cssClasses={},e)e.hasOwnProperty(r)&&(t.cssClasses[r]=t.cssPrefix+e[r]);else t.cssClasses=e}function vt(e){var r={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:u,format:u},n={step:{r:!1,t:h},start:{r:!0,t:g},connect:{r:!0,t:x},direction:{r:!0,t:N},snap:{r:!1,t:v},animate:{r:!1,t:b},animationDuration:{r:!1,t:S},range:{r:!0,t:m},orientation:{r:!1,t:w},margin:{r:!1,t:y},limit:{r:!1,t:E},padding:{r:!1,t:C},behaviour:{r:!0,t:U},ariaFormat:{r:!1,t:P},format:{r:!1,t:A},tooltips:{r:!1,t:k},keyboardSupport:{r:!0,t:V},documentElement:{r:!1,t:M},cssPrefix:{r:!0,t:O},cssClasses:{r:!0,t:L}},i={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:{target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"}};e.format&&!e.ariaFormat&&(e.ariaFormat=e.format),Object.keys(n).forEach((function(t){if(!s(e[t])&&void 0===i[t]){if(n[t].r)throw new Error("noUiSlider ("+lt+"): '"+t+"' is required.");return!0}n[t].t(r,s(e[t])?e[t]:i[t])})),r.pips=e.pips;var t=document.createElement("div"),o=void 0!==t.style.msTransform,a=void 0!==t.style.transform;r.transformRule=a?"transform":o?"msTransform":"webkitTransform";return r.style=[["left","top"],["right","bottom"]][r.dir][r.ort],r}return{__spectrum:l,version:lt,create:function(t,e){if(!t||!t.nodeName)throw new Error("noUiSlider ("+lt+"): create requires a single element, got: "+t);if(t.noUiSlider)throw new Error("noUiSlider ("+lt+"): Slider was already initialized.");var r=function(t,f,o){var l,u,a,c,i,s,e,p,d=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},h=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}(),y=t,E=f.spectrum,m=[],g=[],v=[],b=0,S={},x=t.ownerDocument,w=f.documentElement||x.documentElement,C=x.body,N=-1,U=0,k=1,P=2,A="rtl"===x.dir||1===f.ort?0:100;function V(t,e){var r=x.createElement("div");return e&&ht(r,e),t.appendChild(r),r}function M(t,e){var r=V(t,f.cssClasses.origin),n=V(r,f.cssClasses.handle);return V(n,f.cssClasses.touchArea),n.setAttribute("data-handle",e),f.keyboardSupport&&(n.setAttribute("tabindex","0"),n.addEventListener("keydown",(function(t){return function(t,e){if(L()||z(e))return!1;var r=["Left","Right"],n=["Down","Up"];f.dir&&!f.ort?r.reverse():f.ort&&!f.dir&&n.reverse();var i=t.key.replace("Arrow",""),o=i===n[0]||i===r[0],a=i===n[1]||i===r[1];if(!o&&!a)return!0;t.preventDefault();var s=o?0:1,l=st(e)[s];if(null===l)return!1;!1===l&&(l=E.getDefaultStep(g[e],o,10));return l=Math.max(l,1e-7),l*=o?-1:1,rt(e,it(m[e]+l,e),!0,!0),J("slide",e),J("update",e),J("change",e),J("set",e),!1}(t,e)}))),n.setAttribute("role","slider"),n.setAttribute("aria-orientation",f.ort?"vertical":"horizontal"),0===e?ht(n,f.cssClasses.handleLower):e===f.handles-1&&ht(n,f.cssClasses.handleUpper),r}function O(t,e){return!!e&&V(t,f.cssClasses.connect)}function r(t,e){return!!f.tooltips[e]&&V(t.firstChild,f.cssClasses.tooltip)}function L(){return y.hasAttribute("disabled")}function z(t){return u[t].hasAttribute("disabled")}function j(){i&&(G("update.tooltips"),i.forEach((function(t){t&&ut(t)})),i=null)}function H(){j(),i=u.map(r),$("update.tooltips",(function(t,e,r){if(i[e]){var n=t[e];!0!==f.tooltips[e]&&(n=f.tooltips[e].to(r[e])),i[e].innerHTML=n}}))}function F(e,i,o){var a=x.createElement("div"),s=[];s[U]=f.cssClasses.valueNormal,s[k]=f.cssClasses.valueLarge,s[P]=f.cssClasses.valueSub;var l=[];l[U]=f.cssClasses.markerNormal,l[k]=f.cssClasses.markerLarge,l[P]=f.cssClasses.markerSub;var u=[f.cssClasses.valueHorizontal,f.cssClasses.valueVertical],c=[f.cssClasses.markerHorizontal,f.cssClasses.markerVertical];function p(t,e){var r=e===f.cssClasses.value,n=r?s:l;return e+" "+(r?u:c)[f.ort]+" "+n[t]}return ht(a,f.cssClasses.pips),ht(a,0===f.ort?f.cssClasses.pipsHorizontal:f.cssClasses.pipsVertical),Object.keys(e).forEach((function(t){!function(t,e,r){if((r=i?i(e,r):r)!==N){var n=V(a,!1);n.className=p(r,f.cssClasses.marker),n.style[f.style]=t+"%",U<r&&((n=V(a,!1)).className=p(r,f.cssClasses.value),n.setAttribute("data-value",e),n.style[f.style]=t+"%",n.innerHTML=o.to(e))}}(t,e[t][0],e[t][1])})),a}function D(){c&&(ut(c),c=null)}function T(t){D();var m,g,v,b,e,r,S,x,w,n=t.mode,i=t.density||1,o=t.filter||!1,a=function(t,e,r){if("range"===t||"steps"===t)return E.xVal;if("count"===t){if(e<2)throw new Error("noUiSlider ("+lt+"): 'values' (>= 2) required for mode 'count'.");var n=e-1,i=100/n;for(e=[];n--;)e[n]=n*i;e.push(100),t="positions"}return"positions"===t?e.map((function(t){return E.fromStepping(r?E.getStep(t):t)})):"values"===t?r?e.map((function(t){return E.fromStepping(E.getStep(E.toStepping(t)))})):e:void 0}(n,t.values||!1,t.stepped||!1),s=(m=i,g=n,v=a,b={},e=E.xVal[0],r=E.xVal[E.xVal.length-1],x=S=!1,w=0,(v=v.slice().sort((function(t,e){return t-e})).filter((function(t){return!this[t]&&(this[t]=!0)}),{}))[0]!==e&&(v.unshift(e),S=!0),v[v.length-1]!==r&&(v.push(r),x=!0),v.forEach((function(t,e){var r,n,i,o,a,s,l,u,c,p,f=t,d=v[e+1],h="steps"===g;if(h&&(r=E.xNumSteps[e]),r||(r=d-f),!1!==f&&void 0!==d)for(r=Math.max(r,1e-7),n=f;n<=d;n=(n+r).toFixed(7)/1){for(u=(a=(o=E.toStepping(n))-w)/m,p=a/(c=Math.round(u)),i=1;i<=c;i+=1)b[(s=w+i*p).toFixed(5)]=[E.fromStepping(s),0];l=-1<v.indexOf(n)?k:h?P:U,!e&&S&&(l=0),n===d&&x||(b[o.toFixed(5)]=[n,l]),w=o}})),b),l=t.format||{to:Math.round};return c=y.appendChild(F(s,o,l))}function R(){var t=l.getBoundingClientRect(),e="offset"+["Width","Height"][f.ort];return 0===f.ort?t.width||l[e]:t.height||l[e]}function B(n,i,o,a){var e=function(t){return!!(t=function(t,e,r){var n,i,o=0===t.type.indexOf("touch"),a=0===t.type.indexOf("mouse"),s=0===t.type.indexOf("pointer");0===t.type.indexOf("MSPointer")&&(s=!0);if(o){var l=function(t){return t.target===r||r.contains(t.target)};if("touchstart"===t.type){var u=Array.prototype.filter.call(t.touches,l);if(1<u.length)return!1;n=u[0].pageX,i=u[0].pageY}else{var c=Array.prototype.find.call(t.changedTouches,l);if(!c)return!1;n=c.pageX,i=c.pageY}}e=e||gt(x),(a||s)&&(n=t.clientX+e.x,i=t.clientY+e.y);return t.pageOffset=e,t.points=[n,i],t.cursor=a||s,t}(t,a.pageOffset,a.target||i))&&!(L()&&!a.doNotReject)&&(e=y,r=f.cssClasses.tap,!((e.classList?e.classList.contains(r):new RegExp("\\b"+r+"\\b").test(e.className))&&!a.doNotReject)&&!(n===d.start&&void 0!==t.buttons&&1<t.buttons)&&(!a.hover||!t.buttons)&&(h||t.preventDefault(),t.calcPoint=t.points[f.ort],void o(t,a)));var e,r},r=[];return n.split(" ").forEach((function(t){i.addEventListener(t,e,!!h&&{passive:!0}),r.push([t,e])})),r}function q(t){var e,r,n,i,o,a,s=100*(t-(e=l,r=f.ort,n=e.getBoundingClientRect(),o=(i=e.ownerDocument).documentElement,a=gt(i),/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(a.x=0),r?n.top+a.y-o.clientTop:n.left+a.x-o.clientLeft))/R();return s=ft(s),f.dir?100-s:s}function X(t,e){"mouseout"===t.type&&"HTML"===t.target.nodeName&&null===t.relatedTarget&&_(t,e)}function Y(t,e){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===t.buttons&&0!==e.buttonsProperty)return _(t,e);var r=(f.dir?-1:1)*(t.calcPoint-e.startCalcPoint);Z(0<r,100*r/e.baseSize,e.locations,e.handleNumbers)}function _(t,e){e.handle&&(mt(e.handle,f.cssClasses.active),b-=1),e.listeners.forEach((function(t){w.removeEventListener(t[0],t[1])})),0===b&&(mt(y,f.cssClasses.drag),et(),t.cursor&&(C.style.cursor="",C.removeEventListener("selectstart",ct))),e.handleNumbers.forEach((function(t){J("change",t),J("set",t),J("end",t)}))}function I(t,e){if(e.handleNumbers.some(z))return!1;var r;1===e.handleNumbers.length&&(r=u[e.handleNumbers[0]].children[0],b+=1,ht(r,f.cssClasses.active));t.stopPropagation();var n=[],i=B(d.move,w,Y,{target:t.target,handle:r,listeners:n,startCalcPoint:t.calcPoint,baseSize:R(),pageOffset:t.pageOffset,handleNumbers:e.handleNumbers,buttonsProperty:t.buttons,locations:g.slice()}),o=B(d.end,w,_,{target:t.target,handle:r,listeners:n,doNotReject:!0,handleNumbers:e.handleNumbers}),a=B("mouseout",w,X,{target:t.target,handle:r,listeners:n,doNotReject:!0,handleNumbers:e.handleNumbers});n.push.apply(n,i.concat(o,a)),t.cursor&&(C.style.cursor=getComputedStyle(t.target).cursor,1<u.length&&ht(y,f.cssClasses.drag),C.addEventListener("selectstart",ct,!1)),e.handleNumbers.forEach((function(t){J("start",t)}))}function $(t,e){S[t]=S[t]||[],S[t].push(e),"update"===t.split(".")[0]&&u.forEach((function(t,e){J("update",e)}))}function G(t){var n=t&&t.split(".")[0],i=n&&t.substring(n.length);Object.keys(S).forEach((function(t){var e=t.split(".")[0],r=t.substring(e.length);n&&n!==e||i&&i!==r||delete S[t]}))}function J(r,n,i){Object.keys(S).forEach((function(t){var e=t.split(".")[0];r===e&&S[t].forEach((function(t){t.call(s,m.map(f.format.to),n,m.slice(),i||!1,g.slice())}))}))}function K(t,e,r,n,i,o){return 1<u.length&&!f.events.unconstrained&&(n&&0<e&&(r=Math.max(r,t[e-1]+f.margin)),i&&e<u.length-1&&(r=Math.min(r,t[e+1]-f.margin))),1<u.length&&f.limit&&(n&&0<e&&(r=Math.min(r,t[e-1]+f.limit)),i&&e<u.length-1&&(r=Math.max(r,t[e+1]-f.limit))),f.padding&&(0===e&&(r=Math.max(r,f.padding[0])),e===u.length-1&&(r=Math.min(r,100-f.padding[1]))),!((r=ft(r=E.getStep(r)))===t[e]&&!o)&&r}function Q(t,e){var r=f.ort;return(r?e:t)+", "+(r?t:e)}function Z(t,n,r,e){var i=r.slice(),o=[!t,t],a=[t,!t];e=e.slice(),t&&e.reverse(),1<e.length?e.forEach((function(t,e){var r=K(i,t,i[t]+n,o[e],a[e],!1);!1===r?n=0:(n=r-i[t],i[t]=r)})):o=a=[!0];var s=!1;e.forEach((function(t,e){s=rt(t,r[t]+n,o[e],a[e])||s})),s&&e.forEach((function(t){J("update",t),J("slide",t)}))}function tt(t,e){return f.dir?100-t-e:t}function et(){v.forEach((function(t){var e=50<g[t]?-1:1,r=3+(u.length+e*t);u[t].style.zIndex=r}))}function rt(t,e,r,n){return!1!==(e=K(g,t,e,r,n,!1))&&(function(t,e){g[t]=e,m[t]=E.fromStepping(e);var r="translate("+Q(10*(tt(e,0)-A)+"%","0")+")";u[t].style[f.transformRule]=r,nt(t),nt(t+1)}(t,e),!0)}function nt(t){if(a[t]){var e=0,r=100;0!==t&&(e=g[t-1]),t!==a.length-1&&(r=g[t]);var n=r-e,i="translate("+Q(tt(e,n)+"%","0")+")",o="scale("+Q(n/100,"1")+")";a[t].style[f.transformRule]=i+" "+o}}function it(t,e){return null===t||!1===t||void 0===t?g[e]:("number"==typeof t&&(t=String(t)),t=f.format.from(t),!1===(t=E.toStepping(t))||isNaN(t)?g[e]:t)}function ot(t,e){var r=dt(t),n=void 0===g[0];e=void 0===e||!!e,f.animate&&!n&&pt(y,f.cssClasses.tap,f.animationDuration),v.forEach((function(t){rt(t,it(r[t],t),!0,!1)})),v.forEach((function(t){rt(t,g[t],!0,!0)})),et(),v.forEach((function(t){J("update",t),null!==r[t]&&e&&J("set",t)}))}function at(){var t=m.map(f.format.to);return 1===t.length?t[0]:t}function st(t){var e=g[t],r=E.getNearbySteps(e),n=m[t],i=r.thisStep.step,o=null;if(f.snap)return[n-r.stepBefore.startValue||null,r.stepAfter.startValue-n||null];!1!==i&&n+i>r.stepAfter.startValue&&(i=r.stepAfter.startValue-n),o=n>r.thisStep.startValue?r.thisStep.step:!1!==r.stepBefore.step&&n-r.stepBefore.highestStep,100===e?i=null:0===e&&(o=null);var a=E.countStepDecimals();return null!==i&&!1!==i&&(i=Number(i.toFixed(a))),null!==o&&!1!==o&&(o=Number(o.toFixed(a))),[o,i]}return ht(e=y,f.cssClasses.target),0===f.dir?ht(e,f.cssClasses.ltr):ht(e,f.cssClasses.rtl),0===f.ort?ht(e,f.cssClasses.horizontal):ht(e,f.cssClasses.vertical),l=V(e,f.cssClasses.base),function(t,e){var r=V(e,f.cssClasses.connects);u=[],(a=[]).push(O(r,t[0]));for(var n=0;n<f.handles;n++)u.push(M(e,n)),v[n]=n,a.push(O(r,t[n+1]))}(f.connect,l),(p=f.events).fixed||u.forEach((function(t,e){B(d.start,t.children[0],I,{handleNumbers:[e]})})),p.tap&&B(d.start,l,(function(t){t.stopPropagation();var i,o,a,e=q(t.calcPoint),r=(i=e,a=!(o=100),u.forEach((function(t,e){if(!z(e)){var r=g[e],n=Math.abs(r-i);(n<o||n<=o&&r<i||100===n&&100===o)&&(a=e,o=n)}})),a);if(!1===r)return!1;f.events.snap||pt(y,f.cssClasses.tap,f.animationDuration),rt(r,e,!0,!0),et(),J("slide",r,!0),J("update",r,!0),J("change",r,!0),J("set",r,!0),f.events.snap&&I(t,{handleNumbers:[r]})}),{}),p.hover&&B(d.move,l,(function(t){var e=q(t.calcPoint),r=E.getStep(e),n=E.fromStepping(r);Object.keys(S).forEach((function(t){"hover"===t.split(".")[0]&&S[t].forEach((function(t){t.call(s,n)}))}))}),{hover:!0}),p.drag&&a.forEach((function(t,e){if(!1!==t&&0!==e&&e!==a.length-1){var r=u[e-1],n=u[e],i=[t];ht(t,f.cssClasses.draggable),p.fixed&&(i.push(r.children[0]),i.push(n.children[0])),i.forEach((function(t){B(d.start,t,I,{handles:[r,n],handleNumbers:[e-1,e]})}))}})),ot(f.start),f.pips&&T(f.pips),f.tooltips&&H(),$("update",(function(t,e,a,r,s){v.forEach((function(t){var e=u[t],r=K(g,t,0,!0,!0,!0),n=K(g,t,100,!0,!0,!0),i=s[t],o=f.ariaFormat.to(a[t]);r=E.fromStepping(r).toFixed(1),n=E.fromStepping(n).toFixed(1),i=E.fromStepping(i).toFixed(1),e.children[0].setAttribute("aria-valuemin",r),e.children[0].setAttribute("aria-valuemax",n),e.children[0].setAttribute("aria-valuenow",i),e.children[0].setAttribute("aria-valuetext",o)}))})),s={destroy:function(){for(var t in f.cssClasses)f.cssClasses.hasOwnProperty(t)&&mt(y,f.cssClasses[t]);for(;y.firstChild;)y.removeChild(y.firstChild);delete y.noUiSlider},steps:function(){return v.map(st)},on:$,off:G,get:at,set:ot,setHandle:function(t,e,r){if(!(0<=(t=Number(t))&&t<v.length))throw new Error("noUiSlider ("+lt+"): invalid handle number, got: "+t);rt(t,it(e,t),!0,!0),J("update",t),r&&J("set",t)},reset:function(t){ot(f.start,t)},__moveHandles:function(t,e,r){Z(t,e,g,r)},options:o,updateOptions:function(e,t){var r=at(),n=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];n.forEach((function(t){void 0!==e[t]&&(o[t]=e[t])}));var i=vt(o);n.forEach((function(t){void 0!==e[t]&&(f[t]=i[t])})),E=i.spectrum,f.margin=i.margin,f.limit=i.limit,f.padding=i.padding,f.pips?T(f.pips):D(),f.tooltips?H():j(),g=[],ot(e.start||r,t)},target:y,removePips:D,removeTooltips:j,pips:T}}(t,vt(e),e);return t.noUiSlider=r}}}));!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Sweetalert2=t()}(this,(function(){"use strict";function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t,n){return(l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return n&&u(i,n.prototype),i}).apply(null,arguments)}function d(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}var t="SweetAlert2:",f=function(e){return Array.prototype.slice.call(e)},R=function(e){console.warn("".concat(t," ").concat(e))},I=function(e){console.error("".concat(t," ").concat(e))},n=[],m=function(e){-1===n.indexOf(e)&&(n.push(e),R(e))},H=function(e){return"function"==typeof e?e():e},D=function(e){return e&&Promise.resolve(e)===e},e=Object.freeze({cancel:"cancel",backdrop:"overlay",close:"close",esc:"esc",timer:"timer"}),h=function(e){var t={};for(var n in e)t[e[n]]="swal2-"+e[n];return t},_=h(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","toast","toast-shown","toast-column","fade","show","hide","noanimation","close","title","header","content","actions","confirm","cancel","footer","icon","icon-text","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","validation-message","progresssteps","activeprogressstep","progresscircle","progressline","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl"]),g=h(["success","warning","info","question","error"]),b={previousBodyPadding:null},v=function(e,t){return e.classList.contains(t)},N=function(e){if(e.focus(),"file"!==e.type){var t=e.value;e.value="",e.value=t}},y=function(e,t,n){e&&t&&("string"==typeof t&&(t=t.split(/\s+/).filter(Boolean)),t.forEach((function(t){e.forEach?e.forEach((function(e){n?e.classList.add(t):e.classList.remove(t)})):n?e.classList.add(t):e.classList.remove(t)})))},z=function(e,t){y(e,t,!0)},W=function(e,t){y(e,t,!1)},U=function(e,t){for(var n=0;n<e.childNodes.length;n++)if(v(e.childNodes[n],t))return e.childNodes[n]},K=function(e){e.style.opacity="",e.style.display=e.id===_.content?"block":"flex"},F=function(e){e.style.opacity="",e.style.display="none"},Z=function(e){return e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w=function(){return document.body.querySelector("."+_.container)},C=function(e){var t=w();return t?t.querySelector("."+e):null},k=function(){return C(_.popup)},x=function(){var e=k();return f(e.querySelectorAll("."+_.icon))},A=function(){return C(_.title)},B=function(){return C(_.content)},S=function(){return C(_.image)},P=function(){return C(_.progresssteps)},E=function(){return C(_["validation-message"])},L=function(){return C(_.confirm)},O=function(){return C(_.cancel)},Q=function(){return C(_.actions)},Y=function(){return C(_.footer)},$=function(){return C(_.close)},J=function(){var e=f(k().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((function(e,t){return e=parseInt(e.getAttribute("tabindex")),(t=parseInt(t.getAttribute("tabindex")))<e?1:e<t?-1:0})),t=f(k().querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex="0"], [contenteditable], audio[controls], video[controls]')).filter((function(e){return"-1"!==e.getAttribute("tabindex")}));return function(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(e.concat(t)).filter((function(e){return Z(e)}))},T=function(){return!M()&&!document.body.classList.contains(_["no-backdrop"])},M=function(){return document.body.classList.contains(_["toast-shown"])},j=function(){return"undefined"==typeof window||"undefined"==typeof document},V='\n <div aria-labelledby="'.concat(_.title,'" aria-describedby="').concat(_.content,'" class="').concat(_.popup,'" tabindex="-1">\n   <div class="').concat(_.header,'">\n     <ul class="').concat(_.progresssteps,'"></ul>\n     <div class="').concat(_.icon," ").concat(g.error,'">\n       <span class="swal2-x-mark"><span class="swal2-x-mark-line-left"></span><span class="swal2-x-mark-line-right"></span></span>\n     </div>\n     <div class="').concat(_.icon," ").concat(g.question,'">\n       <span class="').concat(_["icon-text"],'">?</span>\n      </div>\n     <div class="').concat(_.icon," ").concat(g.warning,'">\n       <span class="').concat(_["icon-text"],'">!</span>\n      </div>\n     <div class="').concat(_.icon," ").concat(g.info,'">\n       <span class="').concat(_["icon-text"],'">i</span>\n      </div>\n     <div class="').concat(_.icon," ").concat(g.success,'">\n       <div class="swal2-success-circular-line-left"></div>\n       <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n       <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n       <div class="swal2-success-circular-line-right"></div>\n     </div>\n     <img class="').concat(_.image,'" />\n     <h2 class="').concat(_.title,'" id="').concat(_.title,'"></h2>\n     <button type="button" class="').concat(_.close,'">Ã—</button>\n   </div>\n   <div class="').concat(_.content,'">\n     <div id="').concat(_.content,'"></div>\n     <input class="').concat(_.input,'" />\n     <input type="file" class="').concat(_.file,'" />\n     <div class="').concat(_.range,'">\n       <input type="range" />\n       <output></output>\n     </div>\n     <select class="').concat(_.select,'"></select>\n     <div class="').concat(_.radio,'"></div>\n     <label for="').concat(_.checkbox,'" class="').concat(_.checkbox,'">\n       <input type="checkbox" />\n       <span class="').concat(_.label,'"></span>\n     </label>\n     <textarea class="').concat(_.textarea,'"></textarea>\n     <div class="').concat(_["validation-message"],'" id="').concat(_["validation-message"],'"></div>\n   </div>\n   <div class="').concat(_.actions,'">\n     <button type="button" class="').concat(_.confirm,'">OK</button>\n     <button type="button" class="').concat(_.cancel,'">Cancel</button>\n   </div>\n   <div class="').concat(_.footer,'">\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),X=function(e){var t=w();if(t&&(t.parentNode.removeChild(t),W([document.documentElement,document.body],[_["no-backdrop"],_["toast-shown"],_["has-column"]])),!j()){var n=document.createElement("div");n.className=_.container,n.innerHTML=V;var o="string"==typeof e.target?document.querySelector(e.target):e.target;o.appendChild(n);var i,r=k(),a=B(),s=U(a,_.input),c=U(a,_.file),u=a.querySelector(".".concat(_.range," input")),l=a.querySelector(".".concat(_.range," output")),d=U(a,_.select),p=a.querySelector(".".concat(_.checkbox," input")),f=U(a,_.textarea);r.setAttribute("role",e.toast?"alert":"dialog"),r.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||r.setAttribute("aria-modal","true"),"rtl"===window.getComputedStyle(o).direction&&z(w(),_.rtl);var m=function(e){De.isVisible()&&i!==e.target.value&&De.resetValidationMessage(),i=e.target.value};return s.oninput=m,c.onchange=m,d.onchange=m,p.onchange=m,f.oninput=m,u.oninput=function(e){m(e),l.value=u.value},u.onchange=function(e){m(e),u.nextSibling.value=u.value},r}I("SweetAlert2 requires document to initialize")},G=function(e,t){if(!e)return F(t);if(e instanceof HTMLElement)t.appendChild(e);else if("object"===q(e))if(t.innerHTML="",0 in e)for(var n=0;n in e;n++)t.appendChild(e[n].cloneNode(!0));else t.appendChild(e.cloneNode(!0));else e&&(t.innerHTML=e);K(t)},ee=function(){if(j())return!1;var e=document.createElement("div"),t={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(var n in t)if(t.hasOwnProperty(n)&&void 0!==e.style[n])return t[n];return!1}(),re=function(i){var r=P(),a=parseInt(null===i.currentProgressStep?De.getQueueStep():i.currentProgressStep,10);i.progressSteps&&i.progressSteps.length?(K(r),r.innerHTML="",a>=i.progressSteps.length&&R("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),i.progressSteps.forEach((function(e,t){var n=document.createElement("li");if(z(n,_.progresscircle),n.innerHTML=e,t===a&&z(n,_.activeprogressstep),r.appendChild(n),t!==i.progressSteps.length-1){var o=document.createElement("li");z(o,_.progressline),i.progressStepsDistance&&(o.style.width=i.progressStepsDistance),r.appendChild(o)}}))):F(r)},ce=function(){return!!window.MSInputMethodContext&&!!document.documentMode},ue=function(){var e=w(),t=k();e.style.removeProperty("align-items"),t.offsetTop<0&&(e.style.alignItems="flex-start")},le={},de=function(e,t){var n=w(),o=k();if(o){null!==e&&"function"==typeof e&&e(o),W(o,_.show),z(o,_.hide);var i=function(){M()?pe(t):(new Promise((function(e){var t=window.scrollX,n=window.scrollY;le.restoreFocusTimeout=setTimeout((function(){le.previousActiveElement&&le.previousActiveElement.focus?(le.previousActiveElement.focus(),le.previousActiveElement=null):document.body&&document.body.focus(),e()}),100),void 0!==t&&void 0!==n&&window.scrollTo(t,n)})).then((function(){return pe(t)})),le.keydownTarget.removeEventListener("keydown",le.keydownHandler,{capture:le.keydownListenerCapture}),le.keydownHandlerAdded=!1),n.parentNode&&n.parentNode.removeChild(n),W([document.documentElement,document.body],[_.shown,_["height-auto"],_["no-backdrop"],_["toast-shown"],_["toast-column"]]),T()&&(null!==b.previousBodyPadding&&(document.body.style.paddingRight=b.previousBodyPadding,b.previousBodyPadding=null),function(){if(v(document.body,_.iosfix)){var e=parseInt(document.body.style.top,10);W(document.body,_.iosfix),document.body.style.top="",document.body.scrollTop=-1*e}}(),"undefined"!=typeof window&&ce()&&window.removeEventListener("resize",ue),f(document.body.children).forEach((function(e){e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})))};ee&&!v(o,_.noanimation)?o.addEventListener(ee,(function e(){o.removeEventListener(ee,e),v(o,_.hide)&&i()})):i()}},pe=function(e){null!==e&&"function"==typeof e&&setTimeout((function(){e()}))};function fe(e){var t=function e(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];if(!(this instanceof e))return l(e,n);Object.getPrototypeOf(e).apply(this,n)};return t.prototype=r(Object.create(e.prototype),{constructor:t}),"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}var me={title:"",titleText:"",text:"",html:"",footer:"",type:null,toast:!1,customClass:"",customContainerClass:"",target:"body",backdrop:!0,animation:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showCancelButton:!1,preConfirm:null,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:null,confirmButtonClass:null,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:null,cancelButtonClass:null,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusCancel:!1,showCloseButton:!1,closeButtonAriaLabel:"Close this dialog",showLoaderOnConfirm:!1,imageUrl:null,imageWidth:null,imageHeight:null,imageAlt:"",imageClass:null,timer:null,width:null,padding:null,background:null,input:null,inputPlaceholder:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputClass:null,inputAttributes:{},inputValidator:null,validationMessage:null,grow:!1,position:"center",progressSteps:[],currentProgressStep:null,progressStepsDistance:null,onBeforeOpen:null,onAfterClose:null,onOpen:null,onClose:null,useRejections:!1,expectRejections:!1},he=["useRejections","expectRejections","extraParams"],ge=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusCancel","heightAuto","keydownListenerCapture"],be=function(e){return me.hasOwnProperty(e)||"extraParams"===e},ve=function(e){return-1!==he.indexOf(e)},ye=function(e){for(var t in e)be(t)||R('Unknown parameter "'.concat(t,'"')),e.toast&&-1!==ge.indexOf(t)&&R('The parameter "'.concat(t,'" is incompatible with toasts')),ve(t)&&m('The parameter "'.concat(t,'" is deprecated and will be removed in the next major release.'))},we='"setDefaults" & "resetDefaults" methods are deprecated in favor of "mixin" method and will be removed in the next major release. For new projects, use "mixin". For past projects already using "setDefaults", support will be provided through an additional package.',Ce={},ke=[],xe=function(){var e=k();e||De(""),e=k();var t=Q(),n=L(),o=O();K(t),K(n),z([e,t],_.loading),n.disabled=!0,o.disabled=!0,e.setAttribute("data-loading",!0),e.setAttribute("aria-busy",!0),e.focus()},Ae=Object.freeze({isValidParameter:be,isDeprecatedParameter:ve,argsToParams:function(n){var o={};switch(q(n[0])){case"object":r(o,n[0]);break;default:["title","html","type"].forEach((function(e,t){switch(q(n[t])){case"string":o[e]=n[t];break;case"undefined":break;default:I("Unexpected type of ".concat(e,'! Expected "string", got ').concat(q(n[t])))}}))}return o},adaptInputValidator:function(n){return function(e,t){return n.call(this,e,t).then((function(){}),(function(e){return e}))}},close:de,closePopup:de,closeModal:de,closeToast:de,isVisible:function(){return!!k()},clickConfirm:function(){return L().click()},clickCancel:function(){return O().click()},getContainer:w,getPopup:k,getTitle:A,getContent:B,getImage:S,getIcons:x,getCloseButton:$,getButtonsWrapper:function(){return m("swal.getButtonsWrapper() is deprecated and will be removed in the next major release, use swal.getActions() instead"),C(_.actions)},getActions:Q,getConfirmButton:L,getCancelButton:O,getFooter:Y,getFocusableElements:J,getValidationMessage:E,isLoading:function(){return k().hasAttribute("data-loading")},fire:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l(this,t)},mixin:function(n){return fe(function(e){function t(){return a(this,t),d(this,c(t).apply(this,arguments))}return s(t,e),i(t,[{key:"_main",value:function(e){return p(c(t.prototype),"_main",this).call(this,r({},n,e))}}]),t}(this))},queue:function(e){var r=this;ke=e;var a=function(){ke=[],document.body.removeAttribute("data-swal2-queue-step")},s=[];return new Promise((function(i){!function t(n,o){n<ke.length?(document.body.setAttribute("data-swal2-queue-step",n),r(ke[n]).then((function(e){void 0!==e.value?(s.push(e.value),t(n+1,o)):(a(),i({dismiss:e.dismiss}))}))):(a(),i({value:s}))}(0)}))},getQueueStep:function(){return document.body.getAttribute("data-swal2-queue-step")},insertQueueStep:function(e,t){return t&&t<ke.length?ke.splice(t,0,e):ke.push(e)},deleteQueueStep:function(e){void 0!==ke[e]&&ke.splice(e,1)},showLoading:xe,enableLoading:xe,getTimerLeft:function(){return le.timeout&&le.timeout.getTimerLeft()},stopTimer:function(){return le.timeout&&le.timeout.stop()},resumeTimer:function(){return le.timeout&&le.timeout.start()},toggleTimer:function(){var e=le.timeout;return e&&(e.running?e.stop():e.start())},increaseTimer:function(e){return le.timeout&&le.timeout.increase(e)},isTimerRunning:function(){return le.timeout&&le.timeout.isRunning()}}),Be="function"==typeof Symbol?Symbol:function(){var t=0;function e(e){return"__"+e+"_"+Math.floor(1e9*Math.random())+"_"+ ++t+"__"}return e.iterator=e("Symbol.iterator"),e}(),Se="function"==typeof WeakMap?WeakMap:function(n,o,t){function e(){o(this,n,{value:Be("WeakMap")})}return e.prototype={delete:function(e){delete e[this[n]]},get:function(e){return e[this[n]]},has:function(e){return t.call(e,this[n])},set:function(e,t){o(e,this[n],{configurable:!0,value:t})}},e}(Be("WeakMap"),Object.defineProperty,{}.hasOwnProperty),Pe={promise:new Se,innerParams:new Se,domCache:new Se};function Ee(){var e=Pe.innerParams.get(this),t=Pe.domCache.get(this);e.showConfirmButton||(F(t.confirmButton),e.showCancelButton||F(t.actions)),W([t.popup,t.actions],_.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.cancelButton.disabled=!1}function Le(e){var t=Pe.domCache.get(this);t.validationMessage.innerHTML=e;var n=window.getComputedStyle(t.popup);t.validationMessage.style.marginLeft="-".concat(n.getPropertyValue("padding-left")),t.validationMessage.style.marginRight="-".concat(n.getPropertyValue("padding-right")),K(t.validationMessage);var o=this.getInput();o&&(o.setAttribute("aria-invalid",!0),o.setAttribute("aria-describedBy",_["validation-message"]),N(o),z(o,_.inputerror))}function Oe(){var e=Pe.domCache.get(this);e.validationMessage&&F(e.validationMessage);var t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedBy"),W(t,_.inputerror))}var Ve,Te=function e(t,n){a(this,e);var o,i,r=n;this.running=!1,this.start=function(){return this.running||(this.running=!0,i=new Date,o=setTimeout(t,r)),r},this.stop=function(){return this.running&&(this.running=!1,clearTimeout(o),r-=new Date-i),r},this.increase=function(e){var t=this.running;return t&&this.stop(),r+=e,t&&this.start(),r},this.getTimerLeft=function(){return this.running&&(this.stop(),this.start()),r},this.isRunning=function(){return this.running},this.start()},Me={email:function(e,t){return/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(e)?Promise.resolve():Promise.reject(t&&t.validationMessage?t.validationMessage:"Invalid email address")},url:function(e,t){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)$/.test(e)?Promise.resolve():Promise.reject(t&&t.validationMessage?t.validationMessage:"Invalid URL")}},je=function(e){var t=w(),n=k();null!==e.onBeforeOpen&&"function"==typeof e.onBeforeOpen&&e.onBeforeOpen(n),e.animation?(z(n,_.show),z(t,_.fade),W(n,_.hide)):W(n,_.fade),K(n),t.style.overflowY="hidden",ee&&!v(n,_.noanimation)?n.addEventListener(ee,(function e(){n.removeEventListener(ee,e),t.style.overflowY="auto"})):t.style.overflowY="auto",z([document.documentElement,document.body,t],_.shown),e.heightAuto&&e.backdrop&&!e.toast&&z([document.documentElement,document.body],_["height-auto"]),T()&&(null===b.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(b.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=b.previousBodyPadding+function(){if("ontouchstart"in window||navigator.msMaxTouchPoints)return 0;var e=document.createElement("div");e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}()+"px"),function(){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&!v(document.body,_.iosfix)){var e=document.body.scrollTop;document.body.style.top=-1*e+"px",z(document.body,_.iosfix)}}(),"undefined"!=typeof window&&ce()&&(ue(),window.addEventListener("resize",ue)),f(document.body.children).forEach((function(e){e===w()||function(e,t){if("function"==typeof e.contains)return e.contains(t)}(e,w())||(e.hasAttribute("aria-hidden")&&e.setAttribute("data-previous-aria-hidden",e.getAttribute("aria-hidden")),e.setAttribute("aria-hidden","true"))})),setTimeout((function(){t.scrollTop=0}))),M()||le.previousActiveElement||(le.previousActiveElement=document.activeElement),null!==e.onOpen&&"function"==typeof e.onOpen&&setTimeout((function(){e.onOpen(n)}))},qe=Object.freeze({hideLoading:Ee,disableLoading:Ee,getInput:function(e){var t=Pe.innerParams.get(this),n=Pe.domCache.get(this);if(!(e=e||t.input))return null;switch(e){case"select":case"textarea":case"file":return U(n.content,_[e]);case"checkbox":return n.popup.querySelector(".".concat(_.checkbox," input"));case"radio":return n.popup.querySelector(".".concat(_.radio," input:checked"))||n.popup.querySelector(".".concat(_.radio," input:first-child"));case"range":return n.popup.querySelector(".".concat(_.range," input"));default:return U(n.content,_.input)}},enableButtons:function(){var e=Pe.domCache.get(this);e.confirmButton.disabled=!1,e.cancelButton.disabled=!1},disableButtons:function(){var e=Pe.domCache.get(this);e.confirmButton.disabled=!0,e.cancelButton.disabled=!0},enableConfirmButton:function(){Pe.domCache.get(this).confirmButton.disabled=!1},disableConfirmButton:function(){Pe.domCache.get(this).confirmButton.disabled=!0},enableInput:function(){var e=this.getInput();if(!e)return!1;if("radio"===e.type)for(var t=e.parentNode.parentNode.querySelectorAll("input"),n=0;n<t.length;n++)t[n].disabled=!1;else e.disabled=!1},disableInput:function(){var e=this.getInput();if(!e)return!1;if(e&&"radio"===e.type)for(var t=e.parentNode.parentNode.querySelectorAll("input"),n=0;n<t.length;n++)t[n].disabled=!0;else e.disabled=!0},showValidationMessage:Le,resetValidationMessage:Oe,resetValidationError:function(){m("Swal.resetValidationError() is deprecated and will be removed in the next major release, use Swal.resetValidationMessage() instead"),Oe.bind(this)()},showValidationError:function(e){m("Swal.showValidationError() is deprecated and will be removed in the next major release, use Swal.showValidationMessage() instead"),Le.bind(this)(e)},getProgressSteps:function(){return Pe.innerParams.get(this).progressSteps},setProgressSteps:function(e){var t=r({},Pe.innerParams.get(this),{progressSteps:e});Pe.innerParams.set(this,t),re(t)},showProgressSteps:function(){var e=Pe.domCache.get(this);K(e.progressSteps)},hideProgressSteps:function(){var e=Pe.domCache.get(this);F(e.progressSteps)},_main:function(e){var T=this;ye(e);var M=r({},me,e);!function(t){var e;t.inputValidator||Object.keys(Me).forEach((function(e){t.input===e&&(t.inputValidator=t.expectRejections?Me[e]:De.adaptInputValidator(Me[e]))})),t.validationMessage&&("object"!==q(t.extraParams)&&(t.extraParams={}),t.extraParams.validationMessage=t.validationMessage),(!t.target||"string"==typeof t.target&&!document.querySelector(t.target)||"string"!=typeof t.target&&!t.target.appendChild)&&(R('Target parameter is not valid, defaulting to "body"'),t.target="body"),"function"==typeof t.animation&&(t.animation=t.animation.call());var n=k(),o="string"==typeof t.target?document.querySelector(t.target):t.target;e=n&&o&&n.parentNode!==o.parentNode?X(t):n||X(t),t.width&&(e.style.width="number"==typeof t.width?t.width+"px":t.width),t.padding&&(e.style.padding="number"==typeof t.padding?t.padding+"px":t.padding),t.background&&(e.style.background=t.background);for(var i=window.getComputedStyle(e).getPropertyValue("background-color"),r=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),a=0;a<r.length;a++)r[a].style.backgroundColor=i;var s=w(),c=$(),u=Y();if(function(e){var t=A();e.titleText?t.innerText=e.titleText:e.title&&("string"==typeof e.title&&(e.title=e.title.split("\n").join("<br />")),G(e.title,t))}(t),function(e){var t=B().querySelector("#"+_.content);e.html?G(e.html,t):e.text?(t.textContent=e.text,K(t)):F(t)}(t),"string"==typeof t.backdrop?w().style.background=t.backdrop:t.backdrop||z([document.documentElement,document.body],_["no-backdrop"]),!t.backdrop&&t.allowOutsideClick&&R('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),t.position in _?z(s,_[t.position]):(R('The "position" parameter is not valid, defaulting to "center"'),z(s,_.center)),t.grow&&"string"==typeof t.grow){var l="grow-"+t.grow;l in _&&z(s,_[l])}t.showCloseButton?(c.setAttribute("aria-label",t.closeButtonAriaLabel),K(c)):F(c),e.className=_.popup,t.toast?(z([document.documentElement,document.body],_["toast-shown"]),z(e,_.toast)):z(e,_.modal),t.customClass&&z(e,t.customClass),t.customContainerClass&&z(s,t.customContainerClass),re(t),function(e){for(var t=x(),n=0;n<t.length;n++)F(t[n]);if(e.type)if(-1!==Object.keys(g).indexOf(e.type)){var o=De.getPopup().querySelector(".".concat(_.icon,".").concat(g[e.type]));K(o),e.animation&&z(o,"swal2-animate-".concat(e.type,"-icon"))}else I('Unknown type! Expected "success", "error", "warning", "info" or "question", got "'.concat(e.type,'"'))}(t),function(e){var t=S();e.imageUrl?(t.setAttribute("src",e.imageUrl),t.setAttribute("alt",e.imageAlt),K(t),e.imageWidth?t.setAttribute("width",e.imageWidth):t.removeAttribute("width"),e.imageHeight?t.setAttribute("height",e.imageHeight):t.removeAttribute("height"),t.className=_.image,e.imageClass&&z(t,e.imageClass)):F(t)}(t),function(e){var t=Q(),n=L(),o=O();if(e.showConfirmButton||e.showCancelButton?K(t):F(t),e.showCancelButton?o.style.display="inline-block":F(o),e.showConfirmButton?n.style.removeProperty("display"):F(n),n.innerHTML=e.confirmButtonText,o.innerHTML=e.cancelButtonText,n.setAttribute("aria-label",e.confirmButtonAriaLabel),o.setAttribute("aria-label",e.cancelButtonAriaLabel),n.className=_.confirm,z(n,e.confirmButtonClass),o.className=_.cancel,z(o,e.cancelButtonClass),e.buttonsStyling){z([n,o],_.styled),e.confirmButtonColor&&(n.style.backgroundColor=e.confirmButtonColor),e.cancelButtonColor&&(o.style.backgroundColor=e.cancelButtonColor);var i=window.getComputedStyle(n).getPropertyValue("background-color");n.style.borderLeftColor=i,n.style.borderRightColor=i}else W([n,o],_.styled),n.style.backgroundColor=n.style.borderLeftColor=n.style.borderRightColor="",o.style.backgroundColor=o.style.borderLeftColor=o.style.borderRightColor=""}(t),G(t.footer,u),!0===t.animation?W(e,_.noanimation):z(e,_.noanimation),t.showLoaderOnConfirm&&!t.preConfirm&&R("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request")}(M),Object.freeze(M),Pe.innerParams.set(this,M),le.timeout&&(le.timeout.stop(),delete le.timeout),clearTimeout(le.restoreFocusTimeout);var j={popup:k(),container:w(),content:B(),actions:Q(),confirmButton:L(),cancelButton:O(),closeButton:$(),validationMessage:E(),progressSteps:P()};Pe.domCache.set(this,j);var V=this.constructor;return new Promise((function(t,n){var o=function(e){V.closePopup(M.onClose,M.onAfterClose),M.useRejections?t(e):t({value:e})},c=function(e){V.closePopup(M.onClose,M.onAfterClose),M.useRejections?n(e):t({dismiss:e})},u=function(e){V.closePopup(M.onClose,M.onAfterClose),n(e)};M.timer&&(le.timeout=new Te((function(){c("timer"),delete le.timeout}),M.timer)),M.input&&setTimeout((function(){var e=T.getInput();e&&N(e)}),0);for(var l=function(t){if(M.showLoaderOnConfirm&&V.showLoading(),M.preConfirm){T.resetValidationMessage();var e=Promise.resolve().then((function(){return M.preConfirm(t,M.extraParams)}));M.expectRejections?e.then((function(e){return o(e||t)}),(function(e){T.hideLoading(),e&&T.showValidationMessage(e)})):e.then((function(e){Z(j.validationMessage)||!1===e?T.hideLoading():o(e||t)}),(function(e){return u(e)}))}else o(t)},e=function(e){var t=e.target,n=j.confirmButton,o=j.cancelButton,i=n&&(n===t||n.contains(t)),r=o&&(o===t||o.contains(t));switch(e.type){case"click":if(i&&V.isVisible())if(T.disableButtons(),M.input){var a=function(){var e=T.getInput();if(!e)return null;switch(M.input){case"checkbox":return e.checked?1:0;case"radio":return e.checked?e.value:null;case"file":return e.files.length?e.files[0]:null;default:return M.inputAutoTrim?e.value.trim():e.value}}();if(M.inputValidator){T.disableInput();var s=Promise.resolve().then((function(){return M.inputValidator(a,M.extraParams)}));M.expectRejections?s.then((function(){T.enableButtons(),T.enableInput(),l(a)}),(function(e){T.enableButtons(),T.enableInput(),e&&T.showValidationMessage(e)})):s.then((function(e){T.enableButtons(),T.enableInput(),e?T.showValidationMessage(e):l(a)}),(function(e){return u(e)}))}else T.getInput().checkValidity()?l(a):(T.enableButtons(),T.showValidationMessage(M.validationMessage))}else l(!0);else r&&V.isVisible()&&(T.disableButtons(),c(V.DismissReason.cancel))}},i=j.popup.querySelectorAll("button"),r=0;r<i.length;r++)i[r].onclick=e,i[r].onmouseover=e,i[r].onmouseout=e,i[r].onmousedown=e;if(j.closeButton.onclick=function(){c(V.DismissReason.close)},M.toast)j.popup.onclick=function(){M.showConfirmButton||M.showCancelButton||M.showCloseButton||M.input||c(V.DismissReason.close)};else{var a=!1;j.popup.onmousedown=function(){j.container.onmouseup=function(e){j.container.onmouseup=void 0,e.target===j.container&&(a=!0)}},j.container.onmousedown=function(){j.popup.onmouseup=function(e){j.popup.onmouseup=void 0,(e.target===j.popup||j.popup.contains(e.target))&&(a=!0)}},j.container.onclick=function(e){a?a=!1:e.target===j.container&&H(M.allowOutsideClick)&&c(V.DismissReason.backdrop)}}M.reverseButtons?j.confirmButton.parentNode.insertBefore(j.cancelButton,j.confirmButton):j.confirmButton.parentNode.insertBefore(j.confirmButton,j.cancelButton);var s=function(e,t){for(var n=J(M.focusCancel),o=0;o<n.length;o++)return(e+=t)===n.length?e=0:-1===e&&(e=n.length-1),n[e].focus();j.popup.focus()};le.keydownHandlerAdded&&(le.keydownTarget.removeEventListener("keydown",le.keydownHandler,{capture:le.keydownListenerCapture}),le.keydownHandlerAdded=!1),M.toast||(le.keydownHandler=function(e){return function(e,t){if(t.stopKeydownPropagation&&e.stopPropagation(),"Enter"!==e.key||e.isComposing)if("Tab"===e.key){for(var n=e.target,o=J(t.focusCancel),i=-1,r=0;r<o.length;r++)if(n===o[r]){i=r;break}e.shiftKey?s(i,-1):s(i,1),e.stopPropagation(),e.preventDefault()}else-1!==["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Left","Right","Up","Down"].indexOf(e.key)?document.activeElement===j.confirmButton&&Z(j.cancelButton)?j.cancelButton.focus():document.activeElement===j.cancelButton&&Z(j.confirmButton)&&j.confirmButton.focus():"Escape"!==e.key&&"Esc"!==e.key||!0!==H(t.allowEscapeKey)||(e.preventDefault(),c(V.DismissReason.esc));else if(e.target&&T.getInput()&&e.target.outerHTML===T.getInput().outerHTML){if(-1!==["textarea","file"].indexOf(t.input))return;V.clickConfirm(),e.preventDefault()}}(e,M)},le.keydownTarget=M.keydownListenerCapture?window:j.popup,le.keydownListenerCapture=M.keydownListenerCapture,le.keydownTarget.addEventListener("keydown",le.keydownHandler,{capture:le.keydownListenerCapture}),le.keydownHandlerAdded=!0),T.enableButtons(),T.hideLoading(),T.resetValidationMessage(),M.toast&&(M.input||M.footer||M.showCloseButton)?z(document.body,_["toast-column"]):W(document.body,_["toast-column"]);for(var d,p,f=["input","file","range","select","radio","checkbox","textarea"],m=function(e){e.placeholder&&!M.inputPlaceholder||(e.placeholder=M.inputPlaceholder)},h=0;h<f.length;h++){var g=_[f[h]],b=U(j.content,g);if(d=T.getInput(f[h])){for(var v in d.attributes)if(d.attributes.hasOwnProperty(v)){var y=d.attributes[v].name;"type"!==y&&"value"!==y&&d.removeAttribute(y)}for(var w in M.inputAttributes)"range"===f[h]&&"placeholder"===w||d.setAttribute(w,M.inputAttributes[w])}b.className=g,M.inputClass&&z(b,M.inputClass),F(b)}switch(M.input){case"text":case"email":case"password":case"number":case"tel":case"url":d=U(j.content,_.input),"string"==typeof M.inputValue||"number"==typeof M.inputValue?d.value=M.inputValue:D(M.inputValue)||R('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(q(M.inputValue),'"')),m(d),d.type=M.input,K(d);break;case"file":m(d=U(j.content,_.file)),d.type=M.input,K(d);break;case"range":var C=U(j.content,_.range),k=C.querySelector("input"),x=C.querySelector("output");k.value=M.inputValue,k.type=M.input,x.value=M.inputValue,K(C);break;case"select":var A=U(j.content,_.select);if(A.innerHTML="",M.inputPlaceholder){var B=document.createElement("option");B.innerHTML=M.inputPlaceholder,B.value="",B.disabled=!0,B.selected=!0,A.appendChild(B)}p=function(e){e.forEach((function(e){var t=e[0],n=e[1],o=document.createElement("option");o.value=t,o.innerHTML=n,M.inputValue.toString()===t.toString()&&(o.selected=!0),A.appendChild(o)})),K(A),A.focus()};break;case"radio":var S=U(j.content,_.radio);S.innerHTML="",p=function(e){e.forEach((function(e){var t=e[0],n=e[1],o=document.createElement("input"),i=document.createElement("label");o.type="radio",o.name=_.radio,o.value=t,M.inputValue.toString()===t.toString()&&(o.checked=!0);var r=document.createElement("span");r.innerHTML=n,r.className=_.label,i.appendChild(o),i.appendChild(r),S.appendChild(i)})),K(S);var t=S.querySelectorAll("input");t.length&&t[0].focus()};break;case"checkbox":var P=U(j.content,_.checkbox),E=T.getInput("checkbox");E.type="checkbox",E.value=1,E.id=_.checkbox,E.checked=Boolean(M.inputValue),P.querySelector("span").innerHTML=M.inputPlaceholder,K(P);break;case"textarea":var L=U(j.content,_.textarea);L.value=M.inputValue,m(L),K(L);break;case null:break;default:I('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(M.input,'"'))}if("select"===M.input||"radio"===M.input){var O=function(e){return p((t=e,n=[],"undefined"!=typeof Map&&t instanceof Map?t.forEach((function(e,t){n.push([t,e])})):Object.keys(t).forEach((function(e){n.push([e,t[e]])})),n));var t,n};D(M.inputOptions)?(V.showLoading(),M.inputOptions.then((function(e){T.hideLoading(),O(e)}))):"object"===q(M.inputOptions)?O(M.inputOptions):I("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(q(M.inputOptions)))}else-1!==["text","email","number","tel","textarea"].indexOf(M.input)&&D(M.inputValue)&&(V.showLoading(),F(d),M.inputValue.then((function(e){d.value="number"===M.input?parseFloat(e)||0:e+"",K(d),d.focus(),T.hideLoading()})).catch((function(e){I("Error in inputValue promise: "+e),d.value="",K(d),d.focus(),T.hideLoading()})));je(M),M.toast||(H(M.allowEnterKey)?M.focusCancel&&Z(j.cancelButton)?j.cancelButton.focus():M.focusConfirm&&Z(j.confirmButton)?j.confirmButton.focus():s(-1,1):document.activeElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()),j.container.scrollTop=0}))}});function Re(){if("undefined"!=typeof window){"undefined"==typeof Promise&&I("This package requires a Promise library, please include a shim to enable it in this browser (See: https://github.com/sweetalert2/sweetalert2/wiki/Migration-from-SweetAlert-to-SweetAlert2#1-ie-support)"),Ve=this;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=Object.freeze(this.constructor.argsToParams(t));Object.defineProperties(this,{params:{value:o,writable:!1,enumerable:!0}});var i=this._main(this.params);Pe.promise.set(this,i)}}Re.prototype.then=function(e,t){return Pe.promise.get(this).then(e,t)},Re.prototype.catch=function(e){return Pe.promise.get(this).catch(e)},Re.prototype.finally=function(e){return Pe.promise.get(this).finally(e)},r(Re.prototype,qe),r(Re,Ae),Object.keys(qe).forEach((function(t){Re[t]=function(){var e;if(Ve)return(e=Ve)[t].apply(e,arguments)}})),Re.DismissReason=e,Re.noop=function(){};var Ie,He,De=fe((Ie=Re,He=function(e){function t(){return a(this,t),d(this,c(t).apply(this,arguments))}return s(t,Ie),i(t,[{key:"_main",value:function(e){return p(c(t.prototype),"_main",this).call(this,r({},Ce,e))}}],[{key:"setDefaults",value:function(t){if(m(we),!t||"object"!==q(t))throw new TypeError("SweetAlert2: The argument for setDefaults() is required and has to be a object");ye(t),Object.keys(t).forEach((function(e){Ie.isValidParameter(e)&&(Ce[e]=t[e])}))}},{key:"resetDefaults",value:function(){m(we),Ce={}}}]),t}(),"undefined"!=typeof window&&"object"===q(window._swalDefaults)&&He.setDefaults(window._swalDefaults),He));return De.default=De})),"undefined"!=typeof window&&window.Sweetalert2&&(window.Sweetalert2.version="7.33.1",window.swal=window.sweetAlert=window.Swal=window.SweetAlert=window.Sweetalert2);/*! Select2 4.0.12 | https://github.com/select2/select2/blob/master/LICENSE.md */
n=function(d){var e=function(){if(d&&d.fn&&d.fn.select2&&d.fn.select2.amd)var e=d.fn.select2.amd;var t,n,i,h,o,s,f,g,m,v,y,_,r,a,w,l;function b(e,t){return r.call(e,t)}function c(e,t){var n,i,r,o,s,a,l,c,u,d,p,h=t&&t.split("/"),f=y.map,g=f&&f["*"]||{};if(e){for(s=(e=e.split("/")).length-1,y.nodeIdCompat&&w.test(e[s])&&(e[s]=e[s].replace(w,"")),"."===e[0].charAt(0)&&h&&(e=h.slice(0,h.length-1).concat(e)),u=0;u<e.length;u++)if("."===(p=e[u]))e.splice(u,1),u-=1;else if(".."===p){if(0===u||1===u&&".."===e[2]||".."===e[u-1])continue;0<u&&(e.splice(u-1,2),u-=2)}e=e.join("/")}if((h||g)&&f){for(u=(n=e.split("/")).length;0<u;u-=1){if(i=n.slice(0,u).join("/"),h)for(d=h.length;0<d;d-=1)if(r=(r=f[h.slice(0,d).join("/")])&&r[i]){o=r,a=u;break}if(o)break;!l&&g&&g[i]&&(l=g[i],c=u)}!o&&l&&(o=l,a=c),o&&(n.splice(0,a,o),e=n.join("/"))}return e}function A(t,n){return function(){var e=a.call(arguments,0);return"string"!=typeof e[0]&&1===e.length&&e.push(null),s.apply(h,e.concat([t,n]))}}function x(t){return function(e){m[t]=e}}function S(e){if(b(v,e)){var t=v[e];delete v[e],_[e]=!0,o.apply(h,t)}if(!b(m,e)&&!b(_,e))throw new Error("No "+e);return m[e]}function u(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function D(e){return e?u(e):[]}return e&&e.requirejs||(e?n=e:e={},m={},v={},y={},_={},r=Object.prototype.hasOwnProperty,a=[].slice,w=/\.js$/,f=function(e,t){var n,i=u(e),r=i[0],o=t[1];return e=i[1],r&&(n=S(r=c(r,o))),r?e=n&&n.normalize?n.normalize(e,function(t){return function(e){return c(e,t)}}(o)):c(e,o):(r=(i=u(e=c(e,o)))[0],e=i[1],r&&(n=S(r))),{f:r?r+"!"+e:e,n:e,pr:r,p:n}},g={require:function(e){return A(e)},exports:function(e){var t=m[e];return void 0!==t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:function(e){return function(){return y&&y.config&&y.config[e]||{}}}(e)}}},o=function(e,t,n,i){var r,o,s,a,l,c,u,d=[],p=typeof n;if(c=D(i=i||e),"undefined"==p||"function"==p){for(t=!t.length&&n.length?["require","exports","module"]:t,l=0;l<t.length;l+=1)if("require"===(o=(a=f(t[l],c)).f))d[l]=g.require(e);else if("exports"===o)d[l]=g.exports(e),u=!0;else if("module"===o)r=d[l]=g.module(e);else if(b(m,o)||b(v,o)||b(_,o))d[l]=S(o);else{if(!a.p)throw new Error(e+" missing "+o);a.p.load(a.n,A(i,!0),x(o),{}),d[l]=m[o]}s=n?n.apply(m[e],d):void 0,e&&(r&&r.exports!==h&&r.exports!==m[e]?m[e]=r.exports:s===h&&u||(m[e]=s))}else e&&(m[e]=n)},t=n=s=function(e,t,n,i,r){if("string"==typeof e)return g[e]?g[e](t):S(f(e,D(t)).f);if(!e.splice){if((y=e).deps&&s(y.deps,y.callback),!t)return;t.splice?(e=t,t=n,n=null):e=h}return t=t||function(){},"function"==typeof n&&(n=i,i=r),i?o(h,e,t,n):setTimeout((function(){o(h,e,t,n)}),4),s},s.config=function(e){return s(e)},t._defined=m,(i=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),b(m,e)||b(v,e)||(v[e]=[e,t,n])}).amd={jQuery:!0},e.requirejs=t,e.require=n,e.define=i),e.define("almond",(function(){})),e.define("jquery",[],(function(){var e=d||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e})),e.define("select2/utils",["jquery"],(function(o){var r={};function u(e){var t=e.prototype,n=[];for(var i in t)"function"==typeof t[i]&&"constructor"!==i&&n.push(i);return n}r.Extend=function(e,t){var n={}.hasOwnProperty;function i(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},r.Decorate=function(i,r){var e=u(r),t=u(i);function o(){var e=Array.prototype.unshift,t=r.prototype.constructor.length,n=i.prototype.constructor;0<t&&(e.call(arguments,i.prototype.constructor),n=r.prototype.constructor),n.apply(this,arguments)}r.displayName=i.displayName,o.prototype=new function(){this.constructor=o};for(var n=0;n<t.length;n++){var s=t[n];o.prototype[s]=i.prototype[s]}function a(e){var t=function(){};e in o.prototype&&(t=o.prototype[e]);var n=r.prototype[e];return function(){return Array.prototype.unshift.call(arguments,t),n.apply(this,arguments)}}for(var l=0;l<e.length;l++){var c=e[l];o.prototype[c]=a(c)}return o};function e(){this.listeners={}}e.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},e.prototype.trigger=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);this.listeners=this.listeners||{},null==n&&(n=[]),0===n.length&&n.push({}),(n[0]._type=e)in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},e.prototype.invoke=function(e,t){for(var n=0,i=e.length;n<i;n++)e[n].apply(this,t)},r.Observable=e,r.generateChars=function(e){for(var t="",n=0;n<e;n++)t+=Math.floor(36*Math.random()).toString(36);return t},r.bind=function(e,t){return function(){e.apply(t,arguments)}},r._convertData=function(e){for(var t in e){var n=t.split("-"),i=e;if(1!==n.length){for(var r=0;r<n.length;r++){var o=n[r];(o=o.substring(0,1).toLowerCase()+o.substring(1))in i||(i[o]={}),r==n.length-1&&(i[o]=e[t]),i=i[o]}delete e[t]}}return e},r.hasScroll=function(e,t){var n=o(t),i=t.style.overflowX,r=t.style.overflowY;return(i!==r||"hidden"!==r&&"visible"!==r)&&("scroll"===i||"scroll"===r||n.innerHeight()<t.scrollHeight||n.innerWidth()<t.scrollWidth)},r.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,(function(e){return t[e]}))},r.appendMany=function(e,t){if("1.7"===o.fn.jquery.substr(0,3)){var n=o();o.map(t,(function(e){n=n.add(e)})),t=n}e.append(t)},r.__cache={};var n=0;return r.GetUniqueElementId=function(e){var t=e.getAttribute("data-select2-id");return null==t&&(e.id?(t=e.id,e.setAttribute("data-select2-id",t)):(e.setAttribute("data-select2-id",++n),t=n.toString())),t},r.StoreData=function(e,t,n){var i=r.GetUniqueElementId(e);r.__cache[i]||(r.__cache[i]={}),r.__cache[i][t]=n},r.GetData=function(e,t){var n=r.GetUniqueElementId(e);return t?r.__cache[n]&&null!=r.__cache[n][t]?r.__cache[n][t]:o(e).data(t):r.__cache[n]},r.RemoveData=function(e){var t=r.GetUniqueElementId(e);null!=r.__cache[t]&&delete r.__cache[t],e.removeAttribute("data-select2-id")},r})),e.define("select2/results",["jquery","./utils"],(function(h,f){function i(e,t,n){this.$element=e,this.data=n,this.options=t,i.__super__.constructor.call(this)}return f.Extend(i,f.Observable),i.prototype.render=function(){var e=h('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e},i.prototype.clear=function(){this.$results.empty()},i.prototype.displayMessage=function(e){var t=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var n=h('<li role="alert" aria-live="assertive" class="select2-results__option"></li>'),i=this.options.get("translations").get(e.message);n.append(t(i(e.args))),n[0].className+=" select2-results__message",this.$results.append(n)},i.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},i.prototype.append=function(e){this.hideLoading();var t=[];if(null!=e.results&&0!==e.results.length){e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var i=e.results[n],r=this.option(i);t.push(r)}this.$results.append(t)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},i.prototype.position=function(e,t){t.find(".select2-results").append(e)},i.prototype.sort=function(e){return this.options.get("sorter")(e)},i.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option[aria-selected]"),t=e.filter("[aria-selected=true]");0<t.length?t.first().trigger("mouseenter"):e.first().trigger("mouseenter"),this.ensureHighlightVisible()},i.prototype.setClasses=function(){var t=this;this.data.current((function(e){var i=h.map(e,(function(e){return e.id.toString()}));t.$results.find(".select2-results__option[aria-selected]").each((function(){var e=h(this),t=f.GetData(this,"data"),n=""+t.id;null!=t.element&&t.element.selected||null==t.element&&-1<h.inArray(n,i)?e.attr("aria-selected","true"):e.attr("aria-selected","false")}))}))},i.prototype.showLoading=function(e){this.hideLoading();var t={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(e)},n=this.option(t);n.className+=" loading-results",this.$results.prepend(n)},i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},i.prototype.option=function(e){var t=document.createElement("li");t.className="select2-results__option";var n={role:"option","aria-selected":"false"},i=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(var r in(null!=e.element&&i.call(e.element,":disabled")||null==e.element&&e.disabled)&&(delete n["aria-selected"],n["aria-disabled"]="true"),null==e.id&&delete n["aria-selected"],null!=e._resultId&&(t.id=e._resultId),e.title&&(t.title=e.title),e.children&&(n.role="group",n["aria-label"]=e.text,delete n["aria-selected"]),n){var o=n[r];t.setAttribute(r,o)}if(e.children){var s=h(t),a=document.createElement("strong");a.className="select2-results__group";h(a);this.template(e,a);for(var l=[],c=0;c<e.children.length;c++){var u=e.children[c],d=this.option(u);l.push(d)}var p=h("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});p.append(l),s.append(a),s.append(p)}else this.template(e,t);return f.StoreData(t,"data",e),t},i.prototype.bind=function(t,e){var l=this,n=t.id+"-results";this.$results.attr("id",n),t.on("results:all",(function(e){l.clear(),l.append(e.data),t.isOpen()&&(l.setClasses(),l.highlightFirstItem())})),t.on("results:append",(function(e){l.append(e.data),t.isOpen()&&l.setClasses()})),t.on("query",(function(e){l.hideMessages(),l.showLoading(e)})),t.on("select",(function(){t.isOpen()&&(l.setClasses(),l.options.get("scrollAfterSelect")&&l.highlightFirstItem())})),t.on("unselect",(function(){t.isOpen()&&(l.setClasses(),l.options.get("scrollAfterSelect")&&l.highlightFirstItem())})),t.on("open",(function(){l.$results.attr("aria-expanded","true"),l.$results.attr("aria-hidden","false"),l.setClasses(),l.ensureHighlightVisible()})),t.on("close",(function(){l.$results.attr("aria-expanded","false"),l.$results.attr("aria-hidden","true"),l.$results.removeAttr("aria-activedescendant")})),t.on("results:toggle",(function(){var e=l.getHighlightedResults();0!==e.length&&e.trigger("mouseup")})),t.on("results:select",(function(){var e=l.getHighlightedResults();if(0!==e.length){var t=f.GetData(e[0],"data");"true"==e.attr("aria-selected")?l.trigger("close",{}):l.trigger("select",{data:t})}})),t.on("results:previous",(function(){var e=l.getHighlightedResults(),t=l.$results.find("[aria-selected]"),n=t.index(e);if(!(n<=0)){var i=n-1;0===e.length&&(i=0);var r=t.eq(i);r.trigger("mouseenter");var o=l.$results.offset().top,s=r.offset().top,a=l.$results.scrollTop()+(s-o);0===i?l.$results.scrollTop(0):s-o<0&&l.$results.scrollTop(a)}})),t.on("results:next",(function(){var e=l.getHighlightedResults(),t=l.$results.find("[aria-selected]"),n=t.index(e)+1;if(!(n>=t.length)){var i=t.eq(n);i.trigger("mouseenter");var r=l.$results.offset().top+l.$results.outerHeight(!1),o=i.offset().top+i.outerHeight(!1),s=l.$results.scrollTop()+o-r;0===n?l.$results.scrollTop(0):r<o&&l.$results.scrollTop(s)}})),t.on("results:focus",(function(e){e.element.addClass("select2-results__option--highlighted")})),t.on("results:message",(function(e){l.displayMessage(e)})),h.fn.mousewheel&&this.$results.on("mousewheel",(function(e){var t=l.$results.scrollTop(),n=l.$results.get(0).scrollHeight-t+e.deltaY,i=0<e.deltaY&&t-e.deltaY<=0,r=e.deltaY<0&&n<=l.$results.height();i?(l.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):r&&(l.$results.scrollTop(l.$results.get(0).scrollHeight-l.$results.height()),e.preventDefault(),e.stopPropagation())})),this.$results.on("mouseup",".select2-results__option[aria-selected]",(function(e){var t=h(this),n=f.GetData(this,"data");"true"!==t.attr("aria-selected")?l.trigger("select",{originalEvent:e,data:n}):l.options.get("multiple")?l.trigger("unselect",{originalEvent:e,data:n}):l.trigger("close",{})})),this.$results.on("mouseenter",".select2-results__option[aria-selected]",(function(e){var t=f.GetData(this,"data");l.getHighlightedResults().removeClass("select2-results__option--highlighted"),l.trigger("results:focus",{data:t,element:h(this)})}))},i.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},i.prototype.destroy=function(){this.$results.remove()},i.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(0!==e.length){var t=this.$results.find("[aria-selected]").index(e),n=this.$results.offset().top,i=e.offset().top,r=this.$results.scrollTop()+(i-n),o=i-n;r-=2*e.outerHeight(!1),t<=2?this.$results.scrollTop(0):(o>this.$results.outerHeight()||o<0)&&this.$results.scrollTop(r)}},i.prototype.template=function(e,t){var n=this.options.get("templateResult"),i=this.options.get("escapeMarkup"),r=n(e,t);null==r?t.style.display="none":"string"==typeof r?t.innerHTML=i(r):h(t).append(r)},i})),e.define("select2/keys",[],(function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}})),e.define("select2/selection/base",["jquery","../utils","../keys"],(function(n,i,r){function o(e,t){this.$element=e,this.options=t,o.__super__.constructor.call(this)}return i.Extend(o,i.Observable),o.prototype.render=function(){var e=n('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=i.GetData(this.$element[0],"old-tabindex")?this._tabindex=i.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),e.attr("aria-disabled","false"),this.$selection=e},o.prototype.bind=function(e,t){var n=this,i=e.id+"-results";this.container=e,this.$selection.on("focus",(function(e){n.trigger("focus",e)})),this.$selection.on("blur",(function(e){n._handleBlur(e)})),this.$selection.on("keydown",(function(e){n.trigger("keypress",e),e.which===r.SPACE&&e.preventDefault()})),e.on("results:focus",(function(e){n.$selection.attr("aria-activedescendant",e.data._resultId)})),e.on("selection:update",(function(e){n.update(e.data)})),e.on("open",(function(){n.$selection.attr("aria-expanded","true"),n.$selection.attr("aria-owns",i),n._attachCloseHandler(e)})),e.on("close",(function(){n.$selection.attr("aria-expanded","false"),n.$selection.removeAttr("aria-activedescendant"),n.$selection.removeAttr("aria-owns"),n.$selection.trigger("focus"),n._detachCloseHandler(e)})),e.on("enable",(function(){n.$selection.attr("tabindex",n._tabindex),n.$selection.attr("aria-disabled","false")})),e.on("disable",(function(){n.$selection.attr("tabindex","-1"),n.$selection.attr("aria-disabled","true")}))},o.prototype._handleBlur=function(e){var t=this;window.setTimeout((function(){document.activeElement==t.$selection[0]||n.contains(t.$selection[0],document.activeElement)||t.trigger("blur",e)}),1)},o.prototype._attachCloseHandler=function(e){n(document.body).on("mousedown.select2."+e.id,(function(e){var t=n(e.target).closest(".select2");n(".select2.select2-container--open").each((function(){this!=t[0]&&i.GetData(this,"element").select2("close")}))}))},o.prototype._detachCloseHandler=function(e){n(document.body).off("mousedown.select2."+e.id)},o.prototype.position=function(e,t){t.find(".selection").append(e)},o.prototype.destroy=function(){this._detachCloseHandler(this.container)},o.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},o})),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],(function(e,t,n,i){function r(){r.__super__.constructor.apply(this,arguments)}return n.Extend(r,t),r.prototype.render=function(){var e=r.__super__.render.call(this);return e.addClass("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},r.prototype.bind=function(t,e){var n=this;r.__super__.bind.apply(this,arguments);var i=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",i),this.$selection.on("mousedown",(function(e){1===e.which&&n.trigger("toggle",{originalEvent:e})})),this.$selection.on("focus",(function(e){})),this.$selection.on("blur",(function(e){})),t.on("focus",(function(e){t.isOpen()||n.$selection.trigger("focus")}))},r.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},r.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},r.prototype.selectionContainer=function(){return e("<span></span>")},r.prototype.update=function(e){if(0!==e.length){var t=e[0],n=this.$selection.find(".select2-selection__rendered"),i=this.display(t,n);n.empty().append(i);var r=t.title||t.text;r?n.attr("title",r):n.removeAttr("title")}else this.clear()},r})),e.define("select2/selection/multiple",["jquery","./base","../utils"],(function(r,e,l){function n(e,t){n.__super__.constructor.apply(this,arguments)}return l.Extend(n,e),n.prototype.render=function(){var e=n.__super__.render.call(this);return e.addClass("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},n.prototype.bind=function(e,t){var i=this;n.__super__.bind.apply(this,arguments),this.$selection.on("click",(function(e){i.trigger("toggle",{originalEvent:e})})),this.$selection.on("click",".select2-selection__choice__remove",(function(e){if(!i.options.get("disabled")){var t=r(this).parent(),n=l.GetData(t[0],"data");i.trigger("unselect",{originalEvent:e,data:n})}}))},n.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},n.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},n.prototype.selectionContainer=function(){return r('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},n.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],n=0;n<e.length;n++){var i=e[n],r=this.selectionContainer(),o=this.display(i,r);r.append(o);var s=i.title||i.text;s&&r.attr("title",s),l.StoreData(r[0],"data",i),t.push(r)}var a=this.$selection.find(".select2-selection__rendered");l.appendMany(a,t)}},n})),e.define("select2/selection/placeholder",["../utils"],(function(e){function t(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return t.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},t.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();return n.html(this.display(t)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},t.prototype.update=function(e,t){var n=1==t.length&&t[0].id!=this.placeholder.id;if(1<t.length||n)return e.call(this,t);this.clear();var i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},t})),e.define("select2/selection/allowClear",["jquery","../keys","../utils"],(function(r,i,a){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",(function(e){i._handleClear(e)})),t.on("keypress",(function(e){i._handleKeyboardClear(e,t)}))},e.prototype._handleClear=function(e,t){if(!this.options.get("disabled")){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){t.stopPropagation();var i=a.GetData(n[0],"data"),r=this.$element.val();this.$element.val(this.placeholder.id);var o={data:i};if(this.trigger("clear",o),o.prevented)this.$element.val(r);else{for(var s=0;s<i.length;s++)if(o={data:i[s]},this.trigger("unselect",o),o.prevented)return void this.$element.val(r);this.$element.trigger("change"),this.trigger("toggle",{})}}}},e.prototype._handleKeyboardClear=function(e,t,n){n.isOpen()||t.which!=i.DELETE&&t.which!=i.BACKSPACE||this._handleClear(t)},e.prototype.update=function(e,t){if(e.call(this,t),!(0<this.$selection.find(".select2-selection__placeholder").length||0===t.length)){var n=this.options.get("translations").get("removeAllItems"),i=r('<span class="select2-selection__clear" title="'+n()+'">&times;</span>');a.StoreData(i[0],"data",t),this.$selection.find(".select2-selection__rendered").prepend(i)}},e})),e.define("select2/selection/search",["jquery","../utils","../keys"],(function(i,a,l){function e(e,t,n){e.call(this,t,n)}return e.prototype.render=function(e){var t=i('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></li>');this.$searchContainer=t,this.$search=t.find("input");var n=e.call(this);return this._transferTabIndex(),n},e.prototype.bind=function(e,t,n){var i=this,r=t.id+"-results";e.call(this,t,n),t.on("open",(function(){i.$search.attr("aria-controls",r),i.$search.trigger("focus")})),t.on("close",(function(){i.$search.val(""),i.$search.removeAttr("aria-controls"),i.$search.removeAttr("aria-activedescendant"),i.$search.trigger("focus")})),t.on("enable",(function(){i.$search.prop("disabled",!1),i._transferTabIndex()})),t.on("disable",(function(){i.$search.prop("disabled",!0)})),t.on("focus",(function(e){i.$search.trigger("focus")})),t.on("results:focus",(function(e){e.data._resultId?i.$search.attr("aria-activedescendant",e.data._resultId):i.$search.removeAttr("aria-activedescendant")})),this.$selection.on("focusin",".select2-search--inline",(function(e){i.trigger("focus",e)})),this.$selection.on("focusout",".select2-search--inline",(function(e){i._handleBlur(e)})),this.$selection.on("keydown",".select2-search--inline",(function(e){if(e.stopPropagation(),i.trigger("keypress",e),i._keyUpPrevented=e.isDefaultPrevented(),e.which===l.BACKSPACE&&""===i.$search.val()){var t=i.$searchContainer.prev(".select2-selection__choice");if(0<t.length){var n=a.GetData(t[0],"data");i.searchRemoveChoice(n),e.preventDefault()}}})),this.$selection.on("click",".select2-search--inline",(function(e){i.$search.val()&&e.stopPropagation()}));var o=document.documentMode,s=o&&o<=11;this.$selection.on("input.searchcheck",".select2-search--inline",(function(e){s?i.$selection.off("input.search input.searchcheck"):i.$selection.off("keyup.search")})),this.$selection.on("keyup.search input.search",".select2-search--inline",(function(e){if(s&&"input"===e.type)i.$selection.off("input.search input.searchcheck");else{var t=e.which;t!=l.SHIFT&&t!=l.CTRL&&t!=l.ALT&&t!=l.TAB&&i.handleSearch(e)}}))},e.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},e.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},e.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),n&&this.$search.trigger("focus")},e.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},e.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},e.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";e=""!==this.$search.attr("placeholder")?this.$selection.find(".select2-selection__rendered").width():.75*(this.$search.val().length+1)+"em";this.$search.css("width",e)},e})),e.define("select2/selection/eventRelay",["jquery"],(function(s){function e(){}return e.prototype.bind=function(e,t,n){var i=this,r=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],o=["opening","closing","selecting","unselecting","clearing"];e.call(this,t,n),t.on("*",(function(e,t){if(-1!==s.inArray(e,r)){t=t||{};var n=s.Event("select2:"+e,{params:t});i.$element.trigger(n),-1!==s.inArray(e,o)&&(t.prevented=n.isDefaultPrevented())}}))},e})),e.define("select2/translation",["jquery","require"],(function(t,n){function i(e){this.dict=e||{}}return i.prototype.all=function(){return this.dict},i.prototype.get=function(e){return this.dict[e]},i.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},i._cache={},i.loadPath=function(e){if(!(e in i._cache)){var t=n(e);i._cache[e]=t}return new i(i._cache[e])},i})),e.define("select2/diacritics",[],(function(){return{"â’¶":"A","ï¼¡":"A","Ã€":"A","Ã":"A","Ã‚":"A","áº¦":"A","áº¤":"A","áºª":"A","áº¨":"A","Ãƒ":"A","Ä€":"A","Ä‚":"A","áº°":"A","áº®":"A","áº´":"A","áº²":"A","È¦":"A","Ç ":"A","Ã„":"A","Çž":"A","áº¢":"A","Ã…":"A","Çº":"A","Ç":"A","È€":"A","È‚":"A","áº ":"A","áº¬":"A","áº¶":"A","á¸€":"A","Ä„":"A","Èº":"A","â±¯":"A","êœ²":"AA","Ã†":"AE","Ç¼":"AE","Ç¢":"AE","êœ´":"AO","êœ¶":"AU","êœ¸":"AV","êœº":"AV","êœ¼":"AY","â’·":"B","ï¼¢":"B","á¸‚":"B","á¸„":"B","á¸†":"B","Éƒ":"B","Æ‚":"B","Æ":"B","â’¸":"C","ï¼£":"C","Ä†":"C","Äˆ":"C","ÄŠ":"C","ÄŒ":"C","Ã‡":"C","á¸ˆ":"C","Æ‡":"C","È»":"C","êœ¾":"C","â’¹":"D","ï¼¤":"D","á¸Š":"D","ÄŽ":"D","á¸Œ":"D","á¸":"D","á¸’":"D","á¸Ž":"D","Ä":"D","Æ‹":"D","ÆŠ":"D","Æ‰":"D","ê¹":"D","Ç±":"DZ","Ç„":"DZ","Ç²":"Dz","Ç…":"Dz","â’º":"E","ï¼¥":"E","Ãˆ":"E","Ã‰":"E","ÃŠ":"E","á»€":"E","áº¾":"E","á»„":"E","á»‚":"E","áº¼":"E","Ä’":"E","á¸”":"E","á¸–":"E","Ä”":"E","Ä–":"E","Ã‹":"E","áºº":"E","Äš":"E","È„":"E","È†":"E","áº¸":"E","á»†":"E","È¨":"E","á¸œ":"E","Ä˜":"E","á¸˜":"E","á¸š":"E","Æ":"E","ÆŽ":"E","â’»":"F","ï¼¦":"F","á¸ž":"F","Æ‘":"F","ê»":"F","â’¼":"G","ï¼§":"G","Ç´":"G","Äœ":"G","á¸ ":"G","Äž":"G","Ä ":"G","Ç¦":"G","Ä¢":"G","Ç¤":"G","Æ“":"G","êž ":"G","ê½":"G","ê¾":"G","â’½":"H","ï¼¨":"H","Ä¤":"H","á¸¢":"H","á¸¦":"H","Èž":"H","á¸¤":"H","á¸¨":"H","á¸ª":"H","Ä¦":"H","â±§":"H","â±µ":"H","êž":"H","â’¾":"I","ï¼©":"I","ÃŒ":"I","Ã":"I","ÃŽ":"I","Ä¨":"I","Äª":"I","Ä¬":"I","Ä°":"I","Ã":"I","á¸®":"I","á»ˆ":"I","Ç":"I","Èˆ":"I","ÈŠ":"I","á»Š":"I","Ä®":"I","á¸¬":"I","Æ—":"I","â’¿":"J","ï¼ª":"J","Ä´":"J","Éˆ":"J","â“€":"K","ï¼«":"K","á¸°":"K","Ç¨":"K","á¸²":"K","Ä¶":"K","á¸´":"K","Æ˜":"K","â±©":"K","ê€":"K","ê‚":"K","ê„":"K","êž¢":"K","â“":"L","ï¼¬":"L","Ä¿":"L","Ä¹":"L","Ä½":"L","á¸¶":"L","á¸¸":"L","Ä»":"L","á¸¼":"L","á¸º":"L","Å":"L","È½":"L","â±¢":"L","â± ":"L","êˆ":"L","ê†":"L","êž€":"L","Ç‡":"LJ","Çˆ":"Lj","â“‚":"M","ï¼­":"M","á¸¾":"M","á¹€":"M","á¹‚":"M","â±®":"M","Æœ":"M","â“ƒ":"N","ï¼®":"N","Ç¸":"N","Åƒ":"N","Ã‘":"N","á¹„":"N","Å‡":"N","á¹†":"N","Å…":"N","á¹Š":"N","á¹ˆ":"N","È ":"N","Æ":"N","êž":"N","êž¤":"N","ÇŠ":"NJ","Ç‹":"Nj","â“„":"O","ï¼¯":"O","Ã’":"O","Ã“":"O","Ã”":"O","á»’":"O","á»":"O","á»–":"O","á»”":"O","Ã•":"O","á¹Œ":"O","È¬":"O","á¹Ž":"O","ÅŒ":"O","á¹":"O","á¹’":"O","ÅŽ":"O","È®":"O","È°":"O","Ã–":"O","Èª":"O","á»Ž":"O","Å":"O","Ç‘":"O","ÈŒ":"O","ÈŽ":"O","Æ ":"O","á»œ":"O","á»š":"O","á» ":"O","á»ž":"O","á»¢":"O","á»Œ":"O","á»˜":"O","Çª":"O","Ç¬":"O","Ã˜":"O","Ç¾":"O","Æ†":"O","ÆŸ":"O","êŠ":"O","êŒ":"O","Å’":"OE","Æ¢":"OI","êŽ":"OO","È¢":"OU","â“…":"P","ï¼°":"P","á¹”":"P","á¹–":"P","Æ¤":"P","â±£":"P","ê":"P","ê’":"P","ê”":"P","â“†":"Q","ï¼±":"Q","ê–":"Q","ê˜":"Q","ÉŠ":"Q","â“‡":"R","ï¼²":"R","Å”":"R","á¹˜":"R","Å˜":"R","È":"R","È’":"R","á¹š":"R","á¹œ":"R","Å–":"R","á¹ž":"R","ÉŒ":"R","â±¤":"R","êš":"R","êž¦":"R","êž‚":"R","â“ˆ":"S","ï¼³":"S","áºž":"S","Åš":"S","á¹¤":"S","Åœ":"S","á¹ ":"S","Å ":"S","á¹¦":"S","á¹¢":"S","á¹¨":"S","È˜":"S","Åž":"S","â±¾":"S","êž¨":"S","êž„":"S","â“‰":"T","ï¼´":"T","á¹ª":"T","Å¤":"T","á¹¬":"T","Èš":"T","Å¢":"T","á¹°":"T","á¹®":"T","Å¦":"T","Æ¬":"T","Æ®":"T","È¾":"T","êž†":"T","êœ¨":"TZ","â“Š":"U","ï¼µ":"U","Ã™":"U","Ãš":"U","Ã›":"U","Å¨":"U","á¹¸":"U","Åª":"U","á¹º":"U","Å¬":"U","Ãœ":"U","Ç›":"U","Ç—":"U","Ç•":"U","Ç™":"U","á»¦":"U","Å®":"U","Å°":"U","Ç“":"U","È”":"U","È–":"U","Æ¯":"U","á»ª":"U","á»¨":"U","á»®":"U","á»¬":"U","á»°":"U","á»¤":"U","á¹²":"U","Å²":"U","á¹¶":"U","á¹´":"U","É„":"U","â“‹":"V","ï¼¶":"V","á¹¼":"V","á¹¾":"V","Æ²":"V","êž":"V","É…":"V","ê ":"VY","â“Œ":"W","ï¼·":"W","áº€":"W","áº‚":"W","Å´":"W","áº†":"W","áº„":"W","áºˆ":"W","â±²":"W","â“":"X","ï¼¸":"X","áºŠ":"X","áºŒ":"X","â“Ž":"Y","ï¼¹":"Y","á»²":"Y","Ã":"Y","Å¶":"Y","á»¸":"Y","È²":"Y","áºŽ":"Y","Å¸":"Y","á»¶":"Y","á»´":"Y","Æ³":"Y","ÉŽ":"Y","á»¾":"Y","â“":"Z","ï¼º":"Z","Å¹":"Z","áº":"Z","Å»":"Z","Å½":"Z","áº’":"Z","áº”":"Z","Æµ":"Z","È¤":"Z","â±¿":"Z","â±«":"Z","ê¢":"Z","â“":"a","ï½":"a","áºš":"a","Ã ":"a","Ã¡":"a","Ã¢":"a","áº§":"a","áº¥":"a","áº«":"a","áº©":"a","Ã£":"a","Ä":"a","Äƒ":"a","áº±":"a","áº¯":"a","áºµ":"a","áº³":"a","È§":"a","Ç¡":"a","Ã¤":"a","ÇŸ":"a","áº£":"a","Ã¥":"a","Ç»":"a","ÇŽ":"a","È":"a","Èƒ":"a","áº¡":"a","áº­":"a","áº·":"a","á¸":"a","Ä…":"a","â±¥":"a","É":"a","êœ³":"aa","Ã¦":"ae","Ç½":"ae","Ç£":"ae","êœµ":"ao","êœ·":"au","êœ¹":"av","êœ»":"av","êœ½":"ay","â“‘":"b","ï½‚":"b","á¸ƒ":"b","á¸…":"b","á¸‡":"b","Æ€":"b","Æƒ":"b","É“":"b","â“’":"c","ï½ƒ":"c","Ä‡":"c","Ä‰":"c","Ä‹":"c","Ä":"c","Ã§":"c","á¸‰":"c","Æˆ":"c","È¼":"c","êœ¿":"c","â†„":"c","â““":"d","ï½„":"d","á¸‹":"d","Ä":"d","á¸":"d","á¸‘":"d","á¸“":"d","á¸":"d","Ä‘":"d","ÆŒ":"d","É–":"d","É—":"d","êº":"d","Ç³":"dz","Ç†":"dz","â“”":"e","ï½…":"e","Ã¨":"e","Ã©":"e","Ãª":"e","á»":"e","áº¿":"e","á»…":"e","á»ƒ":"e","áº½":"e","Ä“":"e","á¸•":"e","á¸—":"e","Ä•":"e","Ä—":"e","Ã«":"e","áº»":"e","Ä›":"e","È…":"e","È‡":"e","áº¹":"e","á»‡":"e","È©":"e","á¸":"e","Ä™":"e","á¸™":"e","á¸›":"e","É‡":"e","É›":"e","Ç":"e","â“•":"f","ï½†":"f","á¸Ÿ":"f","Æ’":"f","ê¼":"f","â“–":"g","ï½‡":"g","Çµ":"g","Ä":"g","á¸¡":"g","ÄŸ":"g","Ä¡":"g","Ç§":"g","Ä£":"g","Ç¥":"g","É ":"g","êž¡":"g","áµ¹":"g","ê¿":"g","â“—":"h","ï½ˆ":"h","Ä¥":"h","á¸£":"h","á¸§":"h","ÈŸ":"h","á¸¥":"h","á¸©":"h","á¸«":"h","áº–":"h","Ä§":"h","â±¨":"h","â±¶":"h","É¥":"h","Æ•":"hv","â“˜":"i","ï½‰":"i","Ã¬":"i","Ã­":"i","Ã®":"i","Ä©":"i","Ä«":"i","Ä­":"i","Ã¯":"i","á¸¯":"i","á»‰":"i","Ç":"i","È‰":"i","È‹":"i","á»‹":"i","Ä¯":"i","á¸­":"i","É¨":"i","Ä±":"i","â“™":"j","ï½Š":"j","Äµ":"j","Ç°":"j","É‰":"j","â“š":"k","ï½‹":"k","á¸±":"k","Ç©":"k","á¸³":"k","Ä·":"k","á¸µ":"k","Æ™":"k","â±ª":"k","ê":"k","êƒ":"k","ê…":"k","êž£":"k","â“›":"l","ï½Œ":"l","Å€":"l","Äº":"l","Ä¾":"l","á¸·":"l","á¸¹":"l","Ä¼":"l","á¸½":"l","á¸»":"l","Å¿":"l","Å‚":"l","Æš":"l","É«":"l","â±¡":"l","ê‰":"l","êž":"l","ê‡":"l","Ç‰":"lj","â“œ":"m","ï½":"m","á¸¿":"m","á¹":"m","á¹ƒ":"m","É±":"m","É¯":"m","â“":"n","ï½Ž":"n","Ç¹":"n","Å„":"n","Ã±":"n","á¹…":"n","Åˆ":"n","á¹‡":"n","Å†":"n","á¹‹":"n","á¹‰":"n","Æž":"n","É²":"n","Å‰":"n","êž‘":"n","êž¥":"n","ÇŒ":"nj","â“ž":"o","ï½":"o","Ã²":"o","Ã³":"o","Ã´":"o","á»“":"o","á»‘":"o","á»—":"o","á»•":"o","Ãµ":"o","á¹":"o","È­":"o","á¹":"o","Å":"o","á¹‘":"o","á¹“":"o","Å":"o","È¯":"o","È±":"o","Ã¶":"o","È«":"o","á»":"o","Å‘":"o","Ç’":"o","È":"o","È":"o","Æ¡":"o","á»":"o","á»›":"o","á»¡":"o","á»Ÿ":"o","á»£":"o","á»":"o","á»™":"o","Ç«":"o","Ç­":"o","Ã¸":"o","Ç¿":"o","É”":"o","ê‹":"o","ê":"o","Éµ":"o","Å“":"oe","Æ£":"oi","È£":"ou","ê":"oo","â“Ÿ":"p","ï½":"p","á¹•":"p","á¹—":"p","Æ¥":"p","áµ½":"p","ê‘":"p","ê“":"p","ê•":"p","â“ ":"q","ï½‘":"q","É‹":"q","ê—":"q","ê™":"q","â“¡":"r","ï½’":"r","Å•":"r","á¹™":"r","Å™":"r","È‘":"r","È“":"r","á¹›":"r","á¹":"r","Å—":"r","á¹Ÿ":"r","É":"r","É½":"r","ê›":"r","êž§":"r","êžƒ":"r","â“¢":"s","ï½“":"s","ÃŸ":"s","Å›":"s","á¹¥":"s","Å":"s","á¹¡":"s","Å¡":"s","á¹§":"s","á¹£":"s","á¹©":"s","È™":"s","ÅŸ":"s","È¿":"s","êž©":"s","êž…":"s","áº›":"s","â“£":"t","ï½”":"t","á¹«":"t","áº—":"t","Å¥":"t","á¹­":"t","È›":"t","Å£":"t","á¹±":"t","á¹¯":"t","Å§":"t","Æ­":"t","Êˆ":"t","â±¦":"t","êž‡":"t","êœ©":"tz","â“¤":"u","ï½•":"u","Ã¹":"u","Ãº":"u","Ã»":"u","Å©":"u","á¹¹":"u","Å«":"u","á¹»":"u","Å­":"u","Ã¼":"u","Çœ":"u","Ç˜":"u","Ç–":"u","Çš":"u","á»§":"u","Å¯":"u","Å±":"u","Ç”":"u","È•":"u","È—":"u","Æ°":"u","á»«":"u","á»©":"u","á»¯":"u","á»­":"u","á»±":"u","á»¥":"u","á¹³":"u","Å³":"u","á¹·":"u","á¹µ":"u","Ê‰":"u","â“¥":"v","ï½–":"v","á¹½":"v","á¹¿":"v","Ê‹":"v","êŸ":"v","ÊŒ":"v","ê¡":"vy","â“¦":"w","ï½—":"w","áº":"w","áºƒ":"w","Åµ":"w","áº‡":"w","áº…":"w","áº˜":"w","áº‰":"w","â±³":"w","â“§":"x","ï½˜":"x","áº‹":"x","áº":"x","â“¨":"y","ï½™":"y","á»³":"y","Ã½":"y","Å·":"y","á»¹":"y","È³":"y","áº":"y","Ã¿":"y","á»·":"y","áº™":"y","á»µ":"y","Æ´":"y","É":"y","á»¿":"y","â“©":"z","ï½š":"z","Åº":"z","áº‘":"z","Å¼":"z","Å¾":"z","áº“":"z","áº•":"z","Æ¶":"z","È¥":"z","É€":"z","â±¬":"z","ê£":"z","Î†":"Î‘","Îˆ":"Î•","Î‰":"Î—","ÎŠ":"Î™","Îª":"Î™","ÎŒ":"ÎŸ","ÎŽ":"Î¥","Î«":"Î¥","Î":"Î©","Î¬":"Î±","Î­":"Îµ","Î®":"Î·","Î¯":"Î¹","ÏŠ":"Î¹","Î":"Î¹","ÏŒ":"Î¿","Ï":"Ï…","Ï‹":"Ï…","Î°":"Ï…","ÏŽ":"Ï‰","Ï‚":"Ïƒ","â€™":"'"}})),e.define("select2/data/base",["../utils"],(function(i){function n(e,t){n.__super__.constructor.call(this)}return i.Extend(n,i.Observable),n.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},n.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},n.prototype.bind=function(e,t){},n.prototype.destroy=function(){},n.prototype.generateResultId=function(e,t){var n=e.id+"-result-";return n+=i.generateChars(4),null!=t.id?n+="-"+t.id.toString():n+="-"+i.generateChars(4),n},n})),e.define("select2/data/select",["./base","../utils","jquery"],(function(e,a,l){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return a.Extend(n,e),n.prototype.current=function(e){var n=[],i=this;this.$element.find(":selected").each((function(){var e=l(this),t=i.item(e);n.push(t)})),e(n)},n.prototype.select=function(r){var o=this;if(r.selected=!0,l(r.element).is("option"))return r.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current((function(e){var t=[];(r=[r]).push.apply(r,e);for(var n=0;n<r.length;n++){var i=r[n].id;-1===l.inArray(i,t)&&t.push(i)}o.$element.val(t),o.$element.trigger("change")}));else{var e=r.id;this.$element.val(e),this.$element.trigger("change")}},n.prototype.unselect=function(r){var o=this;if(this.$element.prop("multiple")){if(r.selected=!1,l(r.element).is("option"))return r.element.selected=!1,void this.$element.trigger("change");this.current((function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n].id;i!==r.id&&-1===l.inArray(i,t)&&t.push(i)}o.$element.val(t),o.$element.trigger("change")}))}},n.prototype.bind=function(e,t){var n=this;(this.container=e).on("select",(function(e){n.select(e.data)})),e.on("unselect",(function(e){n.unselect(e.data)}))},n.prototype.destroy=function(){this.$element.find("*").each((function(){a.RemoveData(this)}))},n.prototype.query=function(i,e){var r=[],o=this;this.$element.children().each((function(){var e=l(this);if(e.is("option")||e.is("optgroup")){var t=o.item(e),n=o.matches(i,t);null!==n&&r.push(n)}})),e({results:r})},n.prototype.addOptions=function(e){a.appendMany(this.$element,e)},n.prototype.option=function(e){var t;e.children?(t=document.createElement("optgroup")).label=e.text:void 0!==(t=document.createElement("option")).textContent?t.textContent=e.text:t.innerText=e.text,void 0!==e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);var n=l(t),i=this._normalizeItem(e);return i.element=t,a.StoreData(t,"data",i),n},n.prototype.item=function(e){var t={};if(null!=(t=a.GetData(e[0],"data")))return t;if(e.is("option"))t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if(e.is("optgroup")){t={text:e.prop("label"),children:[],title:e.prop("title")};for(var n=e.children("option"),i=[],r=0;r<n.length;r++){var o=l(n[r]),s=this.item(o);i.push(s)}t.children=i}return(t=this._normalizeItem(t)).element=e[0],a.StoreData(e[0],"data",t),t},n.prototype._normalizeItem=function(e){e!==Object(e)&&(e={id:e,text:e});return null!=(e=l.extend({},{text:""},e)).id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),l.extend({},{selected:!1,disabled:!1},e)},n.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},n})),e.define("select2/data/array",["./select","../utils","jquery"],(function(e,f,g){function i(e,t){this._dataToConvert=t.get("data")||[],i.__super__.constructor.call(this,e,t)}return f.Extend(i,e),i.prototype.bind=function(e,t){i.__super__.bind.call(this,e,t),this.addOptions(this.convertToOptions(this._dataToConvert))},i.prototype.select=function(n){var e=this.$element.find("option").filter((function(e,t){return t.value==n.id.toString()}));0===e.length&&(e=this.option(n),this.addOptions(e)),i.__super__.select.call(this,n)},i.prototype.convertToOptions=function(e){var t=this,n=this.$element.find("option"),i=n.map((function(){return t.item(g(this)).id})).get(),r=[];function o(e){return function(){return g(this).val()==e.id}}for(var s=0;s<e.length;s++){var a=this._normalizeItem(e[s]);if(0<=g.inArray(a.id,i)){var l=n.filter(o(a)),c=this.item(l),u=g.extend(!0,{},a,c),d=this.option(u);l.replaceWith(d)}else{var p=this.option(a);if(a.children){var h=this.convertToOptions(a.children);f.appendMany(p,h)}r.push(p)}}return r},i})),e.define("select2/data/ajax",["./array","../utils","jquery"],(function(e,t,o){function n(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),n.__super__.constructor.call(this,e,t)}return t.Extend(n,e),n.prototype._applyDefaults=function(e){var t={data:function(e){return o.extend({},e,{q:e.term})},transport:function(e,t,n){var i=o.ajax(e);return i.then(t),i.fail(n),i}};return o.extend({},t,e,!0)},n.prototype.processResults=function(e){return e},n.prototype.query=function(n,i){var r=this;null!=this._request&&(o.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var t=o.extend({type:"GET"},this.ajaxOptions);function e(){var e=t.transport(t,(function(e){var t=r.processResults(e,n);r.options.get("debug")&&window.console&&console.error&&(t&&t.results&&o.isArray(t.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),i(t)}),(function(){"status"in e&&(0===e.status||"0"===e.status)||r.trigger("results:message",{message:"errorLoading"})}));r._request=e}"function"==typeof t.url&&(t.url=t.url.call(this.$element,n)),"function"==typeof t.data&&(t.data=t.data.call(this.$element,n)),this.ajaxOptions.delay&&null!=n.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(e,this.ajaxOptions.delay)):e()},n})),e.define("select2/data/tags",["jquery"],(function(u){function e(e,t,n){var i=n.get("tags"),r=n.get("createTag");void 0!==r&&(this.createTag=r);var o=n.get("insertTag");if(void 0!==o&&(this.insertTag=o),e.call(this,t,n),u.isArray(i))for(var s=0;s<i.length;s++){var a=i[s],l=this._normalizeItem(a),c=this.option(l);this.$element.append(c)}}return e.prototype.query=function(e,c,u){var d=this;this._removeOldTags(),null!=c.term&&null==c.page?e.call(this,c,(function e(t,n){for(var i=t.results,r=0;r<i.length;r++){var o=i[r],s=null!=o.children&&!e({results:o.children},!0);if((o.text||"").toUpperCase()===(c.term||"").toUpperCase()||s)return!n&&(t.data=i,void u(t))}if(n)return!0;var a=d.createTag(c);if(null!=a){var l=d.option(a);l.attr("data-select2-tag",!0),d.addOptions([l]),d.insertTag(i,a)}t.results=i,u(t)})):e.call(this,c,u)},e.prototype.createTag=function(e,t){var n=u.trim(t.term);return""===n?null:{id:n,text:n}},e.prototype.insertTag=function(e,t,n){t.unshift(n)},e.prototype._removeOldTags=function(e){this.$element.find("option[data-select2-tag]").each((function(){this.selected||u(this).remove()}))},e})),e.define("select2/data/tokenizer",["jquery"],(function(d){function e(e,t,n){var i=n.get("tokenizer");void 0!==i&&(this.tokenizer=i),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},e.prototype.query=function(e,t,n){var i=this;t.term=t.term||"";var r=this.tokenizer(t,this.options,(function(e){var t=i._normalizeItem(e);if(!i.$element.find("option").filter((function(){return d(this).val()===t.id})).length){var n=i.option(t);n.attr("data-select2-tag",!0),i._removeOldTags(),i.addOptions([n])}!function(e){i.trigger("select",{data:e})}(t)}));r.term!==t.term&&(this.$search.length&&(this.$search.val(r.term),this.$search.trigger("focus")),t.term=r.term),e.call(this,t,n)},e.prototype.tokenizer=function(e,t,n,i){for(var r=n.get("tokenSeparators")||[],o=t.term,s=0,a=this.createTag||function(e){return{id:e.term,text:e.term}};s<o.length;){var l=o[s];if(-1!==d.inArray(l,r)){var c=o.substr(0,s),u=a(d.extend({},t,{term:c}));null!=u?(i(u),o=o.substr(s+1)||"",s=0):s++}else s++}return{term:o}},e})),e.define("select2/data/minimumInputLength",[],(function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",t.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e})),e.define("select2/data/maximumInputLength",[],(function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",0<this.maximumInputLength&&t.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e})),e.define("select2/data/maximumSelectionLength",[],(function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("select",(function(){i._checkIfMaximumSelected()}))},e.prototype.query=function(e,t,n){var i=this;this._checkIfMaximumSelected((function(){e.call(i,t,n)}))},e.prototype._checkIfMaximumSelected=function(e,n){var i=this;this.current((function(e){var t=null!=e?e.length:0;0<i.maximumSelectionLength&&t>=i.maximumSelectionLength?i.trigger("results:message",{message:"maximumSelected",args:{maximum:i.maximumSelectionLength}}):n&&n()}))},e})),e.define("select2/dropdown",["jquery","./utils"],(function(t,e){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e},n.prototype.bind=function(){},n.prototype.position=function(e,t){},n.prototype.destroy=function(){this.$dropdown.remove()},n})),e.define("select2/dropdown/search",["jquery","../utils"],(function(o,e){function t(){}return t.prototype.render=function(e){var t=e.call(this),n=o('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=n,this.$search=n.find("input"),t.prepend(n),t},t.prototype.bind=function(e,t,n){var i=this,r=t.id+"-results";e.call(this,t,n),this.$search.on("keydown",(function(e){i.trigger("keypress",e),i._keyUpPrevented=e.isDefaultPrevented()})),this.$search.on("input",(function(e){o(this).off("keyup")})),this.$search.on("keyup input",(function(e){i.handleSearch(e)})),t.on("open",(function(){i.$search.attr("tabindex",0),i.$search.attr("aria-controls",r),i.$search.trigger("focus"),window.setTimeout((function(){i.$search.trigger("focus")}),0)})),t.on("close",(function(){i.$search.attr("tabindex",-1),i.$search.removeAttr("aria-controls"),i.$search.removeAttr("aria-activedescendant"),i.$search.val(""),i.$search.trigger("blur")})),t.on("focus",(function(){t.isOpen()||i.$search.trigger("focus")})),t.on("results:all",(function(e){null!=e.query.term&&""!==e.query.term||(i.showSearch(e)?i.$searchContainer.removeClass("select2-search--hide"):i.$searchContainer.addClass("select2-search--hide"))})),t.on("results:focus",(function(e){e.data._resultId?i.$search.attr("aria-activedescendant",e.data._resultId):i.$search.removeAttr("aria-activedescendant")}))},t.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},t.prototype.showSearch=function(e,t){return!0},t})),e.define("select2/dropdown/hidePlaceholder",[],(function(){function e(e,t,n,i){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,i)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),i=t.length-1;0<=i;i--){var r=t[i];this.placeholder.id===r.id&&n.splice(i,1)}return n},e})),e.define("select2/dropdown/infiniteScroll",["jquery"],(function(n){function e(e,t,n,i){this.lastParams={},e.call(this,t,n,i),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("query",(function(e){i.lastParams=e,i.loading=!0})),t.on("query:append",(function(e){i.lastParams=e,i.loading=!0})),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},e.prototype.loadMoreIfNeeded=function(){var e=n.contains(document.documentElement,this.$loadingMore[0]);if(!this.loading&&e){var t=this.$results.offset().top+this.$results.outerHeight(!1);this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1)<=t+50&&this.loadMore()}},e.prototype.loadMore=function(){this.loading=!0;var e=n.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},e.prototype.createLoadingMore=function(){var e=n('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),t=this.options.get("translations").get("loadingMore");return e.html(t(this.lastParams)),e},e})),e.define("select2/dropdown/attachBody",["jquery","../utils"],(function(f,a){function e(e,t,n){this.$dropdownParent=f(n.get("dropdownParent")||document.body),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("open",(function(){i._showDropdown(),i._attachPositioningHandler(t),i._bindContainerResultHandlers(t)})),t.on("close",(function(){i._hideDropdown(),i._detachPositioningHandler(t)})),this.$dropdownContainer.on("mousedown",(function(e){e.stopPropagation()}))},e.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},e.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t.removeClass("select2"),t.addClass("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},e.prototype.render=function(e){var t=f("<span></span>"),n=e.call(this);return t.append(n),this.$dropdownContainer=t},e.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},e.prototype._bindContainerResultHandlers=function(e,t){if(!this._containerResultsHandlersBound){var n=this;t.on("results:all",(function(){n._positionDropdown(),n._resizeDropdown()})),t.on("results:append",(function(){n._positionDropdown(),n._resizeDropdown()})),t.on("results:message",(function(){n._positionDropdown(),n._resizeDropdown()})),t.on("select",(function(){n._positionDropdown(),n._resizeDropdown()})),t.on("unselect",(function(){n._positionDropdown(),n._resizeDropdown()})),this._containerResultsHandlersBound=!0}},e.prototype._attachPositioningHandler=function(e,t){var n=this,i="scroll.select2."+t.id,r="resize.select2."+t.id,o="orientationchange.select2."+t.id,s=this.$container.parents().filter(a.hasScroll);s.each((function(){a.StoreData(this,"select2-scroll-position",{x:f(this).scrollLeft(),y:f(this).scrollTop()})})),s.on(i,(function(e){var t=a.GetData(this,"select2-scroll-position");f(this).scrollTop(t.y)})),f(window).on(i+" "+r+" "+o,(function(e){n._positionDropdown(),n._resizeDropdown()}))},e.prototype._detachPositioningHandler=function(e,t){var n="scroll.select2."+t.id,i="resize.select2."+t.id,r="orientationchange.select2."+t.id;this.$container.parents().filter(a.hasScroll).off(n),f(window).off(n+" "+i+" "+r)},e.prototype._positionDropdown=function(){var e=f(window),t=this.$dropdown.hasClass("select2-dropdown--above"),n=this.$dropdown.hasClass("select2-dropdown--below"),i=null,r=this.$container.offset();r.bottom=r.top+this.$container.outerHeight(!1);var o={height:this.$container.outerHeight(!1)};o.top=r.top,o.bottom=r.top+o.height;var s=this.$dropdown.outerHeight(!1),a=e.scrollTop(),l=e.scrollTop()+e.height(),c=a<r.top-s,u=l>r.bottom+s,d={left:r.left,top:o.bottom},p=this.$dropdownParent;"static"===p.css("position")&&(p=p.offsetParent());var h={top:0,left:0};(f.contains(document.body,p[0])||p[0].isConnected)&&(h=p.offset()),d.top-=h.top,d.left-=h.left,t||n||(i="below"),u||!c||t?!c&&u&&t&&(i="below"):i="above",("above"==i||t&&"below"!==i)&&(d.top=o.top-h.top-s),null!=i&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+i),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+i)),this.$dropdownContainer.css(d)},e.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},e.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},e})),e.define("select2/dropdown/minimumResultsForSearch",[],(function(){function e(e,t,n,i){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,n,i)}return e.prototype.showSearch=function(e,t){return!(function e(t){for(var n=0,i=0;i<t.length;i++){var r=t[i];r.children?n+=e(r.children):n++}return n}(t.data.results)<this.minimumResultsForSearch)&&e.call(this,t)},e})),e.define("select2/dropdown/selectOnClose",["../utils"],(function(o){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("close",(function(e){i._handleSelectOnClose(e)}))},e.prototype._handleSelectOnClose=function(e,t){if(t&&null!=t.originalSelect2Event){var n=t.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}var i=this.getHighlightedResults();if(!(i.length<1)){var r=o.GetData(i[0],"data");null!=r.element&&r.element.selected||null==r.element&&r.selected||this.trigger("select",{data:r})}},e})),e.define("select2/dropdown/closeOnSelect",[],(function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("select",(function(e){i._selectTriggered(e)})),t.on("unselect",(function(e){i._selectTriggered(e)}))},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&(n.ctrlKey||n.metaKey)||this.trigger("close",{originalEvent:n,originalSelect2Event:t})},e})),e.define("select2/i18n/en",[],(function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,n="Please delete "+t+" character";return 1!=t&&(n+="s"),n},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more resultsâ€¦"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searchingâ€¦"},removeAllItems:function(){return"Remove all items"}}})),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],(function(c,u,d,p,h,f,g,m,v,y,s,t,_,w,$,b,A,x,S,D,C,E,O,T,q,j,L,I,e){function n(){this.reset()}return n.prototype.apply=function(e){if(null==(e=c.extend(!0,{},this.defaults,e)).dataAdapter){if(null!=e.ajax?e.dataAdapter=$:null!=e.data?e.dataAdapter=w:e.dataAdapter=_,0<e.minimumInputLength&&(e.dataAdapter=y.Decorate(e.dataAdapter,x)),0<e.maximumInputLength&&(e.dataAdapter=y.Decorate(e.dataAdapter,S)),0<e.maximumSelectionLength&&(e.dataAdapter=y.Decorate(e.dataAdapter,D)),e.tags&&(e.dataAdapter=y.Decorate(e.dataAdapter,b)),null==e.tokenSeparators&&null==e.tokenizer||(e.dataAdapter=y.Decorate(e.dataAdapter,A)),null!=e.query){var t=u(e.amdBase+"compat/query");e.dataAdapter=y.Decorate(e.dataAdapter,t)}if(null!=e.initSelection){var n=u(e.amdBase+"compat/initSelection");e.dataAdapter=y.Decorate(e.dataAdapter,n)}}if(null==e.resultsAdapter&&(e.resultsAdapter=d,null!=e.ajax&&(e.resultsAdapter=y.Decorate(e.resultsAdapter,T)),null!=e.placeholder&&(e.resultsAdapter=y.Decorate(e.resultsAdapter,O)),e.selectOnClose&&(e.resultsAdapter=y.Decorate(e.resultsAdapter,L))),null==e.dropdownAdapter){if(e.multiple)e.dropdownAdapter=C;else{var i=y.Decorate(C,E);e.dropdownAdapter=i}if(0!==e.minimumResultsForSearch&&(e.dropdownAdapter=y.Decorate(e.dropdownAdapter,j)),e.closeOnSelect&&(e.dropdownAdapter=y.Decorate(e.dropdownAdapter,I)),null!=e.dropdownCssClass||null!=e.dropdownCss||null!=e.adaptDropdownCssClass){var r=u(e.amdBase+"compat/dropdownCss");e.dropdownAdapter=y.Decorate(e.dropdownAdapter,r)}e.dropdownAdapter=y.Decorate(e.dropdownAdapter,q)}if(null==e.selectionAdapter){if(e.multiple?e.selectionAdapter=h:e.selectionAdapter=p,null!=e.placeholder&&(e.selectionAdapter=y.Decorate(e.selectionAdapter,f)),e.allowClear&&(e.selectionAdapter=y.Decorate(e.selectionAdapter,g)),e.multiple&&(e.selectionAdapter=y.Decorate(e.selectionAdapter,m)),null!=e.containerCssClass||null!=e.containerCss||null!=e.adaptContainerCssClass){var o=u(e.amdBase+"compat/containerCss");e.selectionAdapter=y.Decorate(e.selectionAdapter,o)}e.selectionAdapter=y.Decorate(e.selectionAdapter,v)}e.language=this._resolveLanguage(e.language),e.language.push("en");for(var s=[],a=0;a<e.language.length;a++){var l=e.language[a];-1===s.indexOf(l)&&s.push(l)}return e.language=s,e.translations=this._processTranslations(e.language,e.debug),e},n.prototype.reset=function(){function a(e){return e.replace(/[^\u0000-\u007E]/g,(function(e){return t[e]||e}))}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:y.escapeMarkup,language:{},matcher:function e(t,n){if(""===c.trim(t.term))return n;if(n.children&&0<n.children.length){for(var i=c.extend(!0,{},n),r=n.children.length-1;0<=r;r--)null==e(t,n.children[r])&&i.children.splice(r,1);return 0<i.children.length?i:e(t,i)}var o=a(n.text).toUpperCase(),s=a(t.term).toUpperCase();return-1<o.indexOf(s)?n:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},n.prototype.applyFromElement=function(e,t){var n=e.language,i=this.defaults.language,r=t.prop("lang"),o=t.closest("[lang]").prop("lang"),s=Array.prototype.concat.call(this._resolveLanguage(r),this._resolveLanguage(n),this._resolveLanguage(i),this._resolveLanguage(o));return e.language=s,e},n.prototype._resolveLanguage=function(e){if(!e)return[];if(c.isEmptyObject(e))return[];if(c.isPlainObject(e))return[e];var t;t=c.isArray(e)?e:[e];for(var n=[],i=0;i<t.length;i++)if(n.push(t[i]),"string"==typeof t[i]&&0<t[i].indexOf("-")){var r=t[i].split("-")[0];n.push(r)}return n},n.prototype._processTranslations=function(e,t){for(var n=new s,i=0;i<e.length;i++){var r=new s,o=e[i];if("string"==typeof o)try{r=s.loadPath(o)}catch(e){try{o=this.defaults.amdLanguageBase+o,r=s.loadPath(o)}catch(e){t&&window.console&&console.warn&&console.warn('Select2: The language file for "'+o+'" could not be automatically loaded. A fallback will be used instead.')}}else r=c.isPlainObject(o)?new s(o):o;n.extend(r)}return n},n.prototype.set=function(e,t){var n={};n[c.camelCase(e)]=t;var i=y._convertData(n);c.extend(!0,this.defaults,i)},new n})),e.define("select2/options",["require","jquery","./defaults","./utils"],(function(i,d,r,p){function e(e,t){if(this.options=e,null!=t&&this.fromElement(t),null!=t&&(this.options=r.applyFromElement(this.options,t)),this.options=r.apply(this.options),t&&t.is("input")){var n=i(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=p.Decorate(this.options.dataAdapter,n)}}return e.prototype.fromElement=function(e){var t=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),p.GetData(e[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),p.StoreData(e[0],"data",p.GetData(e[0],"select2Tags")),p.StoreData(e[0],"tags",!0)),p.GetData(e[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",p.GetData(e[0],"ajaxUrl")),p.StoreData(e[0],"ajax-Url",p.GetData(e[0],"ajaxUrl")));var n={};function i(e,t){return t.toUpperCase()}for(var r=0;r<e[0].attributes.length;r++){var o=e[0].attributes[r].name,s="data-";if(o.substr(0,s.length)==s){var a=o.substring(s.length),l=p.GetData(e[0],a);n[a.replace(/-([a-z])/g,i)]=l}}d.fn.jquery&&"1."==d.fn.jquery.substr(0,2)&&e[0].dataset&&(n=d.extend(!0,{},e[0].dataset,n));var c=d.extend(!0,{},p.GetData(e[0]),n);for(var u in c=p._convertData(c))-1<d.inArray(u,t)||(d.isPlainObject(this.options[u])?d.extend(this.options[u],c[u]):this.options[u]=c[u]);return this},e.prototype.get=function(e){return this.options[e]},e.prototype.set=function(e,t){this.options[e]=t},e})),e.define("select2/core",["jquery","./options","./utils","./keys"],(function(r,c,u,i){var d=function(e,t){null!=u.GetData(e[0],"select2")&&u.GetData(e[0],"select2").destroy(),this.$element=e,this.id=this._generateId(e),t=t||{},this.options=new c(t,e),d.__super__.constructor.call(this);var n=e.attr("tabindex")||0;u.StoreData(e[0],"old-tabindex",n),e.attr("tabindex","-1");var i=this.options.get("dataAdapter");this.dataAdapter=new i(e,this.options);var r=this.render();this._placeContainer(r);var o=this.options.get("selectionAdapter");this.selection=new o(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,r);var s=this.options.get("dropdownAdapter");this.dropdown=new s(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,r);var a=this.options.get("resultsAdapter");this.results=new a(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var l=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current((function(e){l.trigger("selection:update",{data:e})})),e.addClass("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),u.StoreData(e[0],"select2",this),e.data("select2",this)};return u.Extend(d,u.Observable),d.prototype._generateId=function(e){return"select2-"+(null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+u.generateChars(2):u.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},d.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},d.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var i=this._resolveWidth(e,"style");return null!=i?i:this._resolveWidth(e,"element")}if("element"==t){var r=e.outerWidth(!1);return r<=0?"auto":r+"px"}if("style"!=t)return"computedstyle"!=t?t:window.getComputedStyle(e[0]).width;var o=e.attr("style");if("string"!=typeof o)return null;for(var s=o.split(";"),a=0,l=s.length;a<l;a+=1){var c=s[a].replace(/\s/g,"").match(n);if(null!==c&&1<=c.length)return c[1]}return null},d.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},d.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",(function(){t.dataAdapter.current((function(e){t.trigger("selection:update",{data:e})}))})),this.$element.on("focus.select2",(function(e){t.trigger("focus",e)})),this._syncA=u.bind(this._syncAttributes,this),this._syncS=u.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=e?(this._observer=new e((function(e){r.each(e,t._syncA),r.each(e,t._syncS)})),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},d.prototype._registerDataEvents=function(){var n=this;this.dataAdapter.on("*",(function(e,t){n.trigger(e,t)}))},d.prototype._registerSelectionEvents=function(){var n=this,i=["toggle","focus"];this.selection.on("toggle",(function(){n.toggleDropdown()})),this.selection.on("focus",(function(e){n.focus(e)})),this.selection.on("*",(function(e,t){-1===r.inArray(e,i)&&n.trigger(e,t)}))},d.prototype._registerDropdownEvents=function(){var n=this;this.dropdown.on("*",(function(e,t){n.trigger(e,t)}))},d.prototype._registerResultsEvents=function(){var n=this;this.results.on("*",(function(e,t){n.trigger(e,t)}))},d.prototype._registerEvents=function(){var n=this;this.on("open",(function(){n.$container.addClass("select2-container--open")})),this.on("close",(function(){n.$container.removeClass("select2-container--open")})),this.on("enable",(function(){n.$container.removeClass("select2-container--disabled")})),this.on("disable",(function(){n.$container.addClass("select2-container--disabled")})),this.on("blur",(function(){n.$container.removeClass("select2-container--focus")})),this.on("query",(function(t){n.isOpen()||n.trigger("open",{}),this.dataAdapter.query(t,(function(e){n.trigger("results:all",{data:e,query:t})}))})),this.on("query:append",(function(t){this.dataAdapter.query(t,(function(e){n.trigger("results:append",{data:e,query:t})}))})),this.on("keypress",(function(e){var t=e.which;n.isOpen()?t===i.ESC||t===i.TAB||t===i.UP&&e.altKey?(n.close(),e.preventDefault()):t===i.ENTER?(n.trigger("results:select",{}),e.preventDefault()):t===i.SPACE&&e.ctrlKey?(n.trigger("results:toggle",{}),e.preventDefault()):t===i.UP?(n.trigger("results:previous",{}),e.preventDefault()):t===i.DOWN&&(n.trigger("results:next",{}),e.preventDefault()):(t===i.ENTER||t===i.SPACE||t===i.DOWN&&e.altKey)&&(n.open(),e.preventDefault())}))},d.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},d.prototype._syncSubtree=function(e,t){var n=!1,i=this;if(!e||!e.target||"OPTION"===e.target.nodeName||"OPTGROUP"===e.target.nodeName){if(t)if(t.addedNodes&&0<t.addedNodes.length)for(var r=0;r<t.addedNodes.length;r++)t.addedNodes[r].selected&&(n=!0);else t.removedNodes&&0<t.removedNodes.length&&(n=!0);else n=!0;n&&this.dataAdapter.current((function(e){i.trigger("selection:update",{data:e})}))}},d.prototype.trigger=function(e,t){var n=d.__super__.trigger,i={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(void 0===t&&(t={}),e in i){var r=i[e],o={prevented:!1,name:e,args:t};if(n.call(this,r,o),o.prevented)return void(t.prevented=!0)}n.call(this,e,t)},d.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},d.prototype.open=function(){this.isOpen()||this.trigger("query",{})},d.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},d.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},d.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},d.prototype.focus=function(e){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},d.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=e&&0!==e.length||(e=[!0]);var t=!e[0];this.$element.prop("disabled",t)},d.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current((function(e){t=e})),t},d.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var t=e[0];r.isArray(t)&&(t=r.map(t,(function(e){return e.toString()}))),this.$element.val(t).trigger("change")},d.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",u.GetData(this.$element[0],"old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),u.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},d.prototype.render=function(){var e=r('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),u.StoreData(e[0],"element",this.$element),e},d})),e.define("select2/compat/utils",["jquery"],(function(s){return{syncCssClasses:function(e,t,n){var i,r,o=[];(i=s.trim(e.attr("class")))&&s((i=""+i).split(/\s+/)).each((function(){0===this.indexOf("select2-")&&o.push(this)})),(i=s.trim(t.attr("class")))&&s((i=""+i).split(/\s+/)).each((function(){0!==this.indexOf("select2-")&&null!=(r=n(this))&&o.push(r)})),e.attr("class",o.join(" "))}}})),e.define("select2/compat/containerCss",["jquery","./utils"],(function(s,a){function l(e){return null}function e(){}return e.prototype.render=function(e){var t=e.call(this),n=this.options.get("containerCssClass")||"";s.isFunction(n)&&(n=n(this.$element));var i=this.options.get("adaptContainerCssClass");if(i=i||l,-1!==n.indexOf(":all:")){n=n.replace(":all:","");var r=i;i=function(e){var t=r(e);return null!=t?t+" "+e:e}}var o=this.options.get("containerCss")||{};return s.isFunction(o)&&(o=o(this.$element)),a.syncCssClasses(t,this.$element,i),t.css(o),t.addClass(n),t},e})),e.define("select2/compat/dropdownCss",["jquery","./utils"],(function(s,a){function l(e){return null}function e(){}return e.prototype.render=function(e){var t=e.call(this),n=this.options.get("dropdownCssClass")||"";s.isFunction(n)&&(n=n(this.$element));var i=this.options.get("adaptDropdownCssClass");if(i=i||l,-1!==n.indexOf(":all:")){n=n.replace(":all:","");var r=i;i=function(e){var t=r(e);return null!=t?t+" "+e:e}}var o=this.options.get("dropdownCss")||{};return s.isFunction(o)&&(o=o(this.$element)),a.syncCssClasses(t,this.$element,i),t.css(o),t.addClass(n),t},e})),e.define("select2/compat/initSelection",["jquery"],(function(i){function e(e,t,n){n.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `initSelection` option has been deprecated in favor of a custom data adapter that overrides the `current` method. This method is now called multiple times instead of a single time when the instance is initialized. Support will be removed for the `initSelection` option in future versions of Select2"),this.initSelection=n.get("initSelection"),this._isInitialized=!1,e.call(this,t,n)}return e.prototype.current=function(e,t){var n=this;this._isInitialized?e.call(this,t):this.initSelection.call(null,this.$element,(function(e){n._isInitialized=!0,i.isArray(e)||(e=[e]),t(e)}))},e})),e.define("select2/compat/inputData",["jquery","../utils"],(function(s,i){function e(e,t,n){this._currentData=[],this._valueSeparator=n.get("valueSeparator")||",","hidden"===t.prop("type")&&n.get("debug")&&console&&console.warn&&console.warn("Select2: Using a hidden input with Select2 is no longer supported and may stop working in the future. It is recommended to use a `<select>` element instead."),e.call(this,t,n)}return e.prototype.current=function(e,t){function i(e,t){var n=[];return e.selected||-1!==s.inArray(e.id,t)?(e.selected=!0,n.push(e)):e.selected=!1,e.children&&n.push.apply(n,i(e.children,t)),n}for(var n=[],r=0;r<this._currentData.length;r++){var o=this._currentData[r];n.push.apply(n,i(o,this.$element.val().split(this._valueSeparator)))}t(n)},e.prototype.select=function(e,t){if(this.options.get("multiple")){var n=this.$element.val();n+=this._valueSeparator+t.id,this.$element.val(n),this.$element.trigger("change")}else this.current((function(e){s.map(e,(function(e){e.selected=!1}))})),this.$element.val(t.id),this.$element.trigger("change")},e.prototype.unselect=function(e,r){var o=this;r.selected=!1,this.current((function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];r.id!=i.id&&t.push(i.id)}o.$element.val(t.join(o._valueSeparator)),o.$element.trigger("change")}))},e.prototype.query=function(e,t,n){for(var i=[],r=0;r<this._currentData.length;r++){var o=this._currentData[r],s=this.matches(t,o);null!==s&&i.push(s)}n({results:i})},e.prototype.addOptions=function(e,t){var n=s.map(t,(function(e){return i.GetData(e[0],"data")}));this._currentData.push.apply(this._currentData,n)},e})),e.define("select2/compat/matcher",["jquery"],(function(s){return function(o){return function(e,t){var n=s.extend(!0,{},t);if(null==e.term||""===s.trim(e.term))return n;if(t.children){for(var i=t.children.length-1;0<=i;i--){var r=t.children[i];o(e.term,r.text,r)||n.children.splice(i,1)}if(0<n.children.length)return n}return o(e.term,t.text,t)?n:null}}})),e.define("select2/compat/query",[],(function(){function e(e,t,n){n.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `query` option has been deprecated in favor of a custom data adapter that overrides the `query` method. Support will be removed for the `query` option in future versions of Select2."),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.callback=n,this.options.get("query").call(null,t)},e})),e.define("select2/dropdown/attachContainer",[],(function(){function e(e,t,n){e.call(this,t,n)}return e.prototype.position=function(e,t,n){n.find(".dropdown-wrapper").append(t),t.addClass("select2-dropdown--below"),n.addClass("select2-container--below")},e})),e.define("select2/dropdown/stopPropagation",[],(function(){function e(){}return e.prototype.bind=function(e,t,n){e.call(this,t,n);this.$dropdown.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),(function(e){e.stopPropagation()}))},e})),e.define("select2/selection/stopPropagation",[],(function(){function e(){}return e.prototype.bind=function(e,t,n){e.call(this,t,n);this.$selection.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),(function(e){e.stopPropagation()}))},e})),l=function(p){var h,f,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],t="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],g=Array.prototype.slice;if(p.event.fixHooks)for(var n=e.length;n;)p.event.fixHooks[e[--n]]=p.event.mouseHooks;var m=p.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],i,!1);else this.onmousewheel=i;p.data(this,"mousewheel-line-height",m.getLineHeight(this)),p.data(this,"mousewheel-page-height",m.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],i,!1);else this.onmousewheel=null;p.removeData(this,"mousewheel-line-height"),p.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var t=p(e),n=t["offsetParent"in p.fn?"offsetParent":"parent"]();return n.length||(n=p("body")),parseInt(n.css("fontSize"),10)||parseInt(t.css("fontSize"),10)||16},getPageHeight:function(e){return p(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function i(e){var t,n=e||window.event,i=g.call(arguments,1),r=0,o=0,s=0,a=0,l=0;if((e=p.event.fix(n)).type="mousewheel","detail"in n&&(s=-1*n.detail),"wheelDelta"in n&&(s=n.wheelDelta),"wheelDeltaY"in n&&(s=n.wheelDeltaY),"wheelDeltaX"in n&&(o=-1*n.wheelDeltaX),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(o=-1*s,s=0),r=0===s?o:s,"deltaY"in n&&(r=s=-1*n.deltaY),"deltaX"in n&&(o=n.deltaX,0===s&&(r=-1*o)),0!==s||0!==o){if(1===n.deltaMode){var c=p.data(this,"mousewheel-line-height");r*=c,s*=c,o*=c}else if(2===n.deltaMode){var u=p.data(this,"mousewheel-page-height");r*=u,s*=u,o*=u}if(t=Math.max(Math.abs(s),Math.abs(o)),(!f||t<f)&&y(n,f=t)&&(f/=40),y(n,t)&&(r/=40,o/=40,s/=40),r=Math[1<=r?"floor":"ceil"](r/f),o=Math[1<=o?"floor":"ceil"](o/f),s=Math[1<=s?"floor":"ceil"](s/f),m.settings.normalizeOffset&&this.getBoundingClientRect){var d=this.getBoundingClientRect();a=e.clientX-d.left,l=e.clientY-d.top}return e.deltaX=o,e.deltaY=s,e.deltaFactor=f,e.offsetX=a,e.offsetY=l,e.deltaMode=0,i.unshift(e,r,o,s),h&&clearTimeout(h),h=setTimeout(v,200),(p.event.dispatch||p.event.handle).apply(this,i)}}function v(){f=null}function y(e,t){return m.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}p.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})},"function"==typeof e.define&&e.define.amd?e.define("jquery-mousewheel",["jquery"],l):"object"==typeof exports?module.exports=l:l(d),e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],(function(r,e,o,t,s){if(null==r.fn.select2){var a=["open","close","destroy"];r.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each((function(){var e=r.extend(!0,{},t);new o(r(this),e)})),this;if("string"!=typeof t)throw new Error("Invalid arguments for Select2: "+t);var n,i=Array.prototype.slice.call(arguments,1);return this.each((function(){var e=s.GetData(this,"select2");null==e&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),n=e[t].apply(e,i)})),-1<r.inArray(t,a)?this:n}}return null==r.fn.select2.defaults&&(r.fn.select2.defaults=t),o})),{define:e.define,require:e.require}}(),t=e.require("jquery.select2");return d.fn.select2.amd=e,t},"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof module&&module.exports?module.exports=function(e,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),n(t),t}:n(jQuery);!function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?exports.axios=factory():root.axios=factory()}(this,(function(){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=!0;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)}([function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(2),bind=__webpack_require__(3),Axios=__webpack_require__(4),mergeConfig=__webpack_require__(22);function createInstance(defaultConfig){var context=new Axios(defaultConfig),instance=bind(Axios.prototype.request,context);utils.extend(instance,Axios.prototype,context);utils.extend(instance,context);return instance}var axios=createInstance(__webpack_require__(10));axios.Axios=Axios;axios.create=function(instanceConfig){return createInstance(mergeConfig(axios.defaults,instanceConfig))};axios.Cancel=__webpack_require__(23);axios.CancelToken=__webpack_require__(24);axios.isCancel=__webpack_require__(9);axios.all=function(promises){return Promise.all(promises)};axios.spread=__webpack_require__(25);module.exports=axios;module.exports.default=axios},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(3),toString=Object.prototype.toString;function isArray(val){return"[object Array]"===toString.call(val)}function isUndefined(val){return void 0===val}function isObject(val){return null!==val&&"object"==typeof val}function isFunction(val){return"[object Function]"===toString.call(val)}function forEach(obj,fn){if(null!=obj){"object"!=typeof obj&&(obj=[obj]);if(isArray(obj))for(var i=0,l=obj.length;i<l;i++)fn.call(null,obj[i],i,obj);else for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&fn.call(null,obj[key],key,obj)}}module.exports={isArray:isArray,isArrayBuffer:function(val){return"[object ArrayBuffer]"===toString.call(val)},isBuffer:function(val){return null!==val&&!isUndefined(val)&&null!==val.constructor&&!isUndefined(val.constructor)&&"function"==typeof val.constructor.isBuffer&&val.constructor.isBuffer(val)},isFormData:function(val){return"undefined"!=typeof FormData&&val instanceof FormData},isArrayBufferView:function(val){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(val):val&&val.buffer&&val.buffer instanceof ArrayBuffer},isString:function(val){return"string"==typeof val},isNumber:function(val){return"number"==typeof val},isObject:isObject,isUndefined:isUndefined,isDate:function(val){return"[object Date]"===toString.call(val)},isFile:function(val){return"[object File]"===toString.call(val)},isBlob:function(val){return"[object Blob]"===toString.call(val)},isFunction:isFunction,isStream:function(val){return isObject(val)&&isFunction(val.pipe)},isURLSearchParams:function(val){return"undefined"!=typeof URLSearchParams&&val instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:forEach,merge:function merge(){var result={};function assignValue(val,key){"object"==typeof result[key]&&"object"==typeof val?result[key]=merge(result[key],val):result[key]=val}for(var i=0,l=arguments.length;i<l;i++)forEach(arguments[i],assignValue);return result},deepMerge:function deepMerge(){var result={};function assignValue(val,key){"object"==typeof result[key]&&"object"==typeof val?result[key]=deepMerge(result[key],val):result[key]="object"==typeof val?deepMerge({},val):val}for(var i=0,l=arguments.length;i<l;i++)forEach(arguments[i],assignValue);return result},extend:function(a,b,thisArg){forEach(b,(function(val,key){a[key]=thisArg&&"function"==typeof val?bind(val,thisArg):val}));return a},trim:function(str){return str.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(module,exports){"use strict";module.exports=function(fn,thisArg){return function(){for(var args=new Array(arguments.length),i=0;i<args.length;i++)args[i]=arguments[i];return fn.apply(thisArg,args)}}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(2),buildURL=__webpack_require__(5),InterceptorManager=__webpack_require__(6),dispatchRequest=__webpack_require__(7),mergeConfig=__webpack_require__(22);function Axios(instanceConfig){this.defaults=instanceConfig;this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios.prototype.request=function(config){"string"==typeof config?(config=arguments[1]||{}).url=arguments[0]:config=config||{};(config=mergeConfig(this.defaults,config)).method?config.method=config.method.toLowerCase():this.defaults.method?config.method=this.defaults.method.toLowerCase():config.method="get";var chain=[dispatchRequest,void 0],promise=Promise.resolve(config);this.interceptors.request.forEach((function(interceptor){chain.unshift(interceptor.fulfilled,interceptor.rejected)}));this.interceptors.response.forEach((function(interceptor){chain.push(interceptor.fulfilled,interceptor.rejected)}));for(;chain.length;)promise=promise.then(chain.shift(),chain.shift());return promise};Axios.prototype.getUri=function(config){config=mergeConfig(this.defaults,config);return buildURL(config.url,config.params,config.paramsSerializer).replace(/^\?/,"")};utils.forEach(["delete","get","head","options"],(function(method){Axios.prototype[method]=function(url,config){return this.request(utils.merge(config||{},{method:method,url:url}))}}));utils.forEach(["post","put","patch"],(function(method){Axios.prototype[method]=function(url,data,config){return this.request(utils.merge(config||{},{method:method,url:url,data:data}))}}));module.exports=Axios},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(2);function encode(val){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}module.exports=function(url,params,paramsSerializer){if(!params)return url;var serializedParams;if(paramsSerializer)serializedParams=paramsSerializer(params);else if(utils.isURLSearchParams(params))serializedParams=params.toString();else{var parts=[];utils.forEach(params,(function(val,key){if(null!=val){utils.isArray(val)?key+="[]":val=[val];utils.forEach(val,(function(v){utils.isDate(v)?v=v.toISOString():utils.isObject(v)&&(v=JSON.stringify(v));parts.push(encode(key)+"="+encode(v))}))}}));serializedParams=parts.join("&")}if(serializedParams){var hashmarkIndex=url.indexOf("#");-1!==hashmarkIndex&&(url=url.slice(0,hashmarkIndex));url+=(-1===url.indexOf("?")?"?":"&")+serializedParams}return url}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(2);function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function(fulfilled,rejected){this.handlers.push({fulfilled:fulfilled,rejected:rejected});return this.handlers.length-1};InterceptorManager.prototype.eject=function(id){this.handlers[id]&&(this.handlers[id]=null)};InterceptorManager.prototype.forEach=function(fn){utils.forEach(this.handlers,(function(h){null!==h&&fn(h)}))};module.exports=InterceptorManager},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(2),transformData=__webpack_require__(8),isCancel=__webpack_require__(9),defaults=__webpack_require__(10);function throwIfCancellationRequested(config){config.cancelToken&&config.cancelToken.throwIfRequested()}module.exports=function(config){throwIfCancellationRequested(config);config.headers=config.headers||{};config.data=transformData(config.data,config.headers,config.transformRequest);config.headers=utils.merge(config.headers.common||{},config.headers[config.method]||{},config.headers);utils.forEach(["delete","get","head","post","put","patch","common"],(function(method){delete config.headers[method]}));return(config.adapter||defaults.adapter)(config).then((function(response){throwIfCancellationRequested(config);response.data=transformData(response.data,response.headers,config.transformResponse);return response}),(function(reason){if(!isCancel(reason)){throwIfCancellationRequested(config);reason&&reason.response&&(reason.response.data=transformData(reason.response.data,reason.response.headers,config.transformResponse))}return Promise.reject(reason)}))}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(2);module.exports=function(data,headers,fns){utils.forEach(fns,(function(fn){data=fn(data,headers)}));return data}},function(module,exports){"use strict";module.exports=function(value){return!(!value||!value.__CANCEL__)}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(2),normalizeHeaderName=__webpack_require__(11),DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(headers,value){!utils.isUndefined(headers)&&utils.isUndefined(headers["Content-Type"])&&(headers["Content-Type"]=value)}var defaults={adapter:function(){var adapter;"undefined"!=typeof XMLHttpRequest?adapter=__webpack_require__(12):"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(adapter=__webpack_require__(12));return adapter}(),transformRequest:[function(data,headers){normalizeHeaderName(headers,"Accept");normalizeHeaderName(headers,"Content-Type");if(utils.isFormData(data)||utils.isArrayBuffer(data)||utils.isBuffer(data)||utils.isStream(data)||utils.isFile(data)||utils.isBlob(data))return data;if(utils.isArrayBufferView(data))return data.buffer;if(utils.isURLSearchParams(data)){setContentTypeIfUnset(headers,"application/x-www-form-urlencoded;charset=utf-8");return data.toString()}if(utils.isObject(data)){setContentTypeIfUnset(headers,"application/json;charset=utf-8");return JSON.stringify(data)}return data}],transformResponse:[function(data){if("string"==typeof data)try{data=JSON.parse(data)}catch(e){}return data}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(status){return status>=200&&status<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils.forEach(["delete","get","head"],(function(method){defaults.headers[method]={}}));utils.forEach(["post","put","patch"],(function(method){defaults.headers[method]=utils.merge(DEFAULT_CONTENT_TYPE)}));module.exports=defaults},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(2);module.exports=function(headers,normalizedName){utils.forEach(headers,(function(value,name){if(name!==normalizedName&&name.toUpperCase()===normalizedName.toUpperCase()){headers[normalizedName]=value;delete headers[name]}}))}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(2),settle=__webpack_require__(13),buildURL=__webpack_require__(5),buildFullPath=__webpack_require__(16),parseHeaders=__webpack_require__(19),isURLSameOrigin=__webpack_require__(20),createError=__webpack_require__(14);module.exports=function(config){return new Promise((function(resolve,reject){var requestData=config.data,requestHeaders=config.headers;utils.isFormData(requestData)&&delete requestHeaders["Content-Type"];var request=new XMLHttpRequest;if(config.auth){var username=config.auth.username||"",password=config.auth.password||"";requestHeaders.Authorization="Basic "+btoa(username+":"+password)}var fullPath=buildFullPath(config.baseURL,config.url);request.open(config.method.toUpperCase(),buildURL(fullPath,config.params,config.paramsSerializer),!0);request.timeout=config.timeout;request.onreadystatechange=function(){if(request&&4===request.readyState&&(0!==request.status||request.responseURL&&0===request.responseURL.indexOf("file:"))){var responseHeaders="getAllResponseHeaders"in request?parseHeaders(request.getAllResponseHeaders()):null,response={data:config.responseType&&"text"!==config.responseType?request.response:request.responseText,status:request.status,statusText:request.statusText,headers:responseHeaders,config:config,request:request};settle(resolve,reject,response);request=null}};request.onabort=function(){if(request){reject(createError("Request aborted",config,"ECONNABORTED",request));request=null}};request.onerror=function(){reject(createError("Network Error",config,null,request));request=null};request.ontimeout=function(){var timeoutErrorMessage="timeout of "+config.timeout+"ms exceeded";config.timeoutErrorMessage&&(timeoutErrorMessage=config.timeoutErrorMessage);reject(createError(timeoutErrorMessage,config,"ECONNABORTED",request));request=null};if(utils.isStandardBrowserEnv()){var cookies=__webpack_require__(21),xsrfValue=(config.withCredentials||isURLSameOrigin(fullPath))&&config.xsrfCookieName?cookies.read(config.xsrfCookieName):void 0;xsrfValue&&(requestHeaders[config.xsrfHeaderName]=xsrfValue)}"setRequestHeader"in request&&utils.forEach(requestHeaders,(function(val,key){void 0===requestData&&"content-type"===key.toLowerCase()?delete requestHeaders[key]:request.setRequestHeader(key,val)}));utils.isUndefined(config.withCredentials)||(request.withCredentials=!!config.withCredentials);if(config.responseType)try{request.responseType=config.responseType}catch(e){if("json"!==config.responseType)throw e}"function"==typeof config.onDownloadProgress&&request.addEventListener("progress",config.onDownloadProgress);"function"==typeof config.onUploadProgress&&request.upload&&request.upload.addEventListener("progress",config.onUploadProgress);config.cancelToken&&config.cancelToken.promise.then((function(cancel){if(request){request.abort();reject(cancel);request=null}}));void 0===requestData&&(requestData=null);request.send(requestData)}))}},function(module,exports,__webpack_require__){"use strict";var createError=__webpack_require__(14);module.exports=function(resolve,reject,response){var validateStatus=response.config.validateStatus;!validateStatus||validateStatus(response.status)?resolve(response):reject(createError("Request failed with status code "+response.status,response.config,null,response.request,response))}},function(module,exports,__webpack_require__){"use strict";var enhanceError=__webpack_require__(15);module.exports=function(message,config,code,request,response){var error=new Error(message);return enhanceError(error,config,code,request,response)}},function(module,exports){"use strict";module.exports=function(error,config,code,request,response){error.config=config;code&&(error.code=code);error.request=request;error.response=response;error.isAxiosError=!0;error.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}};return error}},function(module,exports,__webpack_require__){"use strict";var isAbsoluteURL=__webpack_require__(17),combineURLs=__webpack_require__(18);module.exports=function(baseURL,requestedURL){return baseURL&&!isAbsoluteURL(requestedURL)?combineURLs(baseURL,requestedURL):requestedURL}},function(module,exports){"use strict";module.exports=function(url){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(url)}},function(module,exports){"use strict";module.exports=function(baseURL,relativeURL){return relativeURL?baseURL.replace(/\/+$/,"")+"/"+relativeURL.replace(/^\/+/,""):baseURL}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(2),ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];module.exports=function(headers){var key,val,i,parsed={};if(!headers)return parsed;utils.forEach(headers.split("\n"),(function(line){i=line.indexOf(":");key=utils.trim(line.substr(0,i)).toLowerCase();val=utils.trim(line.substr(i+1));if(key){if(parsed[key]&&ignoreDuplicateOf.indexOf(key)>=0)return;parsed[key]="set-cookie"===key?(parsed[key]?parsed[key]:[]).concat([val]):parsed[key]?parsed[key]+", "+val:val}}));return parsed}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(2);module.exports=utils.isStandardBrowserEnv()?function(){var originURL,msie=/(msie|trident)/i.test(navigator.userAgent),urlParsingNode=document.createElement("a");function resolveURL(url){var href=url;if(msie){urlParsingNode.setAttribute("href",href);href=urlParsingNode.href}urlParsingNode.setAttribute("href",href);return{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}originURL=resolveURL(window.location.href);return function(requestURL){var parsed=utils.isString(requestURL)?resolveURL(requestURL):requestURL;return parsed.protocol===originURL.protocol&&parsed.host===originURL.host}}():function(){return!0}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(2);module.exports=utils.isStandardBrowserEnv()?{write:function(name,value,expires,path,domain,secure){var cookie=[];cookie.push(name+"="+encodeURIComponent(value));utils.isNumber(expires)&&cookie.push("expires="+new Date(expires).toGMTString());utils.isString(path)&&cookie.push("path="+path);utils.isString(domain)&&cookie.push("domain="+domain);!0===secure&&cookie.push("secure");document.cookie=cookie.join("; ")},read:function(name){var match=document.cookie.match(new RegExp("(^|;\\s*)("+name+")=([^;]*)"));return match?decodeURIComponent(match[3]):null},remove:function(name){this.write(name,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(2);module.exports=function(config1,config2){config2=config2||{};var config={},valueFromConfig2Keys=["url","method","params","data"],mergeDeepPropertiesKeys=["headers","auth","proxy"],defaultToConfig2Keys=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];utils.forEach(valueFromConfig2Keys,(function(prop){void 0!==config2[prop]&&(config[prop]=config2[prop])}));utils.forEach(mergeDeepPropertiesKeys,(function(prop){utils.isObject(config2[prop])?config[prop]=utils.deepMerge(config1[prop],config2[prop]):void 0!==config2[prop]?config[prop]=config2[prop]:utils.isObject(config1[prop])?config[prop]=utils.deepMerge(config1[prop]):void 0!==config1[prop]&&(config[prop]=config1[prop])}));utils.forEach(defaultToConfig2Keys,(function(prop){void 0!==config2[prop]?config[prop]=config2[prop]:void 0!==config1[prop]&&(config[prop]=config1[prop])}));var axiosKeys=valueFromConfig2Keys.concat(mergeDeepPropertiesKeys).concat(defaultToConfig2Keys),otherKeys=Object.keys(config2).filter((function(key){return-1===axiosKeys.indexOf(key)}));utils.forEach(otherKeys,(function(prop){void 0!==config2[prop]?config[prop]=config2[prop]:void 0!==config1[prop]&&(config[prop]=config1[prop])}));return config}},function(module,exports){"use strict";function Cancel(message){this.message=message}Cancel.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Cancel.prototype.__CANCEL__=!0;module.exports=Cancel},function(module,exports,__webpack_require__){"use strict";var Cancel=__webpack_require__(23);function CancelToken(executor){if("function"!=typeof executor)throw new TypeError("executor must be a function.");var resolvePromise;this.promise=new Promise((function(resolve){resolvePromise=resolve}));var token=this;executor((function(message){if(!token.reason){token.reason=new Cancel(message);resolvePromise(token.reason)}}))}CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};CancelToken.source=function(){var cancel;return{token:new CancelToken((function(c){cancel=c})),cancel:cancel}};module.exports=CancelToken},function(module,exports){"use strict";module.exports=function(callback){return function(arr){return callback.apply(null,arr)}}}])}));!function(t){("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Buffer=function t(r,e,n){function i(f,u){if(!e[f]){if(!r[f]){var s="function"==typeof require&&require;if(!u&&s)return s(f,!0);if(o)return o(f,!0);var h=new Error("Cannot find module '"+f+"'");throw h.code="MODULE_NOT_FOUND",h}var a=e[f]={exports:{}};r[f][0].call(a.exports,(function(t){return i(r[f][1][t]||t)}),a,a.exports,t,r,e,n)}return e[f].exports}for(var o="function"==typeof require&&require,f=0;f<n.length;f++)i(n[f]);return i}({1:[function(t,r,e){"use strict";e.byteLength=function(t){var r=h(t),e=r[0],n=r[1];return 3*(e+n)/4-n},e.toByteArray=function(t){var r,e,n=h(t),f=n[0],u=n[1],s=new o(function(t,r,e){return 3*(r+e)/4-e}(0,f,u)),a=0,p=u>0?f-4:f;for(e=0;e<p;e+=4)r=i[t.charCodeAt(e)]<<18|i[t.charCodeAt(e+1)]<<12|i[t.charCodeAt(e+2)]<<6|i[t.charCodeAt(e+3)],s[a++]=r>>16&255,s[a++]=r>>8&255,s[a++]=255&r;2===u&&(r=i[t.charCodeAt(e)]<<2|i[t.charCodeAt(e+1)]>>4,s[a++]=255&r);1===u&&(r=i[t.charCodeAt(e)]<<10|i[t.charCodeAt(e+1)]<<4|i[t.charCodeAt(e+2)]>>2,s[a++]=r>>8&255,s[a++]=255&r);return s},e.fromByteArray=function(t){for(var r,e=t.length,i=e%3,o=[],f=0,u=e-i;f<u;f+=16383)o.push(a(t,f,f+16383>u?u:f+16383));1===i?(r=t[e-1],o.push(n[r>>2]+n[r<<4&63]+"==")):2===i&&(r=(t[e-2]<<8)+t[e-1],o.push(n[r>>10]+n[r>>4&63]+n[r<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,s=f.length;u<s;++u)n[u]=f[u],i[f.charCodeAt(u)]=u;function h(t){var r=t.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=t.indexOf("=");return-1===e&&(e=r),[e,e===r?0:4-e%4]}function a(t,r,e){for(var i,o,f=[],u=r;u<e;u+=3)i=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(255&t[u+2]),f.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return f.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],2:[function(t,r,e){(function(r){"use strict";var n=t("base64-js"),i=t("ieee754");e.Buffer=r,e.SlowBuffer=function(t){+t!=t&&(t=0);return r.alloc(+t)},e.INSPECT_MAX_BYTES=50;var o=2147483647;function f(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return e.__proto__=r.prototype,e}function r(t,r,e){if("number"==typeof t){if("string"==typeof r)throw new TypeError('The "string" argument must be of type string. Received type number');return h(t)}return u(t,r,e)}function u(t,e,n){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!r.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=0|c(t,e),i=f(n),o=i.write(t,e);o!==n&&(i=i.slice(0,o));return i}(t,e);if(ArrayBuffer.isView(t))return a(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(z(t,ArrayBuffer)||t&&z(t.buffer,ArrayBuffer))return function(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var i;return(i=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n)).__proto__=r.prototype,i}(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=t.valueOf&&t.valueOf();if(null!=i&&i!==t)return r.from(i,e,n);var o=function(t){if(r.isBuffer(t)){var e=0|p(t.length),n=f(e);return 0===n.length?n:(t.copy(n,0,0,e),n)}return void 0!==t.length?"number"!=typeof t.length||D(t.length)?f(0):a(t):"Buffer"===t.type&&Array.isArray(t.data)?a(t.data):void 0}(t);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return r.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function h(t){return s(t),f(t<0?0:0|p(t))}function a(t){for(var r=t.length<0?0:0|p(t.length),e=f(r),n=0;n<r;n+=1)e[n]=255&t[n];return e}function p(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function c(t,e){if(r.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||z(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;for(var o=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return P(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return j(t).length;default:if(o)return i?-1:P(t).length;e=(""+e).toLowerCase(),o=!0}}function l(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function y(t,e,n,i,o){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),D(n=+n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=r.from(e,i)),r.isBuffer(e))return 0===e.length?-1:g(t,e,n,i,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):g(t,[e],n,i,o);throw new TypeError("val must be string, number or Buffer")}function g(t,r,e,n,i){var o,f=1,u=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;f=2,u/=2,s/=2,e/=2}function h(t,r){return 1===f?t[r]:t.readUInt16BE(r*f)}if(i){var a=-1;for(o=e;o<u;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*f}else-1!==a&&(o-=o-a),a=-1}else for(e+s>u&&(e=u-s),o=e;o>=0;o--){for(var p=!0,c=0;c<s;c++)if(h(t,o+c)!==h(r,c)){p=!1;break}if(p)return o}return-1}function w(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;n>o/2&&(n=o/2);for(var f=0;f<n;++f){var u=parseInt(r.substr(2*f,2),16);if(D(u))return f;t[e+f]=u}return f}function d(t,r,e,n){return N(P(r,t.length-e),t,e,n)}function v(t,r,e,n){return N(function(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}(r),t,e,n)}function b(t,r,e,n){return v(t,r,e,n)}function m(t,r,e,n){return N(j(r),t,e,n)}function E(t,r,e,n){return N(function(t,r){for(var e,n,i,o=[],f=0;f<t.length&&!((r-=2)<0);++f)n=(e=t.charCodeAt(f))>>8,i=e%256,o.push(i),o.push(n);return o}(r,t.length-e),t,e,n)}function B(t,r,e){return 0===r&&e===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(r,e))}function A(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,f,u,s,h=t[i],a=null,p=h>239?4:h>223?3:h>191?2:1;if(i+p<=e)switch(p){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],f=t[i+2],128==(192&o)&&128==(192&f)&&(s=(15&h)<<12|(63&o)<<6|63&f)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],f=t[i+2],u=t[i+3],128==(192&o)&&128==(192&f)&&128==(192&u)&&(s=(15&h)<<18|(63&o)<<12|(63&f)<<6|63&u)>65535&&s<1114112&&(a=s)}null===a?(a=65533,p=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=p}return function(t){var r=t.length;if(r<=U)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=U));return e}(n)}e.kMaxLength=o,r.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}(),r.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(t,r,e){return u(t,r,e)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(t,r,e){return function(t,r,e){return s(t),t<=0?f(t):void 0!==r?"string"==typeof e?f(t).fill(r,e):f(t).fill(r):f(t)}(t,r,e)},r.allocUnsafe=function(t){return h(t)},r.allocUnsafeSlow=function(t){return h(t)},r.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==r.prototype},r.compare=function(t,e){if(z(t,Uint8Array)&&(t=r.from(t,t.offset,t.byteLength)),z(e,Uint8Array)&&(e=r.from(e,e.offset,e.byteLength)),!r.isBuffer(t)||!r.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,i=e.length,o=0,f=Math.min(n,i);o<f;++o)if(t[o]!==e[o]){n=t[o],i=e[o];break}return n<i?-1:i<n?1:0},r.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return r.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=r.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var f=t[n];if(z(f,Uint8Array)&&(f=r.from(f)),!r.isBuffer(f))throw new TypeError('"list" argument must be an Array of Buffers');f.copy(i,o),o+=f.length}return i},r.byteLength=c,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)l(this,r,r+1);return this},r.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)l(this,r,r+3),l(this,r+1,r+2);return this},r.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)l(this,r,r+7),l(this,r+1,r+6),l(this,r+2,r+5),l(this,r+3,r+4);return this},r.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?A(this,0,t):function(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return S(this,r,e);case"utf8":case"utf-8":return A(this,r,e);case"ascii":return T(this,r,e);case"latin1":case"binary":return I(this,r,e);case"base64":return B(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===r.compare(this,t)},r.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},r.prototype.compare=function(t,e,n,i,o){if(z(t,Uint8Array)&&(t=r.from(t,t.offset,t.byteLength)),!r.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),e<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&e>=n)return 0;if(i>=o)return-1;if(e>=n)return 1;if(this===t)return 0;for(var f=(o>>>=0)-(i>>>=0),u=(n>>>=0)-(e>>>=0),s=Math.min(f,u),h=this.slice(i,o),a=t.slice(e,n),p=0;p<s;++p)if(h[p]!==a[p]){f=h[p],u=a[p];break}return f<u?-1:u<f?1:0},r.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},r.prototype.indexOf=function(t,r,e){return y(this,t,r,e,!0)},r.prototype.lastIndexOf=function(t,r,e){return y(this,t,r,e,!1)},r.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r>>>=0,isFinite(e)?(e>>>=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return w(this,t,r,e);case"utf8":case"utf-8":return d(this,t,r,e);case"ascii":return v(this,t,r,e);case"latin1":case"binary":return b(this,t,r,e);case"base64":return m(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var U=4096;function T(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function I(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function S(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=k(t[o]);return i}function L(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function R(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function C(t,e,n,i,o,f){if(!r.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<f)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function _(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function O(t,r,e,n,o){return r=+r,e>>>=0,o||_(t,0,e,4),i.write(t,r,e,n,23,4),e+4}function x(t,r,e,n,o){return r=+r,e>>>=0,o||_(t,0,e,8),i.write(t,r,e,n,52,8),e+8}r.prototype.slice=function(t,e){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var i=this.subarray(t,e);return i.__proto__=r.prototype,i},r.prototype.readUIntLE=function(t,r,e){t>>>=0,r>>>=0,e||R(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},r.prototype.readUIntBE=function(t,r,e){t>>>=0,r>>>=0,e||R(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},r.prototype.readUInt8=function(t,r){return t>>>=0,r||R(t,1,this.length),this[t]},r.prototype.readUInt16LE=function(t,r){return t>>>=0,r||R(t,2,this.length),this[t]|this[t+1]<<8},r.prototype.readUInt16BE=function(t,r){return t>>>=0,r||R(t,2,this.length),this[t]<<8|this[t+1]},r.prototype.readUInt32LE=function(t,r){return t>>>=0,r||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},r.prototype.readUInt32BE=function(t,r){return t>>>=0,r||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},r.prototype.readIntLE=function(t,r,e){t>>>=0,r>>>=0,e||R(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},r.prototype.readIntBE=function(t,r,e){t>>>=0,r>>>=0,e||R(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},r.prototype.readInt8=function(t,r){return t>>>=0,r||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},r.prototype.readInt16LE=function(t,r){t>>>=0,r||R(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},r.prototype.readInt16BE=function(t,r){t>>>=0,r||R(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},r.prototype.readInt32LE=function(t,r){return t>>>=0,r||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},r.prototype.readInt32BE=function(t,r){return t>>>=0,r||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},r.prototype.readFloatLE=function(t,r){return t>>>=0,r||R(t,4,this.length),i.read(this,t,!0,23,4)},r.prototype.readFloatBE=function(t,r){return t>>>=0,r||R(t,4,this.length),i.read(this,t,!1,23,4)},r.prototype.readDoubleLE=function(t,r){return t>>>=0,r||R(t,8,this.length),i.read(this,t,!0,52,8)},r.prototype.readDoubleBE=function(t,r){return t>>>=0,r||R(t,8,this.length),i.read(this,t,!1,52,8)},r.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r>>>=0,e>>>=0,n)||C(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},r.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r>>>=0,e>>>=0,n)||C(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},r.prototype.writeUInt8=function(t,r,e){return t=+t,r>>>=0,e||C(this,t,r,1,255,0),this[r]=255&t,r+1},r.prototype.writeUInt16LE=function(t,r,e){return t=+t,r>>>=0,e||C(this,t,r,2,65535,0),this[r]=255&t,this[r+1]=t>>>8,r+2},r.prototype.writeUInt16BE=function(t,r,e){return t=+t,r>>>=0,e||C(this,t,r,2,65535,0),this[r]=t>>>8,this[r+1]=255&t,r+2},r.prototype.writeUInt32LE=function(t,r,e){return t=+t,r>>>=0,e||C(this,t,r,4,4294967295,0),this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t,r+4},r.prototype.writeUInt32BE=function(t,r,e){return t=+t,r>>>=0,e||C(this,t,r,4,4294967295,0),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t,r+4},r.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r>>>=0,!n){var i=Math.pow(2,8*e-1);C(this,t,r,e,i-1,-i)}var o=0,f=1,u=0;for(this[r]=255&t;++o<e&&(f*=256);)t<0&&0===u&&0!==this[r+o-1]&&(u=1),this[r+o]=(t/f>>0)-u&255;return r+e},r.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r>>>=0,!n){var i=Math.pow(2,8*e-1);C(this,t,r,e,i-1,-i)}var o=e-1,f=1,u=0;for(this[r+o]=255&t;--o>=0&&(f*=256);)t<0&&0===u&&0!==this[r+o+1]&&(u=1),this[r+o]=(t/f>>0)-u&255;return r+e},r.prototype.writeInt8=function(t,r,e){return t=+t,r>>>=0,e||C(this,t,r,1,127,-128),t<0&&(t=255+t+1),this[r]=255&t,r+1},r.prototype.writeInt16LE=function(t,r,e){return t=+t,r>>>=0,e||C(this,t,r,2,32767,-32768),this[r]=255&t,this[r+1]=t>>>8,r+2},r.prototype.writeInt16BE=function(t,r,e){return t=+t,r>>>=0,e||C(this,t,r,2,32767,-32768),this[r]=t>>>8,this[r+1]=255&t,r+2},r.prototype.writeInt32LE=function(t,r,e){return t=+t,r>>>=0,e||C(this,t,r,4,2147483647,-2147483648),this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24,r+4},r.prototype.writeInt32BE=function(t,r,e){return t=+t,r>>>=0,e||C(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t,r+4},r.prototype.writeFloatLE=function(t,r,e){return O(this,t,r,!0,e)},r.prototype.writeFloatBE=function(t,r,e){return O(this,t,r,!1,e)},r.prototype.writeDoubleLE=function(t,r,e){return x(this,t,r,!0,e)},r.prototype.writeDoubleBE=function(t,r,e){return x(this,t,r,!1,e)},r.prototype.copy=function(t,e,n,i){if(!r.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var o=i-n;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,n,i);else if(this===t&&n<e&&e<i)for(var f=o-1;f>=0;--f)t[f+e]=this[f+n];else Uint8Array.prototype.set.call(t,this.subarray(n,i),e);return o},r.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!r.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===t.length){var o=t.charCodeAt(0);("utf8"===i&&o<128||"latin1"===i)&&(t=o)}}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var f;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(f=e;f<n;++f)this[f]=t;else{var u=r.isBuffer(t)?t:r.from(t,i),s=u.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(f=0;f<n-e;++f)this[f+e]=u[f%s]}return this};var M=/[^+\/0-9A-Za-z-_]/g;function k(t){return t<16?"0"+t.toString(16):t.toString(16)}function P(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],f=0;f<n;++f){if((e=t.charCodeAt(f))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(f+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function j(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(M,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function N(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function z(t,r){return t instanceof r||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===r.name}function D(t){return t!=t}}).call(this,t("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:3}],3:[function(t,r,e){e.read=function(t,r,e,n,i){var o,f,u=8*i-n-1,s=(1<<u)-1,h=s>>1,a=-7,p=e?i-1:0,c=e?-1:1,l=t[r+p];for(p+=c,o=l&(1<<-a)-1,l>>=-a,a+=u;a>0;o=256*o+t[r+p],p+=c,a-=8);for(f=o&(1<<-a)-1,o>>=-a,a+=n;a>0;f=256*f+t[r+p],p+=c,a-=8);if(0===o)o=1-h;else{if(o===s)return f?NaN:1/0*(l?-1:1);f+=Math.pow(2,n),o-=h}return(l?-1:1)*f*Math.pow(2,o-n)},e.write=function(t,r,e,n,i,o){var f,u,s,h=8*o-i-1,a=(1<<h)-1,p=a>>1,c=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,l=n?0:o-1,y=n?1:-1,g=r<0||0===r&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(u=isNaN(r)?1:0,f=a):(f=Math.floor(Math.log(r)/Math.LN2),r*(s=Math.pow(2,-f))<1&&(f--,s*=2),(r+=f+p>=1?c/s:c*Math.pow(2,1-p))*s>=2&&(f++,s/=2),f+p>=a?(u=0,f=a):f+p>=1?(u=(r*s-1)*Math.pow(2,i),f+=p):(u=r*Math.pow(2,p-1)*Math.pow(2,i),f=0));i>=8;t[e+l]=255&u,l+=y,u/=256,i-=8);for(f=f<<i|u,h+=i;h>0;t[e+l]=255&f,l+=y,f/=256,h-=8);t[e+l-y]|=128*g}},{}],4:[function(t,r,e){(function(r){"use strict";var n=t("base64-js"),i=t("ieee754"),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=r,e.SlowBuffer=function(t){+t!=t&&(t=0);return r.alloc(+t)},e.INSPECT_MAX_BYTES=50;var f=2147483647;function u(t){if(t>f)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,r.prototype),e}function r(t,r,e){if("number"==typeof t){if("string"==typeof r)throw new TypeError('The "string" argument must be of type string. Received type number');return a(t)}return s(t,r,e)}function s(t,e,n){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!r.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=0|y(t,e),i=u(n),o=i.write(t,e);o!==n&&(i=i.slice(0,o));return i}(t,e);if(ArrayBuffer.isView(t))return p(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(D(t,ArrayBuffer)||t&&D(t.buffer,ArrayBuffer))return c(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(D(t,SharedArrayBuffer)||t&&D(t.buffer,SharedArrayBuffer)))return c(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=t.valueOf&&t.valueOf();if(null!=i&&i!==t)return r.from(i,e,n);var o=function(t){if(r.isBuffer(t)){var e=0|l(t.length),n=u(e);return 0===n.length?n:(t.copy(n,0,0,e),n)}return void 0!==t.length?"number"!=typeof t.length||F(t.length)?u(0):p(t):"Buffer"===t.type&&Array.isArray(t.data)?p(t.data):void 0}(t);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return r.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function a(t){return h(t),u(t<0?0:0|l(t))}function p(t){for(var r=t.length<0?0:0|l(t.length),e=u(r),n=0;n<r;n+=1)e[n]=255&t[n];return e}function c(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var i;return i=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(i,r.prototype),i}function l(t){if(t>=f)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return 0|t}function y(t,e){if(r.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||D(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;for(var o=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return N(t).length;default:if(o)return i?-1:j(t).length;e=(""+e).toLowerCase(),o=!0}}function g(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function w(t,e,n,i,o){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),F(n=+n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=r.from(e,i)),r.isBuffer(e))return 0===e.length?-1:d(t,e,n,i,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):d(t,[e],n,i,o);throw new TypeError("val must be string, number or Buffer")}function d(t,r,e,n,i){var o,f=1,u=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;f=2,u/=2,s/=2,e/=2}function h(t,r){return 1===f?t[r]:t.readUInt16BE(r*f)}if(i){var a=-1;for(o=e;o<u;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*f}else-1!==a&&(o-=o-a),a=-1}else for(e+s>u&&(e=u-s),o=e;o>=0;o--){for(var p=!0,c=0;c<s;c++)if(h(t,o+c)!==h(r,c)){p=!1;break}if(p)return o}return-1}function v(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;n>o/2&&(n=o/2);for(var f=0;f<n;++f){var u=parseInt(r.substr(2*f,2),16);if(F(u))return f;t[e+f]=u}return f}function b(t,r,e,n){return z(j(r,t.length-e),t,e,n)}function m(t,r,e,n){return z(function(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}(r),t,e,n)}function E(t,r,e,n){return m(t,r,e,n)}function B(t,r,e,n){return z(N(r),t,e,n)}function A(t,r,e,n){return z(function(t,r){for(var e,n,i,o=[],f=0;f<t.length&&!((r-=2)<0);++f)n=(e=t.charCodeAt(f))>>8,i=e%256,o.push(i),o.push(n);return o}(r,t.length-e),t,e,n)}function U(t,r,e){return 0===r&&e===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(r,e))}function T(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,f,u,s,h=t[i],a=null,p=h>239?4:h>223?3:h>191?2:1;if(i+p<=e)switch(p){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],f=t[i+2],128==(192&o)&&128==(192&f)&&(s=(15&h)<<12|(63&o)<<6|63&f)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],f=t[i+2],u=t[i+3],128==(192&o)&&128==(192&f)&&128==(192&u)&&(s=(15&h)<<18|(63&o)<<12|(63&f)<<6|63&u)>65535&&s<1114112&&(a=s)}null===a?(a=65533,p=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=p}return function(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}(n)}e.kMaxLength=f,r.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),r={foo:function(){return 42}};return Object.setPrototypeOf(r,Uint8Array.prototype),Object.setPrototypeOf(t,r),42===t.foo()}catch(t){return!1}}(),r.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),r.poolSize=8192,r.from=function(t,r,e){return s(t,r,e)},Object.setPrototypeOf(r.prototype,Uint8Array.prototype),Object.setPrototypeOf(r,Uint8Array),r.alloc=function(t,r,e){return function(t,r,e){return h(t),t<=0?u(t):void 0!==r?"string"==typeof e?u(t).fill(r,e):u(t).fill(r):u(t)}(t,r,e)},r.allocUnsafe=function(t){return a(t)},r.allocUnsafeSlow=function(t){return a(t)},r.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==r.prototype},r.compare=function(t,e){if(D(t,Uint8Array)&&(t=r.from(t,t.offset,t.byteLength)),D(e,Uint8Array)&&(e=r.from(e,e.offset,e.byteLength)),!r.isBuffer(t)||!r.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,i=e.length,o=0,f=Math.min(n,i);o<f;++o)if(t[o]!==e[o]){n=t[o],i=e[o];break}return n<i?-1:i<n?1:0},r.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return r.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=r.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var f=t[n];if(D(f,Uint8Array)&&(f=r.from(f)),!r.isBuffer(f))throw new TypeError('"list" argument must be an Array of Buffers');f.copy(i,o),o+=f.length}return i},r.byteLength=y,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)g(this,r,r+1);return this},r.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)g(this,r,r+3),g(this,r+1,r+2);return this},r.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)g(this,r,r+7),g(this,r+1,r+6),g(this,r+2,r+5),g(this,r+3,r+4);return this},r.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?T(this,0,t):function(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,r,e);case"utf8":case"utf-8":return T(this,r,e);case"ascii":return S(this,r,e);case"latin1":case"binary":return L(this,r,e);case"base64":return U(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===r.compare(this,t)},r.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},o&&(r.prototype[o]=r.prototype.inspect),r.prototype.compare=function(t,e,n,i,o){if(D(t,Uint8Array)&&(t=r.from(t,t.offset,t.byteLength)),!r.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),e<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&e>=n)return 0;if(i>=o)return-1;if(e>=n)return 1;if(this===t)return 0;for(var f=(o>>>=0)-(i>>>=0),u=(n>>>=0)-(e>>>=0),s=Math.min(f,u),h=this.slice(i,o),a=t.slice(e,n),p=0;p<s;++p)if(h[p]!==a[p]){f=h[p],u=a[p];break}return f<u?-1:u<f?1:0},r.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},r.prototype.indexOf=function(t,r,e){return w(this,t,r,e,!0)},r.prototype.lastIndexOf=function(t,r,e){return w(this,t,r,e,!1)},r.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r>>>=0,isFinite(e)?(e>>>=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return v(this,t,r,e);case"utf8":case"utf-8":return b(this,t,r,e);case"ascii":return m(this,t,r,e);case"latin1":case"binary":return E(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function S(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function R(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Y[t[o]];return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function _(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,n,i,o,f){if(!r.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<f)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function x(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function M(t,r,e,n,o){return r=+r,e>>>=0,o||x(t,0,e,4),i.write(t,r,e,n,23,4),e+4}function k(t,r,e,n,o){return r=+r,e>>>=0,o||x(t,0,e,8),i.write(t,r,e,n,52,8),e+8}r.prototype.slice=function(t,e){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var i=this.subarray(t,e);return Object.setPrototypeOf(i,r.prototype),i},r.prototype.readUIntLE=function(t,r,e){t>>>=0,r>>>=0,e||_(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},r.prototype.readUIntBE=function(t,r,e){t>>>=0,r>>>=0,e||_(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},r.prototype.readUInt8=function(t,r){return t>>>=0,r||_(t,1,this.length),this[t]},r.prototype.readUInt16LE=function(t,r){return t>>>=0,r||_(t,2,this.length),this[t]|this[t+1]<<8},r.prototype.readUInt16BE=function(t,r){return t>>>=0,r||_(t,2,this.length),this[t]<<8|this[t+1]},r.prototype.readUInt32LE=function(t,r){return t>>>=0,r||_(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},r.prototype.readUInt32BE=function(t,r){return t>>>=0,r||_(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},r.prototype.readIntLE=function(t,r,e){t>>>=0,r>>>=0,e||_(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},r.prototype.readIntBE=function(t,r,e){t>>>=0,r>>>=0,e||_(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},r.prototype.readInt8=function(t,r){return t>>>=0,r||_(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},r.prototype.readInt16LE=function(t,r){t>>>=0,r||_(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},r.prototype.readInt16BE=function(t,r){t>>>=0,r||_(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},r.prototype.readInt32LE=function(t,r){return t>>>=0,r||_(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},r.prototype.readInt32BE=function(t,r){return t>>>=0,r||_(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},r.prototype.readFloatLE=function(t,r){return t>>>=0,r||_(t,4,this.length),i.read(this,t,!0,23,4)},r.prototype.readFloatBE=function(t,r){return t>>>=0,r||_(t,4,this.length),i.read(this,t,!1,23,4)},r.prototype.readDoubleLE=function(t,r){return t>>>=0,r||_(t,8,this.length),i.read(this,t,!0,52,8)},r.prototype.readDoubleBE=function(t,r){return t>>>=0,r||_(t,8,this.length),i.read(this,t,!1,52,8)},r.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r>>>=0,e>>>=0,n)||O(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},r.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r>>>=0,e>>>=0,n)||O(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},r.prototype.writeUInt8=function(t,r,e){return t=+t,r>>>=0,e||O(this,t,r,1,255,0),this[r]=255&t,r+1},r.prototype.writeUInt16LE=function(t,r,e){return t=+t,r>>>=0,e||O(this,t,r,2,65535,0),this[r]=255&t,this[r+1]=t>>>8,r+2},r.prototype.writeUInt16BE=function(t,r,e){return t=+t,r>>>=0,e||O(this,t,r,2,65535,0),this[r]=t>>>8,this[r+1]=255&t,r+2},r.prototype.writeUInt32LE=function(t,r,e){return t=+t,r>>>=0,e||O(this,t,r,4,4294967295,0),this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t,r+4},r.prototype.writeUInt32BE=function(t,r,e){return t=+t,r>>>=0,e||O(this,t,r,4,4294967295,0),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t,r+4},r.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r>>>=0,!n){var i=Math.pow(2,8*e-1);O(this,t,r,e,i-1,-i)}var o=0,f=1,u=0;for(this[r]=255&t;++o<e&&(f*=256);)t<0&&0===u&&0!==this[r+o-1]&&(u=1),this[r+o]=(t/f>>0)-u&255;return r+e},r.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r>>>=0,!n){var i=Math.pow(2,8*e-1);O(this,t,r,e,i-1,-i)}var o=e-1,f=1,u=0;for(this[r+o]=255&t;--o>=0&&(f*=256);)t<0&&0===u&&0!==this[r+o+1]&&(u=1),this[r+o]=(t/f>>0)-u&255;return r+e},r.prototype.writeInt8=function(t,r,e){return t=+t,r>>>=0,e||O(this,t,r,1,127,-128),t<0&&(t=255+t+1),this[r]=255&t,r+1},r.prototype.writeInt16LE=function(t,r,e){return t=+t,r>>>=0,e||O(this,t,r,2,32767,-32768),this[r]=255&t,this[r+1]=t>>>8,r+2},r.prototype.writeInt16BE=function(t,r,e){return t=+t,r>>>=0,e||O(this,t,r,2,32767,-32768),this[r]=t>>>8,this[r+1]=255&t,r+2},r.prototype.writeInt32LE=function(t,r,e){return t=+t,r>>>=0,e||O(this,t,r,4,2147483647,-2147483648),this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24,r+4},r.prototype.writeInt32BE=function(t,r,e){return t=+t,r>>>=0,e||O(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t,r+4},r.prototype.writeFloatLE=function(t,r,e){return M(this,t,r,!0,e)},r.prototype.writeFloatBE=function(t,r,e){return M(this,t,r,!1,e)},r.prototype.writeDoubleLE=function(t,r,e){return k(this,t,r,!0,e)},r.prototype.writeDoubleBE=function(t,r,e){return k(this,t,r,!1,e)},r.prototype.copy=function(t,e,n,i){if(!r.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var o=i-n;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,n,i);else if(this===t&&n<e&&e<i)for(var f=o-1;f>=0;--f)t[f+e]=this[f+n];else Uint8Array.prototype.set.call(t,this.subarray(n,i),e);return o},r.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!r.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===t.length){var o=t.charCodeAt(0);("utf8"===i&&o<128||"latin1"===i)&&(t=o)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var f;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(f=e;f<n;++f)this[f]=t;else{var u=r.isBuffer(t)?t:r.from(t,i),s=u.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(f=0;f<n-e;++f)this[f+e]=u[f%s]}return this};var P=/[^+\/0-9A-Za-z-_]/g;function j(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],f=0;f<n;++f){if((e=t.charCodeAt(f))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(f+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function N(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(P,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function D(t,r){return t instanceof r||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===r.name}function F(t){return t!=t}var Y=function(){for(var t=new Array(256),r=0;r<16;++r)for(var e=16*r,n=0;n<16;++n)t[e+n]="0123456789abcdef"[r]+"0123456789abcdef"[n];return t}()}).call(this,t("buffer").Buffer)},{"base64-js":5,buffer:2,ieee754:6}],5:[function(t,r,e){arguments[4][1][0].apply(e,arguments)},{dup:1}],6:[function(t,r,e){arguments[4][3][0].apply(e,arguments)},{dup:3}]},{},[4])(4).Buffer}();!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports&&"string"!=typeof exports.nodeName?module.exports=t():e.Croppie=t()}("undefined"!=typeof self?self:this,(function(){"function"!=typeof Promise&&function(e){function n(e,t){return function(){e.apply(t,arguments)}}function r(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],u(e,n(i,this),n(o,this))}function a(n){var i=this;return null===this._state?void this._deferreds.push(n):void c((function(){var e=i._state?n.onFulfilled:n.onRejected;if(null!==e){var t;try{t=e(i._value)}catch(e){return void n.reject(e)}n.resolve(t)}else(i._state?n.resolve:n.reject)(i._value)}))}function i(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void u(n(t,e),n(i,this),n(o,this))}this._state=!0,this._value=e,s.call(this)}catch(e){o.call(this,e)}}function o(e){this._state=!1,this._value=e,s.call(this)}function s(){for(var e=0,t=this._deferreds.length;e<t;e++)a.call(this,this._deferreds[e]);this._deferreds=null}function l(e,t,n,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=i}function u(e,t,n){var i=!1;try{e((function(e){i||(i=!0,t(e))}),(function(e){i||(i=!0,n(e))}))}catch(e){if(i)return;i=!0,n(e)}}var t=setTimeout,c="function"==typeof setImmediate&&setImmediate||function(e){t(e,1)},h=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(n,i){var o=this;return new r((function(e,t){a.call(o,new l(n,i,e,t))}))},r.all=function(){var s=Array.prototype.slice.call(1===arguments.length&&h(arguments[0])?arguments[0]:arguments);return new r((function(i,o){function r(t,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void n.call(e,(function(e){r(t,e)}),o)}s[t]=e,0==--a&&i(s)}catch(e){o(e)}}if(0===s.length)return i([]);for(var a=s.length,e=0;e<s.length;e++)r(e,s[e])}))},r.resolve=function(t){return t&&"object"==typeof t&&t.constructor===r?t:new r((function(e){e(t)}))},r.reject=function(n){return new r((function(e,t){t(n)}))},r.race=function(o){return new r((function(e,t){for(var n=0,i=o.length;n<i;n++)o[n].then(e,t)}))},r._setImmediateFn=function(e){c=e},"undefined"!=typeof module&&module.exports?module.exports=r:e.Promise||(e.Promise=r)}(this),"function"!=typeof window.CustomEvent&&function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}(),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var i=atob(this.toDataURL(t,n).split(",")[1]),o=i.length,r=new Uint8Array(o),a=0;a<o;a++)r[a]=i.charCodeAt(a);e(new Blob([r],{type:t||"image/png"}))}});var v,g,w,i=["Webkit","Moz","ms"],o=document.createElement("div").style,l=[1,8,3,6],u=[2,7,4,5];function e(e){if(e in o)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=i.length;n--;)if((e=i[n]+t)in o)return e}function p(e,t){for(var n in e=e||{},t)t[n]&&t[n].constructor&&t[n].constructor===Object?(e[n]=e[n]||{},p(e[n],t[n])):e[n]=t[n];return e}function d(e){return p({},e)}function y(e){if("createEvent"in document){var t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0),e.dispatchEvent(t)}else e.fireEvent("onchange")}function b(e,t,n){if("string"==typeof t){var i=t;(t={})[i]=n}for(var o in t)e.style[o]=t[o]}function x(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function c(e,t){for(var n in t)e.setAttribute(n,t[n])}function C(e){return parseInt(e,10)}function m(e,t){var n=e.naturalWidth,i=e.naturalHeight,o=t||f(e);if(o&&5<=o){var r=n;n=i,i=r}return{width:n,height:i}}g=e("transform"),v=e("transformOrigin"),w=e("userSelect");var t={translate3d:{suffix:", 0px"},translate:{suffix:""}},E=function(e,t,n){this.x=parseFloat(e),this.y=parseFloat(t),this.scale=parseFloat(n)};E.parse=function(e){return e.style?E.parse(e.style[g]):-1<e.indexOf("matrix")||-1<e.indexOf("none")?E.fromMatrix(e):E.fromString(e)},E.fromMatrix=function(e){var t=e.substring(7).split(",");return t.length&&"none"!==e||(t=[1,0,0,1,0,0]),new E(C(t[4]),C(t[5]),parseFloat(t[0]))},E.fromString=function(e){var t=e.split(") "),n=t[0].substring(T.globals.translate.length+1).split(","),i=1<t.length?t[1].substring(6):1,o=1<n.length?n[0]:0,r=1<n.length?n[1]:0;return new E(o,r,i)},E.prototype.toString=function(){var e=t[T.globals.translate].suffix||"";return T.globals.translate+"("+this.x+"px, "+this.y+"px"+e+") scale("+this.scale+")"};var L=function(e){if(!e||!e.style[v])return this.x=0,void(this.y=0);var t=e.style[v].split(" ");this.x=parseFloat(t[0]),this.y=parseFloat(t[1])};function f(e){return e.exifdata&&e.exifdata.Orientation?C(e.exifdata.Orientation):1}function _(e,t,n){var i=t.width,o=t.height,r=e.getContext("2d");switch(e.width=t.width,e.height=t.height,r.save(),n){case 2:r.translate(i,0),r.scale(-1,1);break;case 3:r.translate(i,o),r.rotate(180*Math.PI/180);break;case 4:r.translate(0,o),r.scale(1,-1);break;case 5:e.width=o,e.height=i,r.rotate(90*Math.PI/180),r.scale(1,-1);break;case 6:e.width=o,e.height=i,r.rotate(90*Math.PI/180),r.translate(0,-o);break;case 7:e.width=o,e.height=i,r.rotate(-90*Math.PI/180),r.translate(-i,o),r.scale(1,-1);break;case 8:e.width=o,e.height=i,r.translate(0,i),r.rotate(-90*Math.PI/180)}r.drawImage(t,0,0,i,o),r.restore()}function r(){var e,t,n,i,o,r,a=this,s=a.options.viewport.type?"cr-vp-"+a.options.viewport.type:null;a.options.useCanvas=a.options.enableOrientation||R.call(a),a.data={},a.elements={},e=a.elements.boundary=document.createElement("div"),n=a.elements.viewport=document.createElement("div"),t=a.elements.img=document.createElement("img"),i=a.elements.overlay=document.createElement("div"),a.options.useCanvas?(a.elements.canvas=document.createElement("canvas"),a.elements.preview=a.elements.canvas):a.elements.preview=t,x(e,"cr-boundary"),e.setAttribute("aria-dropeffect","none"),o=a.options.boundary.width,r=a.options.boundary.height,b(e,{width:o+(isNaN(o)?"":"px"),height:r+(isNaN(r)?"":"px")}),x(n,"cr-viewport"),s&&x(n,s),b(n,{width:a.options.viewport.width+"px",height:a.options.viewport.height+"px"}),n.setAttribute("tabindex",0),x(a.elements.preview,"cr-image"),c(a.elements.preview,{alt:"preview","aria-grabbed":"false"}),x(i,"cr-overlay"),a.element.appendChild(e),e.appendChild(a.elements.preview),e.appendChild(n),e.appendChild(i),x(a.element,"croppie-container"),a.options.customClass&&x(a.element,a.options.customClass),function(){var h,p,d,l,m,f=this,n=!1;function v(e,t){var n=f.elements.preview.getBoundingClientRect(),i=m.y+t,o=m.x+e;f.options.enforceBoundary?(l.top>n.top+t&&l.bottom<n.bottom+t&&(m.y=i),l.left>n.left+e&&l.right<n.right+e&&(m.x=o)):(m.y=i,m.x=o)}function i(e){f.elements.preview.setAttribute("aria-grabbed",e),f.elements.boundary.setAttribute("aria-dropeffect",e?"move":"none")}function e(e){if((void 0===e.button||0===e.button)&&(e.preventDefault(),!n)){if(n=!0,h=e.pageX,p=e.pageY,e.touches){var t=e.touches[0];h=t.pageX,p=t.pageY}i(n),m=E.parse(f.elements.preview),window.addEventListener("mousemove",o),window.addEventListener("touchmove",o),window.addEventListener("mouseup",r),window.addEventListener("touchend",r),document.body.style[w]="none",l=f.elements.viewport.getBoundingClientRect()}}function o(e){e.preventDefault();var t=e.pageX,n=e.pageY;if(e.touches){var i=e.touches[0];t=i.pageX,n=i.pageY}var o=t-h,r=n-p,a={};if("touchmove"===e.type&&1<e.touches.length){var s=e.touches[0],l=e.touches[1],u=Math.sqrt((s.pageX-l.pageX)*(s.pageX-l.pageX)+(s.pageY-l.pageY)*(s.pageY-l.pageY));d||(d=u/f._currentZoom);var c=u/d;return B.call(f,c),void y(f.elements.zoomer)}v(o,r),a[g]=m.toString(),b(f.elements.preview,a),z.call(f),p=n,h=t}function r(){i(n=!1),window.removeEventListener("mousemove",o),window.removeEventListener("touchmove",o),window.removeEventListener("mouseup",r),window.removeEventListener("touchend",r),document.body.style[w]="",Z.call(f),F.call(f),d=0}f.elements.overlay.addEventListener("mousedown",e),f.elements.viewport.addEventListener("keydown",(function(e){if(!e.shiftKey||38!==e.keyCode&&40!==e.keyCode){if(f.options.enableKeyMovement&&37<=e.keyCode&&e.keyCode<=40){e.preventDefault();var t=function(e){switch(e){case 37:return[1,0];case 38:return[0,1];case 39:return[-1,0];case 40:return[0,-1]}}(e.keyCode);m=E.parse(f.elements.preview),document.body.style[w]="none",l=f.elements.viewport.getBoundingClientRect(),a={},v((i=t)[0],i[1]),a[g]=m.toString(),b(f.elements.preview,a),z.call(f),document.body.style[w]="",Z.call(f),F.call(f),d=0}}else{var n;n=38===e.keyCode?parseFloat(f.elements.zoomer.value)+parseFloat(f.elements.zoomer.step):parseFloat(f.elements.zoomer.value)-parseFloat(f.elements.zoomer.step),f.setZoom(n)}var i,a})),f.elements.overlay.addEventListener("touchstart",e)}.call(this),a.options.enableZoom&&function(){var i=this,e=i.elements.zoomerWrap=document.createElement("div"),t=i.elements.zoomer=document.createElement("input");function o(){(function(e){var t=this,n=e?e.transform:E.parse(t.elements.preview),i=e?e.viewportRect:t.elements.viewport.getBoundingClientRect(),o=e?e.origin:new L(t.elements.preview);function r(){var e={};e[g]=n.toString(),e[v]=o.toString(),b(t.elements.preview,e)}if(t._currentZoom=e?e.value:t._currentZoom,n.scale=t._currentZoom,t.elements.zoomer.setAttribute("aria-valuenow",t._currentZoom),r(),t.options.enforceBoundary){var a=function(e){var t=this._currentZoom,n=e.width,i=e.height,o=this.elements.boundary.clientWidth/2,r=this.elements.boundary.clientHeight/2,a=this.elements.preview.getBoundingClientRect(),s=a.width,l=a.height,u=n/2,c=i/2,h=-1*(u/t-o),p=-1*(c/t-r),d=1/t*u,m=1/t*c;return{translate:{maxX:h,minX:h-(s*(1/t)-n*(1/t)),maxY:p,minY:p-(l*(1/t)-i*(1/t))},origin:{maxX:s*(1/t)-d,minX:d,maxY:l*(1/t)-m,minY:m}}}.call(t,i),s=a.translate,l=a.origin;n.x>=s.maxX&&(o.x=l.minX,n.x=s.maxX),n.x<=s.minX&&(o.x=l.maxX,n.x=s.minX),n.y>=s.maxY&&(o.y=l.minY,n.y=s.maxY),n.y<=s.minY&&(o.y=l.maxY,n.y=s.minY)}r(),I.call(t),F.call(t)}).call(i,{value:parseFloat(t.value),origin:new L(i.elements.preview),viewportRect:i.elements.viewport.getBoundingClientRect(),transform:E.parse(i.elements.preview)})}function n(e){var t,n;if("ctrl"===i.options.mouseWheelZoom&&!0!==e.ctrlKey)return 0;t=e.wheelDelta?e.wheelDelta/1200:e.deltaY?e.deltaY/1060:e.detail?e.detail/-60:0,n=i._currentZoom+t*i._currentZoom,e.preventDefault(),B.call(i,n),o.call(i)}x(e,"cr-slider-wrap"),x(t,"cr-slider"),t.type="range",t.step="0.0001",t.value="1",t.style.display=i.options.showZoomer?"":"none",t.setAttribute("aria-label","zoom"),i.element.appendChild(e),e.appendChild(t),i._currentZoom=1,i.elements.zoomer.addEventListener("input",o),i.elements.zoomer.addEventListener("change",o),i.options.mouseWheelZoom&&(i.elements.boundary.addEventListener("mousewheel",n),i.elements.boundary.addEventListener("DOMMouseScroll",n))}.call(a),a.options.enableResize&&function(){var l,u,c,h,p,e,t,d=this,m=document.createElement("div"),i=!1,f=50;x(m,"cr-resizer"),b(m,{width:this.options.viewport.width+"px",height:this.options.viewport.height+"px"}),this.options.resizeControls.height&&(x(e=document.createElement("div"),"cr-resizer-vertical"),m.appendChild(e));this.options.resizeControls.width&&(x(t=document.createElement("div"),"cr-resizer-horisontal"),m.appendChild(t));function n(e){if((void 0===e.button||0===e.button)&&(e.preventDefault(),!i)){var t=d.elements.overlay.getBoundingClientRect();if(i=!0,u=e.pageX,c=e.pageY,l=-1!==e.currentTarget.className.indexOf("vertical")?"v":"h",h=t.width,p=t.height,e.touches){var n=e.touches[0];u=n.pageX,c=n.pageY}window.addEventListener("mousemove",o),window.addEventListener("touchmove",o),window.addEventListener("mouseup",r),window.addEventListener("touchend",r),document.body.style[w]="none"}}function o(e){var t=e.pageX,n=e.pageY;if(e.preventDefault(),e.touches){var i=e.touches[0];t=i.pageX,n=i.pageY}var o=t-u,r=n-c,a=d.options.viewport.height+r,s=d.options.viewport.width+o;"v"===l&&f<=a&&a<=p?(b(m,{height:a+"px"}),d.options.boundary.height+=r,b(d.elements.boundary,{height:d.options.boundary.height+"px"}),d.options.viewport.height+=r,b(d.elements.viewport,{height:d.options.viewport.height+"px"})):"h"===l&&f<=s&&s<=h&&(b(m,{width:s+"px"}),d.options.boundary.width+=o,b(d.elements.boundary,{width:d.options.boundary.width+"px"}),d.options.viewport.width+=o,b(d.elements.viewport,{width:d.options.viewport.width+"px"})),z.call(d),W.call(d),Z.call(d),F.call(d),c=n,u=t}function r(){i=!1,window.removeEventListener("mousemove",o),window.removeEventListener("touchmove",o),window.removeEventListener("mouseup",r),window.removeEventListener("touchend",r),document.body.style[w]=""}e&&(e.addEventListener("mousedown",n),e.addEventListener("touchstart",n));t&&(t.addEventListener("mousedown",n),t.addEventListener("touchstart",n));this.elements.boundary.appendChild(m)}.call(a)}function R(){return this.options.enableExif&&window.EXIF}function B(e){if(this.options.enableZoom){var t=this.elements.zoomer,n=A(e,4);t.value=Math.max(parseFloat(t.min),Math.min(parseFloat(t.max),n)).toString()}}function Z(e){var t=this,n=t._currentZoom,i=t.elements.preview.getBoundingClientRect(),o=t.elements.viewport.getBoundingClientRect(),r=E.parse(t.elements.preview.style[g]),a=new L(t.elements.preview),s=o.top-i.top+o.height/2,l=o.left-i.left+o.width/2,u={},c={};if(e){var h=a.x,p=a.y,d=r.x,m=r.y;u.y=h,u.x=p,r.y=d,r.x=m}else u.y=s/n,u.x=l/n,c.y=(u.y-a.y)*(1-n),c.x=(u.x-a.x)*(1-n),r.x-=c.x,r.y-=c.y;var f={};f[v]=u.x+"px "+u.y+"px",f[g]=r.toString(),b(t.elements.preview,f)}function z(){if(this.elements){var e=this.elements.boundary.getBoundingClientRect(),t=this.elements.preview.getBoundingClientRect();b(this.elements.overlay,{width:t.width+"px",height:t.height+"px",top:t.top-e.top+"px",left:t.left-e.left+"px"})}}L.prototype.toString=function(){return this.x+"px "+this.y+"px"};var a,h,M,I=(a=z,500,function(){var e=this,t=arguments,n=h;clearTimeout(M),M=setTimeout((function(){M=null,a.apply(e,t)}),500),n&&a.apply(e,t)});function F(){var e,t=this,n=t.get();X.call(t)&&(t.options.update.call(t,n),t.$&&"undefined"==typeof Prototype?t.$(t.element).trigger("update.croppie",n):(window.CustomEvent?e=new CustomEvent("update",{detail:n}):(e=document.createEvent("CustomEvent")).initCustomEvent("update",!0,!0,n),t.element.dispatchEvent(e)))}function X(){return 0<this.elements.preview.offsetHeight&&0<this.elements.preview.offsetWidth}function Y(){var e,t=this,n={},i=t.elements.preview,o=new E(0,0,1),r=new L;X.call(t)&&!t.data.bound&&(t.data.bound=!0,n[g]=o.toString(),n[v]=r.toString(),n.opacity=1,b(i,n),e=t.elements.preview.getBoundingClientRect(),t._originalImageWidth=e.width,t._originalImageHeight=e.height,t.data.orientation=f(t.elements.img),t.options.enableZoom?W.call(t,!0):t._currentZoom=1,o.scale=t._currentZoom,n[g]=o.toString(),b(i,n),t.data.points.length?function(e){if(4!==e.length)throw"Croppie - Invalid number of points supplied: "+e;var t=this,n=e[2]-e[0],i=t.elements.viewport.getBoundingClientRect(),o=t.elements.boundary.getBoundingClientRect(),r_left=i.left-o.left,r_top=i.top-o.top,a=i.width/n,s=e[1],l=e[0],u=-1*e[1]+r_top,c=-1*e[0]+r_left,h={};h[v]=l+"px "+s+"px",h[g]=new E(c,u,a).toString(),b(t.elements.preview,h),B.call(t,a),t._currentZoom=a}.call(t,t.data.points):function(){var e=this,t=e.elements.preview.getBoundingClientRect(),n=e.elements.viewport.getBoundingClientRect(),i=e.elements.boundary.getBoundingClientRect(),o=n.left-i.left,r=n.top-i.top,a=o-(t.width-n.width)/2,s=r-(t.height-n.height)/2,l=new E(a,s,e._currentZoom);b(e.elements.preview,g,l.toString())}.call(t),Z.call(t),z.call(t))}function W(e){var t,n,i,o,r=this,a=Math.max(r.options.minZoom,0)||0,s=r.options.maxZoom||1.5,l=r.elements.zoomer,u=parseFloat(l.value),c=r.elements.boundary.getBoundingClientRect(),h=m(r.elements.img,r.data.orientation),p=r.elements.viewport.getBoundingClientRect();r.options.enforceBoundary&&(i=p.width/h.width,o=p.height/h.height,a=Math.max(i,o)),s<=a&&(s=a+1),l.min=A(a,4),l.max=A(s,4),!e&&(u<l.min||u>l.max)?B.call(r,u<l.min?l.min:l.max):e&&(n=Math.max(c.width/h.width,c.height/h.height),t=null!==r.data.boundZoom?r.data.boundZoom:n,B.call(r,t)),y(l)}function O(e){var t=e.points,n=C(t[0]),i=C(t[1]),o=C(t[2])-n,r=C(t[3])-i,a=e.circle,s=document.createElement("canvas"),l=s.getContext("2d"),u=e.outputWidth||o,c=e.outputHeight||r;s.width=u,s.height=c,e.backgroundColor&&(l.fillStyle=e.backgroundColor,l.fillRect(0,0,u,c));var h=n,p=i,d=o,m=r,f=0,v=0,g=u,w=c;return n<0&&(h=0,f=Math.abs(n)/o*u),d+h>this._originalImageWidth&&(g=(d=this._originalImageWidth-h)/o*u),i<0&&(p=0,v=Math.abs(i)/r*c),m+p>this._originalImageHeight&&(w=(m=this._originalImageHeight-p)/r*c),l.drawImage(this.elements.preview,h,p,d,m,f,v,g,w),a&&(l.fillStyle="#fff",l.globalCompositeOperation="destination-in",l.beginPath(),l.arc(s.width/2,s.height/2,s.width/2,0,2*Math.PI,!0),l.closePath(),l.fill()),s}function k(c,h){var e,i,o,r,p=this,d=[],t=null,n=R.call(p);if("string"==typeof c)e=c,c={};else if(Array.isArray(c))d=c.slice();else{if(void 0===c&&p.data.url)return Y.call(p),F.call(p),null;e=c.url,d=c.points||[],t=void 0===c.zoom?null:c.zoom}return p.data.bound=!1,p.data.url=e||p.data.url,p.data.boundZoom=t,(i=e,o=n,r=new Image,r.style.opacity="0",new Promise((function(e,t){function n(){r.style.opacity="1",setTimeout((function(){e(r)}),1)}r.removeAttribute("crossOrigin"),i.match(/^https?:\/\/|^\/\//)&&r.setAttribute("crossOrigin","anonymous"),r.onload=function(){o?EXIF.getData(r,(function(){n()})):n()},r.onerror=function(e){r.style.opacity=1,setTimeout((function(){t(e)}),1)},r.src=i}))).then((function(e){if(function(t){this.elements.img.parentNode&&(Array.prototype.forEach.call(this.elements.img.classList,(function(e){t.classList.add(e)})),this.elements.img.parentNode.replaceChild(t,this.elements.img),this.elements.preview=t),this.elements.img=t}.call(p,e),d.length)p.options.relative&&(d=[d[0]*e.naturalWidth/100,d[1]*e.naturalHeight/100,d[2]*e.naturalWidth/100,d[3]*e.naturalHeight/100]);else{var t,n,i=m(e),o=p.elements.viewport.getBoundingClientRect(),r=o.width/o.height;r<i.width/i.height?t=(n=i.height)*r:(t=i.width,n=i.height/r);var a=(i.width-t)/2,s=(i.height-n)/2,l=a+t,u=s+n;p.data.points=[a,s,l,u]}p.data.points=d.map((function(e){return parseFloat(e)})),p.options.useCanvas&&function(e){var t=this.elements.canvas,n=this.elements.img;t.getContext("2d").clearRect(0,0,t.width,t.height),t.width=n.width,t.height=n.height,_(t,n,this.options.enableOrientation&&e||f(n))}.call(p,c.orientation),Y.call(p),F.call(p),h&&h()}))}function A(e,t){return parseFloat(e).toFixed(t||0)}function j(){var e=this,t=e.elements.preview.getBoundingClientRect(),n=e.elements.viewport.getBoundingClientRect(),i=n.left-t.left,o=n.top-t.top,r=(n.width-e.elements.viewport.offsetWidth)/2,a=(n.height-e.elements.viewport.offsetHeight)/2,s=i+e.elements.viewport.offsetWidth+r,l=o+e.elements.viewport.offsetHeight+a,u=e._currentZoom;(u===1/0||isNaN(u))&&(u=1);var c=e.options.enforceBoundary?0:Number.NEGATIVE_INFINITY;return i=Math.max(c,i/u),o=Math.max(c,o/u),s=Math.max(c,s/u),l=Math.max(c,l/u),{points:[A(i),A(o),A(s),A(l)],zoom:u,orientation:e.data.orientation}}var H={type:"canvas",format:"png",quality:1},N=["jpeg","webp","png"];function n(e){var t=this,n=j.call(t),i=p(d(H),d(e)),o="string"==typeof e?e:i.type||"base64",r=i.size||"viewport",a=i.format,s=i.quality,l=i.backgroundColor,u="boolean"==typeof i.circle?i.circle:"circle"===t.options.viewport.type,c=t.elements.viewport.getBoundingClientRect(),h=c.width/c.height;return"viewport"===r?(n.outputWidth=c.width,n.outputHeight=c.height):"object"==typeof r&&(r.width&&r.height?(n.outputWidth=r.width,n.outputHeight=r.height):r.width?(n.outputWidth=r.width,n.outputHeight=r.width/h):r.height&&(n.outputWidth=r.height*h,n.outputHeight=r.height)),-1<N.indexOf(a)&&(n.format="image/"+a,n.quality=s),n.circle=u,n.url=t.data.url,n.backgroundColor=l,new Promise((function(e){switch(o.toLowerCase()){case"rawcanvas":e(O.call(t,n));break;case"canvas":case"base64":e(function(e){return O.call(this,e).toDataURL(e.format,e.quality)}.call(t,n));break;case"blob":(function(e){var n=this;return new Promise((function(t){O.call(n,e).toBlob((function(e){t(e)}),e.format,e.quality)}))}).call(t,n).then(e);break;default:e(function(e){var t=e.points,n=document.createElement("div"),i=document.createElement("img"),o=t[2]-t[0],r=t[3]-t[1];return x(n,"croppie-result"),n.appendChild(i),b(i,{left:-1*t[0]+"px",top:-1*t[1]+"px"}),i.src=e.url,b(n,{width:o+"px",height:r+"px"}),n}.call(t,n))}}))}function S(e){if(!this.options.useCanvas||!this.options.enableOrientation)throw"Croppie: Cannot rotate without enableOrientation && EXIF.js included";var t,n,i,o,r,a=this,s=a.elements.canvas;a.data.orientation=(t=a.data.orientation,n=e,o=(i=-1<l.indexOf(t)?l:u).indexOf(t),r=n/90%i.length,i[(i.length+o+r%i.length)%i.length]),_(s,a.elements.img,a.data.orientation),Z.call(a,!0),W.call(a)}if(window.jQuery){var P=window.jQuery;P.fn.croppie=function(n){if("string"!=typeof n)return this.each((function(){var e=new T(this,n);(e.$=P)(this).data("croppie",e)}));var i=Array.prototype.slice.call(arguments,1),e=P(this).data("croppie");return"get"===n?e.get():"result"===n?e.result.apply(e,i):"bind"===n?e.bind.apply(e,i):this.each((function(){var e=P(this).data("croppie");if(e){var t=e[n];if(!P.isFunction(t))throw"Croppie "+n+" method not found";t.apply(e,i),"destroy"===n&&P(this).removeData("croppie")}}))}}function T(e,t){if(-1<e.className.indexOf("croppie-container"))throw new Error("Croppie: Can't initialize croppie more than once");if(this.element=e,this.options=p(d(T.defaults),t),"img"===this.element.tagName.toLowerCase()){var n=this.element;x(n,"cr-original-image"),c(n,{"aria-hidden":"true",alt:""});var i=document.createElement("div");this.element.parentNode.appendChild(i),i.appendChild(n),this.element=i,this.options.url=this.options.url||n.src}if(r.call(this),this.options.url){var o={url:this.options.url,points:this.options.points};delete this.options.url,delete this.options.points,k.call(this,o)}}return T.defaults={viewport:{width:100,height:100,type:"square"},boundary:{},orientationControls:{enabled:!0,leftClass:"",rightClass:""},resizeControls:{width:!0,height:!0},customClass:"",showZoomer:!0,enableZoom:!0,enableResize:!1,mouseWheelZoom:!0,enableExif:!1,enforceBoundary:!0,enableOrientation:!1,enableKeyMovement:!0,update:function(){}},T.globals={translate:"translate3d"},p(T.prototype,{bind:function(e,t){return k.call(this,e,t)},get:function(){var e=j.call(this),t=e.points;return this.options.relative&&(t[0]/=this.elements.img.naturalWidth/100,t[1]/=this.elements.img.naturalHeight/100,t[2]/=this.elements.img.naturalWidth/100,t[3]/=this.elements.img.naturalHeight/100),e},result:function(e){return n.call(this,e)},refresh:function(){return function(){Y.call(this)}.call(this)},setZoom:function(e){B.call(this,e),y(this.elements.zoomer)},rotate:function(e){S.call(this,e)},destroy:function(){return function(){var e,t,n=this;n.element.removeChild(n.elements.boundary),t="croppie-container",(e=n.element).classList?e.classList.remove(t):e.className=e.className.replace(t,""),n.options.enableZoom&&n.element.removeChild(n.elements.zoomerWrap),delete n.elements}.call(this)}}),T}));window.QRCode=function(){function QR8bitByte(data){this.mode=QRMode.MODE_8BIT_BYTE;this.data=data;this.parsedData=[];for(var i=0,l=this.data.length;i<l;i++){var byteArray=[],code=this.data.charCodeAt(i);if(code>65536){byteArray[0]=240|(1835008&code)>>>18;byteArray[1]=128|(258048&code)>>>12;byteArray[2]=128|(4032&code)>>>6;byteArray[3]=128|63&code}else if(code>2048){byteArray[0]=224|(61440&code)>>>12;byteArray[1]=128|(4032&code)>>>6;byteArray[2]=128|63&code}else if(code>128){byteArray[0]=192|(1984&code)>>>6;byteArray[1]=128|63&code}else byteArray[0]=code;this.parsedData.push(byteArray)}this.parsedData=Array.prototype.concat.apply([],this.parsedData);if(this.parsedData.length!=this.data.length){this.parsedData.unshift(191);this.parsedData.unshift(187);this.parsedData.unshift(239)}}QR8bitByte.prototype={getLength:function(buffer){return this.parsedData.length},write:function(buffer){for(var i=0,l=this.parsedData.length;i<l;i++)buffer.put(this.parsedData[i],8)}};function QRCodeModel(typeNumber,errorCorrectLevel){this.typeNumber=typeNumber;this.errorCorrectLevel=errorCorrectLevel;this.modules=null;this.moduleCount=0;this.dataCache=null;this.dataList=[]}QRCodeModel.prototype={addData:function(data){var newData=new QR8bitByte(data);this.dataList.push(newData);this.dataCache=null},isDark:function(row,col){if(row<0||this.moduleCount<=row||col<0||this.moduleCount<=col)throw new Error(row+","+col);return this.modules[row][col]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(test,maskPattern){this.moduleCount=4*this.typeNumber+17;this.modules=new Array(this.moduleCount);for(var row=0;row<this.moduleCount;row++){this.modules[row]=new Array(this.moduleCount);for(var col=0;col<this.moduleCount;col++)this.modules[row][col]=null}this.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-7,0);this.setupPositionProbePattern(0,this.moduleCount-7);this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(test,maskPattern);this.typeNumber>=7&&this.setupTypeNumber(test);null==this.dataCache&&(this.dataCache=QRCodeModel.createData(this.typeNumber,this.errorCorrectLevel,this.dataList));this.mapData(this.dataCache,maskPattern)},setupPositionProbePattern:function(row,col){for(var r=-1;r<=7;r++)if(!(row+r<=-1||this.moduleCount<=row+r))for(var c=-1;c<=7;c++)col+c<=-1||this.moduleCount<=col+c||(this.modules[row+r][col+c]=0<=r&&r<=6&&(0==c||6==c)||0<=c&&c<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=c&&c<=4)},getBestMaskPattern:function(){for(var minLostPoint=0,pattern=0,i=0;i<8;i++){this.makeImpl(!0,i);var lostPoint=QRUtil.getLostPoint(this);if(0==i||minLostPoint>lostPoint){minLostPoint=lostPoint;pattern=i}}return pattern},createMovieClip:function(target_mc,instance_name,depth){var qr_mc=target_mc.createEmptyMovieClip(instance_name,depth);this.make();for(var row=0;row<this.modules.length;row++)for(var y=1*row,col=0;col<this.modules[row].length;col++){var x=1*col;if(this.modules[row][col]){qr_mc.beginFill(0,100);qr_mc.moveTo(x,y);qr_mc.lineTo(x+1,y);qr_mc.lineTo(x+1,y+1);qr_mc.lineTo(x,y+1);qr_mc.endFill()}}return qr_mc},setupTimingPattern:function(){for(var r=8;r<this.moduleCount-8;r++)null==this.modules[r][6]&&(this.modules[r][6]=r%2==0);for(var c=8;c<this.moduleCount-8;c++)null==this.modules[6][c]&&(this.modules[6][c]=c%2==0)},setupPositionAdjustPattern:function(){for(var pos=QRUtil.getPatternPosition(this.typeNumber),i=0;i<pos.length;i++)for(var j=0;j<pos.length;j++){var row=pos[i],col=pos[j];if(null==this.modules[row][col])for(var r=-2;r<=2;r++)for(var c=-2;c<=2;c++)this.modules[row+r][col+c]=-2==r||2==r||-2==c||2==c||0==r&&0==c}},setupTypeNumber:function(test){for(var bits=QRUtil.getBCHTypeNumber(this.typeNumber),i=0;i<18;i++){var mod=!test&&1==(bits>>i&1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=mod}for(i=0;i<18;i++){mod=!test&&1==(bits>>i&1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=mod}},setupTypeInfo:function(test,maskPattern){for(var data=this.errorCorrectLevel<<3|maskPattern,bits=QRUtil.getBCHTypeInfo(data),i=0;i<15;i++){var mod=!test&&1==(bits>>i&1);i<6?this.modules[i][8]=mod:i<8?this.modules[i+1][8]=mod:this.modules[this.moduleCount-15+i][8]=mod}for(i=0;i<15;i++){mod=!test&&1==(bits>>i&1);i<8?this.modules[8][this.moduleCount-i-1]=mod:i<9?this.modules[8][15-i-1+1]=mod:this.modules[8][15-i-1]=mod}this.modules[this.moduleCount-8][8]=!test},mapData:function(data,maskPattern){for(var inc=-1,row=this.moduleCount-1,bitIndex=7,byteIndex=0,col=this.moduleCount-1;col>0;col-=2){6==col&&col--;for(;;){for(var c=0;c<2;c++)if(null==this.modules[row][col-c]){var dark=!1;byteIndex<data.length&&(dark=1==(data[byteIndex]>>>bitIndex&1));QRUtil.getMask(maskPattern,row,col-c)&&(dark=!dark);this.modules[row][col-c]=dark;if(-1==--bitIndex){byteIndex++;bitIndex=7}}if((row+=inc)<0||this.moduleCount<=row){row-=inc;inc=-inc;break}}}}};QRCodeModel.PAD0=236;QRCodeModel.PAD1=17;QRCodeModel.createData=function(typeNumber,errorCorrectLevel,dataList){for(var rsBlocks=QRRSBlock.getRSBlocks(typeNumber,errorCorrectLevel),buffer=new QRBitBuffer,i=0;i<dataList.length;i++){var data=dataList[i];buffer.put(data.mode,4);buffer.put(data.getLength(),QRUtil.getLengthInBits(data.mode,typeNumber));data.write(buffer)}var totalDataCount=0;for(i=0;i<rsBlocks.length;i++)totalDataCount+=rsBlocks[i].dataCount;if(buffer.getLengthInBits()>8*totalDataCount)throw new Error("code length overflow. ("+buffer.getLengthInBits()+">"+8*totalDataCount+")");buffer.getLengthInBits()+4<=8*totalDataCount&&buffer.put(0,4);for(;buffer.getLengthInBits()%8!=0;)buffer.putBit(!1);for(;!(buffer.getLengthInBits()>=8*totalDataCount);){buffer.put(QRCodeModel.PAD0,8);if(buffer.getLengthInBits()>=8*totalDataCount)break;buffer.put(QRCodeModel.PAD1,8)}return QRCodeModel.createBytes(buffer,rsBlocks)};QRCodeModel.createBytes=function(buffer,rsBlocks){for(var offset=0,maxDcCount=0,maxEcCount=0,dcdata=new Array(rsBlocks.length),ecdata=new Array(rsBlocks.length),r=0;r<rsBlocks.length;r++){var dcCount=rsBlocks[r].dataCount,ecCount=rsBlocks[r].totalCount-dcCount;maxDcCount=Math.max(maxDcCount,dcCount);maxEcCount=Math.max(maxEcCount,ecCount);dcdata[r]=new Array(dcCount);for(var i=0;i<dcdata[r].length;i++)dcdata[r][i]=255&buffer.buffer[i+offset];offset+=dcCount;var rsPoly=QRUtil.getErrorCorrectPolynomial(ecCount),modPoly=new QRPolynomial(dcdata[r],rsPoly.getLength()-1).mod(rsPoly);ecdata[r]=new Array(rsPoly.getLength()-1);for(i=0;i<ecdata[r].length;i++){var modIndex=i+modPoly.getLength()-ecdata[r].length;ecdata[r][i]=modIndex>=0?modPoly.get(modIndex):0}}var totalCodeCount=0;for(i=0;i<rsBlocks.length;i++)totalCodeCount+=rsBlocks[i].totalCount;var data=new Array(totalCodeCount),index=0;for(i=0;i<maxDcCount;i++)for(r=0;r<rsBlocks.length;r++)i<dcdata[r].length&&(data[index++]=dcdata[r][i]);for(i=0;i<maxEcCount;i++)for(r=0;r<rsBlocks.length;r++)i<ecdata[r].length&&(data[index++]=ecdata[r][i]);return data};for(var QRMode={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},QRErrorCorrectLevel={L:1,M:0,Q:3,H:2},QRMaskPattern_PATTERN000=0,QRMaskPattern_PATTERN001=1,QRMaskPattern_PATTERN010=2,QRMaskPattern_PATTERN011=3,QRMaskPattern_PATTERN100=4,QRMaskPattern_PATTERN101=5,QRMaskPattern_PATTERN110=6,QRMaskPattern_PATTERN111=7,QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(data){for(var d=data<<10;QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)>=0;)d^=QRUtil.G15<<QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15);return(data<<10|d)^QRUtil.G15_MASK},getBCHTypeNumber:function(data){for(var d=data<<12;QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)>=0;)d^=QRUtil.G18<<QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18);return data<<12|d},getBCHDigit:function(data){for(var digit=0;0!=data;){digit++;data>>>=1}return digit},getPatternPosition:function(typeNumber){return QRUtil.PATTERN_POSITION_TABLE[typeNumber-1]},getMask:function(maskPattern,i,j){switch(maskPattern){case QRMaskPattern_PATTERN000:return(i+j)%2==0;case QRMaskPattern_PATTERN001:return i%2==0;case QRMaskPattern_PATTERN010:return j%3==0;case QRMaskPattern_PATTERN011:return(i+j)%3==0;case QRMaskPattern_PATTERN100:return(Math.floor(i/2)+Math.floor(j/3))%2==0;case QRMaskPattern_PATTERN101:return i*j%2+i*j%3==0;case QRMaskPattern_PATTERN110:return(i*j%2+i*j%3)%2==0;case QRMaskPattern_PATTERN111:return(i*j%3+(i+j)%2)%2==0;default:throw new Error("bad maskPattern:"+maskPattern)}},getErrorCorrectPolynomial:function(errorCorrectLength){for(var a=new QRPolynomial([1],0),i=0;i<errorCorrectLength;i++)a=a.multiply(new QRPolynomial([1,QRMath.gexp(i)],0));return a},getLengthInBits:function(mode,type){if(1<=type&&type<10)switch(mode){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:case QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+mode)}else if(type<27)switch(mode){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+mode)}else{if(!(type<41))throw new Error("type:"+type);switch(mode){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+mode)}}},getLostPoint:function(qrCode){for(var moduleCount=qrCode.getModuleCount(),lostPoint=0,row=0;row<moduleCount;row++)for(var col=0;col<moduleCount;col++){for(var sameCount=0,dark=qrCode.isDark(row,col),r=-1;r<=1;r++)if(!(row+r<0||moduleCount<=row+r))for(var c=-1;c<=1;c++)col+c<0||moduleCount<=col+c||0==r&&0==c||dark==qrCode.isDark(row+r,col+c)&&sameCount++;sameCount>5&&(lostPoint+=3+sameCount-5)}for(row=0;row<moduleCount-1;row++)for(col=0;col<moduleCount-1;col++){var count=0;qrCode.isDark(row,col)&&count++;qrCode.isDark(row+1,col)&&count++;qrCode.isDark(row,col+1)&&count++;qrCode.isDark(row+1,col+1)&&count++;0!=count&&4!=count||(lostPoint+=3)}for(row=0;row<moduleCount;row++)for(col=0;col<moduleCount-6;col++)qrCode.isDark(row,col)&&!qrCode.isDark(row,col+1)&&qrCode.isDark(row,col+2)&&qrCode.isDark(row,col+3)&&qrCode.isDark(row,col+4)&&!qrCode.isDark(row,col+5)&&qrCode.isDark(row,col+6)&&(lostPoint+=40);for(col=0;col<moduleCount;col++)for(row=0;row<moduleCount-6;row++)qrCode.isDark(row,col)&&!qrCode.isDark(row+1,col)&&qrCode.isDark(row+2,col)&&qrCode.isDark(row+3,col)&&qrCode.isDark(row+4,col)&&!qrCode.isDark(row+5,col)&&qrCode.isDark(row+6,col)&&(lostPoint+=40);var darkCount=0;for(col=0;col<moduleCount;col++)for(row=0;row<moduleCount;row++)qrCode.isDark(row,col)&&darkCount++;return lostPoint+=10*(Math.abs(100*darkCount/moduleCount/moduleCount-50)/5)}},QRMath={glog:function(n){if(n<1)throw new Error("glog("+n+")");return QRMath.LOG_TABLE[n]},gexp:function(n){for(;n<0;)n+=255;for(;n>=256;)n-=255;return QRMath.EXP_TABLE[n]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},i=0;i<8;i++)QRMath.EXP_TABLE[i]=1<<i;for(i=8;i<256;i++)QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8];for(i=0;i<255;i++)QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i;function QRPolynomial(num,shift){if(null==num.length)throw new Error(num.length+"/"+shift);for(var offset=0;offset<num.length&&0==num[offset];)offset++;this.num=new Array(num.length-offset+shift);for(var i=0;i<num.length-offset;i++)this.num[i]=num[i+offset]}QRPolynomial.prototype={get:function(index){return this.num[index]},getLength:function(){return this.num.length},multiply:function(e){for(var num=new Array(this.getLength()+e.getLength()-1),i=0;i<this.getLength();i++)for(var j=0;j<e.getLength();j++)num[i+j]^=QRMath.gexp(QRMath.glog(this.get(i))+QRMath.glog(e.get(j)));return new QRPolynomial(num,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var ratio=QRMath.glog(this.get(0))-QRMath.glog(e.get(0)),num=new Array(this.getLength()),i=0;i<this.getLength();i++)num[i]=this.get(i);for(i=0;i<e.getLength();i++)num[i]^=QRMath.gexp(QRMath.glog(e.get(i))+ratio);return new QRPolynomial(num,0).mod(e)}};function QRRSBlock(totalCount,dataCount){this.totalCount=totalCount;this.dataCount=dataCount}QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];QRRSBlock.getRSBlocks=function(typeNumber,errorCorrectLevel){var rsBlock=QRRSBlock.getRsBlockTable(typeNumber,errorCorrectLevel);if(null==rsBlock)throw new Error("bad rs block @ typeNumber:"+typeNumber+"/errorCorrectLevel:"+errorCorrectLevel);for(var length=rsBlock.length/3,list=[],i=0;i<length;i++)for(var count=rsBlock[3*i+0],totalCount=rsBlock[3*i+1],dataCount=rsBlock[3*i+2],j=0;j<count;j++)list.push(new QRRSBlock(totalCount,dataCount));return list};QRRSBlock.getRsBlockTable=function(typeNumber,errorCorrectLevel){switch(errorCorrectLevel){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[4*(typeNumber-1)+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[4*(typeNumber-1)+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[4*(typeNumber-1)+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[4*(typeNumber-1)+3];default:return}};function QRBitBuffer(){this.buffer=[];this.length=0}QRBitBuffer.prototype={get:function(index){var bufIndex=Math.floor(index/8);return 1==(this.buffer[bufIndex]>>>7-index%8&1)},put:function(num,length){for(var i=0;i<length;i++)this.putBit(1==(num>>>length-i-1&1))},getLengthInBits:function(){return this.length},putBit:function(bit){var bufIndex=Math.floor(this.length/8);this.buffer.length<=bufIndex&&this.buffer.push(0);bit&&(this.buffer[bufIndex]|=128>>>this.length%8);this.length++}};var QRCodeLimitLength=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function _getAndroid(){var android=!1,sAgent=navigator.userAgent;if(/android/i.test(sAgent)){android=!0;var aMat=sAgent.toString().match(/android ([0-9]\.[0-9])/i);aMat&&aMat[1]&&(android=parseFloat(aMat[1]))}return android}var svgDrawer=function(){var Drawing=function(el,htOption){this._el=el;this._htOption=htOption};Drawing.prototype.draw=function(oQRCode){var _htOption=this._htOption,_el=this._el,nCount=oQRCode.getModuleCount();Math.floor(_htOption.width/nCount),Math.floor(_htOption.height/nCount);this.clear();function makeSVG(tag,attrs){var el=document.createElementNS("http://www.w3.org/2000/svg",tag);for(var k in attrs)attrs.hasOwnProperty(k)&&el.setAttribute(k,attrs[k]);return el}var svg=makeSVG("svg",{viewBox:"0 0 "+String(nCount)+" "+String(nCount),width:"100%",height:"100%",fill:_htOption.colorLight});svg.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");_el.appendChild(svg);svg.appendChild(makeSVG("rect",{fill:_htOption.colorLight,width:"100%",height:"100%"}));svg.appendChild(makeSVG("rect",{fill:_htOption.colorDark,width:"1",height:"1",id:"template"}));for(var row=0;row<nCount;row++)for(var col=0;col<nCount;col++)if(oQRCode.isDark(row,col)){var child=makeSVG("use",{x:String(col),y:String(row)});child.setAttributeNS("http://www.w3.org/1999/xlink","href","#template");svg.appendChild(child)}};Drawing.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)};return Drawing}(),Drawing="svg"===document.documentElement.tagName.toLowerCase()?svgDrawer:"undefined"==typeof CanvasRenderingContext2D?function(){var Drawing=function(el,htOption){this._el=el;this._htOption=htOption};Drawing.prototype.draw=function(oQRCode){for(var _htOption=this._htOption,_el=this._el,nCount=oQRCode.getModuleCount(),nWidth=Math.floor(_htOption.width/nCount),nHeight=Math.floor(_htOption.height/nCount),aHTML=['<table style="border:0;border-collapse:collapse;">'],row=0;row<nCount;row++){aHTML.push("<tr>");for(var col=0;col<nCount;col++)aHTML.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+nWidth+"px;height:"+nHeight+"px;background-color:"+(oQRCode.isDark(row,col)?_htOption.colorDark:_htOption.colorLight)+';"></td>');aHTML.push("</tr>")}aHTML.push("</table>");_el.innerHTML=aHTML.join("");var elTable=_el.childNodes[0],nLeftMarginTable=(_htOption.width-elTable.offsetWidth)/2,nTopMarginTable=(_htOption.height-elTable.offsetHeight)/2;nLeftMarginTable>0&&nTopMarginTable>0&&(elTable.style.margin=nTopMarginTable+"px "+nLeftMarginTable+"px")};Drawing.prototype.clear=function(){this._el.innerHTML=""};return Drawing}():function(){function _onMakeImage(){this._elImage.src=this._elCanvas.toDataURL("image/png");this._elImage.style.display="block";this._elCanvas.style.display="none"}if(this._android&&this._android<=2.1){var factor=1/window.devicePixelRatio,drawImage=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(image,sx,sy,sw,sh,dx,dy,dw,dh){if("nodeName"in image&&/img/i.test(image.nodeName))for(var i=arguments.length-1;i>=1;i--)arguments[i]=arguments[i]*factor;else if(void 0===dw){arguments[1]*=factor;arguments[2]*=factor;arguments[3]*=factor;arguments[4]*=factor}drawImage.apply(this,arguments)}}function _safeSetDataURI(fSuccess,fFail){var self=this;self._fFail=fFail;self._fSuccess=fSuccess;if(null!==self._bSupportDataURI)!0===self._bSupportDataURI&&self._fSuccess?self._fSuccess.call(self):!1===self._bSupportDataURI&&self._fFail&&self._fFail.call(self);else{var el=document.createElement("img"),fOnError=function(){self._bSupportDataURI=!1;self._fFail&&self._fFail.call(self)};el.onabort=fOnError;el.onerror=fOnError;el.onload=function(){self._bSupportDataURI=!0;self._fSuccess&&self._fSuccess.call(self)};el.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg=="}}var Drawing=function(el,htOption){this._bIsPainted=!1;this._android=_getAndroid();this._htOption=htOption;this._elCanvas=document.createElement("canvas");this._elCanvas.width=htOption.width;this._elCanvas.height=htOption.height;el.appendChild(this._elCanvas);this._el=el;this._oContext=this._elCanvas.getContext("2d");this._bIsPainted=!1;this._elImage=document.createElement("img");this._elImage.alt="Scan me!";this._elImage.style.display="none";this._el.appendChild(this._elImage);this._bSupportDataURI=null};Drawing.prototype.draw=function(oQRCode){var _elImage=this._elImage,_oContext=this._oContext,_htOption=this._htOption,nCount=oQRCode.getModuleCount(),nWidth=_htOption.width/nCount,nHeight=_htOption.height/nCount,nRoundedWidth=Math.round(nWidth),nRoundedHeight=Math.round(nHeight);_elImage.style.display="none";this.clear();for(var row=0;row<nCount;row++)for(var col=0;col<nCount;col++){var bIsDark=oQRCode.isDark(row,col),nLeft=col*nWidth,nTop=row*nHeight;_oContext.strokeStyle=bIsDark?_htOption.colorDark:_htOption.colorLight;_oContext.lineWidth=1;_oContext.fillStyle=bIsDark?_htOption.colorDark:_htOption.colorLight;_oContext.fillRect(nLeft,nTop,nWidth,nHeight);_oContext.strokeRect(Math.floor(nLeft)+.5,Math.floor(nTop)+.5,nRoundedWidth,nRoundedHeight);_oContext.strokeRect(Math.ceil(nLeft)-.5,Math.ceil(nTop)-.5,nRoundedWidth,nRoundedHeight)}this._bIsPainted=!0};Drawing.prototype.makeImage=function(){this._bIsPainted&&_safeSetDataURI.call(this,_onMakeImage)};Drawing.prototype.isPainted=function(){return this._bIsPainted};Drawing.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height);this._bIsPainted=!1};Drawing.prototype.round=function(nNumber){return nNumber?Math.floor(1e3*nNumber)/1e3:nNumber};return Drawing}.call(this);function _getTypeNumber(sText,nCorrectLevel){for(var nType=1,length=function(sText){var replacedText=encodeURI(sText).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return replacedText.length+(replacedText.length!=sText?3:0)}(sText),i=0,len=QRCodeLimitLength.length;i<=len;i++){var nLimit=0;switch(nCorrectLevel){case QRErrorCorrectLevel.L:nLimit=QRCodeLimitLength[i][0];break;case QRErrorCorrectLevel.M:nLimit=QRCodeLimitLength[i][1];break;case QRErrorCorrectLevel.Q:nLimit=QRCodeLimitLength[i][2];break;case QRErrorCorrectLevel.H:nLimit=QRCodeLimitLength[i][3]}if(length<=nLimit)break;nType++}if(nType>QRCodeLimitLength.length)throw new Error("Too long data");return nType}var QRCode=function(el,vOption){this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRErrorCorrectLevel.H};"string"==typeof vOption&&(vOption={text:vOption});if(vOption)for(var i in vOption)this._htOption[i]=vOption[i];"string"==typeof el&&(el=document.getElementById(el));this._htOption.useSVG&&(Drawing=svgDrawer);this._android=_getAndroid();this._el=el;this._oQRCode=null;this._oDrawing=new Drawing(this._el,this._htOption);this._htOption.text&&this.makeCode(this._htOption.text)};QRCode.prototype.makeCode=function(sText){this._oQRCode=new QRCodeModel(_getTypeNumber(sText,this._htOption.correctLevel),this._htOption.correctLevel);this._oQRCode.addData(sText);this._oQRCode.make();this._el.title=sText;this._oDrawing.draw(this._oQRCode);this.makeImage()};QRCode.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()};QRCode.prototype.clear=function(){this._oDrawing.clear()};QRCode.CorrectLevel=QRErrorCorrectLevel;return QRCode}.call(window);function md5cycle(x,k){var a=x[0],b=x[1],c=x[2],d=x[3];a=ff(a,b,c,d,k[0],7,-680876936);d=ff(d,a,b,c,k[1],12,-389564586);c=ff(c,d,a,b,k[2],17,606105819);b=ff(b,c,d,a,k[3],22,-1044525330);a=ff(a,b,c,d,k[4],7,-176418897);d=ff(d,a,b,c,k[5],12,1200080426);c=ff(c,d,a,b,k[6],17,-1473231341);b=ff(b,c,d,a,k[7],22,-45705983);a=ff(a,b,c,d,k[8],7,1770035416);d=ff(d,a,b,c,k[9],12,-1958414417);c=ff(c,d,a,b,k[10],17,-42063);b=ff(b,c,d,a,k[11],22,-1990404162);a=ff(a,b,c,d,k[12],7,1804603682);d=ff(d,a,b,c,k[13],12,-40341101);c=ff(c,d,a,b,k[14],17,-1502002290);a=gg(a,b=ff(b,c,d,a,k[15],22,1236535329),c,d,k[1],5,-165796510);d=gg(d,a,b,c,k[6],9,-1069501632);c=gg(c,d,a,b,k[11],14,643717713);b=gg(b,c,d,a,k[0],20,-373897302);a=gg(a,b,c,d,k[5],5,-701558691);d=gg(d,a,b,c,k[10],9,38016083);c=gg(c,d,a,b,k[15],14,-660478335);b=gg(b,c,d,a,k[4],20,-405537848);a=gg(a,b,c,d,k[9],5,568446438);d=gg(d,a,b,c,k[14],9,-1019803690);c=gg(c,d,a,b,k[3],14,-187363961);b=gg(b,c,d,a,k[8],20,1163531501);a=gg(a,b,c,d,k[13],5,-1444681467);d=gg(d,a,b,c,k[2],9,-51403784);c=gg(c,d,a,b,k[7],14,1735328473);a=hh(a,b=gg(b,c,d,a,k[12],20,-1926607734),c,d,k[5],4,-378558);d=hh(d,a,b,c,k[8],11,-2022574463);c=hh(c,d,a,b,k[11],16,1839030562);b=hh(b,c,d,a,k[14],23,-35309556);a=hh(a,b,c,d,k[1],4,-1530992060);d=hh(d,a,b,c,k[4],11,1272893353);c=hh(c,d,a,b,k[7],16,-155497632);b=hh(b,c,d,a,k[10],23,-1094730640);a=hh(a,b,c,d,k[13],4,681279174);d=hh(d,a,b,c,k[0],11,-358537222);c=hh(c,d,a,b,k[3],16,-722521979);b=hh(b,c,d,a,k[6],23,76029189);a=hh(a,b,c,d,k[9],4,-640364487);d=hh(d,a,b,c,k[12],11,-421815835);c=hh(c,d,a,b,k[15],16,530742520);a=ii(a,b=hh(b,c,d,a,k[2],23,-995338651),c,d,k[0],6,-198630844);d=ii(d,a,b,c,k[7],10,1126891415);c=ii(c,d,a,b,k[14],15,-1416354905);b=ii(b,c,d,a,k[5],21,-57434055);a=ii(a,b,c,d,k[12],6,1700485571);d=ii(d,a,b,c,k[3],10,-1894986606);c=ii(c,d,a,b,k[10],15,-1051523);b=ii(b,c,d,a,k[1],21,-2054922799);a=ii(a,b,c,d,k[8],6,1873313359);d=ii(d,a,b,c,k[15],10,-30611744);c=ii(c,d,a,b,k[6],15,-1560198380);b=ii(b,c,d,a,k[13],21,1309151649);a=ii(a,b,c,d,k[4],6,-145523070);d=ii(d,a,b,c,k[11],10,-1120210379);c=ii(c,d,a,b,k[2],15,718787259);b=ii(b,c,d,a,k[9],21,-343485551);x[0]=add32(a,x[0]);x[1]=add32(b,x[1]);x[2]=add32(c,x[2]);x[3]=add32(d,x[3])}function cmn(q,a,b,x,s,t){a=add32(add32(a,q),add32(x,t));return add32(a<<s|a>>>32-s,b)}function ff(a,b,c,d,x,s,t){return cmn(b&c|~b&d,a,b,x,s,t)}function gg(a,b,c,d,x,s,t){return cmn(b&d|c&~d,a,b,x,s,t)}function hh(a,b,c,d,x,s,t){return cmn(b^c^d,a,b,x,s,t)}function ii(a,b,c,d,x,s,t){return cmn(c^(b|~d),a,b,x,s,t)}function md5blk(s){var i,md5blks=[];for(i=0;i<64;i+=4)md5blks[i>>2]=s.charCodeAt(i)+(s.charCodeAt(i+1)<<8)+(s.charCodeAt(i+2)<<16)+(s.charCodeAt(i+3)<<24);return md5blks}var hex_chr="0123456789abcdef".split("");function rhex(n){for(var s="",j=0;j<4;j++)s+=hex_chr[n>>8*j+4&15]+hex_chr[n>>8*j&15];return s}function md5(s){return function(x){for(var i=0;i<x.length;i++)x[i]=rhex(x[i]);return x.join("")}(function(s){var i,n=s.length,state=[1732584193,-271733879,-1732584194,271733878];for(i=64;i<=s.length;i+=64)md5cycle(state,md5blk(s.substring(i-64,i)));s=s.substring(i-64);var tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<s.length;i++)tail[i>>2]|=s.charCodeAt(i)<<(i%4<<3);tail[i>>2]|=128<<(i%4<<3);if(i>55){md5cycle(state,tail);for(i=0;i<16;i++)tail[i]=0}tail[14]=8*n;md5cycle(state,tail);return state}(s))}function add32(a,b){return a+b&4294967295}if("5d41402abc4b2a76b9719d911017c592"!=md5("hello"))function add32(x,y){var lsw=(65535&x)+(65535&y);return(x>>16)+(y>>16)+(lsw>>16)<<16|65535&lsw}try{Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:function(begin,end){return new Uint8Array(Array.prototype.slice.call(this,begin,end))}})}catch(err){}var D,ka="function"==typeof Object.create?Object.create:function(n){function m(){}m.prototype=n;return new m};if("function"==typeof Object.setPrototypeOf)D=Object.setPrototypeOf;else{var K;a:{var N={};try{N.__proto__={D:!0};K=N.D;break a}catch(n){}K=!1}D=K?function(n,m){n.__proto__=m;if(n.__proto__!==m)throw new TypeError(n+" is not extensible");return n}:null}var O=D;function P(n,m){n.prototype=ka(m.prototype);n.prototype.constructor=n;if(O)O(n,m);else for(var l in m)if("prototype"!=l)if(Object.defineProperties){var p=Object.getOwnPropertyDescriptor(m,l);p&&Object.defineProperty(n,l,p)}else n[l]=m[l]}var ma="function"==typeof Object.defineProperties?Object.defineProperty:function(n,m,l){n!=Array.prototype&&n!=Object.prototype&&(n[m]=l.value)},na="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function Q(n,m){if(m){for(var l=na,p=n.split("."),y=0;y<p.length-1;y++){var v=p[y];v in l||(l[v]={});l=l[v]}(v=m(y=l[p=p[p.length-1]]))!=y&&null!=v&&ma(l,p,{configurable:!0,writable:!0,value:v})}}Q("Object.is",(function(n){return n||function(m,l){return m===l?0!==m||1/m==1/l:m!=m&&l!=l}}));Q("Array.prototype.includes",(function(n){return n||function(m,l){var p=this;p instanceof String&&(p=String(p));var y=p.length,v=l||0;for(0>v&&(v=Math.max(v+y,0));v<y;v++){var w=p[v];if(w===m||Object.is(w,m))return!0}return!1}}));Q("String.prototype.codePointAt",(function(n){return n||function(m){if(null==this)throw new TypeError("The 'this' value for String.prototype.codePointAt must not be null or undefined");var l=this.length;if(0<=(m=Number(m)||0)&&m<l){m|=0;var p=this.charCodeAt(m);return 55296>p||56319<p||m+1===l?p:56320>(m=this.charCodeAt(m+1))||57343<m?p:1024*(p-55296)+m+9216}}}));var oa="function"==typeof Object.assign?Object.assign:function(n,m){for(var l=1;l<arguments.length;l++){var p=arguments[l];if(p)for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(n[y]=p[y])}return n};Q("Object.assign",(function(n){return n||oa}));var V=this;function W(n){function m(a){var b=l.call(this)||this;a&&b.fromBuffer(a);return b}function l(){return w.apply(this,arguments)||this}function p(a,b,c){for(var d=[],e=0;e<a;e++)d.push(this.b({pa:b,oa:c,Q:.5/Math.sin(Math.PI/(2*a)*(e+.5))}));this.a=[];for(a=0;a<d.length;a++)this.a[a]={Ka:d[a].A[0],La:d[a].A[1],Ma:d[a].A[2],Ha:d[a].D[0],Ia:d[a].D[1],k:d[a].k,z:[0,0]}}function y(a,b,c){c=2*Math.PI*c/b;b=0;this.a=[];for(var d=0;d<=a;d++)0==d-a/2?this.a[d]=c:(this.a[d]=Math.sin(c*(d-a/2))/(d-a/2),this.a[d]*=.54-.46*Math.cos(2*Math.PI*d/a)),b+=this.a[d];for(c=0;c<=a;c++)this.a[c]/=b;this.z=this.b()}function v(a,b,c){this.C=a;this.l=(a-1)/b;this.M=this.I;"point"===c.method?this.M=this.H:"linear"===c.method?this.M=this.G:"cubic"===c.method&&(this.M=this.B);this.J=1-Math.max(0,Math.min(1,c.tension||0));this.v=c.sincFilterSize||1;this.F=function(a){return function(b){return(0===b?1:Math.sin(Math.PI*b)/(Math.PI*b))*a(b)}}(c.sincWindow||qa)}function w(){return C.apply(this,arguments)||this}function C(){return t.apply(this,arguments)||this}function t(){var a=q.call(this)||this;a.bitDepth="0";a.f={h:0,o:!1};a.G={4:17,8:1,"8a":6,"8m":7,16:1,24:1,32:1,"32f":3,64:3};return a}function q(){return u.apply(this,arguments)||this}function u(){var a=B.call(this)||this;a.Z.push("RF64");a.fmt={chunkId:"",chunkSize:0,audioFormat:0,numChannels:0,sampleRate:0,byteRate:0,blockAlign:0,bitsPerSample:0,cbSize:0,validBitsPerSample:0,dwChannelMask:0,subformat:[]};a.fact={chunkId:"",chunkSize:0,dwSampleLength:0};a.cue={chunkId:"",chunkSize:0,dwCuePoints:0,points:[]};a.smpl={chunkId:"",chunkSize:0,dwManufacturer:0,dwProduct:0,dwSamplePeriod:0,dwMIDIUnityNote:0,dwMIDIPitchFraction:0,dwSMPTEFormat:0,dwSMPTEOffset:0,dwNumSampleLoops:0,dwSamplerData:0,loops:[]};a.bext={chunkId:"",chunkSize:0,description:"",originator:"",originatorReference:"",originationDate:"",originationTime:"",timeReference:[0,0],version:0,UMID:"",loudnessValue:0,loudnessRange:0,maxTruePeakLevel:0,maxMomentaryLoudness:0,maxShortTermLoudness:0,reserved:"",codingHistory:""};a.iXML={chunkId:"",chunkSize:0,value:""};a.ds64={chunkId:"",chunkSize:0,riffSizeHigh:0,riffSizeLow:0,dataSizeHigh:0,dataSizeLow:0,originationTime:0,sampleCountHigh:0,sampleCountLow:0};a.data={chunkId:"",chunkSize:0,samples:new Uint8Array(0)};a.LIST=[];a.junk={chunkId:"",chunkSize:0,chunkData:[]};a._PMX={chunkId:"",chunkSize:0,value:""};a.g={h:16,o:!1,O:!1,R:!1};return a}function B(){this.container="";this.chunkSize=0;this.format="";this.Y=null;this.c=0;this.a={h:32,o:!1};this.Z=["RIFF","RIFX"]}function H(a,b){this.offset=Math.ceil((a+b)/8);this.b=a;this.c=b;this.a=(1<<a-1)-1;this.f=Math.pow(2,this.a+1);this.g=a+b;this.j=Math.pow(2,-(8*this.offset-1-a))}function F(a,b){this.h=a;this.offset=Math.ceil(a/8);this.max=Math.pow(2,a)-1;this.min=0;this.S=this.a;void 0!==b&&b&&(this.max=Math.pow(2,a)/2-1,this.min=-this.max-1,this.S=this.f)}function sa(a,b){return 0<a?parseInt(a/b.ea*b.ca,10):parseInt(a/b.fa*b.da,10)}function ta(a,b){return parseInt(0<a?a*b.ca:a*b.da,10)}function ua(a,b){return 0<a?a/b.ea:a/b.fa}function X(a){if("32f"!=a&&"64"!=a&&("8">parseInt(a,10)||"53"<parseInt(a,10)))throw Error("Invalid bit depth.")}function Y(a,b,c){if("8"==a){a=c?-128:128;c=0;for(var d=b.length;c<d;c++)b[c]=b[c]+=a}}function xa(a,b){var c=a[0];S(c,b);var d=[];d.push(255&c);d.push(c>>8&255);d.push(b.index);d.push(0);c=3;for(var e=a.length;c<e;c+=2){var f=S(a[c],b),g=S(a[c+1],b);d.push(g<<4|f)}return d}function S(a,b){var c=a-b.i;if(0<=c)var d=0;else d=8,c=-c;var e=R[b.index],f=e>>3;c>e&&(d|=4,c-=e,f+=e);c>(e>>=1)&&(d|=2,c-=e,f+=e);c>(e>>=1)&&(d|=1,f+=e);c=d;b.i=8&c?b.i-f:b.i+f;-32768>b.i?b.i=-32768:32767<b.i&&(b.i=32767);b.index+=ca[7&c];0>b.index?b.index=0:88<b.index&&(b.index=88);return d}function ba(a,b){var c=0;4&a&&(c+=b.step);2&a&&(c+=b.step>>1);1&a&&(c+=b.step>>2);c+=b.step>>3;8&a&&(c=-c);b.i+=c;32767<b.i?b.i=32767:-32767>b.i&&(b.i=-32767);b.index+=ca[a];0>b.index?b.index=0:88<b.index&&(b.index=88);b.step=R[b.index];return b.i}function da(a,b,c,d){d=void 0===d?a.length:d;for(c=void 0===c?0:c;c<d;c+=b){var e=a,f=b,g=c;f--;for(var k=0;k<f;k++){var r=e[g+k];e[g+k]=e[g+f];e[g+f]=r;f--}}}function T(a,b,c){c=void 0===c?0:c;for(var d=0,e=a.length;d<e;){var f=a.codePointAt(d);if(128>f)b[c]=f,c++;else{var g=0,k=0;2047>=f?(g=1,k=192):65535>=f?(g=2,k=224):1114111>=f&&(g=3,k=240,d++);b[c]=(f>>6*g)+k;for(c++;0<g;)b[c]=128|f>>6*(g-1)&63,c++,g--}d++}return c}function U(a){var b=Math.floor(a);return.5>(a-=b)?b:.5<a?b+1:b%2?b+1:b}function G(a,b,c){var d=void 0===b?0:b;c=void 0===(c=void 0===c?a.length:c)?a.length:c;b="";for(d=void 0===d?0:d;d<c;){var e=128,f=191,g=!1,k=a[d++];if(0<=k&&127>=k)b+=String.fromCharCode(k);else{var r=0;194<=k&&223>=k?r=1:224<=k&&239>=k?(r=2,224===a[d]&&(e=160),237===a[d]&&(f=159)):240<=k&&244>=k?(r=3,240===a[d]&&(e=144),244===a[d]&&(f=143)):g=!0;k&=(1<<8-r-1)-1;for(var z=0;z<r;z++){(a[d]<e||a[d]>f)&&(g=!0);k=k<<6|63&a[d];d++}g?b+=String.fromCharCode(65533):65535>=k?b+=String.fromCharCode(k):(k-=65536,b+=String.fromCharCode(55296+(k>>10&1023),56320+(1023&k)))}}return b}function x(a){var b=[];T(a,b);return b}function L(a,b,c,d){d=void 0===d?0:d;for(var e=ea((b=b||{}).h,b.R,b.O),f=Math.ceil(b.h/8),g=0,k=d,r=a.length;g<r;g++)d=e.ga(c,a[g],d);b.o&&da(c,f,k,d);return d}function E(a,b,c,d,e){d=void 0===d?0:d;e=void 0===e?a.length:e;var f=ea((b=b||{}).h,b.R,b.O);e-=(e-d)%f.offset;b.o?(a=new Uint8Array(a),b.o&&da(a,f.offset,d,e),fa(a,c,d,e,f)):fa(a,c,d,e,f)}function h(a,b){var c=[];L([a],b,c,0);return c}function M(a,b,c){var d=[];E(a,b,d,c=void 0===c?0:c,c+Math.ceil(b.h/8));return d[0]}function fa(a,b,c,d,e){for(var f=e.offset,g=0;c<d;c+=f,g++)b[g]=e.S(a,c)}function ea(a,b,c){return b&&32==a?new H(8,23):b&&64==a?new H(11,52):new F(a,c)}function A(a,b){for(var c=x(a),d=c.length;d<b;d++)c.push(0);return c}function qa(a){return Math.exp(-a/2*a/2)}function ha(a,b,c,d){d=(void 0===d?null:d)||{};var e=new Float64Array(a.length*((c-b)/b+1));d.method=d.method||"cubic";var f=new v(a.length,e.length,{method:d.method,tension:d.tension||0,sincFilterSize:d.sincFilterSize||6,sincWindow:d.sincWindow||void 0,clip:d.clip||"mirror"});void 0===d.LPF&&(d.LPF=Ha[d.method]);if(d.LPF){d.LPFType=d.LPFType||"IIR";var g=Ia[d.LPFType];if(c>b){b=new g(d.LPForder||ia[d.LPFType],c,b/2);c=0;for(d=e.length;c<d;c++)e[c]=b.filter(f.M(c,a));b.reset();for(a=e.length-1;0<=a;a--)e[a]=b.filter(e[a])}else{b=new g(d.LPForder||ia[d.LPFType],b,c/2);c=0;for(d=a.length;c<d;c++)a[c]=b.filter(a[c]);b.reset();for(c=a.length-1;0<=c;c--)a[c]=b.filter(a[c]);ja(a,e,f)}}else ja(a,e,f);return e}function ja(a,b,c){for(var d=0,e=b.length;d<e;d++)b[d]=c.M(d,a)}function J(a,b){var c=a/b;c%2&&c++;return c}var ca=[-1,-1,-1,-1,2,4,6,8,-1,-1,-1,-1,2,4,6,8],R=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767],Ba=[1,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],Ea=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],Ga=[0,132,396,924,1980,4092,8316,16764];F.prototype.ga=function(a,b,c){c=void 0===c?0:c;b=this.b(Math.round(b));for(var d=0,e=this.offset;d<e;d++)a[c]=255&Math.floor(b/Math.pow(2,8*d)),c++;return c};F.prototype.a=function(a,b){b=void 0===b?0:b;for(var c=0,d=0;d<this.offset;d++)c+=a[b+d]*Math.pow(256,d);return c};F.prototype.f=function(a,b){return this.c(this.a(a,void 0===b?0:b))};F.prototype.b=function(a){return a>this.max?this.max:a<this.min?this.min:a};F.prototype.c=function(a){a>this.max&&(a-=2*this.max+2);return a};H.prototype.ga=function(a,b,c){Math.abs(b)>this.f-2*this.g&&(b=0>b?-1/0:1/0);var d=0>((b=+b)||1/b)?1:0>b?1:0;b=Math.abs(b);var e=Math.min(Math.floor(Math.log(b)/Math.LN2),1023),f=U(b/Math.pow(2,e)*Math.pow(2,this.c));b!=b?(f=Math.pow(2,this.c-1),e=(1<<this.b)-1):0!==b&&(b>=Math.pow(2,1-this.a)?(2<=f/Math.pow(2,this.c)&&(e+=1,f=1),e>this.a?(e=(1<<this.b)-1,f=0):(e+=this.a,f=U(f)-Math.pow(2,this.c))):(f=U(b/Math.pow(2,1-this.a-this.c)),e=0));return this.l(a,c,d,e,f)};H.prototype.S=function(a,b){for(var c=(1<<this.b)-1,d="",e=this.offset-1;0<=e;e--){var f=a[e+b].toString(2);d+="00000000".substring(f.length)+f}e="1"==d.charAt(0)?-1:1;d=d.substring(1);f=parseInt(d.substring(0,this.b),2);d=d.substring(this.b);if(f==c)return 0!==parseInt(d,2)?NaN:1/0*e;0===f?(f+=1,c=parseInt(d,2)):c=parseInt("1"+d,2);return e*c*this.j*Math.pow(2,f-this.a)};H.prototype.l=function(a,b,c,d,e){var f=[];f.push(c);for(c=this.b;0<c;--c)f[c]=d%2?1:0,d=Math.floor(d/2);d=f.length;for(c=this.c;0<c;--c)f[d+c]=e%2?1:0,e=Math.floor(e/2);e=f.join("");f=this.offset+b-1;for(d=b;f>=b;)a[f]=parseInt(e.substring(0,8),2),e=e.substring(8),f--,d++;return d};B.prototype.va=function(a){this.c=0;this.container=this.u(a,4);if(-1===this.Z.indexOf(this.container))throw Error("Not a supported format.");this.a.o="RIFX"===this.container;this.chunkSize=this.b(a);this.format=this.u(a,4);this.Y={chunkId:this.container,chunkSize:this.chunkSize,format:this.format,subChunks:this.V(a)}};B.prototype.s=function(a,b){b=void 0!==b&&b;for(var c=this.Y.subChunks,d=[],e=0;e<c.length;e++)if(c[e].chunkId==a){if(!b)return c[e];d.push(c[e])}return"LIST"==a&&d.length?d:null};B.prototype.u=function(a,b){var c=G(a,this.c,this.c+b);this.c+=b;return c};B.prototype.b=function(a){a=M(a,this.a,this.c);this.c+=4;return a};B.prototype.V=function(a){for(var b=[],c=this.c;c<=a.length-8;)b.push(this.$a(a,c)),c=(c+=8+b[b.length-1].chunkSize)%2?c+1:c;return b};B.prototype.$a=function(a,b){var c={chunkId:this.Ea(a,b),chunkSize:this.Fa(a,b)};"LIST"==c.chunkId?(c.format=G(a,b+8,b+12),this.c+=4,c.subChunks=this.V(a)):(this.c=b+8+(c.chunkSize%2?c.chunkSize+1:c.chunkSize),c.chunkData={start:b+8,end:this.c});return c};B.prototype.Ea=function(a,b){this.c+=4;return G(a,b,b+4)};B.prototype.Fa=function(a,b){this.c+=4;return M(a,this.a,b+4)};P(u,B);u.prototype.fromBuffer=function(a,b){b=void 0===b||b;this.U();this.va(a);this.g.o=this.a.o;if("WAVE"!=this.format)throw Error('Could not find the "WAVE" format identifier');this.hb(a);this.jb(a);this.ib(a);this.eb(a);this.qa(a);this.fb(a);this.ma(a);this.gb(a,b);this.lb(a);this.ia(a);this.na(a)};u.prototype.U=function(){var a=new u;Object.assign(this.fmt,a.fmt);Object.assign(this.fact,a.fact);Object.assign(this.cue,a.cue);Object.assign(this.smpl,a.smpl);Object.assign(this.bext,a.bext);Object.assign(this.iXML,a.iXML);Object.assign(this.ds64,a.ds64);Object.assign(this.data,a.data);this.LIST=[];Object.assign(this.junk,a.junk);Object.assign(this._PMX,a._PMX)};u.prototype.jb=function(a){var b=this.s("fmt ");if(!b)throw Error('Could not find the "fmt " chunk');this.c=b.chunkData.start,this.fmt.chunkId=b.chunkId,this.fmt.chunkSize=b.chunkSize,this.fmt.audioFormat=this.j(a),this.fmt.numChannels=this.j(a),this.fmt.sampleRate=this.b(a),this.fmt.byteRate=this.b(a),this.fmt.blockAlign=this.j(a),this.fmt.bitsPerSample=this.j(a),this.kb(a)};u.prototype.kb=function(a){16<this.fmt.chunkSize&&(this.fmt.cbSize=this.j(a),18<this.fmt.chunkSize&&(this.fmt.validBitsPerSample=this.j(a),20<this.fmt.chunkSize&&(this.fmt.dwChannelMask=this.b(a),this.fmt.subformat=[this.b(a),this.b(a),this.b(a),this.b(a)])))};u.prototype.ib=function(a){var b=this.s("fact");b&&(this.c=b.chunkData.start,this.fact.chunkId=b.chunkId,this.fact.chunkSize=b.chunkSize,this.fact.dwSampleLength=this.b(a))};u.prototype.fb=function(a){var b=this.s("cue ");if(b)for(this.c=b.chunkData.start,this.cue.chunkId=b.chunkId,this.cue.chunkSize=b.chunkSize,this.cue.dwCuePoints=this.b(a),b=0;b<this.cue.dwCuePoints;b++)this.cue.points.push({dwName:this.b(a),dwPosition:this.b(a),fccChunk:this.u(a,4),dwChunkStart:this.b(a),dwBlockStart:this.b(a),dwSampleOffset:this.b(a)})};u.prototype.ma=function(a){var b=this.s("smpl");if(b)for(this.c=b.chunkData.start,this.smpl.chunkId=b.chunkId,this.smpl.chunkSize=b.chunkSize,this.smpl.dwManufacturer=this.b(a),this.smpl.dwProduct=this.b(a),this.smpl.dwSamplePeriod=this.b(a),this.smpl.dwMIDIUnityNote=this.b(a),this.smpl.dwMIDIPitchFraction=this.b(a),this.smpl.dwSMPTEFormat=this.b(a),this.smpl.dwSMPTEOffset=this.b(a),this.smpl.dwNumSampleLoops=this.b(a),this.smpl.dwSamplerData=this.b(a),b=0;b<this.smpl.dwNumSampleLoops;b++)this.smpl.loops.push({dwName:this.b(a),dwType:this.b(a),dwStart:this.b(a),dwEnd:this.b(a),dwFraction:this.b(a),dwPlayCount:this.b(a)})};u.prototype.gb=function(a,b){var c=this.s("data");if(!c)throw Error('Could not find the "data" chunk');this.data.chunkId="data",this.data.chunkSize=c.chunkSize,b&&(this.data.samples=a.slice(c.chunkData.start,c.chunkData.end))};u.prototype.eb=function(a){var b=this.s("bext");b&&(this.c=b.chunkData.start,this.bext.chunkId=b.chunkId,this.bext.chunkSize=b.chunkSize,this.bext.description=this.u(a,256),this.bext.originator=this.u(a,32),this.bext.originatorReference=this.u(a,32),this.bext.originationDate=this.u(a,10),this.bext.originationTime=this.u(a,8),this.bext.timeReference=[this.b(a),this.b(a)],this.bext.version=this.j(a),this.bext.UMID=this.u(a,64),this.bext.loudnessValue=this.j(a),this.bext.loudnessRange=this.j(a),this.bext.maxTruePeakLevel=this.j(a),this.bext.maxMomentaryLoudness=this.j(a),this.bext.maxShortTermLoudness=this.j(a),this.bext.reserved=this.u(a,180),this.bext.codingHistory=this.u(a,this.bext.chunkSize-602))};u.prototype.qa=function(a){var b=this.s("iXML");b&&(this.c=b.chunkData.start,this.iXML.chunkId=b.chunkId,this.iXML.chunkSize=b.chunkSize,this.iXML.value=G(a,this.c,this.c+this.iXML.chunkSize))};u.prototype.hb=function(a){var b=this.s("ds64");if(b)this.c=b.chunkData.start,this.ds64.chunkId=b.chunkId,this.ds64.chunkSize=b.chunkSize,this.ds64.riffSizeHigh=this.b(a),this.ds64.riffSizeLow=this.b(a),this.ds64.dataSizeHigh=this.b(a),this.ds64.dataSizeLow=this.b(a),this.ds64.originationTime=this.b(a),this.ds64.sampleCountHigh=this.b(a),this.ds64.sampleCountLow=this.b(a);else if("RF64"==this.container)throw Error('Could not find the "ds64" chunk')};u.prototype.ia=function(a){var b=this.s("LIST",!0);if(null!==b)for(var c=0;c<b.length;c++){var d=b[c];this.LIST.push({chunkId:d.chunkId,chunkSize:d.chunkSize,format:d.format,subChunks:[]});for(var e=0;e<d.subChunks.length;e++)this.ka(d.subChunks[e],d.format,a)}};u.prototype.ka=function(a,b,c){"adtl"==b?-1<["labl","note","ltxt"].indexOf(a.chunkId)&&this.la(c,a):"INFO"==b&&this.ja(c,a)};u.prototype.la=function(a,b){this.c=b.chunkData.start;var c={chunkId:b.chunkId,chunkSize:b.chunkSize,dwName:this.b(a)};"ltxt"==b.chunkId?(c.dwSampleLength=this.b(a),c.dwPurposeID=this.b(a),c.dwCountry=this.j(a),c.dwLanguage=this.j(a),c.dwDialect=this.j(a),c.dwCodePage=this.j(a),c.value=""):c.value=this.X(a,this.c);this.LIST[this.LIST.length-1].subChunks.push(c)};u.prototype.ja=function(a,b){this.c=b.chunkData.start;this.LIST[this.LIST.length-1].subChunks.push({chunkId:b.chunkId,chunkSize:b.chunkSize,value:this.X(a,this.c)})};u.prototype.lb=function(a){var b=this.s("junk");b&&(this.junk={chunkId:b.chunkId,chunkSize:b.chunkSize,chunkData:[].slice.call(a.slice(b.chunkData.start,b.chunkData.end))})};u.prototype.na=function(a){var b=this.s("_PMX");b&&(this.c=b.chunkData.start,this._PMX.chunkId=b.chunkId,this._PMX.chunkSize=b.chunkSize,this._PMX.value=G(a,this.c,this.c+this._PMX.chunkSize))};u.prototype.X=function(a,b){for(var c=b=void 0===b?0:b;c<a.length&&(this.c++,0!==a[c]);c++);return G(a,b,this.c-1)};u.prototype.j=function(a){a=M(a,this.g,this.c);this.c+=2;return a};P(q,u);q.prototype.toBuffer=function(){this.g.o="RIFX"===this.container;this.a.o=this.g.o;for(var a=[this.Sa(),this.Oa(),this.Da(),this.bb(),this.Qa(),this.Pa(),x(this.data.chunkId),h(this.data.samples.length,this.a),this.data.samples,this.Ga(),this.Ya(),this.Ta(),this.ab()],b=0,c=0;c<a.length;c++)b+=a[c].length;c=new Uint8Array(b+12);var d=T(this.container,c,0);d=L([b+4],this.a,c,void 0===d?0:d);d=T(this.format,c,void 0===d?0:d);for(b=0;b<a.length;b++)c.set(a[b],d),d+=a[b].length;return c};q.prototype.Da=function(){var a=[];this.Ca();this.bext.chunkId&&(this.bext.chunkSize=602+this.bext.codingHistory.length,a=a.concat(x(this.bext.chunkId),h(602+this.bext.codingHistory.length,this.a),A(this.bext.description,256),A(this.bext.originator,32),A(this.bext.originatorReference,32),A(this.bext.originationDate,10),A(this.bext.originationTime,8),h(this.bext.timeReference[0],this.a),h(this.bext.timeReference[1],this.a),h(this.bext.version,this.g),A(this.bext.UMID,64),h(this.bext.loudnessValue,this.g),h(this.bext.loudnessRange,this.g),h(this.bext.maxTruePeakLevel,this.g),h(this.bext.maxMomentaryLoudness,this.g),h(this.bext.maxShortTermLoudness,this.g),A(this.bext.reserved,180),A(this.bext.codingHistory,this.bext.codingHistory.length)));this.l(a);return a};q.prototype.Ca=function(){for(var a in this.bext)if(this.bext.hasOwnProperty(a)&&this.bext[a]&&"timeReference"!=a){this.bext.chunkId="bext";break}(this.bext.timeReference[0]||this.bext.timeReference[1])&&(this.bext.chunkId="bext")};q.prototype.bb=function(){var a=[];if(this.iXML.chunkId){var b=x(this.iXML.value);this.iXML.chunkSize=b.length;a=a.concat(x(this.iXML.chunkId),h(this.iXML.chunkSize,this.a),b)}this.l(a);return a};q.prototype.Oa=function(){var a=[];this.ds64.chunkId&&(a=a.concat(x(this.ds64.chunkId),h(this.ds64.chunkSize,this.a),h(this.ds64.riffSizeHigh,this.a),h(this.ds64.riffSizeLow,this.a),h(this.ds64.dataSizeHigh,this.a),h(this.ds64.dataSizeLow,this.a),h(this.ds64.originationTime,this.a),h(this.ds64.sampleCountHigh,this.a),h(this.ds64.sampleCountLow,this.a)));this.l(a);return a};q.prototype.Ga=function(){var a=[];if(this.cue.chunkId){var b=this.Ja();a=a.concat(x(this.cue.chunkId),h(b.length+4,this.a),h(this.cue.dwCuePoints,this.a),b)}this.l(a);return a};q.prototype.Ja=function(){for(var a=[],b=0;b<this.cue.dwCuePoints;b++)a=a.concat(h(this.cue.points[b].dwName,this.a),h(this.cue.points[b].dwPosition,this.a),x(this.cue.points[b].fccChunk),h(this.cue.points[b].dwChunkStart,this.a),h(this.cue.points[b].dwBlockStart,this.a),h(this.cue.points[b].dwSampleOffset,this.a));return a};q.prototype.Ya=function(){var a=[];if(this.smpl.chunkId){var b=this.Za();a=a.concat(x(this.smpl.chunkId),h(b.length+36,this.a),h(this.smpl.dwManufacturer,this.a),h(this.smpl.dwProduct,this.a),h(this.smpl.dwSamplePeriod,this.a),h(this.smpl.dwMIDIUnityNote,this.a),h(this.smpl.dwMIDIPitchFraction,this.a),h(this.smpl.dwSMPTEFormat,this.a),h(this.smpl.dwSMPTEOffset,this.a),h(this.smpl.dwNumSampleLoops,this.a),h(this.smpl.dwSamplerData,this.a),b)}this.l(a);return a};q.prototype.Za=function(){for(var a=[],b=0;b<this.smpl.dwNumSampleLoops;b++)a=a.concat(h(this.smpl.loops[b].dwName,this.a),h(this.smpl.loops[b].dwType,this.a),h(this.smpl.loops[b].dwStart,this.a),h(this.smpl.loops[b].dwEnd,this.a),h(this.smpl.loops[b].dwFraction,this.a),h(this.smpl.loops[b].dwPlayCount,this.a));return a};q.prototype.Pa=function(){var a=[];this.fact.chunkId&&(a=a.concat(x(this.fact.chunkId),h(this.fact.chunkSize,this.a),h(this.fact.dwSampleLength,this.a)));this.l(a);return a};q.prototype.Qa=function(){var a=[];if(this.fmt.chunkId)return a=a.concat(x(this.fmt.chunkId),h(this.fmt.chunkSize,this.a),h(this.fmt.audioFormat,this.g),h(this.fmt.numChannels,this.g),h(this.fmt.sampleRate,this.a),h(this.fmt.byteRate,this.a),h(this.fmt.blockAlign,this.g),h(this.fmt.bitsPerSample,this.g),this.Ra()),this.l(a),a;throw Error('Could not find the "fmt " chunk')};q.prototype.Ra=function(){var a=[];16<this.fmt.chunkSize&&(a=a.concat(h(this.fmt.cbSize,this.g)));18<this.fmt.chunkSize&&(a=a.concat(h(this.fmt.validBitsPerSample,this.g)));20<this.fmt.chunkSize&&(a=a.concat(h(this.fmt.dwChannelMask,this.a)));24<this.fmt.chunkSize&&(a=a.concat(h(this.fmt.subformat[0],this.a),h(this.fmt.subformat[1],this.a),h(this.fmt.subformat[2],this.a),h(this.fmt.subformat[3],this.a)));return a};q.prototype.Ta=function(){for(var a=[],b=0;b<this.LIST.length;b++){var c=this.Va(this.LIST[b].subChunks,this.LIST[b].format);a=a.concat(x(this.LIST[b].chunkId),h(c.length+4,this.a),x(this.LIST[b].format),c)}this.l(a);return a};q.prototype.Va=function(a,b){for(var c=[],d=0,e=a.length;d<e;d++)"INFO"==b?c=c.concat(this.Ua(a[d])):"adtl"==b&&(c=c.concat(this.Wa(a[d]))),this.l(c);return c};q.prototype.Ua=function(a){var b=[],c=A(a.value,a.value.length);(b=b.concat(x(a.chunkId),h(c.length+1,this.a),c)).push(0);return b};q.prototype.Wa=function(a){var b=[];if(-1<["labl","note"].indexOf(a.chunkId)){var c=A(a.value,a.value.length);(b=b.concat(x(a.chunkId),h(c.length+5,this.a),h(a.dwName,this.a),c)).push(0)}else"ltxt"==a.chunkId&&(b=b.concat(this.Xa(a)));return b};q.prototype.Xa=function(a){return x(a.chunkId).concat(h(a.value.length+20,this.a),h(a.dwName,this.a),h(a.dwSampleLength,this.a),h(a.dwPurposeID,this.a),h(a.dwCountry,this.g),h(a.dwLanguage,this.g),h(a.dwDialect,this.g),h(a.dwCodePage,this.g),A(a.value,a.value.length))};q.prototype.ab=function(){var a=[];if(this._PMX.chunkId){var b=x(this._PMX.value);this._PMX.chunkSize=b.length;a=a.concat(x(this._PMX.chunkId),h(this._PMX.chunkSize,this.a),b)}this.l(a);return a};q.prototype.Sa=function(){var a=[];if(this.junk.chunkId)return a.concat(x(this.junk.chunkId),h(this.junk.chunkData.length,this.a),this.junk.chunkData);this.l(a);return a};q.prototype.l=function(a){a.length%2&&a.push(0)};P(t,q);t.prototype.fromScratch=function(a,b,c,d,e){e=e||{};this.U();this.W(a,b,c,d,e)};t.prototype.fromBuffer=function(a,b){q.prototype.fromBuffer.call(this,a,void 0===b||b);this.ya();this.$()};t.prototype.toBuffer=function(){this.aa();return q.prototype.toBuffer.call(this)};t.prototype.getSamples=function(a,b){a=void 0!==a&&a;var c=new(b=void 0===b?Float64Array:b)(this.data.samples.length/(this.f.h/8));E(this.data.samples,this.f,c,0,this.data.samples.length);if(!a&&1<this.fmt.numChannels){var d=this.fmt.numChannels,e=b;e=void 0===e?Float64Array:e;for(var f=[],g=0;g<d;g++)f[g]=new e(c.length/d);for(e=0;e<d;e++){g=e;for(var k=0;g<c.length;g+=d,k++)f[e][k]=c[g]}c=f}return c};t.prototype.getSample=function(a){if((a*=this.f.h/8)+this.f.h/8>this.data.samples.length)throw Error("Range error");return M(this.data.samples.slice(a,a+this.f.h/8),this.f)};t.prototype.setSample=function(a,b){if((a*=this.f.h/8)+this.f.h/8>this.data.samples.length)throw Error("Range error");L([b],this.f,this.data.samples,void 0===a?0:a)};t.prototype.getiXML=function(){return this.iXML.value};t.prototype.setiXML=function(a){if("string"!=typeof a)throw new TypeError("iXML value must be a string.");this.iXML.value=a;this.iXML.chunkId="iXML"};t.prototype.get_PMX=function(){return this._PMX.value};t.prototype.set_PMX=function(a){if("string"!=typeof a)throw new TypeError("_PMX value must be a string.");this._PMX.value=a;this._PMX.chunkId="_PMX"};t.prototype.W=function(a,b,c,d,e){e.container||(e.container="RIFF");this.container=e.container;this.bitDepth=c;var f=[];if(0<d.length)if(d[0].constructor!==Number){f=new Float64Array(d[0].length*d.length);for(var g=0,k=d[0].length,r=0;g<k;g++)for(var z=0,I=d.length;z<I;z++,r++)f[r]=d[z][g]}else f=d;d=f;this.$();f=this.f.h/8;this.data.samples=new Uint8Array(d.length*f);L(d,this.f,this.data.samples,0);this.cb(c,a,b,f,this.data.samples.length,e);this.data.chunkId="data";this.data.chunkSize=this.data.samples.length;this.aa()};t.prototype.cb=function(a,b,c,d,e,f){"4"==a?this.za(a,b,c,d,e,f):"8a"==a||"8m"==a?this.Aa(a,b,c,d,e,f):-1==Object.keys(this.G).indexOf(a)||2<b?this.Ba(a,b,c,d,e,f):this.F(a,b,c,d,e,f)};t.prototype.F=function(a,b,c,d,e,f){this.container=f.container;this.chunkSize=36+e;this.format="WAVE";this.bitDepth=a;this.fmt={chunkId:"fmt ",chunkSize:16,audioFormat:this.G[a]||65534,numChannels:b,sampleRate:c,byteRate:b*d*c,blockAlign:b*d,bitsPerSample:parseInt(a,10),cbSize:0,validBitsPerSample:0,dwChannelMask:0,subformat:[]}};t.prototype.za=function(a,b,c,d,e,f){this.F(a,b,c,d,e,f);this.chunkSize=40+e;this.fmt.chunkSize=20;this.fmt.byteRate=4055;this.fmt.blockAlign=256;this.fmt.bitsPerSample=4;this.fmt.cbSize=2;this.fmt.validBitsPerSample=505;this.fact={chunkId:"fact",chunkSize:4,dwSampleLength:2*e}};t.prototype.Ba=function(a,b,c,d,e,f){this.F(a,b,c,d,e,f);this.chunkSize=60+e;this.fmt.chunkSize=40;this.fmt.bitsPerSample=1+(parseInt(a,10)-1|7);this.fmt.cbSize=22;this.fmt.validBitsPerSample=parseInt(a,10);c=0;1===b?c=4:2===b?c=3:4===b?c=51:6===b?c=63:8===b&&(c=1599);(a=this.fmt).dwChannelMask=c;this.fmt.subformat=[1,1048576,2852126848,1905997824]};t.prototype.Aa=function(a,b,c,d,e,f){this.F(a,b,c,d,e,f);this.chunkSize=40+e;this.fmt.chunkSize=20;this.fmt.cbSize=2;this.fmt.validBitsPerSample=8;this.fact={chunkId:"fact",chunkSize:4,dwSampleLength:e}};t.prototype.ya=function(){3===this.fmt.audioFormat&&32===this.fmt.bitsPerSample?this.bitDepth="32f":6===this.fmt.audioFormat?this.bitDepth="8a":7===this.fmt.audioFormat?this.bitDepth="8m":this.bitDepth=this.fmt.bitsPerSample.toString()};t.prototype.wa=function(){if(!(this.G[this.bitDepth]||8<parseInt(this.bitDepth,10)&&54>parseInt(this.bitDepth,10)))throw Error("Invalid bit depth.")};t.prototype.$=function(){this.f={h:1+(parseInt(this.bitDepth,10)-1|7),R:"32f"==this.bitDepth||"64"==this.bitDepth,O:"8"!=this.bitDepth,o:"RIFX"==this.container};-1<["4","8a","8m"].indexOf(this.bitDepth)&&(this.f.h=8,this.f.O=!1)};t.prototype.aa=function(){this.wa();var a=this.fmt.numChannels;if(1>a||65535<a*this.fmt.bitsPerSample/8)throw Error("Invalid number of channels.");if(1>(a=this.fmt.sampleRate)||4294967295<this.fmt.bitsPerSample/8*this.fmt.numChannels*a)throw Error("Invalid sample rate.")};P(C,t);C.prototype.getTag=function(a){return null!==(a=this.P(a)).w?this.LIST[a.LIST].subChunks[a.w].value:null};C.prototype.setTag=function(a,b){var c=a;if(c.constructor!==String)throw Error("Invalid tag name.");if(4>c.length)for(var d=0,e=4-c.length;d<e;d++)c+=" ";a=c;null!==(c=this.P(a)).w?(this.LIST[c.LIST].subChunks[c.w].chunkSize=b.length+1,this.LIST[c.LIST].subChunks[c.w].value=b):null!==c.LIST?this.LIST[c.LIST].subChunks.push({chunkId:a,chunkSize:b.length+1,value:b}):(this.LIST.push({chunkId:"LIST",chunkSize:b.length+9,format:"INFO",subChunks:[]}),this.LIST[this.LIST.length-1].subChunks.push({chunkId:a,chunkSize:b.length+1,value:b}))};C.prototype.deleteTag=function(a){return null!==(a=this.P(a)).w&&(this.LIST[a.LIST].subChunks.splice(a.w,1),!0)};C.prototype.listTags=function(){var a=this.C("INFO"),b={};if(null!==a)for(var c=0,d=this.LIST[a].subChunks.length;c<d;c++)b[this.LIST[a].subChunks[c].chunkId]=this.LIST[a].subChunks[c].value;return b};C.prototype.C=function(a){for(var b=0,c=this.LIST.length;b<c;b++)if(this.LIST[b].format==a)return b;return null};C.prototype.P=function(a){for(var b={LIST:null,w:null},c=0,d=this.LIST.length;c<d;c++)if("INFO"==this.LIST[c].format){b.LIST=c;d=0;for(var e=this.LIST[c].subChunks.length;d<e;d++)if(this.LIST[c].subChunks[d].chunkId==a){b.w=d;break}break}return b};P(w,C);w.prototype.listCuePoints=function(){for(var a=this.J(),b=0,c=a.length;b<c;b++)a[b].position=a[b].dwSampleOffset/this.fmt.sampleRate*1e3,a[b].dwSampleLength?(a[b].end=a[b].dwSampleLength/this.fmt.sampleRate*1e3,a[b].end+=a[b].position):a[b].end=null,delete a[b].value;return a};w.prototype.setCuePoint=function(a){this.cue.chunkId="cue ";a.label||(a.label="");var b=this.J();this.I();this.cue.points=[];a.dwSampleOffset=a.position*this.fmt.sampleRate/1e3;a.dwSampleLength=0;a.end&&(a.dwSampleLength=a.end*this.fmt.sampleRate/1e3-a.dwSampleOffset);0===b.length?this.B(a,1):this.ra(b,a);this.cue.dwCuePoints=this.cue.points.length};w.prototype.deleteCuePoint=function(a){this.cue.chunkId="cue ";var b=this.J();this.I();var c=this.cue.points.length;this.cue.points=[];for(var d=0;d<c;d++)d+1!==a&&this.B(b[d],d+1);this.cue.dwCuePoints=this.cue.points.length;this.cue.dwCuePoints?this.cue.chunkId="cue ":(this.cue.chunkId="",this.I())};w.prototype.updateLabel=function(a,b){var c=this.C("adtl");if(null!==c)for(var d=0,e=this.LIST[c].subChunks.length;d<e;d++)this.LIST[c].subChunks[d].dwName==a&&(this.LIST[c].subChunks[d].value=b)};w.prototype.J=function(){for(var a=[],b=0;b<this.cue.points.length;b++){var c=this.cue.points[b],d=this.Na(c.dwName);d.label=d.value?d.value:"";d.dwPosition=c.dwPosition;d.fccChunk=c.fccChunk;d.dwChunkStart=c.dwChunkStart;d.dwBlockStart=c.dwBlockStart;d.dwSampleOffset=c.dwSampleOffset;a.push(d)}return a};w.prototype.Na=function(a){var b=this.C("adtl"),c={};null!==b&&this.ha(c,b,a);return c};w.prototype.ha=function(a,b,c){for(var d=0,e=this.LIST[b].subChunks.length;d<e;d++)if(this.LIST[b].subChunks[d].dwName==c){var f=this.LIST[b].subChunks[d];a.value=f.value||a.value;a.dwName=f.dwName||0;a.dwSampleLength=f.dwSampleLength||0;a.dwPurposeID=f.dwPurposeID||0;a.dwCountry=f.dwCountry||0;a.dwLanguage=f.dwLanguage||0;a.dwDialect=f.dwDialect||0;a.dwCodePage=f.dwCodePage||0}};w.prototype.B=function(a,b){this.cue.points.push({dwName:b,dwPosition:a.dwPosition?a.dwPosition:0,fccChunk:a.fccChunk?a.fccChunk:"data",dwChunkStart:a.dwChunkStart?a.dwChunkStart:0,dwBlockStart:a.dwBlockStart?a.dwBlockStart:0,dwSampleOffset:a.dwSampleOffset});this.ta(a,b)};w.prototype.ra=function(a,b){for(var c=!1,d=0;d<a.length;d++)a[d].dwSampleOffset>b.dwSampleOffset&&!c?(this.B(b,d+1),this.B(a[d],d+2),c=!0):this.B(a[d],c?d+2:d+1);c||this.B(b,this.cue.points.length+1)};w.prototype.I=function(){for(var a=0,b=this.LIST.length;a<b;a++)"adtl"==this.LIST[a].format&&this.LIST.splice(a)};w.prototype.ta=function(a,b){var c=this.C("adtl");null===c&&(this.LIST.push({chunkId:"LIST",chunkSize:4,format:"adtl",subChunks:[]}),c=this.LIST.length-1);this.sa(c,a,b);a.dwSampleLength&&this.ua(c,a,b)};w.prototype.sa=function(a,b,c){this.LIST[a].subChunks.push({chunkId:"labl",chunkSize:4,dwName:c,value:b.label});this.LIST[a].chunkSize+=12};w.prototype.ua=function(a,b,c){this.LIST[a].subChunks.push({chunkId:"ltxt",chunkSize:20,dwName:c,dwSampleLength:b.dwSampleLength,dwPurposeID:b.dwPurposeID||0,dwCountry:b.dwCountry||0,dwLanguage:b.dwLanguage||0,dwDialect:b.dwDialect||0,dwCodePage:b.dwCodePage||0,value:b.label});this.LIST[a].chunkSize+=28};v.prototype.H=function(a,b){return this.f(Math.round(this.l*a),b)};v.prototype.G=function(a,b){a*=this.l;var c=Math.floor(a);return(1-(a-=c))*this.f(c,b)+a*this.f(c+1,b)};v.prototype.B=function(a,b){a*=this.l;var c=Math.floor(a),d=[this.m(c,b),this.m(c+1,b)],e=[this.f(c,b),this.f(c+1,b)],f=(a-=c)*(c=a*a);return(2*f-3*c+1)*e[0]+(f-2*c+a)*d[0]+(-2*f+3*c)*e[1]+(f-c)*d[1]};v.prototype.I=function(a,b){a*=this.l;var c=Math.floor(a),d=c+this.v,e=0;for(c=c-this.v+1;c<=d;c++)e+=this.F(a-c)*this.f(c,b);return e};v.prototype.m=function(a,b){return this.J*(this.f(a+1,b)-this.f(a-1,b))/2};v.prototype.f=function(a,b){return 0<=a&&a<this.C?b[a]:0};y.prototype.filter=function(a){this.z.L[this.z.N]=a;for(var b=a=0,c=this.z.L.length;b<c;b++)a+=this.a[b]*this.z.L[(this.z.N+b)%this.z.L.length];this.z.N=(this.z.N+1)%this.z.L.length;return a};y.prototype.reset=function(){this.z=this.b()};y.prototype.b=function(){for(var a=[],b=0;b<this.a.length-1;b++)a.push(0);return{L:a,N:0}};p.prototype.filter=function(a){for(var b=0,c=this.a.length;b<c;b++)a=this.f(b,a);return a};p.prototype.b=function(a){var b={D:[],A:[]};a=this.c(a,b);b.k=1;b.A.push((1-a.ba)/(2*a.K));b.A.push(2*b.A[0]);b.A.push(b.A[0]);return b};p.prototype.c=function(a,b){var c={},d=2*Math.PI*a.oa/a.pa;c.alpha=Math.sin(d)/(2*a.Q);c.ba=Math.cos(d);c.K=1+c.alpha;b.K=c.K;b.D.push(-2*c.ba/c.K);b.k=1;b.D.push((1-c.alpha)/c.K);return c};p.prototype.f=function(a,b){var c=b*this.a[a].k-this.a[a].Ha*this.a[a].z[0]-this.a[a].Ia*this.a[a].z[1],d=this.a[a].Ka*c+this.a[a].La*this.a[a].z[0]+this.a[a].Ma*this.a[a].z[1];this.a[a].z[1]=this.a[a].z[0];this.a[a].z[0]=c;return d};p.prototype.reset=function(){for(var a=0;a<this.a.length;a++)this.a[a].z=[0,0]};var Ha={point:!1,linear:!1,cubic:!0,sinc:!0},ia={IIR:16,FIR:71},Ia={IIR:p,FIR:y};P(l,w);l.prototype.toRIFF=function(){var a=new Float64Array(J(this.data.samples.length,this.f.h/8));E(this.data.samples,this.f,a,0,this.data.samples.length);this.m(this.fmt.numChannels,this.fmt.sampleRate,this.bitDepth,a,{container:"RIFF"})};l.prototype.toRIFX=function(){var a=new Float64Array(J(this.data.samples.length,this.f.h/8));E(this.data.samples,this.f,a,0,this.data.samples.length);this.m(this.fmt.numChannels,this.fmt.sampleRate,this.bitDepth,a,{container:"RIFX"})};l.prototype.toIMAADPCM=function(){if(8e3!==this.fmt.sampleRate)throw Error("Only 8000 Hz files can be compressed as IMA-ADPCM.");if(1!==this.fmt.numChannels)throw Error("Only mono files can be compressed as IMA-ADPCM.");this.H();var a=new Int16Array(J(this.data.samples.length,2));E(this.data.samples,this.f,a,0,this.data.samples.length);this.m(this.fmt.numChannels,this.fmt.sampleRate,"4",function(a){for(var b={index:0,i:0,step:7},c=new Uint8Array(a.length),d=[],e=0,f=0,g=0,k=a.length;g<k;g++)0==g%505&&0!=g&&(c.set(xa(d,b),e),e+=256,d=[],f++),d.push(a[g]);(a=a.length/2)%2&&a++;return c.slice(0,a+512+4*f)}(a),{container:this.v()})};l.prototype.fromIMAADPCM=function(a){a=void 0===a?"16":a;this.m(this.fmt.numChannels,this.fmt.sampleRate,"16",function(a,b){b=void 0===b?256:b;for(var c={index:0,i:0,step:7},d=new Int16Array(2*a.length),e=[],f=0,g=0,k=a.length;g<k;g++){if(0==g%b&&0!=g){var r=c,z=e[1]<<8|e[0];r.i=32768<z?z-65536:z;r.index=e[2];r.step=R[r.index];z=[r.i,r.i];for(var I=4,za=e.length;I<za;I++){var Z=e[I],aa=Z>>4;z.push(ba(aa<<4^Z,r));z.push(ba(aa,r))}e=z;d.set(e,f);f+=e.length;e=[]}e.push(a[g])}return d}(this.data.samples,this.fmt.blockAlign),{container:this.v()});"16"!=a&&this.toBitDepth(a)};l.prototype.toALaw=function(){this.H();var a=new Int16Array(J(this.data.samples.length,2));E(this.data.samples,this.f,a,0,this.data.samples.length);this.m(this.fmt.numChannels,this.fmt.sampleRate,"8a",function(a){for(var b=new Uint8Array(a.length),c=0,d=a.length;c<d;c++){var e=c,f=a[c],g=~(f=-32768==f?-32767:f)>>8&128;g||(f*=-1);32635<f&&(f=32635);if(256<=f){var k=Ba[f>>8&127];f=k<<4|f>>k+3&15}else f>>=4;b[e]=f^g^85}return b}(a),{container:this.v()})};l.prototype.fromALaw=function(a){a=void 0===a?"16":a;this.m(this.fmt.numChannels,this.fmt.sampleRate,"16",function(a){for(var b=new Int16Array(a.length),c=0,d=a.length;c<d;c++){var e=c,f=a[c],g=0;0!=(128&(f^=85))&&(f&=-129,g=-1);var k=4+((240&f)>>4);f=4!=k?1<<k|(15&f)<<k-4|1<<k-5:f<<1|1;b[e]=-8*(0===g?f:-f)}return b}(this.data.samples),{container:this.v()});"16"!=a&&this.toBitDepth(a)};l.prototype.toMuLaw=function(){this.H();var a=new Int16Array(J(this.data.samples.length,2));E(this.data.samples,this.f,a,0,this.data.samples.length);this.m(this.fmt.numChannels,this.fmt.sampleRate,"8m",function(a){for(var b=new Uint8Array(a.length),c=0,d=a.length;c<d;c++){var e=c,f=a[c],g=f>>8&128;0!=g&&(f=-f);32635<(f+=132)&&(f=32635);var k=Ea[f>>7&255];b[e]=~(g|k<<4|f>>k+3&15)}return b}(a),{container:this.v()})};l.prototype.fromMuLaw=function(a){a=void 0===a?"16":a;this.m(this.fmt.numChannels,this.fmt.sampleRate,"16",function(a){for(var b=new Int16Array(a.length),c=0,d=a.length;c<d;c++){var e=c,f=a[c],g=(f=~f)>>4&7;g=Ga[g]+((15&f)<<g+3);0!=(128&f)&&(g=-g);b[e]=g}return b}(this.data.samples),{container:this.v()});"16"!=a&&this.toBitDepth(a)};l.prototype.toBitDepth=function(a,b){var c=a,d=this.bitDepth;void 0===b||b||("32f"!=a&&(c=this.f.h.toString()),d=""+this.f.h);this.T();var e=this.getSamples(!0),f=new Float64Array(e.length),g=d;if(-1<["32f","64"].indexOf(g)&&-1<["32f","64"].indexOf(c))f.set(e);else{X(g);X(c);d=function(a,b){function c(d){return d}a!=b&&(c=["32f","64"].includes(a)?ta:["32f","64"].includes(b)?ua:sa);return c}(g,c);var k={fa:Math.pow(2,parseInt(g,10))/2,da:Math.pow(2,parseInt(c,10))/2,ea:Math.pow(2,parseInt(g,10))/2-1,ca:Math.pow(2,parseInt(c,10))/2-1};Y(g,e,!0);g=0;for(var r=e.length;g<r;g++)f[g]=d(e[g],k);Y(c,f,!1)}this.m(this.fmt.numChannels,this.fmt.sampleRate,a,f,{container:this.v()})};l.prototype.toSampleRate=function(a,b){this.xa(a);var c=this.getSamples(),d=[];if(c.constructor===Float64Array)d=ha(c,this.fmt.sampleRate,a,b);else for(var e=0;e<c.length;e++)d.push(ha(c[e],this.fmt.sampleRate,a,b));this.m(this.fmt.numChannels,a,this.bitDepth,d,{container:this.v()})};l.prototype.xa=function(a){if(1>a||4294967295<this.fmt.bitsPerSample/8*this.fmt.numChannels*a)throw Error("Invalid sample rate.");if(-1<["4","8a","8m"].indexOf(this.bitDepth))throw Error("wavefile can't change the sample rate of compressed files.")};l.prototype.H=function(){this.T();"16"!=this.bitDepth&&this.toBitDepth("16")};l.prototype.T=function(){"8a"==this.bitDepth?this.fromALaw():"8m"==this.bitDepth?this.fromMuLaw():"4"==this.bitDepth&&this.fromIMAADPCM()};l.prototype.v=function(){return"RF64"==this.container?"RIFF":this.container};l.prototype.m=function(a,b,c,d,e){var f=new w;Object.assign(this.fmt,f.fmt);Object.assign(this.fact,f.fact);Object.assign(this.ds64,f.ds64);Object.assign(this.data,f.data);this.W(a,b,c,d,e)};P(m,l);m.prototype.fromBase64=function(a){this.fromBuffer(function(a){for(var b=new Uint8Array(256),c=0;64>c;c++)b["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(c)]=c;c=.75*a.length;"="===a[a.length-1]&&(c--,"="===a[a.length-2]&&c--);c=new Uint8Array(c);for(var d=0,e=0;d<a.length;d+=4){var f=b[a.charCodeAt(d)],g=b[a.charCodeAt(d+1)],k=b[a.charCodeAt(d+2)],r=b[a.charCodeAt(d+3)];c[e++]=f<<2|g>>4;c[e++]=(15&g)<<4|k>>2;c[e++]=(3&k)<<6|63&r}return c}(a))};m.prototype.toBase64=function(){for(var a=this.toBuffer(),b="",c=0;c<a.length;c+=3)b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a[c]>>2],b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(3&a[c])<<4|a[c+1]>>4],b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(15&a[c+1])<<2|a[c+2]>>6],b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&a[c+2]];2==a.length%3?b=b.substring(0,b.length-1)+"=":1==a.length%3&&(b=b.substring(0,b.length-2)+"==");return b};m.prototype.toDataURI=function(){return"data:audio/wav;base64,"+this.toBase64()};m.prototype.fromDataURI=function(a){this.fromBase64(a.replace("data:audio/wav;base64,",""))};n.WaveFile=m;Object.defineProperty(n,"__esModule",{value:!0})}"object"==typeof exports&&"undefined"!=typeof module?W(exports):"function"==typeof define&&define.amd?define(["exports"],W):W((V=V||self).wavefile={});!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Recorder=f()}}((function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,(function(e){var n=t[o][1][e];return s(n||e)}),l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";module.exports=require("./recorder").Recorder},{"./recorder":2}],2:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;"value"in descriptor&&(descriptor.writable=!0);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0});exports.Recorder=void 0;var obj,_inlineWorker=require("inline-worker"),_inlineWorker2=(obj=_inlineWorker)&&obj.__esModule?obj:{default:obj};var Recorder=exports.Recorder=function(){function Recorder(source,cfg){var _this=this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Recorder);this.config={bufferLen:4096,numChannels:2,mimeType:"audio/wav"};this.recording=!1;this.callbacks={getBuffer:[],exportWAV:[]};Object.assign(this.config,cfg);this.context=source.context;this.node=(this.context.createScriptProcessor||this.context.createJavaScriptNode).call(this.context,this.config.bufferLen,this.config.numChannels,this.config.numChannels);this.node.onaudioprocess=function(e){if(_this.recording){for(var buffer=[],channel=0;channel<_this.config.numChannels;channel++)buffer.push(e.inputBuffer.getChannelData(channel));_this.worker.postMessage({command:"record",buffer:buffer})}};source.connect(this.node);this.node.connect(this.context.destination);var self={};this.worker=new _inlineWorker2.default((function(){var recLength=0,recBuffers=[],sampleRate=void 0,numChannels=void 0;self.onmessage=function(e){switch(e.data.command){case"init":!function(config){sampleRate=config.sampleRate;numChannels=config.numChannels;initBuffers()}(e.data.config);break;case"record":!function(inputBuffer){for(var channel=0;channel<numChannels;channel++)recBuffers[channel].push(inputBuffer[channel]);recLength+=inputBuffer[0].length}(e.data.buffer);break;case"exportWAV":!function(type,frequency){for(var buffers=[],channel=0;channel<numChannels;channel++)buffers.push(mergeBuffers(recBuffers[channel],recLength));var interleaved=void 0;interleaved=2===numChannels?function(inputL,inputR){var length=inputL.length+inputR.length,result=new Float32Array(length),index=0,inputIndex=0;for(;index<length;){result[index++]=inputL[inputIndex];result[index++]=inputR[inputIndex];inputIndex++}return result}(buffers[0],buffers[1]):buffers[0];var downsampledBuffer=function(buffer,rate){if(rate==sampleRate)return buffer;if(rate>sampleRate)throw"downsampling rate show be smaller than original sample rate";var sampleRateRatio=sampleRate/rate,newLength=Math.round(buffer.length/sampleRateRatio),result=new Float32Array(newLength),offsetResult=0,offsetBuffer=0;for(;offsetResult<result.length;){for(var nextOffsetBuffer=Math.round((offsetResult+1)*sampleRateRatio),accum=0,count=0,i=offsetBuffer;i<nextOffsetBuffer&&i<buffer.length;i++){accum+=buffer[i];count++}result[offsetResult]=accum/count;offsetResult++;offsetBuffer=nextOffsetBuffer}return result}(interleaved,frequency),dataview=function(sampleRate,samples){var buffer=new ArrayBuffer(44+2*samples.length),view=new DataView(buffer);writeString(view,0,"RIFF");view.setUint32(4,36+2*samples.length,!0);writeString(view,8,"WAVE");writeString(view,12,"fmt ");view.setUint32(16,16,!0);view.setUint16(20,1,!0);view.setUint16(22,numChannels,!0);view.setUint32(24,sampleRate,!0);view.setUint32(28,4*sampleRate,!0);view.setUint16(32,2*numChannels,!0);view.setUint16(34,16,!0);writeString(view,36,"data");view.setUint32(40,2*samples.length,!0);!function(output,offset,input){for(var i=0;i<input.length;i++,offset+=2){var s=Math.max(-1,Math.min(1,input[i]));output.setInt16(offset,s<0?32768*s:32767*s,!0)}}(view,44,samples);return view}(frequency,downsampledBuffer),audioBlob=new Blob([dataview],{type:type});self.postMessage({command:"exportWAV",data:audioBlob})}(e.data.type,e.data.frequency);break;case"getBuffer":!function(){for(var buffers=[],channel=0;channel<numChannels;channel++)buffers.push(mergeBuffers(recBuffers[channel],recLength));self.postMessage({command:"getBuffer",data:buffers})}();break;case"clear":!function(){recLength=0;recBuffers=[];initBuffers()}()}};function initBuffers(){for(var channel=0;channel<numChannels;channel++)recBuffers[channel]=[]}function mergeBuffers(recBuffers,recLength){for(var result=new Float32Array(recLength),offset=0,i=0;i<recBuffers.length;i++){result.set(recBuffers[i],offset);offset+=recBuffers[i].length}return result}function writeString(view,offset,string){for(var i=0;i<string.length;i++)view.setUint8(offset+i,string.charCodeAt(i))}}),self);this.worker.postMessage({command:"init",config:{sampleRate:this.context.sampleRate,numChannels:this.config.numChannels}});this.worker.onmessage=function(e){var cb=_this.callbacks[e.data.command].pop();"function"==typeof cb&&cb(e.data.data)}}_createClass(Recorder,[{key:"record",value:function(){this.recording=!0}},{key:"stop",value:function(){this.recording=!1}},{key:"clear",value:function(){this.worker.postMessage({command:"clear"})}},{key:"getBuffer",value:function(cb){if(!(cb=cb||this.config.callback))throw new Error("Callback not set");this.callbacks.getBuffer.push(cb);this.worker.postMessage({command:"getBuffer"})}},{key:"exportWAV",value:function(cb,mimeType,frequency){mimeType=mimeType||this.config.mimeType;if(!(cb=cb||this.config.callback))throw new Error("Callback not set");this.callbacks.exportWAV.push(cb);this.worker.postMessage({command:"exportWAV",type:mimeType,frequency:frequency})}}],[{key:"forceDownload",value:function(blob,filename){var url=(window.URL||window.webkitURL).createObjectURL(blob),link=window.document.createElement("a");link.href=url;link.download=filename||"output.wav";var click=document.createEvent("Event");click.initEvent("click",!0,!0);link.dispatchEvent(click)}}]);return Recorder}();exports.default=Recorder},{"inline-worker":3}],3:[function(require,module,exports){"use strict";module.exports=require("./inline-worker")},{"./inline-worker":4}],4:[function(require,module,exports){(function(global){"use strict";var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=!0;prop.value&&(prop.writable=!0)}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}(),_classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},WORKER_ENABLED=!!(global===global.window&&global.URL&&global.Blob&&global.Worker),InlineWorker=function(){function InlineWorker(func,self){var _this=this;_classCallCheck(this,InlineWorker);if(WORKER_ENABLED){var functionBody=func.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1],url=global.URL.createObjectURL(new global.Blob([functionBody],{type:"text/javascript"}));return new global.Worker(url)}this.self=self;this.self.postMessage=function(data){setTimeout((function(){_this.onmessage({data:data})}),0)};setTimeout((function(){func.call(self)}),0)}_createClass(InlineWorker,{postMessage:{value:function(data){var _this=this;setTimeout((function(){_this.self.onmessage({data:data})}),0)}}});return InlineWorker}();module.exports=InlineWorker}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)}));
/*!

=========================================================
* Argon Dashboard - v1.1.0
=========================================================

* Product Page: https://www.creative-tim.com/product/argon-dashboard
* Copyright 2018 Creative Tim (https://www.creative-tim.com)
* Licensed under MIT (https://github.com/creativetimofficial/argon-dashboard/blob/master/LICENSE.md)

* Coded by www.creative-tim.com

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

*/
"use strict";var $datepicker,$element,$btn,$input,map,lat,lng,__createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k);o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}},__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);__setModuleDefault(result,mod);return result},__asyncValues=this&&this.__asyncValues||function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,m=o[Symbol.asyncIterator];return m?m.call(o):(o="function"==typeof __values?__values(o):o[Symbol.iterator](),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise((function(resolve,reject){(function(resolve,reject,d,v){Promise.resolve(v).then((function(v){resolve({value:v,done:d})}),reject)})(resolve,reject,(v=o[n](v)).done,v.value)}))}}},__await=this&&this.__await||function(v){return this instanceof __await?(this.v=v,this):new __await(v)},__asyncGenerator=this&&this.__asyncGenerator||function(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=generator.apply(thisArg,_arguments||[]),q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){g[n]&&(i[n]=function(v){return new Promise((function(a,b){q.push([n,v,a,b])>1||resume(n,v)}))})}function resume(n,v){try{!function(r){r.value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}(g[n](v))}catch(e){settle(q[0][3],e)}}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){(f(v),q.shift(),q.length)&&resume(q[0][0],q[0][1])}},$map=(($datepicker=$(".datepicker")).length&&$datepicker.each((function(){$(this).datepicker({disableTouchKeyboard:!0,autoclose:!1})})),$element=".btn-icon-clipboard",($btn=$($element)).length&&function($this){$this.tooltip().on("mouseleave",(function(){$this.tooltip("hide")}));new ClipboardJS($element).on("success",(function(e){$(e.trigger).attr("title","Copied!").tooltip("_fixTitle").tooltip("show").attr("title","Copy to clipboard").tooltip("_fixTitle");e.clearSelection()}))}($btn),($input=$(".form-control")).length&&$input.on("focus blur",(function(e){$(this).parents(".form-group").toggleClass("focused","focus"===e.type||this.value.length>0)})).trigger("blur"),$("#map-canvas")),color="#5e72e4";$map.length&&google.maps.event.addDomListener(window,"load",(function(){map=document.getElementById("map-canvas");lat=map.getAttribute("data-lat");lng=map.getAttribute("data-lng");var myLatlng=new google.maps.LatLng(lat,lng),mapOptions={zoom:12,scrollwheel:!1,center:myLatlng,mapTypeId:google.maps.MapTypeId.ROADMAP,styles:[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:color},{visibility:"on"}]}]};map=new google.maps.Map(map,mapOptions);var marker=new google.maps.Marker({position:myLatlng,map:map,animation:google.maps.Animation.DROP,title:"Hello World!"}),infowindow=new google.maps.InfoWindow({content:'<div class="info-window-content"><h2>Argon Dashboard</h2><p>A beautiful Dashboard for Bootstrap 4. It is Free and Open Source.</p></div>'});google.maps.event.addListener(marker,"click",(function(){infowindow.open(map,marker)}))}));(function(){var $nav=$(".navbar-nav, .navbar-nav .nav"),$collapse=$(".navbar .collapse"),$dropdown=$(".navbar .dropdown");$collapse.on({"show.bs.collapse":function(){($this=$(this)).closest($nav).find($collapse).not($this).collapse("hide");var $this}});$dropdown.on({"hide.bs.dropdown":function(){!function($this){var $dropdownMenu=$this.find(".dropdown-menu");$dropdownMenu.addClass("close");setTimeout((function(){$dropdownMenu.removeClass("close")}),200)}($(this))}})})(),function(){$(".navbar-nav");var $collapse=$(".navbar .collapse");if($collapse.length){$collapse.on({"hide.bs.collapse":function(){$collapse.addClass("collapsing-out")}});$collapse.on({"hidden.bs.collapse":function(){$collapse.removeClass("collapsing-out")}})}}(),$popover=$('[data-toggle="popover"]'),$popoverClass="",$popover.length&&$popover.each((function(){!function($this){$this.data("color")&&($popoverClass="popover-"+$this.data("color"));var options={trigger:"focus",template:'<div class="popover '+$popoverClass+'" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'};$this.popover(options)}($(this))})),function(){var $scrollTo=$(".scroll-me, [data-scroll-to], .toc-entry a");function scrollTo($this){var $el=$this.attr("href"),offset=$this.data("scroll-to-offset")?$this.data("scroll-to-offset"):0,options={scrollTop:$($el).offset().top-offset};$("html, body").stop(!0,!0).animate(options,600);event.preventDefault()}$scrollTo.length&&$scrollTo.on("click",(function(event){scrollTo($(this))}))}(),($tooltip=$('[data-toggle="tooltip"]')).length&&$tooltip.tooltip();var $popover,$popoverClass,$tooltip,$chart,requirejs,require,define,Charts=function(){var $toggle=$('[data-toggle="chart"]'),mode="light",fonts={base:"Open Sans"},colors={gray:{100:"#f6f9fc",200:"#e9ecef",300:"#dee2e6",400:"#ced4da",500:"#adb5bd",600:"#8898aa",700:"#525f7f",800:"#32325d",900:"#212529"},theme:{default:"#172b4d",primary:"#5e72e4",secondary:"#f4f5f7",info:"#11cdef",success:"#2dce89",danger:"#f5365c",warning:"#fb6340"},black:"#12263F",white:"#FFFFFF",transparent:"transparent"};function parseOptions(parent,options){for(var item in options)"object"!=typeof options[item]?parent[item]=options[item]:parseOptions(parent[item],options[item])}function toggleOptions(elem){var options=elem.data("add"),$chart=$(elem.data("target")).data("chart");if(elem.is(":checked")){!function pushOptions(parent,options){for(var item in options)Array.isArray(options[item])?options[item].forEach((function(data){parent[item].push(data)})):pushOptions(parent[item],options[item])}($chart,options);$chart.update()}else{!function popOptions(parent,options){for(var item in options)Array.isArray(options[item])?options[item].forEach((function(data){parent[item].pop()})):popOptions(parent[item],options[item])}($chart,options);$chart.update()}}function updateOptions(elem){var options=elem.data("update"),$chart=$(elem.data("target")).data("chart");parseOptions($chart,options);!function(elem,$chart){if(void 0!==elem.data("prefix")||void 0!==elem.data("prefix")){var prefix=elem.data("prefix")?elem.data("prefix"):"",suffix=elem.data("suffix")?elem.data("suffix"):"";$chart.options.scales.yAxes[0].ticks.callback=function(value){if(!(value%10))return prefix+value+suffix};$chart.options.tooltips.callbacks.label=function(item,data){var label=data.datasets[item.datasetIndex].label||"",yLabel=item.yLabel,content="";data.datasets.length>1&&(content+='<span class="popover-body-label mr-auto">'+label+"</span>");return content+='<span class="popover-body-value">'+prefix+yLabel+suffix+"</span>"}}}(elem,$chart);$chart.update()}window.Chart&&parseOptions(Chart,function(){var options={defaults:{global:{responsive:!0,maintainAspectRatio:!1,defaultColor:"dark"==mode?colors.gray[700]:colors.gray[600],defaultFontColor:"dark"==mode?colors.gray[700]:colors.gray[600],defaultFontFamily:fonts.base,defaultFontSize:13,layout:{padding:0},legend:{display:!1,position:"bottom",labels:{usePointStyle:!0,padding:16}},elements:{point:{radius:0,backgroundColor:colors.theme.primary},line:{tension:.4,borderWidth:4,borderColor:colors.theme.primary,backgroundColor:colors.transparent,borderCapStyle:"rounded"},rectangle:{backgroundColor:colors.theme.warning},arc:{backgroundColor:colors.theme.primary,borderColor:"dark"==mode?colors.gray[800]:colors.white,borderWidth:4}},tooltips:{enabled:!1,mode:"index",intersect:!1,custom:function(model){var $tooltip=$("#chart-tooltip");if(!$tooltip.length){$tooltip=$('<div id="chart-tooltip" class="popover bs-popover-top" role="tooltip"></div>');$("body").append($tooltip)}if(0!==model.opacity){if(model.body){var titleLines=model.title||[],bodyLines=model.body.map((function(bodyItem){return bodyItem.lines})),html="";html+='<div class="arrow"></div>';titleLines.forEach((function(title){html+='<h3 class="popover-header text-center">'+title+"</h3>"}));bodyLines.forEach((function(body,i){model.labelColors[i].backgroundColor;var align=bodyLines.length>1?"justify-content-left":"justify-content-center";html+='<div class="popover-body d-flex align-items-center '+align+'"><span class="badge badge-dot"><i class="bg-primary"></i></span>'+body+"</div>"}));$tooltip.html(html)}var $canvas=$(this._chart.canvas),canvasTop=($canvas.outerWidth(),$canvas.outerHeight(),$canvas.offset().top),canvasLeft=$canvas.offset().left,tooltipWidth=$tooltip.outerWidth(),tooltipHeight=$tooltip.outerHeight(),top=canvasTop+model.caretY-tooltipHeight-16,left=canvasLeft+model.caretX-tooltipWidth/2;$tooltip.css({top:top+"px",left:left+"px",display:"block","z-index":"100"})}else $tooltip.css("display","none")},callbacks:{label:function(item,data){var label=data.datasets[item.datasetIndex].label||"",yLabel=item.yLabel,content="";data.datasets.length>1&&(content+='<span class="badge badge-primary mr-auto">'+label+"</span>");return content+='<span class="popover-body-value">'+yLabel+"</span>"}}}},doughnut:{cutoutPercentage:83,tooltips:{callbacks:{title:function(item,data){return data.labels[item[0].index]},label:function(item,data){var content="";return content+='<span class="popover-body-value">'+data.datasets[0].data[item.index]+"</span>"}}},legendCallback:function(chart){var data=chart.data,content="";data.labels.forEach((function(label,index){var bgColor=data.datasets[0].backgroundColor[index];content+='<span class="chart-legend-item">';content+='<i class="chart-legend-indicator" style="background-color: '+bgColor+'"></i>';content+=label;content+="</span>"}));return content}}}};Chart.scaleService.updateScaleDefaults("category",{gridLines:{drawBorder:!1,drawOnChartArea:!1,drawTicks:!1},ticks:{padding:20},maxBarThickness:10});return options}());$toggle.on({change:function(){var $this=$(this);$this.is("[data-add]")&&toggleOptions($this)},click:function(){var $this=$(this);$this.is("[data-update]")&&updateOptions($this)}});return{colors:colors,fonts:fonts,mode:mode}}();(function(){var $chart=$("#chart-orders");$('[name="ordersSelect"]');$chart.length&&function($chart){var ordersChart=new Chart($chart,{type:"bar",options:{scales:{yAxes:[{gridLines:{lineWidth:1,color:"#dfe2e6",zeroLineColor:"#dfe2e6"},ticks:{callback:function(value){if(!(value%10))return value}}}]},tooltips:{callbacks:{label:function(item,data){var label=data.datasets[item.datasetIndex].label||"",yLabel=item.yLabel,content="";data.datasets.length>1&&(content+='<span class="popover-body-label mr-auto">'+label+"</span>");return content+='<span class="popover-body-value">'+yLabel+"</span>"}}}},data:{labels:["Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Sales",data:[25,20,30,22,17,29]}]}});$chart.data("chart",ordersChart)}($chart)})(),($chart=$("#chart-sales")).length&&function($chart){var salesChart=new Chart($chart,{type:"line",options:{scales:{yAxes:[{gridLines:{lineWidth:1,color:Charts.colors.gray[900],zeroLineColor:Charts.colors.gray[900]},ticks:{callback:function(value){if(!(value%10))return"$"+value+"k"}}}]},tooltips:{callbacks:{label:function(item,data){var label=data.datasets[item.datasetIndex].label||"",yLabel=item.yLabel,content="";data.datasets.length>1&&(content+='<span class="popover-body-label mr-auto">'+label+"</span>");return content+='<span class="popover-body-value">$'+yLabel+"k</span>"}}}},data:{labels:["May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Performance",data:[0,20,10,30,15,40,20,60,60]}]}});$chart.data("chart",salesChart)}($chart);!function(undef){var main,req,makeMap,handlers,defined={},waiting={},config={},defining={},hasOwn=Object.prototype.hasOwnProperty,aps=[].slice,jsSuffixRegExp=/\.js$/;function hasProp(obj,prop){return hasOwn.call(obj,prop)}function normalize(name,baseName){var nameParts,nameSegment,mapValue,foundMap,lastIndex,foundI,foundStarMap,starI,i,j,part,baseParts=baseName&&baseName.split("/"),map=config.map,starMap=map&&map["*"]||{};if(name){lastIndex=(name=name.split("/")).length-1;config.nodeIdCompat&&jsSuffixRegExp.test(name[lastIndex])&&(name[lastIndex]=name[lastIndex].replace(jsSuffixRegExp,""));"."===name[0].charAt(0)&&baseParts&&(name=baseParts.slice(0,baseParts.length-1).concat(name));for(i=0;i<name.length;i++)if("."===(part=name[i])){name.splice(i,1);i-=1}else if(".."===part){if(0===i||1===i&&".."===name[2]||".."===name[i-1])continue;if(i>0){name.splice(i-1,2);i-=2}}name=name.join("/")}if((baseParts||starMap)&&map){for(i=(nameParts=name.split("/")).length;i>0;i-=1){nameSegment=nameParts.slice(0,i).join("/");if(baseParts)for(j=baseParts.length;j>0;j-=1)if((mapValue=map[baseParts.slice(0,j).join("/")])&&(mapValue=mapValue[nameSegment])){foundMap=mapValue;foundI=i;break}if(foundMap)break;if(!foundStarMap&&starMap&&starMap[nameSegment]){foundStarMap=starMap[nameSegment];starI=i}}if(!foundMap&&foundStarMap){foundMap=foundStarMap;foundI=starI}if(foundMap){nameParts.splice(0,foundI,foundMap);name=nameParts.join("/")}}return name}function makeRequire(relName,forceSync){return function(){var args=aps.call(arguments,0);"string"!=typeof args[0]&&1===args.length&&args.push(null);return req.apply(undef,args.concat([relName,forceSync]))}}function makeLoad(depName){return function(value){defined[depName]=value}}function callDep(name){if(hasProp(waiting,name)){var args=waiting[name];delete waiting[name];defining[name]=!0;main.apply(undef,args)}if(!hasProp(defined,name)&&!hasProp(defining,name))throw new Error("No "+name);return defined[name]}function splitPrefix(name){var prefix,index=name?name.indexOf("!"):-1;if(index>-1){prefix=name.substring(0,index);name=name.substring(index+1,name.length)}return[prefix,name]}function makeRelParts(relName){return relName?splitPrefix(relName):[]}makeMap=function(name,relParts){var plugin,relName,parts=splitPrefix(name),prefix=parts[0],relResourceName=relParts[1];name=parts[1];prefix&&(plugin=callDep(prefix=normalize(prefix,relResourceName)));if(prefix)name=plugin&&plugin.normalize?plugin.normalize(name,(relName=relResourceName,function(name){return normalize(name,relName)})):normalize(name,relResourceName);else{prefix=(parts=splitPrefix(name=normalize(name,relResourceName)))[0];name=parts[1];prefix&&(plugin=callDep(prefix))}return{f:prefix?prefix+"!"+name:name,n:name,pr:prefix,p:plugin}};function makeConfig(name){return function(){return config&&config.config&&config.config[name]||{}}}handlers={require:function(name){return makeRequire(name)},exports:function(name){var e=defined[name];return void 0!==e?e:defined[name]={}},module:function(name){return{id:name,uri:"",exports:defined[name],config:makeConfig(name)}}};main=function(name,deps,callback,relName){var cjsModule,depName,ret,map,i,relParts,usingExports,args=[],callbackType=typeof callback;relParts=makeRelParts(relName=relName||name);if("undefined"===callbackType||"function"===callbackType){deps=!deps.length&&callback.length?["require","exports","module"]:deps;for(i=0;i<deps.length;i+=1)if("require"===(depName=(map=makeMap(deps[i],relParts)).f))args[i]=handlers.require(name);else if("exports"===depName){args[i]=handlers.exports(name);usingExports=!0}else if("module"===depName)cjsModule=args[i]=handlers.module(name);else if(hasProp(defined,depName)||hasProp(waiting,depName)||hasProp(defining,depName))args[i]=callDep(depName);else{if(!map.p)throw new Error(name+" missing "+depName);map.p.load(map.n,makeRequire(relName,!0),makeLoad(depName),{});args[i]=defined[depName]}ret=callback?callback.apply(defined[name],args):void 0;name&&(cjsModule&&cjsModule.exports!==undef&&cjsModule.exports!==defined[name]?defined[name]=cjsModule.exports:ret===undef&&usingExports||(defined[name]=ret))}else name&&(defined[name]=callback)};requirejs=require=req=function(deps,callback,relName,forceSync,alt){if("string"==typeof deps)return handlers[deps]?handlers[deps](callback):callDep(makeMap(deps,makeRelParts(callback)).f);if(!deps.splice){(config=deps).deps&&req(config.deps,config.callback);if(!callback)return;if(callback.splice){deps=callback;callback=relName;relName=null}else deps=undef}callback=callback||function(){};if("function"==typeof relName){relName=forceSync;forceSync=alt}forceSync?main(undef,deps,callback,relName):setTimeout((function(){main(undef,deps,callback,relName)}),4);return req};req.config=function(cfg){return req(cfg)};requirejs._defined=defined;(define=function(name,deps,callback){if("string"!=typeof name)throw new Error("See almond README: incorrect module build, no module name");if(!deps.splice){callback=deps;deps=[]}hasProp(defined,name)||hasProp(waiting,name)||(waiting[name]=[name,deps,callback])}).amd={jQuery:!0}}();define("shared/viewmodels/init",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.PageType=void 0;!function(PageType){PageType[PageType.Device=0]="Device";PageType[PageType.Acquisition=1]="Acquisition";PageType[PageType.DSP=2]="DSP";PageType[PageType.TrainingKeras=3]="TrainingKeras";PageType[PageType.FeatureGeneration=4]="FeatureGeneration";PageType[PageType.Classification=5]="Classification";PageType[PageType.Deployment=6]="Deployment";PageType[PageType.SelectProject=7]="SelectProject";PageType[PageType.ProjectDashboard=8]="ProjectDashboard";PageType[PageType.CreateImpulse=9]="CreateImpulse";PageType[PageType.TrainingAnomaly=10]="TrainingAnomaly";PageType[PageType.Retrain=11]="Retrain";PageType[PageType.ModelValidation=12]="ModelValidation";PageType[PageType.SignupSuccessful=13]="SignupSuccessful";PageType[PageType.AccountActivation=14]="AccountActivation";PageType[PageType.PasswordResetSuccessful=15]="PasswordResetSuccessful";PageType[PageType.Profile=16]="Profile";PageType[PageType.Keys=17]="Keys";PageType[PageType.Login=18]="Login";PageType[PageType.Signup=19]="Signup";PageType[PageType.ForgotPassword=20]="ForgotPassword";PageType[PageType.ForgotPasswordSuccessful=21]="ForgotPasswordSuccessful";PageType[PageType.ResetPassword=22]="ResetPassword";PageType[PageType.Export=23]="Export";PageType[PageType.Upload=24]="Upload";PageType[PageType.Versions=25]="Versions";PageType[PageType.Restore=26]="Restore";PageType[PageType.Evaluate=27]="Evaluate";PageType[PageType.Tuner=28]="Tuner";PageType[PageType.LabelObjectDetection=29]="LabelObjectDetection";PageType[PageType.SelectProjectThirdParty=30]="SelectProjectThirdParty";PageType[PageType.ApplicationTesting=31]="ApplicationTesting";PageType[PageType.OrganizationDashboard=90]="OrganizationDashboard";PageType[PageType.OrganizationUsers=91]="OrganizationUsers";PageType[PageType.OrganizationKeys=92]="OrganizationKeys";PageType[PageType.OrganizationBuckets=93]="OrganizationBuckets";PageType[PageType.OrganizationData=94]="OrganizationData";PageType[PageType.OrganizationCreateProject=95]="OrganizationCreateProject";PageType[PageType.OrganizationTransformation=96]="OrganizationTransformation";PageType[PageType.OrganizationCreateProjectDetails=97]="OrganizationCreateProjectDetails";PageType[PageType.OrganizationCreateProjectList=98]="OrganizationCreateProjectList";PageType[PageType.OrganizationProjects=99]="OrganizationProjects";PageType[PageType.OrganizationDeploy=100]="OrganizationDeploy";PageType[PageType.OrganizationPortals=101]="OrganizationPortals";PageType[PageType.OrganizationDataPipelines=102]="OrganizationDataPipelines";PageType[PageType.OrganizationDsp=103]="OrganizationDsp";PageType[PageType.OrganizationTransferLearning=104]="OrganizationTransferLearning";PageType[PageType.UploadPortal=200]="UploadPortal"}(exports.PageType||(exports.PageType={}))}));define("client/api-definition/model/ActivateUserByThirdPartyActivationCodeRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ActivateUserRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/AddApiKeyRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.AddApiKeyRequestRoleEnumValues=void 0;exports.AddApiKeyRequestRoleEnumValues=["admin","readonly","ingestiononly"]}));define("client/api-definition/model/AddCollaboratorRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/AddHmacKeyRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/AddMemberRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.AddMemberRequestRoleEnumValues=void 0;exports.AddMemberRequestRoleEnumValues=["admin","member","guest"]}));define("client/api-definition/model/AddNoteRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/AddOrganizationApiKeyRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.AddOrganizationApiKeyRequestRoleEnumValues=void 0;exports.AddOrganizationApiKeyRequestRoleEnumValues=["admin","member"]}));define("client/api-definition/model/AddOrganizationBucketRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/AddOrganizationDeployBlockRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/AddOrganizationDeployBlockResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/AddOrganizationDspBlockRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/AddOrganizationDspBlockResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/AddOrganizationTransferLearningBlockRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.AddOrganizationTransferLearningBlockRequestObjectDetectionLastLayerEnumValues=exports.AddOrganizationTransferLearningBlockRequestOperatesOnEnumValues=void 0;exports.AddOrganizationTransferLearningBlockRequestOperatesOnEnumValues=["object_detection","audio","image","other"];exports.AddOrganizationTransferLearningBlockRequestObjectDetectionLastLayerEnumValues=["mobilenet-ssd","fomo","yolov5"]}));define("client/api-definition/model/AddOrganizationTransferLearningBlockResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/AddOrganizationTransformationBlockRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.AddOrganizationTransformationBlockRequestOperatesOnEnumValues=void 0;exports.AddOrganizationTransformationBlockRequestOperatesOnEnumValues=["file","dataitem","standalone"]}));define("client/api-definition/model/AddOrganizationTransformationBlockResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/AddOrganizationTransformationBlockResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/AnomalyModelMetadata",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/AnomalyModelMetadataClusters",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/AnomalyModelMetadataResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/AnomalyResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/AnomalyResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/AnomalyResponseAllOfAxes",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/AnomalyTrainedFeaturesResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/AnomalyTrainedFeaturesResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/AnomalyTrainedFeaturesResponseAllOfData",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ApplicationTestingDetection",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ApplicationTestingFalsePositive",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.ApplicationTestingFalsePositiveTypeEnumValues=void 0;exports.ApplicationTestingFalsePositiveTypeEnumValues=["incorrect","duplicate","spurious"]}));define("client/api-definition/model/ApplicationTestingGroundTruth",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.ApplicationTestingGroundTruthTypeEnumValues=void 0;exports.ApplicationTestingGroundTruthTypeEnumValues=["sample","noise","combined_noise"]}));define("client/api-definition/model/ApplicationTestingGroundTruthSamples",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ApplicationTestingParameterSet",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ApplicationTestingParameterSetAggregateStats",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ApplicationTestingParameterSetStats",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ApplicationTestingRawDetection",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/AugmentationPolicyImageEnum",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.AugmentationPolicyImageEnumValues=void 0;exports.AugmentationPolicyImageEnumValues=["none","all"]}));define("client/api-definition/model/AugmentationPolicySpectrogram",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.AugmentationPolicySpectrogramGaussianNoiseEnumValues=exports.AugmentationPolicySpectrogramTimeMaskingEnumValues=exports.AugmentationPolicySpectrogramFreqMaskingEnumValues=void 0;exports.AugmentationPolicySpectrogramFreqMaskingEnumValues=["none","low","high"];exports.AugmentationPolicySpectrogramTimeMaskingEnumValues=["none","low","high"];exports.AugmentationPolicySpectrogramGaussianNoiseEnumValues=["none","low","high"]}));define("client/api-definition/model/AuthorizeThirdPartyRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/BoundingBox",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/BuildOnDeviceModelRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.BuildOnDeviceModelRequestEngineEnumValues=void 0;exports.BuildOnDeviceModelRequestEngineEnumValues=["tflite","tflite-eon","tensorrt"]}));define("client/api-definition/model/BuildOrganizationOnDeviceModelRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.BuildOrganizationOnDeviceModelRequestEngineEnumValues=void 0;exports.BuildOrganizationOnDeviceModelRequestEngineEnumValues=["tflite","tflite-eon","tensorrt"]}));define("client/api-definition/model/ChangePasswordRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ClassifyJobResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ClassifyJobResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ClassifyJobResponseAllOfResult",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ClassifySampleResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ClassifySampleResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ClassifySampleResponseClassification",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ClassifySampleResponseClassificationDetails",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ConvertUserRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CountSamplesResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CountSamplesResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreateBlockVersionResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreateBlockVersionResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreateDeviceRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreateEvaluationUserResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreateEvaluationUserResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreateNoteResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreateNoteResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreateOrganizationPortalRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreateOrganizationPortalResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreateOrganizationPortalResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreateOrganizationRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreateOrganizationResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreateOrganizationResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreatePipelineResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreateProjectRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreateProjectResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreateProjectResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreateSignedUploadLinkRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreateSignedUploadLinkResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreateSignedUploadLinkResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreateThirdPartyAuthRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreateThirdPartyAuthResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreateThirdPartyAuthResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreateUserRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreateUserResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreateUserResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreateUserThirdPartyRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CreateUserThirdPartyResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.CreateUserThirdPartyResponseStatusEnumValues=void 0;exports.CreateUserThirdPartyResponseStatusEnumValues=["userWasCreated","userNotManagedByThirdParty","userAlreadyExists"]}));define("client/api-definition/model/CreateUserThirdPartyResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.CreateUserThirdPartyResponseAllOfStatusEnumValues=void 0;exports.CreateUserThirdPartyResponseAllOfStatusEnumValues=["userWasCreated","userNotManagedByThirdParty","userAlreadyExists"]}));define("client/api-definition/model/CropSampleRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CropSampleResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/CropSampleResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DSPBlock",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DSPConfigRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DSPConfigResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DSPConfigResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DSPGroup",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DSPGroupItem",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DSPGroupItemSelectOptions",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DSPInfo",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DSPInfoFeatures",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DSPMetadata",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DSPMetadataIncludedSamples",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DSPMetadataOutputConfig",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.DSPMetadataOutputConfigTypeEnumValues=void 0;exports.DSPMetadataOutputConfigTypeEnumValues=["image","spectrogram","flat"]}));define("client/api-definition/model/DSPMetadataOutputConfigShape",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DSPMetadataResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DependencyData",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DeploymentTarget",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.DeploymentTargetUiSectionEnumValues=void 0;exports.DeploymentTargetUiSectionEnumValues=["library","firmware","mobile"]}));define("client/api-definition/model/DeploymentTargetBadge",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DeploymentTargetsResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DeploymentTargetsResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DevelopmentKeys",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DevelopmentKeysResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/Device",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DeviceNameResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DeviceNameResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DeviceSensors",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/Download",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DspFeatureImportanceResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DspFeatureImportanceResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DspFeatureImportanceResponseAllOfFeatures",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DspFeatureImportanceResponseAllOfLabels",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DspFeatureLabelsResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DspFeatureLabelsResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DspRunGraph",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DspRunRequestWithoutFeatures",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DspRunRequestWithoutFeaturesReadOnly",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DspRunResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DspRunResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DspRunResponseAllOfPerformance",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DspRunResponseWithSample",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DspRunResponseWithSampleAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DspSampleFeaturesResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DspSampleFeaturesResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DspSampleFeaturesResponseAllOfData",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DspTrainedFeaturesResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DspTrainedFeaturesResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DspTrainedFeaturesResponseAllOfData",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/DspTrainedFeaturesResponseAllOfSample",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/EditSampleLabelRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/EvaluateJobResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/EvaluateJobResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/EvaluateResultValue",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ExportGetUrlResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ExportOriginalDataRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ExportWavDataRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/FindSegmentSampleRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/FindSegmentSampleResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/FindSegmentSampleResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/FindSyntiantPosteriorRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.FindSyntiantPosteriorRequestReferenceSetEnumValues=void 0;exports.FindSyntiantPosteriorRequestReferenceSetEnumValues=["600_seconds","full","custom","no_calibration"]}));define("client/api-definition/model/FindUserResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/FindUserResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/FindUserResponseAllOfUsers",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GenerateFeaturesRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GenericApiResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetAllThirdPartyAuthResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetAllThirdPartyAuthResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetApplicationTestingGroundTruthResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetApplicationTestingGroundTruthResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetApplicationTestingParameterSetsResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetApplicationTestingParameterSetsResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetApplicationTestingRawResultResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetApplicationTestingRawResultResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetApplicationTestingStatusResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetApplicationTestingStatusResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetDeploymentResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetDeploymentResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetDeviceResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetDeviceResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetImpulseBlocksResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetImpulseBlocksResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetImpulseResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetImpulseResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetJWTTokenRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.GetJWTTokenRequestSsoTypeEnumValues=void 0;exports.GetJWTTokenRequestSsoTypeEnumValues=["browser","cli"]}));define("client/api-definition/model/GetJWTTokenResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetJWTTokenResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetJobResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetJobResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetNotesResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetNotesResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetOrganizationDataItemResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetOrganizationDataItemResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetOrganizationPipelinesResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetOrganizationPipelinesResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetOrganizationPortalResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetOrganizationPortalResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetSampleResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetSyntiantPosteriorResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetSyntiantPosteriorResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetThirdPartyAuthResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetThirdPartyAuthResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetUserResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetUserResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/GetUserResponseAllOfOrganizations",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/Impulse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ImpulseBlockVersion",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.ImpulseBlockVersionCropAnchorEnumValues=exports.ImpulseBlockVersionResizeMethodEnumValues=exports.ImpulseBlockVersionResizeModeEnumValues=void 0;exports.ImpulseBlockVersionResizeModeEnumValues=["squash","fit-short","fit-long","crop"];exports.ImpulseBlockVersionResizeMethodEnumValues=["lanczos3","nearest"];exports.ImpulseBlockVersionCropAnchorEnumValues=["top-left","top-center","top-right","middle-left","middle-center","middle-right","bottom-left","bottom-center","bottom-right"]}));define("client/api-definition/model/ImpulseDspBlock",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ImpulseDspBlockOrganization",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ImpulseInputBlock",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.ImpulseInputBlockCropAnchorEnumValues=exports.ImpulseInputBlockResizeMethodEnumValues=exports.ImpulseInputBlockResizeModeEnumValues=exports.ImpulseInputBlockTypeEnumValues=void 0;exports.ImpulseInputBlockTypeEnumValues=["time-series","image","video"];exports.ImpulseInputBlockResizeModeEnumValues=["squash","fit-short","fit-long","crop"];exports.ImpulseInputBlockResizeMethodEnumValues=["lanczos3","nearest"];exports.ImpulseInputBlockCropAnchorEnumValues=["top-left","top-center","top-right","middle-left","middle-center","middle-right","bottom-left","bottom-center","bottom-right"]}));define("client/api-definition/model/ImpulseLearnBlock",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/InputBlock",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.InputBlockTypeEnumValues=void 0;exports.InputBlockTypeEnumValues=["time-series","image","video"]}));define("client/api-definition/model/InviteMemberRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.InviteMemberRequestRoleEnumValues=void 0;exports.InviteMemberRequestRoleEnumValues=["admin","member","guest"]}));define("client/api-definition/model/Job",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/JobSummaryResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/JobSummaryResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/JobSummaryResponseAllOfSummary",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/KerasModelLayer",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/KerasModelLayerInput",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/KerasModelLayerOutput",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/KerasModelMetadata",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.KerasModelMetadataModeEnumValues=void 0;exports.KerasModelMetadataModeEnumValues=["classification","regression","object-detection","segmentation"]}));define("client/api-definition/model/KerasModelMetadataAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.KerasModelMetadataAllOfModeEnumValues=void 0;exports.KerasModelMetadataAllOfModeEnumValues=["classification","regression","object-detection","segmentation"]}));define("client/api-definition/model/KerasModelMetadataMetrics",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/KerasModelMetadataMetricsOnDevicePerformance",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/KerasModelMetadataMetricsTflite",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/KerasModelTypeEnum",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.KerasModelTypeEnumValues=void 0;exports.KerasModelTypeEnumValues=["int8","float32","requiresRetrain"]}));define("client/api-definition/model/KerasResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.KerasResponseModeEnumValues=void 0;exports.KerasResponseModeEnumValues=["visual","expert"]}));define("client/api-definition/model/KerasResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.KerasResponseAllOfModeEnumValues=void 0;exports.KerasResponseAllOfModeEnumValues=["visual","expert"]}));define("client/api-definition/model/KerasResponseAllOfTransferLearningModels",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/KerasVisualLayer",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/KerasVisualLayerType",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.KerasVisualLayerTypeValues=void 0;exports.KerasVisualLayerTypeValues=["dense","conv1d","conv2d","reshape","flatten","dropout","batchNormalization","transfer_mobilenetv2_a35","transfer_mobilenetv2_a1","transfer_mobilenetv2_a05","transfer_mobilenetv2_160_a1","transfer_mobilenetv2_160_a75","transfer_mobilenetv2_160_a5","transfer_mobilenetv2_160_a35","transfer_mobilenetv1_a25_d100","transfer_mobilenetv1_a2_d100","transfer_mobilenetv1_a1_d100","transfer_kws_mobilenetv1_a1_d100","transfer_kws_mobilenetv2_a35_d100","object_ssd_mobilenet_v2_fpnlite_320x320","fomo_mobilenet_v2_a01","transfer_organization"]}));define("client/api-definition/model/LearnBlock",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/LearnBlockType",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.LearnBlockTypeValues=void 0;exports.LearnBlockTypeValues=["anomaly","keras","keras-transfer-image","keras-transfer-kws","keras-object-detection","keras-regression"]}));define("client/api-definition/model/ListApiKeysResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListApiKeysResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListApiKeysResponseAllOfApiKeys",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.ListApiKeysResponseAllOfApiKeysRoleEnumValues=void 0;exports.ListApiKeysResponseAllOfApiKeysRoleEnumValues=["admin","readonly","ingestiononly"]}));define("client/api-definition/model/ListDevicesResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListDevicesResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListEmailResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListEmailResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListEmailResponseAllOfEmails",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListHmacKeysResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListHmacKeysResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListHmacKeysResponseAllOfHmacKeys",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListJobsResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListJobsResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListModelsResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListModelsResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationApiKeysResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationApiKeysResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationApiKeysResponseAllOfApiKeys",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.ListOrganizationApiKeysResponseAllOfApiKeysRoleEnumValues=void 0;exports.ListOrganizationApiKeysResponseAllOfApiKeysRoleEnumValues=["admin","member"]}));define("client/api-definition/model/ListOrganizationBucketsResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationBucketsResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationBucketsResponseAllOfBuckets",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationBucketsUserResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationBucketsUserResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationBucketsUserResponseAllOfBuckets",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationDataResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationDataResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationDataResponseAllOfData",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationDeployBlocksResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationDeployBlocksResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationDspBlocksResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationDspBlocksResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationFilesResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationFilesResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationPipelinesResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationPipelinesResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationPortalsResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationPortalsResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationPortalsResponseAllOfPortals",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationProjectsResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationProjectsResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationTransferLearningBlocksResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationTransferLearningBlocksResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationTransformationBlocksResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationTransformationBlocksResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationsResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListOrganizationsResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListPortalFilesInFolderRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListPortalFilesInFolderResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListPortalFilesInFolderResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListProjects",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListProjectsResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListPublicVersionsResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListPublicVersionsResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListPublicVersionsResponseAllOfVersions",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListSamplesResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListSamplesResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListVersionsResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListVersionsResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListVersionsResponseAllOfBucket",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ListVersionsResponseAllOfVersions",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/LogStdoutResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/LogStdoutResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/LogStdoutResponseAllOfStdout",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/LoginResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/LoginResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ModelVariantStats",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/MoveRawDataRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.MoveRawDataRequestNewCategoryEnumValues=void 0;exports.MoveRawDataRequestNewCategoryEnumValues=["training","testing","anomaly"]}));define("client/api-definition/model/Note",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ObjectDetectionLabelQueueResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ObjectDetectionLabelQueueResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OptimizeConfig",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.OptimizeConfigTuningAlgorithmEnumValues=exports.OptimizeConfigDatasetCategoryEnumValues=void 0;exports.OptimizeConfigDatasetCategoryEnumValues=["speech_keyword","speech_continuous","audio_event","audio_continuous","transfer_learning","motion_event","motion_continuous","audio_syntiant"];exports.OptimizeConfigTuningAlgorithmEnumValues=["random","hyperband","bayesian"]}));define("client/api-definition/model/OptimizeConfigTargetDevice",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OptimizeStateResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.OptimizeStateResponseProjectDataTypeEnumValues=void 0;exports.OptimizeStateResponseProjectDataTypeEnumValues=["audio","image","motion","other"]}));define("client/api-definition/model/OptimizeStateResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.OptimizeStateResponseAllOfProjectDataTypeEnumValues=void 0;exports.OptimizeStateResponseAllOfProjectDataTypeEnumValues=["audio","image","motion","other"]}));define("client/api-definition/model/OptimizeStateResponseAllOfStatus",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.OptimizeStateResponseAllOfStatusStatusEnumValues=void 0;exports.OptimizeStateResponseAllOfStatusStatusEnumValues=["ready","running","completed"]}));define("client/api-definition/model/OptimizeStateResponseAllOfWorkers",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.OptimizeStateResponseAllOfWorkersStatusEnumValues=void 0;exports.OptimizeStateResponseAllOfWorkersStatusEnumValues=["pending","ready","busy"]}));define("client/api-definition/model/Organization",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OrganizationAddDataFileRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OrganizationAddDataFolderRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OrganizationAddDataFolderResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OrganizationAddDataFolderResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OrganizationAddDataItemRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OrganizationBulkMetadataRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OrganizationCreateProject",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationCreateProjectCategoryEnumValues=exports.OrganizationCreateProjectUploadJobStatusEnumValues=exports.OrganizationCreateProjectTransformJobStatusEnumValues=exports.OrganizationCreateProjectStatusEnumValues=exports.OrganizationCreateProjectUploadTypeEnumValues=void 0;exports.OrganizationCreateProjectUploadTypeEnumValues=["dataset","project"];exports.OrganizationCreateProjectStatusEnumValues=["waiting","created","started","finished","failed"];exports.OrganizationCreateProjectTransformJobStatusEnumValues=["waiting","created","started","finished","failed"];exports.OrganizationCreateProjectUploadJobStatusEnumValues=["waiting","created","started","finished","failed"];exports.OrganizationCreateProjectCategoryEnumValues=["training","testing","split"]}));define("client/api-definition/model/OrganizationCreateProjectFiles",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationCreateProjectFilesTransformationJobStatusEnumValues=void 0;exports.OrganizationCreateProjectFilesTransformationJobStatusEnumValues=["waiting","created","started","finished","failed"]}));define("client/api-definition/model/OrganizationCreateProjectRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationCreateProjectRequestCategoryEnumValues=exports.OrganizationCreateProjectRequestUploadTypeEnumValues=void 0;exports.OrganizationCreateProjectRequestUploadTypeEnumValues=["project","dataset"];exports.OrganizationCreateProjectRequestCategoryEnumValues=["training","testing","split"]}));define("client/api-definition/model/OrganizationCreateProjectResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OrganizationCreateProjectResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OrganizationCreateProjectStatusResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OrganizationCreateProjectStatusResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OrganizationCreateProjectTransformationSummary",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OrganizationDataItem",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OrganizationDataItemFiles",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OrganizationDeployBlock",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OrganizationDspBlock",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OrganizationGetCreateProjectsResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OrganizationGetCreateProjectsResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OrganizationGetCreateProjectsResponseAllOfJobs",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationGetCreateProjectsResponseAllOfJobsUploadJobStatusEnumValues=exports.OrganizationGetCreateProjectsResponseAllOfJobsTransformJobStatusEnumValues=exports.OrganizationGetCreateProjectsResponseAllOfJobsUploadTypeEnumValues=void 0;exports.OrganizationGetCreateProjectsResponseAllOfJobsUploadTypeEnumValues=["dataset","project"];exports.OrganizationGetCreateProjectsResponseAllOfJobsTransformJobStatusEnumValues=["waiting","created","started","finished","failed"];exports.OrganizationGetCreateProjectsResponseAllOfJobsUploadJobStatusEnumValues=["waiting","created","started","finished","failed"]}));define("client/api-definition/model/OrganizationInfoResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OrganizationInfoResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OrganizationInfoResponseAllOfDatasets",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OrganizationInfoResponseAllOfDefaultComputeLimits",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OrganizationPipeline",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OrganizationPipelineFeedingIntoDataset",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OrganizationPipelineItemCount",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OrganizationPipelineRun",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OrganizationPipelineRunStep",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationPipelineRunStepCategoryEnumValues=exports.OrganizationPipelineRunStepUploadTypeEnumValues=void 0;exports.OrganizationPipelineRunStepUploadTypeEnumValues=["project","dataset"];exports.OrganizationPipelineRunStepCategoryEnumValues=["training","testing","split"]}));define("client/api-definition/model/OrganizationPipelineStep",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationPipelineStepCategoryEnumValues=exports.OrganizationPipelineStepUploadTypeEnumValues=void 0;exports.OrganizationPipelineStepUploadTypeEnumValues=["project","dataset"];exports.OrganizationPipelineStepCategoryEnumValues=["training","testing","split"]}));define("client/api-definition/model/OrganizationTransferLearningBlock",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationTransferLearningBlockObjectDetectionLastLayerEnumValues=exports.OrganizationTransferLearningBlockOperatesOnEnumValues=void 0;exports.OrganizationTransferLearningBlockOperatesOnEnumValues=["object_detection","audio","image","other"];exports.OrganizationTransferLearningBlockObjectDetectionLastLayerEnumValues=["mobilenet-ssd","fomo","yolov5"]}));define("client/api-definition/model/OrganizationTransformationBlock",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationTransformationBlockOperatesOnEnumValues=void 0;exports.OrganizationTransformationBlockOperatesOnEnumValues=["file","dataitem","standalone"]}));define("client/api-definition/model/OrganizationUpdatePipelineBody",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/OrganizationUser",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationUserRoleEnumValues=void 0;exports.OrganizationUserRoleEnumValues=["admin","member","guest"]}));define("client/api-definition/model/PortalFile",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/PortalInfoResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/Project",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.ProjectLabelingMethodEnumValues=void 0;exports.ProjectLabelingMethodEnumValues=["single_label","object_detection"]}));define("client/api-definition/model/ProjectDataAxesSummaryResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ProjectDataAxesSummaryResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ProjectDataIntervalResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ProjectDataIntervalResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ProjectDataSummary",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ProjectDownloadsResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ProjectDownloadsResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ProjectInfoResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ProjectInfoResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ProjectInfoResponseAllOfAcquisitionSettings",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ProjectInfoResponseAllOfComputeTime",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ProjectInfoResponseAllOfDataSummaryPerCategory",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ProjectInfoResponseAllOfDeploySettings",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.ProjectInfoResponseAllOfDeploySettingsSensorEnumValues=void 0;exports.ProjectInfoResponseAllOfDeploySettingsSensorEnumValues=["accelerometer","microphone","camera","positional","environmental","unknown"]}));define("client/api-definition/model/ProjectInfoResponseAllOfExperiments",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ProjectInfoResponseAllOfImpulse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ProjectInfoResponseAllOfLatencyDevices",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ProjectInfoResponseAllOfPerformance",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ProjectInfoResponseAllOfReadme",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ProjectInfoResponseAllOfShowGettingStartedWizard",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ProjectInfoResponseAllOfUrls",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ProjectVersionRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/RawSampleData",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/RawSamplePayload",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/RemoveCollaboratorRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/RemoveMemberRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/RenameDeviceRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/RenameSampleRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/RequestResetPasswordRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ResetPasswordRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/RestoreProjectFromPublicRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/RestoreProjectRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/RunOrganizationPipelineResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/RunOrganizationPipelineResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/Sample",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.SampleChartTypeEnumValues=exports.SampleBoundingBoxesTypeEnumValues=void 0;exports.SampleBoundingBoxesTypeEnumValues=["object_detection","constrained_object_detection"];exports.SampleChartTypeEnumValues=["chart","image","video"]}));define("client/api-definition/model/SampleBoundingBoxesRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ScoreTrialResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ScoreTrialResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/SegmentSampleRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/SegmentSampleRequestSegments",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/Sensor",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/SetAnomalyParameterRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/SetKerasParameterRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.SetKerasParameterRequestModeEnumValues=void 0;exports.SetKerasParameterRequestModeEnumValues=["expert","visual"]}));define("client/api-definition/model/SetMemberDatasetsRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/SetMemberRoleRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.SetMemberRoleRequestRoleEnumValues=void 0;exports.SetMemberRoleRequestRoleEnumValues=["admin","member","guest"]}));define("client/api-definition/model/SetOrganizationDataDatasetRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/SetProjectComputeTimeRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/SetProjectDspFileSizeRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/SetSyntiantPosteriorRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/SocketTokenResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/SocketTokenResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/SocketTokenResponseAllOfToken",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/StartApplicationTestingRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/StartJobResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/StartJobResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/StartSamplingRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.StartSamplingRequestCategoryEnumValues=void 0;exports.StartSamplingRequestCategoryEnumValues=["training","testing","anomaly"]}));define("client/api-definition/model/StartSamplingResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/StartSamplingResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/StartTrainingRequestAnomaly",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/StoreSegmentLengthRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/StructuredClassifyResult",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/ThirdPartyAuth",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/TrackObjectsRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/TrackObjectsResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/TrackObjectsResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/TransferOwnershipOrganizationRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/TransformationBlockAdditionalMountPoint",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.TransformationBlockAdditionalMountPointTypeEnumValues=void 0;exports.TransformationBlockAdditionalMountPointTypeEnumValues=["bucket","portal"]}));define("client/api-definition/model/TunerTrial",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/TunerTrialBlocks",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/TunerTrialKerasTunerTrial",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/TunerTrialKerasTunerTrialHyperparameters",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/TunerTrialKerasTunerTrialHyperparametersSpace",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/TunerTrialKerasTunerTrialHyperparametersValues",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/TunerTrialKerasTunerTrialScore",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/TunerTrialMetadata",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/UpdateNoteRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/UpdateNoteResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/UpdateOrganizationAddCollaboratorRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/UpdateOrganizationBucketRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/UpdateOrganizationCreateEmptyProjectRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/UpdateOrganizationCreateProjectRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/UpdateOrganizationDataItemRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/UpdateOrganizationDeployBlockRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/UpdateOrganizationDspBlockRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/UpdateOrganizationPortalResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/UpdateOrganizationPortalResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/UpdateOrganizationRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/UpdateOrganizationTransferLearningBlockRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.UpdateOrganizationTransferLearningBlockRequestObjectDetectionLastLayerEnumValues=exports.UpdateOrganizationTransferLearningBlockRequestOperatesOnEnumValues=void 0;exports.UpdateOrganizationTransferLearningBlockRequestOperatesOnEnumValues=["object_detection","audio","image","other"];exports.UpdateOrganizationTransferLearningBlockRequestObjectDetectionLastLayerEnumValues=["mobilenet-ssd","fomo","yolov5"]}));define("client/api-definition/model/UpdateOrganizationTransformationBlockRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.UpdateOrganizationTransformationBlockRequestOperatesOnEnumValues=void 0;exports.UpdateOrganizationTransformationBlockRequestOperatesOnEnumValues=["file","dataitem","standalone"]}));define("client/api-definition/model/UpdateProjectRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.UpdateProjectRequestLabelingMethodEnumValues=void 0;exports.UpdateProjectRequestLabelingMethodEnumValues=["single_label","object_detection"]}));define("client/api-definition/model/UpdateThirdPartyAuthRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/UpdateUserRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/UpdateVersionRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/UploadCustomBlockRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.UploadCustomBlockRequestTypeEnumValues=void 0;exports.UploadCustomBlockRequestTypeEnumValues=["transform","deploy","dsp","transferLearning"]}));define("client/api-definition/model/UploadKerasFilesRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/UploadLogoRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/UploadReadmeImageRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/UploadReadmeImageResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/UploadUserPhotoRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/UploadUserPhotoResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/UploadUserPhotoResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/User",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/UserByThirdPartyActivationRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/VerifyDspBlockUrlRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/VerifyDspBlockUrlResponse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/VerifyDspBlockUrlResponseAllOf",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/VerifyDspBlockUrlResponseAllOfBlock",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/VerifyOrganizationBucketRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/VerifyResetPasswordRequest",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/api-definition/model/models",["require","exports","client/api-definition/model/ActivateUserByThirdPartyActivationCodeRequest","client/api-definition/model/ActivateUserRequest","client/api-definition/model/AddApiKeyRequest","client/api-definition/model/AddCollaboratorRequest","client/api-definition/model/AddHmacKeyRequest","client/api-definition/model/AddMemberRequest","client/api-definition/model/AddNoteRequest","client/api-definition/model/AddOrganizationApiKeyRequest","client/api-definition/model/AddOrganizationBucketRequest","client/api-definition/model/AddOrganizationDeployBlockRequest","client/api-definition/model/AddOrganizationDeployBlockResponse","client/api-definition/model/AddOrganizationDspBlockRequest","client/api-definition/model/AddOrganizationDspBlockResponse","client/api-definition/model/AddOrganizationTransferLearningBlockRequest","client/api-definition/model/AddOrganizationTransferLearningBlockResponse","client/api-definition/model/AddOrganizationTransformationBlockRequest","client/api-definition/model/AddOrganizationTransformationBlockResponse","client/api-definition/model/AddOrganizationTransformationBlockResponseAllOf","client/api-definition/model/AnomalyModelMetadata","client/api-definition/model/AnomalyModelMetadataClusters","client/api-definition/model/AnomalyModelMetadataResponse","client/api-definition/model/AnomalyResponse","client/api-definition/model/AnomalyResponseAllOf","client/api-definition/model/AnomalyResponseAllOfAxes","client/api-definition/model/AnomalyTrainedFeaturesResponse","client/api-definition/model/AnomalyTrainedFeaturesResponseAllOf","client/api-definition/model/AnomalyTrainedFeaturesResponseAllOfData","client/api-definition/model/ApplicationTestingDetection","client/api-definition/model/ApplicationTestingFalsePositive","client/api-definition/model/ApplicationTestingGroundTruth","client/api-definition/model/ApplicationTestingGroundTruthSamples","client/api-definition/model/ApplicationTestingParameterSet","client/api-definition/model/ApplicationTestingParameterSetAggregateStats","client/api-definition/model/ApplicationTestingParameterSetStats","client/api-definition/model/ApplicationTestingRawDetection","client/api-definition/model/AugmentationPolicyImageEnum","client/api-definition/model/AugmentationPolicySpectrogram","client/api-definition/model/AuthorizeThirdPartyRequest","client/api-definition/model/BoundingBox","client/api-definition/model/BuildOnDeviceModelRequest","client/api-definition/model/BuildOrganizationOnDeviceModelRequest","client/api-definition/model/ChangePasswordRequest","client/api-definition/model/ClassifyJobResponse","client/api-definition/model/ClassifyJobResponseAllOf","client/api-definition/model/ClassifyJobResponseAllOfResult","client/api-definition/model/ClassifySampleResponse","client/api-definition/model/ClassifySampleResponseAllOf","client/api-definition/model/ClassifySampleResponseClassification","client/api-definition/model/ClassifySampleResponseClassificationDetails","client/api-definition/model/ConvertUserRequest","client/api-definition/model/CountSamplesResponse","client/api-definition/model/CountSamplesResponseAllOf","client/api-definition/model/CreateBlockVersionResponse","client/api-definition/model/CreateBlockVersionResponseAllOf","client/api-definition/model/CreateDeviceRequest","client/api-definition/model/CreateEvaluationUserResponse","client/api-definition/model/CreateEvaluationUserResponseAllOf","client/api-definition/model/CreateNoteResponse","client/api-definition/model/CreateNoteResponseAllOf","client/api-definition/model/CreateOrganizationPortalRequest","client/api-definition/model/CreateOrganizationPortalResponse","client/api-definition/model/CreateOrganizationPortalResponseAllOf","client/api-definition/model/CreateOrganizationRequest","client/api-definition/model/CreateOrganizationResponse","client/api-definition/model/CreateOrganizationResponseAllOf","client/api-definition/model/CreatePipelineResponse","client/api-definition/model/CreateProjectRequest","client/api-definition/model/CreateProjectResponse","client/api-definition/model/CreateProjectResponseAllOf","client/api-definition/model/CreateSignedUploadLinkRequest","client/api-definition/model/CreateSignedUploadLinkResponse","client/api-definition/model/CreateSignedUploadLinkResponseAllOf","client/api-definition/model/CreateThirdPartyAuthRequest","client/api-definition/model/CreateThirdPartyAuthResponse","client/api-definition/model/CreateThirdPartyAuthResponseAllOf","client/api-definition/model/CreateUserRequest","client/api-definition/model/CreateUserResponse","client/api-definition/model/CreateUserResponseAllOf","client/api-definition/model/CreateUserThirdPartyRequest","client/api-definition/model/CreateUserThirdPartyResponse","client/api-definition/model/CreateUserThirdPartyResponseAllOf","client/api-definition/model/CropSampleRequest","client/api-definition/model/CropSampleResponse","client/api-definition/model/CropSampleResponseAllOf","client/api-definition/model/DSPBlock","client/api-definition/model/DSPConfigRequest","client/api-definition/model/DSPConfigResponse","client/api-definition/model/DSPConfigResponseAllOf","client/api-definition/model/DSPGroup","client/api-definition/model/DSPGroupItem","client/api-definition/model/DSPGroupItemSelectOptions","client/api-definition/model/DSPInfo","client/api-definition/model/DSPInfoFeatures","client/api-definition/model/DSPMetadata","client/api-definition/model/DSPMetadataIncludedSamples","client/api-definition/model/DSPMetadataOutputConfig","client/api-definition/model/DSPMetadataOutputConfigShape","client/api-definition/model/DSPMetadataResponse","client/api-definition/model/DependencyData","client/api-definition/model/DeploymentTarget","client/api-definition/model/DeploymentTargetBadge","client/api-definition/model/DeploymentTargetsResponse","client/api-definition/model/DeploymentTargetsResponseAllOf","client/api-definition/model/DevelopmentKeys","client/api-definition/model/DevelopmentKeysResponse","client/api-definition/model/Device","client/api-definition/model/DeviceNameResponse","client/api-definition/model/DeviceNameResponseAllOf","client/api-definition/model/DeviceSensors","client/api-definition/model/Download","client/api-definition/model/DspFeatureImportanceResponse","client/api-definition/model/DspFeatureImportanceResponseAllOf","client/api-definition/model/DspFeatureImportanceResponseAllOfFeatures","client/api-definition/model/DspFeatureImportanceResponseAllOfLabels","client/api-definition/model/DspFeatureLabelsResponse","client/api-definition/model/DspFeatureLabelsResponseAllOf","client/api-definition/model/DspRunGraph","client/api-definition/model/DspRunRequestWithoutFeatures","client/api-definition/model/DspRunRequestWithoutFeaturesReadOnly","client/api-definition/model/DspRunResponse","client/api-definition/model/DspRunResponseAllOf","client/api-definition/model/DspRunResponseAllOfPerformance","client/api-definition/model/DspRunResponseWithSample","client/api-definition/model/DspRunResponseWithSampleAllOf","client/api-definition/model/DspSampleFeaturesResponse","client/api-definition/model/DspSampleFeaturesResponseAllOf","client/api-definition/model/DspSampleFeaturesResponseAllOfData","client/api-definition/model/DspTrainedFeaturesResponse","client/api-definition/model/DspTrainedFeaturesResponseAllOf","client/api-definition/model/DspTrainedFeaturesResponseAllOfData","client/api-definition/model/DspTrainedFeaturesResponseAllOfSample","client/api-definition/model/EditSampleLabelRequest","client/api-definition/model/EvaluateJobResponse","client/api-definition/model/EvaluateJobResponseAllOf","client/api-definition/model/EvaluateResultValue","client/api-definition/model/ExportGetUrlResponse","client/api-definition/model/ExportOriginalDataRequest","client/api-definition/model/ExportWavDataRequest","client/api-definition/model/FindSegmentSampleRequest","client/api-definition/model/FindSegmentSampleResponse","client/api-definition/model/FindSegmentSampleResponseAllOf","client/api-definition/model/FindSyntiantPosteriorRequest","client/api-definition/model/FindUserResponse","client/api-definition/model/FindUserResponseAllOf","client/api-definition/model/FindUserResponseAllOfUsers","client/api-definition/model/GenerateFeaturesRequest","client/api-definition/model/GenericApiResponse","client/api-definition/model/GetAllThirdPartyAuthResponse","client/api-definition/model/GetAllThirdPartyAuthResponseAllOf","client/api-definition/model/GetApplicationTestingGroundTruthResponse","client/api-definition/model/GetApplicationTestingGroundTruthResponseAllOf","client/api-definition/model/GetApplicationTestingParameterSetsResponse","client/api-definition/model/GetApplicationTestingParameterSetsResponseAllOf","client/api-definition/model/GetApplicationTestingRawResultResponse","client/api-definition/model/GetApplicationTestingRawResultResponseAllOf","client/api-definition/model/GetApplicationTestingStatusResponse","client/api-definition/model/GetApplicationTestingStatusResponseAllOf","client/api-definition/model/GetDeploymentResponse","client/api-definition/model/GetDeploymentResponseAllOf","client/api-definition/model/GetDeviceResponse","client/api-definition/model/GetDeviceResponseAllOf","client/api-definition/model/GetImpulseBlocksResponse","client/api-definition/model/GetImpulseBlocksResponseAllOf","client/api-definition/model/GetImpulseResponse","client/api-definition/model/GetImpulseResponseAllOf","client/api-definition/model/GetJWTTokenRequest","client/api-definition/model/GetJWTTokenResponse","client/api-definition/model/GetJWTTokenResponseAllOf","client/api-definition/model/GetJobResponse","client/api-definition/model/GetJobResponseAllOf","client/api-definition/model/GetNotesResponse","client/api-definition/model/GetNotesResponseAllOf","client/api-definition/model/GetOrganizationDataItemResponse","client/api-definition/model/GetOrganizationDataItemResponseAllOf","client/api-definition/model/GetOrganizationPipelinesResponse","client/api-definition/model/GetOrganizationPipelinesResponseAllOf","client/api-definition/model/GetOrganizationPortalResponse","client/api-definition/model/GetOrganizationPortalResponseAllOf","client/api-definition/model/GetSampleResponse","client/api-definition/model/GetSyntiantPosteriorResponse","client/api-definition/model/GetSyntiantPosteriorResponseAllOf","client/api-definition/model/GetThirdPartyAuthResponse","client/api-definition/model/GetThirdPartyAuthResponseAllOf","client/api-definition/model/GetUserResponse","client/api-definition/model/GetUserResponseAllOf","client/api-definition/model/GetUserResponseAllOfOrganizations","client/api-definition/model/Impulse","client/api-definition/model/ImpulseBlockVersion","client/api-definition/model/ImpulseDspBlock","client/api-definition/model/ImpulseDspBlockOrganization","client/api-definition/model/ImpulseInputBlock","client/api-definition/model/ImpulseLearnBlock","client/api-definition/model/InputBlock","client/api-definition/model/InviteMemberRequest","client/api-definition/model/Job","client/api-definition/model/JobSummaryResponse","client/api-definition/model/JobSummaryResponseAllOf","client/api-definition/model/JobSummaryResponseAllOfSummary","client/api-definition/model/KerasModelLayer","client/api-definition/model/KerasModelLayerInput","client/api-definition/model/KerasModelLayerOutput","client/api-definition/model/KerasModelMetadata","client/api-definition/model/KerasModelMetadataAllOf","client/api-definition/model/KerasModelMetadataMetrics","client/api-definition/model/KerasModelMetadataMetricsOnDevicePerformance","client/api-definition/model/KerasModelMetadataMetricsTflite","client/api-definition/model/KerasModelTypeEnum","client/api-definition/model/KerasResponse","client/api-definition/model/KerasResponseAllOf","client/api-definition/model/KerasResponseAllOfTransferLearningModels","client/api-definition/model/KerasVisualLayer","client/api-definition/model/KerasVisualLayerType","client/api-definition/model/LearnBlock","client/api-definition/model/LearnBlockType","client/api-definition/model/ListApiKeysResponse","client/api-definition/model/ListApiKeysResponseAllOf","client/api-definition/model/ListApiKeysResponseAllOfApiKeys","client/api-definition/model/ListDevicesResponse","client/api-definition/model/ListDevicesResponseAllOf","client/api-definition/model/ListEmailResponse","client/api-definition/model/ListEmailResponseAllOf","client/api-definition/model/ListEmailResponseAllOfEmails","client/api-definition/model/ListHmacKeysResponse","client/api-definition/model/ListHmacKeysResponseAllOf","client/api-definition/model/ListHmacKeysResponseAllOfHmacKeys","client/api-definition/model/ListJobsResponse","client/api-definition/model/ListJobsResponseAllOf","client/api-definition/model/ListModelsResponse","client/api-definition/model/ListModelsResponseAllOf","client/api-definition/model/ListOrganizationApiKeysResponse","client/api-definition/model/ListOrganizationApiKeysResponseAllOf","client/api-definition/model/ListOrganizationApiKeysResponseAllOfApiKeys","client/api-definition/model/ListOrganizationBucketsResponse","client/api-definition/model/ListOrganizationBucketsResponseAllOf","client/api-definition/model/ListOrganizationBucketsResponseAllOfBuckets","client/api-definition/model/ListOrganizationBucketsUserResponse","client/api-definition/model/ListOrganizationBucketsUserResponseAllOf","client/api-definition/model/ListOrganizationBucketsUserResponseAllOfBuckets","client/api-definition/model/ListOrganizationDataResponse","client/api-definition/model/ListOrganizationDataResponseAllOf","client/api-definition/model/ListOrganizationDataResponseAllOfData","client/api-definition/model/ListOrganizationDeployBlocksResponse","client/api-definition/model/ListOrganizationDeployBlocksResponseAllOf","client/api-definition/model/ListOrganizationDspBlocksResponse","client/api-definition/model/ListOrganizationDspBlocksResponseAllOf","client/api-definition/model/ListOrganizationFilesResponse","client/api-definition/model/ListOrganizationFilesResponseAllOf","client/api-definition/model/ListOrganizationPipelinesResponse","client/api-definition/model/ListOrganizationPipelinesResponseAllOf","client/api-definition/model/ListOrganizationPortalsResponse","client/api-definition/model/ListOrganizationPortalsResponseAllOf","client/api-definition/model/ListOrganizationPortalsResponseAllOfPortals","client/api-definition/model/ListOrganizationProjectsResponse","client/api-definition/model/ListOrganizationProjectsResponseAllOf","client/api-definition/model/ListOrganizationTransferLearningBlocksResponse","client/api-definition/model/ListOrganizationTransferLearningBlocksResponseAllOf","client/api-definition/model/ListOrganizationTransformationBlocksResponse","client/api-definition/model/ListOrganizationTransformationBlocksResponseAllOf","client/api-definition/model/ListOrganizationsResponse","client/api-definition/model/ListOrganizationsResponseAllOf","client/api-definition/model/ListPortalFilesInFolderRequest","client/api-definition/model/ListPortalFilesInFolderResponse","client/api-definition/model/ListPortalFilesInFolderResponseAllOf","client/api-definition/model/ListProjects","client/api-definition/model/ListProjectsResponse","client/api-definition/model/ListPublicVersionsResponse","client/api-definition/model/ListPublicVersionsResponseAllOf","client/api-definition/model/ListPublicVersionsResponseAllOfVersions","client/api-definition/model/ListSamplesResponse","client/api-definition/model/ListSamplesResponseAllOf","client/api-definition/model/ListVersionsResponse","client/api-definition/model/ListVersionsResponseAllOf","client/api-definition/model/ListVersionsResponseAllOfBucket","client/api-definition/model/ListVersionsResponseAllOfVersions","client/api-definition/model/LogStdoutResponse","client/api-definition/model/LogStdoutResponseAllOf","client/api-definition/model/LogStdoutResponseAllOfStdout","client/api-definition/model/LoginResponse","client/api-definition/model/LoginResponseAllOf","client/api-definition/model/ModelVariantStats","client/api-definition/model/MoveRawDataRequest","client/api-definition/model/Note","client/api-definition/model/ObjectDetectionLabelQueueResponse","client/api-definition/model/ObjectDetectionLabelQueueResponseAllOf","client/api-definition/model/OptimizeConfig","client/api-definition/model/OptimizeConfigTargetDevice","client/api-definition/model/OptimizeStateResponse","client/api-definition/model/OptimizeStateResponseAllOf","client/api-definition/model/OptimizeStateResponseAllOfStatus","client/api-definition/model/OptimizeStateResponseAllOfWorkers","client/api-definition/model/Organization","client/api-definition/model/OrganizationAddDataFileRequest","client/api-definition/model/OrganizationAddDataFolderRequest","client/api-definition/model/OrganizationAddDataFolderResponse","client/api-definition/model/OrganizationAddDataFolderResponseAllOf","client/api-definition/model/OrganizationAddDataItemRequest","client/api-definition/model/OrganizationBulkMetadataRequest","client/api-definition/model/OrganizationCreateProject","client/api-definition/model/OrganizationCreateProjectFiles","client/api-definition/model/OrganizationCreateProjectRequest","client/api-definition/model/OrganizationCreateProjectResponse","client/api-definition/model/OrganizationCreateProjectResponseAllOf","client/api-definition/model/OrganizationCreateProjectStatusResponse","client/api-definition/model/OrganizationCreateProjectStatusResponseAllOf","client/api-definition/model/OrganizationCreateProjectTransformationSummary","client/api-definition/model/OrganizationDataItem","client/api-definition/model/OrganizationDataItemFiles","client/api-definition/model/OrganizationDeployBlock","client/api-definition/model/OrganizationDspBlock","client/api-definition/model/OrganizationGetCreateProjectsResponse","client/api-definition/model/OrganizationGetCreateProjectsResponseAllOf","client/api-definition/model/OrganizationGetCreateProjectsResponseAllOfJobs","client/api-definition/model/OrganizationInfoResponse","client/api-definition/model/OrganizationInfoResponseAllOf","client/api-definition/model/OrganizationInfoResponseAllOfDatasets","client/api-definition/model/OrganizationInfoResponseAllOfDefaultComputeLimits","client/api-definition/model/OrganizationPipeline","client/api-definition/model/OrganizationPipelineFeedingIntoDataset","client/api-definition/model/OrganizationPipelineItemCount","client/api-definition/model/OrganizationPipelineRun","client/api-definition/model/OrganizationPipelineRunStep","client/api-definition/model/OrganizationPipelineStep","client/api-definition/model/OrganizationTransferLearningBlock","client/api-definition/model/OrganizationTransformationBlock","client/api-definition/model/OrganizationUpdatePipelineBody","client/api-definition/model/OrganizationUser","client/api-definition/model/PortalFile","client/api-definition/model/PortalInfoResponse","client/api-definition/model/Project","client/api-definition/model/ProjectDataAxesSummaryResponse","client/api-definition/model/ProjectDataAxesSummaryResponseAllOf","client/api-definition/model/ProjectDataIntervalResponse","client/api-definition/model/ProjectDataIntervalResponseAllOf","client/api-definition/model/ProjectDataSummary","client/api-definition/model/ProjectDownloadsResponse","client/api-definition/model/ProjectDownloadsResponseAllOf","client/api-definition/model/ProjectInfoResponse","client/api-definition/model/ProjectInfoResponseAllOf","client/api-definition/model/ProjectInfoResponseAllOfAcquisitionSettings","client/api-definition/model/ProjectInfoResponseAllOfComputeTime","client/api-definition/model/ProjectInfoResponseAllOfDataSummaryPerCategory","client/api-definition/model/ProjectInfoResponseAllOfDeploySettings","client/api-definition/model/ProjectInfoResponseAllOfExperiments","client/api-definition/model/ProjectInfoResponseAllOfImpulse","client/api-definition/model/ProjectInfoResponseAllOfLatencyDevices","client/api-definition/model/ProjectInfoResponseAllOfPerformance","client/api-definition/model/ProjectInfoResponseAllOfReadme","client/api-definition/model/ProjectInfoResponseAllOfShowGettingStartedWizard","client/api-definition/model/ProjectInfoResponseAllOfUrls","client/api-definition/model/ProjectVersionRequest","client/api-definition/model/RawSampleData","client/api-definition/model/RawSamplePayload","client/api-definition/model/RemoveCollaboratorRequest","client/api-definition/model/RemoveMemberRequest","client/api-definition/model/RenameDeviceRequest","client/api-definition/model/RenameSampleRequest","client/api-definition/model/RequestResetPasswordRequest","client/api-definition/model/ResetPasswordRequest","client/api-definition/model/RestoreProjectFromPublicRequest","client/api-definition/model/RestoreProjectRequest","client/api-definition/model/RunOrganizationPipelineResponse","client/api-definition/model/RunOrganizationPipelineResponseAllOf","client/api-definition/model/Sample","client/api-definition/model/SampleBoundingBoxesRequest","client/api-definition/model/ScoreTrialResponse","client/api-definition/model/ScoreTrialResponseAllOf","client/api-definition/model/SegmentSampleRequest","client/api-definition/model/SegmentSampleRequestSegments","client/api-definition/model/Sensor","client/api-definition/model/SetAnomalyParameterRequest","client/api-definition/model/SetKerasParameterRequest","client/api-definition/model/SetMemberDatasetsRequest","client/api-definition/model/SetMemberRoleRequest","client/api-definition/model/SetOrganizationDataDatasetRequest","client/api-definition/model/SetProjectComputeTimeRequest","client/api-definition/model/SetProjectDspFileSizeRequest","client/api-definition/model/SetSyntiantPosteriorRequest","client/api-definition/model/SocketTokenResponse","client/api-definition/model/SocketTokenResponseAllOf","client/api-definition/model/SocketTokenResponseAllOfToken","client/api-definition/model/StartApplicationTestingRequest","client/api-definition/model/StartJobResponse","client/api-definition/model/StartJobResponseAllOf","client/api-definition/model/StartSamplingRequest","client/api-definition/model/StartSamplingResponse","client/api-definition/model/StartSamplingResponseAllOf","client/api-definition/model/StartTrainingRequestAnomaly","client/api-definition/model/StoreSegmentLengthRequest","client/api-definition/model/StructuredClassifyResult","client/api-definition/model/ThirdPartyAuth","client/api-definition/model/TrackObjectsRequest","client/api-definition/model/TrackObjectsResponse","client/api-definition/model/TrackObjectsResponseAllOf","client/api-definition/model/TransferOwnershipOrganizationRequest","client/api-definition/model/TransformationBlockAdditionalMountPoint","client/api-definition/model/TunerTrial","client/api-definition/model/TunerTrialBlocks","client/api-definition/model/TunerTrialKerasTunerTrial","client/api-definition/model/TunerTrialKerasTunerTrialHyperparameters","client/api-definition/model/TunerTrialKerasTunerTrialHyperparametersSpace","client/api-definition/model/TunerTrialKerasTunerTrialHyperparametersValues","client/api-definition/model/TunerTrialKerasTunerTrialScore","client/api-definition/model/TunerTrialMetadata","client/api-definition/model/UpdateNoteRequest","client/api-definition/model/UpdateNoteResponse","client/api-definition/model/UpdateOrganizationAddCollaboratorRequest","client/api-definition/model/UpdateOrganizationBucketRequest","client/api-definition/model/UpdateOrganizationCreateEmptyProjectRequest","client/api-definition/model/UpdateOrganizationCreateProjectRequest","client/api-definition/model/UpdateOrganizationDataItemRequest","client/api-definition/model/UpdateOrganizationDeployBlockRequest","client/api-definition/model/UpdateOrganizationDspBlockRequest","client/api-definition/model/UpdateOrganizationPortalResponse","client/api-definition/model/UpdateOrganizationPortalResponseAllOf","client/api-definition/model/UpdateOrganizationRequest","client/api-definition/model/UpdateOrganizationTransferLearningBlockRequest","client/api-definition/model/UpdateOrganizationTransformationBlockRequest","client/api-definition/model/UpdateProjectRequest","client/api-definition/model/UpdateThirdPartyAuthRequest","client/api-definition/model/UpdateUserRequest","client/api-definition/model/UpdateVersionRequest","client/api-definition/model/UploadCustomBlockRequest","client/api-definition/model/UploadKerasFilesRequest","client/api-definition/model/UploadLogoRequest","client/api-definition/model/UploadReadmeImageRequest","client/api-definition/model/UploadReadmeImageResponse","client/api-definition/model/UploadUserPhotoRequest","client/api-definition/model/UploadUserPhotoResponse","client/api-definition/model/UploadUserPhotoResponseAllOf","client/api-definition/model/User","client/api-definition/model/UserByThirdPartyActivationRequest","client/api-definition/model/VerifyDspBlockUrlRequest","client/api-definition/model/VerifyDspBlockUrlResponse","client/api-definition/model/VerifyDspBlockUrlResponseAllOf","client/api-definition/model/VerifyDspBlockUrlResponseAllOfBlock","client/api-definition/model/VerifyOrganizationBucketRequest","client/api-definition/model/VerifyResetPasswordRequest"],(function(require,exports,ActivateUserByThirdPartyActivationCodeRequest_1,ActivateUserRequest_1,AddApiKeyRequest_1,AddCollaboratorRequest_1,AddHmacKeyRequest_1,AddMemberRequest_1,AddNoteRequest_1,AddOrganizationApiKeyRequest_1,AddOrganizationBucketRequest_1,AddOrganizationDeployBlockRequest_1,AddOrganizationDeployBlockResponse_1,AddOrganizationDspBlockRequest_1,AddOrganizationDspBlockResponse_1,AddOrganizationTransferLearningBlockRequest_1,AddOrganizationTransferLearningBlockResponse_1,AddOrganizationTransformationBlockRequest_1,AddOrganizationTransformationBlockResponse_1,AddOrganizationTransformationBlockResponseAllOf_1,AnomalyModelMetadata_1,AnomalyModelMetadataClusters_1,AnomalyModelMetadataResponse_1,AnomalyResponse_1,AnomalyResponseAllOf_1,AnomalyResponseAllOfAxes_1,AnomalyTrainedFeaturesResponse_1,AnomalyTrainedFeaturesResponseAllOf_1,AnomalyTrainedFeaturesResponseAllOfData_1,ApplicationTestingDetection_1,ApplicationTestingFalsePositive_1,ApplicationTestingGroundTruth_1,ApplicationTestingGroundTruthSamples_1,ApplicationTestingParameterSet_1,ApplicationTestingParameterSetAggregateStats_1,ApplicationTestingParameterSetStats_1,ApplicationTestingRawDetection_1,AugmentationPolicyImageEnum_1,AugmentationPolicySpectrogram_1,AuthorizeThirdPartyRequest_1,BoundingBox_1,BuildOnDeviceModelRequest_1,BuildOrganizationOnDeviceModelRequest_1,ChangePasswordRequest_1,ClassifyJobResponse_1,ClassifyJobResponseAllOf_1,ClassifyJobResponseAllOfResult_1,ClassifySampleResponse_1,ClassifySampleResponseAllOf_1,ClassifySampleResponseClassification_1,ClassifySampleResponseClassificationDetails_1,ConvertUserRequest_1,CountSamplesResponse_1,CountSamplesResponseAllOf_1,CreateBlockVersionResponse_1,CreateBlockVersionResponseAllOf_1,CreateDeviceRequest_1,CreateEvaluationUserResponse_1,CreateEvaluationUserResponseAllOf_1,CreateNoteResponse_1,CreateNoteResponseAllOf_1,CreateOrganizationPortalRequest_1,CreateOrganizationPortalResponse_1,CreateOrganizationPortalResponseAllOf_1,CreateOrganizationRequest_1,CreateOrganizationResponse_1,CreateOrganizationResponseAllOf_1,CreatePipelineResponse_1,CreateProjectRequest_1,CreateProjectResponse_1,CreateProjectResponseAllOf_1,CreateSignedUploadLinkRequest_1,CreateSignedUploadLinkResponse_1,CreateSignedUploadLinkResponseAllOf_1,CreateThirdPartyAuthRequest_1,CreateThirdPartyAuthResponse_1,CreateThirdPartyAuthResponseAllOf_1,CreateUserRequest_1,CreateUserResponse_1,CreateUserResponseAllOf_1,CreateUserThirdPartyRequest_1,CreateUserThirdPartyResponse_1,CreateUserThirdPartyResponseAllOf_1,CropSampleRequest_1,CropSampleResponse_1,CropSampleResponseAllOf_1,DSPBlock_1,DSPConfigRequest_1,DSPConfigResponse_1,DSPConfigResponseAllOf_1,DSPGroup_1,DSPGroupItem_1,DSPGroupItemSelectOptions_1,DSPInfo_1,DSPInfoFeatures_1,DSPMetadata_1,DSPMetadataIncludedSamples_1,DSPMetadataOutputConfig_1,DSPMetadataOutputConfigShape_1,DSPMetadataResponse_1,DependencyData_1,DeploymentTarget_1,DeploymentTargetBadge_1,DeploymentTargetsResponse_1,DeploymentTargetsResponseAllOf_1,DevelopmentKeys_1,DevelopmentKeysResponse_1,Device_1,DeviceNameResponse_1,DeviceNameResponseAllOf_1,DeviceSensors_1,Download_1,DspFeatureImportanceResponse_1,DspFeatureImportanceResponseAllOf_1,DspFeatureImportanceResponseAllOfFeatures_1,DspFeatureImportanceResponseAllOfLabels_1,DspFeatureLabelsResponse_1,DspFeatureLabelsResponseAllOf_1,DspRunGraph_1,DspRunRequestWithoutFeatures_1,DspRunRequestWithoutFeaturesReadOnly_1,DspRunResponse_1,DspRunResponseAllOf_1,DspRunResponseAllOfPerformance_1,DspRunResponseWithSample_1,DspRunResponseWithSampleAllOf_1,DspSampleFeaturesResponse_1,DspSampleFeaturesResponseAllOf_1,DspSampleFeaturesResponseAllOfData_1,DspTrainedFeaturesResponse_1,DspTrainedFeaturesResponseAllOf_1,DspTrainedFeaturesResponseAllOfData_1,DspTrainedFeaturesResponseAllOfSample_1,EditSampleLabelRequest_1,EvaluateJobResponse_1,EvaluateJobResponseAllOf_1,EvaluateResultValue_1,ExportGetUrlResponse_1,ExportOriginalDataRequest_1,ExportWavDataRequest_1,FindSegmentSampleRequest_1,FindSegmentSampleResponse_1,FindSegmentSampleResponseAllOf_1,FindSyntiantPosteriorRequest_1,FindUserResponse_1,FindUserResponseAllOf_1,FindUserResponseAllOfUsers_1,GenerateFeaturesRequest_1,GenericApiResponse_1,GetAllThirdPartyAuthResponse_1,GetAllThirdPartyAuthResponseAllOf_1,GetApplicationTestingGroundTruthResponse_1,GetApplicationTestingGroundTruthResponseAllOf_1,GetApplicationTestingParameterSetsResponse_1,GetApplicationTestingParameterSetsResponseAllOf_1,GetApplicationTestingRawResultResponse_1,GetApplicationTestingRawResultResponseAllOf_1,GetApplicationTestingStatusResponse_1,GetApplicationTestingStatusResponseAllOf_1,GetDeploymentResponse_1,GetDeploymentResponseAllOf_1,GetDeviceResponse_1,GetDeviceResponseAllOf_1,GetImpulseBlocksResponse_1,GetImpulseBlocksResponseAllOf_1,GetImpulseResponse_1,GetImpulseResponseAllOf_1,GetJWTTokenRequest_1,GetJWTTokenResponse_1,GetJWTTokenResponseAllOf_1,GetJobResponse_1,GetJobResponseAllOf_1,GetNotesResponse_1,GetNotesResponseAllOf_1,GetOrganizationDataItemResponse_1,GetOrganizationDataItemResponseAllOf_1,GetOrganizationPipelinesResponse_1,GetOrganizationPipelinesResponseAllOf_1,GetOrganizationPortalResponse_1,GetOrganizationPortalResponseAllOf_1,GetSampleResponse_1,GetSyntiantPosteriorResponse_1,GetSyntiantPosteriorResponseAllOf_1,GetThirdPartyAuthResponse_1,GetThirdPartyAuthResponseAllOf_1,GetUserResponse_1,GetUserResponseAllOf_1,GetUserResponseAllOfOrganizations_1,Impulse_1,ImpulseBlockVersion_1,ImpulseDspBlock_1,ImpulseDspBlockOrganization_1,ImpulseInputBlock_1,ImpulseLearnBlock_1,InputBlock_1,InviteMemberRequest_1,Job_1,JobSummaryResponse_1,JobSummaryResponseAllOf_1,JobSummaryResponseAllOfSummary_1,KerasModelLayer_1,KerasModelLayerInput_1,KerasModelLayerOutput_1,KerasModelMetadata_1,KerasModelMetadataAllOf_1,KerasModelMetadataMetrics_1,KerasModelMetadataMetricsOnDevicePerformance_1,KerasModelMetadataMetricsTflite_1,KerasModelTypeEnum_1,KerasResponse_1,KerasResponseAllOf_1,KerasResponseAllOfTransferLearningModels_1,KerasVisualLayer_1,KerasVisualLayerType_1,LearnBlock_1,LearnBlockType_1,ListApiKeysResponse_1,ListApiKeysResponseAllOf_1,ListApiKeysResponseAllOfApiKeys_1,ListDevicesResponse_1,ListDevicesResponseAllOf_1,ListEmailResponse_1,ListEmailResponseAllOf_1,ListEmailResponseAllOfEmails_1,ListHmacKeysResponse_1,ListHmacKeysResponseAllOf_1,ListHmacKeysResponseAllOfHmacKeys_1,ListJobsResponse_1,ListJobsResponseAllOf_1,ListModelsResponse_1,ListModelsResponseAllOf_1,ListOrganizationApiKeysResponse_1,ListOrganizationApiKeysResponseAllOf_1,ListOrganizationApiKeysResponseAllOfApiKeys_1,ListOrganizationBucketsResponse_1,ListOrganizationBucketsResponseAllOf_1,ListOrganizationBucketsResponseAllOfBuckets_1,ListOrganizationBucketsUserResponse_1,ListOrganizationBucketsUserResponseAllOf_1,ListOrganizationBucketsUserResponseAllOfBuckets_1,ListOrganizationDataResponse_1,ListOrganizationDataResponseAllOf_1,ListOrganizationDataResponseAllOfData_1,ListOrganizationDeployBlocksResponse_1,ListOrganizationDeployBlocksResponseAllOf_1,ListOrganizationDspBlocksResponse_1,ListOrganizationDspBlocksResponseAllOf_1,ListOrganizationFilesResponse_1,ListOrganizationFilesResponseAllOf_1,ListOrganizationPipelinesResponse_1,ListOrganizationPipelinesResponseAllOf_1,ListOrganizationPortalsResponse_1,ListOrganizationPortalsResponseAllOf_1,ListOrganizationPortalsResponseAllOfPortals_1,ListOrganizationProjectsResponse_1,ListOrganizationProjectsResponseAllOf_1,ListOrganizationTransferLearningBlocksResponse_1,ListOrganizationTransferLearningBlocksResponseAllOf_1,ListOrganizationTransformationBlocksResponse_1,ListOrganizationTransformationBlocksResponseAllOf_1,ListOrganizationsResponse_1,ListOrganizationsResponseAllOf_1,ListPortalFilesInFolderRequest_1,ListPortalFilesInFolderResponse_1,ListPortalFilesInFolderResponseAllOf_1,ListProjects_1,ListProjectsResponse_1,ListPublicVersionsResponse_1,ListPublicVersionsResponseAllOf_1,ListPublicVersionsResponseAllOfVersions_1,ListSamplesResponse_1,ListSamplesResponseAllOf_1,ListVersionsResponse_1,ListVersionsResponseAllOf_1,ListVersionsResponseAllOfBucket_1,ListVersionsResponseAllOfVersions_1,LogStdoutResponse_1,LogStdoutResponseAllOf_1,LogStdoutResponseAllOfStdout_1,LoginResponse_1,LoginResponseAllOf_1,ModelVariantStats_1,MoveRawDataRequest_1,Note_1,ObjectDetectionLabelQueueResponse_1,ObjectDetectionLabelQueueResponseAllOf_1,OptimizeConfig_1,OptimizeConfigTargetDevice_1,OptimizeStateResponse_1,OptimizeStateResponseAllOf_1,OptimizeStateResponseAllOfStatus_1,OptimizeStateResponseAllOfWorkers_1,Organization_1,OrganizationAddDataFileRequest_1,OrganizationAddDataFolderRequest_1,OrganizationAddDataFolderResponse_1,OrganizationAddDataFolderResponseAllOf_1,OrganizationAddDataItemRequest_1,OrganizationBulkMetadataRequest_1,OrganizationCreateProject_1,OrganizationCreateProjectFiles_1,OrganizationCreateProjectRequest_1,OrganizationCreateProjectResponse_1,OrganizationCreateProjectResponseAllOf_1,OrganizationCreateProjectStatusResponse_1,OrganizationCreateProjectStatusResponseAllOf_1,OrganizationCreateProjectTransformationSummary_1,OrganizationDataItem_1,OrganizationDataItemFiles_1,OrganizationDeployBlock_1,OrganizationDspBlock_1,OrganizationGetCreateProjectsResponse_1,OrganizationGetCreateProjectsResponseAllOf_1,OrganizationGetCreateProjectsResponseAllOfJobs_1,OrganizationInfoResponse_1,OrganizationInfoResponseAllOf_1,OrganizationInfoResponseAllOfDatasets_1,OrganizationInfoResponseAllOfDefaultComputeLimits_1,OrganizationPipeline_1,OrganizationPipelineFeedingIntoDataset_1,OrganizationPipelineItemCount_1,OrganizationPipelineRun_1,OrganizationPipelineRunStep_1,OrganizationPipelineStep_1,OrganizationTransferLearningBlock_1,OrganizationTransformationBlock_1,OrganizationUpdatePipelineBody_1,OrganizationUser_1,PortalFile_1,PortalInfoResponse_1,Project_1,ProjectDataAxesSummaryResponse_1,ProjectDataAxesSummaryResponseAllOf_1,ProjectDataIntervalResponse_1,ProjectDataIntervalResponseAllOf_1,ProjectDataSummary_1,ProjectDownloadsResponse_1,ProjectDownloadsResponseAllOf_1,ProjectInfoResponse_1,ProjectInfoResponseAllOf_1,ProjectInfoResponseAllOfAcquisitionSettings_1,ProjectInfoResponseAllOfComputeTime_1,ProjectInfoResponseAllOfDataSummaryPerCategory_1,ProjectInfoResponseAllOfDeploySettings_1,ProjectInfoResponseAllOfExperiments_1,ProjectInfoResponseAllOfImpulse_1,ProjectInfoResponseAllOfLatencyDevices_1,ProjectInfoResponseAllOfPerformance_1,ProjectInfoResponseAllOfReadme_1,ProjectInfoResponseAllOfShowGettingStartedWizard_1,ProjectInfoResponseAllOfUrls_1,ProjectVersionRequest_1,RawSampleData_1,RawSamplePayload_1,RemoveCollaboratorRequest_1,RemoveMemberRequest_1,RenameDeviceRequest_1,RenameSampleRequest_1,RequestResetPasswordRequest_1,ResetPasswordRequest_1,RestoreProjectFromPublicRequest_1,RestoreProjectRequest_1,RunOrganizationPipelineResponse_1,RunOrganizationPipelineResponseAllOf_1,Sample_1,SampleBoundingBoxesRequest_1,ScoreTrialResponse_1,ScoreTrialResponseAllOf_1,SegmentSampleRequest_1,SegmentSampleRequestSegments_1,Sensor_1,SetAnomalyParameterRequest_1,SetKerasParameterRequest_1,SetMemberDatasetsRequest_1,SetMemberRoleRequest_1,SetOrganizationDataDatasetRequest_1,SetProjectComputeTimeRequest_1,SetProjectDspFileSizeRequest_1,SetSyntiantPosteriorRequest_1,SocketTokenResponse_1,SocketTokenResponseAllOf_1,SocketTokenResponseAllOfToken_1,StartApplicationTestingRequest_1,StartJobResponse_1,StartJobResponseAllOf_1,StartSamplingRequest_1,StartSamplingResponse_1,StartSamplingResponseAllOf_1,StartTrainingRequestAnomaly_1,StoreSegmentLengthRequest_1,StructuredClassifyResult_1,ThirdPartyAuth_1,TrackObjectsRequest_1,TrackObjectsResponse_1,TrackObjectsResponseAllOf_1,TransferOwnershipOrganizationRequest_1,TransformationBlockAdditionalMountPoint_1,TunerTrial_1,TunerTrialBlocks_1,TunerTrialKerasTunerTrial_1,TunerTrialKerasTunerTrialHyperparameters_1,TunerTrialKerasTunerTrialHyperparametersSpace_1,TunerTrialKerasTunerTrialHyperparametersValues_1,TunerTrialKerasTunerTrialScore_1,TunerTrialMetadata_1,UpdateNoteRequest_1,UpdateNoteResponse_1,UpdateOrganizationAddCollaboratorRequest_1,UpdateOrganizationBucketRequest_1,UpdateOrganizationCreateEmptyProjectRequest_1,UpdateOrganizationCreateProjectRequest_1,UpdateOrganizationDataItemRequest_1,UpdateOrganizationDeployBlockRequest_1,UpdateOrganizationDspBlockRequest_1,UpdateOrganizationPortalResponse_1,UpdateOrganizationPortalResponseAllOf_1,UpdateOrganizationRequest_1,UpdateOrganizationTransferLearningBlockRequest_1,UpdateOrganizationTransformationBlockRequest_1,UpdateProjectRequest_1,UpdateThirdPartyAuthRequest_1,UpdateUserRequest_1,UpdateVersionRequest_1,UploadCustomBlockRequest_1,UploadKerasFilesRequest_1,UploadLogoRequest_1,UploadReadmeImageRequest_1,UploadReadmeImageResponse_1,UploadUserPhotoRequest_1,UploadUserPhotoResponse_1,UploadUserPhotoResponseAllOf_1,User_1,UserByThirdPartyActivationRequest_1,VerifyDspBlockUrlRequest_1,VerifyDspBlockUrlResponse_1,VerifyDspBlockUrlResponseAllOf_1,VerifyDspBlockUrlResponseAllOfBlock_1,VerifyOrganizationBucketRequest_1,VerifyResetPasswordRequest_1){Object.defineProperty(exports,"__esModule",{value:!0});__exportStar(ActivateUserByThirdPartyActivationCodeRequest_1,exports);__exportStar(ActivateUserRequest_1,exports);__exportStar(AddApiKeyRequest_1,exports);__exportStar(AddCollaboratorRequest_1,exports);__exportStar(AddHmacKeyRequest_1,exports);__exportStar(AddMemberRequest_1,exports);__exportStar(AddNoteRequest_1,exports);__exportStar(AddOrganizationApiKeyRequest_1,exports);__exportStar(AddOrganizationBucketRequest_1,exports);__exportStar(AddOrganizationDeployBlockRequest_1,exports);__exportStar(AddOrganizationDeployBlockResponse_1,exports);__exportStar(AddOrganizationDspBlockRequest_1,exports);__exportStar(AddOrganizationDspBlockResponse_1,exports);__exportStar(AddOrganizationTransferLearningBlockRequest_1,exports);__exportStar(AddOrganizationTransferLearningBlockResponse_1,exports);__exportStar(AddOrganizationTransformationBlockRequest_1,exports);__exportStar(AddOrganizationTransformationBlockResponse_1,exports);__exportStar(AddOrganizationTransformationBlockResponseAllOf_1,exports);__exportStar(AnomalyModelMetadata_1,exports);__exportStar(AnomalyModelMetadataClusters_1,exports);__exportStar(AnomalyModelMetadataResponse_1,exports);__exportStar(AnomalyResponse_1,exports);__exportStar(AnomalyResponseAllOf_1,exports);__exportStar(AnomalyResponseAllOfAxes_1,exports);__exportStar(AnomalyTrainedFeaturesResponse_1,exports);__exportStar(AnomalyTrainedFeaturesResponseAllOf_1,exports);__exportStar(AnomalyTrainedFeaturesResponseAllOfData_1,exports);__exportStar(ApplicationTestingDetection_1,exports);__exportStar(ApplicationTestingFalsePositive_1,exports);__exportStar(ApplicationTestingGroundTruth_1,exports);__exportStar(ApplicationTestingGroundTruthSamples_1,exports);__exportStar(ApplicationTestingParameterSet_1,exports);__exportStar(ApplicationTestingParameterSetAggregateStats_1,exports);__exportStar(ApplicationTestingParameterSetStats_1,exports);__exportStar(ApplicationTestingRawDetection_1,exports);__exportStar(AugmentationPolicyImageEnum_1,exports);__exportStar(AugmentationPolicySpectrogram_1,exports);__exportStar(AuthorizeThirdPartyRequest_1,exports);__exportStar(BoundingBox_1,exports);__exportStar(BuildOnDeviceModelRequest_1,exports);__exportStar(BuildOrganizationOnDeviceModelRequest_1,exports);__exportStar(ChangePasswordRequest_1,exports);__exportStar(ClassifyJobResponse_1,exports);__exportStar(ClassifyJobResponseAllOf_1,exports);__exportStar(ClassifyJobResponseAllOfResult_1,exports);__exportStar(ClassifySampleResponse_1,exports);__exportStar(ClassifySampleResponseAllOf_1,exports);__exportStar(ClassifySampleResponseClassification_1,exports);__exportStar(ClassifySampleResponseClassificationDetails_1,exports);__exportStar(ConvertUserRequest_1,exports);__exportStar(CountSamplesResponse_1,exports);__exportStar(CountSamplesResponseAllOf_1,exports);__exportStar(CreateBlockVersionResponse_1,exports);__exportStar(CreateBlockVersionResponseAllOf_1,exports);__exportStar(CreateDeviceRequest_1,exports);__exportStar(CreateEvaluationUserResponse_1,exports);__exportStar(CreateEvaluationUserResponseAllOf_1,exports);__exportStar(CreateNoteResponse_1,exports);__exportStar(CreateNoteResponseAllOf_1,exports);__exportStar(CreateOrganizationPortalRequest_1,exports);__exportStar(CreateOrganizationPortalResponse_1,exports);__exportStar(CreateOrganizationPortalResponseAllOf_1,exports);__exportStar(CreateOrganizationRequest_1,exports);__exportStar(CreateOrganizationResponse_1,exports);__exportStar(CreateOrganizationResponseAllOf_1,exports);__exportStar(CreatePipelineResponse_1,exports);__exportStar(CreateProjectRequest_1,exports);__exportStar(CreateProjectResponse_1,exports);__exportStar(CreateProjectResponseAllOf_1,exports);__exportStar(CreateSignedUploadLinkRequest_1,exports);__exportStar(CreateSignedUploadLinkResponse_1,exports);__exportStar(CreateSignedUploadLinkResponseAllOf_1,exports);__exportStar(CreateThirdPartyAuthRequest_1,exports);__exportStar(CreateThirdPartyAuthResponse_1,exports);__exportStar(CreateThirdPartyAuthResponseAllOf_1,exports);__exportStar(CreateUserRequest_1,exports);__exportStar(CreateUserResponse_1,exports);__exportStar(CreateUserResponseAllOf_1,exports);__exportStar(CreateUserThirdPartyRequest_1,exports);__exportStar(CreateUserThirdPartyResponse_1,exports);__exportStar(CreateUserThirdPartyResponseAllOf_1,exports);__exportStar(CropSampleRequest_1,exports);__exportStar(CropSampleResponse_1,exports);__exportStar(CropSampleResponseAllOf_1,exports);__exportStar(DSPBlock_1,exports);__exportStar(DSPConfigRequest_1,exports);__exportStar(DSPConfigResponse_1,exports);__exportStar(DSPConfigResponseAllOf_1,exports);__exportStar(DSPGroup_1,exports);__exportStar(DSPGroupItem_1,exports);__exportStar(DSPGroupItemSelectOptions_1,exports);__exportStar(DSPInfo_1,exports);__exportStar(DSPInfoFeatures_1,exports);__exportStar(DSPMetadata_1,exports);__exportStar(DSPMetadataIncludedSamples_1,exports);__exportStar(DSPMetadataOutputConfig_1,exports);__exportStar(DSPMetadataOutputConfigShape_1,exports);__exportStar(DSPMetadataResponse_1,exports);__exportStar(DependencyData_1,exports);__exportStar(DeploymentTarget_1,exports);__exportStar(DeploymentTargetBadge_1,exports);__exportStar(DeploymentTargetsResponse_1,exports);__exportStar(DeploymentTargetsResponseAllOf_1,exports);__exportStar(DevelopmentKeys_1,exports);__exportStar(DevelopmentKeysResponse_1,exports);__exportStar(Device_1,exports);__exportStar(DeviceNameResponse_1,exports);__exportStar(DeviceNameResponseAllOf_1,exports);__exportStar(DeviceSensors_1,exports);__exportStar(Download_1,exports);__exportStar(DspFeatureImportanceResponse_1,exports);__exportStar(DspFeatureImportanceResponseAllOf_1,exports);__exportStar(DspFeatureImportanceResponseAllOfFeatures_1,exports);__exportStar(DspFeatureImportanceResponseAllOfLabels_1,exports);__exportStar(DspFeatureLabelsResponse_1,exports);__exportStar(DspFeatureLabelsResponseAllOf_1,exports);__exportStar(DspRunGraph_1,exports);__exportStar(DspRunRequestWithoutFeatures_1,exports);__exportStar(DspRunRequestWithoutFeaturesReadOnly_1,exports);__exportStar(DspRunResponse_1,exports);__exportStar(DspRunResponseAllOf_1,exports);__exportStar(DspRunResponseAllOfPerformance_1,exports);__exportStar(DspRunResponseWithSample_1,exports);__exportStar(DspRunResponseWithSampleAllOf_1,exports);__exportStar(DspSampleFeaturesResponse_1,exports);__exportStar(DspSampleFeaturesResponseAllOf_1,exports);__exportStar(DspSampleFeaturesResponseAllOfData_1,exports);__exportStar(DspTrainedFeaturesResponse_1,exports);__exportStar(DspTrainedFeaturesResponseAllOf_1,exports);__exportStar(DspTrainedFeaturesResponseAllOfData_1,exports);__exportStar(DspTrainedFeaturesResponseAllOfSample_1,exports);__exportStar(EditSampleLabelRequest_1,exports);__exportStar(EvaluateJobResponse_1,exports);__exportStar(EvaluateJobResponseAllOf_1,exports);__exportStar(EvaluateResultValue_1,exports);__exportStar(ExportGetUrlResponse_1,exports);__exportStar(ExportOriginalDataRequest_1,exports);__exportStar(ExportWavDataRequest_1,exports);__exportStar(FindSegmentSampleRequest_1,exports);__exportStar(FindSegmentSampleResponse_1,exports);__exportStar(FindSegmentSampleResponseAllOf_1,exports);__exportStar(FindSyntiantPosteriorRequest_1,exports);__exportStar(FindUserResponse_1,exports);__exportStar(FindUserResponseAllOf_1,exports);__exportStar(FindUserResponseAllOfUsers_1,exports);__exportStar(GenerateFeaturesRequest_1,exports);__exportStar(GenericApiResponse_1,exports);__exportStar(GetAllThirdPartyAuthResponse_1,exports);__exportStar(GetAllThirdPartyAuthResponseAllOf_1,exports);__exportStar(GetApplicationTestingGroundTruthResponse_1,exports);__exportStar(GetApplicationTestingGroundTruthResponseAllOf_1,exports);__exportStar(GetApplicationTestingParameterSetsResponse_1,exports);__exportStar(GetApplicationTestingParameterSetsResponseAllOf_1,exports);__exportStar(GetApplicationTestingRawResultResponse_1,exports);__exportStar(GetApplicationTestingRawResultResponseAllOf_1,exports);__exportStar(GetApplicationTestingStatusResponse_1,exports);__exportStar(GetApplicationTestingStatusResponseAllOf_1,exports);__exportStar(GetDeploymentResponse_1,exports);__exportStar(GetDeploymentResponseAllOf_1,exports);__exportStar(GetDeviceResponse_1,exports);__exportStar(GetDeviceResponseAllOf_1,exports);__exportStar(GetImpulseBlocksResponse_1,exports);__exportStar(GetImpulseBlocksResponseAllOf_1,exports);__exportStar(GetImpulseResponse_1,exports);__exportStar(GetImpulseResponseAllOf_1,exports);__exportStar(GetJWTTokenRequest_1,exports);__exportStar(GetJWTTokenResponse_1,exports);__exportStar(GetJWTTokenResponseAllOf_1,exports);__exportStar(GetJobResponse_1,exports);__exportStar(GetJobResponseAllOf_1,exports);__exportStar(GetNotesResponse_1,exports);__exportStar(GetNotesResponseAllOf_1,exports);__exportStar(GetOrganizationDataItemResponse_1,exports);__exportStar(GetOrganizationDataItemResponseAllOf_1,exports);__exportStar(GetOrganizationPipelinesResponse_1,exports);__exportStar(GetOrganizationPipelinesResponseAllOf_1,exports);__exportStar(GetOrganizationPortalResponse_1,exports);__exportStar(GetOrganizationPortalResponseAllOf_1,exports);__exportStar(GetSampleResponse_1,exports);__exportStar(GetSyntiantPosteriorResponse_1,exports);__exportStar(GetSyntiantPosteriorResponseAllOf_1,exports);__exportStar(GetThirdPartyAuthResponse_1,exports);__exportStar(GetThirdPartyAuthResponseAllOf_1,exports);__exportStar(GetUserResponse_1,exports);__exportStar(GetUserResponseAllOf_1,exports);__exportStar(GetUserResponseAllOfOrganizations_1,exports);__exportStar(Impulse_1,exports);__exportStar(ImpulseBlockVersion_1,exports);__exportStar(ImpulseDspBlock_1,exports);__exportStar(ImpulseDspBlockOrganization_1,exports);__exportStar(ImpulseInputBlock_1,exports);__exportStar(ImpulseLearnBlock_1,exports);__exportStar(InputBlock_1,exports);__exportStar(InviteMemberRequest_1,exports);__exportStar(Job_1,exports);__exportStar(JobSummaryResponse_1,exports);__exportStar(JobSummaryResponseAllOf_1,exports);__exportStar(JobSummaryResponseAllOfSummary_1,exports);__exportStar(KerasModelLayer_1,exports);__exportStar(KerasModelLayerInput_1,exports);__exportStar(KerasModelLayerOutput_1,exports);__exportStar(KerasModelMetadata_1,exports);__exportStar(KerasModelMetadataAllOf_1,exports);__exportStar(KerasModelMetadataMetrics_1,exports);__exportStar(KerasModelMetadataMetricsOnDevicePerformance_1,exports);__exportStar(KerasModelMetadataMetricsTflite_1,exports);__exportStar(KerasModelTypeEnum_1,exports);__exportStar(KerasResponse_1,exports);__exportStar(KerasResponseAllOf_1,exports);__exportStar(KerasResponseAllOfTransferLearningModels_1,exports);__exportStar(KerasVisualLayer_1,exports);__exportStar(KerasVisualLayerType_1,exports);__exportStar(LearnBlock_1,exports);__exportStar(LearnBlockType_1,exports);__exportStar(ListApiKeysResponse_1,exports);__exportStar(ListApiKeysResponseAllOf_1,exports);__exportStar(ListApiKeysResponseAllOfApiKeys_1,exports);__exportStar(ListDevicesResponse_1,exports);__exportStar(ListDevicesResponseAllOf_1,exports);__exportStar(ListEmailResponse_1,exports);__exportStar(ListEmailResponseAllOf_1,exports);__exportStar(ListEmailResponseAllOfEmails_1,exports);__exportStar(ListHmacKeysResponse_1,exports);__exportStar(ListHmacKeysResponseAllOf_1,exports);__exportStar(ListHmacKeysResponseAllOfHmacKeys_1,exports);__exportStar(ListJobsResponse_1,exports);__exportStar(ListJobsResponseAllOf_1,exports);__exportStar(ListModelsResponse_1,exports);__exportStar(ListModelsResponseAllOf_1,exports);__exportStar(ListOrganizationApiKeysResponse_1,exports);__exportStar(ListOrganizationApiKeysResponseAllOf_1,exports);__exportStar(ListOrganizationApiKeysResponseAllOfApiKeys_1,exports);__exportStar(ListOrganizationBucketsResponse_1,exports);__exportStar(ListOrganizationBucketsResponseAllOf_1,exports);__exportStar(ListOrganizationBucketsResponseAllOfBuckets_1,exports);__exportStar(ListOrganizationBucketsUserResponse_1,exports);__exportStar(ListOrganizationBucketsUserResponseAllOf_1,exports);__exportStar(ListOrganizationBucketsUserResponseAllOfBuckets_1,exports);__exportStar(ListOrganizationDataResponse_1,exports);__exportStar(ListOrganizationDataResponseAllOf_1,exports);__exportStar(ListOrganizationDataResponseAllOfData_1,exports);__exportStar(ListOrganizationDeployBlocksResponse_1,exports);__exportStar(ListOrganizationDeployBlocksResponseAllOf_1,exports);__exportStar(ListOrganizationDspBlocksResponse_1,exports);__exportStar(ListOrganizationDspBlocksResponseAllOf_1,exports);__exportStar(ListOrganizationFilesResponse_1,exports);__exportStar(ListOrganizationFilesResponseAllOf_1,exports);__exportStar(ListOrganizationPipelinesResponse_1,exports);__exportStar(ListOrganizationPipelinesResponseAllOf_1,exports);__exportStar(ListOrganizationPortalsResponse_1,exports);__exportStar(ListOrganizationPortalsResponseAllOf_1,exports);__exportStar(ListOrganizationPortalsResponseAllOfPortals_1,exports);__exportStar(ListOrganizationProjectsResponse_1,exports);__exportStar(ListOrganizationProjectsResponseAllOf_1,exports);__exportStar(ListOrganizationTransferLearningBlocksResponse_1,exports);__exportStar(ListOrganizationTransferLearningBlocksResponseAllOf_1,exports);__exportStar(ListOrganizationTransformationBlocksResponse_1,exports);__exportStar(ListOrganizationTransformationBlocksResponseAllOf_1,exports);__exportStar(ListOrganizationsResponse_1,exports);__exportStar(ListOrganizationsResponseAllOf_1,exports);__exportStar(ListPortalFilesInFolderRequest_1,exports);__exportStar(ListPortalFilesInFolderResponse_1,exports);__exportStar(ListPortalFilesInFolderResponseAllOf_1,exports);__exportStar(ListProjects_1,exports);__exportStar(ListProjectsResponse_1,exports);__exportStar(ListPublicVersionsResponse_1,exports);__exportStar(ListPublicVersionsResponseAllOf_1,exports);__exportStar(ListPublicVersionsResponseAllOfVersions_1,exports);__exportStar(ListSamplesResponse_1,exports);__exportStar(ListSamplesResponseAllOf_1,exports);__exportStar(ListVersionsResponse_1,exports);__exportStar(ListVersionsResponseAllOf_1,exports);__exportStar(ListVersionsResponseAllOfBucket_1,exports);__exportStar(ListVersionsResponseAllOfVersions_1,exports);__exportStar(LogStdoutResponse_1,exports);__exportStar(LogStdoutResponseAllOf_1,exports);__exportStar(LogStdoutResponseAllOfStdout_1,exports);__exportStar(LoginResponse_1,exports);__exportStar(LoginResponseAllOf_1,exports);__exportStar(ModelVariantStats_1,exports);__exportStar(MoveRawDataRequest_1,exports);__exportStar(Note_1,exports);__exportStar(ObjectDetectionLabelQueueResponse_1,exports);__exportStar(ObjectDetectionLabelQueueResponseAllOf_1,exports);__exportStar(OptimizeConfig_1,exports);__exportStar(OptimizeConfigTargetDevice_1,exports);__exportStar(OptimizeStateResponse_1,exports);__exportStar(OptimizeStateResponseAllOf_1,exports);__exportStar(OptimizeStateResponseAllOfStatus_1,exports);__exportStar(OptimizeStateResponseAllOfWorkers_1,exports);__exportStar(Organization_1,exports);__exportStar(OrganizationAddDataFileRequest_1,exports);__exportStar(OrganizationAddDataFolderRequest_1,exports);__exportStar(OrganizationAddDataFolderResponse_1,exports);__exportStar(OrganizationAddDataFolderResponseAllOf_1,exports);__exportStar(OrganizationAddDataItemRequest_1,exports);__exportStar(OrganizationBulkMetadataRequest_1,exports);__exportStar(OrganizationCreateProject_1,exports);__exportStar(OrganizationCreateProjectFiles_1,exports);__exportStar(OrganizationCreateProjectRequest_1,exports);__exportStar(OrganizationCreateProjectResponse_1,exports);__exportStar(OrganizationCreateProjectResponseAllOf_1,exports);__exportStar(OrganizationCreateProjectStatusResponse_1,exports);__exportStar(OrganizationCreateProjectStatusResponseAllOf_1,exports);__exportStar(OrganizationCreateProjectTransformationSummary_1,exports);__exportStar(OrganizationDataItem_1,exports);__exportStar(OrganizationDataItemFiles_1,exports);__exportStar(OrganizationDeployBlock_1,exports);__exportStar(OrganizationDspBlock_1,exports);__exportStar(OrganizationGetCreateProjectsResponse_1,exports);__exportStar(OrganizationGetCreateProjectsResponseAllOf_1,exports);__exportStar(OrganizationGetCreateProjectsResponseAllOfJobs_1,exports);__exportStar(OrganizationInfoResponse_1,exports);__exportStar(OrganizationInfoResponseAllOf_1,exports);__exportStar(OrganizationInfoResponseAllOfDatasets_1,exports);__exportStar(OrganizationInfoResponseAllOfDefaultComputeLimits_1,exports);__exportStar(OrganizationPipeline_1,exports);__exportStar(OrganizationPipelineFeedingIntoDataset_1,exports);__exportStar(OrganizationPipelineItemCount_1,exports);__exportStar(OrganizationPipelineRun_1,exports);__exportStar(OrganizationPipelineRunStep_1,exports);__exportStar(OrganizationPipelineStep_1,exports);__exportStar(OrganizationTransferLearningBlock_1,exports);__exportStar(OrganizationTransformationBlock_1,exports);__exportStar(OrganizationUpdatePipelineBody_1,exports);__exportStar(OrganizationUser_1,exports);__exportStar(PortalFile_1,exports);__exportStar(PortalInfoResponse_1,exports);__exportStar(Project_1,exports);__exportStar(ProjectDataAxesSummaryResponse_1,exports);__exportStar(ProjectDataAxesSummaryResponseAllOf_1,exports);__exportStar(ProjectDataIntervalResponse_1,exports);__exportStar(ProjectDataIntervalResponseAllOf_1,exports);__exportStar(ProjectDataSummary_1,exports);__exportStar(ProjectDownloadsResponse_1,exports);__exportStar(ProjectDownloadsResponseAllOf_1,exports);__exportStar(ProjectInfoResponse_1,exports);__exportStar(ProjectInfoResponseAllOf_1,exports);__exportStar(ProjectInfoResponseAllOfAcquisitionSettings_1,exports);__exportStar(ProjectInfoResponseAllOfComputeTime_1,exports);__exportStar(ProjectInfoResponseAllOfDataSummaryPerCategory_1,exports);__exportStar(ProjectInfoResponseAllOfDeploySettings_1,exports);__exportStar(ProjectInfoResponseAllOfExperiments_1,exports);__exportStar(ProjectInfoResponseAllOfImpulse_1,exports);__exportStar(ProjectInfoResponseAllOfLatencyDevices_1,exports);__exportStar(ProjectInfoResponseAllOfPerformance_1,exports);__exportStar(ProjectInfoResponseAllOfReadme_1,exports);__exportStar(ProjectInfoResponseAllOfShowGettingStartedWizard_1,exports);__exportStar(ProjectInfoResponseAllOfUrls_1,exports);__exportStar(ProjectVersionRequest_1,exports);__exportStar(RawSampleData_1,exports);__exportStar(RawSamplePayload_1,exports);__exportStar(RemoveCollaboratorRequest_1,exports);__exportStar(RemoveMemberRequest_1,exports);__exportStar(RenameDeviceRequest_1,exports);__exportStar(RenameSampleRequest_1,exports);__exportStar(RequestResetPasswordRequest_1,exports);__exportStar(ResetPasswordRequest_1,exports);__exportStar(RestoreProjectFromPublicRequest_1,exports);__exportStar(RestoreProjectRequest_1,exports);__exportStar(RunOrganizationPipelineResponse_1,exports);__exportStar(RunOrganizationPipelineResponseAllOf_1,exports);__exportStar(Sample_1,exports);__exportStar(SampleBoundingBoxesRequest_1,exports);__exportStar(ScoreTrialResponse_1,exports);__exportStar(ScoreTrialResponseAllOf_1,exports);__exportStar(SegmentSampleRequest_1,exports);__exportStar(SegmentSampleRequestSegments_1,exports);__exportStar(Sensor_1,exports);__exportStar(SetAnomalyParameterRequest_1,exports);__exportStar(SetKerasParameterRequest_1,exports);__exportStar(SetMemberDatasetsRequest_1,exports);__exportStar(SetMemberRoleRequest_1,exports);__exportStar(SetOrganizationDataDatasetRequest_1,exports);__exportStar(SetProjectComputeTimeRequest_1,exports);__exportStar(SetProjectDspFileSizeRequest_1,exports);__exportStar(SetSyntiantPosteriorRequest_1,exports);__exportStar(SocketTokenResponse_1,exports);__exportStar(SocketTokenResponseAllOf_1,exports);__exportStar(SocketTokenResponseAllOfToken_1,exports);__exportStar(StartApplicationTestingRequest_1,exports);__exportStar(StartJobResponse_1,exports);__exportStar(StartJobResponseAllOf_1,exports);__exportStar(StartSamplingRequest_1,exports);__exportStar(StartSamplingResponse_1,exports);__exportStar(StartSamplingResponseAllOf_1,exports);__exportStar(StartTrainingRequestAnomaly_1,exports);__exportStar(StoreSegmentLengthRequest_1,exports);__exportStar(StructuredClassifyResult_1,exports);__exportStar(ThirdPartyAuth_1,exports);__exportStar(TrackObjectsRequest_1,exports);__exportStar(TrackObjectsResponse_1,exports);__exportStar(TrackObjectsResponseAllOf_1,exports);__exportStar(TransferOwnershipOrganizationRequest_1,exports);__exportStar(TransformationBlockAdditionalMountPoint_1,exports);__exportStar(TunerTrial_1,exports);__exportStar(TunerTrialBlocks_1,exports);__exportStar(TunerTrialKerasTunerTrial_1,exports);__exportStar(TunerTrialKerasTunerTrialHyperparameters_1,exports);__exportStar(TunerTrialKerasTunerTrialHyperparametersSpace_1,exports);__exportStar(TunerTrialKerasTunerTrialHyperparametersValues_1,exports);__exportStar(TunerTrialKerasTunerTrialScore_1,exports);__exportStar(TunerTrialMetadata_1,exports);__exportStar(UpdateNoteRequest_1,exports);__exportStar(UpdateNoteResponse_1,exports);__exportStar(UpdateOrganizationAddCollaboratorRequest_1,exports);__exportStar(UpdateOrganizationBucketRequest_1,exports);__exportStar(UpdateOrganizationCreateEmptyProjectRequest_1,exports);__exportStar(UpdateOrganizationCreateProjectRequest_1,exports);__exportStar(UpdateOrganizationDataItemRequest_1,exports);__exportStar(UpdateOrganizationDeployBlockRequest_1,exports);__exportStar(UpdateOrganizationDspBlockRequest_1,exports);__exportStar(UpdateOrganizationPortalResponse_1,exports);__exportStar(UpdateOrganizationPortalResponseAllOf_1,exports);__exportStar(UpdateOrganizationRequest_1,exports);__exportStar(UpdateOrganizationTransferLearningBlockRequest_1,exports);__exportStar(UpdateOrganizationTransformationBlockRequest_1,exports);__exportStar(UpdateProjectRequest_1,exports);__exportStar(UpdateThirdPartyAuthRequest_1,exports);__exportStar(UpdateUserRequest_1,exports);__exportStar(UpdateVersionRequest_1,exports);__exportStar(UploadCustomBlockRequest_1,exports);__exportStar(UploadKerasFilesRequest_1,exports);__exportStar(UploadLogoRequest_1,exports);__exportStar(UploadReadmeImageRequest_1,exports);__exportStar(UploadReadmeImageResponse_1,exports);__exportStar(UploadUserPhotoRequest_1,exports);__exportStar(UploadUserPhotoResponse_1,exports);__exportStar(UploadUserPhotoResponseAllOf_1,exports);__exportStar(User_1,exports);__exportStar(UserByThirdPartyActivationRequest_1,exports);__exportStar(VerifyDspBlockUrlRequest_1,exports);__exportStar(VerifyDspBlockUrlResponse_1,exports);__exportStar(VerifyDspBlockUrlResponseAllOf_1,exports);__exportStar(VerifyDspBlockUrlResponseAllOfBlock_1,exports);__exportStar(VerifyOrganizationBucketRequest_1,exports);__exportStar(VerifyResetPasswordRequest_1,exports)}));define("client/api-definition/variables",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.COLLECTION_FORMATS=void 0;exports.COLLECTION_FORMATS={csv:",",tsv:"   ",ssv:" ",pipes:"|"}}));define("client/api-definition/configuration",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.Configuration=void 0;exports.Configuration=class{}}));define("client/api-definition/api/AdminApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_1){Object.defineProperty(exports,"__esModule",{value:!0});exports.AdminApi=void 0;exports.AdminApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_1.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}adminAddUserToProject(adminProjectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/admin/projects/{adminProjectId}/add".replace("{adminProjectId}",encodeURIComponent(String(adminProjectId))),headerParams={};if(null==adminProjectId)throw new Error("Required parameter adminProjectId was null or undefined when calling adminAddUserToProject.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}adminFindUser(query,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/admin/find-user",queryParameters={},headerParams={};if(null==query)throw new Error("Required parameter query was null or undefined when calling adminFindUser.");null!=query&&(queryParameters.query=query);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}adminGetUser(userId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/admin/users/{userId}".replace("{userId}",encodeURIComponent(String(userId))),headerParams={};if(null==userId)throw new Error("Required parameter userId was null or undefined when calling adminGetUser.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/AllowsReadOnlyApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_2){Object.defineProperty(exports,"__esModule",{value:!0});exports.AllowsReadOnlyApi=void 0;exports.AllowsReadOnlyApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_2.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}anomalyTrainedFeatures(projectId,learnId,featureAx1,featureAx2,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/training/anomaly/{learnId}/features/get-graph".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{learnId}",encodeURIComponent(String(learnId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling anomalyTrainedFeatures.");if(null==learnId)throw new Error("Required parameter learnId was null or undefined when calling anomalyTrainedFeatures.");if(null==featureAx1)throw new Error("Required parameter featureAx1 was null or undefined when calling anomalyTrainedFeatures.");if(null==featureAx2)throw new Error("Required parameter featureAx2 was null or undefined when calling anomalyTrainedFeatures.");null!=featureAx1&&(queryParameters.featureAx1=featureAx1);null!=featureAx2&&(queryParameters.featureAx2=featureAx2);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}anomalyTrainedFeaturesPerSample(projectId,learnId,sampleId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/training/anomaly/{learnId}/features/get-graph/classification/{sampleId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{learnId}",encodeURIComponent(String(learnId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling anomalyTrainedFeaturesPerSample.");if(null==learnId)throw new Error("Required parameter learnId was null or undefined when calling anomalyTrainedFeaturesPerSample.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling anomalyTrainedFeaturesPerSample.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}classifySample(projectId,sampleId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/classify/{sampleId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling classifySample.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling classifySample.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}countSamples(projectId,category,labels,filename,maxLength,minLength,signatureValidity,includeDisabled,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/count".replace("{projectId}",encodeURIComponent(String(projectId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling countSamples.");if(null==category)throw new Error("Required parameter category was null or undefined when calling countSamples.");null!=category&&(queryParameters.category=category);null!=labels&&(queryParameters.labels=labels);null!=filename&&(queryParameters.filename=filename);null!=maxLength&&(queryParameters.maxLength=maxLength);null!=minLength&&(queryParameters.minLength=minLength);null!=signatureValidity&&(queryParameters.signatureValidity=signatureValidity);null!=includeDisabled&&(queryParameters.includeDisabled=includeDisabled);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}downloadBuild(projectId,type,modelType,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/deployment/download".replace("{projectId}",encodeURIComponent(String(projectId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling downloadBuild.");if(null==type)throw new Error("Required parameter type was null or undefined when calling downloadBuild.");null!=type&&(queryParameters.type=type);null!=modelType&&(queryParameters.modelType=modelType);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}downloadDspData(projectId,dspId,category,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/dsp-data/{dspId}/x/{category}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{dspId}",encodeURIComponent(String(dspId))).replace("{category}",encodeURIComponent(String(category))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling downloadDspData.");if(null==dspId)throw new Error("Required parameter dspId was null or undefined when calling downloadDspData.");if(null==category)throw new Error("Required parameter category was null or undefined when calling downloadDspData.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}downloadDspLabels(projectId,dspId,category,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/dsp-data/{dspId}/y/{category}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{dspId}",encodeURIComponent(String(dspId))).replace("{category}",encodeURIComponent(String(category))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling downloadDspLabels.");if(null==dspId)throw new Error("Required parameter dspId was null or undefined when calling downloadDspLabels.");if(null==category)throw new Error("Required parameter category was null or undefined when calling downloadDspLabels.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}downloadLearnModel(projectId,learnId,modelDownloadId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/learn-data/{learnId}/model/{modelDownloadId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{learnId}",encodeURIComponent(String(learnId))).replace("{modelDownloadId}",encodeURIComponent(String(modelDownloadId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling downloadLearnModel.");if(null==learnId)throw new Error("Required parameter learnId was null or undefined when calling downloadLearnModel.");if(null==modelDownloadId)throw new Error("Required parameter modelDownloadId was null or undefined when calling downloadLearnModel.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}dspGetFeaturesForSample(projectId,dspId,sampleId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/dsp/{dspId}/features/get-graph/classification/{sampleId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{dspId}",encodeURIComponent(String(dspId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling dspGetFeaturesForSample.");if(null==dspId)throw new Error("Required parameter dspId was null or undefined when calling dspGetFeaturesForSample.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling dspGetFeaturesForSample.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}dspSampleTrainedFeatures(projectId,dspId,featureAx1,featureAx2,featureAx3,category,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/dsp/{dspId}/features/get-graph/{category}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{dspId}",encodeURIComponent(String(dspId))).replace("{category}",encodeURIComponent(String(category))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling dspSampleTrainedFeatures.");if(null==dspId)throw new Error("Required parameter dspId was null or undefined when calling dspSampleTrainedFeatures.");if(null==featureAx1)throw new Error("Required parameter featureAx1 was null or undefined when calling dspSampleTrainedFeatures.");if(null==featureAx2)throw new Error("Required parameter featureAx2 was null or undefined when calling dspSampleTrainedFeatures.");if(null==featureAx3)throw new Error("Required parameter featureAx3 was null or undefined when calling dspSampleTrainedFeatures.");if(null==category)throw new Error("Required parameter category was null or undefined when calling dspSampleTrainedFeatures.");null!=featureAx1&&(queryParameters.featureAx1=featureAx1);null!=featureAx2&&(queryParameters.featureAx2=featureAx2);null!=featureAx3&&(queryParameters.featureAx3=featureAx3);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getAnomalyMetadata(projectId,learnId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/training/anomaly/{learnId}/metadata".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{learnId}",encodeURIComponent(String(learnId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getAnomalyMetadata.");if(null==learnId)throw new Error("Required parameter learnId was null or undefined when calling getAnomalyMetadata.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getClassifyJobResult(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/classify/all/result".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getClassifyJobResult.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getDspMetadata(projectId,dspId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/dsp/{dspId}/metadata".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{dspId}",encodeURIComponent(String(dspId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getDspMetadata.");if(null==dspId)throw new Error("Required parameter dspId was null or undefined when calling getDspMetadata.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getDspRawSample(projectId,dspId,sampleId,limitPayloadValues,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/dsp/{dspId}/raw-data/{sampleId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{dspId}",encodeURIComponent(String(dspId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getDspRawSample.");if(null==dspId)throw new Error("Required parameter dspId was null or undefined when calling getDspRawSample.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling getDspRawSample.");null!=limitPayloadValues&&(queryParameters.limitPayloadValues=limitPayloadValues);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getDspSampleSlice(projectId,dspId,sampleId,sliceStart,sliceEnd,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/dsp/{dspId}/raw-data/{sampleId}/slice".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{dspId}",encodeURIComponent(String(dspId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getDspSampleSlice.");if(null==dspId)throw new Error("Required parameter dspId was null or undefined when calling getDspSampleSlice.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling getDspSampleSlice.");if(null==sliceStart)throw new Error("Required parameter sliceStart was null or undefined when calling getDspSampleSlice.");if(null==sliceEnd)throw new Error("Required parameter sliceEnd was null or undefined when calling getDspSampleSlice.");null!=sliceStart&&(queryParameters.sliceStart=sliceStart);null!=sliceEnd&&(queryParameters.sliceEnd=sliceEnd);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getKerasMetadata(projectId,learnId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/training/keras/{learnId}/metadata".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{learnId}",encodeURIComponent(String(learnId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getKerasMetadata.");if(null==learnId)throw new Error("Required parameter learnId was null or undefined when calling getKerasMetadata.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getNotes(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/notes".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getNotes.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getSample(projectId,sampleId,limitPayloadValues,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/{sampleId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getSample.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling getSample.");null!=limitPayloadValues&&(queryParameters.limitPayloadValues=limitPayloadValues);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getSampleAsAudio(projectId,sampleId,axisIx,sliceStart,sliceEnd,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/{sampleId}/wav".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getSampleAsAudio.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling getSampleAsAudio.");if(null==axisIx)throw new Error("Required parameter axisIx was null or undefined when calling getSampleAsAudio.");null!=axisIx&&(queryParameters.axisIx=axisIx);null!=sliceStart&&(queryParameters.sliceStart=sliceStart);null!=sliceEnd&&(queryParameters.sliceEnd=sliceEnd);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getSampleAsImage(projectId,sampleId,afterInputBlock,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/{sampleId}/image".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getSampleAsImage.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling getSampleAsImage.");null!=afterInputBlock&&(queryParameters.afterInputBlock=afterInputBlock);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getSampleAsRaw(projectId,sampleId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/{sampleId}/raw".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getSampleAsRaw.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling getSampleAsRaw.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getSampleAsVideo(projectId,sampleId,afterInputBlock,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/{sampleId}/video".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getSampleAsVideo.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling getSampleAsVideo.");null!=afterInputBlock&&(queryParameters.afterInputBlock=afterInputBlock);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getSampleSlice(projectId,sampleId,sliceStart,sliceEnd,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/{sampleId}/slice".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getSampleSlice.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling getSampleSlice.");if(null==sliceStart)throw new Error("Required parameter sliceStart was null or undefined when calling getSampleSlice.");if(null==sliceEnd)throw new Error("Required parameter sliceEnd was null or undefined when calling getSampleSlice.");null!=sliceStart&&(queryParameters.sliceStart=sliceStart);null!=sliceEnd&&(queryParameters.sliceEnd=sliceEnd);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listDeploymentTargets(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/deployment/targets".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling listDeploymentTargets.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listProjects(extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/projects",headerParams={};localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listSamples(projectId,category,limit,offset,excludeSensors,labels,filename,maxLength,minLength,signatureValidity,includeDisabled,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data".replace("{projectId}",encodeURIComponent(String(projectId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling listSamples.");if(null==category)throw new Error("Required parameter category was null or undefined when calling listSamples.");null!=category&&(queryParameters.category=category);null!=limit&&(queryParameters.limit=limit);null!=offset&&(queryParameters.offset=offset);null!=excludeSensors&&(queryParameters.excludeSensors=excludeSensors);null!=labels&&(queryParameters.labels=labels);null!=filename&&(queryParameters.filename=filename);null!=maxLength&&(queryParameters.maxLength=maxLength);null!=minLength&&(queryParameters.minLength=minLength);null!=signatureValidity&&(queryParameters.signatureValidity=signatureValidity);null!=includeDisabled&&(queryParameters.includeDisabled=includeDisabled);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}runDspSampleSliceReadOnly(projectId,dspId,sampleId,sliceStart,sliceEnd,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/dsp/{dspId}/raw-data/{sampleId}/slice/run/readonly".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{dspId}",encodeURIComponent(String(dspId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling runDspSampleSliceReadOnly.");if(null==dspId)throw new Error("Required parameter dspId was null or undefined when calling runDspSampleSliceReadOnly.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling runDspSampleSliceReadOnly.");if(null==sliceStart)throw new Error("Required parameter sliceStart was null or undefined when calling runDspSampleSliceReadOnly.");if(null==sliceEnd)throw new Error("Required parameter sliceEnd was null or undefined when calling runDspSampleSliceReadOnly.");null!=sliceStart&&(queryParameters.sliceStart=sliceStart);null!=sliceEnd&&(queryParameters.sliceEnd=sliceEnd);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/ApplicationTestingApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_3){Object.defineProperty(exports,"__esModule",{value:!0});exports.ApplicationTestingApi=void 0;exports.ApplicationTestingApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_3.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}getApplicationTestingGroundTruth(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/application-testing/ground-truth".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getApplicationTestingGroundTruth.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getApplicationTestingParameterSets(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/application-testing/parameter-sets".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getApplicationTestingParameterSets.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getApplicationTestingRawResult(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/application-testing/raw-result".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getApplicationTestingRawResult.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getApplicationTestingStatus(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/application-testing/status".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getApplicationTestingStatus.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getWavFile(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/application-testing/wav".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getWavFile.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/AuthApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_4){Object.defineProperty(exports,"__esModule",{value:!0});exports.AuthApi=void 0;exports.AuthApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_4.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}discourse(sso,sig,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/auth/discourse",queryParameters={},headerParams={};if(null==sso)throw new Error("Required parameter sso was null or undefined when calling discourse.");if(null==sig)throw new Error("Required parameter sig was null or undefined when calling discourse.");null!=sso&&(queryParameters.sso=sso);null!=sig&&(queryParameters.sig=sig);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}readme(extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/auth/readme",headerParams={};localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/CDNApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_5){Object.defineProperty(exports,"__esModule",{value:!0});exports.CDNApi=void 0;exports.CDNApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_5.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}getUserCDNResource(path,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api-usercdn",queryParameters={},headerParams={};if(null==path)throw new Error("Required parameter path was null or undefined when calling getUserCDNResource.");null!=path&&(queryParameters.path=path);localVarPath=localVarPath+"?"+$.param(queryParameters);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/ClassifyApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_6){Object.defineProperty(exports,"__esModule",{value:!0});exports.ClassifyApi=void 0;exports.ClassifyApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_6.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}classifySample(projectId,sampleId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/classify/{sampleId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling classifySample.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling classifySample.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getClassifyJobResult(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/classify/all/result".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getClassifyJobResult.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/DSPApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_7){Object.defineProperty(exports,"__esModule",{value:!0});exports.DSPApi=void 0;exports.DSPApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_7.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}downloadDspData(projectId,dspId,category,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/dsp-data/{dspId}/x/{category}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{dspId}",encodeURIComponent(String(dspId))).replace("{category}",encodeURIComponent(String(category))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling downloadDspData.");if(null==dspId)throw new Error("Required parameter dspId was null or undefined when calling downloadDspData.");if(null==category)throw new Error("Required parameter category was null or undefined when calling downloadDspData.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}downloadDspLabels(projectId,dspId,category,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/dsp-data/{dspId}/y/{category}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{dspId}",encodeURIComponent(String(dspId))).replace("{category}",encodeURIComponent(String(category))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling downloadDspLabels.");if(null==dspId)throw new Error("Required parameter dspId was null or undefined when calling downloadDspLabels.");if(null==category)throw new Error("Required parameter category was null or undefined when calling downloadDspLabels.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}dspGetFeaturesForSample(projectId,dspId,sampleId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/dsp/{dspId}/features/get-graph/classification/{sampleId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{dspId}",encodeURIComponent(String(dspId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling dspGetFeaturesForSample.");if(null==dspId)throw new Error("Required parameter dspId was null or undefined when calling dspGetFeaturesForSample.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling dspGetFeaturesForSample.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}dspSampleTrainedFeatures(projectId,dspId,featureAx1,featureAx2,featureAx3,category,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/dsp/{dspId}/features/get-graph/{category}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{dspId}",encodeURIComponent(String(dspId))).replace("{category}",encodeURIComponent(String(category))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling dspSampleTrainedFeatures.");if(null==dspId)throw new Error("Required parameter dspId was null or undefined when calling dspSampleTrainedFeatures.");if(null==featureAx1)throw new Error("Required parameter featureAx1 was null or undefined when calling dspSampleTrainedFeatures.");if(null==featureAx2)throw new Error("Required parameter featureAx2 was null or undefined when calling dspSampleTrainedFeatures.");if(null==featureAx3)throw new Error("Required parameter featureAx3 was null or undefined when calling dspSampleTrainedFeatures.");if(null==category)throw new Error("Required parameter category was null or undefined when calling dspSampleTrainedFeatures.");null!=featureAx1&&(queryParameters.featureAx1=featureAx1);null!=featureAx2&&(queryParameters.featureAx2=featureAx2);null!=featureAx3&&(queryParameters.featureAx3=featureAx3);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getDspConfig(projectId,dspId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/dsp/{dspId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{dspId}",encodeURIComponent(String(dspId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getDspConfig.");if(null==dspId)throw new Error("Required parameter dspId was null or undefined when calling getDspConfig.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getDspFeatureImportance(projectId,dspId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/dsp/{dspId}/features/importance".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{dspId}",encodeURIComponent(String(dspId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getDspFeatureImportance.");if(null==dspId)throw new Error("Required parameter dspId was null or undefined when calling getDspFeatureImportance.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getDspFeatureLabels(projectId,dspId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/dsp/{dspId}/features/labels".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{dspId}",encodeURIComponent(String(dspId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getDspFeatureLabels.");if(null==dspId)throw new Error("Required parameter dspId was null or undefined when calling getDspFeatureLabels.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getDspMetadata(projectId,dspId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/dsp/{dspId}/metadata".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{dspId}",encodeURIComponent(String(dspId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getDspMetadata.");if(null==dspId)throw new Error("Required parameter dspId was null or undefined when calling getDspMetadata.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getDspRawSample(projectId,dspId,sampleId,limitPayloadValues,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/dsp/{dspId}/raw-data/{sampleId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{dspId}",encodeURIComponent(String(dspId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getDspRawSample.");if(null==dspId)throw new Error("Required parameter dspId was null or undefined when calling getDspRawSample.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling getDspRawSample.");null!=limitPayloadValues&&(queryParameters.limitPayloadValues=limitPayloadValues);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getDspSampleSlice(projectId,dspId,sampleId,sliceStart,sliceEnd,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/dsp/{dspId}/raw-data/{sampleId}/slice".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{dspId}",encodeURIComponent(String(dspId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getDspSampleSlice.");if(null==dspId)throw new Error("Required parameter dspId was null or undefined when calling getDspSampleSlice.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling getDspSampleSlice.");if(null==sliceStart)throw new Error("Required parameter sliceStart was null or undefined when calling getDspSampleSlice.");if(null==sliceEnd)throw new Error("Required parameter sliceEnd was null or undefined when calling getDspSampleSlice.");null!=sliceStart&&(queryParameters.sliceStart=sliceStart);null!=sliceEnd&&(queryParameters.sliceEnd=sliceEnd);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}runDspSampleSlice(projectId,dspId,sampleId,sliceStart,sliceEnd,DspRunRequestWithoutFeatures,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/dsp/{dspId}/raw-data/{sampleId}/slice/run".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{dspId}",encodeURIComponent(String(dspId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling runDspSampleSlice.");if(null==dspId)throw new Error("Required parameter dspId was null or undefined when calling runDspSampleSlice.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling runDspSampleSlice.");if(null==sliceStart)throw new Error("Required parameter sliceStart was null or undefined when calling runDspSampleSlice.");if(null==sliceEnd)throw new Error("Required parameter sliceEnd was null or undefined when calling runDspSampleSlice.");if(null==DspRunRequestWithoutFeatures)throw new Error("Required parameter DspRunRequestWithoutFeatures was null or undefined when calling runDspSampleSlice.");null!=sliceStart&&(queryParameters.sliceStart=sliceStart);null!=sliceEnd&&(queryParameters.sliceEnd=sliceEnd);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(DspRunRequestWithoutFeatures);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}runDspSampleSliceReadOnly(projectId,dspId,sampleId,sliceStart,sliceEnd,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/dsp/{dspId}/raw-data/{sampleId}/slice/run/readonly".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{dspId}",encodeURIComponent(String(dspId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling runDspSampleSliceReadOnly.");if(null==dspId)throw new Error("Required parameter dspId was null or undefined when calling runDspSampleSliceReadOnly.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling runDspSampleSliceReadOnly.");if(null==sliceStart)throw new Error("Required parameter sliceStart was null or undefined when calling runDspSampleSliceReadOnly.");if(null==sliceEnd)throw new Error("Required parameter sliceEnd was null or undefined when calling runDspSampleSliceReadOnly.");null!=sliceStart&&(queryParameters.sliceStart=sliceStart);null!=sliceEnd&&(queryParameters.sliceEnd=sliceEnd);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}setDspConfig(projectId,dspId,DSPConfigRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/dsp/{dspId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{dspId}",encodeURIComponent(String(dspId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling setDspConfig.");if(null==dspId)throw new Error("Required parameter dspId was null or undefined when calling setDspConfig.");if(null==DSPConfigRequest)throw new Error("Required parameter DSPConfigRequest was null or undefined when calling setDspConfig.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(DSPConfigRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/DeploymentApi",["require","exports","client/api-definition/variables","client/api-definition/configuration"],(function(require,exports,variables_1,configuration_8){Object.defineProperty(exports,"__esModule",{value:!0});exports.DeploymentApi=void 0;exports.DeploymentApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_8.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}downloadBuild(projectId,type,modelType,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/deployment/download".replace("{projectId}",encodeURIComponent(String(projectId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling downloadBuild.");if(null==type)throw new Error("Required parameter type was null or undefined when calling downloadBuild.");null!=type&&(queryParameters.type=type);null!=modelType&&(queryParameters.modelType=modelType);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}findSyntiantPosterior(projectId,targetWords,referenceSet,wavFile,metaCsvFile,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/jobs/find-syntiant-posterior".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={},formParams=new FormData,reqHasFile=!1;if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling findSyntiantPosterior.");if(null==targetWords)throw new Error("Required parameter targetWords was null or undefined when calling findSyntiantPosterior.");if(null==referenceSet)throw new Error("Required parameter referenceSet was null or undefined when calling findSyntiantPosterior.");localVarPath=localVarPath+"?"+$.param({});targetWords&&formParams.append("targetWords",targetWords.join(variables_1.COLLECTION_FORMATS.csv));null!=referenceSet&&formParams.append("referenceSet",referenceSet);reqHasFile=!0;formParams.append("wavFile",wavFile);reqHasFile=!0;formParams.append("metaCsvFile",metaCsvFile);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);0;let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);requestOptions.data=formParams;requestOptions.contentType=!1;extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getDeployment(projectId,type,modelType,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/deployment".replace("{projectId}",encodeURIComponent(String(projectId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getDeployment.");if(null==type)throw new Error("Required parameter type was null or undefined when calling getDeployment.");null!=type&&(queryParameters.type=type);null!=modelType&&(queryParameters.modelType=modelType);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getEvaluateJobResult(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/deployment/evaluate".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getEvaluateJobResult.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getEvaluateJobResultCache(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/deployment/evaluate/cache".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getEvaluateJobResultCache.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getSyntiantPosterior(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/deployment/syntiant/posterior".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getSyntiantPosterior.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listDeploymentTargets(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/deployment/targets".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling listDeploymentTargets.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}setSyntiantPosterior(projectId,SetSyntiantPosteriorRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/deployment/syntiant/posterior".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling setSyntiantPosterior.");if(null==SetSyntiantPosteriorRequest)throw new Error("Required parameter SetSyntiantPosteriorRequest was null or undefined when calling setSyntiantPosterior.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(SetSyntiantPosteriorRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/DevicesApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_9){Object.defineProperty(exports,"__esModule",{value:!0});exports.DevicesApi=void 0;exports.DevicesApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_9.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}createDevice(projectId,CreateDeviceRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/devices/create".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling createDevice.");if(null==CreateDeviceRequest)throw new Error("Required parameter CreateDeviceRequest was null or undefined when calling createDevice.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(CreateDeviceRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}deleteDevice(projectId,deviceId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/device/{deviceId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{deviceId}",encodeURIComponent(String(deviceId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling deleteDevice.");if(null==deviceId)throw new Error("Required parameter deviceId was null or undefined when calling deleteDevice.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getDevice(projectId,deviceId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/device/{deviceId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{deviceId}",encodeURIComponent(String(deviceId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getDevice.");if(null==deviceId)throw new Error("Required parameter deviceId was null or undefined when calling getDevice.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listDevices(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/devices".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling listDevices.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}renameDevice(projectId,deviceId,RenameDeviceRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/devices/{deviceId}/rename".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{deviceId}",encodeURIComponent(String(deviceId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling renameDevice.");if(null==deviceId)throw new Error("Required parameter deviceId was null or undefined when calling renameDevice.");if(null==RenameDeviceRequest)throw new Error("Required parameter RenameDeviceRequest was null or undefined when calling renameDevice.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(RenameDeviceRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}startSampling(projectId,deviceId,StartSamplingRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/device/{deviceId}/start-sampling".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{deviceId}",encodeURIComponent(String(deviceId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling startSampling.");if(null==deviceId)throw new Error("Required parameter deviceId was null or undefined when calling startSampling.");if(null==StartSamplingRequest)throw new Error("Required parameter StartSamplingRequest was null or undefined when calling startSampling.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(StartSamplingRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/ExportApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_10){Object.defineProperty(exports,"__esModule",{value:!0});exports.ExportApi=void 0;exports.ExportApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_10.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}getExportUrl(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/export/get-url".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getExportUrl.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/HealthApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_11){Object.defineProperty(exports,"__esModule",{value:!0});exports.HealthApi=void 0;exports.HealthApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_11.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}health(requester,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api-health",queryParameters={},headerParams={};null!=requester&&(queryParameters.requester=requester);localVarPath=localVarPath+"?"+$.param(queryParameters);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/ImpulseApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_12){Object.defineProperty(exports,"__esModule",{value:!0});exports.ImpulseApi=void 0;exports.ImpulseApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_12.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}createBlockVersion(projectId,blockType,blockId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/impulse/block-versions/{blockType}/{blockId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{blockType}",encodeURIComponent(String(blockType))).replace("{blockId}",encodeURIComponent(String(blockId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling createBlockVersion.");if(null==blockType)throw new Error("Required parameter blockType was null or undefined when calling createBlockVersion.");if(null==blockId)throw new Error("Required parameter blockId was null or undefined when calling createBlockVersion.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}createImpulse(projectId,Impulse,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/impulse".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling createImpulse.");if(null==Impulse)throw new Error("Required parameter Impulse was null or undefined when calling createImpulse.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(Impulse);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}deleteImpulse(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/impulse".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling deleteImpulse.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getImpulse(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/impulse".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getImpulse.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getImpulseAll(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/impulse/all".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getImpulseAll.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getImpulseBlocks(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/impulse/blocks".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getImpulseBlocks.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}updateBlockVersion(projectId,blockType,blockId,ImpulseBlockVersion,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/impulse/block-versions/{blockType}/{blockId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{blockType}",encodeURIComponent(String(blockType))).replace("{blockId}",encodeURIComponent(String(blockId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling updateBlockVersion.");if(null==blockType)throw new Error("Required parameter blockType was null or undefined when calling updateBlockVersion.");if(null==blockId)throw new Error("Required parameter blockId was null or undefined when calling updateBlockVersion.");if(null==ImpulseBlockVersion)throw new Error("Required parameter ImpulseBlockVersion was null or undefined when calling updateBlockVersion.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"PUT",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(ImpulseBlockVersion);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}verifyDspBlockUrl(projectId,VerifyDspBlockUrlRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/verify-dsp-block/url".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling verifyDspBlockUrl.");if(null==VerifyDspBlockUrlRequest)throw new Error("Required parameter VerifyDspBlockUrlRequest was null or undefined when calling verifyDspBlockUrl.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(VerifyDspBlockUrlRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/JobsApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_13){Object.defineProperty(exports,"__esModule",{value:!0});exports.JobsApi=void 0;exports.JobsApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_13.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}buildOnDeviceModelJob(projectId,type,BuildOnDeviceModelRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/jobs/build-ondevice-model".replace("{projectId}",encodeURIComponent(String(projectId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling buildOnDeviceModelJob.");if(null==type)throw new Error("Required parameter type was null or undefined when calling buildOnDeviceModelJob.");if(null==BuildOnDeviceModelRequest)throw new Error("Required parameter BuildOnDeviceModelRequest was null or undefined when calling buildOnDeviceModelJob.");null!=type&&(queryParameters.type=type);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(BuildOnDeviceModelRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}buildOrganizationOnDeviceModelJob(projectId,BuildOrganizationOnDeviceModelRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/jobs/build-ondevice-model/organization".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling buildOrganizationOnDeviceModelJob.");if(null==BuildOrganizationOnDeviceModelRequest)throw new Error("Required parameter BuildOrganizationOnDeviceModelRequest was null or undefined when calling buildOrganizationOnDeviceModelJob.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(BuildOrganizationOnDeviceModelRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}cancelJob(projectId,jobId,forceCancel,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/jobs/{jobId}/cancel".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{jobId}",encodeURIComponent(String(jobId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling cancelJob.");if(null==jobId)throw new Error("Required parameter jobId was null or undefined when calling cancelJob.");null!=forceCancel&&(queryParameters.forceCancel=forceCancel);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}downloadJobsLogs(projectId,jobId,limit,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/jobs/{jobId}/stdout/download".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{jobId}",encodeURIComponent(String(jobId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling downloadJobsLogs.");if(null==jobId)throw new Error("Required parameter jobId was null or undefined when calling downloadJobsLogs.");null!=limit&&(queryParameters.limit=limit);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}generateFeaturesJob(projectId,GenerateFeaturesRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/jobs/generate-features".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling generateFeaturesJob.");if(null==GenerateFeaturesRequest)throw new Error("Required parameter GenerateFeaturesRequest was null or undefined when calling generateFeaturesJob.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(GenerateFeaturesRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getJobStatus(projectId,jobId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/jobs/{jobId}/status".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{jobId}",encodeURIComponent(String(jobId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getJobStatus.");if(null==jobId)throw new Error("Required parameter jobId was null or undefined when calling getJobStatus.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getJobsLogs(projectId,jobId,limit,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/jobs/{jobId}/stdout".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{jobId}",encodeURIComponent(String(jobId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getJobsLogs.");if(null==jobId)throw new Error("Required parameter jobId was null or undefined when calling getJobsLogs.");null!=limit&&(queryParameters.limit=limit);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getJobsSummary(projectId,startDate,endDate,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/jobs/summary".replace("{projectId}",encodeURIComponent(String(projectId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getJobsSummary.");if(null==startDate)throw new Error("Required parameter startDate was null or undefined when calling getJobsSummary.");if(null==endDate)throw new Error("Required parameter endDate was null or undefined when calling getJobsSummary.");null!=startDate&&(queryParameters.startDate=startDate.toISOString());null!=endDate&&(queryParameters.endDate=endDate.toISOString());localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listActiveJobs(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/jobs".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling listActiveJobs.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listFinishedJobs(projectId,startDate,endDate,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/jobs/history".replace("{projectId}",encodeURIComponent(String(projectId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling listFinishedJobs.");null!=startDate&&(queryParameters.startDate=startDate.toISOString());null!=endDate&&(queryParameters.endDate=endDate.toISOString());localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}optimizeJob(projectId,SetKerasParameterRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/jobs/optimize".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling optimizeJob.");if(null==SetKerasParameterRequest)throw new Error("Required parameter SetKerasParameterRequest was null or undefined when calling optimizeJob.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(SetKerasParameterRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}setTunerPrimaryJob(projectId,trialId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/jobs/set-tuner-primary-job".replace("{projectId}",encodeURIComponent(String(projectId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling setTunerPrimaryJob.");if(null==trialId)throw new Error("Required parameter trialId was null or undefined when calling setTunerPrimaryJob.");null!=trialId&&(queryParameters.trialId=trialId);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}startApplicationTestingJob(projectId,StartApplicationTestingRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/jobs/application-testing".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling startApplicationTestingJob.");if(null==StartApplicationTestingRequest)throw new Error("Required parameter StartApplicationTestingRequest was null or undefined when calling startApplicationTestingJob.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(StartApplicationTestingRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}startClassifyJob(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/jobs/classify".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling startClassifyJob.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}startEvaluateJob(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/jobs/evaluate".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling startEvaluateJob.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}startKeywordsNoiseJob(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/jobs/keywords-noise".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling startKeywordsNoiseJob.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}startMakeVersionPublicJob(projectId,versionId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/jobs/versions/{versionId}/make-public".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{versionId}",encodeURIComponent(String(versionId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling startMakeVersionPublicJob.");if(null==versionId)throw new Error("Required parameter versionId was null or undefined when calling startMakeVersionPublicJob.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}startOriginalExportJob(projectId,ExportOriginalDataRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/jobs/export/original".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling startOriginalExportJob.");if(null==ExportOriginalDataRequest)throw new Error("Required parameter ExportOriginalDataRequest was null or undefined when calling startOriginalExportJob.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(ExportOriginalDataRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}startRestoreJob(projectId,RestoreProjectRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/jobs/restore".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling startRestoreJob.");if(null==RestoreProjectRequest)throw new Error("Required parameter RestoreProjectRequest was null or undefined when calling startRestoreJob.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(RestoreProjectRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}startRestoreJobFromPublic(projectId,RestoreProjectFromPublicRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/jobs/restore/from-public".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling startRestoreJobFromPublic.");if(null==RestoreProjectFromPublicRequest)throw new Error("Required parameter RestoreProjectFromPublicRequest was null or undefined when calling startRestoreJobFromPublic.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(RestoreProjectFromPublicRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}startRetrainJob(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/jobs/retrain".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling startRetrainJob.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}startVersionJob(projectId,ProjectVersionRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/jobs/version".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling startVersionJob.");if(null==ProjectVersionRequest)throw new Error("Required parameter ProjectVersionRequest was null or undefined when calling startVersionJob.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(ProjectVersionRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}startWavExportJob(projectId,ExportWavDataRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/jobs/export/wav".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling startWavExportJob.");if(null==ExportWavDataRequest)throw new Error("Required parameter ExportWavDataRequest was null or undefined when calling startWavExportJob.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(ExportWavDataRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}trainAnomalyJob(projectId,learnId,StartTrainingRequestAnomaly,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/jobs/train/anomaly/{learnId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{learnId}",encodeURIComponent(String(learnId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling trainAnomalyJob.");if(null==learnId)throw new Error("Required parameter learnId was null or undefined when calling trainAnomalyJob.");if(null==StartTrainingRequestAnomaly)throw new Error("Required parameter StartTrainingRequestAnomaly was null or undefined when calling trainAnomalyJob.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(StartTrainingRequestAnomaly);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}trainKerasJob(projectId,learnId,SetKerasParameterRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/jobs/train/keras/{learnId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{learnId}",encodeURIComponent(String(learnId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling trainKerasJob.");if(null==learnId)throw new Error("Required parameter learnId was null or undefined when calling trainKerasJob.");if(null==SetKerasParameterRequest)throw new Error("Required parameter SetKerasParameterRequest was null or undefined when calling trainKerasJob.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(SetKerasParameterRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/LearnApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_14){Object.defineProperty(exports,"__esModule",{value:!0});exports.LearnApi=void 0;exports.LearnApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_14.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}anomalyTrainedFeatures(projectId,learnId,featureAx1,featureAx2,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/training/anomaly/{learnId}/features/get-graph".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{learnId}",encodeURIComponent(String(learnId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling anomalyTrainedFeatures.");if(null==learnId)throw new Error("Required parameter learnId was null or undefined when calling anomalyTrainedFeatures.");if(null==featureAx1)throw new Error("Required parameter featureAx1 was null or undefined when calling anomalyTrainedFeatures.");if(null==featureAx2)throw new Error("Required parameter featureAx2 was null or undefined when calling anomalyTrainedFeatures.");null!=featureAx1&&(queryParameters.featureAx1=featureAx1);null!=featureAx2&&(queryParameters.featureAx2=featureAx2);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}anomalyTrainedFeaturesPerSample(projectId,learnId,sampleId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/training/anomaly/{learnId}/features/get-graph/classification/{sampleId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{learnId}",encodeURIComponent(String(learnId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling anomalyTrainedFeaturesPerSample.");if(null==learnId)throw new Error("Required parameter learnId was null or undefined when calling anomalyTrainedFeaturesPerSample.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling anomalyTrainedFeaturesPerSample.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}downloadLearnModel(projectId,learnId,modelDownloadId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/learn-data/{learnId}/model/{modelDownloadId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{learnId}",encodeURIComponent(String(learnId))).replace("{modelDownloadId}",encodeURIComponent(String(modelDownloadId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling downloadLearnModel.");if(null==learnId)throw new Error("Required parameter learnId was null or undefined when calling downloadLearnModel.");if(null==modelDownloadId)throw new Error("Required parameter modelDownloadId was null or undefined when calling downloadLearnModel.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getAnomaly(projectId,learnId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/training/anomaly/{learnId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{learnId}",encodeURIComponent(String(learnId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getAnomaly.");if(null==learnId)throw new Error("Required parameter learnId was null or undefined when calling getAnomaly.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getAnomalyMetadata(projectId,learnId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/training/anomaly/{learnId}/metadata".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{learnId}",encodeURIComponent(String(learnId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getAnomalyMetadata.");if(null==learnId)throw new Error("Required parameter learnId was null or undefined when calling getAnomalyMetadata.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getKeras(projectId,learnId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/training/keras/{learnId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{learnId}",encodeURIComponent(String(learnId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getKeras.");if(null==learnId)throw new Error("Required parameter learnId was null or undefined when calling getKeras.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getKerasMetadata(projectId,learnId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/training/keras/{learnId}/metadata".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{learnId}",encodeURIComponent(String(learnId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getKerasMetadata.");if(null==learnId)throw new Error("Required parameter learnId was null or undefined when calling getKerasMetadata.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getKerasNotebook(projectId,learnId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/training/keras/{learnId}/ipynb".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{learnId}",encodeURIComponent(String(learnId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getKerasNotebook.");if(null==learnId)throw new Error("Required parameter learnId was null or undefined when calling getKerasNotebook.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getLearnXData(projectId,learnId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/training/{learnId}/x".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{learnId}",encodeURIComponent(String(learnId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getLearnXData.");if(null==learnId)throw new Error("Required parameter learnId was null or undefined when calling getLearnXData.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getLearnYData(projectId,learnId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/training/{learnId}/y".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{learnId}",encodeURIComponent(String(learnId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getLearnYData.");if(null==learnId)throw new Error("Required parameter learnId was null or undefined when calling getLearnYData.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}setAnomaly(projectId,learnId,SetAnomalyParameterRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/training/anomaly/{learnId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{learnId}",encodeURIComponent(String(learnId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling setAnomaly.");if(null==learnId)throw new Error("Required parameter learnId was null or undefined when calling setAnomaly.");if(null==SetAnomalyParameterRequest)throw new Error("Required parameter SetAnomalyParameterRequest was null or undefined when calling setAnomaly.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(SetAnomalyParameterRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}setKeras(projectId,learnId,SetKerasParameterRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/training/keras/{learnId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{learnId}",encodeURIComponent(String(learnId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling setKeras.");if(null==learnId)throw new Error("Required parameter learnId was null or undefined when calling setKeras.");if(null==SetKerasParameterRequest)throw new Error("Required parameter SetKerasParameterRequest was null or undefined when calling setKeras.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(SetKerasParameterRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}uploadKerasFiles(projectId,learnId,zip,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/training/keras/{learnId}/files".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{learnId}",encodeURIComponent(String(learnId))),headerParams={},formParams=new FormData,reqHasFile=!1;if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling uploadKerasFiles.");if(null==learnId)throw new Error("Required parameter learnId was null or undefined when calling uploadKerasFiles.");if(null==zip)throw new Error("Required parameter zip was null or undefined when calling uploadKerasFiles.");localVarPath=localVarPath+"?"+$.param({});reqHasFile=!0;formParams.append("zip",zip);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);0;let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);requestOptions.data=formParams;requestOptions.contentType=!1;extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/LoginApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_15){Object.defineProperty(exports,"__esModule",{value:!0});exports.LoginApi=void 0;exports.LoginApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_15.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}login(GetJWTTokenRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api-login",headerParams={};if(null==GetJWTTokenRequest)throw new Error("Required parameter GetJWTTokenRequest was null or undefined when calling login.");localVarPath=localVarPath+"?"+$.param({});headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(GetJWTTokenRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/OptimizationApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_16){Object.defineProperty(exports,"__esModule",{value:!0});exports.OptimizationApi=void 0;exports.OptimizationApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_16.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}createTrial(projectId,TunerTrial,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/optimize/create-trial".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling createTrial.");if(null==TunerTrial)throw new Error("Required parameter TunerTrial was null or undefined when calling createTrial.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(TunerTrial);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getState(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/optimize/state".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getState.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getTrialLogs(projectId,trialId,limit,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/optimize/trial/{trialId}/stdout".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{trialId}",encodeURIComponent(String(trialId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getTrialLogs.");if(null==trialId)throw new Error("Required parameter trialId was null or undefined when calling getTrialLogs.");null!=limit&&(queryParameters.limit=limit);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}scoreTrial(projectId,TunerTrial,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/optimize/score-trial".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling scoreTrial.");if(null==TunerTrial)throw new Error("Required parameter TunerTrial was null or undefined when calling scoreTrial.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(TunerTrial);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}updateConfig(projectId,OptimizeConfig,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/optimize/config".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling updateConfig.");if(null==OptimizeConfig)throw new Error("Required parameter OptimizeConfig was null or undefined when calling updateConfig.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(OptimizeConfig);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/OrganizationBlocksApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_17){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationBlocksApi=void 0;exports.OrganizationBlocksApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_17.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}addOrganizationDeployBlock(organizationId,name,dockerContainer,description,cliArguments,requestsCpu,requestsMemory,limitsCpu,limitsMemory,photo,integrateUrl,privileged,mountLearnBlock,supportsEonCompiler,showOptimizations,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/deploy".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={},formParams=new FormData,reqHasFile=!1;if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling addOrganizationDeployBlock.");if(null==name)throw new Error("Required parameter name was null or undefined when calling addOrganizationDeployBlock.");if(null==dockerContainer)throw new Error("Required parameter dockerContainer was null or undefined when calling addOrganizationDeployBlock.");if(null==description)throw new Error("Required parameter description was null or undefined when calling addOrganizationDeployBlock.");if(null==cliArguments)throw new Error("Required parameter cliArguments was null or undefined when calling addOrganizationDeployBlock.");localVarPath=localVarPath+"?"+$.param({});null!=name&&formParams.append("name",name);null!=dockerContainer&&formParams.append("dockerContainer",dockerContainer);null!=description&&formParams.append("description",description);null!=cliArguments&&formParams.append("cliArguments",cliArguments);null!=requestsCpu&&formParams.append("requestsCpu",requestsCpu);null!=requestsMemory&&formParams.append("requestsMemory",requestsMemory);null!=limitsCpu&&formParams.append("limitsCpu",limitsCpu);null!=limitsMemory&&formParams.append("limitsMemory",limitsMemory);reqHasFile=!0;formParams.append("photo",photo);null!=integrateUrl&&formParams.append("integrateUrl",integrateUrl);null!=privileged&&formParams.append("privileged",privileged);null!=mountLearnBlock&&formParams.append("mountLearnBlock",mountLearnBlock);null!=supportsEonCompiler&&formParams.append("supportsEonCompiler",supportsEonCompiler);null!=showOptimizations&&formParams.append("showOptimizations",showOptimizations);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);0;let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);requestOptions.data=formParams;requestOptions.contentType=!1;extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}addOrganizationDspBlock(organizationId,AddOrganizationDspBlockRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/dsp".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling addOrganizationDspBlock.");if(null==AddOrganizationDspBlockRequest)throw new Error("Required parameter AddOrganizationDspBlockRequest was null or undefined when calling addOrganizationDspBlock.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(AddOrganizationDspBlockRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}addOrganizationTransferLearningBlock(organizationId,AddOrganizationTransferLearningBlockRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/transfer-learning".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling addOrganizationTransferLearningBlock.");if(null==AddOrganizationTransferLearningBlockRequest)throw new Error("Required parameter AddOrganizationTransferLearningBlockRequest was null or undefined when calling addOrganizationTransferLearningBlock.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(AddOrganizationTransferLearningBlockRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}addOrganizationTransformationBlock(organizationId,AddOrganizationTransformationBlockRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/transformation".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling addOrganizationTransformationBlock.");if(null==AddOrganizationTransformationBlockRequest)throw new Error("Required parameter AddOrganizationTransformationBlockRequest was null or undefined when calling addOrganizationTransformationBlock.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(AddOrganizationTransformationBlockRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}deleteOrganizationDeployBlock(organizationId,deployId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/deploy/{deployId}".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{deployId}",encodeURIComponent(String(deployId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling deleteOrganizationDeployBlock.");if(null==deployId)throw new Error("Required parameter deployId was null or undefined when calling deleteOrganizationDeployBlock.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}deleteOrganizationDspBlock(organizationId,dspId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/dsp/{dspId}".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{dspId}",encodeURIComponent(String(dspId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling deleteOrganizationDspBlock.");if(null==dspId)throw new Error("Required parameter dspId was null or undefined when calling deleteOrganizationDspBlock.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}deleteOrganizationTransferLearningBlock(organizationId,transferLearningId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/transfer-learning/{transferLearningId}".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{transferLearningId}",encodeURIComponent(String(transferLearningId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling deleteOrganizationTransferLearningBlock.");if(null==transferLearningId)throw new Error("Required parameter transferLearningId was null or undefined when calling deleteOrganizationTransferLearningBlock.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}deleteOrganizationTransformationBlock(organizationId,transformationId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/transformation/{transformationId}".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{transformationId}",encodeURIComponent(String(transformationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling deleteOrganizationTransformationBlock.");if(null==transformationId)throw new Error("Required parameter transformationId was null or undefined when calling deleteOrganizationTransformationBlock.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listOrganizationDeployBlocks(organizationId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/deploy".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling listOrganizationDeployBlocks.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listOrganizationDspBlocks(organizationId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/dsp".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling listOrganizationDspBlocks.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listOrganizationTransferLearningBlocks(organizationId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/transfer-learning".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling listOrganizationTransferLearningBlocks.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listOrganizationTransformationBlocks(organizationId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/transformation".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling listOrganizationTransformationBlocks.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}retryOrganizationDspBlock(organizationId,dspId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/dsp/{dspId}/retry".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{dspId}",encodeURIComponent(String(dspId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling retryOrganizationDspBlock.");if(null==dspId)throw new Error("Required parameter dspId was null or undefined when calling retryOrganizationDspBlock.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}updateOrganizationDeployBlock(organizationId,deployId,name,dockerContainer,description,cliArguments,requestsCpu,requestsMemory,limitsCpu,limitsMemory,photo,integrateUrl,privileged,mountLearnBlock,supportsEonCompiler,showOptimizations,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/deploy/{deployId}".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{deployId}",encodeURIComponent(String(deployId))),headerParams={},formParams=new FormData,reqHasFile=!1;if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling updateOrganizationDeployBlock.");if(null==deployId)throw new Error("Required parameter deployId was null or undefined when calling updateOrganizationDeployBlock.");localVarPath=localVarPath+"?"+$.param({});null!=name&&formParams.append("name",name);null!=dockerContainer&&formParams.append("dockerContainer",dockerContainer);null!=description&&formParams.append("description",description);null!=cliArguments&&formParams.append("cliArguments",cliArguments);null!=requestsCpu&&formParams.append("requestsCpu",requestsCpu);null!=requestsMemory&&formParams.append("requestsMemory",requestsMemory);null!=limitsCpu&&formParams.append("limitsCpu",limitsCpu);null!=limitsMemory&&formParams.append("limitsMemory",limitsMemory);reqHasFile=!0;formParams.append("photo",photo);null!=integrateUrl&&formParams.append("integrateUrl",integrateUrl);null!=privileged&&formParams.append("privileged",privileged);null!=mountLearnBlock&&formParams.append("mountLearnBlock",mountLearnBlock);null!=supportsEonCompiler&&formParams.append("supportsEonCompiler",supportsEonCompiler);null!=showOptimizations&&formParams.append("showOptimizations",showOptimizations);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);0;let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);requestOptions.data=formParams;requestOptions.contentType=!1;extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}updateOrganizationDspBlock(organizationId,dspId,UpdateOrganizationDspBlockRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/dsp/{dspId}".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{dspId}",encodeURIComponent(String(dspId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling updateOrganizationDspBlock.");if(null==dspId)throw new Error("Required parameter dspId was null or undefined when calling updateOrganizationDspBlock.");if(null==UpdateOrganizationDspBlockRequest)throw new Error("Required parameter UpdateOrganizationDspBlockRequest was null or undefined when calling updateOrganizationDspBlock.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(UpdateOrganizationDspBlockRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}updateOrganizationTransferLearningBlock(organizationId,transferLearningId,UpdateOrganizationTransferLearningBlockRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/transfer-learning/{transferLearningId}".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{transferLearningId}",encodeURIComponent(String(transferLearningId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling updateOrganizationTransferLearningBlock.");if(null==transferLearningId)throw new Error("Required parameter transferLearningId was null or undefined when calling updateOrganizationTransferLearningBlock.");if(null==UpdateOrganizationTransferLearningBlockRequest)throw new Error("Required parameter UpdateOrganizationTransferLearningBlockRequest was null or undefined when calling updateOrganizationTransferLearningBlock.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(UpdateOrganizationTransferLearningBlockRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}updateOrganizationTransformationBlock(organizationId,transformationId,UpdateOrganizationTransformationBlockRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/transformation/{transformationId}".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{transformationId}",encodeURIComponent(String(transformationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling updateOrganizationTransformationBlock.");if(null==transformationId)throw new Error("Required parameter transformationId was null or undefined when calling updateOrganizationTransformationBlock.");if(null==UpdateOrganizationTransformationBlockRequest)throw new Error("Required parameter UpdateOrganizationTransformationBlockRequest was null or undefined when calling updateOrganizationTransformationBlock.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(UpdateOrganizationTransformationBlockRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/OrganizationCreateProjectApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_18){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationCreateProjectApi=void 0;exports.OrganizationCreateProjectApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_18.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}clearOrganizationTransform(organizationId,createProjectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/create-project/{createProjectId}/transform/clear".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{createProjectId}",encodeURIComponent(String(createProjectId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling clearOrganizationTransform.");if(null==createProjectId)throw new Error("Required parameter createProjectId was null or undefined when calling clearOrganizationTransform.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}deleteOrganizationCreateProject(organizationId,createProjectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/create-project/{createProjectId}".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{createProjectId}",encodeURIComponent(String(createProjectId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling deleteOrganizationCreateProject.");if(null==createProjectId)throw new Error("Required parameter createProjectId was null or undefined when calling deleteOrganizationCreateProject.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}deleteOrganizationCreateProjectFile(organizationId,createProjectId,createProjectFileId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/create-project/{createProjectId}/files/{createProjectFileId}".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{createProjectId}",encodeURIComponent(String(createProjectId))).replace("{createProjectFileId}",encodeURIComponent(String(createProjectFileId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling deleteOrganizationCreateProjectFile.");if(null==createProjectId)throw new Error("Required parameter createProjectId was null or undefined when calling deleteOrganizationCreateProjectFile.");if(null==createProjectFileId)throw new Error("Required parameter createProjectFileId was null or undefined when calling deleteOrganizationCreateProjectFile.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getOrganizationCreateProjectStatus(organizationId,createProjectId,transformLimit,transformOffset,selection,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/create-project/{createProjectId}".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{createProjectId}",encodeURIComponent(String(createProjectId))),queryParameters={},headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling getOrganizationCreateProjectStatus.");if(null==createProjectId)throw new Error("Required parameter createProjectId was null or undefined when calling getOrganizationCreateProjectStatus.");if(null==transformLimit)throw new Error("Required parameter transformLimit was null or undefined when calling getOrganizationCreateProjectStatus.");if(null==transformOffset)throw new Error("Required parameter transformOffset was null or undefined when calling getOrganizationCreateProjectStatus.");null!=transformLimit&&(queryParameters.transformLimit=transformLimit);null!=transformOffset&&(queryParameters.transformOffset=transformOffset);null!=selection&&(queryParameters.selection=selection);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getOrganizationCreateProjects(organizationId,limit,offset,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/create-project".replace("{organizationId}",encodeURIComponent(String(organizationId))),queryParameters={},headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling getOrganizationCreateProjects.");null!=limit&&(queryParameters.limit=limit);null!=offset&&(queryParameters.offset=offset);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}organizationAddCollaborator(organizationId,UpdateOrganizationAddCollaboratorRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/add-project-collaborator".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling organizationAddCollaborator.");if(null==UpdateOrganizationAddCollaboratorRequest)throw new Error("Required parameter UpdateOrganizationAddCollaboratorRequest was null or undefined when calling organizationAddCollaborator.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(UpdateOrganizationAddCollaboratorRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}organizationCreateEmptyProject(organizationId,UpdateOrganizationCreateEmptyProjectRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/new-project".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling organizationCreateEmptyProject.");if(null==UpdateOrganizationCreateEmptyProjectRequest)throw new Error("Required parameter UpdateOrganizationCreateEmptyProjectRequest was null or undefined when calling organizationCreateEmptyProject.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(UpdateOrganizationCreateEmptyProjectRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}organizationCreateProject(organizationId,OrganizationCreateProjectRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/create-project".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling organizationCreateProject.");if(null==OrganizationCreateProjectRequest)throw new Error("Required parameter OrganizationCreateProjectRequest was null or undefined when calling organizationCreateProject.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(OrganizationCreateProjectRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}retryOrganizationCreateProjectFile(organizationId,createProjectId,createProjectFileId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/create-project/{createProjectId}/files/{createProjectFileId}/retry".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{createProjectId}",encodeURIComponent(String(createProjectId))).replace("{createProjectFileId}",encodeURIComponent(String(createProjectFileId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling retryOrganizationCreateProjectFile.");if(null==createProjectId)throw new Error("Required parameter createProjectId was null or undefined when calling retryOrganizationCreateProjectFile.");if(null==createProjectFileId)throw new Error("Required parameter createProjectFileId was null or undefined when calling retryOrganizationCreateProjectFile.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}retryOrganizationTransform(organizationId,createProjectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/create-project/{createProjectId}/transform/retry".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{createProjectId}",encodeURIComponent(String(createProjectId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling retryOrganizationTransform.");if(null==createProjectId)throw new Error("Required parameter createProjectId was null or undefined when calling retryOrganizationTransform.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}retryOrganizationUpload(organizationId,createProjectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/create-project/{createProjectId}/upload/retry".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{createProjectId}",encodeURIComponent(String(createProjectId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling retryOrganizationUpload.");if(null==createProjectId)throw new Error("Required parameter createProjectId was null or undefined when calling retryOrganizationUpload.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}updateOrganizationCreateProject(organizationId,createProjectId,UpdateOrganizationCreateProjectRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/create-project/{createProjectId}".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{createProjectId}",encodeURIComponent(String(createProjectId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling updateOrganizationCreateProject.");if(null==createProjectId)throw new Error("Required parameter createProjectId was null or undefined when calling updateOrganizationCreateProject.");if(null==UpdateOrganizationCreateProjectRequest)throw new Error("Required parameter UpdateOrganizationCreateProjectRequest was null or undefined when calling updateOrganizationCreateProject.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(UpdateOrganizationCreateProjectRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}uploadCustomBlock(organizationId,tar,type,blockId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/custom-block".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={},formParams=new FormData,reqHasFile=!1;if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling uploadCustomBlock.");if(null==tar)throw new Error("Required parameter tar was null or undefined when calling uploadCustomBlock.");if(null==type)throw new Error("Required parameter type was null or undefined when calling uploadCustomBlock.");if(null==blockId)throw new Error("Required parameter blockId was null or undefined when calling uploadCustomBlock.");localVarPath=localVarPath+"?"+$.param({});reqHasFile=!0;formParams.append("tar",tar);null!=type&&formParams.append("type",type);null!=blockId&&formParams.append("blockId",blockId);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);0;let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);requestOptions.data=formParams;requestOptions.contentType=!1;extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/OrganizationDataApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_19){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationDataApi=void 0;exports.OrganizationDataApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_19.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}addOrganizationBucket(organizationId,AddOrganizationBucketRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/buckets".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling addOrganizationBucket.");if(null==AddOrganizationBucketRequest)throw new Error("Required parameter AddOrganizationBucketRequest was null or undefined when calling addOrganizationBucket.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(AddOrganizationBucketRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}addOrganizationDataFile(organizationId,dataId,files,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/data/{dataId}/add".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{dataId}",encodeURIComponent(String(dataId))),headerParams={},formParams=new FormData,reqHasFile=!1;if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling addOrganizationDataFile.");if(null==dataId)throw new Error("Required parameter dataId was null or undefined when calling addOrganizationDataFile.");if(null==files)throw new Error("Required parameter files was null or undefined when calling addOrganizationDataFile.");localVarPath=localVarPath+"?"+$.param({});reqHasFile=!0;files.forEach(f=>formParams.append("files[]",f));this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);0;let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);requestOptions.data=formParams;requestOptions.contentType=!1;extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}addOrganizationDataFolder(organizationId,OrganizationAddDataFolderRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/data/add-folder".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling addOrganizationDataFolder.");if(null==OrganizationAddDataFolderRequest)throw new Error("Required parameter OrganizationAddDataFolderRequest was null or undefined when calling addOrganizationDataFolder.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(OrganizationAddDataFolderRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}addOrganizationDataItem(organizationId,name,dataset,metadata,files,bucketId,bucketName,bucketPath,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/data/add".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={},formParams=new FormData,reqHasFile=!1;if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling addOrganizationDataItem.");if(null==name)throw new Error("Required parameter name was null or undefined when calling addOrganizationDataItem.");if(null==dataset)throw new Error("Required parameter dataset was null or undefined when calling addOrganizationDataItem.");if(null==metadata)throw new Error("Required parameter metadata was null or undefined when calling addOrganizationDataItem.");if(null==files)throw new Error("Required parameter files was null or undefined when calling addOrganizationDataItem.");localVarPath=localVarPath+"?"+$.param({});null!=name&&formParams.append("name",name);null!=bucketId&&formParams.append("bucketId",bucketId);null!=bucketName&&formParams.append("bucketName",bucketName);null!=dataset&&formParams.append("dataset",dataset);null!=bucketPath&&formParams.append("bucketPath",bucketPath);null!=metadata&&formParams.append("metadata",metadata);reqHasFile=!0;files.forEach(f=>formParams.append("files[]",f));this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);0;let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);requestOptions.data=formParams;requestOptions.contentType=!1;extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}changeDatasetOrganizationDataItems(organizationId,dataIds,SetOrganizationDataDatasetRequest,dataset,filter,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/data/change-dataset".replace("{organizationId}",encodeURIComponent(String(organizationId))),queryParameters={},headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling changeDatasetOrganizationDataItems.");if(null==dataIds)throw new Error("Required parameter dataIds was null or undefined when calling changeDatasetOrganizationDataItems.");if(null==SetOrganizationDataDatasetRequest)throw new Error("Required parameter SetOrganizationDataDatasetRequest was null or undefined when calling changeDatasetOrganizationDataItems.");null!=dataset&&(queryParameters.dataset=dataset);null!=dataIds&&(queryParameters.dataIds=dataIds);null!=filter&&(queryParameters.filter=filter);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(SetOrganizationDataDatasetRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}clearChecklistOrganizationDataItems(organizationId,dataIds,dataset,filter,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/data/clear-checklist".replace("{organizationId}",encodeURIComponent(String(organizationId))),queryParameters={},headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling clearChecklistOrganizationDataItems.");if(null==dataIds)throw new Error("Required parameter dataIds was null or undefined when calling clearChecklistOrganizationDataItems.");null!=dataset&&(queryParameters.dataset=dataset);null!=dataIds&&(queryParameters.dataIds=dataIds);null!=filter&&(queryParameters.filter=filter);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}deleteOrganizationDataFile(organizationId,dataId,fileName,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/data/{dataId}/download".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{dataId}",encodeURIComponent(String(dataId))),queryParameters={},headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling deleteOrganizationDataFile.");if(null==dataId)throw new Error("Required parameter dataId was null or undefined when calling deleteOrganizationDataFile.");if(null==fileName)throw new Error("Required parameter fileName was null or undefined when calling deleteOrganizationDataFile.");null!=fileName&&(queryParameters.fileName=fileName);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}deleteOrganizationDataItem(organizationId,dataId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/data/{dataId}".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{dataId}",encodeURIComponent(String(dataId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling deleteOrganizationDataItem.");if(null==dataId)throw new Error("Required parameter dataId was null or undefined when calling deleteOrganizationDataItem.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}deleteOrganizationDataItems(organizationId,dataIds,dataset,filter,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/data/delete".replace("{organizationId}",encodeURIComponent(String(organizationId))),queryParameters={},headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling deleteOrganizationDataItems.");if(null==dataIds)throw new Error("Required parameter dataIds was null or undefined when calling deleteOrganizationDataItems.");null!=dataset&&(queryParameters.dataset=dataset);null!=dataIds&&(queryParameters.dataIds=dataIds);null!=filter&&(queryParameters.filter=filter);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}downloadOrganizationDataFile(organizationId,dataId,fileName,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/data/{dataId}/files/download".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{dataId}",encodeURIComponent(String(dataId))),queryParameters={},headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling downloadOrganizationDataFile.");if(null==dataId)throw new Error("Required parameter dataId was null or undefined when calling downloadOrganizationDataFile.");if(null==fileName)throw new Error("Required parameter fileName was null or undefined when calling downloadOrganizationDataFile.");null!=fileName&&(queryParameters.fileName=fileName);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}downloadOrganizationDataItem(organizationId,dataIds,dataset,filter,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/data/download".replace("{organizationId}",encodeURIComponent(String(organizationId))),queryParameters={},headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling downloadOrganizationDataItem.");if(null==dataIds)throw new Error("Required parameter dataIds was null or undefined when calling downloadOrganizationDataItem.");null!=dataset&&(queryParameters.dataset=dataset);null!=dataIds&&(queryParameters.dataIds=dataIds);null!=filter&&(queryParameters.filter=filter);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}downloadOrganizationSingleDataItem(organizationId,dataId,filter,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/data/{dataId}/download".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{dataId}",encodeURIComponent(String(dataId))),queryParameters={},headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling downloadOrganizationSingleDataItem.");if(null==dataId)throw new Error("Required parameter dataId was null or undefined when calling downloadOrganizationSingleDataItem.");null!=filter&&(queryParameters.filter=filter);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getOrganizationDataItem(organizationId,dataId,filter,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/data/{dataId}".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{dataId}",encodeURIComponent(String(dataId))),queryParameters={},headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling getOrganizationDataItem.");if(null==dataId)throw new Error("Required parameter dataId was null or undefined when calling getOrganizationDataItem.");null!=filter&&(queryParameters.filter=filter);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listOrganizationBuckets(organizationId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/buckets".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling listOrganizationBuckets.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listOrganizationData(organizationId,dataset,filter,limit,offset,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/data".replace("{organizationId}",encodeURIComponent(String(organizationId))),queryParameters={},headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling listOrganizationData.");null!=dataset&&(queryParameters.dataset=dataset);null!=filter&&(queryParameters.filter=filter);null!=limit&&(queryParameters.limit=limit);null!=offset&&(queryParameters.offset=offset);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listOrganizationFiles(organizationId,dataset,filter,limit,offset,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/data/files".replace("{organizationId}",encodeURIComponent(String(organizationId))),queryParameters={},headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling listOrganizationFiles.");null!=dataset&&(queryParameters.dataset=dataset);null!=filter&&(queryParameters.filter=filter);null!=limit&&(queryParameters.limit=limit);null!=offset&&(queryParameters.offset=offset);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}organizationBulkUpdateMetadata(organizationId,dataset,csvFile,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/data/bulk-metadata".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={},formParams=new FormData,reqHasFile=!1;if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling organizationBulkUpdateMetadata.");if(null==dataset)throw new Error("Required parameter dataset was null or undefined when calling organizationBulkUpdateMetadata.");if(null==csvFile)throw new Error("Required parameter csvFile was null or undefined when calling organizationBulkUpdateMetadata.");localVarPath=localVarPath+"?"+$.param({});null!=dataset&&formParams.append("dataset",dataset);reqHasFile=!0;formParams.append("csvFile",csvFile);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);0;let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);requestOptions.data=formParams;requestOptions.contentType=!1;extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}refreshOrganizationData(organizationId,dataset,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/data/refresh".replace("{organizationId}",encodeURIComponent(String(organizationId))),queryParameters={},headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling refreshOrganizationData.");null!=dataset&&(queryParameters.dataset=dataset);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}removeOrganizationBucket(organizationId,bucketId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/buckets/{bucketId}".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{bucketId}",encodeURIComponent(String(bucketId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling removeOrganizationBucket.");if(null==bucketId)throw new Error("Required parameter bucketId was null or undefined when calling removeOrganizationBucket.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}updateOrganizationBucket(organizationId,bucketId,UpdateOrganizationBucketRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/buckets/{bucketId}".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{bucketId}",encodeURIComponent(String(bucketId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling updateOrganizationBucket.");if(null==bucketId)throw new Error("Required parameter bucketId was null or undefined when calling updateOrganizationBucket.");if(null==UpdateOrganizationBucketRequest)throw new Error("Required parameter UpdateOrganizationBucketRequest was null or undefined when calling updateOrganizationBucket.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(UpdateOrganizationBucketRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}updateOrganizationDataItem(organizationId,dataId,UpdateOrganizationDataItemRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/data/{dataId}".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{dataId}",encodeURIComponent(String(dataId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling updateOrganizationDataItem.");if(null==dataId)throw new Error("Required parameter dataId was null or undefined when calling updateOrganizationDataItem.");if(null==UpdateOrganizationDataItemRequest)throw new Error("Required parameter UpdateOrganizationDataItemRequest was null or undefined when calling updateOrganizationDataItem.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(UpdateOrganizationDataItemRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}verifyOrganizationBucket(organizationId,VerifyOrganizationBucketRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/buckets/verify".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling verifyOrganizationBucket.");if(null==VerifyOrganizationBucketRequest)throw new Error("Required parameter VerifyOrganizationBucketRequest was null or undefined when calling verifyOrganizationBucket.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(VerifyOrganizationBucketRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/OrganizationJobsApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_20){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationJobsApi=void 0;exports.OrganizationJobsApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_20.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}cancelOrganizationJob(organizationId,jobId,forceCancel,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/jobs/{jobId}/cancel".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{jobId}",encodeURIComponent(String(jobId))),queryParameters={},headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling cancelOrganizationJob.");if(null==jobId)throw new Error("Required parameter jobId was null or undefined when calling cancelOrganizationJob.");null!=forceCancel&&(queryParameters.forceCancel=forceCancel);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}downloadOrganizationJobsLogs(organizationId,jobId,limit,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/jobs/{jobId}/stdout/download".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{jobId}",encodeURIComponent(String(jobId))),queryParameters={},headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling downloadOrganizationJobsLogs.");if(null==jobId)throw new Error("Required parameter jobId was null or undefined when calling downloadOrganizationJobsLogs.");null!=limit&&(queryParameters.limit=limit);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getOrganizationJobStatus(organizationId,jobId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/jobs/{jobId}/status".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{jobId}",encodeURIComponent(String(jobId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling getOrganizationJobStatus.");if(null==jobId)throw new Error("Required parameter jobId was null or undefined when calling getOrganizationJobStatus.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getOrganizationJobsLogs(organizationId,jobId,limit,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/jobs/{jobId}/stdout".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{jobId}",encodeURIComponent(String(jobId))),queryParameters={},headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling getOrganizationJobsLogs.");if(null==jobId)throw new Error("Required parameter jobId was null or undefined when calling getOrganizationJobsLogs.");null!=limit&&(queryParameters.limit=limit);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getOrganizationSocketToken(organizationId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/socket-token".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling getOrganizationSocketToken.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listActiveOrganizationJobs(organizationId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/jobs".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling listActiveOrganizationJobs.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listFinishedOrganizationJobs(organizationId,startDate,endDate,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/jobs/history".replace("{organizationId}",encodeURIComponent(String(organizationId))),queryParameters={},headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling listFinishedOrganizationJobs.");null!=startDate&&(queryParameters.startDate=startDate.toISOString());null!=endDate&&(queryParameters.endDate=endDate.toISOString());localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/OrganizationPipelinesApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_21){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationPipelinesApi=void 0;exports.OrganizationPipelinesApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_21.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}createOrganizationPipeline(organizationId,OrganizationUpdatePipelineBody,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/pipelines".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling createOrganizationPipeline.");if(null==OrganizationUpdatePipelineBody)throw new Error("Required parameter OrganizationUpdatePipelineBody was null or undefined when calling createOrganizationPipeline.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(OrganizationUpdatePipelineBody);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}deleteOrganizationPipeline(organizationId,pipelineId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/pipelines/{pipelineId}".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{pipelineId}",encodeURIComponent(String(pipelineId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling deleteOrganizationPipeline.");if(null==pipelineId)throw new Error("Required parameter pipelineId was null or undefined when calling deleteOrganizationPipeline.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getOrganizationPipeline(organizationId,pipelineId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/pipelines/{pipelineId}".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{pipelineId}",encodeURIComponent(String(pipelineId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling getOrganizationPipeline.");if(null==pipelineId)throw new Error("Required parameter pipelineId was null or undefined when calling getOrganizationPipeline.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listOrganizationPipelines(organizationId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/pipelines".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling listOrganizationPipelines.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}runOrganizationPipeline(organizationId,pipelineId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/pipelines/{pipelineId}/run".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{pipelineId}",encodeURIComponent(String(pipelineId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling runOrganizationPipeline.");if(null==pipelineId)throw new Error("Required parameter pipelineId was null or undefined when calling runOrganizationPipeline.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}updateOrganizationPipeline(organizationId,pipelineId,OrganizationUpdatePipelineBody,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/pipelines/{pipelineId}".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{pipelineId}",encodeURIComponent(String(pipelineId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling updateOrganizationPipeline.");if(null==pipelineId)throw new Error("Required parameter pipelineId was null or undefined when calling updateOrganizationPipeline.");if(null==OrganizationUpdatePipelineBody)throw new Error("Required parameter OrganizationUpdatePipelineBody was null or undefined when calling updateOrganizationPipeline.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(OrganizationUpdatePipelineBody);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/OrganizationPortalsApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_22){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationPortalsApi=void 0;exports.OrganizationPortalsApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_22.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}createOrganizationPortal(organizationId,CreateOrganizationPortalRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/portals/create".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling createOrganizationPortal.");if(null==CreateOrganizationPortalRequest)throw new Error("Required parameter CreateOrganizationPortalRequest was null or undefined when calling createOrganizationPortal.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(CreateOrganizationPortalRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}deleteOrganizationPortal(organizationId,portalId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/portals/{portalId}/delete".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{portalId}",encodeURIComponent(String(portalId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling deleteOrganizationPortal.");if(null==portalId)throw new Error("Required parameter portalId was null or undefined when calling deleteOrganizationPortal.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getOrganizationPortal(organizationId,portalId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/portals/{portalId}".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{portalId}",encodeURIComponent(String(portalId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling getOrganizationPortal.");if(null==portalId)throw new Error("Required parameter portalId was null or undefined when calling getOrganizationPortal.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listOrganizationPortals(organizationId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/portals".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling listOrganizationPortals.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}updateOrganizationPortal(organizationId,portalId,CreateOrganizationPortalRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/portals/{portalId}/update".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{portalId}",encodeURIComponent(String(portalId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling updateOrganizationPortal.");if(null==portalId)throw new Error("Required parameter portalId was null or undefined when calling updateOrganizationPortal.");if(null==CreateOrganizationPortalRequest)throw new Error("Required parameter CreateOrganizationPortalRequest was null or undefined when calling updateOrganizationPortal.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"PUT",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(CreateOrganizationPortalRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/OrganizationRequiresAdminApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_23){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationRequiresAdminApi=void 0;exports.OrganizationRequiresAdminApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_23.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}addOrganizationApiKey(organizationId,AddOrganizationApiKeyRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/apikeys".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling addOrganizationApiKey.");if(null==AddOrganizationApiKeyRequest)throw new Error("Required parameter AddOrganizationApiKeyRequest was null or undefined when calling addOrganizationApiKey.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(AddOrganizationApiKeyRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}addOrganizationBucket(organizationId,AddOrganizationBucketRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/buckets".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling addOrganizationBucket.");if(null==AddOrganizationBucketRequest)throw new Error("Required parameter AddOrganizationBucketRequest was null or undefined when calling addOrganizationBucket.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(AddOrganizationBucketRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}addOrganizationMember(organizationId,AddMemberRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/members/add".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling addOrganizationMember.");if(null==AddMemberRequest)throw new Error("Required parameter AddMemberRequest was null or undefined when calling addOrganizationMember.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(AddMemberRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}deleteOrganization(organizationId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling deleteOrganization.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}inviteOrganizationMember(organizationId,InviteMemberRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/members/invite".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling inviteOrganizationMember.");if(null==InviteMemberRequest)throw new Error("Required parameter InviteMemberRequest was null or undefined when calling inviteOrganizationMember.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(InviteMemberRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}organizationAddCollaborator(organizationId,UpdateOrganizationAddCollaboratorRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/add-project-collaborator".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling organizationAddCollaborator.");if(null==UpdateOrganizationAddCollaboratorRequest)throw new Error("Required parameter UpdateOrganizationAddCollaboratorRequest was null or undefined when calling organizationAddCollaborator.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(UpdateOrganizationAddCollaboratorRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}removeOrganizationBucket(organizationId,bucketId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/buckets/{bucketId}".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{bucketId}",encodeURIComponent(String(bucketId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling removeOrganizationBucket.");if(null==bucketId)throw new Error("Required parameter bucketId was null or undefined when calling removeOrganizationBucket.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}removeOrganizationMember(organizationId,RemoveMemberRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/members/remove".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling removeOrganizationMember.");if(null==RemoveMemberRequest)throw new Error("Required parameter RemoveMemberRequest was null or undefined when calling removeOrganizationMember.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(RemoveMemberRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}revokeOrganizationApiKey(organizationId,apiKeyId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/apikeys/{apiKeyId}".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{apiKeyId}",encodeURIComponent(String(apiKeyId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling revokeOrganizationApiKey.");if(null==apiKeyId)throw new Error("Required parameter apiKeyId was null or undefined when calling revokeOrganizationApiKey.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}setOrganizationMemberDatasets(organizationId,memberId,SetMemberDatasetsRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/members/{memberId}/datasets".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{memberId}",encodeURIComponent(String(memberId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling setOrganizationMemberDatasets.");if(null==memberId)throw new Error("Required parameter memberId was null or undefined when calling setOrganizationMemberDatasets.");if(null==SetMemberDatasetsRequest)throw new Error("Required parameter SetMemberDatasetsRequest was null or undefined when calling setOrganizationMemberDatasets.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(SetMemberDatasetsRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}setOrganizationMemberRole(organizationId,memberId,SetMemberRoleRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/members/{memberId}/role".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{memberId}",encodeURIComponent(String(memberId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling setOrganizationMemberRole.");if(null==memberId)throw new Error("Required parameter memberId was null or undefined when calling setOrganizationMemberRole.");if(null==SetMemberRoleRequest)throw new Error("Required parameter SetMemberRoleRequest was null or undefined when calling setOrganizationMemberRole.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(SetMemberRoleRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}testOrganizationAdmin(organizationId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/test-admin".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling testOrganizationAdmin.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}updateOrganization(organizationId,UpdateOrganizationRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling updateOrganization.");if(null==UpdateOrganizationRequest)throw new Error("Required parameter UpdateOrganizationRequest was null or undefined when calling updateOrganization.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(UpdateOrganizationRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}updateOrganizationBucket(organizationId,bucketId,UpdateOrganizationBucketRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/buckets/{bucketId}".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{bucketId}",encodeURIComponent(String(bucketId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling updateOrganizationBucket.");if(null==bucketId)throw new Error("Required parameter bucketId was null or undefined when calling updateOrganizationBucket.");if(null==UpdateOrganizationBucketRequest)throw new Error("Required parameter UpdateOrganizationBucketRequest was null or undefined when calling updateOrganizationBucket.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(UpdateOrganizationBucketRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/OrganizationsApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_24){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationsApi=void 0;exports.OrganizationsApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_24.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}addOrganizationApiKey(organizationId,AddOrganizationApiKeyRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/apikeys".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling addOrganizationApiKey.");if(null==AddOrganizationApiKeyRequest)throw new Error("Required parameter AddOrganizationApiKeyRequest was null or undefined when calling addOrganizationApiKey.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(AddOrganizationApiKeyRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}addOrganizationMember(organizationId,AddMemberRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/members/add".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling addOrganizationMember.");if(null==AddMemberRequest)throw new Error("Required parameter AddMemberRequest was null or undefined when calling addOrganizationMember.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(AddMemberRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}createOrganization(CreateOrganizationRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/create",headerParams={};if(null==CreateOrganizationRequest)throw new Error("Required parameter CreateOrganizationRequest was null or undefined when calling createOrganization.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(CreateOrganizationRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}deleteOrganization(organizationId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling deleteOrganization.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getOrganizationInfo(organizationId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling getOrganizationInfo.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}inviteOrganizationMember(organizationId,InviteMemberRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/members/invite".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling inviteOrganizationMember.");if(null==InviteMemberRequest)throw new Error("Required parameter InviteMemberRequest was null or undefined when calling inviteOrganizationMember.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(InviteMemberRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listOrganizationApiKeys(organizationId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/apikeys".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling listOrganizationApiKeys.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listOrganizationProjects(organizationId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/projects".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling listOrganizationProjects.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listOrganizations(extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations",headerParams={};localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}removeOrganizationMember(organizationId,RemoveMemberRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/members/remove".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling removeOrganizationMember.");if(null==RemoveMemberRequest)throw new Error("Required parameter RemoveMemberRequest was null or undefined when calling removeOrganizationMember.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(RemoveMemberRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}resendOrganizationMemberInvite(organizationId,memberId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/members/{memberId}/resend-invite".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{memberId}",encodeURIComponent(String(memberId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling resendOrganizationMemberInvite.");if(null==memberId)throw new Error("Required parameter memberId was null or undefined when calling resendOrganizationMemberInvite.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}revokeOrganizationApiKey(organizationId,apiKeyId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/apikeys/{apiKeyId}".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{apiKeyId}",encodeURIComponent(String(apiKeyId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling revokeOrganizationApiKey.");if(null==apiKeyId)throw new Error("Required parameter apiKeyId was null or undefined when calling revokeOrganizationApiKey.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}setOrganizationMemberDatasets(organizationId,memberId,SetMemberDatasetsRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/members/{memberId}/datasets".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{memberId}",encodeURIComponent(String(memberId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling setOrganizationMemberDatasets.");if(null==memberId)throw new Error("Required parameter memberId was null or undefined when calling setOrganizationMemberDatasets.");if(null==SetMemberDatasetsRequest)throw new Error("Required parameter SetMemberDatasetsRequest was null or undefined when calling setOrganizationMemberDatasets.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(SetMemberDatasetsRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}setOrganizationMemberRole(organizationId,memberId,SetMemberRoleRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/members/{memberId}/role".replace("{organizationId}",encodeURIComponent(String(organizationId))).replace("{memberId}",encodeURIComponent(String(memberId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling setOrganizationMemberRole.");if(null==memberId)throw new Error("Required parameter memberId was null or undefined when calling setOrganizationMemberRole.");if(null==SetMemberRoleRequest)throw new Error("Required parameter SetMemberRoleRequest was null or undefined when calling setOrganizationMemberRole.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(SetMemberRoleRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}testOrganizationAdmin(organizationId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/test-admin".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling testOrganizationAdmin.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}updateOrganization(organizationId,UpdateOrganizationRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={};if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling updateOrganization.");if(null==UpdateOrganizationRequest)throw new Error("Required parameter UpdateOrganizationRequest was null or undefined when calling updateOrganization.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(UpdateOrganizationRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}uploadOrganizationLogo(organizationId,image,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/logo".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={},formParams=new FormData,reqHasFile=!1;if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling uploadOrganizationLogo.");if(null==image)throw new Error("Required parameter image was null or undefined when calling uploadOrganizationLogo.");localVarPath=localVarPath+"?"+$.param({});reqHasFile=!0;formParams.append("image",image);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);0;let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);requestOptions.data=formParams;requestOptions.contentType=!1;extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}uploadOrganizationReadmeImage(organizationId,image,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/{organizationId}/readme/upload-image".replace("{organizationId}",encodeURIComponent(String(organizationId))),headerParams={},formParams=new FormData,reqHasFile=!1;if(null==organizationId)throw new Error("Required parameter organizationId was null or undefined when calling uploadOrganizationReadmeImage.");if(null==image)throw new Error("Required parameter image was null or undefined when calling uploadOrganizationReadmeImage.");localVarPath=localVarPath+"?"+$.param({});reqHasFile=!0;formParams.append("image",image);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);0;let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);requestOptions.data=formParams;requestOptions.contentType=!1;extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/ProjectsApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_25){Object.defineProperty(exports,"__esModule",{value:!0});exports.ProjectsApi=void 0;exports.ProjectsApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_25.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}addCollaborator(projectId,AddCollaboratorRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/collaborators/add".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling addCollaborator.");if(null==AddCollaboratorRequest)throw new Error("Required parameter AddCollaboratorRequest was null or undefined when calling addCollaborator.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(AddCollaboratorRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}addNote(projectId,AddNoteRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/notes/add".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling addNote.");if(null==AddNoteRequest)throw new Error("Required parameter AddNoteRequest was null or undefined when calling addNote.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(AddNoteRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}addProjectApiKey(projectId,AddApiKeyRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/apikeys".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling addProjectApiKey.");if(null==AddApiKeyRequest)throw new Error("Required parameter AddApiKeyRequest was null or undefined when calling addProjectApiKey.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(AddApiKeyRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}addProjectHmacKey(projectId,AddHmacKeyRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/hmackeys".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling addProjectHmacKey.");if(null==AddHmacKeyRequest)throw new Error("Required parameter AddHmacKeyRequest was null or undefined when calling addProjectHmacKey.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(AddHmacKeyRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}createProject(CreateProjectRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/projects/create",headerParams={};if(null==CreateProjectRequest)throw new Error("Required parameter CreateProjectRequest was null or undefined when calling createProject.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(CreateProjectRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}deleteProject(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling deleteProject.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}deleteVersion(projectId,versionId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/versions/{versionId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{versionId}",encodeURIComponent(String(versionId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling deleteVersion.");if(null==versionId)throw new Error("Required parameter versionId was null or undefined when calling deleteVersion.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getNotes(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/notes".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getNotes.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getProjectDataAxesSummary(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/data-axes".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getProjectDataAxesSummary.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getProjectInfo(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getProjectInfo.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getProjectRecommendedDataInterval(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/data-interval".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getProjectRecommendedDataInterval.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getSocketToken(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/socket-token".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getSocketToken.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}launchGettingStartedWizard(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/launch-getting-started".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling launchGettingStartedWizard.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listDevkeys(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/devkeys".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling listDevkeys.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listDownloads(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/downloads".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling listDownloads.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listEmails(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/emails".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling listEmails.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listProjectApiKeys(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/apikeys".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling listProjectApiKeys.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listProjectHmacKeys(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/hmackeys".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling listProjectHmacKeys.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listProjects(extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/projects",headerParams={};localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listPublicVersions(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/versions/public".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling listPublicVersions.");localVarPath=localVarPath+"?"+$.param({});let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listVersions(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/versions".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling listVersions.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}makeVersionPrivate(projectId,versionId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/versions/{versionId}/make-private".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{versionId}",encodeURIComponent(String(versionId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling makeVersionPrivate.");if(null==versionId)throw new Error("Required parameter versionId was null or undefined when calling makeVersionPrivate.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}removeCollaborator(projectId,RemoveCollaboratorRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/collaborators/remove".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling removeCollaborator.");if(null==RemoveCollaboratorRequest)throw new Error("Required parameter RemoveCollaboratorRequest was null or undefined when calling removeCollaborator.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(RemoveCollaboratorRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}removeNote(projectId,noteId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/notes/{noteId}/remove".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{noteId}",encodeURIComponent(String(noteId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling removeNote.");if(null==noteId)throw new Error("Required parameter noteId was null or undefined when calling removeNote.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}revokeProjectApiKey(projectId,apiKeyId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/apikeys/{apiKeyId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{apiKeyId}",encodeURIComponent(String(apiKeyId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling revokeProjectApiKey.");if(null==apiKeyId)throw new Error("Required parameter apiKeyId was null or undefined when calling revokeProjectApiKey.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}revokeProjectHmacKey(projectId,hmacId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/hmackeys/{hmacId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{hmacId}",encodeURIComponent(String(hmacId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling revokeProjectHmacKey.");if(null==hmacId)throw new Error("Required parameter hmacId was null or undefined when calling revokeProjectHmacKey.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}setProjectComputeTimeLimit(projectId,SetProjectComputeTimeRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/compute-time-limit".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling setProjectComputeTimeLimit.");if(null==SetProjectComputeTimeRequest)throw new Error("Required parameter SetProjectComputeTimeRequest was null or undefined when calling setProjectComputeTimeLimit.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(SetProjectComputeTimeRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}setProjectFileSizeLimit(projectId,SetProjectDspFileSizeRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/dsp-file-size-limit".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling setProjectFileSizeLimit.");if(null==SetProjectDspFileSizeRequest)throw new Error("Required parameter SetProjectDspFileSizeRequest was null or undefined when calling setProjectFileSizeLimit.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(SetProjectDspFileSizeRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}transferOwnership(projectId,AddCollaboratorRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/collaborators/transfer-ownership".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling transferOwnership.");if(null==AddCollaboratorRequest)throw new Error("Required parameter AddCollaboratorRequest was null or undefined when calling transferOwnership.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(AddCollaboratorRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}transferOwnershipOrganization(projectId,TransferOwnershipOrganizationRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/collaborators/transfer-ownership-org".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling transferOwnershipOrganization.");if(null==TransferOwnershipOrganizationRequest)throw new Error("Required parameter TransferOwnershipOrganizationRequest was null or undefined when calling transferOwnershipOrganization.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(TransferOwnershipOrganizationRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}updateNote(projectId,noteId,UpdateNoteRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/notes/{noteId}/update".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{noteId}",encodeURIComponent(String(noteId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling updateNote.");if(null==noteId)throw new Error("Required parameter noteId was null or undefined when calling updateNote.");if(null==UpdateNoteRequest)throw new Error("Required parameter UpdateNoteRequest was null or undefined when calling updateNote.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(UpdateNoteRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}updateProject(projectId,UpdateProjectRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling updateProject.");if(null==UpdateProjectRequest)throw new Error("Required parameter UpdateProjectRequest was null or undefined when calling updateProject.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(UpdateProjectRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}updateVersion(projectId,versionId,UpdateVersionRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/versions/{versionId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{versionId}",encodeURIComponent(String(versionId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling updateVersion.");if(null==versionId)throw new Error("Required parameter versionId was null or undefined when calling updateVersion.");if(null==UpdateVersionRequest)throw new Error("Required parameter UpdateVersionRequest was null or undefined when calling updateVersion.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(UpdateVersionRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}uploadReadmeImage(projectId,image,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/readme/upload-image".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={},formParams=new FormData,reqHasFile=!1;if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling uploadReadmeImage.");if(null==image)throw new Error("Required parameter image was null or undefined when calling uploadReadmeImage.");localVarPath=localVarPath+"?"+$.param({});reqHasFile=!0;formParams.append("image",image);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);0;let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);requestOptions.data=formParams;requestOptions.contentType=!1;extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/RawDataApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_26){Object.defineProperty(exports,"__esModule",{value:!0});exports.RawDataApi=void 0;exports.RawDataApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_26.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}batchDelete(projectId,category,labels,filename,maxLength,minLength,signatureValidity,includeDisabled,ids,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/batch/delete".replace("{projectId}",encodeURIComponent(String(projectId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling batchDelete.");if(null==category)throw new Error("Required parameter category was null or undefined when calling batchDelete.");null!=category&&(queryParameters.category=category);null!=labels&&(queryParameters.labels=labels);null!=filename&&(queryParameters.filename=filename);null!=maxLength&&(queryParameters.maxLength=maxLength);null!=minLength&&(queryParameters.minLength=minLength);null!=signatureValidity&&(queryParameters.signatureValidity=signatureValidity);null!=includeDisabled&&(queryParameters.includeDisabled=includeDisabled);null!=ids&&(queryParameters.ids=ids);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}batchDisable(projectId,category,labels,filename,maxLength,minLength,signatureValidity,includeDisabled,ids,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/batch/disable-samples".replace("{projectId}",encodeURIComponent(String(projectId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling batchDisable.");if(null==category)throw new Error("Required parameter category was null or undefined when calling batchDisable.");null!=category&&(queryParameters.category=category);null!=labels&&(queryParameters.labels=labels);null!=filename&&(queryParameters.filename=filename);null!=maxLength&&(queryParameters.maxLength=maxLength);null!=minLength&&(queryParameters.minLength=minLength);null!=signatureValidity&&(queryParameters.signatureValidity=signatureValidity);null!=includeDisabled&&(queryParameters.includeDisabled=includeDisabled);null!=ids&&(queryParameters.ids=ids);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}batchEditLabels(projectId,category,EditSampleLabelRequest,labels,filename,maxLength,minLength,signatureValidity,includeDisabled,ids,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/batch/edit-labels".replace("{projectId}",encodeURIComponent(String(projectId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling batchEditLabels.");if(null==category)throw new Error("Required parameter category was null or undefined when calling batchEditLabels.");if(null==EditSampleLabelRequest)throw new Error("Required parameter EditSampleLabelRequest was null or undefined when calling batchEditLabels.");null!=category&&(queryParameters.category=category);null!=labels&&(queryParameters.labels=labels);null!=filename&&(queryParameters.filename=filename);null!=maxLength&&(queryParameters.maxLength=maxLength);null!=minLength&&(queryParameters.minLength=minLength);null!=signatureValidity&&(queryParameters.signatureValidity=signatureValidity);null!=includeDisabled&&(queryParameters.includeDisabled=includeDisabled);null!=ids&&(queryParameters.ids=ids);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(EditSampleLabelRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}batchEnable(projectId,category,labels,filename,maxLength,minLength,signatureValidity,includeDisabled,ids,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/batch/enable-samples".replace("{projectId}",encodeURIComponent(String(projectId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling batchEnable.");if(null==category)throw new Error("Required parameter category was null or undefined when calling batchEnable.");null!=category&&(queryParameters.category=category);null!=labels&&(queryParameters.labels=labels);null!=filename&&(queryParameters.filename=filename);null!=maxLength&&(queryParameters.maxLength=maxLength);null!=minLength&&(queryParameters.minLength=minLength);null!=signatureValidity&&(queryParameters.signatureValidity=signatureValidity);null!=includeDisabled&&(queryParameters.includeDisabled=includeDisabled);null!=ids&&(queryParameters.ids=ids);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}batchMove(projectId,category,MoveRawDataRequest,labels,filename,maxLength,minLength,signatureValidity,includeDisabled,ids,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/batch/moveSamples".replace("{projectId}",encodeURIComponent(String(projectId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling batchMove.");if(null==category)throw new Error("Required parameter category was null or undefined when calling batchMove.");if(null==MoveRawDataRequest)throw new Error("Required parameter MoveRawDataRequest was null or undefined when calling batchMove.");null!=category&&(queryParameters.category=category);null!=labels&&(queryParameters.labels=labels);null!=filename&&(queryParameters.filename=filename);null!=maxLength&&(queryParameters.maxLength=maxLength);null!=minLength&&(queryParameters.minLength=minLength);null!=signatureValidity&&(queryParameters.signatureValidity=signatureValidity);null!=includeDisabled&&(queryParameters.includeDisabled=includeDisabled);null!=ids&&(queryParameters.ids=ids);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(MoveRawDataRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}countSamples(projectId,category,labels,filename,maxLength,minLength,signatureValidity,includeDisabled,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/count".replace("{projectId}",encodeURIComponent(String(projectId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling countSamples.");if(null==category)throw new Error("Required parameter category was null or undefined when calling countSamples.");null!=category&&(queryParameters.category=category);null!=labels&&(queryParameters.labels=labels);null!=filename&&(queryParameters.filename=filename);null!=maxLength&&(queryParameters.maxLength=maxLength);null!=minLength&&(queryParameters.minLength=minLength);null!=signatureValidity&&(queryParameters.signatureValidity=signatureValidity);null!=includeDisabled&&(queryParameters.includeDisabled=includeDisabled);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}cropSample(projectId,sampleId,CropSampleRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/{sampleId}/crop".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling cropSample.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling cropSample.");if(null==CropSampleRequest)throw new Error("Required parameter CropSampleRequest was null or undefined when calling cropSample.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(CropSampleRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}deleteAllSamples(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/delete-all".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling deleteAllSamples.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}deleteAllSamplesByCategory(projectId,category,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/delete-all/{category}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{category}",encodeURIComponent(String(category))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling deleteAllSamplesByCategory.");if(null==category)throw new Error("Required parameter category was null or undefined when calling deleteAllSamplesByCategory.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}deleteSample(projectId,sampleId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/{sampleId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling deleteSample.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling deleteSample.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}disableSample(projectId,sampleId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/{sampleId}/disable".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling disableSample.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling disableSample.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}editLabel(projectId,sampleId,EditSampleLabelRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/{sampleId}/edit-label".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling editLabel.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling editLabel.");if(null==EditSampleLabelRequest)throw new Error("Required parameter EditSampleLabelRequest was null or undefined when calling editLabel.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(EditSampleLabelRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}enableSample(projectId,sampleId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/{sampleId}/enable".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling enableSample.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling enableSample.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}findSegmentsInSample(projectId,sampleId,FindSegmentSampleRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/{sampleId}/find-segments".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling findSegmentsInSample.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling findSegmentsInSample.");if(null==FindSegmentSampleRequest)throw new Error("Required parameter FindSegmentSampleRequest was null or undefined when calling findSegmentsInSample.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(FindSegmentSampleRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getObjectDetectionLabelQueue(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/label-object-detection-queue".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getObjectDetectionLabelQueue.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getSample(projectId,sampleId,limitPayloadValues,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/{sampleId}".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getSample.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling getSample.");null!=limitPayloadValues&&(queryParameters.limitPayloadValues=limitPayloadValues);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getSampleAsAudio(projectId,sampleId,axisIx,sliceStart,sliceEnd,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/{sampleId}/wav".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getSampleAsAudio.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling getSampleAsAudio.");if(null==axisIx)throw new Error("Required parameter axisIx was null or undefined when calling getSampleAsAudio.");null!=axisIx&&(queryParameters.axisIx=axisIx);null!=sliceStart&&(queryParameters.sliceStart=sliceStart);null!=sliceEnd&&(queryParameters.sliceEnd=sliceEnd);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getSampleAsImage(projectId,sampleId,afterInputBlock,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/{sampleId}/image".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getSampleAsImage.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling getSampleAsImage.");null!=afterInputBlock&&(queryParameters.afterInputBlock=afterInputBlock);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getSampleAsRaw(projectId,sampleId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/{sampleId}/raw".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getSampleAsRaw.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling getSampleAsRaw.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getSampleAsVideo(projectId,sampleId,afterInputBlock,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/{sampleId}/video".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getSampleAsVideo.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling getSampleAsVideo.");null!=afterInputBlock&&(queryParameters.afterInputBlock=afterInputBlock);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getSampleSlice(projectId,sampleId,sliceStart,sliceEnd,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/{sampleId}/slice".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getSampleSlice.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling getSampleSlice.");if(null==sliceStart)throw new Error("Required parameter sliceStart was null or undefined when calling getSampleSlice.");if(null==sliceEnd)throw new Error("Required parameter sliceEnd was null or undefined when calling getSampleSlice.");null!=sliceStart&&(queryParameters.sliceStart=sliceStart);null!=sliceEnd&&(queryParameters.sliceEnd=sliceEnd);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getUncroppedDownsampledSample(projectId,sampleId,limitPayloadValues,zoomStart,zoomEnd,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/{sampleId}/original".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getUncroppedDownsampledSample.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling getUncroppedDownsampledSample.");null!=limitPayloadValues&&(queryParameters.limitPayloadValues=limitPayloadValues);null!=zoomStart&&(queryParameters.zoomStart=zoomStart);null!=zoomEnd&&(queryParameters.zoomEnd=zoomEnd);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listSamples(projectId,category,limit,offset,excludeSensors,labels,filename,maxLength,minLength,signatureValidity,includeDisabled,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data".replace("{projectId}",encodeURIComponent(String(projectId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling listSamples.");if(null==category)throw new Error("Required parameter category was null or undefined when calling listSamples.");null!=category&&(queryParameters.category=category);null!=limit&&(queryParameters.limit=limit);null!=offset&&(queryParameters.offset=offset);null!=excludeSensors&&(queryParameters.excludeSensors=excludeSensors);null!=labels&&(queryParameters.labels=labels);null!=filename&&(queryParameters.filename=filename);null!=maxLength&&(queryParameters.maxLength=maxLength);null!=minLength&&(queryParameters.minLength=minLength);null!=signatureValidity&&(queryParameters.signatureValidity=signatureValidity);null!=includeDisabled&&(queryParameters.includeDisabled=includeDisabled);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}moveSample(projectId,sampleId,MoveRawDataRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/{sampleId}/move".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling moveSample.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling moveSample.");if(null==MoveRawDataRequest)throw new Error("Required parameter MoveRawDataRequest was null or undefined when calling moveSample.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(MoveRawDataRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}rebalanceDataset(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/rebalance".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling rebalanceDataset.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}renameSample(projectId,sampleId,RenameSampleRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/{sampleId}/rename".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling renameSample.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling renameSample.");if(null==RenameSampleRequest)throw new Error("Required parameter RenameSampleRequest was null or undefined when calling renameSample.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(RenameSampleRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}segmentSample(projectId,sampleId,SegmentSampleRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/{sampleId}/segment".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling segmentSample.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling segmentSample.");if(null==SegmentSampleRequest)throw new Error("Required parameter SegmentSampleRequest was null or undefined when calling segmentSample.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(SegmentSampleRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}setSampleBoundingBoxes(projectId,sampleId,SampleBoundingBoxesRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/{sampleId}/bounding-boxes".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling setSampleBoundingBoxes.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling setSampleBoundingBoxes.");if(null==SampleBoundingBoxesRequest)throw new Error("Required parameter SampleBoundingBoxesRequest was null or undefined when calling setSampleBoundingBoxes.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(SampleBoundingBoxesRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}splitSampleInFrames(projectId,sampleId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/{sampleId}/split".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling splitSampleInFrames.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling splitSampleInFrames.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}storeSegmentLength(projectId,StoreSegmentLengthRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/{sampleId}/store-segment-length".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling storeSegmentLength.");if(null==StoreSegmentLengthRequest)throw new Error("Required parameter StoreSegmentLengthRequest was null or undefined when calling storeSegmentLength.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(StoreSegmentLengthRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}trackObjects(projectId,TrackObjectsRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/track-objects".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling trackObjects.");if(null==TrackObjectsRequest)throw new Error("Required parameter TrackObjectsRequest was null or undefined when calling trackObjects.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(TrackObjectsRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/RequiresSudoApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_27){Object.defineProperty(exports,"__esModule",{value:!0});exports.RequiresSudoApi=void 0;exports.RequiresSudoApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_27.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}adminAddUserToProject(adminProjectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/admin/projects/{adminProjectId}/add".replace("{adminProjectId}",encodeURIComponent(String(adminProjectId))),headerParams={};if(null==adminProjectId)throw new Error("Required parameter adminProjectId was null or undefined when calling adminAddUserToProject.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}adminFindUser(query,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/admin/find-user",queryParameters={},headerParams={};if(null==query)throw new Error("Required parameter query was null or undefined when calling adminFindUser.");null!=query&&(queryParameters.query=query);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}adminGetUser(userId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/admin/users/{userId}".replace("{userId}",encodeURIComponent(String(userId))),headerParams={};if(null==userId)throw new Error("Required parameter userId was null or undefined when calling adminGetUser.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}createOrganization(CreateOrganizationRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/organizations/create",headerParams={};if(null==CreateOrganizationRequest)throw new Error("Required parameter CreateOrganizationRequest was null or undefined when calling createOrganization.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(CreateOrganizationRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}createThirdPartyAuth(CreateThirdPartyAuthRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/third-party-auth",headerParams={};if(null==CreateThirdPartyAuthRequest)throw new Error("Required parameter CreateThirdPartyAuthRequest was null or undefined when calling createThirdPartyAuth.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(CreateThirdPartyAuthRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}deleteThirdPartyAuth(authId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/third-party-auth/{authId}".replace("{authId}",encodeURIComponent(String(authId))),headerParams={};if(null==authId)throw new Error("Required parameter authId was null or undefined when calling deleteThirdPartyAuth.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getAllThirdPartyAuth(extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/third-party-auth",headerParams={};localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listEmailsCurrentUser(extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/user/emails",headerParams={};localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listEmailsUser(userId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/users/{userId}/emails".replace("{userId}",encodeURIComponent(String(userId))),headerParams={};if(null==userId)throw new Error("Required parameter userId was null or undefined when calling listEmailsUser.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}setProjectComputeTimeLimit(projectId,SetProjectComputeTimeRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/compute-time-limit".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling setProjectComputeTimeLimit.");if(null==SetProjectComputeTimeRequest)throw new Error("Required parameter SetProjectComputeTimeRequest was null or undefined when calling setProjectComputeTimeLimit.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(SetProjectComputeTimeRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}setProjectFileSizeLimit(projectId,SetProjectDspFileSizeRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/dsp-file-size-limit".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling setProjectFileSizeLimit.");if(null==SetProjectDspFileSizeRequest)throw new Error("Required parameter SetProjectDspFileSizeRequest was null or undefined when calling setProjectFileSizeLimit.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(SetProjectDspFileSizeRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}updateThirdPartyAuth(authId,UpdateThirdPartyAuthRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/third-party-auth/{authId}".replace("{authId}",encodeURIComponent(String(authId))),headerParams={};if(null==authId)throw new Error("Required parameter authId was null or undefined when calling updateThirdPartyAuth.");if(null==UpdateThirdPartyAuthRequest)throw new Error("Required parameter UpdateThirdPartyAuthRequest was null or undefined when calling updateThirdPartyAuth.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(UpdateThirdPartyAuthRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}uploadKerasFiles(projectId,learnId,zip,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/training/keras/{learnId}/files".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{learnId}",encodeURIComponent(String(learnId))),headerParams={},formParams=new FormData,reqHasFile=!1;if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling uploadKerasFiles.");if(null==learnId)throw new Error("Required parameter learnId was null or undefined when calling uploadKerasFiles.");if(null==zip)throw new Error("Required parameter zip was null or undefined when calling uploadKerasFiles.");localVarPath=localVarPath+"?"+$.param({});reqHasFile=!0;formParams.append("zip",zip);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);0;let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);requestOptions.data=formParams;requestOptions.contentType=!1;extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/RequiresThirdPartyAuthApiKeyApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_28){Object.defineProperty(exports,"__esModule",{value:!0});exports.RequiresThirdPartyAuthApiKeyApi=void 0;exports.RequiresThirdPartyAuthApiKeyApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_28.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}createUserThirdParty(authId,CreateUserThirdPartyRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/third-party-auth/{authId}/login".replace("{authId}",encodeURIComponent(String(authId))),headerParams={};if(null==authId)throw new Error("Required parameter authId was null or undefined when calling createUserThirdParty.");if(null==CreateUserThirdPartyRequest)throw new Error("Required parameter CreateUserThirdPartyRequest was null or undefined when calling createUserThirdParty.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(CreateUserThirdPartyRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/SupportsRangeApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_29){Object.defineProperty(exports,"__esModule",{value:!0});exports.SupportsRangeApi=void 0;exports.SupportsRangeApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_29.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}getSampleAsAudio(projectId,sampleId,axisIx,sliceStart,sliceEnd,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/raw-data/{sampleId}/wav".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{sampleId}",encodeURIComponent(String(sampleId))),queryParameters={},headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getSampleAsAudio.");if(null==sampleId)throw new Error("Required parameter sampleId was null or undefined when calling getSampleAsAudio.");if(null==axisIx)throw new Error("Required parameter axisIx was null or undefined when calling getSampleAsAudio.");null!=axisIx&&(queryParameters.axisIx=axisIx);null!=sliceStart&&(queryParameters.sliceStart=sliceStart);null!=sliceEnd&&(queryParameters.sliceEnd=sliceEnd);localVarPath=localVarPath+"?"+$.param(queryParameters);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getWavFile(projectId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/application-testing/wav".replace("{projectId}",encodeURIComponent(String(projectId))),headerParams={};if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling getWavFile.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/ThirdPartyAuthApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_30){Object.defineProperty(exports,"__esModule",{value:!0});exports.ThirdPartyAuthApi=void 0;exports.ThirdPartyAuthApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_30.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}authorizeThirdParty(projectId,authId,nextUrl,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/{projectId}/third-party-auth/{authId}/authorize".replace("{projectId}",encodeURIComponent(String(projectId))).replace("{authId}",encodeURIComponent(String(authId))),headerParams={},formParams=new FormData;if(null==projectId)throw new Error("Required parameter projectId was null or undefined when calling authorizeThirdParty.");if(null==authId)throw new Error("Required parameter authId was null or undefined when calling authorizeThirdParty.");if(null==nextUrl)throw new Error("Required parameter nextUrl was null or undefined when calling authorizeThirdParty.");localVarPath=localVarPath+"?"+$.param({});null!=nextUrl&&formParams.append("nextUrl",nextUrl);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/x-www-form-urlencoded";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);requestOptions.data=formParams;0;extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}createThirdPartyAuth(CreateThirdPartyAuthRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/third-party-auth",headerParams={};if(null==CreateThirdPartyAuthRequest)throw new Error("Required parameter CreateThirdPartyAuthRequest was null or undefined when calling createThirdPartyAuth.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(CreateThirdPartyAuthRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}createUserThirdParty(authId,CreateUserThirdPartyRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/third-party-auth/{authId}/login".replace("{authId}",encodeURIComponent(String(authId))),headerParams={};if(null==authId)throw new Error("Required parameter authId was null or undefined when calling createUserThirdParty.");if(null==CreateUserThirdPartyRequest)throw new Error("Required parameter CreateUserThirdPartyRequest was null or undefined when calling createUserThirdParty.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(CreateUserThirdPartyRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}deleteThirdPartyAuth(authId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/third-party-auth/{authId}".replace("{authId}",encodeURIComponent(String(authId))),headerParams={};if(null==authId)throw new Error("Required parameter authId was null or undefined when calling deleteThirdPartyAuth.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getAllThirdPartyAuth(extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/third-party-auth",headerParams={};localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getThirdPartyAuth(authId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/third-party-auth/{authId}".replace("{authId}",encodeURIComponent(String(authId))),headerParams={};if(null==authId)throw new Error("Required parameter authId was null or undefined when calling getThirdPartyAuth.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}updateThirdPartyAuth(authId,UpdateThirdPartyAuthRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/third-party-auth/{authId}".replace("{authId}",encodeURIComponent(String(authId))),headerParams={};if(null==authId)throw new Error("Required parameter authId was null or undefined when calling updateThirdPartyAuth.");if(null==UpdateThirdPartyAuthRequest)throw new Error("Required parameter UpdateThirdPartyAuthRequest was null or undefined when calling updateThirdPartyAuth.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(UpdateThirdPartyAuthRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/UploadPortalApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_31){Object.defineProperty(exports,"__esModule",{value:!0});exports.UploadPortalApi=void 0;exports.UploadPortalApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_31.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}createSignedUploadLink(portalId,CreateSignedUploadLinkRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/portals/{portalId}/upload-link".replace("{portalId}",encodeURIComponent(String(portalId))),headerParams={};if(null==portalId)throw new Error("Required parameter portalId was null or undefined when calling createSignedUploadLink.");if(null==CreateSignedUploadLinkRequest)throw new Error("Required parameter CreateSignedUploadLinkRequest was null or undefined when calling createSignedUploadLink.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(CreateSignedUploadLinkRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getPortalInfo(portalId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/portals/{portalId}".replace("{portalId}",encodeURIComponent(String(portalId))),headerParams={};if(null==portalId)throw new Error("Required parameter portalId was null or undefined when calling getPortalInfo.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listPortalFilesInFolder(portalId,ListPortalFilesInFolderRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/portals/{portalId}/files".replace("{portalId}",encodeURIComponent(String(portalId))),headerParams={};if(null==portalId)throw new Error("Required parameter portalId was null or undefined when calling listPortalFilesInFolder.");if(null==ListPortalFilesInFolderRequest)throw new Error("Required parameter ListPortalFilesInFolderRequest was null or undefined when calling listPortalFilesInFolder.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(ListPortalFilesInFolderRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/UserApi",["require","exports","client/api-definition/configuration"],(function(require,exports,configuration_32){Object.defineProperty(exports,"__esModule",{value:!0});exports.UserApi=void 0;exports.UserApi=class{constructor(basePath,configuration,defaultExtraJQueryAjaxSettings){this.basePath="https://studio.edgeimpulse.com/v1";this.defaultHeaders=[];this.defaultExtraJQueryAjaxSettings=void 0;this.configuration=new configuration_32.Configuration;basePath&&(this.basePath=basePath);configuration&&(this.configuration=configuration);defaultExtraJQueryAjaxSettings&&(this.defaultExtraJQueryAjaxSettings=defaultExtraJQueryAjaxSettings)}extendObj(objA,objB){for(let key in objB)objB.hasOwnProperty(key)&&(objA[key]=objB[key]);return objA}activateCurrentUser(ActivateUserRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/user/activate",headerParams={};if(null==ActivateUserRequest)throw new Error("Required parameter ActivateUserRequest was null or undefined when calling activateCurrentUser.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(ActivateUserRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}activateUser(userId,ActivateUserRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/users/{userId}/activate".replace("{userId}",encodeURIComponent(String(userId))),headerParams={};if(null==userId)throw new Error("Required parameter userId was null or undefined when calling activateUser.");if(null==ActivateUserRequest)throw new Error("Required parameter ActivateUserRequest was null or undefined when calling activateUser.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(ActivateUserRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}activateUserByThirdPartyActivationCode(ActivateUserByThirdPartyActivationCodeRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/user/activate-by-third-party-activation-code",headerParams={};if(null==ActivateUserByThirdPartyActivationCodeRequest)throw new Error("Required parameter ActivateUserByThirdPartyActivationCodeRequest was null or undefined when calling activateUserByThirdPartyActivationCode.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(ActivateUserByThirdPartyActivationCodeRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}changePasswordCurrentUser(ChangePasswordRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/user/change-password",headerParams={};if(null==ChangePasswordRequest)throw new Error("Required parameter ChangePasswordRequest was null or undefined when calling changePasswordCurrentUser.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(ChangePasswordRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}changePasswordUser(userId,ChangePasswordRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/users/{userId}/change-password".replace("{userId}",encodeURIComponent(String(userId))),headerParams={};if(null==userId)throw new Error("Required parameter userId was null or undefined when calling changePasswordUser.");if(null==ChangePasswordRequest)throw new Error("Required parameter ChangePasswordRequest was null or undefined when calling changePasswordUser.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(ChangePasswordRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}convertCurrentUser(ConvertUserRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/user/convert",headerParams={};if(null==ConvertUserRequest)throw new Error("Required parameter ConvertUserRequest was null or undefined when calling convertCurrentUser.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(ConvertUserRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}createEvaluationUser(extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api-user-create-evaluate",headerParams={};localVarPath=localVarPath+"?"+$.param({});let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}createUser(CreateUserRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api-user-create",headerParams={};if(null==CreateUserRequest)throw new Error("Required parameter CreateUserRequest was null or undefined when calling createUser.");localVarPath=localVarPath+"?"+$.param({});headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(CreateUserRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}deleteCurrentUser(extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/user",headerParams={};localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}deleteUser(userId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/users/{userId}".replace("{userId}",encodeURIComponent(String(userId))),headerParams={};if(null==userId)throw new Error("Required parameter userId was null or undefined when calling deleteUser.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"DELETE",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getCurrentUser(extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/user",headerParams={};localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getUser(userId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/users/{userId}".replace("{userId}",encodeURIComponent(String(userId))),headerParams={};if(null==userId)throw new Error("Required parameter userId was null or undefined when calling getUser.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}getUserByThirdPartyActivationCode(UserByThirdPartyActivationRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/user/by-third-party-activation-code",headerParams={};if(null==UserByThirdPartyActivationRequest)throw new Error("Required parameter UserByThirdPartyActivationRequest was null or undefined when calling getUserByThirdPartyActivationCode.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(UserByThirdPartyActivationRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listEmailsCurrentUser(extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/user/emails",headerParams={};localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listEmailsUser(userId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/users/{userId}/emails".replace("{userId}",encodeURIComponent(String(userId))),headerParams={};if(null==userId)throw new Error("Required parameter userId was null or undefined when calling listEmailsUser.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listOrganizationBucketsCurrentUser(extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/users/buckets",headerParams={};localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listOrganizationBucketsUser(userId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/users/{userId}/buckets".replace("{userId}",encodeURIComponent(String(userId))),headerParams={};if(null==userId)throw new Error("Required parameter userId was null or undefined when calling listOrganizationBucketsUser.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listOrganizationsCurrentUser(extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/user/organizations",headerParams={};localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}listOrganizationsUser(userId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/users/{userId}/organizations".replace("{userId}",encodeURIComponent(String(userId))),headerParams={};if(null==userId)throw new Error("Required parameter userId was null or undefined when calling listOrganizationsUser.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"GET",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}requestActivationCodeCurrentUser(extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/user/request-activation",headerParams={};localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}requestActivationCodeUser(userId,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/users/{userId}/request-activation".replace("{userId}",encodeURIComponent(String(userId))),headerParams={};if(null==userId)throw new Error("Required parameter userId was null or undefined when calling requestActivationCodeUser.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}requestResetPassword(RequestResetPasswordRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api-user-request-reset-password",headerParams={};if(null==RequestResetPasswordRequest)throw new Error("Required parameter RequestResetPasswordRequest was null or undefined when calling requestResetPassword.");localVarPath=localVarPath+"?"+$.param({});headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(RequestResetPasswordRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}resetPassword(ResetPasswordRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api-user-reset-password",headerParams={};if(null==ResetPasswordRequest)throw new Error("Required parameter ResetPasswordRequest was null or undefined when calling resetPassword.");localVarPath=localVarPath+"?"+$.param({});headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(ResetPasswordRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}updateCurrentUser(UpdateUserRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/user",headerParams={};if(null==UpdateUserRequest)throw new Error("Required parameter UpdateUserRequest was null or undefined when calling updateCurrentUser.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(UpdateUserRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}updateUser(userId,UpdateUserRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/users/{userId}".replace("{userId}",encodeURIComponent(String(userId))),headerParams={};if(null==userId)throw new Error("Required parameter userId was null or undefined when calling updateUser.");if(null==UpdateUserRequest)throw new Error("Required parameter UpdateUserRequest was null or undefined when calling updateUser.");localVarPath=localVarPath+"?"+$.param({});this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(UpdateUserRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}uploadPhotoCurrentUser(photo,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/user/photo",headerParams={},formParams=new FormData,reqHasFile=!1;if(null==photo)throw new Error("Required parameter photo was null or undefined when calling uploadPhotoCurrentUser.");localVarPath=localVarPath+"?"+$.param({});reqHasFile=!0;formParams.append("photo",photo);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);0;let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);requestOptions.data=formParams;requestOptions.contentType=!1;extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}uploadPhotoUser(userId,photo,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api/users/{userId}/photo".replace("{userId}",encodeURIComponent(String(userId))),headerParams={},formParams=new FormData,reqHasFile=!1;if(null==userId)throw new Error("Required parameter userId was null or undefined when calling uploadPhotoUser.");if(null==photo)throw new Error("Required parameter photo was null or undefined when calling uploadPhotoUser.");localVarPath=localVarPath+"?"+$.param({});reqHasFile=!0;formParams.append("photo",photo);this.configuration.apiKey&&(headerParams["x-api-key"]=this.configuration.apiKey);this.configuration.apiKey&&(headerParams["x-jwt-token"]=this.configuration.apiKey);0;let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);requestOptions.data=formParams;requestOptions.contentType=!1;extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}verifyResetPassword(VerifyResetPasswordRequest,extraJQueryAjaxSettings){let localVarPath=this.basePath+"/api-user-verify-reset-password-code",headerParams={};if(null==VerifyResetPasswordRequest)throw new Error("Required parameter VerifyResetPasswordRequest was null or undefined when calling verifyResetPassword.");localVarPath=localVarPath+"?"+$.param({});headerParams["Content-Type"]="application/json";let requestOptions={url:localVarPath,type:"POST",headers:headerParams,processData:!1};requestOptions.data=JSON.stringify(VerifyResetPasswordRequest);headerParams["Content-Type"]&&(requestOptions.contentType=headerParams["Content-Type"]);extraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,extraJQueryAjaxSettings));this.defaultExtraJQueryAjaxSettings&&(requestOptions=Object.assign(requestOptions,this.defaultExtraJQueryAjaxSettings));let dfd=$.Deferred();$.ajax(requestOptions).then((data,textStatus,jqXHR)=>dfd.resolve({response:jqXHR,body:data}),(xhr,textStatus,errorThrown)=>dfd.reject({response:xhr,errorThrown:errorThrown}));return dfd.promise()}}}));define("client/api-definition/api/api",["require","exports","client/api-definition/api/AdminApi","client/api-definition/api/AdminApi","client/api-definition/api/AllowsReadOnlyApi","client/api-definition/api/AllowsReadOnlyApi","client/api-definition/api/ApplicationTestingApi","client/api-definition/api/ApplicationTestingApi","client/api-definition/api/AuthApi","client/api-definition/api/AuthApi","client/api-definition/api/CDNApi","client/api-definition/api/CDNApi","client/api-definition/api/ClassifyApi","client/api-definition/api/ClassifyApi","client/api-definition/api/DSPApi","client/api-definition/api/DSPApi","client/api-definition/api/DeploymentApi","client/api-definition/api/DeploymentApi","client/api-definition/api/DevicesApi","client/api-definition/api/DevicesApi","client/api-definition/api/ExportApi","client/api-definition/api/ExportApi","client/api-definition/api/HealthApi","client/api-definition/api/HealthApi","client/api-definition/api/ImpulseApi","client/api-definition/api/ImpulseApi","client/api-definition/api/JobsApi","client/api-definition/api/JobsApi","client/api-definition/api/LearnApi","client/api-definition/api/LearnApi","client/api-definition/api/LoginApi","client/api-definition/api/LoginApi","client/api-definition/api/OptimizationApi","client/api-definition/api/OptimizationApi","client/api-definition/api/OrganizationBlocksApi","client/api-definition/api/OrganizationBlocksApi","client/api-definition/api/OrganizationCreateProjectApi","client/api-definition/api/OrganizationCreateProjectApi","client/api-definition/api/OrganizationDataApi","client/api-definition/api/OrganizationDataApi","client/api-definition/api/OrganizationJobsApi","client/api-definition/api/OrganizationJobsApi","client/api-definition/api/OrganizationPipelinesApi","client/api-definition/api/OrganizationPipelinesApi","client/api-definition/api/OrganizationPortalsApi","client/api-definition/api/OrganizationPortalsApi","client/api-definition/api/OrganizationRequiresAdminApi","client/api-definition/api/OrganizationRequiresAdminApi","client/api-definition/api/OrganizationsApi","client/api-definition/api/OrganizationsApi","client/api-definition/api/ProjectsApi","client/api-definition/api/ProjectsApi","client/api-definition/api/RawDataApi","client/api-definition/api/RawDataApi","client/api-definition/api/RequiresSudoApi","client/api-definition/api/RequiresSudoApi","client/api-definition/api/RequiresThirdPartyAuthApiKeyApi","client/api-definition/api/RequiresThirdPartyAuthApiKeyApi","client/api-definition/api/SupportsRangeApi","client/api-definition/api/SupportsRangeApi","client/api-definition/api/ThirdPartyAuthApi","client/api-definition/api/ThirdPartyAuthApi","client/api-definition/api/UploadPortalApi","client/api-definition/api/UploadPortalApi","client/api-definition/api/UserApi","client/api-definition/api/UserApi"],(function(require,exports,AdminApi_1,AdminApi_2,AllowsReadOnlyApi_1,AllowsReadOnlyApi_2,ApplicationTestingApi_1,ApplicationTestingApi_2,AuthApi_1,AuthApi_2,CDNApi_1,CDNApi_2,ClassifyApi_1,ClassifyApi_2,DSPApi_1,DSPApi_2,DeploymentApi_1,DeploymentApi_2,DevicesApi_1,DevicesApi_2,ExportApi_1,ExportApi_2,HealthApi_1,HealthApi_2,ImpulseApi_1,ImpulseApi_2,JobsApi_1,JobsApi_2,LearnApi_1,LearnApi_2,LoginApi_1,LoginApi_2,OptimizationApi_1,OptimizationApi_2,OrganizationBlocksApi_1,OrganizationBlocksApi_2,OrganizationCreateProjectApi_1,OrganizationCreateProjectApi_2,OrganizationDataApi_1,OrganizationDataApi_2,OrganizationJobsApi_1,OrganizationJobsApi_2,OrganizationPipelinesApi_1,OrganizationPipelinesApi_2,OrganizationPortalsApi_1,OrganizationPortalsApi_2,OrganizationRequiresAdminApi_1,OrganizationRequiresAdminApi_2,OrganizationsApi_1,OrganizationsApi_2,ProjectsApi_1,ProjectsApi_2,RawDataApi_1,RawDataApi_2,RequiresSudoApi_1,RequiresSudoApi_2,RequiresThirdPartyAuthApiKeyApi_1,RequiresThirdPartyAuthApiKeyApi_2,SupportsRangeApi_1,SupportsRangeApi_2,ThirdPartyAuthApi_1,ThirdPartyAuthApi_2,UploadPortalApi_1,UploadPortalApi_2,UserApi_1,UserApi_2){Object.defineProperty(exports,"__esModule",{value:!0});exports.APIS=void 0;__exportStar(AdminApi_1,exports);__exportStar(AllowsReadOnlyApi_1,exports);__exportStar(ApplicationTestingApi_1,exports);__exportStar(AuthApi_1,exports);__exportStar(CDNApi_1,exports);__exportStar(ClassifyApi_1,exports);__exportStar(DSPApi_1,exports);__exportStar(DeploymentApi_1,exports);__exportStar(DevicesApi_1,exports);__exportStar(ExportApi_1,exports);__exportStar(HealthApi_1,exports);__exportStar(ImpulseApi_1,exports);__exportStar(JobsApi_1,exports);__exportStar(LearnApi_1,exports);__exportStar(LoginApi_1,exports);__exportStar(OptimizationApi_1,exports);__exportStar(OrganizationBlocksApi_1,exports);__exportStar(OrganizationCreateProjectApi_1,exports);__exportStar(OrganizationDataApi_1,exports);__exportStar(OrganizationJobsApi_1,exports);__exportStar(OrganizationPipelinesApi_1,exports);__exportStar(OrganizationPortalsApi_1,exports);__exportStar(OrganizationRequiresAdminApi_1,exports);__exportStar(OrganizationsApi_1,exports);__exportStar(ProjectsApi_1,exports);__exportStar(RawDataApi_1,exports);__exportStar(RequiresSudoApi_1,exports);__exportStar(RequiresThirdPartyAuthApiKeyApi_1,exports);__exportStar(SupportsRangeApi_1,exports);__exportStar(ThirdPartyAuthApi_1,exports);__exportStar(UploadPortalApi_1,exports);__exportStar(UserApi_1,exports);exports.APIS=[AdminApi_2.AdminApi,AllowsReadOnlyApi_2.AllowsReadOnlyApi,ApplicationTestingApi_2.ApplicationTestingApi,AuthApi_2.AuthApi,CDNApi_2.CDNApi,ClassifyApi_2.ClassifyApi,DSPApi_2.DSPApi,DeploymentApi_2.DeploymentApi,DevicesApi_2.DevicesApi,ExportApi_2.ExportApi,HealthApi_2.HealthApi,ImpulseApi_2.ImpulseApi,JobsApi_2.JobsApi,LearnApi_2.LearnApi,LoginApi_2.LoginApi,OptimizationApi_2.OptimizationApi,OrganizationBlocksApi_2.OrganizationBlocksApi,OrganizationCreateProjectApi_2.OrganizationCreateProjectApi,OrganizationDataApi_2.OrganizationDataApi,OrganizationJobsApi_2.OrganizationJobsApi,OrganizationPipelinesApi_2.OrganizationPipelinesApi,OrganizationPortalsApi_2.OrganizationPortalsApi,OrganizationRequiresAdminApi_2.OrganizationRequiresAdminApi,OrganizationsApi_2.OrganizationsApi,ProjectsApi_2.ProjectsApi,RawDataApi_2.RawDataApi,RequiresSudoApi_2.RequiresSudoApi,RequiresThirdPartyAuthApiKeyApi_2.RequiresThirdPartyAuthApiKeyApi,SupportsRangeApi_2.SupportsRangeApi,ThirdPartyAuthApi_2.ThirdPartyAuthApi,UploadPortalApi_2.UploadPortalApi,UserApi_2.UserApi]}));define("client/api-definition/index",["require","exports","client/api-definition/api/api","client/api-definition/model/models","client/api-definition/variables","client/api-definition/configuration"],(function(require,exports,api_1,models_1,variables_2,configuration_33){Object.defineProperty(exports,"__esModule",{value:!0});__exportStar(api_1,exports);__exportStar(models_1,exports);__exportStar(variables_2,exports);__exportStar(configuration_33,exports)}));define("client/typed-event-emitter",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.once=exports.Emitter=void 0;exports.Emitter=class{constructor(){this._=[];this.$=Object.create(null)}on(type,callback){(this.$[type]=this.$[type]||[]).push(callback)}off(type,callback){const stack=this.$[type];stack&&stack.splice(stack.indexOf(callback)>>>0,1)}each(callback){this._.push(callback)}none(callback){this._.splice(this._.indexOf(callback)>>>0,1)}emit(type,...args){const stack=this.$[type];stack&&stack.slice().forEach(fn=>fn(...args));this._.slice().forEach(fn=>fn({type:type,args:args}))}};exports.once=function(events,type,callback){function self(...args){events.off(type,self);return callback(...args)}events.on(type,self);return self}}));define("shared/events",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("shared/keras-types",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("shared/viewmodels/retrain",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.DSP_RAW_DATA=exports.LEARN_TYPE_OPTIONS=void 0;exports.LEARN_TYPE_OPTIONS=["keras","keras-transfer-image","keras-transfer-kws","keras-object-detection","keras-regression","anomaly"];exports.DSP_RAW_DATA=0}));define("shared/tuner-types",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.printTrial=exports.defaultProjectTunerConfig=void 0;exports.defaultProjectTunerConfig={targetLatency:100,targetDevice:{name:"cortex-m7-216mhz",ram:348160,rom:1048576},compiler:["eon","tflite"],precision:["float32","int8"],trainingCycles:50,tuningMaxTrials:50,tuningWorkers:10,minMACCS:0,maxMACCS:1e7,datasetCategory:"speech_keyword",tuningAlgorithm:"random"};exports.printTrial=function(t){const roundObservation=n=>Math.round(1e3*n)/1e3,hyperparameters=Object.entries(t.hyperparameters.values.values).map(v=>"  - "+v[0]+": "+Object.values(v[1])[0]).join("\n");return`- loss: ${roundObservation(t.metrics.metrics.loss.observations[0].value[0])}`+` | acc: ${roundObservation(t.metrics.metrics.accuracy.observations[0].value[0])}`+` | val_loss: ${roundObservation(t.metrics.metrics.val_loss.observations[0].value[0])}`+` | val_acc: ${roundObservation(t.metrics.metrics.accuracy.observations[0].value[0])}\n`+"- hyperparameters: \n"+hyperparameters}}));define("shared/WebSocketTypes",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.DOWNSAMPLE_SIZE_LONG=exports.DOWNSAMPLE_SIZE_SHORT=exports.JOB_KEY_PREFIX=void 0;!function(JOB_KEY_PREFIX){JOB_KEY_PREFIX.deployment="deployment";JOB_KEY_PREFIX.deploymentInner="deployment-inner";JOB_KEY_PREFIX.deploymentEthos="deployment-ethos";JOB_KEY_PREFIX.learnTrain="learn-train";JOB_KEY_PREFIX.learnTrainProfile="learn-train-profile";JOB_KEY_PREFIX.learnClassify="learn-classify";JOB_KEY_PREFIX.learnClassifyWrapper="learn-classify-wrapper";JOB_KEY_PREFIX.applicationTesting="application-testing";JOB_KEY_PREFIX.optimize="optimize";JOB_KEY_PREFIX.dsp="dsp";JOB_KEY_PREFIX.dspFeatures="dsp-features";JOB_KEY_PREFIX.dspWindows="dsp-windows";JOB_KEY_PREFIX.dspTsne="dsp-tsne";JOB_KEY_PREFIX.dspFeatureImportance="dsp-feature-importance";JOB_KEY_PREFIX.inputWindows="input-windows";JOB_KEY_PREFIX.retrain="retrain";JOB_KEY_PREFIX.export="export";JOB_KEY_PREFIX.createCustomTransform="create-custom-transform";JOB_KEY_PREFIX.createCustomDeploy="create-custom-deploy";JOB_KEY_PREFIX.createCustomDsp="create-custom-dsp";JOB_KEY_PREFIX.createCustomTransferLearning="create-custom-transfer-learning";JOB_KEY_PREFIX.createProjectDownload="create-project-download";JOB_KEY_PREFIX.createProjectUpload="create-project-upload";JOB_KEY_PREFIX.createProjectTransform="create-project-transform";JOB_KEY_PREFIX.createProjectCleanUp="create-project-cleanup";JOB_KEY_PREFIX.validation="validation";JOB_KEY_PREFIX.evaluate="evaluate";JOB_KEY_PREFIX.orgAddFolder="org-add-folder";JOB_KEY_PREFIX.versioning="versioning";JOB_KEY_PREFIX.versioningWrapper="versioning-wrapper";JOB_KEY_PREFIX.restore="restore";JOB_KEY_PREFIX.restoreWrapper="restore-wrapper";JOB_KEY_PREFIX.orgBulkUpdateMetadata="org-bulk-update-metadata";JOB_KEY_PREFIX.orgDeleteData="org-delete-data";JOB_KEY_PREFIX.orgClearChecklists="org-clear-checklists";JOB_KEY_PREFIX.orgRefreshDatasets="org-refresh-datasets";JOB_KEY_PREFIX.orgSetDataset="org-set-dataset";JOB_KEY_PREFIX.syntiantPosterior="syntiant-posterior";JOB_KEY_PREFIX.processRawData="process-raw-data";JOB_KEY_PREFIX.keywordNoise="keyword-noise";JOB_KEY_PREFIX.arenaSize="arena-size";JOB_KEY_PREFIX.copyFeatures="copy-features"}(exports.JOB_KEY_PREFIX||(exports.JOB_KEY_PREFIX={}));exports.DOWNSAMPLE_SIZE_SHORT=250;exports.DOWNSAMPLE_SIZE_LONG=4e3}));define("client/notify",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.Notify=void 0;class Notify{static notify(title,message,placement,align,icon,type,delayMs=2500){"function"==typeof $.notifyClose&&$.notifyClose();$.notify({icon:icon,title:title,message:message,url:""},{element:"body",type:type,allow_dismiss:!0,placement:{from:placement,align:align},offset:{x:15,y:15},spacing:10,z_index:1080,delay:delayMs,url_target:"_blank",mouse_over:!1,animate:{enter:void 0,exit:void 0},template:'<div data-notify="container" class="alert alert-dismissible alert-{0} alert-notify" role="alert"><span class="alert-icon" data-notify="icon"></span> <div class="alert-text"> <span class="alert-title" data-notify="title">{1}</span> <span data-notify="message">{2}</span></div><button type="button" class="close" data-notify="dismiss" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'})}static async alert(title,message,type,onBeforeOpen){let modalType="danger"===type?"error":type;return new Promise(resolve=>{swal({title:title,text:message,type:modalType,buttonsStyling:!1,confirmButtonClass:"btn btn-"+type,onClose:resolve,allowEnterKey:!0,onBeforeOpen:el=>{el.id="notify-"+ ++this._notifyId;onBeforeOpen&&onBeforeOpen(el)}})})}static async confirm(title,message,confirmText,modalType,btnType){return!(await swal({title:title,text:message,type:modalType,cancelButtonClass:"btn",showCancelButton:!0,buttonsStyling:!1,confirmButtonClass:"btn btn-"+btnType,confirmButtonText:confirmText,allowEnterKey:!0,closeOnConfirm:!0,reverseButtons:!0,onBeforeOpen:el=>{el.id="notify-"+ ++this._notifyId;let q=el.querySelector(".swal2-question");if(q){q.classList.add("text-"+btnType);q.classList.add("border-"+btnType)}}})).dismiss}static async prompt(title,message,confirmText,currentValue,modalType,btnType,inputValidator){let v=await swal({title:title,text:message,type:modalType,cancelButtonClass:"btn",showCancelButton:!0,buttonsStyling:!1,confirmButtonClass:"btn btn-"+btnType,confirmButtonText:confirmText,allowEnterKey:!0,closeOnConfirm:!0,reverseButtons:!0,input:"text",inputValue:currentValue,inputValidator:inputValidator,onBeforeOpen:el=>{el.id="notify-"+ ++this._notifyId;let q=el.querySelector(".swal2-question");if(q){q.classList.add("text-"+btnType);q.classList.add("border-"+btnType)}},onOpen:el=>{let input=el.querySelector(".swal2-input");if(input){input.focus();input.select()}}});return!v.dismiss&&(v.value||"")}static async promptMultiple(title,html,confirmText,preConfirm,modalType,btnType){let v=await swal({title:title,type:modalType,cancelButtonClass:"btn",showCancelButton:!0,buttonsStyling:!1,confirmButtonClass:"btn btn-"+btnType,confirmButtonText:confirmText,allowEnterKey:!0,closeOnConfirm:!0,reverseButtons:!0,html:html,preConfirm:preConfirm,onBeforeOpen:el=>{el.id="notify-"+ ++this._notifyId;let q=el.querySelector(".swal2-question");if(q){q.classList.add("text-"+btnType);q.classList.add("border-"+btnType)}}});return!v.dismiss&&(v.value||"")}static extractMsg(ex){var _a;let msg="";msg=ex instanceof Error?ex.message||ex.toString():(null===(_a=ex.response)||void 0===_a?void 0:_a.responseText)||ex.errorThrown||ex.toString();msg.indexOf("Missing x-api-key header")>-1&&(msg="Unauthorized");return msg}}exports.Notify=Notify;Notify._notifyId=0}));define("client/project/components/job-runner",["require","exports","client/typed-event-emitter","client/studio-api","client/notify","client/global-ui"],(function(require,exports,typed_event_emitter_1,studio_api_1,notify_1,global_ui_1){Object.defineProperty(exports,"__esModule",{value:!0});exports.JobRunner=void 0;class JobRunner extends typed_event_emitter_1.Emitter{constructor(studioApi,runner,cancelConfirmation=!1){super();this._findText=[];this._maxLines=1e3;this._allDataTimeouts=[];this._studioApi=studioApi;this._socket=studioApi.socket;this._cancelConfirmation=cancelConfirmation;let cancelButton=runner.querySelector(".job-runner-cancel"),output=runner.querySelector(".job-runner-output");if(!cancelButton||!output)throw new Error("Cannot find .job-runner-cancel or .job-runner-output elements");this._cancelButton=cancelButton;this._cancelButton.style.display="none";this._output=output;this._socket.on("connect",()=>{this._currJobId&&this.resumeJob(this._currJobId,!0)});this.on("finished",()=>{var _a;null===(_a=this._trailingOutput)||void 0===_a||_a.remove();this._trailingOutput=void 0})}async startJob(req){this._output.textContent="Creating job... ";let r=await req;if(!("errorThrown"in r||"body"in r)){let err="Response without errorThrown nor body";return this.attachToJob(-1,err)}if("errorThrown"in r){let err=r.response.statusText;return this.attachToJob(-1,err)}let{response:response,body:data}=r;if(data.success){this.appendOutput(`OK (ID: ${data.id})\n\n`);this.attachToJob(data.id,void 0)}else{let err="\nFailed to create job: "+(data.error||response.statusText);this.attachToJob(data.id,err)}return data.id}async startJobFromId(id){this._output.textContent="Creating job... ";this.appendOutput(`OK (ID: ${id})\n\n`);this.attachToJob(id,void 0);return id}startJobFailed(ex){let err="\nFailed to create job: "+notify_1.Notify.extractMsg(ex);this.attachToJob(0,err)}async cancelCurrentJob(){console.log("cancel",this._currJobId);this._currJobId&&await this.cancelJob(this._currJobId)}async resumeJob(jobId,loadLogs=!0){loadLogs&&(this._output.textContent="Loading logs for "+jobId+"...\n");let socketLogs=[];const onJobData=msg=>{console.log("onJobData",jobId,msg.data);socketLogs.push({created:new Date,data:msg.data})};this._socket.addEventListener("job-data-"+jobId,onJobData);let jobStatus="running";try{let logs;if(this._studioApi instanceof studio_api_1.StudioOrganizationApi){let l=await this._studioApi.jobs.getOrganizationJobsLogs(this._studioApi.organizationId,jobId,100);if(!l.body||!l.body.stdout)throw l.body.error||l.response.responseText;logs=l.body.stdout;let js=await this._studioApi.jobs.getOrganizationJobStatus(this._studioApi.organizationId,jobId);if(!js.body||!js.body.job)throw js.body.error||js.response.responseText;js.body.job.finishedSuccessful?jobStatus="finished":js.body.job.finished&&(jobStatus="failed")}else if(this._studioApi instanceof studio_api_1.StudioProjectApi){let l=await this._studioApi.jobs.getJobsLogs(this._studioApi.projectId,jobId,100);if(!l.body||!l.body.stdout)throw l.body.error||l.response.responseText;logs=l.body.stdout;let js=await this._studioApi.jobs.getJobStatus(this._studioApi.projectId,jobId);if(!js.body||!js.body.job)throw js.body.error||js.response.responseText;js.body.job.finishedSuccessful?jobStatus="finished":js.body.job.finished&&(jobStatus="failed")}else logs=[];for(let s of socketLogs)logs.find(x=>x.data===s.data)||logs.push(s);if(loadLogs)if(0!==logs.length){logs=logs.reverse();this._output.textContent=logs.map(l=>l.data).join("")+"\n"}else this._output.textContent=""}catch(ex2){let ex=ex2;loadLogs?this._output.textContent="Failed to load logs: "+notify_1.Notify.extractMsg(ex)+"\n\n":this.appendOutput("Failed to check job status: "+notify_1.Notify.extractMsg(ex)+"\n\n");jobStatus="failed"}this._socket.removeListener("job-data-"+jobId,onJobData);if("running"===jobStatus){this.appendOutput("Attached to job "+jobId+"...\n");this._output.scrollTop=this._output.scrollHeight;this.attachToJob(jobId,void 0)}else if("finished"===jobStatus){let report=document.createElement("span");report.classList.add("text-green");report.textContent+="Job completed";this._output.appendChild(report);this._output.scrollTop=this._output.scrollHeight;this._currJobId=void 0;this.emit("finished",jobId,!0)}else if("failed"===jobStatus){let report=document.createElement("span");report.classList.add("text-danger");report.textContent+="Job failed (see above)";this._output.appendChild(report);this._output.scrollTop=this._output.scrollHeight;this._currJobId=void 0;this.emit("finished",jobId,!1)}}clear(){this._output.textContent=""}getContent(){return this._output.textContent}findText(str,fn){this._findText.push({str:str,fn:fn})}detachFromJob(){if(this._currJobId){this._jobDataListener&&this._socket.removeListener("job-data-"+this._currJobId,this._jobDataListener);this._jobProgressListener&&this._socket.removeListener("job-progress-"+this._currJobId,this._jobProgressListener);this._jobFinishedListener&&this._socket.removeListener("job-finished-"+this._currJobId,this._jobFinishedListener);this._allDataTimeouts.forEach(d=>clearTimeout(d));this._allDataTimeouts=[];this._currJobId=void 0}}appendOutput(output){let atBottom=Math.abs(this._output.scrollTop+this._output.offsetHeight-this._output.scrollHeight)<5;this._trailingOutput&&this._trailingOutput.remove();output!==this._trailingOutput&&("string"==typeof output?this._output.textContent+=output:this._output.appendChild(output));this._trailingOutput&&this._output.appendChild(this._trailingOutput);if(this._output.textContent&&atBottom){let outputLines=this._output.textContent.split("\n");outputLines.length>=this._maxLines&&(this._output.textContent=outputLines.slice(outputLines.length-this._maxLines).join("\n"))}atBottom&&(this._output.scrollTop=this._output.scrollHeight)}onJobProgressMessage(msg){const progressReportId="progress-report-"+msg.step.toLocaleLowerCase();let progressReport=this._output.querySelector("#"+progressReportId);if(msg.done){null==progressReport||progressReport.remove();this._trailingOutput=void 0;this.appendOutput(msg.message+"\n")}else{const estimatedRemainingTime=Math.round(Math.max(msg.elapsedTime&&msg.estimatedStepDuration?msg.estimatedStepDuration-msg.elapsedTime:0,0)),estimation=estimatedRemainingTime>0?`(estimated remaining time: ${global_ui_1.GlobalUI.getFriendlyDuration(estimatedRemainingTime)})`:"",message=`${msg.message} ${estimation}...`;if(progressReport)progressReport.querySelector(".content").textContent=message;else{progressReport=document.createElement("span");progressReport.className="progress-report";progressReport.setAttribute("id",progressReportId);let i=document.createElement("i");i.classList.add("fas","fa-spinner","spin-animation");let span=document.createElement("span");span.classList.add("content");span.textContent=message;let n=document.createTextNode("\n");progressReport.appendChild(i);progressReport.appendChild(span);progressReport.appendChild(n)}this._trailingOutput=progressReport;this.appendOutput(progressReport)}}attachToJob(jobId,err){this._currJobId=jobId;let report=document.createElement("span");report.textContent="\n";let alreadyFinished=!1;const onFinished=success=>{if(!alreadyFinished){this.detachFromJob();this._cancelButton.textContent="Cancel";this._cancelButton.style.display="none";this._cancelButton.onclick=null;alreadyFinished=!0;this._output.appendChild(report);this._output.scrollTop=this._output.scrollHeight;this.emit("finished",jobId,success)}},onError=ex=>{console.log("Job completed (failed)");ex&&this.appendOutput("\n"+ex+"\n");report.classList.add("text-danger");report.textContent+="Job failed (see above)";onFinished(!1)};if(err)return setTimeout(()=>{onError(err)},0);try{const timeout=3e4;this._cancelButton.style.display="";const setNoDataTimeout=()=>{this._allDataTimeouts.forEach(d=>clearTimeout(d));this._allDataTimeouts=[];this._allDataTimeouts.push(setTimeout(()=>{this.resumeJob(jobId,!1)},timeout))};setNoDataTimeout();this._cancelButton.onclick=async ev=>{ev.preventDefault();if(!this._cancelConfirmation||await notify_1.Notify.confirm("Canceling job","Are you sure you want to cancel the current running job?","Yes, cancel job","question","warning")){this._cancelButton.textContent="Canceling...";this.cancelJob(jobId)}};this._jobDataListener&&this._socket.removeListener("job-data-"+jobId,this._jobDataListener);this._jobProgressListener&&this._socket.removeListener("job-progress-"+jobId,this._jobProgressListener);this._jobFinishedListener&&this._socket.removeListener("job-finished-"+jobId,this._jobFinishedListener);this._jobProgressListener=this.onJobProgressMessage.bind(this);this._jobDataListener=msg=>{if(alreadyFinished)return;this.appendOutput(msg.data);let lines=msg.data.split("\n").filter(f=>!!f).map(f=>f.trim());for(let f of this._findText)lines.find(l=>l===f.str)&&f.fn();setNoDataTimeout()};this._jobFinishedListener=msg=>{alreadyFinished||(msg.success?(()=>{console.log("Job completed (success)");report.classList.add("text-green");report.textContent+="Job completed";onFinished(!0)})():onError())};this._socket.addEventListener("job-data-"+jobId,this._jobDataListener);this._socket.addEventListener("job-progress-"+jobId,this._jobProgressListener);this._socket.addEventListener("job-finished-"+jobId,this._jobFinishedListener)}catch(ex2){let ex=ex2;setTimeout(()=>onError(notify_1.Notify.extractMsg(ex)),1)}}async cancelJob(id){let forceCancel=this._lastCancelEv===id;if(this._studioApi instanceof studio_api_1.StudioProjectApi){let req=await this._studioApi.jobs.cancelJob(this._studioApi.projectId,id,forceCancel?"true":void 0);if(!req.body||!req.body.success)throw new Error(req.body&&req.body.error||req.response.statusText)}else if(this._studioApi instanceof studio_api_1.StudioOrganizationApi){let req=await this._studioApi.jobs.cancelOrganizationJob(this._studioApi.organizationId,id,forceCancel?"true":void 0);if(!req.body||!req.body.success)throw new Error(req.body&&req.body.error||req.response.statusText)}this._lastCancelEv=id;this._cancelButton.textContent="Cancel"}async getActiveJobList(){let jobListResponse;try{if(this._studioApi instanceof studio_api_1.StudioOrganizationApi)jobListResponse=await this._studioApi.jobs.listActiveOrganizationJobs(this._studioApi.organizationId);else{if(!(this._studioApi instanceof studio_api_1.StudioProjectApi))return;jobListResponse=await this._studioApi.jobs.listActiveJobs(this._studioApi.projectId)}}catch(e){const rejectionResponse=e;console.error("Failed to check for running jobs",rejectionResponse.errorThrown||rejectionResponse.response.statusText);return}const{response:response,body:body}=jobListResponse;if(body.success)return jobListResponse;console.error("Failed to check for running jobs",body.error||response.statusText)}async getActiveJob(key){const jobList=await this.getActiveJobList();if(void 0!==jobList){console.log("active jobs",jobList.body.jobs);return jobList.body.jobs.find(j=>j.key===key)}}}exports.JobRunner=JobRunner}));define("client/project/pages/retrain-ui",["require","exports","client/project/components/job-runner","shared/WebSocketTypes","client/global-ui"],(function(require,exports,job_runner_1,WebSocketTypes_1,global_ui_2){Object.defineProperty(exports,"__esModule",{value:!0});exports.RetrainUI=void 0;exports.RetrainUI=class{constructor(studioApi){this._studioApi=studioApi;this._outputSection=document.querySelector("#output-section");this._jobRunner=new job_runner_1.JobRunner(this._studioApi,this._outputSection);this._buildButton=document.querySelector("#build");this._origText=this._buildButton.textContent||"";this._buildButton.onclick=async ev=>{ev.preventDefault();await this.startTraining()};this._allBlocks=Array.from(document.querySelectorAll("#all-blocks [data-name]"));for(let b of this._allBlocks){let name=b.dataset.name,i=b.querySelector("i");this._jobRunner.findText("Retraining "+name+"...",()=>{i.classList.remove("fa-ellipsis-h");i.classList.remove("fa-check");i.classList.add("fa-spinner")});this._jobRunner.findText("Retraining "+name+" OK",()=>{i.classList.remove("fa-ellipsis-h");i.classList.add("fa-check");i.classList.remove("fa-spinner")})}this._studioApi.socket.addEventListener("connect",this.checkForRunningProcess.bind(this))}jobFinished(id,success){if(id===this._currJobId){this._studioApi.analytics.event("job-finish-"+(success?"success":"fail"),{event_category:"retrain"});this.enableUI(success);if(success){global_ui_2.GlobalUI.setRetrainComplete();for(let g of Array.from(document.querySelectorAll(".impulse-design-menu i.text-gray"))){g.classList.remove("text-gray");g.classList.add("text-green")}}}}disableUI(){this._buildButton.classList.add("disabled");this._buildButton.textContent="Training...";this._outputSection.style.display="block"}enableUI(success){this._buildButton.classList.remove("disabled");this._buildButton.textContent=this._origText;for(let b of this._allBlocks){let i=b.querySelector("i");if(success){i.classList.remove("fa-ellipsis-h");i.classList.add("fa-check");i.classList.remove("fa-spinner")}else if(i.classList.contains("fa-spinner")){i.classList.add("fa-ellipsis-h");i.classList.remove("fa-spinner")}}}async startTraining(){try{this.disableUI();this._studioApi.analytics.event("job-start",{event_category:"retrain"});for(let b of this._allBlocks){let i=b.querySelector("i");i.classList.add("fa-ellipsis-h");i.classList.remove("fa-spinner");i.classList.remove("fa-check")}this._currJobId=await this._jobRunner.startJob(this._studioApi.jobs.startRetrainJob(this._studioApi.projectId));this._jobRunner.on("finished",this.jobFinished.bind(this))}catch(ex2){let ex=ex2;this.enableUI(!1);this._jobRunner.startJobFailed(ex)}}async checkForRunningProcess(){if(!this._studioApi.isAdmin)return;let job=await this._jobRunner.getActiveJob(WebSocketTypes_1.JOB_KEY_PREFIX.retrain);if(job){this._currJobId=job.id;this.disableUI();await this._jobRunner.resumeJob(job.id);this._jobRunner.on("finished",this.jobFinished.bind(this))}}}}));define("client/google-analytics",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.GoogleAnalyticsPublic=exports.GoogleAnalyticsUser=exports.GoogleAnalyticsOrganization=exports.GoogleAnalyticsProject=void 0;exports.GoogleAnalyticsProject=class{constructor(gaId,userId,projectId){this._gaId=gaId;this._userId=userId;this._projectId=projectId}event(eventName,eventParams){gtag("event",eventName,eventParams)}};exports.GoogleAnalyticsOrganization=class{constructor(gaId,userId,organizationId){this._gaId=gaId;this._userId=userId;this._organizationId=organizationId}event(eventName,eventParams){gtag("event",eventName,eventParams)}};exports.GoogleAnalyticsUser=class{constructor(gaId,userId){this._gaId=gaId;this._userId=userId}event(eventName,eventParams){gtag("event",eventName,eventParams)}};exports.GoogleAnalyticsPublic=class{constructor(gaId){this._gaId=gaId}event(eventName,eventParams){gtag("event",eventName,eventParams)}}}));define("client/studio-api",["require","exports","client/api-definition/index"],(function(require,exports,api_definition_1){Object.defineProperty(exports,"__esModule",{value:!0});exports.StudioOrganizationApi=exports.StudioProjectApi=void 0;exports.StudioProjectApi=class{constructor(projectId,projectName,socket,ga,staticAssetsPrefix,baseUrl,isAdmin,isObjectDetection,user){this.origin=location.origin+"/v1";this.projectId=projectId;this.projectName=projectName;this.baseUrl=baseUrl;this.rawData=new api_definition_1.RawDataApi(this.origin);this.deployment=new api_definition_1.DeploymentApi(this.origin);this.devices=new api_definition_1.DevicesApi(this.origin);this.dsp=new api_definition_1.DSPApi(this.origin);this.impulse=new api_definition_1.ImpulseApi(this.origin);this.jobs=new api_definition_1.JobsApi(this.origin);this.learn=new api_definition_1.LearnApi(this.origin);this.projects=new api_definition_1.ProjectsApi(this.origin);this.export=new api_definition_1.ExportApi(this.origin);this.optimization=new api_definition_1.OptimizationApi(this.origin);this.classify=new api_definition_1.ClassifyApi(this.origin);this.organizations=new api_definition_1.OrganizationsApi(this.origin);this.user=new api_definition_1.UserApi(this.origin);this.applicationTesting=new api_definition_1.ApplicationTestingApi(this.origin);this.socket=socket;this.analytics=ga;this.staticAssetsPrefix=staticAssetsPrefix;this.isAdmin=isAdmin;this.isObjectDetection=isObjectDetection;this.currentUser=user}};exports.StudioOrganizationApi=class{constructor(organizationId,socket,ga,staticAssetsPrefix,baseUrl,user){this.origin=location.origin+"/v1";this.organizationId=organizationId;this.organizations=new api_definition_1.OrganizationsApi(this.origin);this.data=new api_definition_1.OrganizationDataApi(this.origin);this.blocks=new api_definition_1.OrganizationBlocksApi(this.origin);this.portals=new api_definition_1.OrganizationPortalsApi(this.origin);this.createProject=new api_definition_1.OrganizationCreateProjectApi(this.origin);this.jobs=new api_definition_1.OrganizationJobsApi(this.origin);this.projects=new api_definition_1.ProjectsApi(this.origin);this.pipelines=new api_definition_1.OrganizationPipelinesApi(this.origin);this.socket=socket;this.analytics=ga;this.staticAssetsPrefix=staticAssetsPrefix;this.currentUser=user;this.baseUrl=baseUrl}}}));define("shared/encoding",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.default=function(header){let encodedHeader;try{encodedHeader=encodeURIComponent(header)}catch(ex){encodedHeader=header}return encodedHeader}}));define("client/ingestion-utils",["require","exports","shared/encoding"],(function(require,exports,encoding_1){Object.defineProperty(exports,"__esModule",{value:!0});exports.IngestionUtils=void 0;encoding_1=__importDefault(encoding_1);exports.IngestionUtils=class{constructor(studioApi){this._studioApi=studioApi;this._ingestionUrl=this.getIngestionApi()}getIngestionHost(){let hostPath=window.location.hostname.replace("studio.","https://ingestion.");(hostPath.endsWith("test.edgeimpulse.com")||hostPath.endsWith("dev.edgeimpulse.com"))&&(hostPath=hostPath.replace("https://","http://"));-1!==hostPath.indexOf("localhost")&&(hostPath=hostPath.replace("localhost","http://localhost:4810"));return hostPath}getRemoteMgmtHost(){let hostPath=window.location.hostname.replace("studio.","wss://remote-mgmt.");(hostPath.endsWith("test.edgeimpulse.com")||hostPath.endsWith("dev.edgeimpulse.com"))&&(hostPath=hostPath.replace("wss://","ws://"));-1!==hostPath.indexOf("localhost")&&(hostPath=hostPath.replace("localhost","ws://localhost:4802"));return hostPath}getIngestionApi(){return this.getIngestionHost()+"/api"}async createSignature(data){this._hmacKey||await this.fetchKeys();const enc=new TextEncoder;return this.signBuffer(enc.encode(JSON.stringify(data)))}async signBuffer(buffer){this._hmacKey||await this.fetchKeys();const enc=new TextEncoder,key=await crypto.subtle.importKey("raw",enc.encode(this._hmacKey),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign","verify"]),signature=await crypto.subtle.sign("HMAC",key,buffer),b=new Uint8Array(signature);return Array.prototype.map.call(b,x=>("00"+x.toString(16)).slice(-2)).join("")}async uploadData(category,filename,contentType,label,data,disallowDuplicates,boundingBoxes){this._apiKey||await this.fetchKeys();let methodResponse,headers={"x-api-key":this._apiKey||"","x-file-name":encoding_1.default(filename),"Content-Type":contentType,"x-disallow-duplicates":disallowDuplicates,"x-label":encoding_1.default(label)};boundingBoxes&&(headers["x-bounding-boxes"]=JSON.stringify(boundingBoxes));methodResponse=await axios({url:`${this._ingestionUrl}/${category}/data`,method:"POST",headers:headers,validateStatus:()=>!0,data:data}).then(response=>response);return methodResponse}encode(data){let buffer=new ArrayBuffer(data.length),bufferView=new Uint8Array(buffer);for(let i=0;i<data.length;i++)bufferView[i]=data.charCodeAt(i);return bufferView}decode(data){let result="";for(const char of data)result+=String.fromCharCode(char);return result}emptySignature(){return Array(64).fill("0").join("")}async fetchKeys(){let result=await this._studioApi.projects.listDevkeys(this._studioApi.projectId);if(!result.body||!result.body.success)throw new Error(result.body&&result.body.error||result.response.responseText);if(!result.body.apiKey)throw new Error('Project has no development API key set. Add one from the "Keys" page under the projects dashboard.');if(!result.body.hmacKey)throw new Error('Project has no development HMAC key set. Add one from the "Keys" page under the projects dashboard.');this._apiKey=result.body.apiKey;this._hmacKey=result.body.hmacKey;return{apiKey:this._apiKey,hmacKey:this._hmacKey}}}}));define("client/project/components/sensors/find-segments",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.FindSegments=void 0;exports.FindSegments=class{findSegments(data,samplesPerWindow,frequency,shiftSegments){let combinedData;combinedData="number"==typeof data[0]?data:data.map(v=>v.reduce((curr,x)=>curr+Math.abs(x),0));let lastSegment,minSegmentDistance=Math.ceil(.85*samplesPerWindow),segments=this.findPeaks(combinedData,minSegmentDistance).map(segmentCenter=>{let searchStart=Math.max(segmentCenter-minSegmentDistance,0),searchEnd=Math.min(segmentCenter+minSegmentDistance,data.length-1),windows=[],frameLength=Math.floor(.02*frequency);frameLength<1&&(frameLength=1);let frameStride=Math.floor(.02*frequency);frameStride<1&&(frameStride=1);for(let start=searchStart;start<searchEnd-frameLength;start+=frameStride){let energy=combinedData.slice(start,start+frameLength).map(a=>a*a).reduce((a,b)=>a+b,0);windows.push({start:start,end:start+frameLength,energy:energy})}let mean=2*this.avg(windows.map(w=>w.energy));windows=windows.filter(x=>x.energy>mean);if(0===windows.length)return;let currInterestingWindow,interestingWindows=[];for(let w of windows)if(currInterestingWindow)if(w.start-currInterestingWindow.end<Math.floor(.2*frequency)){currInterestingWindow.end=w.end;currInterestingWindow.energy+=w.energy}else{interestingWindows.push(currInterestingWindow);currInterestingWindow=w}else currInterestingWindow=w;currInterestingWindow&&interestingWindows.push(currInterestingWindow);let highestEnergy=Math.max(...interestingWindows.map(x=>x.energy)),mostInterestingWindow=interestingWindows.find(x=>x.energy===highestEnergy);if(!mostInterestingWindow)return{start:segmentCenter-Math.floor(samplesPerWindow/2),end:segmentCenter+Math.floor(samplesPerWindow/2)};let center=(mostInterestingWindow.end+mostInterestingWindow.start)/2,begin=center-Math.floor(samplesPerWindow/2),end=center+Math.floor(samplesPerWindow/2);if(shiftSegments){let shiftDirection=Math.random()>=.5?"left":"right",maxShift=Math.floor(samplesPerWindow-(mostInterestingWindow.end-mostInterestingWindow.start)-.1*frequency)/2;if(maxShift>0){let shiftAmount=Math.floor(maxShift*Math.random());if("left"===shiftDirection){begin-=shiftAmount;end-=shiftAmount}else{begin+=shiftAmount;end+=shiftAmount}}}if(begin<0){let diff=0-begin;begin+=diff;end+=diff}if(end>combinedData.length){let diff=end-combinedData.length;begin-=diff;end-=diff}return{start:begin,end:end}}),allSegments=[];for(let s of segments)if(void 0!==s&&!(lastSegment&&s.start-lastSegment.end<-.15*samplesPerWindow)){lastSegment=s;allSegments.push(s)}allSegments=allSegments.filter(s=>{let mean=data.slice(s.start,s.end).map(v=>v*v).reduce((curr,v)=>curr+v)/data.length;console.log("Found segment",s,mean);return!(mean<1e5)});return data.length!==samplesPerWindow&&1===allSegments.length&&0===allSegments[0].start?[]:allSegments}avg(signal){return signal.reduce((a,b)=>a+b,0)/signal.length}findPeaks(data,distance){let totalMean=this.avg(data),mean=(data=data.map(d=>d-totalMean)).map(v=>v*v).reduce((curr,v)=>curr+v)/data.length,threshold=1.2*Math.sqrt(mean),peaks=[];for(let ix=1;ix<data.length-1;ix++){let prev=data[ix-1],next=data[ix+1];data[ix]>=prev&&data[ix]>next&&data[ix]>threshold&&peaks.push(ix)}let priority=peaks.map(x=>data[x]),peaksSize=peaks.length,sorted=Array.from(priority).map((v,ix)=>({ix:ix,value:v})).sort((a,b)=>b.value-a.value).reverse(),priorityToPosition=new Array(peaks.length).fill(0);for(let sx=0;sx<sorted.length;sx++)priorityToPosition[sx]=sorted[sx].ix;let keep=new Array(peaks.length).fill(1);for(let i=peaksSize-1;i>=0;i--){let j=priorityToPosition[i];if(0===keep[j])continue;let k=j-1;for(;0<=k&&peaks[j]-peaks[k]<distance;){keep[k]=0;k-=1}k=j+1;for(;k<peaksSize&&peaks[k]-peaks[j]<distance;){keep[k]=0;k+=1}}let indices=[];for(let kx=0;kx<keep.length;kx++)1===keep[kx]&&indices.push(peaks[kx]);return indices}}}));define("client/project/components/sensors/models",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/project/components/sensors/isensor",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/project/components/sensors/microphone",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.MicrophoneSensor=void 0;exports.MicrophoneSensor=class{constructor(){this._constraints={audio:!0,video:!1};void 0===window.AudioContext&&void 0===window.webkitAudioContext||(this._audioContext=new(window.AudioContext||window.webkitAudioContext))}async hasSensor(){return void 0!==window.AudioContext||void 0!==window.webkitAudioContext}async checkPermissions(fromButton){var _a;if(!await this.hasSensor())throw new Error("Microphone not present on this device");if(this._recorder)return!0;if(!fromButton)return!1;"suspended"===(null===(_a=this._audioContext)||void 0===_a?void 0:_a.state)&&await this._audioContext.resume();this._stream=await navigator.mediaDevices.getUserMedia(this._constraints);return!0}getProperties(){return{name:"Microphone",maxSampleLength:60,frequencies:[16e3,8e3,11e3,32e3,44100,48e3]}}takeSample(samplingOptions){return new Promise((resolve,reject)=>{if(!this._stream)return reject("No audio stream");if(!samplingOptions.frequency)throw new Error("Frequency not specified");if(!samplingOptions.length)throw new Error("Frequency not specified");let length=samplingOptions.length,frequency=samplingOptions.frequency;if(!this._audioContext)return reject("No audio context");let input=this._audioContext.createMediaStreamSource(this._stream);if(this._recorder)this._recorder.clear();else{this._recorder=new Recorder(input,{numChannels:1});this._recorder.record()}setTimeout(()=>{if(this._stream){samplingOptions.processing&&samplingOptions.processing();this._recorder&&this._recorder.exportWAV(async blob=>{let buffer=await new Response(blob).arrayBuffer();console.log("done recording",buffer.byteLength);let wavFileItems=new Int16Array(buffer,44),eiData=[];for(let w of wavFileItems)eiData.push(w);resolve({values:eiData.slice(0,length*(frequency/1e3)),intervalMs:1e3/frequency,sensors:[{name:"audio",units:"wav"}]})},void 0,frequency)}},samplingOptions.continuousMode?length:length+100)})}}}));define("client/project/components/getting-started-wizard",["require","exports","shared/WebSocketTypes","client/ingestion-utils","client/notify","client/project/components/job-runner","client/project/components/sensors/find-segments","client/project/components/sensors/microphone"],(function(require,exports,WebSocketTypes_2,ingestion_utils_1,notify_2,job_runner_2,find_segments_1,microphone_1){Object.defineProperty(exports,"__esModule",{value:!0});exports.GettingStartedWizard=void 0;const impulse={inputBlocks:[{id:2,type:"time-series",name:"Time series",title:"Time series data",padZeros:!0,windowSizeMs:1e3,windowIncreaseMs:1e3,frequencyHz:16e3,primaryVersion:!1}],dspBlocks:[{id:3,type:"mfe",name:"MFE",axes:["audio"],title:"Audio (MFE)",input:2,implementationVersion:3,primaryVersion:!1}],learnBlocks:[{id:5,type:"keras-transfer-kws",name:"Transfer learning (Keyword Spotting)",dsp:[3],title:"Transfer learning (Keyword Spotting)",primaryVersion:!0}]},dspConfig={config:{fft_length:"256",frame_length:"0.02",frame_stride:"0.01",low_frequency:"300",noise_floor_db:"-52",num_filters:"40",win_size:"101"}};exports.GettingStartedWizard=class{constructor(studioApi,step){this._microphone=new microphone_1.MicrophoneSensor;this._findSegments=new find_segments_1.FindSegments;this._els={step1:{requiredUrl:"",modal:document.querySelector("#getting-started-step1-modal"),closeBtn:document.querySelector("#getting-started-step1-modal .close"),dismissBtn:document.querySelector("#getting-started-step1-modal .getting-started-dismiss"),nextBtn:document.querySelector("#getting-started-go-to-step2")},step2:{requiredUrl:"",modal:document.querySelector("#getting-started-step2-modal"),closeBtn:document.querySelector("#getting-started-step2-modal .close"),dismissBtn:document.querySelector("#getting-started-step2-modal .getting-started-dismiss"),nextBtn:document.querySelector("#getting-started-go-to-step3"),keyword:document.querySelector("#getting-started-keyword")},step3:{requiredUrl:"",modal:document.querySelector("#getting-started-step3-modal"),closeBtn:document.querySelector("#getting-started-step3-modal .close"),dismissBtn:document.querySelector("#getting-started-step3-modal .getting-started-dismiss"),recordBtn:document.querySelector("#getting-started-step3-record"),recordSection:document.querySelector("#getting-started-step3-record-section"),samplingSection:document.querySelector("#getting-started-step3-sampling-section"),samplingSecondsLeft:document.querySelector("#getting-started-step3-sampling-section .sampling-seconds-left"),samplingRecordMsg:document.querySelector("#getting-started-step3-sampling-recording-data-message"),nextBtn:document.querySelector("#getting-started-go-to-step4")},step4:{requiredUrl:"",modal:document.querySelector("#getting-started-step4-modal"),closeBtn:document.querySelector("#getting-started-step4-modal .close"),dismissBtn:document.querySelector("#getting-started-step4-modal .getting-started-dismiss"),addDataBtn:document.querySelector("#getting-started-step4-add-data"),stdout:document.querySelector("#getting-started-step4-stdout"),nextBtn:document.querySelector("#getting-started-go-to-step5")},step5:{requiredUrl:"",modal:document.querySelector("#getting-started-step5-modal"),closeBtn:document.querySelector("#getting-started-step5-modal .close"),dismissBtn:document.querySelector("#getting-started-step5-modal .getting-started-dismiss"),nextBtn:document.querySelector("#getting-started-go-to-step6")},step6:{requiredUrl:"",modal:document.querySelector("#getting-started-step6-modal"),closeBtn:document.querySelector("#getting-started-step6-modal .close"),dismissBtn:document.querySelector("#getting-started-step6-modal .getting-started-dismiss"),nextBtn:document.querySelector("#getting-started-go-to-step7")},step7:{requiredUrl:"",modal:document.querySelector("#getting-started-step7-modal"),closeBtn:document.querySelector("#getting-started-step7-modal .close"),dismissBtn:document.querySelector("#getting-started-step7-modal .getting-started-dismiss"),progress:document.querySelector("#getting-started-step7-progress"),nextBtn:document.querySelector("#getting-started-go-to-step8")},step8:{requiredUrl:"",modal:document.querySelector("#getting-started-step8-modal"),closeBtn:document.querySelector("#getting-started-step8-modal .close"),dismissBtn:document.querySelector("#getting-started-step8-modal .getting-started-dismiss"),progress:document.querySelector("#getting-started-step8-progress"),nextBtn:document.querySelector("#getting-started-go-to-step9")},step9:{requiredUrl:"",modal:document.querySelector("#getting-started-step9-modal"),closeBtn:document.querySelector("#getting-started-step9-modal .close"),dismissBtn:document.querySelector("#getting-started-step9-modal .getting-started-dismiss"),nextBtn:document.querySelector("#getting-started-go-to-step10"),iframe:document.querySelector("#getting-started-classifier-iframe")},step10:{requiredUrl:"",modal:document.querySelector("#getting-started-step10-modal"),performance:document.querySelector("#getting-started-step10-performance")},continueBtn:document.querySelector("#getting-started-continue")};this._studioApi=studioApi;this._step=step;this._ingestion=new ingestion_utils_1.IngestionUtils(studioApi);this._lsKey="show-getting-started-wizard-"+this._studioApi.projectId;this._els.step1.requiredUrl=`/studio/${this._studioApi.projectId}`;this._els.step2.requiredUrl=`/studio/${this._studioApi.projectId}`;this._els.step3.requiredUrl=`/studio/${this._studioApi.projectId}/acquisition/training`;this._els.step4.requiredUrl=`/studio/${this._studioApi.projectId}/acquisition/training`;this._els.step5.requiredUrl=`/studio/${this._studioApi.projectId}/create-impulse`;this._els.step6.requiredUrl=`/studio/${this._studioApi.projectId}/dsp/mfe/3`;this._els.step7.requiredUrl=`/studio/${this._studioApi.projectId}/dsp/mfe/3/generate-features`;this._els.step8.requiredUrl=`/studio/${this._studioApi.projectId}/learning/keras-transfer-kws/5`;this._els.step9.requiredUrl=`/studio/${this._studioApi.projectId}`;this._els.step10.requiredUrl=`/studio/${this._studioApi.projectId}/learning/keras-transfer-kws/5`;const onModalShown=()=>{localStorage.setItem(this._lsKey,"1");this._els.continueBtn.style.display="none"},onModalHidden=()=>{localStorage.setItem(this._lsKey,"0");this._els.continueBtn.style.display=""};for(let s of Object.values(this._els)){let iws=s;if(iws.modal){iws.dismissBtn&&iws.dismissBtn.addEventListener("click",this.quitEv.bind(this));$(iws.modal).on("show.bs.modal",onModalShown);$(iws.modal).on("hide.bs.modal",onModalHidden)}}this._els.continueBtn.onclick=ev=>{ev.preventDefault();this.showCurrentStep()};this._step4JobRunner=new job_runner_2.JobRunner(studioApi,this._els.step4.modal);1===this._step?this.showCurrentStep():"1"===localStorage.getItem(this._lsKey)?this.showCurrentStep():this._els.continueBtn.style.display=""}showCurrentStep(){for(let s of Object.values(this._els)){let iws=s;iws.modal&&$(iws.modal).modal("hide")}let step=this._step;1===step?this.showStep1():2===step?this.showStep2():3===step?this.showStep3():4===step?this.showStep4():5===step?this.showStep5():6===step?this.showStep6():7===step?this.showStep7():8===step?this.showStep8():9===step?this.showStep9():10===step&&this.showStep10()}moveToStep(step){this._step=step;this.showCurrentStep()}showStep1(){if(!location.pathname.startsWith(this._els.step1.requiredUrl)){localStorage.setItem(this._lsKey,"1");return location.pathname=this._els.step1.requiredUrl}$(this._els.step1.modal).modal();this._els.step1.nextBtn.onclick=async ev=>{ev.preventDefault();try{this._els.step1.nextBtn.classList.add("disabled");let res=await this._studioApi.projects.updateProject(this._studioApi.projectId,{gettingStartedStep:2});if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText;this.moveToStep(2)}catch(ex2){let ex=ex2;await notify_2.Notify.alert("Failed to go to next step",notify_2.Notify.extractMsg(ex),"error")}finally{this._els.step1.nextBtn.classList.remove("disabled")}}}showStep2(){if(!location.pathname.startsWith(this._els.step2.requiredUrl)){localStorage.setItem(this._lsKey,"1");return location.pathname=this._els.step2.requiredUrl}$(this._els.step2.modal).modal();$(this._els.step2.modal).on("shown.bs.modal",()=>{setTimeout(()=>{this._els.step2.keyword.focus()},200)});this._els.step2.keyword.classList.remove("is-invalid");this._els.step2.keyword.onkeyup=ev=>{if("Enter"===ev.key)return this._els.step2.nextBtn.click()};this._els.step2.nextBtn.onclick=async ev=>{ev.preventDefault();try{if(""===this._els.step2.keyword.value.trim())throw new Error("Enter a keyword or short sentence to continue");this._els.step2.nextBtn.classList.add("disabled");let res=await this._studioApi.projects.updateProject(this._studioApi.projectId,{gettingStartedStep:3,lastAcquisitionLabel:this._els.step2.keyword.value.trim()});if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText;this.moveToStep(3)}catch(ex2){let ex=ex2;await notify_2.Notify.alert("Failed to go to next step",notify_2.Notify.extractMsg(ex),"error")}finally{this._els.step2.nextBtn.classList.remove("disabled")}}}showStep3(){if(!location.pathname.startsWith(this._els.step3.requiredUrl)){localStorage.setItem(this._lsKey,"1");return location.pathname=this._els.step3.requiredUrl}let aqLabel=this._els.step3.modal.dataset.acquisitionLabel||"",totalSegments=0,metadataEl=document.querySelector('#metadata-labels input[data-label="'+this.convertLabel(aqLabel)+'"]');metadataEl&&(totalSegments=Math.floor(1.25*Number(metadataEl.dataset.count)));if(totalSegments>=15)return this.moveToStep(4);$(this._els.step3.modal).modal();let length=2500*(15-totalSegments);this._els.step3.recordBtn.textContent=`Record yourself saying "${aqLabel}" for `+`${Math.round(length/1e3)} seconds`;this._els.step3.nextBtn.classList.add("disabled");this._els.step3.recordBtn.onclick=async ev=>{ev.preventDefault();let secondsLeftIv,origText=this._els.step3.recordBtn.textContent,origRecordText=this._els.step3.samplingRecordMsg.textContent;try{this._els.step3.recordBtn.classList.add("disabled");await this._microphone.checkPermissions(!0);let timeEnd=Date.now()+length;secondsLeftIv=setInterval(()=>{let secondsLeft=Math.round((timeEnd-Date.now())/1e3);this._els.step3.samplingSecondsLeft.textContent=`${secondsLeft}s`},500);this._els.step3.recordSection.style.display="none";this._els.step3.samplingSection.style.display="";this._els.step3.samplingSecondsLeft.textContent=`${Math.round((timeEnd-Date.now())/1e3)}s`;let sampleData=await this._microphone.takeSample({frequency:16e3,length:length,inputChannels:1,continuousMode:!1});clearInterval(secondsLeftIv);this._els.step3.samplingRecordMsg.textContent="Finding segments...";let segments=this._findSegments.findSegments(sampleData.values,16e3,16e3,!1);if(0===segments.length)throw new Error("Could not find any unique segments... Check that your microphone is working!");this._els.step3.samplingRecordMsg.textContent="Uploading...";console.log("segments",segments.length);for(let s of segments){let data={protected:{ver:"v1",alg:"HS256"},signature:Array(64).fill("0").join(""),payload:{device_type:"EDGE_IMPULSE_UPLOADER",interval_ms:.0625,sensors:[{name:"audio",units:"wav"}],values:sampleData.values.slice(s.start,s.end)}};data.signature=await this._ingestion.createSignature(data);const encoded=JSON.stringify(data);let processed={encoded:this._ingestion.encode(encoded),contentType:"application/json"};totalSegments++;let category=totalSegments%5==0?"testing":"training";await this._ingestion.uploadData(category,aqLabel+".wav",processed.contentType,this.convertLabel(aqLabel),processed.encoded,"1",void 0)}console.log("totalSegments",totalSegments);if(totalSegments<15){await notify_2.Notify.alert("Just a few more!",`That was great, but we need ~${15-totalSegments} more samples. Hit the button again and add some more data!`,"info");length=2500*(15-totalSegments);origText=`Record yourself saying "${aqLabel}" for `+`${Math.round(length/1e3)} seconds`;return}await notify_2.Notify.alert("Great!","We have recorded enough samples.","success");origText="ðŸŽ‰   You've collected enough data!";this._els.step3.nextBtn.classList.remove("disabled")}catch(ex2){let ex=ex2;await notify_2.Notify.alert("Failed to record audio",notify_2.Notify.extractMsg(ex),"error")}finally{this._els.step3.recordBtn.classList.remove("disabled");this._els.step3.recordBtn.textContent=origText;this._els.step3.samplingRecordMsg.textContent=origRecordText;this._els.step3.recordSection.style.display="";this._els.step3.samplingSection.style.display="none";secondsLeftIv&&clearInterval(secondsLeftIv)}};this._els.step3.nextBtn.onclick=async ev=>{ev.preventDefault();try{this._els.step3.nextBtn.classList.add("disabled");let res=await this._studioApi.projects.updateProject(this._studioApi.projectId,{gettingStartedStep:4});if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText;this.moveToStep(4)}catch(ex2){let ex=ex2;await notify_2.Notify.alert("Failed to go to next step",notify_2.Notify.extractMsg(ex),"error")}finally{this._els.step3.nextBtn.classList.remove("disabled")}}}showStep4(){if(!location.pathname.startsWith(this._els.step4.requiredUrl)){localStorage.setItem(this._lsKey,"1");return location.pathname=this._els.step4.requiredUrl}$(this._els.step4.modal).modal();let jobId;(async()=>{let job=await this._step4JobRunner.getActiveJob(WebSocketTypes_2.JOB_KEY_PREFIX.keywordNoise);if(job){jobId=job.id;await this._step4JobRunner.resumeJob(job.id)}})();this._step4JobRunner.on("finished",async(id,success)=>{if(success||jobId!==id){if(jobId===id){this._els.step4.nextBtn.classList.remove("disabled");try{{let res=await this._studioApi.impulse.deleteImpulse(this._studioApi.projectId);if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText}{let res=await this._studioApi.impulse.createImpulse(this._studioApi.projectId,impulse);if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText}{let res=await this._studioApi.projects.updateProject(this._studioApi.projectId,{gettingStartedStep:5});if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText}await notify_2.Notify.alert("Great!","We now have enough data.","success");this._els.step4.addDataBtn.textContent="ðŸŽ‰   You've mixed in other keywords and background noise!"}catch(ex2){let ex=ex2;await notify_2.Notify.alert("Failed to set impulse and update step",notify_2.Notify.extractMsg(ex),"error")}}}else this._els.step4.addDataBtn.classList.remove("disabled")});this._els.step4.addDataBtn.onclick=async ev=>{ev.preventDefault();try{this._els.step4.addDataBtn.classList.add("disabled");jobId=await this._step4JobRunner.startJob(this._studioApi.jobs.startKeywordsNoiseJob(this._studioApi.projectId))}catch(ex2){let ex=ex2;await notify_2.Notify.alert("Failed to add keyword and noise data",notify_2.Notify.extractMsg(ex),"error")}};this._els.step4.nextBtn.onclick=async ev=>{ev.preventDefault();try{this._els.step4.nextBtn.classList.add("disabled");this.moveToStep(5)}catch(ex2){let ex=ex2;await notify_2.Notify.alert("Failed to go to next step",notify_2.Notify.extractMsg(ex),"error")}finally{this._els.step4.nextBtn.classList.remove("disabled")}}}showStep5(){if(!location.pathname.startsWith(this._els.step5.requiredUrl)){localStorage.setItem(this._lsKey,"1");return location.pathname=this._els.step5.requiredUrl}$(this._els.step5.modal).modal();this._els.step5.nextBtn.onclick=async ev=>{ev.preventDefault();try{this._els.step5.nextBtn.classList.add("disabled");{let res=await this._studioApi.impulse.deleteImpulse(this._studioApi.projectId);if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText}{let res=await this._studioApi.impulse.createImpulse(this._studioApi.projectId,impulse);if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText}{let res=await this._studioApi.projects.updateProject(this._studioApi.projectId,{gettingStartedStep:6});if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText}this.moveToStep(6)}catch(ex2){let ex=ex2;await notify_2.Notify.alert("Failed to go to next step",notify_2.Notify.extractMsg(ex),"error")}finally{this._els.step5.nextBtn.classList.remove("disabled")}}}showStep6(){if(!location.pathname.startsWith(this._els.step6.requiredUrl)){localStorage.setItem(this._lsKey,"1");return location.pathname=this._els.step6.requiredUrl}let aqLabel=this._els.step3.modal.dataset.acquisitionLabel||"",allOptions=Array.from(document.querySelectorAll("#dsp-select-sample option")),opt=allOptions.find(x=>(x.textContent||"").indexOf(this.convertLabel(aqLabel))>-1),dspSelect=document.querySelector("#dsp-select-sample");dspSelect&&opt&&(dspSelect.selectedIndex=allOptions.indexOf(opt));$(this._els.step6.modal).modal();this._els.step6.nextBtn.onclick=async ev=>{ev.preventDefault();try{this._els.step6.nextBtn.classList.add("disabled");{let res=await this._studioApi.dsp.setDspConfig(this._studioApi.projectId,3,dspConfig);if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText}{let res=await this._studioApi.projects.updateProject(this._studioApi.projectId,{gettingStartedStep:7});if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText}this.moveToStep(7)}catch(ex2){let ex=ex2;await notify_2.Notify.alert("Failed to go to next step",notify_2.Notify.extractMsg(ex),"error")}finally{this._els.step6.nextBtn.classList.remove("disabled")}}}showStep7(){if(!location.pathname.startsWith(this._els.step7.requiredUrl)){localStorage.setItem(this._lsKey,"1");return location.pathname=this._els.step7.requiredUrl}let hasFeatureExplorer="1"===document.querySelector(".feature-explorer-content").dataset.hasFeatures;if(!hasFeatureExplorer){this._els.step7.nextBtn.classList.add("disabled");this._els.step7.progress.style.display="";let iv=setInterval(()=>{hasFeatureExplorer="1"===document.querySelector(".feature-explorer-content").dataset.hasFeatures;if(hasFeatureExplorer){this._els.step7.progress.style.display="none";this._els.step7.nextBtn.classList.remove("disabled");clearInterval(iv)}},1e3)}$(this._els.step7.modal).modal();setTimeout(()=>{if(!hasFeatureExplorer){let btn=document.querySelector("#generate-features-btn");btn.classList.contains("disabled")||btn.click()}},3e3);hasFeatureExplorer&&(this._els.step7.progress.style.display="none");this._els.step7.nextBtn.onclick=async ev=>{ev.preventDefault();try{this._els.step7.nextBtn.classList.add("disabled");let res=await this._studioApi.projects.updateProject(this._studioApi.projectId,{gettingStartedStep:8});if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText;this.moveToStep(8)}catch(ex2){let ex=ex2;await notify_2.Notify.alert("Failed to go to next step",notify_2.Notify.extractMsg(ex),"error")}finally{this._els.step7.nextBtn.classList.remove("disabled")}}}showStep8(){if(!location.pathname.startsWith(this._els.step8.requiredUrl)){localStorage.setItem(this._lsKey,"1");return location.pathname=this._els.step8.requiredUrl}let fxEl=document.querySelector(".feature-explorer-content"),hasFeatureExplorer=!!fxEl&&"1"===fxEl.dataset.hasFeatures;if(!hasFeatureExplorer){this._els.step8.nextBtn.classList.add("disabled");this._els.step8.progress.style.display="";let iv=setInterval(()=>{fxEl=document.querySelector(".feature-explorer-content");hasFeatureExplorer=!!fxEl&&"1"===fxEl.dataset.hasFeatures;if(hasFeatureExplorer){this._els.step8.nextBtn.classList.remove("disabled");this._els.step8.progress.style.display="none";clearInterval(iv)}},1e3)}$(this._els.step8.modal).modal();setTimeout(()=>{if(!hasFeatureExplorer){let btn=document.querySelector("#train");btn.classList.contains("disabled")||btn.click()}},3e3);hasFeatureExplorer&&(this._els.step8.progress.style.display="none");this._els.step8.nextBtn.onclick=async ev=>{ev.preventDefault();try{this._els.step8.nextBtn.classList.add("disabled");let res=await this._studioApi.projects.updateProject(this._studioApi.projectId,{gettingStartedStep:9});if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText;this.moveToStep(9)}catch(ex2){let ex=ex2;await notify_2.Notify.alert("Failed to go to next step",notify_2.Notify.extractMsg(ex),"error")}finally{this._els.step8.nextBtn.classList.remove("disabled")}}}showStep9(){if(!location.pathname.startsWith(this._els.step9.requiredUrl)){localStorage.setItem(this._lsKey,"1");return location.pathname=this._els.step9.requiredUrl}$(this._els.step9.modal).modal();(async()=>{try{let res=await this._studioApi.projects.getProjectInfo(this._studioApi.projectId);if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText;if(!res.body.urls.mobileClient)throw new Error("No URL for mobileClient");this._els.step9.iframe.src=res.body.urls.mobileClient.replace("index.html","classifier.html")}catch(ex2){let ex=ex2;await notify_2.Notify.alert("Failed to load iframe",notify_2.Notify.extractMsg(ex),"error")}})();this._els.step9.nextBtn.onclick=async ev=>{ev.preventDefault();try{this._els.step9.nextBtn.classList.add("disabled");let res=await this._studioApi.projects.updateProject(this._studioApi.projectId,{gettingStartedStep:-1});if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText;this.moveToStep(10)}catch(ex2){let ex=ex2;await notify_2.Notify.alert("Failed to go to next step",notify_2.Notify.extractMsg(ex),"error")}finally{this._els.step9.nextBtn.classList.remove("disabled")}}}showStep10(){if(!location.pathname.startsWith(this._els.step10.requiredUrl)){localStorage.setItem(this._lsKey,"1");return location.pathname=this._els.step10.requiredUrl}(async()=>{let performance,maxTime=Date.now()+5e3;for(;!performance;){performance=document.querySelector(".metadata-performance-section");if(performance)break;await new Promise(resolve=>setTimeout(resolve,1e3));if(maxTime>Date.now())break}performance&&(this._els.step10.performance.innerHTML=performance.innerHTML);$(this._els.step10.modal).modal()})()}async quitEv(ev){ev.preventDefault();try{if(!await notify_2.Notify.confirm("Quit the wizard?","Are you sure you want to quit the getting started wizard? You can always re-launch the wizard from the Dashboard.","Yes, quit","info","info"))return;let res=await this._studioApi.projects.updateProject(this._studioApi.projectId,{gettingStartedStep:-1});if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText;location.reload()}catch(ex2){let ex=ex2;await notify_2.Notify.alert("Failed to quit wizard",notify_2.Notify.extractMsg(ex),"error")}}convertLabel(label){return label.toLowerCase().replace(/[^\w]+/g,"_").replace(/[_]+/g,"_")}}}));define("client/global-ui",["require","exports","client/studio-api","client/notify","client/project/components/getting-started-wizard"],(function(require,exports,studio_api_2,notify_3,getting_started_wizard_1){Object.defineProperty(exports,"__esModule",{value:!0});exports.GlobalUI=void 0;class GlobalUI{constructor(){Array.from(document.querySelectorAll("*[data-clipboard-target]")).forEach(a=>{let clipboard=new ClipboardJS(a);a.onclick=ev=>ev.preventDefault();let tt=$(a).tooltip().attr("title","Copy to clipboard");tt.on("mouseleave",()=>{tt.tooltip("hide")});clipboard.on("success",e=>{console.log("clipboard success");tt.attr("title","Copied").tooltip("_fixTitle").tooltip("show").attr("title","Copy to clipboard").tooltip("_fixTitle");e.clearSelection()})});$('[data-toggle="tooltip"]').tooltip();$("[data-toggle=tooltip]").on("click",(function(){$(this).tooltip("hide")}));$('[data-toggle="select"]').select2({minimumResultsForSearch:-1});let logoutBtns=Array.from(document.querySelectorAll(".logout-btn"));for(let logoutBtn of logoutBtns)logoutBtn.addEventListener("click",e=>{e.preventDefault();let form=document.createElement("form");form.method="POST";form.action="/logout";document.body.appendChild(form);form.submit()});this.setFriendlyDates()}static getFriendlyDateString(date){"string"==typeof date&&(date=new Date(date));let dateStr=date.toDateString().split(" ").slice(1).join(" ");(d=>{const today=new Date;return d.getDate()===today.getDate()&&d.getMonth()===today.getMonth()&&d.getFullYear()===today.getFullYear()})(date)&&(dateStr="Today");(d=>{const yesterday=new Date(Date.now()-864e5);return d.getDate()===yesterday.getDate()&&d.getMonth()===yesterday.getMonth()&&d.getFullYear()===yesterday.getFullYear()})(date)&&(dateStr="Yesterday");dateStr+=", "+date.toTimeString().split(" ")[0];return dateStr}static getFriendlyFileSizeString(fileSizeInBytes){if(fileSizeInBytes<1024)return fileSizeInBytes+" Bytes";let i=-1;do{fileSizeInBytes/=1024;i++}while(fileSizeInBytes>1024);return Math.max(fileSizeInBytes,.1).toFixed(1)+" "+["kB","MB","GB","TB","PB","EB","ZB","YB"][i]}static getFriendlyDuration(durationSecs){let duration=durationSecs;const output=[];let i=0;const divs=[60,60,24,30],symbols=["s","m","h","d"];for(;duration>0||i<divs.length;){const value=duration%divs[i];value>0&&output.unshift(`${value}${symbols[i]}`);duration=Math.floor(duration/divs[i]);i++}return output?output.join(""):"0s"}static setRetrainInvalid(){if(!(Array.from(document.querySelectorAll(".impulse-design-menu a.impulse-type-create > i")).every(i=>i.classList.contains("text-green"))&&Array.from(document.querySelectorAll(".impulse-design-menu a.impulse-type-dsp > i")).every(i=>i.classList.contains("text-green"))))return;let retrainMenuItem=document.querySelector("#retrain-menu-item");retrainMenuItem.querySelector("#retrain-new-data-indicator").style.display="";retrainMenuItem.querySelector("a > i").title="Training data was updated since the model was trained last time. Retrain the model to ensure the latest updates are visible."}static setRetrainComplete(){let retrainMenuItem=document.querySelector("#retrain-menu-item");retrainMenuItem.querySelector("#retrain-new-data-indicator").style.display="none";retrainMenuItem.querySelector("a > i").title=""}static flattenFeatures(features){let rawFeaturesFlattened=[],rawFeaturesHasFloats=!1;for(let f of features)for(let v of f){rawFeaturesFlattened.push(v);rawFeaturesHasFloats||v===Math.floor(v)||(rawFeaturesHasFloats=!0)}return{features:rawFeaturesFlattened,hasFloats:rawFeaturesHasFloats}}
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
static cssEscape(value){let codeUnit,string=String(value),length=string.length,index=-1,result="",firstCodeUnit=string.charCodeAt(0);for(;++index<length;){codeUnit=string.charCodeAt(index);0!==codeUnit?result+=codeUnit>=1&&codeUnit<=31||127===codeUnit||0===index&&codeUnit>=48&&codeUnit<=57||1===index&&codeUnit>=48&&codeUnit<=57&&45===firstCodeUnit?"\\"+codeUnit.toString(16)+" ":(0!==index||1!==length||45!==codeUnit)&&(codeUnit>=128||45===codeUnit||95===codeUnit||codeUnit>=48&&codeUnit<=57||codeUnit>=65&&codeUnit<=90||codeUnit>=97&&codeUnit<=122)?string.charAt(index):"\\"+string.charAt(index):result+="ï¿½"}return result}static setFriendlyDatesForContainer(container){Array.from(container.querySelectorAll("*[data-friendly-date]")).forEach(_el=>{let el=_el,ds=el.dataset.friendlyDate;ds&&(el.textContent=el.title=GlobalUI.getFriendlyDateString(new Date(ds)))})}initWithApi(userId,studioApi){studioApi.socket.addEventListener("new-file-training",()=>{GlobalUI.setRetrainInvalid()});for(let a of Array.from(document.querySelectorAll("*[data-ga-action]")))a.addEventListener("click",()=>{studioApi.analytics.event("click",{event_category:"link",event_label:a.dataset.gaAction||""})});const socketIoConnected=document.querySelector("#socket-io-connected");if(socketIoConnected){studioApi.socket.addEventListener("connect",()=>{socketIoConnected.value="1"});studioApi.socket.addEventListener("disconnect",()=>{socketIoConnected.value="0"})}const navOrgDataLinks=Array.from(document.querySelectorAll(".org-data-nav-link"));for(const navOrgData of navOrgDataLinks)navOrgData&&studioApi instanceof studio_api_2.StudioOrganizationApi&&localStorage.getItem("last-org-data-filter-"+studioApi.organizationId)&&(navOrgData.href+="?"+localStorage.getItem("last-org-data-filter-"+studioApi.organizationId));studioApi instanceof studio_api_2.StudioProjectApi&&this.bindCloneButtons(userId,studioApi);$("#add-device-modal").on("show.bs.modal",async()=>{if(!(studioApi instanceof studio_api_2.StudioProjectApi))return;let linkEl=document.querySelector("#desktop-capture-link");if(linkEl)try{let res=await studioApi.projects.getProjectInfo(studioApi.projectId);if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText;if(res.body.urls.mobileClientComputer){linkEl.href=res.body.urls.mobileClientComputer;linkEl.onclick=()=>{$("#add-device-modal").modal("hide")}}else linkEl.onclick=()=>{notify_3.Notify.alert("Failed to collect data","No development API key set. Go to **Dashboard > Keys** to create one before you continue.","error")}}catch(ex2){console.warn("Failed to get project info",ex2)}});if(studioApi instanceof studio_api_2.StudioProjectApi){let gettingStartedStep=document.querySelector("#getting-started-step");if(gettingStartedStep){new getting_started_wizard_1.GettingStartedWizard(studioApi,Number(gettingStartedStep.value))}}}setFriendlyDates(){Array.from(document.querySelectorAll("*[data-friendly-date]")).forEach(_el=>{let el=_el,ds=el.dataset.friendlyDate;ds&&(el.textContent=el.title=GlobalUI.getFriendlyDateString(new Date(ds)))})}bindCloneButtons(userId,studioApi){const cloneHandler=async()=>{if(0!==userId){let p=await notify_3.Notify.prompt("Clone this project","You're one step away from cloning this project. Enter a name for the cloned project to continue.","Clone this project",studioApi.projectName,"question","success");if(!p)return;try{let cp=await studioApi.projects.createProject({projectName:p});if(!cp.body||!cp.body.success)throw cp.body&&cp.body.error||cp.response.responseText;location.href=`/studio/${cp.body.id}/clone?fromPublicProjectId=`+encodeURIComponent(studioApi.projectId)}catch(ex2){let ex=ex2;await notify_3.Notify.alert("Failed to clone project",notify_3.Notify.extractMsg(ex),"danger")}}else{let login=document.querySelector("#clone-login-login"),signup=document.querySelector("#clone-login-signup");if(login&&signup){login.href=`/login?next=${encodeURIComponent(studioApi.baseUrl+"?clone=1")}`;signup.href=`/signup?next=${encodeURIComponent(studioApi.baseUrl+"?clone=1")}`}$("#clone-login-modal").modal()}};let s=location.search;if(s.indexOf("clone=1")>-1){s=s.replace("clone=1","");"?"===s&&(s="");window.history.pushState("","",location.pathname+s);cloneHandler()}for(let b of Array.from(document.querySelectorAll(".clone-project-btn")))b.onclick=async ev=>{ev.preventDefault();await cloneHandler()}}}exports.GlobalUI=GlobalUI;GlobalUI.createMemString=n=>n>1048576?GlobalUI.toFixedLocaleString(n/1024/1024,1)+"M":GlobalUI.toFixedLocaleString(n/1024,1)+"K";GlobalUI.toFixedLocaleString=(toPrint,fixedLength)=>{let options={minimumFractionDigits:fixedLength,maximumFractionDigits:fixedLength};return toPrint.toLocaleString(void 0,options)}}));define("client/project/components/device-api",["require","exports","client/typed-event-emitter","client/api-definition/index"],(function(require,exports,typed_event_emitter_2,api_definition_2){Object.defineProperty(exports,"__esModule",{value:!0});exports.DeviceApi=exports.DeviceStartSampling=void 0;class DeviceStartSampling extends typed_event_emitter_2.Emitter{constructor(studioApi,socket,req){super();this._studioApi=studioApi;this._socket=socket;this._options=req}async start(){if(!api_definition_2.StartSamplingRequestCategoryEnumValues.includes(this._options.category))throw new Error('Unknown category "'+this._options.category+'"');let req=await this._studioApi.devices.startSampling(this._studioApi.projectId,this._options.deviceId,{category:this._options.category,intervalMs:this._options.interval,label:this._options.label,lengthMs:this._options.length,sensor:this._options.sensor});if(!req.body||!req.body.success||!req.body.id)throw new Error(req.body&&req.body.error||req.response.responseText);this._id=req.body.id;console.log("start sampling OK",this._id);this._socket.addEventListener("sampling-request-received-"+this._id,()=>{console.log("sampling-request-received-"+this._id);this.emit("requestReceived")});this._socket.addEventListener("sampling-finished-"+this._id,()=>{this.emit("finished")});this._socket.addEventListener("sampling-started-"+this._id,()=>{this.emit("started")});this._socket.addEventListener("sampling-processing-"+this._id,()=>{this.emit("processing")});this._socket.addEventListener("sampling-reading-"+this._id,ev=>{this.emit("reading",ev.progressPercentage)});this._socket.addEventListener("sampling-uploading-"+this._id,()=>{this.emit("uploading")});this._socket.addEventListener("sampling-error-"+this._id,ex=>{this.emit("error",ex)});this._socket.addEventListener("sampling-closed-"+this._id,()=>{this.emit("closed")});this._socket.addEventListener("serial-open",ev=>{ev.deviceId===this._options.deviceId&&this.emit("connected")})}cancel(){this._id&&this._socket.emit("sampling-cancel-"+this._id)}}exports.DeviceStartSampling=DeviceStartSampling;class DeviceApi extends typed_event_emitter_2.Emitter{constructor(studioApi,socket,analytics,connectedDevices){super();this._studioApi=studioApi;this._socket=socket;this._connectedDevices=connectedDevices;this._analytics=analytics;socket.addEventListener("serial-open",ev=>{this._connectedDevices.push(ev);this.emit("connected",ev)});socket.addEventListener("serial-close",deviceId=>{let ix=this._connectedDevices.findIndex(d=>d.deviceId===deviceId);if(-1!==ix){this._connectedDevices.splice(ix,1);this.emit("disconnected",deviceId)}});socket.addEventListener("snapshot",ev=>{let device=this._connectedDevices.find(d=>d.deviceId===ev.deviceId);device&&this.emit("snapshot",device,ev.snapshotBase64)});socket.addEventListener("hello",list=>{for(let d of this._connectedDevices)list.devices.some(l=>l.deviceId===d.deviceId)||this.emit("disconnected",d.deviceId);for(let d of list.devices)this._connectedDevices.some(l=>l.deviceId===d.deviceId)||this.emit("connected",d);this._connectedDevices=list.devices});socket.addEventListener("disconnect",()=>{for(let d of this._connectedDevices)this.emit("disconnected",d.deviceId);this._connectedDevices=[]})}isConnected(deviceId){return-1!==this._connectedDevices.findIndex(d=>d.deviceId===deviceId)}getConnectionType(deviceId){let d=this._connectedDevices.filter(t=>t.deviceId===deviceId)[0];return d?d.connection:""}startSnapshotStreaming(deviceId){let ev={deviceId:deviceId};this._socket.emit("start-snapshot-streaming",ev)}stopSnapshotStreaming(deviceId){let ev={deviceId:deviceId};this._socket.emit("stop-snapshot-streaming",ev)}async startSampling(deviceId,category,label,length,interval,sensor){let device=this._connectedDevices.find(d=>d.deviceId===deviceId);if(!device)throw new Error('Device "'+deviceId+'" is no longer connected');if(sensor){let s=device.sensors.find(z=>z.name===sensor);if(!s)throw new Error('Cannot find sensor "'+sensor+'" on this device');if(s.name.toLowerCase().startsWith("camera")||s.name.toLowerCase().startsWith("video"));else{let freq=1e3/interval;if(!s.frequencies.find(t=>Math.abs(freq-t)<.01))throw new Error("Selected frequency "+freq+"Hz. is not in the supported frequencies")}if(0===s.maxSampleLengthS&&"SONY_SPRESENSE"===device.deviceType)throw new Error("No SD Card detected. To sample from the accelerometer or microphone on Sony's Spresense you'll need to insert a FAT formatted SD Card into the extension board. For debug messages regarding the SD Card run 'edge-impulse-run-impulse --raw'.");if(length>1e3*s.maxSampleLengthS)throw new Error("Sample length is too long. Maximum allowed is "+1e3*s.maxSampleLengthS+"ms.")}let req={deviceId:deviceId,label:label,length:length,category:category,interval:interval,sensor:sensor};this._analytics.event("sample-start",{event_category:category,event_label:label});let ee=new DeviceStartSampling(this._studioApi,this._socket,req);await ee.start();ee.on("requestReceived",()=>{this._analytics.event("sample-started",{event_category:category,event_label:label})});ee.on("error",()=>{this._analytics.event("sample-error",{event_category:category,event_label:label})});ee.on("started",()=>{this._analytics.event("sample-started",{event_category:category,event_label:label})});ee.on("processing",()=>{this._analytics.event("sample-processing",{event_category:category,event_label:label})});ee.on("reading",()=>{this._analytics.event("sample-reading",{event_category:category,event_label:label})});ee.on("uploading",()=>{this._analytics.event("sample-uploading",{event_category:category,event_label:label})});ee.on("finished",()=>{this._analytics.event("sample-finished",{event_category:category,event_label:label})});ee.on("closed",()=>{this._analytics.event("sample-closed",{event_category:category,event_label:label})});ee.on("connected",()=>{this._analytics.event("sample-connected",{event_category:category,event_label:label})});return ee}}exports.DeviceApi=DeviceApi}));define("client/project/pages/device-ui",["require","exports","client/global-ui","client/notify"],(function(require,exports,global_ui_3,notify_4){Object.defineProperty(exports,"__esModule",{value:!0});exports.DeviceUI=void 0;exports.DeviceUI=class{constructor(studioApi,device){this._rowTemplate=document.querySelector("#device-row-template").content.querySelector("tr");this._deviceTable=document.querySelector("#device-table");this._deviceTableResponsive=document.querySelector(".table-responsive");this._rowNoDevices=document.querySelector("#row-no-devices");this._studioApi=studioApi;this._deviceApi=device;this._deviceApi.on("connected",this.onConnected.bind(this));this._deviceApi.on("disconnected",this.onDisconnected.bind(this));Array.from(document.querySelectorAll("tr[data-device-id]")).forEach(_tr=>{let tr=_tr,id=tr.dataset.deviceId||"";this._deviceApi.isConnected(id)?this.setConnected(id,this._deviceApi.getConnectionType(id)):this.setNotConnected(id);this.bindDropdown(tr)});window.history.replaceState(null,"",window.location.pathname)}bindDropdown(el){let deviceId=(el.dataset.deviceId||"").trim(),nameEl=el.querySelector(".device-name");for(let d of Array.from(el.querySelectorAll("a.dropdown-item")).map(a=>a))d.onclick=async ev=>{ev.preventDefault();switch(d.dataset.action){case"rename":{let n=(nameEl.textContent||"").trim(),v=await notify_4.Notify.prompt("New name",'Enter a new name for "'+n+'"',"Rename",n,"question","info");v&&this.rename(deviceId||"",v);break}case"delete":await notify_4.Notify.confirm("Deleting "+(nameEl.textContent||deviceId).trim(),`Are you sure you want to delete "${(nameEl.textContent||deviceId).trim()}"?`,"Yes, delete","question","danger")&&this.delete(deviceId);break}this._studioApi.analytics.event("click",{event_category:"device-ui",event_label:d.dataset.action})}}async rename(deviceId,name){let tr=document.querySelector('tr[data-device-id="'+deviceId+'"]');if(!tr)return console.error("Failed to get row for device ID",deviceId);try{let{response:response,body:body}=await this._studioApi.devices.renameDevice(this._studioApi.projectId,deviceId,{name:name});if(!body.success)throw body.error||response.statusText;let el=tr.querySelector("span.device-name");el&&(el.textContent=name)}catch(ex2){let ex=ex2;console.error("Editing name failed",ex);notify_4.Notify.alert("Failed to rename item",notify_4.Notify.extractMsg(ex),"danger")}}async delete(deviceId){let tr=document.querySelector('tr[data-device-id="'+deviceId+'"]');if(!tr)return console.error("Failed to get row for device ID",deviceId);try{let resp=await this._studioApi.devices.deleteDevice(this._studioApi.projectId,deviceId);if(!resp.body||!resp.body.success)throw resp.body&&resp.body.error||resp.response.statusText;let nameEl=tr.querySelector(".device-name"),n=nameEl&&nameEl.textContent||deviceId;location.href=location.pathname+"?removedDevice="+encodeURIComponent(n)}catch(ex2){let ex=ex2;notify_4.Notify.alert("Failed to remove device",notify_4.Notify.extractMsg(ex),"danger")}}setLastSeen(id,lastSeen){let tr=document.querySelector('tr[data-device-id="'+id+'"]');if(!tr)return console.error("Failed to get row for device ID",id);tr.querySelector(".last-seen").textContent=global_ui_3.GlobalUI.getFriendlyDateString(lastSeen)}setConnected(id,connection){let el=document.querySelector('tr[data-device-id="'+id+'"]');if(!el)return console.error("Failed to get row for device ID",id);let i=el.querySelector(".connection-status").querySelector("i");i.classList.remove("bg-gray");i.classList.remove("bg-warning");i.classList.add("bg-success");i.title="Connected through "+connection}setNotConnected(id){let el=document.querySelector('tr[data-device-id="'+id+'"]');if(!el)return console.log("Failed to get row for device ID",id);let i=el.querySelector(".connection-status").querySelector("i");i.classList.remove("bg-gray");i.classList.add("bg-warning");i.classList.remove("bg-success");i.title="Not connected"}async onConnected(ev){if(!document.querySelector('tr[data-device-id="'+ev.deviceId+'"]')){let newTr=this.renderRow(ev),tbody=this._deviceTable.querySelector("tbody");tbody.insertBefore(newTr,tbody.firstChild);this._deviceTableResponsive.style.display="initial";this._rowNoDevices.style.display="none"}this.setConnected(ev.deviceId,ev.connection);this.setLastSeen(ev.deviceId,new Date)}onDisconnected(id){this.setNotConnected(id)}renderRow(device){let newTr=this._rowTemplate.cloneNode(!0);console.log("renderRow",device);newTr.dataset.deviceId=device.deviceId;let deviceNameEl=newTr.querySelector("span.device-name"),deviceIdEl=newTr.querySelector(".device-id"),deviceTypeEl=newTr.querySelector(".device-type"),deviceSensorsEl=newTr.querySelector(".device-sensors"),deviceLogoEl=newTr.querySelector(".device-logo"),deviceLogoImgEl=newTr.querySelector(".device-logo-img"),deviceNoLogoEl=newTr.querySelector(".device-nologo");deviceNameEl.textContent=device.deviceName;deviceIdEl.title=device.deviceId.toUpperCase();deviceIdEl.textContent=device.deviceId;deviceTypeEl.title=device.deviceType;deviceTypeEl.textContent=device.deviceType;let sensorString=(device.sensors||[]).map(s=>s.name).join(", ");deviceSensorsEl.title=sensorString;deviceSensorsEl.textContent=sensorString;let deviceLogo=this.getDeviceLogo(device.deviceType);if(deviceLogo){deviceNoLogoEl.style.display="none";deviceLogoEl.className=deviceLogoEl.className+" avatar-"+deviceLogo.split(".")[0];deviceLogoImgEl.src=deviceLogoImgEl.src+deviceLogo}else deviceLogoEl.style.display="none";this.bindDropdown(newTr);return newTr}getDeviceLogo(deviceType){return deviceType.startsWith("ARDUINO_")?"arduino.png":deviceType.startsWith("PORTENTA_")?"arduino.png":deviceType.startsWith("DISCO_")?"st.png":deviceType.startsWith("ETA_")?"eta.png":deviceType.startsWith("MOBILE_CLIENT")?"edgeimpulse.svg":deviceType.startsWith("OPENMV_")?"openmv.png":deviceType.startsWith("SEEED_")?"seeed.png":deviceType.toUpperCase().startsWith("SILABS")?"silabs.png":deviceType.toUpperCase().startsWith("HIMAX")?"himax.png":deviceType.toUpperCase().startsWith("EDGE_IMPULSE_")?"edgeimpulse.svg":deviceType.toUpperCase().startsWith("DATA_FORWARDER")?"edgeimpulse.svg":deviceType.toUpperCase().startsWith("NRF")?"nordic.png":deviceType.toUpperCase().startsWith("RASPBERRY")?"raspberry.png":deviceType.toUpperCase().startsWith("NVIDIA")?"nvidia.png":deviceType.toUpperCase().startsWith("SONY")?"sony.png":deviceType.toUpperCase().startsWith("TI_LAUNCH")?"ti.jpg":deviceType.toUpperCase().startsWith("NORDIC")?"nordic.png":void 0}}}));define("client/project/components/acquisition-chart",["require","exports","client/typed-event-emitter","shared/viewmodels/retrain"],(function(require,exports,typed_event_emitter_3,retrain_1){Object.defineProperty(exports,"__esModule",{value:!0});exports.AcquisitionChart=void 0;class AcquisitionChart extends typed_event_emitter_3.Emitter{constructor(studioApi,bodyEl,limitPayloadValues,statusEl,chartOptions={},dspId=retrain_1.DSP_RAW_DATA,maxLegendDimensions,showsXaxis=!1,applyPadding=!1){super();this._reqId=0;this._cache={};this._padding=0;this._dataPoints=0;this._studioApi=studioApi;this._bodyEl=bodyEl;this._statusEl=statusEl;this._chartEl=bodyEl.querySelector("canvas");this._origStatus=statusEl&&statusEl.textContent||"";this._chartOptions=chartOptions;this._dspId=dspId;this._maxLegendDimensions=maxLegendDimensions;this._showsXAxis=showsXaxis;this._applyPadding=applyPadding;this._limitPayloadValues=limitPayloadValues;window.addEventListener("resize",this.onResize.bind(this))}static getGraphColors(count){let borderColors=[],h=[[11,98,56],[156,76,46],[188,100,46],[27,96,46],[44,96,46],[58,96,46],[74,96,46],[105,96,46],[120,96,46],[136,96,46],[217,96,46],[248,96,46],[273,96,46],[298,96,46],[330,96,46],[355,96,46]];for(let ix=0;ix<count;ix++)borderColors.push(`hsl(${h[ix%h.length][0]}, ${h[ix%h.length][1]}%, ${h[ix%h.length][2]}%)`);return borderColors}async load(id,name){let r=++this._reqId;if(!this._cache[id]){console.time("loadSample");let loadTimeout=setTimeout(()=>{if(r===this._reqId&&this._statusEl){let i=document.createElement("i");i.classList.add("fa","fa-spinner","spin-animation","mr-2");let loadingSpan=document.createElement("span");loadingSpan.textContent=name?"Loading "+name+"...":"Loading...";console.log("acquisition image loading");this._statusEl.innerHTML="";this._statusEl.appendChild(i);this._statusEl.appendChild(loadingSpan)}},this._statusEl&&this._statusEl.querySelector("i.fa-spinner")?0:300);console.log("aq chart get data",this._dspId,"limit",this._limitPayloadValues);try{let data;data=this._dspId===retrain_1.DSP_RAW_DATA?(await this._studioApi.rawData.getSample(this._studioApi.projectId,id,this._limitPayloadValues)).body:(await this._studioApi.dsp.getDspRawSample(this._studioApi.projectId,this._dspId,id,this._limitPayloadValues)).body;console.timeEnd("loadSample");clearTimeout(loadTimeout);if(r!==this._reqId)return;if(!data||!data.success)return console.error("Failed to load acquisition chart",data.error);if(!data.sample||!data.payload)return console.error("Sample or payload missing from response",data);this._cache[id]=data}catch(ex){this._statusEl&&(this._statusEl.textContent=this._origStatus);clearTimeout(loadTimeout);throw ex}}console.time("loadedEv");this.emit("loaded",this._cache[id]);console.timeEnd("loadedEv");console.time("render");await this.render(this._cache[id]);console.timeEnd("render");this._loadedSampleId=id}async setData(data,offsetX,overrideLabelRatio){this.emit("loaded",data);await this.render(data,offsetX,overrideLabelRatio)}clear(){this._bodyEl.style.display="none";if(this._statusEl){console.log("acquisition chart clear");this._statusEl.textContent=this._origStatus}++this._reqId}getDimensions(){let{width:width,height:height}=this._chartEl.getBoundingClientRect(),left=0,right=0;if(this._chart&&this._chart.boxes){let margins=this._chart.boxes.filter(f=>f.fullWidth&&"top"===f.position)[0].margins;left=margins.left;right=margins.right}return{left:left-this._padding,right:right-this._padding,width:width,height:height}}getLoadedSampleId(){return this._loadedSampleId}removeFromCache(id){delete this._cache[id]}mergeDeep(target,...sources){function isObject(item){return item&&"object"==typeof item&&!Array.isArray(item)}if(!sources.length)return target;const source=sources.shift();if(isObject(target)&&isObject(source))for(const key in source)if(isObject(source[key])){target[key]||Object.assign(target,{[key]:{}});this.mergeDeep(target[key],source[key])}else Object.assign(target,{[key]:source[key]});return this.mergeDeep(target,...sources)}async render(data,offsetX,overrideLabelRatio){this._bodyEl.style.display="";if(this._statusEl){console.log("acquisition chart render");this._statusEl.textContent=data.sample.filename}let suggestedMin,suggestedMax;if(data.payload.sensors.some(s=>"m/s2"===s.units)){suggestedMin=-20;suggestedMax=20}if(data.payload.sensors.some(s=>"wav"===s.units)){suggestedMin=-1e4;suggestedMax=1e4}let options=this.mergeDeep({animation:!1,tooltips:!1,hover:{mode:null},events:[],scales:{yAxes:[{gridLines:{lineWidth:0,zeroLineColor:Charts.colors.gray[900]},ticks:{suggestedMin:suggestedMin,suggestedMax:suggestedMax}}],xAxes:[{ticks:{maxRotation:0,minRotation:0,maxTicksLimit:10,callback:(label,index,values)=>Math.floor(Number(label))}}]},legend:{display:!0,maxWidth:200,maxHeight:200},onResize:size=>{this._handleResize(size)}},this._chartOptions),borderColors=AcquisitionChart.getGraphColors(data.payload.sensors.length);this._dataPoints=data.totalPayloadLength;let datasets=[];for(let ix=0;ix<data.payload.sensors.length;ix++){let ds={label:data.payload.sensors[ix].name,borderColor:borderColors[ix],data:data.payload.values.map(v=>v[ix])};1===ds.data.length&&ds.data.push(ds.data[0]);datasets.push(ds)}const labelRatio=overrideLabelRatio||data.totalPayloadLength/data.payload.values.length,labelPadding=this._applyPadding&&data.totalPayloadLength<100?data.sample.intervalMs:0;let labels=[...Array(data.payload.values.length).keys()].map(v=>v*data.sample.intervalMs*labelRatio+labelPadding+(offsetX||0));console.log("labels",labels,"datasets",datasets);let config={type:"line",options:options,data:{labels:labels.map(l=>l.toString()),datasets:datasets}};if(!this._chart){this._chart=new Chart(this._chartEl,config);this._maxLegendDimensions&&(this._chart.legend.afterFit=()=>{if(this._maxLegendDimensions){let legend=this._chart.legend;this._maxLegendDimensions.height&&legend.height>this._maxLegendDimensions.height&&(legend.minSize.height=legend.height=this._maxLegendDimensions.height);this._maxLegendDimensions.width&&legend.width>this._maxLegendDimensions.width&&(legend.minSize.width=legend.width=this._maxLegendDimensions.width)}})}this._chart.config.data=config.data;this._chart.options=options;this._chart.update();window.chart=this._chart;this.emit("rendered");const chartSize={height:this._chart.height||0,width:this._chart.width||0};this._handleResize(chartSize)}_handleResize(size){var _a;if(!this._applyPadding){this._padding=0;return}const barWidth=size.width/this._dataPoints/2;this._padding=barWidth;if(this._chart&&this._chart.options.layout&&(null===(_a=this._chart.options.scales)||void 0===_a?void 0:_a.yAxes)){this._chart.options.layout.padding={right:this._padding};this._chart.options.scales.yAxes=[{ticks:{padding:this._padding}}];this._chart.update()}}onResize(){this.emit("rendered")}}exports.AcquisitionChart=AcquisitionChart}));define("client/project/components/acquisition-image",["require","exports","client/typed-event-emitter","shared/viewmodels/retrain"],(function(require,exports,typed_event_emitter_4,retrain_2){Object.defineProperty(exports,"__esModule",{value:!0});exports.AcquisitionImage=void 0;class AcquisitionImage extends typed_event_emitter_4.Emitter{constructor(studioApi,bodyEl,statusEl,dspId=retrain_2.DSP_RAW_DATA,autoLoadBoundingBoxes=!0){super();this._reqId=0;this._cache={};this._colors=["#e6194B","#3cb44b","#ffe119","#4363d8","#f58231","#42d4f4","#f032e6","#fabed4","#469990","#dcbeff","#9A6324","#fffac8","#800000","#aaffc3"];this._labelToColor={};this._finishedLoading=!1;this._studioApi=studioApi;this._bodyEl=bodyEl;let inner=this._innerEl=document.createElement("div");inner.classList.add("acquisition-image-body-inner");this._bodyEl.appendChild(inner);this._statusEl=statusEl;this._origStatus=statusEl&&statusEl.textContent||"";this._dspId=dspId;this._imgEl=document.createElement("img");this._innerEl.appendChild(this._imgEl);this._autoloadBoundingBoxes=autoLoadBoundingBoxes;window.addEventListener("resize",this.onResize.bind(this))}async load(id,name,overrideCache=!1){this._finishedLoading=!1;let r=++this._reqId;if(overrideCache||!this._cache[id]){console.time("loadSample");let loadTimeout=setTimeout(()=>{if(r===this._reqId&&this._statusEl){let i=document.createElement("i");i.classList.add("fa","fa-spinner","spin-animation","mr-2");let loadingSpan=document.createElement("span");loadingSpan.textContent=name?"Loading "+name+"...":"Loading...";this._statusEl.innerHTML="";this._statusEl.appendChild(i);this._statusEl.appendChild(loadingSpan)}},this._statusEl&&this._statusEl.querySelector("i.fa-spinner")?0:300);try{let data=(await this._studioApi.rawData.getSample(this._studioApi.projectId,id,0)).body;console.timeEnd("loadSample");clearTimeout(loadTimeout);if(r!==this._reqId)return;if(!data||!data.success)throw new Error("Failed to load acquisition image "+data.error);if(!data.sample||!data.payload)throw new Error("Sample or payload missing from response "+JSON.stringify(data));this._cache[id]=data}catch(ex2){this._statusEl&&(this._statusEl.textContent=this._origStatus);clearTimeout(loadTimeout);throw ex2}}console.time("loadedEv");this.emit("loaded",this._cache[id]);console.timeEnd("loadedEv");console.time("render");await this.render(this._cache[id],id.toString());console.timeEnd("render");this._loadedSampleId=id}async setData(data){this.emit("loaded",data);await this.render(data)}clear(){var _a;this._bodyEl.style.display="none";if(this._statusEl){console.log("acquisition image clear");this._statusEl.textContent=this._origStatus}for(let bx of Array.from(this._bodyEl.querySelectorAll(".bounding-box-container")))null===(_a=bx.parentNode)||void 0===_a||_a.removeChild(bx);++this._reqId}getLoadedSampleId(){return this._loadedSampleId}finishedLoading(){return this._finishedLoading}addBoundingBoxes(boxes,info){if(this._finishedLoading)this.renderBoundingBoxes(boxes,info);else{let oneTimeRender=()=>{this.renderBoundingBoxes(boxes,info);this.off("rendered",oneTimeRender)};this.on("rendered",oneTimeRender)}}clearBoundingBoxes(){var _a;for(let bx of Array.from(this._bodyEl.querySelectorAll(".bounding-box-container")))null===(_a=bx.parentNode)||void 0===_a||_a.removeChild(bx)}async render(data,id){console.log("Rendering image");this._autoloadBoundingBoxes?this._imgEl.src=`/v1/api/${this._studioApi.projectId}/raw-data/${id}/image`:this._imgEl.src=`/v1/api/${this._studioApi.projectId}/raw-data/${id}/image?afterInputBlock=true`;this._bodyEl.style.display="block";this._imgEl.onload=()=>{if(this._autoloadBoundingBoxes){console.log("imgEl onload",data.sample.boundingBoxes);this.clearBoundingBoxes();this.renderBoundingBoxes(data.sample.boundingBoxes,{isPrediction:!1,isConstrained:"constrained_object_detection"===data.sample.boundingBoxesType})}this._finishedLoading=!0;this.emit("rendered")};if(this._statusEl){console.log("acquisition image render");this._statusEl.textContent=data.sample.filename}}renderBoundingBoxes(boxes,info){var _a;console.log("renderBoundingBoxes",boxes,info);let factor=this._imgEl.naturalHeight/this._imgEl.clientHeight;for(let b of boxes){let bb;if(info.isPrediction){let x=Math.max(0,Math.min(b.x*this._imgEl.clientWidth,this._imgEl.clientWidth)),y=Math.max(0,Math.min(b.y*this._imgEl.clientHeight,this._imgEl.clientHeight));bb={x:x,y:y,width:Math.min(b.width*this._imgEl.clientWidth,this._imgEl.clientWidth-x),height:Math.min(b.height*this._imgEl.clientHeight,this._imgEl.clientHeight-y),label:b.label,score:b.score}}else bb={x:b.x/factor,y:b.y/factor,width:b.width/factor,height:b.height/factor,label:b.label,score:b.score};if(!this._labelToColor[bb.label]){this._labelToColor[bb.label]=this._colors[0];this._colors.splice(0,1)}let color=this._labelToColor[bb.label],el=document.createElement("div");el.classList.add("bounding-box-container");el.style.position="absolute";el.style.border="solid 3px "+color;if(info.isConstrained&&info.isPrediction){let centerX=bb.x+bb.width/2,centerY=bb.y+bb.height/2;el.style.borderRadius="10px";el.style.width="20px";el.style.height="20px";el.style.left=centerX-10+"px";el.style.top=centerY-10+"px"}else{el.style.width=bb.width+"px";el.style.height=bb.height+"px";el.style.left=bb.x+"px";el.style.top=bb.y+"px"}let label=document.createElement("div");label.classList.add("bounding-box-label");label.style.background=color;label.textContent=bb.label;if(info.isPrediction){label.textContent+=" ("+(null===(_a=bb.score)||void 0===_a?void 0:_a.toFixed(2))+")";label.style.whiteSpace="pre"}info.isConstrained&&info.isPrediction&&(el.style.whiteSpace="nowrap");el.appendChild(label);this._innerEl.appendChild(el)}}onResize(){this.emit("rendered")}}exports.AcquisitionImage=AcquisitionImage}));define("client/project/components/device-control-ui",["require","exports","client/typed-event-emitter"],(function(require,exports,typed_event_emitter_5){Object.defineProperty(exports,"__esModule",{value:!0});exports.DeviceControlUI=void 0;class DeviceControlUI extends typed_event_emitter_5.Emitter{constructor(device,el){super();this._device=device;this._el=el;device.on("connected",ev=>{console.log("device connected",ev.deviceId);this.addItem(ev);this.checkEmpty()});device.on("disconnected",deviceId=>{this.removeItem(deviceId);this.checkEmpty()});this._el.oninput=()=>{this.emitDeviceChanged(this._el.selectedOptions[0])};this._el.selectedOptions.length>0&&setTimeout(()=>{this.emitDeviceChanged(this._el.selectedOptions[0])});for(let option of Array.from(this._el.querySelectorAll("option")))option.value&&(option.hidden=option.disabled=!device.isConnected(option.value));this.checkEmpty()}emitDeviceChanged(option){if(option.value){let sensors=JSON.parse(decodeURIComponent(option.dataset.sensors||"")),deviceName=decodeURIComponent(option.dataset.deviceName||""),deviceType=decodeURIComponent(option.dataset.deviceType||""),supportsSnapshotStreaming=decodeURIComponent(option.dataset.supportsSnapshotStreaming||"");this.emit("device-changed",{deviceId:option.value,sensors:sensors,connection:"ip",deviceName:deviceName,deviceType:deviceType,supportsSnapshotStreaming:"true"===supportsSnapshotStreaming})}else this.emit("device-changed",void 0)}checkEmpty(){let enabledItems=Array.from(this._el.options).filter(o=>""!==o.value&&!o.disabled),haveItems=enabledItems.length>0,emptyEl=Array.from(this._el.options).filter(o=>!o.value)[0];if(emptyEl){emptyEl.hidden=haveItems;if(haveItems){if(!this._el.value){this._el.value=enabledItems[0].value;this.emitDeviceChanged(enabledItems[0])}}else{this._el.value=emptyEl.value;this.emit("device-changed",void 0)}}else console.warn("Could not find empty element...")}addItem(device){let el=Array.from(this._el.options).filter(o=>o.value===device.deviceId)[0];if(!el){el=document.createElement("option");el.value=device.deviceId;el.dataset.deviceName=device.deviceName;el.dataset.deviceType=device.deviceType;el.dataset.sensors=JSON.stringify(device.sensors),el.dataset.supportsSnapshotStreaming=device.supportsSnapshotStreaming+"";el.textContent=device.deviceName;this._el.appendChild(el);this._el.value=el.value;this.emitDeviceChanged(el)}el.hidden=!1;el.disabled=!1;this.checkEmpty()}removeItem(deviceId){let el=Array.from(this._el.options).filter(o=>o.value===deviceId)[0];if(el){el.hidden=!0;el.disabled=!0;this.checkEmpty()}}}exports.DeviceControlUI=DeviceControlUI}));define("client/project/components/device-control-widget",["require","exports","client/project/components/device-control-ui","client/typed-event-emitter"],(function(require,exports,device_control_ui_1,typed_event_emitter_6){Object.defineProperty(exports,"__esModule",{value:!0});exports.DeviceControlWidget=void 0;class DeviceControlWidget extends typed_event_emitter_6.Emitter{constructor(device,deviceIdEl,sampleSensors,sampleFrequencies,sampleLength,lastSelectedSensor,lastSelectedIntervalMs,timeseriesSection,snapshotSection){super();this._dcu=new device_control_ui_1.DeviceControlUI(device,deviceIdEl);this._deviceApi=device;this._sampleSensors=sampleSensors;this._sampleFrequencies=sampleFrequencies;this._sampleLength=sampleLength;this._lastSelectedSensor=lastSelectedSensor;this._lastSelectedIntervalMs=lastSelectedIntervalMs;this._lastSelectedSampleLength=Number(this._sampleLength.value);this._timeseriesSection=timeseriesSection;this._snapshotSection=snapshotSection;this._snapshotImage=snapshotSection.querySelector("img")}init(){this._snapshotSection.style.display="none";this._timeseriesSection.style.display="";this._sampleLength.oninput=ev=>{isNaN(Number(this._sampleLength.value))||(this._lastSelectedSampleLength=Number(this._sampleLength.value))};const onFrequencyChanged=this._sampleFrequencies.onchange=()=>{this._sampleFrequencies.value&&(this._lastSelectedIntervalMs=Number(this._sampleFrequencies.value))},onSampleSensorChanged=this._sampleSensors.onchange=()=>{console.log("onSampleSensorChanged",this._sampleActiveDevice,this._sampleSensors.value);this._sampleFrequencies.innerHTML="";this._sampleFrequencies.disabled=!1;if(!this._sampleActiveDevice||!this._sampleSensors.value){this._sampleFrequencies.disabled=!0;this._snapshotSection.style.display="none";this._timeseriesSection.style.display="";return}let sensor=this._sampleActiveDevice.sensors.find(s=>s.name===this._sampleSensors.value);if(!sensor){this._sampleFrequencies.disabled=!0;return console.error("Cannot find "+this._sampleSensors.value+" in device sensor list")}this._lastSelectedSensor=this._sampleSensors.value;if(sensor.name.startsWith("Camera")){this._sampleLength.disabled=!0;this._sampleLength.value="Sample length is not supported"}else{this._sampleLength.disabled=!1;this._sampleLength.value=this._lastSelectedSampleLength.toString();this._sampleLength.classList.remove("is-invalid")}if(0===sensor.frequencies.length){this._sampleFrequencies.disabled=!0;let option=document.createElement("option");option.value="";option.textContent="Frequency selection not supported";this._sampleFrequencies.appendChild(option)}for(let f of sensor.frequencies){let opt=document.createElement("option");opt.value=(1e3/f).toString();opt.textContent=f+"Hz";this._sampleFrequencies.appendChild(opt)}this._lastSelectedIntervalMs&&sensor.frequencies.find(z=>1e3/z===this._lastSelectedIntervalMs)&&(this._sampleFrequencies.value=this._lastSelectedIntervalMs.toString());if((sensor.name.startsWith("Camera")||sensor.name.startsWith("Video"))&&this._sampleActiveDevice.supportsSnapshotStreaming){this._snapshotSection.style.display="";sensor.name.startsWith("Video")?this._timeseriesSection.style.display="":this._timeseriesSection.style.display="none";this._deviceApi.startSnapshotStreaming(this._sampleActiveDevice.deviceId)}else{this._snapshotSection.style.display="none";this._timeseriesSection.style.display="";this._sampleActiveDevice.supportsSnapshotStreaming&&this._deviceApi.stopSnapshotStreaming(this._sampleActiveDevice.deviceId)}onFrequencyChanged()};this._dcu.on("device-changed",newDevice=>{this._sampleActiveDevice&&this._sampleActiveDevice.supportsSnapshotStreaming&&this._deviceApi.stopSnapshotStreaming(this._sampleActiveDevice.deviceId);this._sampleSensors.disabled=!newDevice;this._sampleSensors.innerHTML="";this._sampleActiveDevice=newDevice;newDevice&&this.emit("device-connected");if(newDevice){for(let s of newDevice.sensors){let option=document.createElement("option");option.value=s.name;option.textContent=s.name;this._sampleSensors.appendChild(option)}if(newDevice.deviceId&&0===newDevice.sensors.length){this._sampleSensors.disabled=!0;let option=document.createElement("option");option.value="";option.textContent="Sensor selection not supported";this._sampleSensors.appendChild(option)}else if(this._lastSelectedSensor&&newDevice.sensors.find(z=>z.name===this._lastSelectedSensor))this._sampleSensors.value=this._lastSelectedSensor;else if(this._lastSelectedIntervalMs>0){let desiredFreq=1e3/this._lastSelectedIntervalMs,found=newDevice.sensors.find(z=>z.frequencies.indexOf(desiredFreq)>-1);found&&(this._sampleSensors.value=found.name)}console.log("device-changed",newDevice.deviceId,newDevice.sensors);onSampleSensorChanged()}else onSampleSensorChanged()});window.addEventListener("beforeunload",()=>{this._sampleActiveDevice&&this._sampleActiveDevice.supportsSnapshotStreaming&&this._deviceApi.stopSnapshotStreaming(this._sampleActiveDevice.deviceId)});this._deviceApi.on("snapshot",(device,base64String)=>{this._sampleActiveDevice&&this._sampleActiveDevice.deviceId===device.deviceId&&this._snapshotImage&&this.renderSnapshot(base64String)});console.log("onload",this._sampleSensors.value);onSampleSensorChanged()}renderSnapshot(img){this._snapshotImage.src="data:image/jpg;base64,"+img}}exports.DeviceControlWidget=DeviceControlWidget}));define("client/project/components/start-sampling-widget",["require","exports","client/notify"],(function(require,exports,notify_5){Object.defineProperty(exports,"__esModule",{value:!0});exports.StartSamplingWidgetUI=void 0;exports.StartSamplingWidgetUI=class{constructor(deviceApi,startBtn,studioApi){this._deviceApi=deviceApi;this._startBtn=startBtn;this._studioApi=studioApi}async startSampling(options){let startTimeout=0,origText=this._startBtn.textContent;this._startBtn.classList.add("disabled");this._startBtn.textContent="Starting...";try{let timeLeftInterval,timeLeft=options.sampleLength,s=await this._deviceApi.startSampling(options.deviceId,options.category,options.name,options.sampleLength,options.sampleFrequency,options.sensor);startTimeout=setTimeout(()=>{removeAllListeners();this._startBtn.classList.remove("disabled");this._startBtn.textContent=origText;notify_5.Notify.alert("Sampling failed","Received a timeout. Is your device still connected?","danger")},15e3);const onError=ex=>{console.error("Sampling failed",ex);notify_5.Notify.alert("Sampling failed",ex,"danger");this._startBtn.classList.remove("disabled");this._startBtn.textContent=origText;clearTimeout(startTimeout);removeAllListeners()},onRequestReceived=()=>{console.log("Sampling request received");this._startBtn.textContent="Waiting to start...";s.on("connected",onConnected);clearTimeout(startTimeout)},onStarted=()=>{console.log("Sampling started");s.off("closed",onClosed);const setText=()=>{var _a;if(timeLeftInterval&&(!this._startBtn.textContent||0!==this._startBtn.textContent.indexOf("Sampling...")))return clearInterval(timeLeftInterval);timeLeft>0&&((null===(_a=options.sensor)||void 0===_a?void 0:_a.startsWith("Camera"))?this._startBtn.textContent="Taking snapshot...":this._startBtn.textContent="Sampling... ("+Math.floor(timeLeft/1e3)+"s left)")};setText();timeLeftInterval=setInterval(()=>{timeLeft-=1e3;setText()},1e3);clearTimeout(startTimeout)},onProcessing=()=>{console.log("Sampling processing");this._startBtn.textContent="Processing...";clearTimeout(startTimeout)},onReading=progressPercentage=>{console.log("Sampling reading",progressPercentage);this._startBtn.textContent=progressPercentage>=0?`Reading data from device (${progressPercentage}%)...`:"Reading data from device...";clearTimeout(startTimeout)},onUploading=()=>{console.log("Sampling uploading");this._startBtn.textContent="Uploading...";clearTimeout(startTimeout)},onFinished=()=>{console.log("Sampling finished");this._startBtn.classList.remove("disabled");this._startBtn.textContent=origText;clearTimeout(startTimeout);removeAllListeners()},onClosed=()=>{console.log("Sampling closed");this._startBtn.classList.remove("disabled");this._startBtn.textContent=origText;clearTimeout(startTimeout);removeAllListeners()},onConnected=()=>{console.log("Sampling connected");this._startBtn.classList.remove("disabled");this._startBtn.textContent=origText;notify_5.Notify.alert("Sampling failed","Device restarted while sampling. You can use a serial monitor to look at the device logs.","danger");clearTimeout(startTimeout);removeAllListeners()},onNewData=ws=>{if(ws.deviceName===options.deviceName){console.log("Sampling received new file");onFinished()}};let self=this;function removeAllListeners(){s.off("error",onError);s.off("requestReceived",onRequestReceived);s.off("started",onStarted);s.off("processing",onProcessing);s.off("reading",onReading);s.off("uploading",onUploading);s.off("finished",onFinished);s.off("closed",onClosed);s.off("connected",onConnected);self._studioApi.socket.off("new-file-training",onNewData);self._studioApi.socket.off("new-file-testing",onNewData)}s.on("error",onError);s.on("requestReceived",onRequestReceived);s.on("started",onStarted);s.on("processing",onProcessing);s.on("reading",onReading);s.on("uploading",onUploading);s.on("finished",onFinished);s.on("closed",onClosed);this._studioApi.socket.addEventListener("new-file-training",onNewData);this._studioApi.socket.addEventListener("new-file-testing",onNewData);console.log("sampling OK, ID is",s)}catch(ex2){let ex=ex2;clearTimeout(startTimeout);notify_5.Notify.alert("Failed to start sampling",notify_5.Notify.extractMsg(ex),"danger");this._startBtn.classList.remove("disabled");this._startBtn.textContent=origText}}}}));define("client/pagination",["require","exports","client/notify"],(function(require,exports,notify_6){Object.defineProperty(exports,"__esModule",{value:!0});exports.Pagination=void 0;exports.Pagination=class{constructor(element,loadPage){this._table=document.createElement("table");this._nextPage=document.createElement("li");this._prevPage=document.createElement("li");this._pageDotFirst=document.createElement("li");this._pageDotLast=document.createElement("li");this._pageItems=[];this._numberOfPages=0;this._currentPage=1;this._goToPageIx=0;this._element=element;this._loadPage=loadPage;let table=element.querySelector("table[data-page]");if(!table){console.log("[pagination] cannot find table[data-page]");return}let nextPage=element.querySelector(".page-item-next"),prevPage=element.querySelector(".page-item-prev");if(!nextPage||!prevPage)throw new Error("Cannot find .page-item-next or .page-item-prev");this._pageDotFirst.textContent="...";this._pageDotLast.textContent="...";this._pageDotFirst.style.width="42px";this._pageDotLast.style.width="42px";this._pageDotFirst.classList.add("text-center");this._pageDotLast.classList.add("text-center");this._table=table;this._nextPage=nextPage;this._prevPage=prevPage;this._pageItems=Array.from(element.querySelectorAll("a[data-page]")).map(a=>a.parentNode);this._numberOfPages=Array.from(element.querySelectorAll("a[data-page]")).map(a=>a.dataset.page).filter(a=>!isNaN(Number(a))).reduce((a,b)=>Math.max(a,Number(b)),0);this.bindEvents();this.goToPage(1,!1)}getNumberOfPages(){return this._numberOfPages}async updateNumberOfRows(rowCount,rerender){console.log("updateNumberOfRows",rowCount);let pageSize=Number(this._table.dataset.pagesize),newNumberPages=Math.ceil(rowCount/pageSize);if(newNumberPages<this._numberOfPages)for(let ix=this._numberOfPages;ix>=newNumberPages+1;ix--){console.log("Removing page",ix);let a=this._element.querySelector(`a[data-page="${ix}"]`);if(a&&a.parentNode&&a.parentNode.parentNode){a.parentNode.parentNode.removeChild(a.parentNode);this._pageItems.splice(this._pageItems.indexOf(a.parentNode),1)}this._numberOfPages--}if(newNumberPages>this._numberOfPages)for(let ix=this._numberOfPages+1;ix<=newNumberPages;ix++){console.log("Creating page",ix);let li=document.createElement("li");li.classList.add("page-item");li.classList.add("page-item-no");let a=document.createElement("a");a.classList.add("page-link");a.href="#";a.dataset.page=ix.toString();a.textContent=ix.toString();li.appendChild(a);this._pageItems.push(li);this.bindPageClickEvent(li);this._nextPage.parentNode&&this._nextPage.parentNode.insertBefore(li,this._nextPage);this._numberOfPages++}if(newNumberPages<this._currentPage){console.log("currentPage",newNumberPages);this._currentPage=newNumberPages;this._currentPage<1&&(this._currentPage=1)}await this.goToPage(this._currentPage,rerender)}attachObserver(){new MutationObserver(this.mutationCallback.bind(this)).observe(this._table,{childList:!0,subtree:!0})}mutationCallback(mutationsList,observer){let pageSize=Number(this._table.dataset.pagesize),allTrs=Array.from(this._table.querySelectorAll("tbody tr")).map(tr=>tr);for(let ix=0;ix<allTrs.length;ix++){let tr=allTrs[ix];for(let c of Array.from(tr.classList).filter(t=>0===t.indexOf("table-page-")))tr.classList.remove(c);tr.classList.add("table-page-"+(Math.floor(ix/pageSize)+1))}this.updateNumberOfRows(allTrs.length,!1)}currentPage(){return this._currentPage<1?1:this._currentPage}async goToPage(page,rerender,clear=!0){try{page<1&&(page=1);let goToPageIx=++this._goToPageIx,spinners=Array.from(this._element.querySelectorAll("li.page-item a i.fa-spinner"));spinners.forEach(spinner=>{goToPageIx===this._goToPageIx&&spinner.parentElement&&"string"==typeof spinner.parentElement.dataset.page&&(spinner.parentElement.textContent=spinner.parentElement.dataset.page)});let targetPageEl=this._element.querySelector('li.page-item a[data-page="'+page+'"]'),spinnerTimeout=setTimeout(()=>{targetPageEl&&(targetPageEl.innerHTML='<i class="fa fa-spinner spin-animation"></i>')},spinners.length?0:200);try{rerender&&await this._loadPage(page)}catch(ex){throw ex}finally{clearTimeout(spinnerTimeout)}if(goToPageIx!==this._goToPageIx)return;targetPageEl&&(targetPageEl.textContent=page+"");1===page?this._prevPage.classList.add("disabled"):this._prevPage.classList.remove("disabled");page===this._numberOfPages?this._nextPage.classList.add("disabled"):this._nextPage.classList.remove("disabled");this._pageDotFirst.style.display=this._pageDotLast.style.display="none";if(this._pageItems.length>7){this._pageItems[0].parentNode.insertBefore(this._pageDotFirst,this._pageItems[2]);this._pageItems[0].parentNode.insertBefore(this._pageDotLast,this._pageItems[this._pageItems.length-2])}if(this._numberOfPages>9){let visible=[1,this._numberOfPages];1!==page&&page!==this._numberOfPages&&visible.push(page);let pagesNeeded=7;(page<=5||page>=this._numberOfPages-4)&&pagesNeeded++;page-1>1&&visible.push(page-1);page-2>1&&visible.push(page-2);page+1<this._numberOfPages&&visible.push(page+1);page+2<this._numberOfPages&&visible.push(page+2);if(visible.length!==pagesNeeded)if(page<=5)for(let ix=visible.length;ix<pagesNeeded;ix++)visible.push(ix);else for(let ix=visible.length;ix<pagesNeeded;ix++)visible.push(this._numberOfPages-ix+1);-1===visible.indexOf(2)&&(this._pageDotFirst.style.display="");-1===visible.indexOf(this._numberOfPages-1)&&(this._pageDotLast.style.display="");this._pageItems.forEach(li=>{let elPage=Number(li.querySelector("a").dataset.page||"");li.style.display=visible.indexOf(elPage)>-1?"":"none"});console.log("visible",visible.sort())}else this._pageItems.forEach(li=>{li.style.display=""});for(let a of this._pageItems)a.querySelector('a[data-page="'+page+'"]')?a.classList.add("active"):a.classList.remove("active");this._table.dataset.page=page.toString();clear&&Array.from(this._table.querySelectorAll("tbody tr")).forEach(tr=>{tr.style.display="none"});Array.from(this._table.querySelectorAll("tbody tr.table-page-"+page)).forEach(tr=>{tr.style.display="table-row"});this._nextPage.style.display="";this._prevPage.style.display="";console.log("currentPage is",page);this._currentPage=page}catch(ex2){let ex=ex2;await notify_6.Notify.alert("Failed to load page",notify_6.Notify.extractMsg(ex),"error")}}bindEvents(){for(let p of this._pageItems)this.bindPageClickEvent(p)}bindPageClickEvent(el){let a=el.querySelector("a[data-page]");a.onclick=async ev=>{ev.preventDefault();"previous"===a.dataset.page?1!==this._currentPage&&await this.goToPage(this._currentPage-1,!0):"next"===a.dataset.page?this._currentPage!==this._numberOfPages&&await this.goToPage(this._currentPage+1,!0):await this.goToPage(Number(a.dataset.page),!0)}}}}));define("client/project/components/sliding-window",["require","exports","client/typed-event-emitter"],(function(require,exports,typed_event_emitter_7){Object.defineProperty(exports,"__esModule",{value:!0});exports.SlidingWindow=void 0;class SlidingWindow extends typed_event_emitter_7.Emitter{constructor(studioApi,chart,slidingEl,getData,allowDragging=!0,allowResize=!1){super();this._windowSizeMs=2e3;this._windowIncreaseMs=1e3;this._totalLength=0;this._minLeft=0;this._maxLeft=0;this._chartWidth=0;this._position=0;this._positionAdjustment=0;this._left=0;this._positionFrame=0;this._hidden=!1;this._lastGetDataCall={sampleId:-1,startIx:0,lastIx:0,data:{sampleId:0,interval:0,frequency:0,sensors:[],data:[],startIx:0,endIx:0}};this._currentStartIndex=0;this._currentEndIndex=0;this._isPositioning=!1;this._isResizing=!1;this._studioApi=studioApi;this._chart=chart;this._slidingEl=slidingEl;this._getData=getData;this._isResizable=allowResize;this._chart.on("loaded",this.onLoaded.bind(this));this._chart.on("rendered",this._render.bind(this));allowDragging&&this.dragHandlers();const removeButtonWrapper=document.createElement("div");removeButtonWrapper.classList.add("tooltip","bs-tooltip-top","show","sliding-window-remove-button");removeButtonWrapper.style.display="none";removeButtonWrapper.innerHTML='<div class="arrow"></div><div class="tooltip-inner"><button class="btn btn-danger btn-sm">Remove segment</button></div></div>';this._removeButtonWrapper=removeButtonWrapper;this._removeButton=removeButtonWrapper.querySelector("button");this._slidingEl.appendChild(this._removeButtonWrapper);this._positionHandlerContainer=document.createElement("div");this._positionHandlerContainer.classList.add("sliding-window-position-handler","no-select");this._positionHandlerContainer.innerHTML='\n            <div class="sliding-window-position-handler-top"></div>\n            <div class="sliding-window-position-handler-top-arrow"></div>\n            <div class="sliding-window-position-handler-line"></div>';this._slidingEl.appendChild(this._positionHandlerContainer);this._positionHandler=this._positionHandlerContainer.querySelector(".sliding-window-position-handler-top");this.positionHandlers();if(allowResize){const leftResizeHandler=document.createElement("div");leftResizeHandler.classList.add("sliding-window-resize-handler","sliding-window-resize-handler-left","no-select");leftResizeHandler.textContent="â€–";this._slidingEl.appendChild(leftResizeHandler);this._leftHandler=leftResizeHandler;const rightResizeHandler=document.createElement("div");rightResizeHandler.classList.add("sliding-window-resize-handler","sliding-window-resize-handler-right","no-select");rightResizeHandler.textContent="â€–";this._slidingEl.appendChild(rightResizeHandler);this._rightHandler=rightResizeHandler;this.resizeHandlers(leftResizeHandler,rightResizeHandler)}}reset(){this._removeButtonWrapper.style.display="none";this._removeButton.onclick=()=>{};this._slidingEl.classList.remove("sliding-window-selected");this._leftHandler&&this._leftHandler.classList.remove("sliding-window-handler-selected");this._rightHandler&&this._rightHandler.classList.remove("sliding-window-handler-selected")}focus(allowRemoving=!0){this._slidingEl.classList.add("sliding-window-selected");this._leftHandler&&this._leftHandler.classList.add("sliding-window-handler-selected");this._rightHandler&&this._rightHandler.classList.add("sliding-window-handler-selected");if(allowRemoving){this._removeButtonWrapper.style.display="block";this._removeButton.onclick=()=>{this._slidingEl.remove();this.emit("delete")}}}blur(){this.reset()}setWindow(windowSizeMs,windowIncreaseMs,fetchData=!0){this._windowSizeMs=windowSizeMs;this._windowIncreaseMs=windowIncreaseMs;this._render();fetchData&&this.sendDataEvent()}forceLoad(data){this.onLoaded(data);this.getCurrentData()}getWindowSizeMs(){return this._windowSizeMs}getWindowIncreaseMs(){return this._windowIncreaseMs}getWindowRange(){return{start:this._currentStartIndex,end:this._currentEndIndex}}hide(){this._slidingEl.style.display="none";this._hidden=!0}show(){if(this._hidden){this._hidden=!1;this._render()}}setPosition(position,adjustment){this._position=position;void 0!==adjustment&&(this._positionAdjustment=adjustment);this._render()}setRawPosition(newX,widthIx,adjustmentStart,adjustmentRatio){let dimensions=this._chart.getDimensions();adjustmentStart&&(this._positionAdjustment=adjustmentStart);let offsetRight=dimensions.right;this._chartWidth=dimensions.width-offsetRight-this._minLeft;let renderPosition=(newX-this._minLeft)/this._chartWidth*this._totalLength;this._position=renderPosition/(adjustmentRatio||1);if(this._lastData&&renderPosition/this._lastData.sample.intervalMs+widthIx>this.getMaxWindowIx()){renderPosition=(this.getMaxWindowIx()-widthIx)*this._lastData.sample.intervalMs;this._position=renderPosition/(adjustmentRatio||1)}this._left=this._chartWidth*(renderPosition/this._totalLength)+this._minLeft;this._slidingEl.style.transform="translateX("+this._left+"px)"}getPosition(){return this._position}render(){this._render();setTimeout(async()=>{await this.sendDataEvent()},1)}async getCurrentData(forceFetch=!1){if(!this._lastData)return null;let data=this._lastData;const freq=data.sample.frequency;let startIx=this._position*(freq/1e3);this._positionAdjustment&&(startIx+=this._positionAdjustment);startIx-=startIx%(freq/1e3);let lastIx=startIx+this._windowSizeMs*(freq/1e3)+freq/1e3;lastIx-=lastIx%(freq/1e3);let expectedFrameCount=this._windowSizeMs/data.sample.intervalMs;expectedFrameCount=Math.ceil(expectedFrameCount)-expectedFrameCount<.001?Math.ceil(expectedFrameCount):Math.floor(expectedFrameCount);let actualFrameCount=lastIx-startIx;actualFrameCount>expectedFrameCount&&(lastIx-=actualFrameCount-expectedFrameCount);startIx=Math.round(startIx);lastIx=Math.round(lastIx);this._currentStartIndex=startIx;this._currentEndIndex=lastIx;if(this._lastGetDataCall.sampleId===data.sample.id&&this._lastGetDataCall.startIx===startIx&&this._lastGetDataCall.lastIx===lastIx&&!forceFetch)return this._lastGetDataCall.data;let values=await this._getData(data.sample.id,startIx,lastIx);if(!values)return null;let ret={sampleId:data.sample.id,sensors:data.payload.sensors,interval:data.sample.intervalMs,frequency:data.sample.frequency,data:values,startIx:startIx,endIx:lastIx};this._lastGetDataCall={sampleId:data.sample.id,startIx:startIx,lastIx:lastIx,data:ret};return ret}getMaxWindowIx(){if(!this._lastData)return-1;let d=this._lastData;return(d.sample.totalLengthMs||1)/d.sample.intervalMs}async sendDataEvent(forceFetch=!1){this.emit("loading");let data=await this.getCurrentData(forceFetch);if(!data)return;const freq=data.frequency;let startIx=data.startIx,lastIx=startIx+this._windowSizeMs*(freq/1e3)+freq/1e3;lastIx-=lastIx%(freq/1e3);this.emit("data",data.interval,data.sensors,data.data,startIx,lastIx)}onLoaded(data){console.log("slidingWindow onLoaded",data);this._lastData=data;this._position=0}dragHandlers(){let startX=0,offsetX=0,mouseDown=!1;this._slidingEl.onmousedown=ev=>{if(this._lastData){mouseDown=!0;this._slidingEl.style.cursor="grabbing";startX=ev.clientX;offsetX=this._left}};window.addEventListener("mouseup",ev=>{if(mouseDown){this._slidingEl.style.cursor="";mouseDown=!1;this.renderPositionFrame();this.sendDataEvent()}});window.addEventListener("mousemove",ev=>{if(!this._lastData||!mouseDown||this._isResizing)return;let newX=ev.clientX-startX+offsetX;if(newX>=this._minLeft&&newX<this._maxLeft){this._position=(newX-this._minLeft)/this._chartWidth*this._totalLength;const left=this._chartWidth*(this._position/this._totalLength)+this._minLeft;if(this._isResizable){const ratio=(left-this._minLeft)/this._chartWidth,leftInMs=Math.round(ratio*this.getMaxWindowIx())*this._windowIncreaseMs;this.setPosition(leftInMs)}else this._left=left;this._slidingEl.style.transform="translateX("+this._left+"px)"}})}resizeHandlers(leftResizeHandler,rightResizeHandler){let resizeDirection,rightPosition=0;leftResizeHandler.onmousedown=ev=>{if(!this._isResizing){this._isResizing=!0;resizeDirection="left";rightPosition=this._windowSizeMs+this._position}};rightResizeHandler.onmousedown=ev=>{if(!this._isResizing){this._isResizing=!0;resizeDirection="right"}};window.addEventListener("mouseup",()=>{if(this._isResizing){this._isResizing=!1;this.renderPositionFrame();this.sendDataEvent(!0)}});window.addEventListener("mousemove",ev=>{if(this._lastData&&this._isResizing)if("right"===resizeDirection){const ratio=(ev.clientX-this._slidingEl.getBoundingClientRect().left)/this._chartWidth,newWindowSize=Math.floor(ratio*this.getMaxWindowIx())*this._windowIncreaseMs;if(newWindowSize+this._position>this._totalLength)return;if(newWindowSize<=0)return;this.setWindow(newWindowSize,this._windowIncreaseMs,!1)}else{const ratio=(this._slidingEl.getBoundingClientRect().right-ev.clientX)/this._chartWidth,newWindowSize=Math.floor(ratio*this.getMaxWindowIx())*this._windowIncreaseMs;if(rightPosition-newWindowSize<0||newWindowSize<=0)return;this.setWindow(newWindowSize,this._windowIncreaseMs,!1);this.setPosition(rightPosition-newWindowSize)}})}positionHandlers(){let startX=0,offsetX=0,originalPositionFrame=0,mouseDown=!1;this._positionHandler.onmousedown=ev=>{if(this._lastData){ev.stopImmediatePropagation();mouseDown=!0;originalPositionFrame=this._positionFrame;this._positionHandler.style.cursor="grabbing";startX=ev.clientX;offsetX=28}};window.addEventListener("mouseup",ev=>{if(mouseDown){ev.preventDefault();this._positionHandler.style.cursor="";mouseDown=!1;this.sendDataEvent()}});window.addEventListener("mousemove",ev=>{if(!this._lastData||!mouseDown||this._isResizing)return;ev.preventDefault();let slidingElWidth=Number(this._slidingEl.style.width.replace("px","")),pixelsPerFrame=slidingElWidth/this._windowSizeMs*this._windowIncreaseMs,newX=originalPositionFrame*pixelsPerFrame+ev.clientX-startX+offsetX;if(newX>=this._minLeft&&newX<slidingElWidth+this._minLeft){const left=slidingElWidth*((newX-this._minLeft)/slidingElWidth*this._totalLength/this._totalLength);let frame=Math.round(left/pixelsPerFrame);this._positionFrame=frame;this.renderPositionFrame()}})}isResizing(){return this._isResizing}getAdjustment(){return this._positionAdjustment||0}getCaretMs(){return this._positionFrame*this._windowIncreaseMs}setCaretMs(ms){this._positionFrame=Math.round(ms/this._windowIncreaseMs)}renderPositionFrame(){this._positionFrame<0&&(this._positionFrame=0);this._positionFrame>this._windowSizeMs/this._windowIncreaseMs&&(this._positionFrame=Math.round(this._windowSizeMs/this._windowIncreaseMs));let pixelsPerFrame=Number(this._slidingEl.style.width.replace("px",""))/this._windowSizeMs*this._windowIncreaseMs;this._positionHandlerContainer.style.transform="translateX("+this._positionFrame*pixelsPerFrame+"px)";let currMs=this._positionFrame*this._windowIncreaseMs+this.getPosition();this.emit("caretChanged",currMs)}_render(){if(!this._lastData||this._hidden)return;"number"==typeof this._lastData.sample.totalLengthMs&&this._windowSizeMs>this._lastData.sample.totalLengthMs&&(this._windowSizeMs=this._lastData.sample.totalLengthMs);let dimensions=this._chart.getDimensions(),offsetRight=dimensions.right;this._chartWidth=dimensions.width-offsetRight-this._minLeft;let totalLength=this._totalLength=this._lastData.totalPayloadLength/(1/this._lastData.sample.intervalMs),percentage=this._windowSizeMs/totalLength;this._minLeft=dimensions.left;let elWidth=Math.ceil((dimensions.width-this._minLeft-offsetRight)*percentage);this._maxLeft=dimensions.width-offsetRight-elWidth;this._left=this._chartWidth*(this._position/totalLength)+this._minLeft;this._slidingEl.style.transform="translateX("+this._left+"px)";this._slidingEl.style.display="block";this._slidingEl.style.width=elWidth+"px";this.renderPositionFrame();this.emit("rendered",this._lastData.sample.id)}appendToContainer(container){this._slidingEl.parentElement||container.appendChild(this._slidingEl)}}exports.SlidingWindow=SlidingWindow}));define("client/project/components/acquisition-video",["require","exports","client/typed-event-emitter","shared/viewmodels/retrain"],(function(require,exports,typed_event_emitter_8,retrain_3){Object.defineProperty(exports,"__esModule",{value:!0});exports.AcquisitionVideo=void 0;class AcquisitionVideo extends typed_event_emitter_8.Emitter{constructor(studioApi,bodyEl,statusEl,showControls,croppedOrFull,dspId=retrain_3.DSP_RAW_DATA){super();this._reqId=0;this._cache={};this._finishedLoading=!1;this._videoLoadedIx=0;this._studioApi=studioApi;this._bodyEl=bodyEl;let inner=this._innerEl=document.createElement("div");inner.classList.add("acquisition-video-body-inner");this._bodyEl.appendChild(inner);this._statusEl=statusEl;this._origStatus=statusEl&&statusEl.textContent||"";this._dspId=dspId;this._videoEl=document.createElement("video");this._videoEl.controls=showControls;this._videoEl.autoplay=!1;this._innerEl.appendChild(this._videoEl);this._stillProcessingEl=document.createElement("div");this._stillProcessingEl.classList.add("acquisition-video-is-processing");this._stillProcessingEl.textContent="Video is still processing...";this._stillProcessingEl.style.display="none";this._innerEl.appendChild(this._stillProcessingEl);this._croppedOrFull=croppedOrFull;this._videoEl.addEventListener("timeupdate",()=>{let newTime=this._videoEl.currentTime;this._videoEl.paused?this.emit("timeChanged",1e3*this._videoEl.currentTime):setTimeout(()=>{newTime===this._videoEl.currentTime&&this.emit("timeChanged",1e3*this._videoEl.currentTime)},400)});window.addEventListener("resize",this.onResize.bind(this))}async load(id,name,overrideCache=!1,startMs){this._finishedLoading=!1;let r=++this._reqId;if(overrideCache||!this._cache[id]){console.time("loadSample");let loadTimeout=setTimeout(()=>{if(r===this._reqId&&this._statusEl){let i=document.createElement("i");i.classList.add("fa","fa-spinner","spin-animation","mr-2");let loadingSpan=document.createElement("span");loadingSpan.textContent=name?"Loading "+name+"...":"Loading...";this._statusEl.innerHTML="";this._statusEl.appendChild(i);this._statusEl.appendChild(loadingSpan)}},this._statusEl&&this._statusEl.querySelector("i.fa-spinner")?0:300);try{let data=(await this._studioApi.rawData.getSample(this._studioApi.projectId,id,0)).body;console.timeEnd("loadSample");clearTimeout(loadTimeout);if(r!==this._reqId)return;if(!data||!data.success)throw new Error("Failed to load acquisition video "+data.error);if(!data.sample||!data.payload)throw new Error("Sample or payload missing from response "+JSON.stringify(data));this._cache[id]=data}catch(ex2){this._statusEl&&(this._statusEl.textContent=this._origStatus);clearTimeout(loadTimeout);throw ex2}}console.time("loadedEv");this.emit("loaded",this._cache[id]);console.timeEnd("loadedEv");console.time("render");await this.render(this._cache[id],id.toString());console.timeEnd("render");"number"==typeof startMs&&this.setPositionMs(startMs);this._loadedSampleId=id}setPositionMs(timeMs){this._lastVideoUrl&&timeMs/1e3!=1/0&&(this._videoEl.currentTime=timeMs/1e3)}async setData(data){this.emit("loaded",data);await this.render(data)}clear(){this._bodyEl.style.display="none";if(this._statusEl){console.log("acquisition video clear");this._statusEl.textContent=this._origStatus}++this._reqId}deleteFromCache(id){delete this._cache[id]}getLoadedSampleId(){return this._loadedSampleId}finishedLoading(){return this._finishedLoading}async render(data,id){console.log("Rendering video",data);if(data.sample.isProcessing){this._bodyEl.style.display="block";this._videoEl.style.display="none";data.sample.processingError?this._stillProcessingEl.textContent="Video failed to process":this._stillProcessingEl.textContent="Video is still processing...";this._stillProcessingEl.style.display="";this._finishedLoading=!0;this.emit("rendered")}else{this._videoEl.style.display="";this._stillProcessingEl.style.display="none";let url="full"===this._croppedOrFull?data.sample.thumbnailVideoFull:data.sample.thumbnailVideo;if(url!==this._lastVideoUrl){this._videoEl.src=url||"";this._lastVideoUrl=url}this._bodyEl.style.display="block";if(url!==this._videoEl.src)this._videoEl.onload=()=>{this._finishedLoading=!0;this.emit("rendered")};else{this._finishedLoading=!0;this.emit("rendered")}}if(this._statusEl){console.log("acquisition video render");this._statusEl.textContent=data.sample.filename}}onResize(){this.emit("rendered")}}exports.AcquisitionVideo=AcquisitionVideo}));define("client/project/components/sample-editor",["require","exports","client/project/components/sliding-window","client/project/components/acquisition-chart","client/notify","client/typed-event-emitter","shared/WebSocketTypes","client/project/components/acquisition-video"],(function(require,exports,sliding_window_1,acquisition_chart_1,notify_7,typed_event_emitter_9,WebSocketTypes_3,acquisition_video_1){Object.defineProperty(exports,"__esModule",{value:!0});exports.SampleEditor=void 0;class SampleEditor extends typed_event_emitter_9.Emitter{constructor(studioApi,editSampleModal){super();this._slidingWindowArray=[];this._cache={};this._isZooming=!1;this._els={modal:document.querySelector("#edit-sample-modal"),titleDescription:document.querySelector("#edit-sample-modal-title-description"),titleSampleName:document.querySelector("#edit-sample-sample-name"),crop:{lengthContainer:document.querySelector("#edit-sample-crop-sample-length-input"),lengthField:document.querySelector("#edit-sample-crop-sample-length"),button:document.querySelector("#edit-sample-crop"),footer:document.querySelector("#edit-sample-footer-default")},segment:{button:document.querySelector("#edit-sample-split-sample-confirm"),addSegmentButton:document.querySelector("#edit-sample-segment-add-segment"),addSegmentTooltip:document.querySelector("#edit-sample-segment-add-segment-tooltip"),lengthContainer:document.querySelector("#edit-sample-segment-length-input"),lengthField:document.querySelector("#edit-sample-segment-length"),lengthApply:document.querySelector("#edit-sample-segment-length-apply"),shift:document.querySelector("#edit-sample-split-random-shift"),footer:document.querySelector("#edit-sample-footer-segment"),footerMessage:document.querySelector("#edit-sample-footer-message")},wavPlayer:document.querySelector("#edit-sample-wav-player"),loader:document.querySelector(".modal-blocking-popover"),zoomContainer:document.querySelector("#zoom-container"),zoomDepthContainer:document.querySelector("#zoom-depth-container"),zoomRangeSlider:document.querySelector("#sample-zoom-range-slider"),zoomDepthSlider:document.querySelector("#sample-zoom-depth-slider"),zoomRangeMin:document.querySelector("#zoom-range-min"),zoomRangeMax:document.querySelector("#zoom-range-max"),videoWrapper:document.querySelector("#edit-sample-video-wrapper")};this._currentMode="crop";this._studioApi=studioApi;this._editSampleModal=editSampleModal;const aqStatus=document.querySelector(".acquisition-raw-status");this._els.crop.lengthField.onchange=async ev=>{ev.preventDefault();if(!this._slidingWindow||!this._currentSample)return;let sample=this.getFromCache(this._currentSample.id);const inputValue=this._els.crop.lengthField.value,sampleInterval=this._slidingWindow.getWindowIncreaseMs();let inputLength=this.roundLengthToInterval(inputValue,sampleInterval);if(inputLength<=sampleInterval)return;const totalSampleLength=sample.totalPayloadLength*sampleInterval;inputLength=Math.min(totalSampleLength,inputLength);let windowStartPosition=this._slidingWindow.getPosition();const windowEndPosition=inputLength+windowStartPosition;windowStartPosition-=Math.max(windowEndPosition-totalSampleLength,0);this._slidingWindow.setPosition(windowStartPosition);this._slidingWindow.setWindow(inputLength,sampleInterval,!1);this._isZooming&&this.renderZoom();this._els.crop.lengthField.value=inputLength.toString()};this._category=location.pathname.split("/").reverse()[0];if("training"!==this._category&&"testing"!==this._category){console.warn("Category not recognized",this._category);this._category="training"}const editModalBody=this._editSampleModal.querySelector(".chart");this._editChart=new acquisition_chart_1.AcquisitionChart(studioApi,editModalBody,WebSocketTypes_3.DOWNSAMPLE_SIZE_LONG,aqStatus,void 0,void 0,{height:80,width:void 0},!0,!0);this._aqVideo=new acquisition_video_1.AcquisitionVideo(studioApi,this._els.videoWrapper,void 0,!1,"full",void 0);const slidingWindowEl=this._editSampleModal.querySelector(".sliding-window");this._slidingWindow=new sliding_window_1.SlidingWindow(this._studioApi,this._editChart,slidingWindowEl,async(sampleId,startIx,lastIx)=>{const data=this.getFromCache(sampleId);if(!data){console.error("Couldn't get values for sample ID",sampleId);return null}let values=data.payload.values;values=values.slice(startIx,lastIx);return values},!0,!0);this._slidingWindow.on("data",this.onSlidingWindowData.bind(this));window.slidingWindow=this._slidingWindow;this._slidingWindow.on("rendered",()=>{if(!this._slidingWindow)return;let startMs=this._slidingWindow.getPosition();this._slidingWindow.getWindowSizeMs()});this._els.crop.button.onclick=async ev=>{ev.preventDefault();await this.cropSample()};this._els.segment.button.onclick=async ev=>{ev.preventDefault();await this.uploadFromSegmentWindows()};const findSegments=async ev=>{ev.preventDefault();if(!this._currentSample)return;if(this._editSampleModal.querySelector(".sliding-window-container").querySelectorAll("[data-custom-window]").length>0&&!await notify_7.Notify.confirm("Delete custom segments?","The segments you've manually added will be lost. Continue?","Yes, continue","warning","warning"))return;const originalData=this.getFromCache(this._currentSample.id);if(!originalData.sample.totalLengthMs)return;const sampleInterval=originalData.sample.intervalMs;let segmentLength=this.roundLengthToInterval(this._els.segment.lengthField.value,sampleInterval);if(segmentLength<=sampleInterval){this._els.segment.lengthField.value=sampleInterval.toString();segmentLength=sampleInterval}try{const segmentData=await this.segmentsFromSample(this.getFromCache(this._currentSample.id),Number(this._els.segment.lengthField.value));await this.showSegmentInterface(segmentData);this._isZooming&&await this.renderZoom()}catch(ex2){let ex=ex2;await notify_7.Notify.alert("Failed to find segments",notify_7.Notify.extractMsg(ex),"danger")}};this._els.segment.shift.onchange=async ev=>{await findSegments(ev)};this._els.segment.lengthApply.onclick=async ev=>{await findSegments(ev)};this._els.segment.lengthField.onkeyup=ev=>{ev.preventDefault();13===ev.keyCode&&this._els.segment.lengthApply.click()};const chart=this._editSampleModal.querySelector(".chart"),onChartClickHandler=async ev=>{ev.preventDefault();chart.removeEventListener("click",onChartClickHandler);this._els.segment.addSegmentTooltip.style.display="none";if(ev.target&&ev.target.classList.contains("sliding-window"))return;const offsetX=chart.getBoundingClientRect().left;await this.addCustomWindow(ev.clientX-offsetX)};this._els.segment.addSegmentButton.onclick=async ev=>{ev.preventDefault();chart.removeEventListener("click",onChartClickHandler);chart.addEventListener("click",onChartClickHandler);this._els.segment.addSegmentTooltip.style.display=""};$(this._editSampleModal).on("hide.bs.modal",()=>{this._els.wavPlayer.innerHTML="";this._editSampleModal.querySelector(".sliding-window-container").innerHTML="";this._slidingWindowArray=[];chart.removeEventListener("click",onChartClickHandler);this._isZooming=!1});$(this._editSampleModal).on("shown.bs.modal",()=>{this._els.crop.lengthField.focus();this._els.crop.lengthField.select()});this._els.zoomRangeMin.onblur=async ev=>{ev.preventDefault();if(!this._currentSample||!this._zoomRange)return;const cachedInfo=this.getFromCache(this._currentSample.id),sampleIntervalMs=cachedInfo.sample.intervalMs;let newIndex=Math.floor(Number(this._els.zoomRangeMin.value)/sampleIntervalMs);if(!isNaN(newIndex)&&newIndex<cachedInfo.sample.valuesCount&&newIndex<this._zoomRange.end&&newIndex>=0){this._zoomRange.start=newIndex;this.renderZoom()}else this._els.zoomRangeMin.value=(this._zoomRange.start*sampleIntervalMs).toString();zoomDepthSlider.set([cachedInfo.totalPayloadLength-(this._zoomRange.end-this._zoomRange.start),null]);zoomRangeSlider.set([this._zoomRange.start,this._zoomRange.end])};this._els.zoomRangeMax.onblur=async ev=>{ev.preventDefault();if(!this._currentSample||!this._zoomRange)return;const cachedInfo=this.getFromCache(this._currentSample.id),sampleIntervalMs=cachedInfo.sample.intervalMs;let newIndex=Math.floor(Number(this._els.zoomRangeMax.value)/sampleIntervalMs);if(!isNaN(newIndex)&&newIndex<cachedInfo.sample.valuesCount&&newIndex>this._zoomRange.start&&newIndex>=0){this._zoomRange.end=newIndex;this.renderZoom()}else this._els.zoomRangeMax.value=(this._zoomRange.end*sampleIntervalMs).toString();zoomDepthSlider.set([cachedInfo.totalPayloadLength-(this._zoomRange.end-this._zoomRange.start),null]);zoomRangeSlider.set([this._zoomRange.start,this._zoomRange.end])};const zoomDepthSlider=noUiSlider.create(this._els.zoomDepthSlider,{start:[0,0],connect:!0,orientation:"vertical",step:1,range:{min:[0],max:[0]}});this._els.zoomDepthSlider.getElementsByClassName("noUi-origin")[1].classList.add("disabled-slider-handler");const zoomRangeSlider=noUiSlider.create(this._els.zoomRangeSlider,{start:[0,0],connect:!0,behaviour:"drag-fixed",step:1,range:{min:[0],max:[0]}});let zoomTimeout;window.addEventListener("mousewheel",ev=>{if(!this._isZooming||!this._currentSample||!this._zoomRange)return;ev.preventDefault();zoomTimeout&&window.clearTimeout(zoomTimeout);zoomTimeout=window.setTimeout(()=>{this.renderZoom()},100);const mouseEv=ev,cachedInfo=this.getFromCache(this._currentSample.id);let zoomAmount=cachedInfo.sample.valuesCount/100;if(mouseEv.deltaY<0&&0===mouseEv.deltaX){const currentValues=zoomDepthSlider.get();zoomDepthSlider.set([Number(currentValues[0])-zoomAmount,null]);const focus=Math.floor((this._zoomRange.end+this._zoomRange.start)/2),newRange=cachedInfo.sample.valuesCount-Number(currentValues[0])+Math.max(cachedInfo.sample.valuesCount/200,Math.min(100,cachedInfo.sample.valuesCount)),newStart=Math.max(focus-Math.floor(newRange/2),0),newEnd=Math.min(focus+Math.ceil(newRange/2),cachedInfo.sample.valuesCount);zoomRangeSlider.set([newStart,newEnd])}else if(mouseEv.deltaY>0&&0===mouseEv.deltaX){const currentValues=zoomDepthSlider.get();zoomDepthSlider.set([Number(currentValues[0])+zoomAmount,null]);const focus=Math.floor((this._zoomRange.end+this._zoomRange.start)/2),newRange=cachedInfo.sample.valuesCount-Number(currentValues[0])+Math.max(cachedInfo.sample.valuesCount/200,Math.min(100,cachedInfo.sample.valuesCount)),newStart=Math.max(focus-Math.floor(newRange/2),0),newEnd=Math.min(focus+Math.ceil(newRange/2),cachedInfo.sample.valuesCount);zoomRangeSlider.set([newStart,newEnd])}else if(mouseEv.deltaX<0&&0===mouseEv.deltaY){const currentValues=zoomRangeSlider.get(),width=Number(currentValues[1])-Number(currentValues[0]);let newStart=Math.max(0,Number(currentValues[0])-zoomAmount);zoomRangeSlider.set([newStart,newStart+width])}else if(mouseEv.deltaX>0&&0===mouseEv.deltaY){const currentValues=zoomRangeSlider.get(),width=Number(currentValues[1])-Number(currentValues[0]);let newStart=Math.max(0,Number(currentValues[0])+zoomAmount);newStart+width>cachedInfo.sample.valuesCount&&(newStart=cachedInfo.sample.valuesCount-width);zoomRangeSlider.set([newStart,newStart+width])}const range=zoomRangeSlider.get();this._zoomRange={start:Math.max(Number(range[0]),0),end:Math.min(Number(range[1]),cachedInfo.sample.valuesCount)};this._els.zoomRangeMin.value=(this._zoomRange.start*cachedInfo.sample.intervalMs).toString();this._els.zoomRangeMax.value=(this._zoomRange.end*cachedInfo.sample.intervalMs).toString();this.renderTemporaryZoom(this._zoomRange.start,this._zoomRange.end)});zoomDepthSlider.on("slide",value=>{if(!this._currentSample)return;const cachedInfo=this.getFromCache(this._currentSample.id);this._zoomRange||(this._zoomRange={start:0,end:cachedInfo.sample.valuesCount});const focus=Math.floor((this._zoomRange.end+this._zoomRange.start)/2),range=cachedInfo.sample.valuesCount-Number(value[0])+Math.max(cachedInfo.sample.valuesCount/200,Math.min(100,cachedInfo.sample.valuesCount));this._zoomRange={start:Math.max(focus-Math.floor(range/2),0),end:Math.min(focus+Math.ceil(range/2),cachedInfo.sample.valuesCount)};this._els.zoomRangeMin.value=(this._zoomRange.start*cachedInfo.sample.intervalMs).toString();this._els.zoomRangeMax.value=(this._zoomRange.end*cachedInfo.sample.intervalMs).toString();zoomRangeSlider.set([this._zoomRange.start,this._zoomRange.end]);this.renderTemporaryZoom(this._zoomRange.start,this._zoomRange.end)});zoomDepthSlider.on("change",value=>{this.renderZoom()});zoomRangeSlider.on("slide",value=>{if(!this._currentSample)return;const cachedInfo=this.getFromCache(this._currentSample.id);this._zoomRange={start:Math.max(Number(value[0]),0),end:Math.min(Number(value[1]),cachedInfo.sample.valuesCount)};this._els.zoomRangeMin.value=(this._zoomRange.start*cachedInfo.sample.intervalMs).toString();this._els.zoomRangeMax.value=(this._zoomRange.end*cachedInfo.sample.intervalMs).toString();this.renderTemporaryZoom(this._zoomRange.start,this._zoomRange.end)});zoomRangeSlider.on("change",value=>{this.renderZoom()});const showHideZoomButton=document.querySelector("#edit-sample-zoom-text");this._editSampleModal.querySelector("#edit-sample-zoom").onclick=ev=>{ev.preventDefault();this._els.zoomContainer.style.display=this._isZooming?"none":"block";this._els.zoomDepthContainer.style.visibility=this._isZooming?"hidden":"visible";if(!this._currentSample||!this._editChart)return;const data=this.getFromCache(this._currentSample.id);this._zoomRange={start:0,end:data.totalPayloadLength};if(this._isZooming)this.renderZoom();else{const zoomOpts=zoomDepthSlider.options.range;zoomDepthSlider.set([zoomOpts.min,zoomOpts.max]);zoomRangeSlider.set([0,data.totalPayloadLength])}showHideZoomButton.textContent=this._isZooming?"Zoom":"Hide zoom";this._isZooming=!this._isZooming};this._slidingWindow.on("caretChanged",newMs=>{console.log("slidingWindow caretChanged",newMs);this._slidingWindow&&this._aqVideo.setPositionMs(newMs)})}async onSlidingWindowData(interval,sensors,data,startIx,endIx){if(!this._slidingWindow)return;let d=await this._slidingWindow.getCurrentData();if(!d)return;this._els.wavPlayer&&!this._slidingWindow.isResizing()&&sensors[0]&&"wav"===sensors[0].units&&this.showWavPlayer(d.sampleId,startIx,endIx,this._els.wavPlayer);let length=(endIx-startIx)*interval;this._els.crop.lengthField.value=length.toString()}setCurrentSample(obj){this._currentSample=obj}async showEditModal(state){if(!this._currentSample)return;this._currentMode=state;this._isZooming=!1;const showHideZoomButtonParent=document.querySelector("#edit-sample-zoom"),showHideZoomButton=showHideZoomButtonParent.querySelector("#edit-sample-zoom-text");this.setDialogState(state);this._els.titleSampleName.textContent=this._currentSample.name;if(!this._editChart||!this._slidingWindow)return;this.toggleLoader(!0);let data;if(this.getFromCache(this._currentSample.id))data=this.getFromCache(this._currentSample.id);else if("crop"===state){const{response:response,body:body}=await this._studioApi.rawData.getUncroppedDownsampledSample(this._studioApi.projectId,this._currentSample.id,WebSocketTypes_3.DOWNSAMPLE_SIZE_LONG);if(!body||!body.success)throw new Error(body&&body.error||response.statusText);this.setCache(this._currentSample.id,body);data=body;const res2=await this._studioApi.rawData.getUncroppedDownsampledSample(this._studioApi.projectId,this._currentSample.id,WebSocketTypes_3.DOWNSAMPLE_SIZE_SHORT);if(!res2.body||!res2.body.success)throw new Error(res2.body&&res2.body.error||res2.response.statusText);this.setCache(this._currentSample.id,res2.body,void 0,!0)}else{if("segment"!==state)throw new Error("Invalid state: "+state);{const{response:response,body:body}=await this._studioApi.rawData.getSample(this._studioApi.projectId,this._currentSample.id,WebSocketTypes_3.DOWNSAMPLE_SIZE_LONG);if(!body||!body.success)throw new Error(body&&body.error||response.statusText);this.setCache(this._currentSample.id,body);data=body;const res2=await this._studioApi.rawData.getUncroppedDownsampledSample(this._studioApi.projectId,this._currentSample.id,WebSocketTypes_3.DOWNSAMPLE_SIZE_SHORT);if(!res2.body||!res2.body.success)throw new Error(res2.body&&res2.body.error||res2.response.statusText);this.setCache(this._currentSample.id,res2.body,void 0,!0)}}this._zoomRange={start:0,end:data.totalPayloadLength};if(data.sample.sensors.find(s=>"image"===s.name)){notify_7.Notify.alert("Error","Image files cannot be cropped","error");return}if(data.sample.sensors.find(s=>"video"===s.name)){this._els.modal.classList.add("sample-editor-video-mode");this._currentSample.mode="video";this._slidingWindow.setCaretMs(0);await this._aqVideo.load(this._currentSample.id,void 0,void 0,this._slidingWindow.getCaretMs());showHideZoomButtonParent.style.display="none"}else{this._els.modal.classList.remove("sample-editor-video-mode");this._currentSample.mode="time-series";showHideZoomButtonParent.style.display="inline"}if(data.payload.sensors[0]&&"wav"===data.payload.sensors[0].units){this.showWavPlayer(data.sample.id,data.payload.crop_start||0,data.payload.crop_end||(data.sample.totalLengthMs||1)/data.sample.intervalMs,this._els.wavPlayer);"segment"===state&&(this._els.wavPlayer.style.visibility="hidden")}this._editChart.setData(data);this._currentSample.deviceName=data.sample.deviceType;let onOpen=()=>{};if("crop"===state){this._els.crop.lengthField.step=data.sample.intervalMs.toString();data.sample.totalLengthMs&&(this._els.crop.lengthField.max=data.sample.totalLengthMs.toString());let newSampleLength=data.sample.totalLengthMs;if((data.payload.crop_end||data.payload.crop_start)&&void 0!==data.payload.crop_start&&void 0!==data.payload.crop_end){newSampleLength=(data.payload.crop_end-data.payload.crop_start)*data.sample.intervalMs;this._els.crop.lengthField.value=newSampleLength.toString()}else this._els.crop.lengthField.value=(data.sample.totalLengthMs||0).toString();this._slidingWindow.hide();onOpen=()=>{this._els.zoomContainer.style.display="none";this._els.zoomDepthContainer.style.visibility="hidden";showHideZoomButton.textContent="Zoom";$(this._editSampleModal).off("shown.bs.modal",onOpen);if(this._slidingWindow){this._slidingWindow.reset();this._slidingWindow.setWindow(newSampleLength||200,data.sample.intervalMs,!1);this._slidingWindow.show();this._slidingWindow.setPosition((data.payload.crop_start||0)*data.sample.intervalMs,0);this._slidingWindow.getCurrentData();const slidingWindowElParent=this._editSampleModal.querySelector(".sliding-window-container");this._slidingWindow.appendToContainer(slidingWindowElParent)}this._els.zoomRangeMin.value="0";this._els.zoomRangeMax.value=(data.totalPayloadLength*data.sample.intervalMs).toString();this.toggleLoader(!1)}}else onOpen=async()=>{this._els.zoomContainer.style.display="none";this._els.zoomDepthContainer.style.visibility="hidden";showHideZoomButton.textContent="Zoom";$(this._editSampleModal).off("shown.bs.modal",onOpen);this._els.zoomRangeMin.value="0";this._els.zoomRangeMax.value=(data.totalPayloadLength*data.sample.intervalMs).toString();try{const segmentedData=await this.segmentsFromSample(data,Number(this._els.segment.lengthField.value));0===segmentedData.length&&notify_7.Notify.notify("","No distinct segments could be found in the sample. Try uploading a sample with clearer sections of silence and noise.","top","center","far fa-times-circle","danger");await this.showSegmentInterface(segmentedData);this.toggleLoader(!1)}catch(ex2){let ex=ex2;await notify_7.Notify.alert("Failed to find segments",notify_7.Notify.extractMsg(ex),"danger");$(this._editSampleModal).modal("hide")}};const chartEdit=this._editSampleModal.querySelector(".chart-edit");if(chartEdit&&0===chartEdit.clientWidth&&"function"==typeof window.ResizeObserver){let observer=new window.ResizeObserver(()=>{observer.disconnect();chartEdit&&chartEdit.clientWidth>0&&onOpen()});observer.observe(chartEdit)}else chartEdit&&0!==chartEdit.clientWidth?onOpen():$(this._editSampleModal).on("shown.bs.modal",onOpen);this._els.zoomDepthSlider.noUiSlider.updateOptions({range:{min:Math.max(data.sample.valuesCount/200,Math.min(100,data.sample.valuesCount)),max:data.sample.valuesCount}});this._els.zoomDepthSlider.noUiSlider.set([0,data.sample.valuesCount]);this._els.zoomRangeSlider.noUiSlider.updateOptions({range:{min:0,max:data.sample.valuesCount}});this._els.zoomRangeSlider.noUiSlider.set([0,data.sample.valuesCount]);$(this._editSampleModal).modal("show")}async cropSample(){if(!this._slidingWindow||!this._currentSample)return;let currText=this._els.crop.button.textContent;try{this._els.crop.button.classList.add("disabled");this._els.crop.button.disabled=!0;this._els.crop.button.textContent="Cropping...";const data=this.getFromCache(this._currentSample.id),freq=data.sample.frequency;let startIx=this._slidingWindow.getPosition()*(freq/1e3);startIx+=this._slidingWindow.getAdjustment();startIx=Math.floor(startIx);let lastIx=startIx+this._slidingWindow.getWindowSizeMs()*(freq/1e3)+freq/1e3;lastIx=Math.floor(lastIx);const currentCrop={start:startIx,end:lastIx};let{response:response,body:body}=await this._studioApi.rawData.cropSample(this._studioApi.projectId,this._currentSample.id,{cropStart:currentCrop.start,cropEnd:currentCrop.end});if(!body||!body.success)throw new Error(body&&body.error||response.responseText);if(this._currentSample){const newLengthMs=(currentCrop.end-currentCrop.start)*data.sample.intervalMs;this.emit("length-changed",{id:this._currentSample.id,newLength:newLengthMs,isProcessing:body.requiresProcessing});this.emit("sample-edited",{id:this._currentSample.id,name:this._currentSample.name});this.getFromCache(this._currentSample.id).payload.crop_start=currentCrop.start;this.getFromCache(this._currentSample.id).payload.crop_end=currentCrop.end}this.deleteCache();$(this._editSampleModal).modal("hide")}catch(ex2){let ex=ex2;await notify_7.Notify.alert("Error when cropping sample",notify_7.Notify.extractMsg(ex),"danger")}finally{this._els.crop.button.classList.remove("disabled");this._els.crop.button.disabled=!1;this._els.crop.button.textContent=currText}}async uploadFromSegmentWindows(){if(!this._currentSample)return;let currText=this._els.segment.button.textContent;try{this._els.segment.button.disabled=!0;this._els.segment.button.classList.add("disabled");this._els.segment.button.textContent="Creating segments...";let slices=[];for(let w of this._slidingWindowArray){if(!w)continue;const data=this.getFromCache(this._currentSample.id),positionAdjusted=Math.max(w.getPosition()+w.getAdjustment()*data.sample.intervalMs,0);slices.push({startMs:positionAdjusted,endMs:positionAdjusted+w.getWindowSizeMs()})}let d=await this._studioApi.rawData.segmentSample(this._studioApi.projectId,this._currentSample.id,{segments:slices});if(!d.body||!d.body.success)throw new Error(d.body&&d.body.error||d.response.responseText);this.deleteCache();this.emit("sample-segmented",{id:this._currentSample.id,name:this._currentSample.name});$(this._editSampleModal).modal("hide")}catch(ex2){let ex=ex2;await notify_7.Notify.alert("Failed to segment data",notify_7.Notify.extractMsg(ex),"error")}finally{this._els.segment.button.disabled=!1;this._els.segment.button.classList.remove("disabled");this._els.segment.button.textContent=currText}}setDialogState(state){if("segment"===state){this._els.segment.footer.style.display="block";this._els.segment.lengthContainer.style.display="block";this._els.segment.addSegmentButton.style.display="";this._els.crop.footer.style.display="none";this._els.crop.lengthContainer.style.display="none";this._els.wavPlayer.style.visibility="hidden";this._els.titleDescription.textContent="Split sample";this._slidingWindow&&this._slidingWindow.hide()}else{this._els.segment.footer.style.display="none";this._els.segment.lengthContainer.style.display="none";this._els.segment.addSegmentButton.style.display="none";this._els.crop.footer.style.display="block";this._els.crop.lengthContainer.style.display="block";this._els.titleDescription.textContent="Crop sample";this._slidingWindow&&this._slidingWindow.show()}}async segmentsFromSample(downsampledData,windowLengthMs){if(!downsampledData.sample.totalLengthMs)throw new Error("Sample has no totalLengthMs");let x=await this._studioApi.rawData.findSegmentsInSample(this._studioApi.projectId,downsampledData.sample.id,{segmentLengthMs:windowLengthMs,shiftSegments:this._els.segment.shift.checked});if(!x.body||!x.body.success)throw x.body.error||x.response.responseText;let indices=[];const numSamples=1e3*downsampledData.totalPayloadLength/downsampledData.sample.frequency;for(let segment of x.body.segments){let center=0+Math.floor((segment.endMs+segment.startMs)/2);center=Math.max(windowLengthMs/2,center);center=Math.min(numSamples-windowLengthMs/2-1,center);let startMs=center-Math.floor(windowLengthMs/2),endMs=center+Math.floor(windowLengthMs/2);indices.push({startMs:startMs,endMs:endMs})}return indices}configureSlidingWindow(ix,isCustom=!1){if(!(this._currentSample&&this._editChart&&this._slidingWindow))return;const slidingWindowElParent=this._editSampleModal.querySelector(".sliding-window-container");let newSlidingWindow=document.createElement("div");newSlidingWindow.classList.add("sliding-window","sliding-window-padded");isCustom&&(newSlidingWindow.dataset.customWindow="true");slidingWindowElParent.appendChild(newSlidingWindow);newSlidingWindow.onclick=async rev=>{rev.preventDefault();await this.focusSegmentWindow(ix);return!1};let newWindow=this._slidingWindow=new sliding_window_1.SlidingWindow(this._studioApi,this._editChart,newSlidingWindow,async(sampleId,startIx,lastIx)=>{let data=this.getFromCache(sampleId);if(!data){console.error("Couldn't get values for sample ID",sampleId);return null}let values=data.payload.values;values=values.slice(startIx,lastIx);return values},!0,!0);newWindow.on("delete",async()=>{this._slidingWindowArray[ix]=void 0;this._els.wavPlayer.style.visibility="hidden"});newWindow.on("data",this.onSlidingWindowData.bind(this));return newWindow}async showSegmentInterface(segmentData){if(!(this._currentSample&&this._editChart&&this._slidingWindow))return;this._editSampleModal.querySelector(".sliding-window-container").innerHTML="";this._slidingWindowArray=[];const originalData=this.getFromCache(this._currentSample.id),numberOfWindows=segmentData.length;for(let ix=0;ix<numberOfWindows;ix++){const newWindow=this.configureSlidingWindow(ix);newWindow.forceLoad(originalData);let length=segmentData[ix].endMs-segmentData[ix].startMs;newWindow.setWindow(length,originalData.sample.intervalMs,!1);newWindow.setPosition(segmentData[ix].startMs,0);newWindow.getCurrentData();this._slidingWindowArray.push(newWindow)}this._els.segment.lengthField.max=(originalData.sample.totalLengthMs||200).toString();this._els.segment.lengthField.step=originalData.sample.intervalMs.toString()}async addCustomWindow(x){if(!(this._currentSample&&this._editChart&&this._slidingWindow))return;const originalData=this.getFromCache(this._currentSample.id),ix=this._slidingWindowArray.length,newWindow=this.configureSlidingWindow(ix,!0),segmentLength=Math.min(originalData.sample.totalLengthMs||0,Number(this._els.segment.lengthField.value)),segmentLengthIx=Math.ceil(segmentLength/originalData.sample.intervalMs);newWindow.forceLoad(originalData);newWindow.setWindow(segmentLength,originalData.sample.intervalMs,!1);if(this._zoomRange){let scaleFactor=originalData.totalPayloadLength/(this._zoomRange.end-this._zoomRange.start);newWindow.setRawPosition(x||0,segmentLengthIx,this._zoomRange.start,scaleFactor)}else newWindow.setRawPosition(x||0,segmentLengthIx);await newWindow.getCurrentData();this._slidingWindowArray.push(newWindow);this._isZooming&&this.renderZoom();this._els.segment.lengthField.max=(originalData.sample.totalLengthMs||200).toString();this._els.segment.lengthField.step=originalData.sample.intervalMs.toString()}async focusSegmentWindow(index){for(let i=0;i<this._slidingWindowArray.length;i++){const slidingWindow=this._slidingWindowArray[i];slidingWindow&&(i===index?slidingWindow.focus(!0):slidingWindow.blur())}if(-1===index)return;const selectedWindow=this._slidingWindowArray[index];if(void 0===selectedWindow)return;const selectedWindowData=await selectedWindow.getCurrentData(!1);selectedWindowData&&"wav"===selectedWindowData.sensors[0].units&&this.showWavPlayer(selectedWindowData.sampleId,selectedWindowData.startIx,selectedWindowData.endIx,this._els.wavPlayer)}roundLengthToInterval(input,interval){let inputValueAsNumber=Number(input),windowIndex=inputValueAsNumber/interval;windowIndex=Math.ceil(windowIndex);inputValueAsNumber=windowIndex*interval;return inputValueAsNumber}showWavPlayer(sampleId,sliceStart,sliceEnd,element){let url="/v1/api/"+this._studioApi.projectId+"/raw-data/"+sampleId+"/wav?axisIx=0&sliceStart="+encodeURIComponent(sliceStart)+"&sliceEnd="+encodeURIComponent(sliceEnd),audio=element.querySelector("audio");audio||(audio=document.createElement("audio"));audio.controls=!0;audio.preload="none";audio.src=url;element.appendChild(audio);element.style.visibility="visible"}getFromCache(id,zoom,short=!1){return short?this._cache[`${this._currentMode}-${id}-short`]:zoom?this._cache[`${this._currentMode}-${id}-zoom=${zoom.start},${zoom.end}`]:this._cache[`${this._currentMode}-${id}`]}setCache(id,data,zoom,short=!1){short?this._cache[`${this._currentMode}-${id}-short`]=data:zoom?this._cache[`${this._currentMode}-${id}-zoom=${zoom.start},${zoom.end}`]=data:this._cache[`${this._currentMode}-${id}`]=data}deleteCache(){this._cache={}}async renderZoom(){if(!this._currentSample)return;this.toggleLoader(!0);const cachedInfo=this.getFromCache(this._currentSample.id),sampleIntervalMs=cachedInfo.sample.intervalMs;if(this._zoomRange&&this._currentSample&&this._editChart){this._els.zoomRangeMin.value=Math.floor(sampleIntervalMs*this._zoomRange.start).toString();this._els.zoomRangeMax.value=Math.floor(sampleIntervalMs*this._zoomRange.end).toString();const cachedData=this.getFromCache(this._currentSample.id,this._zoomRange);if(cachedData)await this._editChart.setData(cachedData,this._zoomRange.start*sampleIntervalMs);else if("crop"===this._currentMode){const{response:response,body:body}=await this._studioApi.rawData.getUncroppedDownsampledSample(this._studioApi.projectId,this._currentSample.id,WebSocketTypes_3.DOWNSAMPLE_SIZE_LONG,this._zoomRange.start,this._zoomRange.end);if(!body||!body.success)throw new Error(body&&body.error||response.statusText);this.setCache(this._currentSample.id,body,this._zoomRange);await this._editChart.setData(body,this._zoomRange.start*sampleIntervalMs)}else if("segment"===this._currentMode){const zoomRangeStart=this._zoomRange.start+(cachedInfo.payload.crop_start||0),zoomRangeEnd=this._zoomRange.end+(cachedInfo.payload.crop_start||0),{response:response,body:body}=await this._studioApi.rawData.getUncroppedDownsampledSample(this._studioApi.projectId,this._currentSample.id,WebSocketTypes_3.DOWNSAMPLE_SIZE_LONG,zoomRangeStart,zoomRangeEnd);if(!body||!body.success)throw new Error(body&&body.error||response.statusText);this.setCache(this._currentSample.id,body,this._zoomRange);await this._editChart.setData(body,this._zoomRange.start*sampleIntervalMs)}if(this._slidingWindow){this._slidingWindow.setPosition((this._slidingWindow.getWindowRange().start-this._zoomRange.start)*sampleIntervalMs,this._zoomRange.start);this._slidingWindow.show()}if(this._slidingWindowArray)for(const window of this._slidingWindowArray)if(window){window.setPosition((window.getWindowRange().start-this._zoomRange.start)*sampleIntervalMs,this._zoomRange.start);window.show()}}this.toggleLoader(!1)}async renderTemporaryZoom(start,end){if(!this._currentSample||!this._editChart||!this._isZooming)return;const cachedData=this.getFromCache(this._currentSample.id,void 0,!0);if(!cachedData)return;this._slidingWindow&&this._slidingWindow.hide();if(this._slidingWindowArray)for(const window of this._slidingWindowArray)window&&window.hide();const sampleIntervalMs=cachedData.sample.intervalMs,cachedDataClone=JSON.parse(JSON.stringify(cachedData)),pointsRatio=cachedData.totalPayloadLength/WebSocketTypes_3.DOWNSAMPLE_SIZE_SHORT;let dataScaleRatio=(end-start)/WebSocketTypes_3.DOWNSAMPLE_SIZE_SHORT;const offset=start*sampleIntervalMs;if(pointsRatio>1){start=Math.floor(start/pointsRatio);end=Math.floor(end/pointsRatio);dataScaleRatio*=WebSocketTypes_3.DOWNSAMPLE_SIZE_SHORT/(end-start)}const dataSlice=cachedData.payload.values.slice(start,end);cachedDataClone.payload.values=dataSlice;await this._editChart.setData(cachedDataClone,offset,dataScaleRatio)}toggleLoader(loading){this._els.loader.style.display=loading?"block":"none";this._els.crop.button.disabled=loading;this._els.segment.button.disabled=loading;this._els.segment.shift.disabled=loading}}exports.SampleEditor=SampleEditor}));define("client/project/components/bounding-box-labeling",["require","exports","client/notify"],(function(require,exports,notify_8){Object.defineProperty(exports,"__esModule",{value:!0});exports.BoundingBoxLabeling=void 0;exports.BoundingBoxLabeling=class{constructor(studioApi,imgContainer){this._els={image:document.querySelector("#label-sample-image"),imageContainer:document.querySelector("#label-sampling-container"),maskLeft:document.querySelector("#label-mask-left"),maskRight:document.querySelector("#label-mask-right"),maskTop:document.querySelector("#label-mask-top"),maskBottom:document.querySelector("#label-mask-bottom")};this._currentBoundingBoxes=[];this._colors=["#e6194B","#3cb44b","#ffe119","#4363d8","#f58231","#42d4f4","#f032e6","#fabed4","#469990","#dcbeff","#9A6324","#fffac8","#800000","#aaffc3"];this._labelToColor={};this._studioApi=studioApi;this._els.imageContainer=imgContainer;this._els.image=imgContainer.querySelector("img");if(this._els.image){const updateDimensions=()=>{if(!this._els.image)return;let previousFactor="number"==typeof this._currentImgNaturalWidth&&"number"==typeof this._currentImgBBWidth?this._currentImgNaturalWidth/this._currentImgBBWidth:0;this._currentImgNaturalWidth=this._els.image.naturalWidth;this._currentImgNaturalHeight=this._els.image.naturalHeight;this._currentImgBBWidth=this._els.image.clientWidth;this._currentImgBBHeight=this._els.image.clientHeight;let factor=this._currentImgNaturalWidth/this._currentImgBBWidth;if(0!==previousFactor&&factor!==1/0&&factor!==previousFactor){let changeBy=previousFactor/factor;for(let bb of this._currentBoundingBoxes){bb.x=Math.round(bb.x*changeBy);bb.y=Math.round(bb.y*changeBy);bb.width=Math.round(bb.width*changeBy);bb.height=Math.round(bb.height*changeBy)}this.renderBoundingBoxes()}if(this._els.maskLeft&&this._els.maskRight&&this._els.maskTop&&this._els.maskBottom)if(this._currentImgBBWidth>this._currentImgBBHeight){let maskSize=Math.floor((this._currentImgBBWidth-this._currentImgBBHeight)/2);this._els.maskLeft.style.width=this._els.maskRight.style.width=maskSize+"px";this._els.maskTop.style.height=this._els.maskBottom.style.height="0px"}else if(this._currentImgBBHeight>this._currentImgBBWidth){let maskSize=Math.floor((this._currentImgBBHeight-this._currentImgBBWidth)/2);this._els.maskLeft.style.width=this._els.maskRight.style.width="0px";this._els.maskTop.style.height=this._els.maskBottom.style.height=maskSize+"px"}};this._els.image.addEventListener("load",updateDimensions);if("function"==typeof window.ResizeObserver){new window.ResizeObserver(()=>{updateDimensions()}).observe(this._els.image)}0!==this._els.image.clientWidth?updateDimensions():"function"!=typeof window.ResizeObserver&&setTimeout(updateDimensions,1e3)}window.addEventListener("mousedown",downEv=>{if(!this._els.image)return;if(downEv.target!==this._els.image&&!downEv.target.classList.contains("bounding-box-container"))return;downEv.preventDefault();let startX=downEv.pageX,startY=downEv.pageY,el=document.createElement("div");el.style.position="absolute";let nextColor=this._labelToColor[this._lastRemovedOrAddedLabel||""]||this._colors[0];el.style.border="solid 3px "+nextColor;el.style.width="0px";el.style.height="0px";el.style.zIndex="10000";document.body.appendChild(el);const onMouseMove=moveEv=>{moveEv.preventDefault();let currX=moveEv.pageX,currY=moveEv.pageY;!function(x1,y1,x2,y2){el.style.left=x1<x2?x1+"px":x2+"px";el.style.width=Math.abs(x2-x1)+"px";el.style.top=y1<y2?y1+"px":y2+"px";el.style.height=Math.abs(y2-y1)+"px"}(startX,startY,currX,currY)},onMouseUp=async upEv=>{if(!this._els.image)return;if(!el.parentNode)return;upEv.preventDefault();window.removeEventListener("mousemove",onMouseMove);window.removeEventListener("mouseup",onMouseUp);window.removeEventListener("keydown",onKeyDown);let rect=this._els.image.getBoundingClientRect(),bb={label:"",x:Math.round(Number(el.style.left.replace("px",""))-(rect.left+window.scrollX)),y:Math.round(Number(el.style.top.replace("px",""))-(rect.top+window.scrollY)),width:Math.round(Number(el.style.width.replace("px",""))),height:Math.round(Number(el.style.height.replace("px","")))};if(bb.width*bb.height<100){el.parentNode.removeChild(el);return}bb.x<0&&(bb.x=0);bb.y<0&&(bb.y=0);this._currentImgNaturalWidth&&bb.x+bb.width>this._currentImgNaturalWidth&&(bb.width=this._currentImgNaturalWidth-bb.x);this._currentImgNaturalHeight&&bb.y+bb.height>this._currentImgNaturalHeight&&(bb.height=this._currentImgNaturalHeight-bb.y);let label=await notify_8.Notify.prompt("Enter label","Enter a label for this new section","Set label",this._lastRemovedOrAddedLabel||"","question","info");if(label){bb.label=label;this._lastRemovedOrAddedLabel=label;this._currentBoundingBoxes.push(bb)}el.parentNode.removeChild(el);this.renderBoundingBoxes()},onKeyDown=keyEv=>{if("Escape"===keyEv.key){keyEv.preventDefault();el.parentNode&&el.parentNode.removeChild(el);window.removeEventListener("mousemove",onMouseMove);window.removeEventListener("mouseup",onMouseUp);window.removeEventListener("keydown",onKeyDown)}};window.addEventListener("mousemove",onMouseMove);window.addEventListener("mouseup",onMouseUp);window.addEventListener("keydown",onKeyDown)})}setCurrentSample(id,boundingBoxes){this._currentSample=id;if(this._els.image){this._els.image.src=`/v1/api/${this._studioApi.projectId}/raw-data/${id}/image`;this._els.image.onload=()=>{if(!this._els.image)return;const updateBB=()=>{if(!this._els.image)return;let factor=this._els.image.naturalWidth/this._els.image.clientWidth;for(let bb of boundingBoxes){bb.x<0&&(bb.x=0);bb.y<0&&(bb.y=0);bb.x>this._els.image.naturalWidth&&(bb.x=this._els.image.naturalWidth);bb.y>this._els.image.naturalHeight&&(bb.y=this._els.image.naturalWidth);bb.x+bb.width>this._els.image.naturalWidth&&(bb.width=this._els.image.naturalWidth-bb.x);bb.y+bb.height>this._els.image.naturalHeight&&(bb.height=this._els.image.naturalHeight-bb.y);bb.width/=factor;bb.height/=factor;bb.x/=factor;bb.y/=factor}this._currentBoundingBoxes=boundingBoxes;this.renderBoundingBoxes()};if(0===this._els.image.clientWidth)if("function"==typeof window.ResizeObserver){let observer=new window.ResizeObserver(()=>{updateBB();observer.disconnect()});observer.observe(this._els.image)}else setTimeout(updateBB,1e3);else updateBB()}}}getCurrentBoundingBoxes(){return this._currentBoundingBoxes}async saveCurrentSample(){if(!this._currentSample)return 0;let widthFactor=(this._currentImgNaturalWidth||1)/(this._currentImgBBWidth||1),heightFactor=(this._currentImgNaturalHeight||1)/(this._currentImgBBHeight||1),cbb=[];for(let bb of this._currentBoundingBoxes)cbb.push({x:Math.round(bb.x*widthFactor),width:Math.round(bb.width*widthFactor),y:Math.round(bb.y*heightFactor),height:Math.round(bb.height*heightFactor),label:bb.label});let sr=await this._studioApi.rawData.setSampleBoundingBoxes(this._studioApi.projectId,this._currentSample,{boundingBoxes:cbb});if(!sr.body||!sr.body.success)throw new Error(sr.body&&sr.body.error||sr.response.responseText);return cbb.length}renderBoundingBoxes(){var _a;if(this._els.imageContainer){console.log("current bounding boxes",this._currentBoundingBoxes);for(let b of Array.from(this._els.imageContainer.querySelectorAll(".bounding-box-container")))null===(_a=b.parentNode)||void 0===_a||_a.removeChild(b);for(let ix=0;ix<this._currentBoundingBoxes.length;ix++){let bb=this._currentBoundingBoxes[ix];if(!this._labelToColor[bb.label]){this._labelToColor[bb.label]=this._colors[0];this._colors.splice(0,1)}let color=this._labelToColor[bb.label],el=document.createElement("div");el.classList.add("bounding-box-container");el.style.position="absolute";el.style.border="solid 3px "+color;el.style.width=bb.width+"px";el.style.height=bb.height+"px";el.style.left=bb.x+"px";el.style.top=bb.y+"px";let label=document.createElement("div");label.classList.add("bounding-box-label");label.style.background=color;label.textContent=bb.label;label.title="Change label";el.appendChild(label);let trash=document.createElement("span");trash.classList.add("bounding-box-trash");trash.style.background=color;trash.innerHTML='<i class="fas fa-trash"></i>';trash.title="Delete label";label.appendChild(trash);let move=document.createElement("div");move.classList.add("bounding-box-move");move.style.background=color;move.innerHTML='<i class="fas fa-arrows-alt"></i>';move.title="Move label";el.appendChild(move);let resize=document.createElement("div");resize.classList.add("bounding-box-resize");resize.style.background=color;resize.innerHTML='<i class="fas fa-expand-alt"></i>';resize.title="Resize label";el.appendChild(resize);label.onclick=async ev=>{ev.preventDefault();let newLabel=await notify_8.Notify.prompt("Enter new label","Enter a new label for this section","Set label",label.textContent||"","question","info");if(newLabel){label.textContent=newLabel;bb.label=newLabel;this._lastRemovedOrAddedLabel=newLabel;this.renderBoundingBoxes()}};trash.onclick=async ev=>{ev.preventDefault();ev.stopPropagation();this._lastRemovedOrAddedLabel=bb.label;this._currentBoundingBoxes.splice(this._currentBoundingBoxes.indexOf(bb),1);this.renderBoundingBoxes()};move.onmousedown=downEv=>{let startX=downEv.pageX,startY=downEv.pageY;const onKeyDown=keyEv=>{if("Escape"===keyEv.key){keyEv.preventDefault();window.removeEventListener("mousemove",onMouseMove);window.removeEventListener("mouseup",onMouseUp);window.removeEventListener("keydown",onKeyDown);this.renderBoundingBoxes()}},onMouseMove=moveEv=>{el.style.transform="translateX("+(moveEv.pageX-startX)+"px) translateY("+(moveEv.pageY-startY)+"px)"},onMouseUp=upEv=>{let deltaX=upEv.pageX-startX,deltaY=upEv.pageY-startY;bb.x+=deltaX;bb.y+=deltaY;bb.x<0&&(bb.x=0);bb.y<0&&(bb.y=0);this._currentImgNaturalWidth&&bb.x+bb.width>this._currentImgNaturalWidth&&(bb.width=this._currentImgNaturalWidth-bb.x);this._currentImgNaturalHeight&&bb.y+bb.height>this._currentImgNaturalHeight&&(bb.height=this._currentImgNaturalHeight-bb.y);window.removeEventListener("mousemove",onMouseMove);window.removeEventListener("mouseup",onMouseUp);window.removeEventListener("keydown",onKeyDown);this.renderBoundingBoxes()};window.addEventListener("mousemove",onMouseMove);window.addEventListener("mouseup",onMouseUp);window.addEventListener("keydown",onKeyDown)};resize.onmousedown=downEv=>{let startX=downEv.pageX,startY=downEv.pageY;const onKeyDown=keyEv=>{if("Escape"===keyEv.key){keyEv.preventDefault();window.removeEventListener("mousemove",onMouseMove);window.removeEventListener("mouseup",onMouseUp);window.removeEventListener("keydown",onKeyDown);this.renderBoundingBoxes()}},onMouseMove=moveEv=>{let deltaX=moveEv.pageX-startX,deltaY=moveEv.pageY-startY;el.style.width=bb.width+deltaX+"px";el.style.height=bb.height+deltaY+"px"},onMouseUp=upEv=>{let deltaX=upEv.pageX-startX,deltaY=upEv.pageY-startY;bb.width+=deltaX;bb.height+=deltaY;bb.x<0&&(bb.x=0);bb.y<0&&(bb.y=0);this._currentImgNaturalWidth&&bb.x+bb.width>this._currentImgNaturalWidth&&(bb.width=this._currentImgNaturalWidth-bb.x);this._currentImgNaturalHeight&&bb.y+bb.height>this._currentImgNaturalHeight&&(bb.height=this._currentImgNaturalHeight-bb.y);window.removeEventListener("mousemove",onMouseMove);window.removeEventListener("mouseup",onMouseUp);window.removeEventListener("keydown",onKeyDown);this.renderBoundingBoxes()};window.addEventListener("mousemove",onMouseMove);window.addEventListener("mouseup",onMouseUp);window.addEventListener("keydown",onKeyDown)};this._els.imageContainer.appendChild(el)}}}}}));define("shared/MgmtInterfaceTypes",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("shared/daemon/iwebsocket",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("shared/daemon/remote-mgmt-service",["require","exports","./events"],(function(require,exports,events_1){Object.defineProperty(exports,"__esModule",{value:!0});exports.RemoteMgmt=void 0;const TCP_PREFIX="[32m[WS ][0m";class RemoteMgmt extends events_1.EventEmitter{constructor(projectId,devKeys,eiConfig,device,createWebsocket,checkNameCb){super();this._state="idle";this._projectId=projectId;this._devKeys=devKeys;this._eiConfig=eiConfig;this._device=device;this._createWebsocket=createWebsocket;this._checkNameCb=checkNameCb;this.registerPingPong();this._device.on("snapshot",(buffer,filename)=>{if("snapshot-stream-started"===this._state||"sampling"===this._state&&this._device.supportsSnapshotStreamingWhileCapturing()&&this._ws){let res={snapshotFrame:buffer.toString("base64"),fileName:filename};this._ws&&this._ws.send(JSON.stringify(res))}})}async connect(reconnectOnFailure=!0){await this._device.beforeConnect();console.log(TCP_PREFIX,`Connecting to ${this._eiConfig.endpoints.internal.ws}`);try{this._ws=this._createWebsocket(this._eiConfig.endpoints.internal.ws);this.attachWsHandlers()}catch(ex){console.error(TCP_PREFIX,"Failed to connect to",this._eiConfig.endpoints.internal.ws,ex);if(!reconnectOnFailure)throw ex;setTimeout(()=>{this.connect()},1e3)}}disconnect(){this._ws&&this._ws.terminate()}registerPingPong(){setInterval(()=>{let myws=this._ws;if(myws){let received=!1;myws.ping();myws.once("pong",()=>{received=!0});setTimeout(()=>{if(!received&&this._ws&&this._ws===myws){console.log(TCP_PREFIX,"Not received pong from server within six seconds, re-connecting");this._ws.terminate()}},6e3)}},3e4)}attachWsHandlers(){if(!this._ws)return console.log(TCP_PREFIX,"attachWsHandlers called without ws instance!");this._ws.on("message",async data=>{let d;try{d="string"==typeof data?JSON.parse(data):JSON.parse(data.toString("utf-8"))}catch(ex){return}if(void 0===d.hello)if(void 0===d.sample)if(void 0===d.startSnapshot)if(void 0===d.stopSnapshot)console.log(TCP_PREFIX,"received message",d);else{if(!this._device.supportsSnapshotStreaming()){let res1={snapshotFailed:!0,error:"Device does not support snapshot streaming"};this._ws&&this._ws.send(JSON.stringify(res1));return}"snapshot-stream-requested"===this._state&&await this.waitForSnapshotStartedOrIdle();if("snapshot-stream-started"!==this._state)return;try{this._state="snapshot-stream-stopping";await this._device.stopSnapshotStreaming();this._state="idle";let res2={snapshotStopped:!0};this._ws&&this._ws.send(JSON.stringify(res2))}catch(ex2){let ex=ex2,res1={snapshotFailed:!0,error:ex.message||ex.toString()};this._ws&&this._ws.send(JSON.stringify(res1))}finally{this._state="idle"}}else{if(!this._device.supportsSnapshotStreaming()){let res1={snapshotFailed:!0,error:"Device does not support snapshot streaming"};this._ws&&this._ws.send(JSON.stringify(res1));return}if("sampling"===this._state){let res1={snapshotFailed:!0,error:"Device is sampling, cannot start snapshot stream"};this._ws&&this._ws.send(JSON.stringify(res1));return}if("snapshot-stream-requested"===this._state||"snapshot-stream-stopping"===this._state)return;if("snapshot-stream-started"===this._state){let res3={snapshotStarted:!0};this._ws&&this._ws.send(JSON.stringify(res3));return}try{this._state="snapshot-stream-requested";await this._device.startSnapshotStreaming();this._state="snapshot-stream-started";let res2={snapshotStarted:!0};this._ws&&this._ws.send(JSON.stringify(res2))}catch(ex2){let ex=ex2,res1={snapshotFailed:!0,error:ex.message||ex.toString()};this._ws&&this._ws.send(JSON.stringify(res1));"sampling"!==this._state&&(this._state="idle")}}else{let s=d.sample;console.log(TCP_PREFIX,"Incoming sampling request",s);let sampleHadError=!1,restartSnapshotOnFinished=!1,resetStateToSnapshotStreaming=!1;try{let ee=new events_1.EventEmitter;ee.on("started",()=>{let res2={sampleStarted:!0};this._ws&&this._ws.send(JSON.stringify(res2))});ee.on("reading",progressPercentage=>{let res5={sampleReading:!0,progressPercentage:progressPercentage};this._ws&&this._ws.send(JSON.stringify(res5))});ee.on("uploading",()=>{let res5={sampleUploading:!0};this._ws&&this._ws.send(JSON.stringify(res5))});ee.on("processing",()=>{let res5={sampleProcessing:!0};this._ws&&this._ws.send(JSON.stringify(res5))});setTimeout(()=>{if(!sampleHadError){let res={sample:!0};this._ws&&this._ws.send(JSON.stringify(res))}},1);restartSnapshotOnFinished=("snapshot-stream-started"===this._state||"snapshot-stream-requested"===this._state)&&!this._device.supportsSnapshotStreamingWhileCapturing();resetStateToSnapshotStreaming="snapshot-stream-started"===this._state||"snapshot-stream-requested"===this._state;if(restartSnapshotOnFinished){"snapshot-stream-requested"===this._state&&await this.waitForSnapshotStartedOrIdle();if("snapshot-stream-started"===this._state){this._state="snapshot-stream-stopping";await this._device.stopSnapshotStreaming();this._state="idle"}}"snapshot-stream-stopping"===this._state&&await this.waitForSnapshotStartedOrIdle();this._state="sampling";await this._device.sampleRequest(s,ee);sampleHadError=!0;let res3={sampleFinished:!0};this._ws&&this._ws.send(JSON.stringify(res3))}catch(ex2){sampleHadError=!0;let ex=ex2;console.error(TCP_PREFIX,"Failed to sample data",ex);let res5={sample:!1,error:ex.message||ex.toString()};this._ws&&this._ws.send(JSON.stringify(res5));restartSnapshotOnFinished=!1;resetStateToSnapshotStreaming=!1}finally{this._state="idle"}if(restartSnapshotOnFinished)try{this._state="snapshot-stream-requested";await this._device.startSnapshotStreaming();this._state="snapshot-stream-started"}catch(ex2){"sampling"===this._state&&(this._state="idle")}else resetStateToSnapshotStreaming&&(this._state="snapshot-stream-started")}});this._ws.on("error",err=>{console.error(TCP_PREFIX,`Error connecting to ${this._eiConfig.endpoints.internal.ws}`,err.code||err)});this._ws.on("close",()=>{console.log(TCP_PREFIX,"Trying to connect in 1 second...");setTimeout(this.connect.bind(this),1e3);this._ws&&this._ws.removeAllListeners();this._ws=void 0});this._ws.on("open",async()=>{console.log(TCP_PREFIX,`Connected to ${this._eiConfig.endpoints.internal.ws}`);try{await this.sendHello()}catch(ex2){let ex=ex2;console.error(TCP_PREFIX,"Failed to connect to remote management service",ex.message||ex.toString(),"retrying in 5 seconds...");setTimeout(this.sendHello.bind(this),5e3)}})}async sendHello(){if(!this._ws||!this._device.connected())return;let deviceId=await this._device.getDeviceId(),req={hello:{version:3,apiKey:this._devKeys.apiKey,deviceId:deviceId,deviceType:this._device.getDeviceType(),connection:"daemon",sensors:this._device.getSensors(),supportsSnapshotStreaming:this._device.supportsSnapshotStreaming()}};this._ws.once("message",async helloResponse=>{let ret=JSON.parse(helloResponse.toString("utf-8"));if(ret.hello){if(!deviceId)throw new Error("Could not read serial number for device");let name=await this.checkName(deviceId);console.log(TCP_PREFIX,'Device "'+name+'" is now connected to project "'+await this.getProjectName()+'"');console.log(TCP_PREFIX,`Go to ${this._eiConfig.endpoints.internal.api.replace("/v1","")}/studio/${this._projectId}/acquisition/training `+"to build your machine learning model!")}else{console.error(TCP_PREFIX,"Failed to authenticate, API key not correct?",ret.err);this.emit("authenticationFailed");if(this._ws){this._ws.removeAllListeners();this._ws.terminate();this._ws=void 0}}});this._ws.send(JSON.stringify(req))}async checkName(deviceId){try{let create=(await this._eiConfig.api.devices.createDevice(this._projectId,{deviceId:await this._device.getDeviceId(),deviceType:this._device.getDeviceType(),ifNotExists:!0})).body;if(!create.success)throw new Error("Failed to create device... "+create.error);let device=(await this._eiConfig.api.devices.getDevice(this._projectId,deviceId)).body.device,currName=device?device.name:deviceId;if(currName!==deviceId)return currName;let newName=await this._checkNameCb(currName);if(newName!==currName){let rename=(await this._eiConfig.api.devices.renameDevice(this._projectId,deviceId,{name:newName})).body;if(!rename.success)throw new Error("Failed to rename device... "+rename.error)}return newName}catch(ex2){let ex=ex2;throw ex.message||ex}}async getProjectName(){try{let projectBody=(await this._eiConfig.api.projects.getProjectInfo(this._projectId)).body;if(!projectBody.success)throw projectBody.error;return projectBody.project.name}catch(ex2){let ex=ex2;throw ex.message||ex}}async waitForSnapshotStartedOrIdle(){let max=Date.now()+5e3;for(;;){if(Date.now()>max)throw new Error("Timeout when waiting for snapshot to be started or idle");await this.sleep(200);if("snapshot-stream-started"===this._state||"idle"===this._state)return}}sleep(ms){return new Promise(resolve=>setTimeout(resolve,ms))}}exports.RemoteMgmt=RemoteMgmt}));define("client/project/components/shared/viewmodels/init",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.PageType=void 0;!function(PageType){PageType[PageType.Device=0]="Device";PageType[PageType.Acquisition=1]="Acquisition";PageType[PageType.DSP=2]="DSP";PageType[PageType.TrainingKeras=3]="TrainingKeras";PageType[PageType.FeatureGeneration=4]="FeatureGeneration";PageType[PageType.Classification=5]="Classification";PageType[PageType.Deployment=6]="Deployment";PageType[PageType.SelectProject=7]="SelectProject";PageType[PageType.ProjectDashboard=8]="ProjectDashboard";PageType[PageType.CreateImpulse=9]="CreateImpulse";PageType[PageType.TrainingAnomaly=10]="TrainingAnomaly";PageType[PageType.Retrain=11]="Retrain";PageType[PageType.ModelValidation=12]="ModelValidation";PageType[PageType.SignupSuccessful=13]="SignupSuccessful";PageType[PageType.AccountActivation=14]="AccountActivation";PageType[PageType.PasswordResetSuccessful=15]="PasswordResetSuccessful";PageType[PageType.Profile=16]="Profile";PageType[PageType.Keys=17]="Keys";PageType[PageType.Login=18]="Login";PageType[PageType.Signup=19]="Signup";PageType[PageType.ForgotPassword=20]="ForgotPassword";PageType[PageType.ForgotPasswordSuccessful=21]="ForgotPasswordSuccessful";PageType[PageType.ResetPassword=22]="ResetPassword";PageType[PageType.Export=23]="Export";PageType[PageType.Upload=24]="Upload";PageType[PageType.Versions=25]="Versions";PageType[PageType.Restore=26]="Restore";PageType[PageType.Evaluate=27]="Evaluate";PageType[PageType.Tuner=28]="Tuner";PageType[PageType.LabelObjectDetection=29]="LabelObjectDetection";PageType[PageType.SelectProjectThirdParty=30]="SelectProjectThirdParty";PageType[PageType.ApplicationTesting=31]="ApplicationTesting";PageType[PageType.OrganizationDashboard=90]="OrganizationDashboard";PageType[PageType.OrganizationUsers=91]="OrganizationUsers";PageType[PageType.OrganizationKeys=92]="OrganizationKeys";PageType[PageType.OrganizationBuckets=93]="OrganizationBuckets";PageType[PageType.OrganizationData=94]="OrganizationData";PageType[PageType.OrganizationCreateProject=95]="OrganizationCreateProject";PageType[PageType.OrganizationTransformation=96]="OrganizationTransformation";PageType[PageType.OrganizationCreateProjectDetails=97]="OrganizationCreateProjectDetails";PageType[PageType.OrganizationCreateProjectList=98]="OrganizationCreateProjectList";PageType[PageType.OrganizationProjects=99]="OrganizationProjects";PageType[PageType.OrganizationDeploy=100]="OrganizationDeploy";PageType[PageType.OrganizationPortals=101]="OrganizationPortals";PageType[PageType.OrganizationDataPipelines=102]="OrganizationDataPipelines";PageType[PageType.OrganizationDsp=103]="OrganizationDsp";PageType[PageType.OrganizationTransferLearning=104]="OrganizationTransferLearning";PageType[PageType.UploadPortal=200]="UploadPortal"}(exports.PageType||(exports.PageType={}))}));define("client/project/components/shared/MgmtInterfaceTypes",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("shared/daemon/iserialconnector",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/project/components/webserial/webserial-connector",["require","exports","../../../../shared/daemon/events"],(function(require,exports,events_2){Object.defineProperty(exports,"__esModule",{value:!0});exports.WebSerialConnector=void 0;class WebSerialConnector extends events_2.EventEmitter{constructor(baudrate){super();this._baudrate=baudrate;this._connected=!1}isConnected(){return this._connected}async connect(){let port=this._port=await navigator.serial.requestPort();port.addEventListener("disconnect",()=>{console.log("port disconnected");this._inputStream=void 0;this._outputStream=void 0;this._port=void 0;this._connected=!1;this.emit("close")});await port.open({baudRate:this._baudrate});console.log("port info",port);console.log("Connected!");if(!port.readable)throw new Error("port has no readable field");if(!port.writable)throw new Error("port has no writable field");this._connected=!0;let decoder=new TextDecoderStream,inputDone=port.readable.pipeTo(decoder.writable);this._inputStream=decoder.readable;this._reader=this._inputStream.getReader();(async()=>{for(;;)try{if(!this._reader)return;const{value:value,done:done}=await this._reader.read();value&&this.emit("data",Buffer.from(value,"utf-8"));if(done){console.log("[readLoop] DONE",done);this._reader.releaseLock();break}}catch(ex){console.log("inputStream error",ex);this._inputStream=void 0;this._outputStream=void 0;this._port=void 0;this._connected=!1;this.emit("close");break}})();const encoder=new TextEncoderStream;encoder.readable.pipeTo(port.writable);this._outputStream=encoder.writable;inputDone.catch(err=>{this._inputStream=void 0;this._outputStream=void 0;this._port=void 0;this._connected=!1;this.emit("close")});this.emit("connected")}async write(buffer){if(!this._outputStream)throw new Error("Serial is not open");const writer=this._outputStream.getWriter();await writer.write(buffer.toString("utf-8"));writer.releaseLock()}async setBaudRate(baudRate){throw new Error("setBaudRate is not supported")}async disconnect(){this._outputStream&&await this._outputStream.getWriter().close();this._port&&await this._port.close();this._outputStream=void 0;this._inputStream=void 0;this._port=void 0;this._connected=!1;return!0}async getMACAddress(){return null}async hasSerial(){return!!this._port}canSwitchBaudRate(){return!1}}exports.WebSerialConnector=WebSerialConnector}));define("shared/daemon/ei-serial-protocol",["require","exports","./events"],(function(require,exports,events_3){Object.defineProperty(exports,"__esModule",{value:!0});exports.EiSerialSensor=exports.EiSerialWifiSecurity=void 0;const CON_PREFIX="[34m[SER][0m";var EiSerialSensor;!function(EiSerialWifiSecurity){EiSerialWifiSecurity[EiSerialWifiSecurity.EI_SECURITY_NONE=0]="EI_SECURITY_NONE";EiSerialWifiSecurity[EiSerialWifiSecurity.EI_SECURITY_WEP=1]="EI_SECURITY_WEP";EiSerialWifiSecurity[EiSerialWifiSecurity.EI_SECURITY_WPA=2]="EI_SECURITY_WPA";EiSerialWifiSecurity[EiSerialWifiSecurity.EI_SECURITY_WPA2=3]="EI_SECURITY_WPA2";EiSerialWifiSecurity[EiSerialWifiSecurity.EI_SECURITY_WPA_WPA2=4]="EI_SECURITY_WPA_WPA2";EiSerialWifiSecurity[EiSerialWifiSecurity.EI_SECURITY_PAP=5]="EI_SECURITY_PAP";EiSerialWifiSecurity[EiSerialWifiSecurity.EI_SECURITY_CHAP=6]="EI_SECURITY_CHAP";EiSerialWifiSecurity[EiSerialWifiSecurity.EI_SECURITY_EAP_TLS=7]="EI_SECURITY_EAP_TLS";EiSerialWifiSecurity[EiSerialWifiSecurity.EI_SECURITY_PEAP=8]="EI_SECURITY_PEAP";EiSerialWifiSecurity[EiSerialWifiSecurity.EI_SECURITY_UNKNOWN=255]="EI_SECURITY_UNKNOWN"}(exports.EiSerialWifiSecurity||(exports.EiSerialWifiSecurity={}));!function(EiSerialSensor){EiSerialSensor[EiSerialSensor.EI_CLASSIFIER_SENSOR_UNKNOWN=-1]="EI_CLASSIFIER_SENSOR_UNKNOWN";EiSerialSensor[EiSerialSensor.EI_CLASSIFIER_SENSOR_MICROPHONE=1]="EI_CLASSIFIER_SENSOR_MICROPHONE";EiSerialSensor[EiSerialSensor.EI_CLASSIFIER_SENSOR_ACCELEROMETER=2]="EI_CLASSIFIER_SENSOR_ACCELEROMETER";EiSerialSensor[EiSerialSensor.EI_CLASSIFIER_SENSOR_CAMERA=3]="EI_CLASSIFIER_SENSOR_CAMERA";EiSerialSensor[EiSerialSensor.EI_CLASSIFIER_SENSOR_9DOF=4]="EI_CLASSIFIER_SENSOR_9DOF";EiSerialSensor[EiSerialSensor.EI_CLASSIFIER_SENSOR_ENVIRONMENTAL=5]="EI_CLASSIFIER_SENSOR_ENVIRONMENTAL"}(EiSerialSensor=exports.EiSerialSensor||(exports.EiSerialSensor={}));exports.default=class{constructor(serial){this._serial=serial}async onConnected(){this._serial.write(Buffer.from("b\r","ascii"));await this.waitForSerialSequence("onConnected",Buffer.from([62,32]),5e3)}async clearConfig(){await this.execCommand("AT+CLEARCONFIG",1e4)}async getConfig(){let section,data=await this.execCommand("AT+CONFIG?",2e3),config={info:{},wifi:{},sampling:{},upload:{},management:{},sensors:[]};config.info.atCommandVersion={major:1,minor:0,patch:0};config.wifi.present=!0;config.inference={sensor:EiSerialSensor.EI_CLASSIFIER_SENSOR_UNKNOWN,modelType:"classification"};config.snapshot={hasSnapshot:!1,supportsStreaming:!1,colorDepth:"Grayscale",resolutions:[]};for(let line of data.split("\n").map(l=>l.trim()).filter(l=>!!l)){if(line.indexOf("= Device info =")>-1){section="info";continue}if(line.indexOf("= Sensors =")>-1){section="sensors";continue}if(line.indexOf("= Snapshot =")>-1){section="snapshot";continue}if(line.indexOf("= Inference =")>-1){section="inference";continue}if(line.indexOf("= WIFI =")>-1){section="wifi";continue}if(line.indexOf("= Sampling parameters =")>-1){section="sampling";continue}if(line.indexOf("= Upload settings =")>-1){section="upload";continue}if(line.indexOf("= Remote management =")>-1){section="management";continue}if(!section)continue;let[key,...valueArr]=line.split(":").map(v=>v.trim()),value=valueArr.join(":");key=key.toLowerCase();if("info"===section){if("id"===key){config.info.id=value;continue}if("type"===key){config.info.type=value;continue}if("at version"===key){let[major,minor,patch]=value.split(".").map(n=>Number(n));config.info.atCommandVersion={major:major,minor:minor,patch:patch};continue}if("data transfer baudrate"===key){let r=Number(value);isNaN(r)||this._serial.canSwitchBaudRate()&&(config.info.transferBaudRate=r);continue}}if("sensors"!==section){if("inference"===section){if("sensor"===key){config.inference.sensor=Number(value);continue}if("model type"===key){config.inference.modelType=value;continue}}if("snapshot"===section){if("has snapshot"===key){config.snapshot.hasSnapshot="1"===value;continue}if("supports stream"===key){config.snapshot.supportsStreaming="1"===value;continue}if("color depth"===key){if("Grayscale"!==value&&"RGB"!==value)throw new Error('Invalid value for "Color depth" (Snapshot section): '+value+', should be either "RGB" or "Grayscale"');config.snapshot.colorDepth=value;continue}if("resolutions"===key){config.snapshot.resolutions=[];let allR=value.replace("[","").replace("]","").split(",").map(x=>x.trim());for(let r of allR){let[width,height]=r.split("x").map(n=>Number(n));isNaN(width)||isNaN(height)?console.warn("Failed to parse snapshot line",value):config.snapshot.resolutions.push({width:width,height:height})}continue}}if("wifi"===section){if("present"===key){config.wifi.present="1"===value;continue}if("ssid"===key){config.wifi.ssid=value;continue}if("password"===key){config.wifi.password=value;continue}if("security"===key){config.wifi.security=Number(value);continue}if("connected"===key){config.wifi.connected="1"===value;continue}if("mac"===key)continue}if("sampling"===section){if("label"===key){config.sampling.label=value;continue}if("interval"===key){config.sampling.interval=Number(value.replace(" ms.",""));continue}if("length"===key){config.sampling.length=Number(value.replace(" ms.",""));continue}if("hmac key"===key){config.sampling.hmacKey=value;continue}}if("upload"===section){if("api key"===key){config.upload.apiKey=value;continue}if("host"===key){config.upload.host=value;continue}if("path"===key){config.upload.path=value;continue}}if("management"===section){if("url"===key){config.management.url=value;continue}if("connected"===key){config.management.connected="1"===value;continue}if("last error"===key){config.management.lastError=value;continue}}console.warn(CON_PREFIX,"Unhandled configuration option",section,key,value)}else{let newFormat=line.match(/^Name\:\s?([^,]+),\s?Max sample length\:\s?([^,]+)s\s?,\s?Frequencies\:\s?\[(.*)\]\s?$/);if(newFormat&&4===newFormat.length){let[_,name,maxSampleLengthS,frequencies]=newFormat;config.sensors.push({name:name,maxSampleLengthS:Number(maxSampleLengthS),frequencies:frequencies.split(",").map(f=>f.replace("Hz","").trim()).map(f=>Number(f))})}else if("Built-in accelerometer"===line.trim())config.sensors.push({name:line.trim(),maxSampleLengthS:300,frequencies:[62.5,100]});else{if("Built-in microphone"!==line.trim())throw new Error("Cannot parse sensor line: "+line);config.sensors.push({name:line.trim(),maxSampleLengthS:60,frequencies:[16e3]})}}}this._config=config;return config}async setDeviceID(deviceId){let res=await this.execCommand("AT+DEVICEID="+deviceId);if(-1===res.indexOf("OK"))throw new Error("Failed to set device ID: "+res)}async setUploadSettings(apiKey,url){let res=await this.execCommand("AT+UPLOADSETTINGS="+apiKey+","+url);if(-1===res.indexOf("OK"))throw new Error("Failed to set upload settings: "+res)}async setUploadHost(host){let res=await this.execCommand("AT+UPLOADHOST="+host);if(-1===res.indexOf("OK"))throw new Error("Failed to set upload host: "+res)}async setSampleSettings(label,interval,length,hmacKey){let res=await this.execCommand(`AT+SAMPLESETTINGS=${label},${interval},${length},${hmacKey}`);if(-1===res.indexOf("OK"))throw new Error("Failed to set sample settings: "+res);if(this._config){this._config.sampling.label=label;this._config.sampling.interval=interval;this._config.sampling.length=length;this._config.sampling.hmacKey=hmacKey}}async setWifi(ssid,password,security){let res=await this.execCommand(`AT+WIFI=${ssid},${password},${Number(security)}`,1e4);if(-1===res.indexOf("OK"))throw new Error("Failed to set sample settings: "+res)}async scanWifi(){let ret=[],res=await this.execCommand("AT+SCANWIFI",1e4);for(let line of res.split("\n").map(l=>l.trim()).filter(l=>!!l)){let[none,ssid,security,rssi]=line.split(/(?:(?:SSID|Security|RSSI)\:)/).map(l=>l.trim()).map(l=>l.replace(/[,\:]$/,""));ret.push({ssid:ssid,security:Number((security.match(/\((\d+)\)/)||[])[1]),securityString:security.split(" ")[0],rssi:Number(rssi.replace(" dBm","")),line:line})}return ret}async setRemoteManagement(url){let res=await this.execCommand(`AT+MGMTSETTINGS=${url}`);if(-1===res.indexOf("OK"))throw new Error("Failed to set remote management settings: "+res)}startSampling(sensor,length){let cmd=sensor?"AT+SAMPLESTART="+sensor:"AT+SAMPLESTART",ee=new events_3.EventEmitter,allListeners=[this.getSerialSequenceCallback("Sampling...",3*length,b=>{console.log(CON_PREFIX,"Sampling started");ee.emit("samplingStarted")}),this.getSerialSequenceCallback("Done sampling",3*length,b=>{console.log(CON_PREFIX,"Sampling done")}),this.getSerialSequenceCallback("Processing...",3*length,b=>{console.log(CON_PREFIX,"Processing started");ee.emit("processing")}),this.getSerialSequenceCallback("Done processing",3*length,b=>{console.log(CON_PREFIX,"Processing done")}),this.getSerialSequenceCallback("Uploading...",3*length,b=>{console.log(CON_PREFIX,"Uploading started");ee.emit("uploading")})];(async()=>{try{let res=await this.execCommand(cmd,10*length);if(res.indexOf("ERR:")>-1){let errLine=res.split("\n").map(l=>l.trim()).find(l=>l.indexOf("ERR:")>-1);console.log(CON_PREFIX,"Sampling failed",errLine||res);throw new Error(errLine||res)}let fileNameLine=res.split("\n").filter(t=>t.indexOf("File name:")>-1)[0];if(!fileNameLine){console.log(CON_PREFIX,"Could not find file name line in sample response",res);throw new Error("Could not find file name line in sample response "+res)}let filename=fileNameLine.split(":").map(s=>s.trim())[1];if(res.indexOf("Not uploading file")>-1)if(res.indexOf("Used buffer")>-1){let props=res.match(/from=(\d+).*?to=(\d+).*?/);if(!props)throw new Error("Device used buffer, but could not parse buffer info "+res);if(!this._config)throw new Error("No last known configuration");let[line,from,to]=props,expectedBytes=Math.floor((Number(to)-Number(from))/3*4),bytesReceived=0,lastSentDate=Date.now();ee.emit("readingFromDevice",Math.floor(bytesReceived/expectedBytes*100));console.log(CON_PREFIX,"Device not connected to WiFi directly, reading from buffer (bytes "+from+" - "+to+", expecting to read ~"+expectedBytes+" bytes...");const onProgressEv=data=>{bytesReceived+=data.toString("ascii").length;let pct=Math.floor(bytesReceived/expectedBytes*100);if(Date.now()-lastSentDate>=1e3){console.log(CON_PREFIX,"Reading "+pct+"% complete...");ee.emit("readingFromDevice",pct);lastSentDate=Date.now()}};this._serial.on("data",onProgressEv);let rfa=await this.execCommandAutoSwitchBaudRate("AT+READBUFFER="+from+","+to,10*length,!1);this._serial.off("data",onProgressEv);console.log(CON_PREFIX,"Reading from buffer OK");let rf=Buffer.from(rfa,"base64");console.log(CON_PREFIX,"File is",rf.length,"bytes after decoding");ee.emit("done",{filename:this.basename(filename),onDeviceFileName:filename,file:rf,label:this._config.sampling.label})}else{if(!this._config)throw new Error("No last known configuration");ee.emit("readingFromDevice",-1);console.log(CON_PREFIX,"Device not connected to WiFi directly, reading "+filename+"...");let rf,rfa=await this.execCommandAutoSwitchBaudRate("AT+READFILE="+filename,10*length,!0);console.log(CON_PREFIX,"Reading "+filename+" OK");rf=1===this._config.info.atCommandVersion.major&&this._config.info.atCommandVersion.minor<2?Buffer.from(rfa,"hex"):Buffer.from(rfa,"base64");console.log(CON_PREFIX,"File is",rf.length,"bytes after decoding");ee.emit("done",{filename:this.basename(filename),onDeviceFileName:filename,file:rf})}else ee.emit("done",{filename:this.basename(filename),onDeviceFileName:filename})}catch(ex2){let ex=ex2;ee.emit("error",ex.message||ex.toString())}finally{for(let l of allListeners)l.cancelListener()}})();return ee}async unlink(file){let res=await this.execCommand(`AT+UNLINKFILE=${file}`);if(""!==res.trim())throw new Error("Failed to unlink file: "+res)}async takeSnapshot(width,height){if(!this._config)throw new Error("Config is null");let command="AT+SNAPSHOT="+width+","+height,totalBytes=width*height*("RGB"===this._config.snapshot.colorDepth?3:1),expectedBytes=Math.floor(totalBytes/3*4),ee=new events_3.EventEmitter;(async()=>{let bytesReceived=0,lastSentDate=Date.now();const onProgressEv=data=>{bytesReceived+=data.toString("ascii").length;let pct=Math.floor(bytesReceived/expectedBytes*100);if(Date.now()-lastSentDate>=1e3){console.log(CON_PREFIX,"Reading "+pct+"% complete...");ee.emit("readingFromDevice",pct);lastSentDate=Date.now()}};try{ee.emit("readingFromDevice",Math.floor(bytesReceived/expectedBytes*100));this._serial.on("data",onProgressEv);let res=await this.execCommandAutoSwitchBaudRate(command,7e4,!1,ee);this._serial.off("data",onProgressEv);if(res.startsWith("ERR:"))throw new Error("Failed to take snapshot: "+res);let lines=res.split("\n").map(x=>x.trim()).filter(x=>!!x).filter(x=>"ok"!==x.toLocaleLowerCase()).filter(x=>"okok"!==x.toLocaleLowerCase()),last=lines[lines.length-1];ee.emit("done",Buffer.from(last,"base64"))}catch(ex2){let ex=ex2;ee.emit("error",ex.message||ex.toString())}finally{this._serial.off("data",onProgressEv)}})();return ee}async stopInference(){await this._serial.write(Buffer.from("b\r","ascii"));await this.waitForSerialSequence("Stop inference",Buffer.from([62,32]),5e3)}async startInference(mode){let command="AT+RUNIMPULSE";"debug"===mode?command+="DEBUG":"continuous"===mode&&(command+="CONT");command+="\r";for(let ix=0;ix<command.length;ix+=5){0!==ix&&await this.sleep(20);await this._serial.write(Buffer.from(command.substr(ix,5),"ascii"))}}async startSnapshotStream(){if(!this._config||!this._config.snapshot.supportsStreaming)throw new Error("Device does not support snapshot streaming");let smallest=Array.from(this._config.snapshot.resolutions).sort((a,b)=>a.width*a.height-b.width*b.height)[0];if(!smallest)throw new Error("Could not find resolution");let onData,command="AT+SNAPSHOTSTREAM="+smallest.width+","+smallest.height,{useMaxBaudRate:useMaxBaudRate,updatedCommand:updatedCommand}=this.shouldUseMaxBaudrate(command);command=updatedCommand+"\r";let ret={ee:new events_3.EventEmitter,stop:async()=>{onData&&this._serial.off("data",onData);await this._serial.write(Buffer.from("b\r","ascii"));if(useMaxBaudRate){await this.waitForSerialSequence(command,Buffer.from([13,10,79,75]),5e3,!1);await this._serial.setBaudRate(115200)}await this.waitForSerialSequence(command,Buffer.from([62,32]),5e3)}};for(let ix=0;ix<command.length;ix+=5){0!==ix&&await this.sleep(20);await this._serial.write(Buffer.from(command.substr(ix,5),"ascii"))}if(useMaxBaudRate&&this._config.info.transferBaudRate){await this.waitForSerialSequence(command,Buffer.from([13,10,79,75]),1e3,!1);await this._serial.setBaudRate(this._config.info.transferBaudRate)}(async()=>{let currDataLine="";onData=data=>{currDataLine+=data.toString("ascii");let endOfLineIx=currDataLine.indexOf("\r");if(endOfLineIx>-1){let line=currDataLine.slice(0,endOfLineIx).trim();if(line.startsWith("ERR:")){ret.ee.emit("error",line);this._serial.off("data",onData);return}currDataLine=currDataLine.slice(endOfLineIx+1);if(line.startsWith("Image resolution:")||line.startsWith("Starting snapshot"))return;line.length<100||ret.ee.emit("snapshot",Buffer.from(line,"base64"),smallest.width,smallest.height)}};this._serial.on("data",onData)})();return ret}sleep(ms){return new Promise(res=>setTimeout(res,ms))}async execCommand(command,timeout=1e3,logProgress=!1){command+="\r";for(let ix=0;ix<command.length;ix+=5){0!==ix&&await this.sleep(20);if(!this._serial.isConnected())return"";await this._serial.write(Buffer.from(command.substr(ix,5),"ascii"))}let data=await this.waitForSerialSequence(command,Buffer.from([62,32]),timeout,logProgress);data=this.parseSerialResponse(data);if(data.toString("ascii").trim().indexOf("Not a valid AT command")>-1)throw new Error("Error when communicating with device: "+data.toString("ascii").trim());return data.toString("ascii").trim()}waitForSerialSequence(originalCommand,seq,timeout,logProgress=!1){let total=0,nextReport=1e4;return new Promise((res,rej)=>{let allBuffers=[],checkSeqBuffer=Buffer.from([]),to=setTimeout(()=>{this._serial.off("data",fn);rej("Timeout when waiting for "+seq+" (timeout: "+timeout+") "+originalCommand)},timeout),fn=data=>{if(logProgress){total+=data.length;if(total>nextReport){console.log(CON_PREFIX,"Received",total,"bytes");nextReport+=1e4}}allBuffers.push(data);checkSeqBuffer=Buffer.concat([checkSeqBuffer,data]);if(-1!==checkSeqBuffer.indexOf(seq)){clearTimeout(to);this._serial.off("data",fn);res(Buffer.concat(allBuffers))}checkSeqBuffer.length>seq.length&&(checkSeqBuffer=checkSeqBuffer.slice(checkSeqBuffer.length-seq.length))};this._serial.on("data",fn)})}getSerialSequenceCallback(seqStr,timeout,callback){let seq=Buffer.from(seqStr,"ascii"),allBuffers=[],checkSeqBuffer=Buffer.from([]),to=setTimeout(()=>{this._serial.off("data",fn)},timeout),fn=data=>{allBuffers.push(data);checkSeqBuffer=Buffer.concat([checkSeqBuffer,data]);if(-1!==checkSeqBuffer.indexOf(seq)){clearTimeout(to);this._serial.off("data",fn);callback(Buffer.concat(allBuffers))}checkSeqBuffer=checkSeqBuffer.slice(checkSeqBuffer.length-seq.length)};this._serial.on("data",fn);return{cancelListener:()=>this._serial.off("data",fn)}}parseSerialResponse(data){let b=[];if(10===data[0]){b.push(13);b.push(10)}else b.push(data[0]);for(let ix=1;ix<data.length;ix++)if(10===data[ix]&&13!==data[ix-1]){b.push(13);b.push(10)}else b.push(data[ix]);let bdata=Buffer.from(b),first=bdata.indexOf(Buffer.from([13,10])),last=bdata.lastIndexOf(Buffer.from([13,10]));return first===last?bdata.slice(first):bdata.slice(first,last)}async execCommandAutoSwitchBaudRate(command,timeout,logProgress,ee){if(!this._config)throw new Error("No config");let res,data,{useMaxBaudRate:useMaxBaudRate,updatedCommand:updatedCommand}=this.shouldUseMaxBaudrate(command);command=updatedCommand;if(useMaxBaudRate&&this._config.info.transferBaudRate){command+="\r";for(let ix=0;ix<command.length;ix+=5){0!==ix&&await this.sleep(20);await this._serial.write(Buffer.from(command.substr(ix,5),"ascii"))}await this.waitForSerialSequence(command,Buffer.from([13,10,79,75]),1e3,logProgress);ee&&ee.emit("started");await this._serial.setBaudRate(this._config.info.transferBaudRate);let data1=await this.waitForSerialSequence(command,Buffer.from([13,10,79,75]),timeout,logProgress);data1=Buffer.from(data1.toString("ascii").split("\n").filter(x=>"OK"!==x.trim()&&"OKOK"!==x.trim()).join("\n"),"ascii");await this._serial.setBaudRate(115200);let data2=await this.waitForSerialSequence(command,Buffer.from([62,32]),timeout,logProgress);data=this.parseSerialResponse(Buffer.concat([data1,data2]));if(data.toString("ascii").trim().indexOf("Not a valid AT command")>-1)throw new Error("Error when communicating with device: "+data.toString("ascii").trim());res=data1.toString("ascii").trim()+data.toString("ascii").trim()}else{ee&&ee.emit("started");res=await this.execCommand(command,timeout,logProgress)}return res}shouldUseMaxBaudrate(command){if(!this._config)throw new Error("No config");let useMaxBaudRate,hasFasterBaudrate="number"==typeof this._config.info.transferBaudRate&&115200!==this._config.info.transferBaudRate,v=this._config.info.atCommandVersion;if(hasFasterBaudrate)if(1===v.major&&v.minor<4)useMaxBaudRate=!1;else if(1!==v.major||4!==v.minor&&5!==v.minor){useMaxBaudRate=!0;command+=",y"}else useMaxBaudRate=!!command.startsWith("AT+SNAPSHOT=");else{useMaxBaudRate=!1;v.major>=1&&v.minor>=6&&(command+=",n")}return{useMaxBaudRate:useMaxBaudRate,updatedCommand:command}}basename(path){let parts=path.split("/");return parts[parts.length-1]}}}));define("client/project/components/webserial/daemon",["require","exports","shared/daemon/remote-mgmt-service","client/project/components/webserial/webserial-connector","shared/daemon/ei-serial-protocol","client/notify","client/ingestion-utils","../../../../shared/daemon/events"],(function(require,exports,remote_mgmt_service_1,webserial_connector_1,ei_serial_protocol_1,notify_9,ingestion_utils_2,events_4){Object.defineProperty(exports,"__esModule",{value:!0});exports.WebserialDaemon=exports.WebserialUI=void 0;ei_serial_protocol_1=__importDefault(ei_serial_protocol_1);const SERIAL_PREFIX="[33m[SER][0m";exports.WebserialUI=class{constructor(studioApi){this._studioApi=studioApi;this._connectBtn=document.querySelector("#connect-webserial")}init(){if(!navigator.serial)return;let connectWebserial=this._connectBtn;if(connectWebserial){let progress=connectWebserial.querySelector(".fa-spinner");connectWebserial.style.display="";connectWebserial.onclick=async ev=>{ev.preventDefault();if(!connectWebserial)return;let remoteMgmt=new WebserialDaemon(this._studioApi);try{progress.style.display="";await remoteMgmt.connect();connectWebserial.style.display="none";remoteMgmt.once("disconnected",()=>{connectWebserial&&(connectWebserial.style.display="")})}catch(ex2){let ex=ex2;notify_9.Notify.alert("Failed to connect to device","Error: "+notify_9.Notify.extractMsg(ex)+"\n\nAre you using a device that is fully supported by Edge Impulse, and have you loaded the latest device firmware?","danger")}finally{progress.style.display="none"}}}}};class WebserialDaemon extends events_4.EventEmitter{constructor(studioApi){super();this._studioApi=studioApi;this._ingestionUtils=new ingestion_utils_2.IngestionUtils(studioApi);this._remoteMgmtConfig={api:{projects:{getProjectInfo:async projectId=>{return await this._studioApi.projects.getProjectInfo(projectId)}},devices:{renameDevice:async(projectId,deviceId,opts)=>{return await this._studioApi.devices.renameDevice(projectId,deviceId,opts)},createDevice:async(projectId,opts)=>{return await this._studioApi.devices.createDevice(projectId,opts)},getDevice:async(projectId,deviceId)=>{return await this._studioApi.devices.getDevice(projectId,deviceId)}}},endpoints:{internal:{api:location.origin,ws:this._ingestionUtils.getRemoteMgmtHost(),ingestion:this._ingestionUtils.getIngestionHost()}}};this._serialDevice=new webserial_connector_1.WebSerialConnector(115200);this._serialProtocol=new ei_serial_protocol_1.default(this._serialDevice);this._serialDevice.on("close",()=>{console.log("Connection to device closed");this._remoteMgmt&&this._remoteMgmt.disconnect();this.emit("disconnected")});window.addEventListener("beforeunload",async()=>{this.emit("disconnected");this._remoteMgmt&&this._remoteMgmt.disconnect();this._device&&await this._device.stopSnapshotStreamFromSignal()})}async connect(){console.log("Connecting over WebSerial...");await this._serialDevice.connect();console.log("Connecting over WebSerial OK");console.log("onConnected...");await this._serialProtocol.onConnected();console.log("onConnected OK");console.log("Getting config...");let config=await this._serialProtocol.getConfig();console.log("Getting config OK",config);console.log("Getting keys...");let{apiKey:apiKey,hmacKey:hmacKey}=await this._ingestionUtils.fetchKeys();await this._serialProtocol.setUploadSettings(apiKey,this._remoteMgmtConfig.endpoints.internal.ingestion+"/api/training/data");console.log("Getting keys OK");console.log("Connecting to remote mgmt...",this._remoteMgmtConfig);this._device=new WebserialDevice(this._remoteMgmtConfig,this._serialDevice,this._serialProtocol,config,this._ingestionUtils);this._remoteMgmt=new remote_mgmt_service_1.RemoteMgmt(this._studioApi.projectId,{apiKey:apiKey,hmacKey:hmacKey},this._remoteMgmtConfig,this._device,url=>new WebsocketWrapper(url),async currName=>currName);await this._remoteMgmt.connect(!1);console.log("Connecting to remote mgmt OK")}}exports.WebserialDaemon=WebserialDaemon;class WebserialDevice extends events_4.EventEmitter{constructor(config,serialConnector,serialProtocol,deviceConfig,ingestionUtils){super();this._lastSnapshot=new Date(0);this._snapshotId=0;this._waitingForSnapshotToStart=!1;this._config=config;this._serial=serialConnector;this._serialProtocol=serialProtocol;this._deviceConfig=deviceConfig;this._ingestionUtils=ingestionUtils}connected(){return this._serial.isConnected()}async getDeviceId(){return this._deviceConfig.info.id}getDeviceType(){return this._deviceConfig.info.type}getSensors(){let sensors=Array.from(this._deviceConfig.sensors);if(this._deviceConfig.snapshot.hasSnapshot)for(let s of this._deviceConfig.snapshot.resolutions)sensors.push({name:"Camera ("+s.width+"x"+s.height+")",frequencies:[],maxSampleLengthS:6e4});return sensors}isSnapshotStreaming(){return!!this._snapshotStream}supportsSnapshotStreaming(){return this._deviceConfig.snapshot.supportsStreaming}supportsSnapshotStreamingWhileCapturing(){return!1}async stopSnapshotStreamFromSignal(){if(this._waitingForSnapshotToStart||this._snapshotStream){if(this._waitingForSnapshotToStart){let max=Date.now()+5e3;for(;;){if(Date.now()>max)return;await new Promise(resolve=>setTimeout(resolve,200));if(this._snapshotStream)break}}try{await new Promise((resolve,reject)=>{if(!this._snapshotStream)throw new Error("No snapshot stream");this._snapshotStream.ee.once("snapshot",resolve);this._snapshotStream.ee.once("error",reject)});await this.stopSnapshotStreaming()}catch(ex2){console.log(SERIAL_PREFIX,"stopSnapshotStreamFromSignal failed",ex2)}}}async startSnapshotStreaming(){if(this._snapshotStream)throw new Error("Snapshot stream already in progress");console.log(SERIAL_PREFIX,"Entering snapshot stream mode...");this._waitingForSnapshotToStart=!0;try{this._snapshotStream=await this._serialProtocol.startSnapshotStream()}finally{this._waitingForSnapshotToStart=!1}this._snapshotStream.ee.on("error",err=>{console.warn(SERIAL_PREFIX,"Snapshot stream error:",err);this._snapshotStream=void 0});this._snapshotStream.ee.on("snapshot",async(buffer,width,height)=>{const id=++this._snapshotId;try{if(Date.now()-+this._lastSnapshot>200&&id===this._snapshotId){let depth=buffer.length/(width*height);if(1!==depth&&3!==depth)throw new Error("Invalid length for snapshot, expected "+width*height+" or "+width*height*3+" values, but got "+buffer.length);let frameData=Buffer.alloc(width*height*4),frameDataIx=0;for(let ix=0;ix<buffer.length;ix+=depth)if(1===depth){frameData[frameDataIx++]=buffer[ix];frameData[frameDataIx++]=buffer[ix];frameData[frameDataIx++]=buffer[ix];frameData[frameDataIx++]=255}else{frameData[frameDataIx++]=buffer[ix+0];frameData[frameDataIx++]=buffer[ix+1];frameData[frameDataIx++]=buffer[ix+2];frameData[frameDataIx++]=255}let jpegImageData=await this.encodeAsJpg({data:frameData,width:width,height:height},80);this.emit("snapshot",jpegImageData,"");this._lastSnapshot=new Date}}catch(ex){console.warn("Failed to handle snapshot",ex)}});await new Promise((resolve,reject)=>{if(!this._snapshotStream)throw new Error("No snapshot stream");this._snapshotStream.ee.once("snapshot",resolve);this._snapshotStream.ee.once("error",reject)})}async stopSnapshotStreaming(){if(this._snapshotStream){console.log(SERIAL_PREFIX,"Stopping snapshot stream mode...");try{await this._snapshotStream.stop();this._snapshotStream=void 0;console.log(SERIAL_PREFIX,"Stopped snapshot stream mode")}catch(ex){console.log(SERIAL_PREFIX,"Stopped snapshot stream mode failed",ex);throw ex}}}async beforeConnect(){this._deviceConfig=await this._serialProtocol.getConfig();this._deviceConfig.management.connected?console.log(SERIAL_PREFIX,"Device is connected over WiFi to remote management API, no need to run the daemon. Exiting..."):this._deviceConfig.upload.apiKey&&this._deviceConfig.info.id&&this._deviceConfig.info.type?console.log(SERIAL_PREFIX,"Device is not connected to remote management API, will use daemon"):console.error(SERIAL_PREFIX,"Cannot connect to remote management API using daemon, failed to read apiKey, deviceId or deviceType from device. Restarting your development board might help.")}setDeviceConfig(deviceConfig){this._deviceConfig=deviceConfig}async sampleRequest(data,ee){var _a;let s=data;if(!this._deviceConfig.upload.apiKey)throw new Error("Device does not have API key");if(null===(_a=s.sensor)||void 0===_a?void 0:_a.startsWith("Camera (")){let[width,height]=s.sensor.replace("Camera (","").replace(")","").split("x").map(n=>Number(n));if(isNaN(width)||isNaN(height))throw new Error("Could not parse camera resolution "+s.sensor);console.log(SERIAL_PREFIX,"Taking snapshot...");let sampleReq=await this._serialProtocol.takeSnapshot(width,height);function waitForSamplingDone(ee2){return new Promise((resolve,reject)=>{ee2.on("done",ev=>resolve(ev));ee2.on("error",reject)})}sampleReq.on("started",()=>{ee.emit("started")});sampleReq.on("readingFromDevice",progressPercentage=>{ee.emit("reading",progressPercentage)});let snapshot=await waitForSamplingDone(sampleReq);ee.emit("processing");let depth=snapshot.length/(width*height);if(1!==depth&&3!==depth)throw new Error("Invalid length for snapshot, expected "+width*height+" or "+width*height*3+" values, but got "+snapshot.length);let frameData=Buffer.alloc(width*height*4),frameDataIx=0;for(let ix=0;ix<snapshot.length;ix+=depth)if(1===depth){frameData[frameDataIx++]=snapshot[ix];frameData[frameDataIx++]=snapshot[ix];frameData[frameDataIx++]=snapshot[ix];frameData[frameDataIx++]=255}else{frameData[frameDataIx++]=snapshot[ix+0];frameData[frameDataIx++]=snapshot[ix+1];frameData[frameDataIx++]=snapshot[ix+2];frameData[frameDataIx++]=255}let jpegImageData=await this.encodeAsJpg({data:frameData,width:width,height:height},100),filename=s.label+".jpg",processed=await this.makeImage(jpegImageData,this._deviceConfig.sampling.hmacKey,filename),headers={"x-api-key":this._deviceConfig.upload.apiKey,"x-file-name":filename};processed.attachments||(headers["Content-Type"]=processed.contentType);headers["x-label"]=s.label;let opts,url=this._config.endpoints.internal.ingestion+s.path;console.log(SERIAL_PREFIX,"Uploading to",url);ee.emit("uploading");opts=processed.attachments?{headers:headers,body:void 0,formData:{body:{value:processed.encoded,options:{filename:filename,contentType:processed.contentType}},attachments:processed.attachments},encoding:null}:{headers:headers,body:processed.encoded,formData:void 0,encoding:null};await this.post(this._config.endpoints.internal.ingestion+s.path,opts);console.log(SERIAL_PREFIX,"Uploading to",url,"OK")}else{await this._serialProtocol.setSampleSettings(s.label,s.interval,s.length,s.hmacKey);await this._serialProtocol.setUploadSettings(this._deviceConfig.upload.apiKey,s.path);console.log(SERIAL_PREFIX,"Configured upload settings");function waitForSamplingDone(ee2){return new Promise((resolve,reject)=>{ee2.on("done",ev=>resolve(ev));ee2.on("error",reject)})}let sampleReq=this._serialProtocol.startSampling(s.sensor,s.length+3e3);sampleReq.on("samplingStarted",()=>{ee.emit("started")});sampleReq.on("processing",()=>{ee.emit("processing")});sampleReq.on("readingFromDevice",progressPercentage=>{ee.emit("reading",progressPercentage)});sampleReq.on("uploading",()=>{ee.emit("uploading")});let deviceResponse=await waitForSamplingDone(sampleReq);if(deviceResponse&&deviceResponse.file){ee.emit("uploading");let url=this._config.endpoints.internal.ingestion+s.path;try{console.log(SERIAL_PREFIX,"Uploading to",url);if(deviceResponse.file&&deviceResponse.file.indexOf(Buffer.from("Ref-BINARY-","ascii"))>-1){let dr=deviceResponse;await this.post(url,{headers:{"x-api-key":this._deviceConfig.upload.apiKey,"x-file-name":deviceResponse.filename,"x-label":dr.label,"Content-Type":"application/octet-stream"},body:deviceResponse.file,encoding:"binary",formData:void 0})}else{await this.post(url,{headers:{"x-api-key":this._deviceConfig.upload.apiKey,"x-file-name":deviceResponse.filename,"Content-Type":"application/cbor"},body:deviceResponse.file,encoding:"binary",formData:void 0});await this._serialProtocol.unlink(deviceResponse.onDeviceFileName)}console.log(SERIAL_PREFIX,"Uploading to",url,"OK")}catch(ex2){let ex=ex2;console.error(SERIAL_PREFIX,"Failed to upload to",url,ex)}}}}post(url,info){return new Promise((resolve,reject)=>{let x=new XMLHttpRequest;x.open("POST",url);for(let h of Object.keys(info.headers))x.setRequestHeader(h,info.headers[h]);x.onerror=reject;x.onload=()=>{if(200!==x.status)reject("Failed to post data, expected 200 but got "+x.status+": "+x.responseText);else{console.log("Uploaded file, name is",x.responseText);resolve()}};if(info.formData){let fd=new FormData;for(let k of Object.keys(info.formData))if(Array.isArray(info.formData[k]))for(let f of info.formData[k]){let v=new Blob([f.value],{type:f.options.contentType});fd.append(k+"[]",v,f.options.filename)}else{let f=info.formData[k],v=new Blob([f.value],{type:f.options.contentType});fd.append(k,v,f.options.filename)}x.send(fd)}else x.send(info.body)})}encodeAsJpg(opts,quality){let canvas=document.createElement("canvas");canvas.width=opts.width;canvas.height=opts.height;let ctx=canvas.getContext("2d");if(!ctx)throw new Error("Could not create canvas context");for(let row=0;row<opts.height;row++)for(let col=0;col<opts.width;col++){let bufferIx=row*opts.width+col,[r,g,b,a]=opts.data.slice(4*bufferIx,4*bufferIx+4);ctx.fillStyle="rgba("+r+","+g+","+b+","+a/255+")";ctx.fillRect(col,row,1,1)}return new Promise((resolve,reject)=>{let fileReader=new FileReader;fileReader.onloadend=()=>{fileReader.error?reject(fileReader.error):resolve(Buffer.from(fileReader.result))};canvas.toBlob(blob=>{if(!blob)return reject("canvas toblob did not return a blob");fileReader.readAsArrayBuffer(blob)},"image/jpeg",quality)})}async makeImage(buffer,hmacKey,fileName){let hmacImage=await this._ingestionUtils.signBuffer(buffer),emptySignature=Array(64).fill("0").join(""),mimeType=fileName.endsWith(".png")?"image/png":"image/jpeg",data={protected:{ver:"v1",alg:"HS256"},signature:emptySignature,payload:{device_type:"EDGE_IMPULSE_UPLOADER",interval_ms:0,sensors:[{name:"image",units:"rgba"}],values:[`Ref-BINARY-${mimeType} (${buffer.length} bytes) ${hmacImage}`]}},encoded=JSON.stringify(data);const encodedAsBuffer=(new TextEncoder).encode(encoded);let signature=await this._ingestionUtils.signBuffer(encodedAsBuffer);data.signature=signature;return{encoded:JSON.stringify(data),contentType:"application/json",attachments:[{value:buffer,options:{filename:fileName,contentType:mimeType}}]}}}class WebsocketWrapper{constructor(url){this._ws=new WebSocket(url)}close(){this._ws.close()}terminate(){this._ws.close()}removeAllListeners(){console.log("removeAllListeners not implemented yet")}send(message){return this._ws.send(message)}on(m,fn){this.attachHandler(m,fn,!1)}once(m,fn){this.attachHandler(m,fn,!0)}ping(){this._ws.send("ping")}attachHandler(m,fn,once){switch(m){case"message":{const handler=msg=>{once&&this._ws.removeEventListener("message",handler);fn&&fn(msg.data)};this._ws.addEventListener("message",handler);break}case"close":{const handler=()=>{once&&this._ws.removeEventListener("close",handler);fn&&fn()};this._ws.addEventListener("close",handler);break}case"open":{const handler=()=>{once&&this._ws.removeEventListener("open",handler);fn&&fn()};this._ws.addEventListener("open",handler);break}case"pong":{const handler=msg=>{once&&this._ws.removeEventListener("message",handler);"pong"===msg.data&&fn()};this._ws.addEventListener("message",handler);break}}}}}));define("client/project/pages/acquisition-ui",["require","exports","client/project/components/acquisition-chart","client/project/components/acquisition-image","client/global-ui","shared/WebSocketTypes","client/project/components/device-control-widget","client/project/components/start-sampling-widget","client/pagination","client/notify","client/project/components/sample-editor","client/project/components/bounding-box-labeling","client/project/components/webserial/daemon","client/project/components/acquisition-video","client/project/components/job-runner"],(function(require,exports,acquisition_chart_2,acquisition_image_1,global_ui_4,WebSocketTypes_4,device_control_widget_1,start_sampling_widget_1,pagination_1,notify_10,sample_editor_1,bounding_box_labeling_1,daemon_1,acquisition_video_2,job_runner_3){Object.defineProperty(exports,"__esModule",{value:!0});exports.AcquisitionUI=void 0;exports.AcquisitionUI=class{constructor(studioApi,device){this._aqExtraUI=document.querySelector(".acquisition-chart-extra-ui");this._lastLoadedChart=void 0;this._sampleSensors=document.querySelector("#input-sample-sensor");this._sampleFrequencies=document.querySelector("#input-sample-frequency");this._lastSelectedSensor=document.querySelector("#last-acquisition-sensor").value;this._lastSelectedIntervalMs=Number(document.querySelector("#last-acquisition-interval-ms").value);this._startSamplingBtn=document.querySelector("#input-start-sampling");this._rowTemplate=document.querySelector("#acquisition-row-template").content.querySelector("tr");this._acquisitionTable=document.querySelector(".acquisition-table");this._pageSize=Number(document.querySelector("#acquisition-page-size").value);this._allDataCount=Number(document.querySelector("#acquisition-filtered-data-count").value);this._filteredDataCount=Number(document.querySelector("#acquisition-filtered-data-count").value);this._hasUnfilteredData=Number(document.querySelector("#acquisition-data-count").value)>0;this._recordDataNoDevices=document.querySelector("#new-data-no-devices");this._recordDataBody=document.querySelector("#new-data-body");this._renderPageId=0;this._addNewFileIx=0;this._selectedState={isSelecting:!1,allSelected:!1,items:[],selectedCount:0};this._labelQueueCountEl=document.querySelector("#label-queue-count");this._boundingBoxEls={modal:document.querySelector("#edit-bounding-boxes"),sampleName:document.querySelector("#edit-bounding-boxes-sample-name"),saveBtn:document.querySelector("#edit-bounding-boxes-confirm"),imageContainerEl:document.querySelector("#edit-bounding-boxes .label-sampling-container")};this._rawDataChartContainer=document.querySelector("#raw-data-chart-container");this._dataCollectedContainer=document.querySelector("#data-collected-container");this._timeSeriesChartDropdown=document.querySelector("#time-series-chart-dropdown");this._studioApi=studioApi;this._pagination=new pagination_1.Pagination(document.querySelector(".acquisition-table"),this.renderPage.bind(this));window.pagination=this._pagination;let aqBody=document.querySelector(".acquisition-chart-body"),aqImageBody=document.querySelector(".acquisition-image-body"),aqVideoBody=document.querySelector(".acquisition-video-body"),aqStatus=document.querySelector(".acquisition-raw-status");if(aqBody&&aqStatus&&aqImageBody&&aqVideoBody){this._aqChart=new acquisition_chart_2.AcquisitionChart(studioApi,aqBody,WebSocketTypes_4.DOWNSAMPLE_SIZE_SHORT,aqStatus,void 0,void 0,{height:80,width:void 0},!0);this._aqImage=new acquisition_image_1.AcquisitionImage(studioApi,aqImageBody,aqStatus,void 0);this._aqVideo=new acquisition_video_2.AcquisitionVideo(studioApi,aqVideoBody,aqStatus,!0,"cropped",void 0);this._aqChart.on("loaded",data=>{this._aqExtraUI.innerHTML="";this._timeSeriesChartDropdown&&this._timeSeriesChartDropdown.classList.remove("d-none");for(let ix=0;ix<data.payload.sensors.length;ix++)if("wav"===data.payload.sensors[ix].units){this._aqExtraUI.style.display="";let audio=document.createElement("audio");audio.controls=!0;audio.preload="none";audio.src=`/v1/api/${this._studioApi.projectId}/raw-data/${data.sample.id}/wav?axisIx=`+ix;this._aqExtraUI.appendChild(audio)}});const clearAqExtraUI=()=>{this._aqExtraUI.innerHTML="";this._timeSeriesChartDropdown&&this._timeSeriesChartDropdown.classList.add("d-none")};this._aqImage.on("loaded",clearAqExtraUI);this._aqVideo.on("loaded",clearAqExtraUI);for(let s of Array.from(document.querySelectorAll("tr.show-graph"))){s.querySelector(".aq-sensors")&&this.bindRowHandler(s);this.bindDropdown(s)}}new daemon_1.WebserialUI(studioApi).init();this._sampleEditorModal=document.querySelector("#edit-sample-modal");this._startSamplingWidget=new start_sampling_widget_1.StartSamplingWidgetUI(device,this._startSamplingBtn,this._studioApi);this._sampleEditorWidget=new sample_editor_1.SampleEditor(studioApi,this._sampleEditorModal);this._sampleEditorWidget.on("sample-edited",ev=>{notify_10.Notify.notify("",`Cropped "${ev.name}"`,"top","center","far fa-check-circle","success");"training"===this._category&&global_ui_4.GlobalUI.setRetrainInvalid();let tr=this._acquisitionTable.querySelector('tr[data-id="'+ev.id+'"]');tr&&tr.classList.contains("table-info")&&this.loadChartOrImage(tr)});this._sampleEditorWidget.on("length-changed",ev=>{var _a;null===(_a=this._aqVideo)||void 0===_a||_a.deleteFromCache(ev.id);this.updateLength(ev.id,ev.newLength,ev.isProcessing)});this._sampleEditorWidget.on("sample-segmented",async ev=>{await this.deleteFromUi(ev.id);notify_10.Notify.notify("",`Segmented "${ev.name}"`,"top","center","far fa-check-circle","success")});this._category=location.pathname.split("/").reverse()[0];if("training"!==this._category&&"testing"!==this._category&&"anomaly"!==this._category){console.warn("Category not recognized",this._category);this._category="training"}Number(document.querySelector("#evaluation").value);studioApi.socket.addEventListener("new-file-"+this._category,file=>{this.addNewFile(file)});studioApi.socket.addEventListener("raw-data-processed",msg=>{var _a;console.log("raw-data-processed",msg);let row=document.querySelector('tr.show-graph[data-id="'+msg.sampleId+'"]');if(!row)return;let aqLength=row.querySelector(".aq-length");if(aqLength){row.dataset.processingJobId=msg.processingJobId.toString();if("success"===msg.status){this.updateLength(msg.sampleId,msg.lengthMs,!1);row.dataset.isProcessing="0";null===(_a=this._aqVideo)||void 0===_a||_a.deleteFromCache(msg.sampleId);row.classList.contains("table-info")&&this.loadChartOrImage(row)}else if("failed"===msg.status){aqLength.title="Sample failed to process, click to show logs";aqLength.innerHTML='<i class="fas fa-times text-danger"></i>';row.dataset.isProcessing="1"}else if("in-progress"===msg.status){let spin=document.createElement("i");spin.classList.add("fas","fa-spinner","spin-animation");aqLength.title=`Sample is being processed (job ID: ${msg.processingJobId})`;aqLength.innerHTML="";aqLength.appendChild(spin)}}});this._labelTooltipEl=document.querySelector("#chart-tooltip-labels");document.body.appendChild(this._labelTooltipEl);this.renderLabelDoughnutChart();let samplesPerLabelEl=document.querySelector("#samples-per-label"),samplesPerLabel=JSON.parse(decodeURIComponent(samplesPerLabelEl.value));this.renderDatasetRatio(samplesPerLabel,void 0);let categoryName=document.querySelector("#input-category"),sampleLength=document.querySelector("#input-sample-length"),deviceIdEl=document.querySelector("#input-device"),deviceSnapshotStreamSection=document.querySelector("#input-sample-length-snapshot-stream"),deviceTimeseriesSection=document.querySelector("#input-sample-length-frequency-section");if(categoryName&&sampleLength&&deviceIdEl){categoryName.oninput=sampleLength.oninput=this._sampleFrequencies.oninput=ev=>{ev.currentTarget.classList.remove("is-invalid")};this._startSamplingBtn.onclick=async ev=>{ev.preventDefault();if(!categoryName||!sampleLength||!deviceIdEl)return;let valid=!0;if(deviceIdEl.value)deviceIdEl.classList.remove("is-invalid");else{deviceIdEl.classList.add("is-invalid");valid=!1}if(0!==categoryName.value.length&&/^[A-Za-z\s0-9-_]+$/.test(categoryName.value))categoryName.classList.remove("is-invalid");else{categoryName.classList.add("is-invalid");valid=!1}if(sampleLength.disabled||0!==sampleLength.value.length&&/^[0-9]+$/.test(sampleLength.value))sampleLength.classList.remove("is-invalid");else{sampleLength.classList.add("is-invalid");valid=!1}valid&&await this._startSamplingWidget.startSampling({category:this._category,name:categoryName.value,sampleLength:sampleLength.disabled?6e4:Number(sampleLength.value),sampleFrequency:Number(this._sampleFrequencies.value),deviceId:deviceIdEl.value,deviceName:deviceIdEl.selectedOptions.length>0?deviceIdEl.selectedOptions[0].textContent||"":deviceIdEl.value,sensor:this._sampleSensors.value||void 0})};if(deviceSnapshotStreamSection&&deviceTimeseriesSection){let deviceControlWidget=new device_control_widget_1.DeviceControlWidget(device,deviceIdEl,this._sampleSensors,this._sampleFrequencies,sampleLength,this._lastSelectedSensor,this._lastSelectedIntervalMs,deviceTimeseriesSection,deviceSnapshotStreamSection);deviceControlWidget.init();deviceControlWidget.on("device-connected",()=>{this._recordDataNoDevices.style.display="none";this._recordDataBody.style.display=""})}else console.error("Missing snapshot or timeseries section")}const filterLengthParent=document.querySelector("#filter-length-parent"),totalLengthNumber=Number(document.querySelector("#total-length-number").value);filterLengthParent.style.display=0===totalLengthNumber?"none":"";const sliderEl=document.querySelector("#filter-length-slider"),sliderLabelLow=document.querySelector("#filter-length-value-low"),sliderLabelHigh=document.querySelector("#filter-length-value-high"),opts={start:[0,Number(sliderLabelHigh.textContent)],connect:!0,step:1,range:{min:[0],max:[Number(sliderLabelHigh.textContent)]}};noUiSlider.create(sliderEl,opts);studioApi.socket.addEventListener("update-metadata-"+this._category,metadata=>{console.log("metadata",metadata);this._hasUnfilteredData=metadata.labels.length>0;let statsLength=document.querySelector("#stats-total-length");if(statsLength){statsLength.textContent=metadata.totalLength;statsLength.title=metadata.totalLength+" ("+metadata.labels.length+" classes)";statsLength.dataset.classesCount=metadata.labels.length.toString()}if(0===metadata.totalLengthNumber)filterLengthParent.style.display="none";else{filterLengthParent.style.display="";if(opts.range.max[0]<metadata.maxLength){opts.range.max=[metadata.maxLength];sliderEl.noUiSlider.updateOptions(opts)}}this._labelQueueCountEl&&(this._labelQueueCountEl.textContent=metadata.labelQueueCount+"");this.renderDatasetRatio(metadata.sampleCount,metadata.ratio);let metadataLabelsContainer=document.querySelector("#metadata-labels");metadataLabelsContainer.innerHTML="";let filterLabelsContainer=document.querySelector("#filter-labels-container"),filterLabelsItems=document.querySelector("#filter-labels-items");const newFilterLabelItems=document.createElement("div");for(let label of metadata.labels){let el=document.createElement("input");el.type="hidden";el.classList.add("data-summary");el.dataset.label=label.label;el.dataset.totalLength=label.totalLength+"";el.dataset.totalLengthStr=label.totalLengthStr;el.dataset.count=label.dataCount.toString();metadataLabelsContainer.appendChild(el);const labelEscaped=global_ui_4.GlobalUI.cssEscape(label.label),existingElement=document.querySelector('.filter-label-row[data-label="'+labelEscaped+'"]');if(existingElement){document.querySelector('label[for="filter-label-'+labelEscaped+'"]').textContent=`${label.label} (${label.dataCount})`;newFilterLabelItems.appendChild(existingElement)}else{const filterCheckbox=document.createElement("input");filterCheckbox.classList.add("custom-control-input","filter-label-checkbox");filterCheckbox.type="checkbox";filterCheckbox.id="filter-label-"+label.label;filterCheckbox.dataset.label=label.label;this._currentFilter&&"{}"!==JSON.stringify(this._currentFilter)||(filterCheckbox.checked=!0);filterCheckbox.onchange=async()=>{await this.updateFilterQuery()};const filterCheckboxLabel=document.createElement("label");filterCheckboxLabel.classList.add("custom-control-label");filterCheckboxLabel.setAttribute("for","filter-label-"+label.label);filterCheckboxLabel.textContent=`${label.label} (${label.dataCount})`;const filterCheckboxContainer=document.createElement("div");filterCheckboxContainer.classList.add("custom-control","custom-checkbox","mb-3");filterCheckboxContainer.appendChild(filterCheckbox);filterCheckboxContainer.appendChild(filterCheckboxLabel);const filterCheckboxRow=document.createElement("div");filterCheckboxRow.classList.add("col-12","filter-label-row");filterCheckboxRow.dataset.label=label.label;filterCheckboxRow.appendChild(filterCheckboxContainer);newFilterLabelItems.appendChild(filterCheckboxRow)}}filterLabelsContainer.innerHTML="";filterLabelsItems.remove();newFilterLabelItems.id="filter-labels-items";filterLabelsContainer.appendChild(newFilterLabelItems);this.renderLabelDoughnutChart();if(this._currentFilter&&"{}"!==JSON.stringify(this._currentFilter)){this.updateFilterQuery();this.updateUrlParameters(this._pagination.currentPage())}});if(location.hash.indexOf("load-graph")>-1){let id=(location.hash.match(/\bload-graph-(\d+)\b/)||[])[1];if(id){let tr=this._acquisitionTable.querySelector('tr[data-id="'+id+'"]');tr&&"none"!==tr.style.display&&this.loadChartOrImage(tr)}}window.history.replaceState(null,"",window.location.pathname);document.querySelector(".acquisition-table .compress a").onclick=ev=>{ev.preventDefault();this.moveTable("small")};document.querySelector(".acquisition-table .expand a").onclick=ev=>{ev.preventDefault();this.moveTable("big")};sliderEl.noUiSlider.on("update",value=>{sliderLabelLow.textContent=value[0].split(".")[0]+"ms";sliderLabelHigh.textContent=value[1].split(".")[0]+"ms";Number(value[0])>opts.range.min[0]||Number(value[1])<opts.range.max[0]?this._sliderLengthRange=[Number(value[0]),Number(value[1])]:this._sliderLengthRange=void 0});sliderEl.noUiSlider.on("change",async()=>{await this.updateFilterQuery()});sliderLabelLow.onclick=async()=>{let newValue=await notify_10.Notify.prompt("Filter by length","Enter a new minimum length value (in milliseconds) to filter out samples with a length shorter than the given length.","Change length",(this._sliderLengthRange?this._sliderLengthRange[0]:0).toString(),"question","info");if(newValue&&!isNaN(Number(newValue))){if(Number(newValue)<0)return;sliderEl.noUiSlider.set(Number(newValue));await this.updateFilterQuery()}};sliderLabelHigh.onclick=async()=>{let newValue=await notify_10.Notify.prompt("Filter by length","Enter a new maximum length value (in milliseconds) to filter out samples with a length longer than the given length.","Change length",(this._sliderLengthRange?this._sliderLengthRange[1]:1e4).toString(),"question","info");if(newValue&&!isNaN(Number(newValue))){let v=Number(newValue);if(v>opts.range.max[0]){opts.range.max[0]=v;sliderEl.noUiSlider.updateOptions(opts)}sliderEl.noUiSlider.set([null,Number(newValue)]);await this.updateFilterQuery()}};const filterSignature=document.querySelector("#filter-signature");filterSignature.onchange=async()=>{await this.updateFilterQuery()};const filterNameInput=document.querySelector("#filter-name-input");filterNameInput.oninput=async()=>{await this.updateFilterQuery()};const filterLabelCheckboxes=document.querySelectorAll(".filter-label-checkbox");for(const checkbox of filterLabelCheckboxes)checkbox.onchange=async()=>{await this.updateFilterQuery()};const filterDisabled=document.querySelector("#disabled-samples");filterDisabled.onchange=async()=>{await this.updateFilterQuery()};this._selectMultipleOptions=document.querySelector("#select-multiple-options");this._selectMultipleOptions.querySelector("#delete-multiple").onclick=async ev=>{ev.preventDefault();if(0===this._selectedState.selectedCount)return;const itemPlural=1!==this._selectedState.selectedCount?"items":"item";if(!await notify_10.Notify.confirm("Delete "+itemPlural,`Are you sure you want to delete ${this._selectedState.selectedCount} ${itemPlural}?`,"Yes, delete","question","danger"))return;const originalSelected=this._selectedState.selectedCount;let clearGraph=this._selectedState.allSelected;try{let res;if(this._selectedState.allSelected&&this._currentFilter)res=await this._studioApi.rawData.batchDelete(this._studioApi.projectId,this._category,this._currentFilter.labels,this._currentFilter.filename,this._currentFilter.maxLength,this._currentFilter.minLength,this._currentFilter.signatureValidity,this._currentFilter.includeDisabled,void 0);else if(this._selectedState.allSelected)res=await this._studioApi.rawData.batchDelete(this._studioApi.projectId,this._category);else{let selectedRow=this._acquisitionTable.querySelector("tr.table-info");if(selectedRow){let id=Number(selectedRow.dataset.id);this._selectedState.items.indexOf(id)>-1&&(clearGraph=!0)}const selectedIDs=encodeURIComponent(JSON.stringify(this._selectedState.items));res=await this._studioApi.rawData.batchDelete(this._studioApi.projectId,this._category,void 0,void 0,void 0,void 0,void 0,void 0,selectedIDs)}if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText;notify_10.Notify.notify("",`Deleted ${originalSelected} ${itemPlural}`,"top","center","far fa-check-circle","success");this._allDataCount-=originalSelected;this.clearSelection();this.updateSelectedCount();if(clearGraph){this._aqImage&&this._aqImage.clear();this._aqChart&&this._aqChart.clear();this._aqVideo&&this._aqVideo.clear();this._aqExtraUI.innerHTML="";this._aqExtraUI.style.display="none";this._timeSeriesChartDropdown&&this._timeSeriesChartDropdown.classList.add("d-none")}await this._pagination.updateNumberOfRows(this._allDataCount,!0)}catch(ex2){let ex=ex2;await notify_10.Notify.alert("Unable to delete samples",notify_10.Notify.extractMsg(ex),"danger")}};this._selectMultipleOptions.querySelector("#label-multiple").onclick=async ev=>{ev.preventDefault();if(0===this._selectedState.selectedCount)return;const itemPlural=1!==this._selectedState.selectedCount?"items":"item";let v=await notify_10.Notify.prompt("Edit label",`Enter a new label for ${this._selectedState.selectedCount} ${itemPlural}`,"Edit label","","question","info");if(!v)return;const originalSelected=this._selectedState.selectedCount,selectedItems=Array.from(this._selectedState.items);try{let res;if(this._selectedState.allSelected&&this._currentFilter)res=await this._studioApi.rawData.batchEditLabels(this._studioApi.projectId,this._category,{label:v},this._currentFilter.labels,this._currentFilter.filename,this._currentFilter.maxLength,this._currentFilter.minLength,this._currentFilter.signatureValidity,this._currentFilter.includeDisabled,void 0);else if(this._selectedState.allSelected)res=await this._studioApi.rawData.batchEditLabels(this._studioApi.projectId,this._category,{label:v});else{const selectedIDs=encodeURIComponent(JSON.stringify(this._selectedState.items));res=await this._studioApi.rawData.batchEditLabels(this._studioApi.projectId,this._category,{label:v},void 0,void 0,void 0,void 0,void 0,void 0,selectedIDs)}if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText;notify_10.Notify.notify("",`Changed label for ${originalSelected} ${itemPlural} to "${v}"`,"top","center","far fa-check-circle","success");for(const id of selectedItems)await this.editLabel(id,v,!1);this.clearSelection();this.updateSelectedCount()}catch(ex2){let ex=ex2;await notify_10.Notify.alert("Unable to delete samples",notify_10.Notify.extractMsg(ex),"danger")}};this._selectMultipleOptions.querySelector("#move-multiple").onclick=async ev=>{ev.preventDefault();if(0===this._selectedState.selectedCount)return;const itemPlural=1!==this._selectedState.selectedCount?"items":"item",targetDataset="training"===this._category?"testing":"training";if(!await notify_10.Notify.confirm(`Move to ${targetDataset} dataset`,`Are you sure you want to move ${this._selectedState.selectedCount} ${itemPlural} to the ${targetDataset} `+"dataset?","Yes, move","question","info"))return;const originalSelected=this._selectedState.selectedCount;let clearGraph=this._selectedState.allSelected;try{let res;if(this._selectedState.allSelected&&this._currentFilter)res=await this._studioApi.rawData.batchMove(this._studioApi.projectId,this._category,{newCategory:targetDataset},this._currentFilter.labels,this._currentFilter.filename,this._currentFilter.maxLength,this._currentFilter.minLength,this._currentFilter.signatureValidity,this._currentFilter.includeDisabled,void 0);else if(this._selectedState.allSelected)res=await this._studioApi.rawData.batchMove(this._studioApi.projectId,this._category,{newCategory:targetDataset});else{let selectedRow=this._acquisitionTable.querySelector("tr.table-info");if(selectedRow){let id=Number(selectedRow.dataset.id);this._selectedState.items.indexOf(id)>-1&&(clearGraph=!0)}const selectedIDs=encodeURIComponent(JSON.stringify(this._selectedState.items));res=await this._studioApi.rawData.batchMove(this._studioApi.projectId,this._category,{newCategory:targetDataset},void 0,void 0,void 0,void 0,void 0,void 0,selectedIDs)}if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText;notify_10.Notify.notify("",`Moved ${originalSelected} ${itemPlural}`,"top","center","far fa-check-circle","success");this._allDataCount-=originalSelected;this.clearSelection();this.updateSelectedCount();if(clearGraph){this._aqImage&&this._aqImage.clear();this._aqChart&&this._aqChart.clear();this._aqVideo&&this._aqVideo.clear();this._aqExtraUI.innerHTML="";this._aqExtraUI.style.display="none"}await this._pagination.updateNumberOfRows(this._allDataCount,!0)}catch(ex2){let ex=ex2;await notify_10.Notify.alert("Unable to move samples",notify_10.Notify.extractMsg(ex),"danger")}};this._selectMultipleOptions.querySelector("#disable-multiple").onclick=async ev=>{ev.preventDefault();if(0===this._selectedState.selectedCount)return;const selectedItems=Array.from(this._selectedState.items),originalSelected=this._selectedState.selectedCount,itemPlural=1!==this._selectedState.selectedCount?"items":"item";try{let res;if(this._selectedState.allSelected&&this._currentFilter)res=await this._studioApi.rawData.batchDisable(this._studioApi.projectId,this._category,this._currentFilter.labels,this._currentFilter.filename,this._currentFilter.maxLength,this._currentFilter.minLength,this._currentFilter.signatureValidity,this._currentFilter.includeDisabled,void 0);else if(this._selectedState.allSelected)res=await this._studioApi.rawData.batchDisable(this._studioApi.projectId,this._category);else{const selectedIDs=encodeURIComponent(JSON.stringify(this._selectedState.items));res=await this._studioApi.rawData.batchDisable(this._studioApi.projectId,this._category,void 0,void 0,void 0,void 0,void 0,void 0,selectedIDs)}if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText;for(const id of selectedItems){document.querySelector('tr.show-graph[data-id="'+id+'"]').classList.add("disabled")}notify_10.Notify.notify("",`Disabled ${originalSelected} ${itemPlural}`,"top","center","far fa-check-circle","success")}catch(ex2){console.log(ex2);let ex=ex2;await notify_10.Notify.alert("Unable to disable samples",notify_10.Notify.extractMsg(ex),"danger")}};this._selectMultipleOptions.querySelector("#enable-multiple").onclick=async ev=>{ev.preventDefault();if(0===this._selectedState.selectedCount)return;const selectedItems=Array.from(this._selectedState.items),originalSelected=this._selectedState.selectedCount,itemPlural=1!==this._selectedState.selectedCount?"items":"item";try{let res;if(this._selectedState.allSelected&&this._currentFilter)res=await this._studioApi.rawData.batchEnable(this._studioApi.projectId,this._category,this._currentFilter.labels,this._currentFilter.filename,this._currentFilter.maxLength,this._currentFilter.minLength,this._currentFilter.signatureValidity,void 0);else if(this._selectedState.allSelected)res=await this._studioApi.rawData.batchEnable(this._studioApi.projectId,this._category);else{const selectedIDs=encodeURIComponent(JSON.stringify(this._selectedState.items));res=await this._studioApi.rawData.batchEnable(this._studioApi.projectId,this._category,void 0,void 0,void 0,void 0,void 0,void 0,selectedIDs)}if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText;for(const id of selectedItems){document.querySelector('tr.show-graph[data-id="'+id+'"]').classList.remove("disabled")}notify_10.Notify.notify("",`Enabled ${originalSelected} ${itemPlural}`,"top","center","far fa-check-circle","success")}catch(ex2){console.log(ex2);let ex=ex2;await notify_10.Notify.alert("Unable to enable samples",notify_10.Notify.extractMsg(ex),"danger")}};const selectAll=document.querySelector("#select-all");selectAll.onchange=ev=>{ev.preventDefault();this._selectedState.allSelected=selectAll.checked;selectAll.checked?this.toggleSelection("all"):this.toggleSelection("none")};const selectMultipleButton=document.querySelector("#select-multiple-button");selectMultipleButton&&(selectMultipleButton.onclick=ev=>{ev.preventDefault();const selectMultipleText=selectMultipleButton.querySelector(".btn");if(selectMultipleText){this._selectedState.isSelecting=!this._selectedState.isSelecting;if(this._selectedState.isSelecting){this.showMultiSelectCheckboxes();selectMultipleText.classList.add("text-dark");selectMultipleText.classList.remove("text-gray")}else{this.hideMultiSelectCheckboxes();selectMultipleText.classList.remove("text-dark");selectMultipleText.classList.add("text-gray")}}});const filtersIndicator=document.querySelector("#filters-applied-indicator");document.querySelector("#cancel-filters").onclick=async ev=>{ev.preventDefault();filtersIndicator.style.display="none";sliderEl.noUiSlider.set([0,sliderEl.noUiSlider.options.range.max||1e4]);filterSignature.value="both";filterDisabled.value="both";filterNameInput.value="";const labelCheckboxes=document.querySelectorAll(".filter-label-checkbox");for(const checkbox of labelCheckboxes)checkbox.checked=!0;this._currentFilter=void 0;await this.updateFilterQuery();await this.updatePagination(1)};const urlPageNumber=document.querySelector("#url-page-number"),urlFilters=document.querySelector("#url-filters");if(urlFilters.value&&""!==urlFilters.value){this._currentFilter=JSON.parse(decodeURIComponent(urlFilters.value));filtersIndicator.style.display="";const labelCheckboxes=document.querySelectorAll(".filter-label-checkbox");if(this._currentFilter.labels){const labelsAsArray=JSON.parse(this._currentFilter.labels);for(const checkbox of labelCheckboxes){const checkboxInput=checkbox,checkboxLabel=checkboxInput.dataset.label;checkboxLabel&&(-1!==labelsAsArray.indexOf(checkboxLabel)?checkboxInput.checked=!0:checkboxInput.checked=!1)}}this._currentFilter.filename&&(filterNameInput.value=this._currentFilter.filename);this._currentFilter.signatureValidity&&(filterSignature.value=this._currentFilter.signatureValidity);this._currentFilter.includeDisabled&&(filterDisabled.value=this._currentFilter.includeDisabled);sliderEl.noUiSlider.set([this._currentFilter.minLength?this._currentFilter.minLength:null,this._currentFilter.maxLength?this._currentFilter.maxLength:null])}if(urlPageNumber.value&&""!==urlPageNumber.value){let pagination=this._pagination;(async()=>{const pageNumber=Number(urlPageNumber.value);if(pageNumber<1||pageNumber>pagination.getNumberOfPages())this.updateUrlParameters(1);else{await pagination.updateNumberOfRows(this._allDataCount,!1);await pagination.goToPage(pageNumber,!1,!1);this.updateUrlParameters(pageNumber)}})()}document.querySelectorAll(".prevent-default").forEach(element=>{element.onclick=ev=>{ev.preventDefault()}});for(let b of Array.from(document.querySelectorAll(".btn-open-tutorial")))b.onclick=()=>{$("#tutorial-data-collected-modal").modal("hide")};this.updateUIBasedOnItemCount(this._filteredDataCount>0);this._labeling=new bounding_box_labeling_1.BoundingBoxLabeling(this._studioApi,this._boundingBoxEls.imageContainerEl);this.highlightPieChart();let rebalanceButton=document.querySelector("#rebalance-project");rebalanceButton&&(rebalanceButton.onclick=async ev=>{if(!rebalanceButton)return;let origText=rebalanceButton.textContent;try{ev.preventDefault();$("#sample-imbalance-modal").modal("hide");rebalanceButton.disabled=!0;rebalanceButton.classList.add("disabled");rebalanceButton.textContent="Performing split...";this._studioApi.analytics.event("click",{event_category:"dashboard",event_label:"rebalance-project"});if(!await notify_10.Notify.confirm("Perform train / test split","Are you sure you want to rebalance your dataset? This splits all your data automatically between the training and testing set, and resets the categories for all data. This is irrevocable!","Yes, perform the train / test split","question","danger"))return;let v=await notify_10.Notify.prompt("Confirm",'Enter "perform split" to continue',"Perform train / test split","","question","danger");if(!v)return;if("perform split"!==v)throw new Error('Input does not match "perform split", aborting.');let d=await this._studioApi.rawData.rebalanceDataset(this._studioApi.projectId);if(!d.body||!d.body.success)throw d.body&&d.body.error||d.response.responseText;await notify_10.Notify.alert("Performed train / test split","Dataset was rebalanced!","success");location.reload()}catch(ex2){let ex=ex2;await notify_10.Notify.alert("Failed to perform train / test split",notify_10.Notify.extractMsg(ex),"danger")}finally{$("#sample-imbalance-modal").modal("show");rebalanceButton.disabled=!1;rebalanceButton.classList.remove("disabled");rebalanceButton.textContent=origText}});this._processingJobRunner=new job_runner_3.JobRunner(studioApi,document.querySelector("#processing-modal"));this._timeSeriesChartDropdown&&(this._timeSeriesChartDropdown.onclick=event=>{const parent=event.target.parentElement;for(const dropdownItem of Array.from(parent.querySelectorAll("a.dropdown-item")).map(a=>a))dropdownItem.onclick=async ev=>{dropdownItem.dataset.action&&ev.preventDefault();const sample=document.querySelector(`tr[data-id="${this._lastLoadedChart}"]`);try{switch(dropdownItem.dataset.action){case"crop-item":this._cropItem(sample);break;case"split-item":this._splitItem(sample)}this._studioApi.analytics.event("click",{event_category:`acquisition-${this._category}`,event_label:`${dropdownItem.dataset.action}-in-chart`})}catch(ex){notify_10.Notify.alert("Failed to complete action",notify_10.Notify.extractMsg(ex),"danger")}}})}async addNewFile(file){let addNewFileIx=++this._addNewFileIx;this._allDataCount++;if(1===this._pagination.currentPage()){let newTr=this.renderRow(file);newTr.classList.add("table-page-1");let tbody=this._acquisitionTable.querySelector("tbody");0===tbody.querySelectorAll("tr").length?tbody.appendChild(newTr):tbody.insertBefore(newTr,tbody.firstChild);let allTr=tbody.querySelectorAll("tr.table-page-1");allTr.length>this._pageSize&&tbody.removeChild(allTr[allTr.length-1])}await this._pagination.updateNumberOfRows(this._allDataCount,!1);this.updateUIBasedOnItemCount(!0);this._selectedState.isSelecting&&this.showMultiSelectCheckboxes();setTimeout(()=>{if(addNewFileIx!==this._addNewFileIx)return;let tr=this._acquisitionTable.querySelector('tr[data-id="'+file.id+'"]');tr&&"none"!==tr.style.display&&this.loadChartOrImage(tr)},200)}renderLabelDoughnutChart(){let labels=Array.from(document.querySelectorAll(".data-summary")).map(lEl=>({label:lEl.dataset.label||"",totalLength:Number(lEl.dataset.totalLength),totalLengthStr:lEl.dataset.totalLengthStr||"",dataCount:Number(lEl.dataset.count||0)})),chartEl=document.querySelector("#chart-labels");if(!chartEl)return console.error("Could not find #chart-labels");let colors=["#f5365c","#fb6340","#ffd600","#2dce89","#11cdef","#2bffc6"],options={type:"doughnut",options:{animation:void 0,cutoutPercentage:30,legend:{display:!1,position:"left",labels:{fontSize:8,padding:2}},tooltips:{mode:"point",callbacks:{label:(ttItem,data)=>{return labels[ttItem.index||0].totalLengthStr||""}},custom:model=>{if(0===model.opacity)return this.hideLabelTooltip();let title=model.title[0],label=labels.find(l=>l.label===title),labelIx=labels.findIndex(l=>l.label===title);if(!label||-1===labelIx)return console.log("Could not find label",title);this.updateLabelTooltip(label.label,colors[labelIx%colors.length],label.totalLengthStr);this.showLabelTooltip();const arrow=this._labelTooltipEl.querySelector(".arrow");let canvasTop=chartEl.getBoundingClientRect().top+window.scrollY,canvasLeft=chartEl.getBoundingClientRect().left+window.scrollX,tooltipWidth=this._labelTooltipEl.offsetWidth,tooltipHeight=this._labelTooltipEl.offsetHeight,top=canvasTop+model.caretY-tooltipHeight-16,left=canvasLeft+model.caretX-tooltipWidth/2;this._labelTooltipEl.style.top=top+"px";this._labelTooltipEl.style.left=left+"px";arrow.style.marginLeft=Math.floor(tooltipWidth/2-arrow.offsetWidth/2)+"px"}},onClick:async(ev,activeElements)=>{if(!this._labelChart||!(null==activeElements?void 0:activeElements.length))return;let label=activeElements[0]._model.label,numSelected=0,numLabels=document.querySelectorAll(".filter-label-checkbox").length,clearFilters=!1;document.querySelectorAll(".filter-label-checkbox").forEach(el=>{let l=el.getAttribute("data-label"),checked=el.checked;checked&&numSelected++;checked&&l===label&&(clearFilters=!0)});numSelected===numLabels?document.querySelectorAll(".filter-label-checkbox").forEach(el=>{el.getAttribute("data-label")!==label&&(el.checked=!1)}):document.querySelectorAll(".filter-label-checkbox").forEach(el=>{el.checked=clearFilters||el.getAttribute("data-label")===label});await this.updateFilterQuery()}},data:{labels:labels.map(l=>l.label||""),datasets:[{backgroundColor:labels.map((l,ix)=>colors[ix%colors.length]),borderColor:labels.map(l=>"#fff"),data:labels.map(l=>l.totalLength>0?l.totalLength:Number(l.dataCount)||0),borderWidth:labels.map(l=>1)}]}};if(this._labelChart){options.options&&(this._labelChart.options=options.options);options.data&&(this._labelChart.data=options.data);this._labelChart.update()}else this._labelChart=new Chart(chartEl,options)}renderDatasetRatio(samples,ratio){let container=document.querySelector("#data-ratio-container");if(!container)return console.warn("Cannot find #data-ratio-container");try{let useCount=void 0!==samples.find(d=>0===d.totalLengthMs),trainingDataSum=samples.filter(d=>"training"===d.category).map(d=>useCount?d.count:d.totalLengthMs).reduce((a,b)=>a+b,0),testingDataSum=samples.filter(d=>"testing"===d.category).map(d=>useCount?d.count:d.totalLengthMs).reduce((a,b)=>a+b,0);if(trainingDataSum+testingDataSum===0){container.style.display="none";return}let categoryData=[{category:"training",length:trainingDataSum,label:useCount?`${trainingDataSum} samples`:this.totalLengthToString(trainingDataSum)},{category:"testing",length:testingDataSum,label:useCount?`${testingDataSum} samples`:this.totalLengthToString(testingDataSum)}],labelCounts={};for(let d of samples){d.label in labelCounts||(labelCounts[d.label]={trainingCount:0,testingCount:0,totalSamples:0});if("training"===d.category){labelCounts[d.label].trainingCount=useCount?d.count:d.totalLengthMs;labelCounts[d.label].totalSamples+=d.count}else if("testing"===d.category){labelCounts[d.label].testingCount=useCount?d.count:d.totalLengthMs;labelCounts[d.label].totalSamples+=d.count}}let allRatioClasses=Object.entries(labelCounts).map(d=>({trainingRatio:d[1].trainingCount/((d[1].trainingCount+d[1].testingCount)/100),label:d[0],total:d[1].totalSamples,totalTraining:useCount?d[1].trainingCount:this.totalLengthToString(d[1].trainingCount),totalTrainingNum:d[1].trainingCount,totalTesting:useCount?d[1].testingCount:this.totalLengthToString(d[1].testingCount)}));allRatioClasses=allRatioClasses.filter(d=>d.totalTrainingNum>0);let invalidRatioClasses=allRatioClasses.filter(d=>Math.abs(d.trainingRatio-80)>15);const tooltipWarn=document.querySelector("#data-imbalance-tooltip-warn"),tooltipOk=document.querySelector("#data-imbalance-tooltip");if(0===invalidRatioClasses.length){tooltipOk.style.display="";tooltipWarn.style.display="none"}else{tooltipOk.style.display="none";tooltipWarn.style.display=""}let imbalanceProgressContainer=document.querySelector("#generated-progress-bars");for(let t of Array.from(imbalanceProgressContainer.querySelectorAll(".generated")))t.remove();let imbalanceText=document.querySelector("#imbalance-text");1===invalidRatioClasses.length?imbalanceText.textContent=`The '${invalidRatioClasses[0].label}' class has a poor train/test split ratio.`+" To fix this, add or move samples to the training or testing data.":invalidRatioClasses.length>1&&(imbalanceText.textContent="Some classes have a poor train/test split ratio: "+invalidRatioClasses.map(c=>c.label).join(", ")+". To fix this, add or move samples to the training or testing data.");let progressTemplate=imbalanceProgressContainer.querySelector("#progress-template");for(let c of allRatioClasses){let newBar=progressTemplate.cloneNode(!0);newBar.id=`progress-${c.label}`;newBar.classList.add("generated");c.trainingRatio=Math.round(c.trainingRatio);newBar.querySelector(".progress-percentage-span").textContent=`${c.trainingRatio}% / ${100-c.trainingRatio}% (${c.totalTraining} / ${c.totalTesting})`;newBar.querySelector(".progress-label-span").textContent=c.label;let progress=newBar.querySelector(".progress-bar");progress.style.width=`${c.trainingRatio}%`;Math.abs(c.trainingRatio-80)>15?progress.classList.add("bg-danger"):progress.classList.add("bg-success");newBar.style.display="initial";imbalanceProgressContainer.appendChild(newBar)}0===invalidRatioClasses.length||void 0!==allRatioClasses.find(d=>d.total<10)?document.querySelector("#rebalance-button-container").style.display="none":document.querySelector("#rebalance-button-container").style.display="initial";this.renderSplitDoughnutChart(categoryData,0===invalidRatioClasses.length);if(ratio){document.querySelector("#data-imbalance-ratio").textContent=`${ratio.training}% / ${ratio.testing}%`}container.style.display=""}catch(ex2){let ex=ex2;console.error("Finding dataset ratio failed",ex);container.style.display="none"}}renderSplitDoughnutChart(categoryData,dataSplitAppropriate){let chartEl=document.querySelector("#chart-split");if(!chartEl)return console.error("Could not find #chart-split");let colors=dataSplitAppropriate?["#2dce89","#11cdef"]:["#fb6340","#f5365c"],options={type:"doughnut",options:{animation:void 0,cutoutPercentage:30,legend:{display:!1,position:"left",labels:{fontSize:8,padding:2}},tooltips:{mode:"point",callbacks:{label:(ttItem,data)=>{return categoryData[ttItem.index||0].length.toString()||""}},custom:model=>{if(0===model.opacity)return this.hideLabelTooltip();let title=model.title[0],label=categoryData.find(l=>l.label===title),labelIx=categoryData.findIndex(l=>l.label===title);if(!label||-1===labelIx)return console.log("Could not find label",title);this.updateLabelTooltip(label.category,colors[labelIx],label.label||"");this.showLabelTooltip();const arrow=this._labelTooltipEl.querySelector(".arrow");let canvasTop=chartEl.getBoundingClientRect().top+window.scrollY,canvasLeft=chartEl.getBoundingClientRect().left+window.scrollX,tooltipWidth=this._labelTooltipEl.offsetWidth,tooltipHeight=this._labelTooltipEl.offsetHeight,top=canvasTop+model.caretY-tooltipHeight-16,left=canvasLeft+model.caretX-tooltipWidth/2;this._labelTooltipEl.style.top=top+"px";this._labelTooltipEl.style.left=left+"px";arrow.style.marginLeft=Math.floor(tooltipWidth/2-arrow.offsetWidth/2)+"px"}}},data:{labels:categoryData.map(l=>l.label||""),datasets:[{backgroundColor:categoryData.map((l,ix)=>colors[ix]),borderColor:categoryData.map(l=>"#fff"),data:categoryData.map(l=>Number(l.length)),borderWidth:categoryData.map(l=>1)}]}};if(this._splitRatioChart){options.options&&(this._splitRatioChart.options=options.options);options.data&&(this._splitRatioChart.data=options.data);this._splitRatioChart.update()}else this._splitRatioChart=new Chart(chartEl,options)}updateLabelTooltip(label,color,length){let header=this._labelTooltipEl.querySelector(".popover-header"),dot=this._labelTooltipEl.querySelector(".badge i"),content=this._labelTooltipEl.querySelector(".label-name");header.textContent=label;dot.style.backgroundColor=color;content.textContent=length}showLabelTooltip(){this._labelTooltipEl.style.display="block"}hideLabelTooltip(){this._labelTooltipEl.style.display="none"}bindRowHandler(r){r.onclick=ev=>{let tag=ev.target&&ev.target.tagName;if("I"!==tag&&"A"!==tag&&"INPUT"!==tag){this._selectedState.isSelecting||ev.preventDefault();this._studioApi.analytics.event("click",{event_category:"acquisition-"+this._category,event_label:"row"});this.loadChartOrImage(r)}};r.querySelector(".aq-length").onclick=async ev=>{let jobId=Number(r.dataset.processingJobId);if(!isNaN(jobId)){ev.preventDefault();ev.stopPropagation();await this._processingJobRunner.resumeJob(jobId,!0);$("#processing-modal").modal()}}}async loadChartOrImage(r){"image"===r.dataset.chartType?await this.loadImage(r):"video"===r.dataset.chartType?await this.loadVideo(r):await this.loadChart(r)}async loadChart(r){if(r.dataset.id&&this._aqChart&&this._aqImage&&this._aqVideo){for(let t of Array.from(document.querySelectorAll(".table-info")))t.classList.remove("table-info");r.classList.add("table-info");if("chart"!==this._lastLoadedGraph){this._aqImage.clear();this._aqVideo.clear()}try{await this._aqChart.load(Number(r.dataset.id),r.dataset.name);this._lastLoadedChart=Number(r.dataset.id);this._lastLoadedGraph="chart"}catch(ex2){let ex=ex2;await notify_10.Notify.alert("Failed to load graph",notify_10.Notify.extractMsg(ex),"danger")}}}async loadImage(r){if(r.dataset.id&&this._aqChart&&this._aqImage&&this._aqVideo){for(let t of Array.from(document.querySelectorAll(".table-info")))t.classList.remove("table-info");r.classList.add("table-info");if("image"!==this._lastLoadedGraph){this._aqChart.clear();this._aqVideo.clear()}try{await this._aqImage.load(Number(r.dataset.id),r.dataset.name);this._lastLoadedChart=Number(r.dataset.id);this._lastLoadedGraph="image"}catch(ex2){let ex=ex2;await notify_10.Notify.alert("Failed to load image",notify_10.Notify.extractMsg(ex),"danger")}}}async loadVideo(r){if(r.dataset.id&&this._aqChart&&this._aqVideo&&this._aqImage){for(let t of Array.from(document.querySelectorAll(".table-info")))t.classList.remove("table-info");r.classList.add("table-info");if("video"!==this._lastLoadedGraph){this._aqChart.clear();this._aqImage.clear()}try{await this._aqVideo.load(Number(r.dataset.id),r.dataset.name);this._lastLoadedChart=Number(r.dataset.id);this._lastLoadedGraph="video"}catch(ex2){let ex=ex2;await notify_10.Notify.alert("Failed to load video",notify_10.Notify.extractMsg(ex),"danger")}}}_showEditModal(typ,r){if(void 0!==r){this._sampleEditorWidget.setCurrentSample({id:Number(r.dataset.id),name:r.dataset.name||"",deviceName:"",label:r.dataset.label||"",mode:"video"===r.dataset.chartType?"video":"time-series"});this._aqChart&&this._aqChart.removeFromCache(Number(r.dataset.id));this._sampleEditorWidget.showEditModal(typ)}}_cropItem(r){this._showEditModal("crop",r)}_splitItem(r){this._showEditModal("segment",r)}bindDropdown(r){for(let d of Array.from(r.querySelectorAll("a.dropdown-item")).map(a=>a)){let id=Number(r.dataset.id);d.onclick=async ev=>{d.dataset.action&&ev.preventDefault();try{switch(d.dataset.action){case"rename":{let v=await notify_10.Notify.prompt("Renaming "+(r.dataset.name||""),`Enter a new name for "${r.dataset.name}"`,"Rename",r.dataset.name||"","question","info");v&&r.dataset.name&&this.rename(id,v);break}case"delete":await notify_10.Notify.confirm("Deleting "+(r.dataset.name||""),`Are you sure you want to delete "${r.dataset.name}"?`,"Yes, delete","question","danger")&&r.dataset.name&&this.delete(id,r.dataset.name);break;case"edit-label":if(this._studioApi.isObjectDetection)this.showObjectDetectionEditLabel(id);else{let v=await notify_10.Notify.prompt("Edit label",`Enter a new label for "${r.dataset.name}"`,"Edit label",r.dataset.label||"","question","info");v&&r.dataset.label&&this.editLabel(id,v)}break;case"move-to-training":await notify_10.Notify.confirm("Move to training dataset",`Are you sure you want to move "${r.dataset.name}" to the training dataset?`,"Yes, move","question","info")&&r.dataset.name&&this.move(id,r.dataset.name,"training");break;case"move-to-classification":await notify_10.Notify.confirm("Move to testing dataset",`Are you sure you want to move "${r.dataset.name}" to the testing dataset?`,"Yes, move","question","info")&&r.dataset.name&&this.move(id,r.dataset.name,"testing");break;case"move-to-anomaly":await notify_10.Notify.confirm("Move to anomaly dataset",`Are you sure you want to move "${r.dataset.name}" to the anomaly dataset?`,"Yes, move","question","info")&&r.dataset.name&&this.move(id,r.dataset.name,"anomaly");break;case"crop-item":this._cropItem(r);break;case"split-item":this._splitItem(r);break;case"split-item-into-frames":await notify_10.Notify.confirm("Split "+(r.dataset.name||"")+" into frames",`Are you sure you want to split "${r.dataset.name}" into individual images? `+"This will remove the original sample.","Yes, split","question","info")&&r.dataset.name&&this.splitIntoFrames(id,r.dataset.name,!0);break;case"enable-item":this.enableSample(id);break;case"disable-item":this.disableSample(id)}this._studioApi.analytics.event("click",{event_category:"acquisition-"+this._category,event_label:d.dataset.action})}catch(ex2){let ex=ex2;notify_10.Notify.alert("Failed to complete action",notify_10.Notify.extractMsg(ex),"danger")}}}}async delete(id,name,showNotification=!0){try{let{response:response,body:body}=await this._studioApi.rawData.deleteSample(this._studioApi.projectId,id);if(!body.success)throw new Error(body.error||response.statusText);await this.deleteFromUi(id);showNotification&&notify_10.Notify.notify("",'Removed "'+name+'"',"top","center","far fa-check-circle","success")}catch(ex2){let ex=ex2;console.error("Delete failed",ex);notify_10.Notify.alert("Failed to delete item",notify_10.Notify.extractMsg(ex),"danger")}}async splitIntoFrames(id,name,showNotification=!0){try{showNotification&&notify_10.Notify.notify("",'Splitting "'+name+'" into individual frames...',"top","center","fas fa-spinner spin-animation","info",3e5);let{response:response,body:body}=await this._studioApi.rawData.splitSampleInFrames(this._studioApi.projectId,id);if(!body.success)throw new Error(body.error||response.statusText);await this.deleteFromUi(id);showNotification&&notify_10.Notify.notify("",'Split "'+name+'" into individual frames',"top","center","far fa-check-circle","success")}catch(ex2){let ex=ex2;console.error("Split failed",ex);notify_10.Notify.alert("Failed to split item",notify_10.Notify.extractMsg(ex),"danger")}}async deleteFromUi(id){if(this._lastLoadedChart===id){this._aqChart&&this._aqChart.clear();this._aqImage&&this._aqImage.clear();this._aqVideo&&this._aqVideo.clear();this._aqExtraUI.innerHTML="";this._aqExtraUI.style.display="none";this._timeSeriesChartDropdown&&this._timeSeriesChartDropdown.classList.add("d-none")}"training"===this._category&&global_ui_4.GlobalUI.setRetrainInvalid();this._allDataCount--;await this._pagination.updateNumberOfRows(this._allDataCount,!0);let el=document.querySelector('tr[data-id="'+id+'"]');el&&el.parentNode&&el.parentNode.removeChild(el)}async rename(id,newName){let tr=document.querySelector('tr.show-graph[data-id="'+id+'"]');if(!tr)return console.error("Could not find item in table!");try{let{response:response,body:body}=await this._studioApi.rawData.renameSample(this._studioApi.projectId,id,{name:newName});if(!body.success)throw new Error(body.error||response.statusText);let aqName=tr.querySelector(".aq-name");aqName&&(aqName.textContent=newName);tr.dataset.name=newName}catch(ex2){let ex=ex2;console.error("Rename failed",ex);notify_10.Notify.alert("Failed to rename item",notify_10.Notify.extractMsg(ex),"danger")}}updateLength(id,newLength,isProcessing){let tr=document.querySelector('tr.show-graph[data-id="'+id+'"]');if(!tr)return;let aqLength=tr.querySelector(".aq-length");if(!aqLength)return;let lengthString=this.totalLengthToString(newLength);if(isProcessing){let spin=document.createElement("i");spin.classList.add("fas","fa-spinner","spin-animation");aqLength.title="Sample is being processed";aqLength.innerHTML="";aqLength.appendChild(spin)}else aqLength.textContent=aqLength.title=lengthString;tr.dataset.length=lengthString;tr.dataset.isProcessing=isProcessing?"1":"0"}async editLabel(id,newLabel,callApi=!0){let tr=document.querySelector('tr.show-graph[data-id="'+id+'"]');if(!tr)return console.error("Could not find item in table!");try{if(callApi){let{response:response,body:body}=await this._studioApi.rawData.editLabel(this._studioApi.projectId,id,{label:newLabel});if(!body.success)throw new Error(body.error||response.statusText)}"training"===this._category&&global_ui_4.GlobalUI.setRetrainInvalid();if(!tr)return;let aqCategory=tr.querySelector(".aq-category");if(aqCategory){aqCategory.textContent=newLabel;aqCategory.setAttribute("title",newLabel)}tr.dataset.label=newLabel}catch(ex2){let ex=ex2;console.error("Editing label failed",ex);notify_10.Notify.alert("Failed to edit label",notify_10.Notify.extractMsg(ex),"danger")}}async move(id,name,newCategory,showNotification=!0){try{let r=await this._studioApi.rawData.moveSample(this._studioApi.projectId,id,{newCategory:newCategory});if(!r.body||!r.body.success)throw r.body&&r.body.error||r.response.responseText;this._lastLoadedChart===id&&this._aqChart&&this._aqChart.clear();"training"===this._category&&global_ui_4.GlobalUI.setRetrainInvalid();this._allDataCount--;await this._pagination.updateNumberOfRows(this._allDataCount,!0);let el=document.querySelector('tr[data-id="'+id+'"]');el&&el.parentNode&&el.parentNode.removeChild(el);showNotification&&notify_10.Notify.notify("",'Moved "'+name+'" to the '+newCategory+" dataset","top","center","far fa-check-circle","success")}catch(ex2){let ex=ex2;console.error("Moving sample failed",ex);notify_10.Notify.alert("Failed to move sample",notify_10.Notify.extractMsg(ex),"danger")}}moveTable(where){const table=document.querySelector(".acquisition-table"),big=document.querySelector("#acquisition-table-container-big"),small=document.querySelector("#acquisition-table-container-small");if(!table||!big||!small)return console.error("Could not move table, cannot find element");if("big"===where){big.appendChild(table);big.style.display="";small.style.display="none"}else{small.appendChild(table);small.style.display="";big.style.display="none"}table.scrollIntoView();this._studioApi.analytics.event("click",{event_category:"acquisition-"+this._category,event_label:"move-table-"+where})}async renderPage(page){try{let tbody=this._acquisitionTable.querySelector("tbody");if(!tbody)return;let renderPageId=++this._renderPageId,aqChartSelected=this._aqChart&&this._aqChart.getLoadedSampleId();this._currentFilter||(this._currentFilter={filename:void 0,labels:void 0,minLength:void 0,maxLength:void 0,signatureValidity:void 0,includeDisabled:void 0});let samples=await this._studioApi.rawData.listSamples(this._studioApi.projectId,this._category,this._pageSize,(page-1)*this._pageSize,void 0,this._currentFilter.labels,this._currentFilter.filename,this._currentFilter.maxLength,this._currentFilter.minLength,this._currentFilter.signatureValidity,this._currentFilter.includeDisabled);if(renderPageId!==this._renderPageId)return;if(!samples.body||!samples.body.success)throw new Error(samples.body&&samples.body.error||samples.response.responseText);if(JSON.stringify(this._currentFilter)!==JSON.stringify(this._previousFilter)){const sampleCount=await this._studioApi.rawData.countSamples(this._studioApi.projectId,this._category,this._currentFilter.labels,this._currentFilter.filename,this._currentFilter.maxLength,this._currentFilter.minLength,this._currentFilter.signatureValidity,this._currentFilter.includeDisabled);if(renderPageId!==this._renderPageId)return;if(!sampleCount.body||!sampleCount.body.success)throw new Error(sampleCount.body&&sampleCount.body.error||sampleCount.response.responseText);this._allDataCount=Number(sampleCount.body.count)}this._previousFilter=Object.assign(this._currentFilter);tbody.innerHTML="";this.updateUrlParameters(page);for(let v of samples.body.samples){let tr=this.renderDBRow(v);tr.dataset.page=page.toString();tr.classList.add("table-page-"+page);aqChartSelected===v.id&&tr.classList.add("table-info");tbody.appendChild(tr)}this._selectedState.isSelecting&&this.showMultiSelectCheckboxes();this.updateUIBasedOnItemCount(samples.body.samples.length>0)}catch(ex2){let ex=ex2;notify_10.Notify.alert("Failed to load page",notify_10.Notify.extractMsg(ex),"danger")}}updateUIBasedOnItemCount(hasItemsOnPage){const filterNoResultsDiv=document.querySelector("#filter-no-results"),noResultsDiv=document.querySelector("#no-results"),tableDiv=document.querySelector("#results-table"),cardFooter=document.querySelector(".card-footer"),changeTableSizeButton=document.querySelector("#change-table-size-button"),selectFilterButton=document.querySelector("#select-filter-button"),selectMultipleButton=document.querySelector("#select-multiple-button");if(0!==this._allDataCount||this._hasUnfilteredData){changeTableSizeButton.style.display="";selectFilterButton&&(selectFilterButton.style.display="");selectMultipleButton&&(selectMultipleButton.style.display="")}else{changeTableSizeButton.style.display="none";selectFilterButton&&(selectFilterButton.style.display="none");selectMultipleButton&&(selectMultipleButton.style.display="none")}if(0===this._allDataCount){let b=selectMultipleButton&&selectMultipleButton.querySelector("a.btn");if(!this._hasUnfilteredData){if(b){b.classList.remove("text-dark");b.classList.add("text-gray")}this.hideMultiSelectCheckboxes();this._selectedState.isSelecting=!1;selectFilterButton&&"true"===selectFilterButton.getAttribute("aria-expanded")&&selectFilterButton.click()}this._selectMultipleOptions.style.display="none"}else this._selectedState.isSelecting&&(this._selectMultipleOptions.style.display="");if(hasItemsOnPage){filterNoResultsDiv.style.display="none";noResultsDiv.style.display="none";tableDiv.style.display="";cardFooter.style.display="";this._rawDataChartContainer.classList.remove("d-none");this._dataCollectedContainer.classList.remove("d-none")}else{if(this._hasUnfilteredData){noResultsDiv.style.display="none";filterNoResultsDiv.style.display=""}else{noResultsDiv.style.display="";filterNoResultsDiv.style.display="none";this._dataCollectedContainer.classList.add("d-none");this._rawDataChartContainer.classList.add("d-none")}tableDiv.style.display="none";cardFooter.style.display="none"}}highlightPieChart(){var _a,_b;const labelsCheckboxes=document.querySelectorAll(".filter-label-checkbox");let labels=[];for(const checkbox of labelsCheckboxes){const labelCheckbox=checkbox;labelCheckbox.checked&&labelCheckbox.dataset.label&&labels.push(labelCheckbox.dataset.label)}let oneSelected=1===labels.length,allMeta=(null===(_a=this._labelChart)||void 0===_a?void 0:_a.getDatasetMeta(0).data)||[];for(let m of allMeta){let cbLabel=m._model.label,highlight=-1!==labels.indexOf(cbLabel)&&1===labels.length;m._model.outerRadius=highlight&&oneSelected||!oneSelected?25:20}null===(_b=this._labelChart)||void 0===_b||_b.render()}renderRow(file){let newTr=this._rowTemplate.cloneNode(!0),label=file.label;this._studioApi.isObjectDetection&&(label=file.boundingBoxes.map(b=>b.label).sort().join(", ")||"-");newTr.dataset.name=file.name;newTr.dataset.id=file.id.toString();newTr.dataset.label=label;newTr.dataset.chartType=file.chartType;newTr.dataset.length=file.length_ms;newTr.dataset.isProcessing=file.isProcessing?"1":"0";"number"==typeof file.processingJobId&&(newTr.dataset.processingJobId=file.processingJobId.toString());file.isDisabled&&newTr.classList.add("disabled");let aqName=newTr.querySelector(".aq-name"),aqCat=newTr.querySelector(".aq-category"),aqCreated=newTr.querySelector(".aq-created"),aqLength=newTr.querySelector(".aq-length"),aqDevice=newTr.querySelector(".aq-device-name"),aqSignature=newTr.querySelector(".aq-signature"),aqAdded=newTr.querySelector(".aq-added"),aqSensors=newTr.querySelector(".aq-sensors"),aqDownload=newTr.querySelector(".aq-download"),aqDownloadWav=newTr.querySelector(".aq-download-wav"),aqDownloadMp4=newTr.querySelector(".aq-download-mp4"),aqEnable=newTr.querySelector(".aq-enable"),aqDisable=newTr.querySelector(".aq-disable");if(aqName){aqName.textContent=file.name;aqName.title=file.name+" (stored as: "+file.coldstorageFileName+")"}aqCat&&(aqCat.textContent=aqCat.title=label);if(aqCreated){aqCreated.textContent=aqCreated.title=global_ui_4.GlobalUI.getFriendlyDateString(file.created);aqCreated.dataset.friendlyDate=file.created.toString()}if(aqLength)if(file.processingError){aqLength.title="Sample failed to process, click to show logs";aqLength.innerHTML='<i class="fas fa-times text-danger"></i>'}else if(file.isProcessing){let spin=document.createElement("i");spin.classList.add("fas","fa-spinner","spin-animation");aqLength.title="Sample is being processed ";file.processingJobId?aqLength.title+=`(job ID: ${file.processingJobId})`:aqLength.title+="(no job scheduled yet)";aqLength.innerHTML="";aqLength.appendChild(spin)}else aqLength.textContent=aqLength.title=file.length_ms;aqDevice&&(aqDevice.textContent=aqDevice.title=file.deviceName);if(aqSignature){aqSignature.textContent=file.signatureMethod;aqSignature.title=file.signatureKeyString;file.signatureValid?aqSignature.innerHTML+='<i class="far fa-check-circle pl-1"></i>':aqSignature.innerHTML+='<i class="far fa-times-circle pl-1"></i>'}if(aqAdded){aqAdded.textContent=aqAdded.title=global_ui_4.GlobalUI.getFriendlyDateString(file.added);aqAdded.dataset.friendlyDate=file.added.toString()}if(aqSensors){aqSensors.textContent=aqSensors.title=file.sensorsShort;aqSensors.title=file.sensorsFull}aqDownload&&(aqDownload.href=`/v1/api/${this._studioApi.projectId}/raw-data/${file.id}/raw`);if(aqDownloadWav){aqDownloadWav.href=`/v1/api/${this._studioApi.projectId}/raw-data/${file.id}/wav?axisIx=0`;aqDownloadWav.style.display=file.showWavDownload?"":"none"}if(aqDownloadMp4){aqDownloadMp4.href=`/v1/api/${this._studioApi.projectId}/raw-data/${file.id}/video`;aqDownloadMp4.style.display=file.showMp4Download?"":"none"}aqEnable&&(aqEnable.style.display=file.isDisabled?"":"none");aqDisable&&(aqDisable.style.display=file.isDisabled?"none":"");this.bindRowHandler(newTr);this.bindDropdown(newTr);const cropButton=newTr.querySelector(".aq-crop");cropButton&&(cropButton.style.display=file.showCropSample?"":"none");const splitButton=newTr.querySelector(".aq-split");splitButton&&(splitButton.style.display=file.showSplitSample?"":"none");const splitIntoFramesButton=newTr.querySelector(".aq-split-into-frames");splitIntoFramesButton&&(splitIntoFramesButton.style.display=file.showSplitIntoFramesSample?"":"none");return newTr}renderDBRow(s){let chartType="chart";s.sensors.some(z=>"image"===z.name)?chartType="image":s.sensors.some(z=>"video"===z.name)&&(chartType="video");return this.renderRow({id:s.id,name:s.filename,created:s.created,label:s.label,length_ms:0===s.totalLengthMs?"-":this.totalLengthToString(s.totalLengthMs||0),added:s.added,deviceName:s.deviceName||"",signatureMethod:s.signatureMethod||"none",signatureValid:s.signatureValidate,signatureKeyString:s.signatureKey?"Signed with "+s.signatureKey:"Not signed, or signature invalid",sensorsShort:s.sensors.map(n=>n.name).join(", ")+(0===s.totalLengthMs?"":" @ "+s.frequency+"Hz"),sensorsFull:s.sensors.map(n=>n.name+" ("+n.units+")").join(", ")+(0===s.totalLengthMs?"":", "+s.frequency+" Hz"),showWavDownload:s.sensors.some(x=>"wav"===x.units),showMp4Download:s.sensors.some(x=>"video"===x.name),showCropSample:!s.sensors.some(z=>"image"===z.name),showSplitSample:!s.sensors.some(z=>"image"===z.name)&&!s.sensors.some(z=>"video"===z.name),showSplitIntoFramesSample:s.sensors.some(x=>"video"===x.name),coldstorageFileName:s.coldstorageFilename,chartType:chartType,boundingBoxes:s.boundingBoxes,page:0,isDisabled:s.isDisabled,isProcessing:s.isProcessing,processingJobId:s.processingJobId||null,processingError:s.processingError})}totalLengthToString(length){let totalLength=Math.round((length||0)/1e3),hours=Math.floor(totalLength/3600);totalLength-=3600*hours;let minutes=Math.floor(totalLength/60);totalLength-=60*minutes;let tt="";hours>0&&(tt+=hours+"h ");(hours>0||minutes>0)&&(tt+=minutes+"m ");tt+=Math.floor(totalLength)+"s ";return tt.trim()}showMultiSelectCheckboxes(){this._acquisitionTable.classList.add("show-checkboxes");const tableBody=this._acquisitionTable.querySelector("tbody"),selectAllButton=document.querySelector("#select-all"),tableRows=tableBody.querySelectorAll("tr");this._selectMultipleOptions.style.display="";selectAllButton.style.display="";for(const row of tableRows){const checkboxCell=row.querySelector(".aq-checkbox");checkboxCell.innerHTML="";const checkbox=document.createElement("input");checkbox.type="checkbox";checkbox.id="select-"+row.dataset.id;checkboxCell.appendChild(checkbox);if(this._selectedState.allSelected&&-1===this._selectedState.items.indexOf(Number(row.dataset.id))){checkbox.checked=!0;this._selectedState.items.push(Number(row.dataset.id))}else-1!==this._selectedState.items.indexOf(Number(row.dataset.id))&&(checkbox.checked=!0);checkbox.onchange=()=>{if(checkbox.checked){this._selectedState.items.push(Number(row.dataset.id));this._selectedState.selectedCount++}else{const itemIndex=this._selectedState.items.indexOf(Number(row.dataset.id));-1!==itemIndex&&this._selectedState.items.splice(itemIndex,1);this._selectedState.selectedCount--;this._selectedState.allSelected=!1}this.updateSelectedCount()}}this.updateSelectedCount();this._acquisitionTable.querySelector(".aq-th-checkbox").classList.remove("collapsed-column")}hideMultiSelectCheckboxes(){this._acquisitionTable.classList.remove("show-checkboxes");this.clearSelection();const tableBody=this._acquisitionTable.querySelector("tbody"),selectAllButton=document.querySelector("#select-all"),tableRows=tableBody.querySelectorAll("tr");this._selectMultipleOptions.style.display="none";selectAllButton.style.display="none";for(const row of tableRows){row.querySelector(".aq-checkbox").innerHTML=""}this._acquisitionTable.querySelector(".aq-th-checkbox").classList.add("collapsed-column")}updateSelectedCount(){this._selectedState.items.length===Number(this._allDataCount)&&0!==this._selectedState.items.length&&(this._selectedState.allSelected=!0);$("#select-all").prop("checked",this._selectedState.allSelected);this._selectedState.allSelected?this._selectedState.selectedCount=this._allDataCount:this._selectedState.selectedCount=this._selectedState.items.length;const countSpans=this._selectMultipleOptions.querySelectorAll(".selected-items-count");for(const span of countSpans)span.textContent=this._selectedState.selectedCount.toString();const multipleOptionButtons=this._selectMultipleOptions.querySelectorAll(".requires-multiple-selected");for(const button of multipleOptionButtons)0===this._selectedState.selectedCount?button.classList.add("disabled"):button.classList.remove("disabled")}toggleSelection(select){"none"===select&&this.clearSelection();const tableRows=this._acquisitionTable.querySelector("tbody").querySelectorAll("tr");for(const row of tableRows){$("#select-"+row.dataset.id).prop("checked","all"===select);"all"===select&&-1===this._selectedState.items.indexOf(Number(row.dataset.id))&&this._selectedState.items.push(Number(row.dataset.id))}this.updateSelectedCount()}async updateFilterQuery(reload=!0){var _a,_b;const nameInput=document.querySelector("#filter-name-input"),signatureValidInput=document.querySelector("#filter-signature"),labelsCheckboxes=document.querySelectorAll(".filter-label-checkbox"),disabledSamplesInput=document.querySelector("#disabled-samples");let labels=[];for(const checkbox of labelsCheckboxes){const labelCheckbox=checkbox;labelCheckbox.checked&&labelCheckbox.dataset.label&&labels.push(labelCheckbox.dataset.label)}let oneSelected=1===labels.length,allMeta=(null===(_a=this._labelChart)||void 0===_a?void 0:_a.getDatasetMeta(0).data)||[];for(let m of allMeta){let cbLabel=m._model.label,highlight=-1!==labels.indexOf(cbLabel)&&1===labels.length;m._model.outerRadius=highlight&&oneSelected||!oneSelected?25:20}null===(_b=this._labelChart)||void 0===_b||_b.render();this._currentFilter={filename:""!==nameInput.value?nameInput.value:void 0,labels:JSON.stringify(labels),maxLength:this._sliderLengthRange?this._sliderLengthRange[1]:void 0,minLength:this._sliderLengthRange?this._sliderLengthRange[0]:void 0,signatureValidity:signatureValidInput.value,includeDisabled:disabledSamplesInput.value};void 0===this._currentFilter.filename&&void 0===this._currentFilter.maxLength&&void 0===this._currentFilter.minLength&&"both"===this._currentFilter.signatureValidity&&"both"===this._currentFilter.includeDisabled&&labels.length===labelsCheckboxes.length&&(this._currentFilter=void 0);this.toggleSelection("none");if(reload){void 0!==this._currentFilter?document.querySelector("#filters-applied-indicator").style.display="":document.querySelector("#filters-applied-indicator").style.display="none";await this.updatePagination(1)}}async updatePagination(pageNumber){await this.renderPage(pageNumber);await this._pagination.updateNumberOfRows(this._allDataCount,!1);await this._pagination.goToPage(pageNumber,!1)}updateUrlParameters(pageNumber){const filterString=Object.keys(JSON.parse(JSON.stringify(this._currentFilter||{}))).length>0?"&filters="+encodeURIComponent(JSON.stringify(this._currentFilter)):"";window.history.replaceState(null,"",`${window.location.pathname}?page=${pageNumber}${filterString}`)}clearSelection(){this._selectedState={isSelecting:this._selectedState.isSelecting,allSelected:!1,items:[],selectedCount:0}}async showObjectDetectionEditLabel(id){try{let sample=await this._studioApi.rawData.getSample(this._studioApi.projectId,id);if(!sample.body||!sample.body.success)throw new Error(sample.body&&sample.body.error||sample.response.responseText);this._labeling.setCurrentSample(id,sample.body.sample.boundingBoxes);this._boundingBoxEls.sampleName.textContent=sample.body.sample.filename;$(this._boundingBoxEls.modal).modal();this._boundingBoxEls.saveBtn.onclick=async ev=>{let currText=this._boundingBoxEls.saveBtn.textContent;try{this._boundingBoxEls.saveBtn.textContent="Saving labels...";this._boundingBoxEls.saveBtn.classList.add("disabled");let labels=this._labeling.getCurrentBoundingBoxes().map(x=>x.label).sort().join(", ")||"-";await this._labeling.saveCurrentSample();$(this._boundingBoxEls.modal).modal("hide");let category=this._acquisitionTable.querySelector('tr[data-id="'+id+'"] .aq-category');category&&(category.textContent=category.title=labels);this._aqImage&&await this._aqImage.load(Number(id),sample.body.sample.filename,!0)}catch(ex2){let ex=ex2;await notify_10.Notify.alert("Failed to load labels",notify_10.Notify.extractMsg(ex),"danger")}finally{this._boundingBoxEls.saveBtn.classList.remove("disabled");this._boundingBoxEls.saveBtn.textContent=currText}}}catch(ex2){let ex=ex2;await notify_10.Notify.alert("Failed to load labels",notify_10.Notify.extractMsg(ex),"danger")}}async enableSample(id){try{let r=await this._studioApi.rawData.enableSample(this._studioApi.projectId,id);if(!r.body||!r.body.success)throw r.body&&r.body.error||r.response.responseText;let tr=document.querySelector('tr.show-graph[data-id="'+id+'"]'),aqEnable=tr.querySelector(".aq-enable"),aqDisable=tr.querySelector(".aq-disable");tr.classList.remove("disabled");aqEnable.style.display="none";aqDisable.style.display="";let nameEl=tr.querySelector(".aq-name");notify_10.Notify.notify("",'Enabled "'+nameEl.textContent+'"',"top","center","far fa-check-circle","success")}catch(ex2){let ex=ex2;console.error("Enabling sample failed",ex);notify_10.Notify.alert("Failed to enable sample",notify_10.Notify.extractMsg(ex),"danger")}}async disableSample(id){try{let r=await this._studioApi.rawData.disableSample(this._studioApi.projectId,id);if(!r.body||!r.body.success)throw r.body&&r.body.error||r.response.responseText;let tr=document.querySelector('tr.show-graph[data-id="'+id+'"]'),aqEnable=tr.querySelector(".aq-enable"),aqDisable=tr.querySelector(".aq-disable");tr.classList.add("disabled");aqEnable.style.display="";aqDisable.style.display="none";let nameEl=tr.querySelector(".aq-name");notify_10.Notify.notify("",'Disabled "'+nameEl.textContent+'"',"top","center","far fa-check-circle","success")}catch(ex2){let ex=ex2;console.error("Disabling sample failed",ex);notify_10.Notify.alert("Failed to disable sample",notify_10.Notify.extractMsg(ex),"danger")}}}}));define("shared/wav-helper",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.WavHelper=void 0;class WavHelper{static buildWavFileBuffer(intervalMs,data,axisIx){if(data.length>0&&"number"==typeof data[0]&&0!==axisIx)throw new Error("buildWavFileBuffer can only use array when axisIx is 0 (but was "+axisIx+")");let wavFreq=1/intervalMs*1e3,fileSize=44+2*data.length,dataSize=2*data.length,srBpsC8=16*wavFreq*1/8,headerArr=new Uint8Array(44),h=[82,73,70,70,255&fileSize,fileSize>>8&255,fileSize>>16&255,fileSize>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,1,0,255&wavFreq,wavFreq>>8&255,wavFreq>>16&255,wavFreq>>24&255,255&srBpsC8,srBpsC8>>8&255,srBpsC8>>16&255,srBpsC8>>24&255,2,0,16,0,100,97,116,97,255&dataSize,dataSize>>8&255,dataSize>>16&255,dataSize>>24&255];for(let hx=0;hx<44;hx++)headerArr[hx]=h[hx];let bodyArr=new Int16Array(data.length),bx=0;for(let row of data){bodyArr[bx]="number"==typeof row?row:row[axisIx];bx++}let tmp=new Uint8Array(headerArr.byteLength+bodyArr.byteLength);tmp.set(headerArr,0);tmp.set(new Uint8Array(bodyArr.buffer),headerArr.byteLength);return tmp}static buildWavFileBlob(intervalMs,data,axisIx){let buffer=WavHelper.buildWavFileBuffer(intervalMs,data,axisIx),blob=new Blob([buffer.buffer],{type:"audio/wav"});return URL.createObjectURL(blob)}}exports.WavHelper=WavHelper}));define("client/ui-helpers",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.getInputValue=exports.getInputValueOptional=exports.getInputValueString=exports.checkForDependencyError=exports.getImplicitInputBlock=exports.findInputBlock=exports.withLoadingSpinner=void 0;exports.withLoadingSpinner=async function(workFn,onError,spinner,replaceClass,minimumMs=1e3){if(!spinner)throw new Error("The element supplied to withLoadingSpinner was null");let start=Date.now();if(replaceClass){spinner.classList.remove(replaceClass);spinner.classList.add("fa-spinner");spinner.classList.add("spin-animation")}else spinner.classList.remove("d-none");let restoreSpinner=()=>{if(replaceClass){spinner.classList.add(replaceClass);spinner.classList.remove("fa-spinner");spinner.classList.remove("spin-animation")}else spinner.classList.add("d-none")};try{await workFn()}catch(error){await onError(error)}finally{Date.now()-start<minimumMs?setTimeout(()=>{restoreSpinner()},minimumMs-(Date.now()-start)):restoreSpinner()}};exports.findInputBlock=function(impulse,dspId){let dspBlock=impulse.dspBlocks.find(b=>b.id===dspId);if(!dspBlock)throw new Error("No DSP block found with ID "+dspId);if(dspBlock.input){let inputBlock=impulse.inputBlocks.find(b=>b.id===dspBlock.input);if(inputBlock)return inputBlock}return getImplicitInputBlock(impulse)};function getImplicitInputBlock(impulse){let primaryInputBlocks=impulse.inputBlocks.filter(b=>b.primaryVersion);if(primaryInputBlocks.length>1)throw new Error("More than one primary input block was found");if(1===primaryInputBlocks.length)return primaryInputBlocks[0];if(0===impulse.inputBlocks.length)throw new Error("You don't have any input blocks");if(1===impulse.inputBlocks.length)return impulse.inputBlocks[0];throw new Error("There are multiple Input blocks but no primary, and none are used by current primary Learn blocks")}exports.getImplicitInputBlock=getImplicitInputBlock;exports.checkForDependencyError=function(){let dependencyErrorEl=document.querySelector("#dependency-error");if(!dependencyErrorEl)throw new Error("Dependency error input element was not found");if(dependencyErrorEl.value.length){console.log(`Dependency error, not loading full UI (${dependencyErrorEl.value})`);return!0}return!1};function getInputValueString(id){let element=document.querySelector(id);if(!element||!element.value||0===element.value.length)throw new Error(`Missing or empty ${id} input element`);return element.value}exports.getInputValueString=getInputValueString;function getInputValueOptional(id){let value;try{value=getInputValueString(id)}catch(_a){return}try{return JSON.parse(value)}catch(ex){throw new Error(`Could not parse ${id} input element`)}}exports.getInputValueOptional=getInputValueOptional;exports.getInputValue=function(id){let value=getInputValueOptional(id);if(void 0===value)throw new Error(`Missing or empty ${id} input element`);return value}}));define("client/project/components/block-version-base",["require","exports","client/notify","client/ui-helpers"],(function(require,exports,notify_11,UIHelpers){Object.defineProperty(exports,"__esModule",{value:!0});exports.BlockVersionBase=void 0;UIHelpers=__importStar(UIHelpers);exports.BlockVersionBase=class{constructor(rootElement,versionStack,studioApi,blockId,blockCategory,blockType,dspVersionStacks,inputVersionStacks){this._rootEl=rootElement;this._studioApi=studioApi;this._blockCategory=blockCategory;this._blockType=blockType;this._versionStack=versionStack;this._dspVersionStacks=dspVersionStacks;this._inputVersionStacks=inputVersionStacks;this._blockId=blockId;let currentBlock;for(let block of this._versionStack)block.id===blockId&&(currentBlock=block);if(!currentBlock)throw new Error(`Could not find block id ${blockId} in list of block versions`);this._currentBlock=currentBlock;this._cloneButtonEl=rootElement.querySelector(".block-version-ui-clone-button");this._cloneButtonEl&&(this._cloneButtonEl.onclick=this.getCloneButtonClickHandler(this._cloneButtonEl).bind(this))}getCloneButtonClickHandler(cloneButtonElement,setClonePrimary=!1){return async ev=>{ev.preventDefault();if(setClonePrimary&&"learn"!==this._blockCategory)throw new Error("Only learn blocks can be set as primary");cloneButtonElement.disabled=!0;let spinner=cloneButtonElement.querySelector(".fa-spinner");await UIHelpers.withLoadingSpinner(async()=>{let createRes=await this._studioApi.impulse.createBlockVersion(this._studioApi.projectId,this._currentBlock.type,this._currentBlock.id);if(!createRes.body||!createRes.body.success)throw new Error(createRes.body.error||createRes.response.responseText);if(setClonePrimary){let primaryRes=await this._studioApi.impulse.updateBlockVersion(this._studioApi.projectId,this._blockType,createRes.body.id,{primaryVersion:!0});if(!primaryRes.body||primaryRes.body.error||!primaryRes.body.success)throw new Error(primaryRes.body&&primaryRes.body.error||primaryRes.response.responseText)}"dsp"===this._blockCategory||"learn"===this._blockCategory?location.href=this.generateBlockUrl(createRes.body.id):"input"===this._blockCategory&&location.reload()},async ex=>{await notify_11.Notify.alert("Unable to create a new version of this block",ex.message||ex.toString(),"error")},spinner);cloneButtonElement.disabled=!0}}generateBlockUrl(blockId){var _a;const baseUrl=null===(_a=document.querySelector("#base-url"))||void 0===_a?void 0:_a.value;if(!baseUrl)throw new Error("Base URL not set");return`${baseUrl}/${"learn"===this._blockCategory?"learning":"dsp"}/${this._blockType}/${blockId}`}}}));define("client/project/components/block-version-popup",["require","exports","client/project/components/block-version-base","client/notify","client/ui-helpers"],(function(require,exports,block_version_base_1,notify_12,UIHelpers){Object.defineProperty(exports,"__esModule",{value:!0});exports.BlockVersionPopup=void 0;UIHelpers=__importStar(UIHelpers);class BlockVersionPopup extends block_version_base_1.BlockVersionBase{constructor(rootElement,versionStack,studioApi,blockId,blockCategory,blockType,dspVersionStacks,inputVersionStacks){super(rootElement,versionStack,studioApi,blockId,blockCategory,blockType,dspVersionStacks,inputVersionStacks);this._initialBlockInvalidated=!1;this._returnBlockChange=!1;this._initialBlock=this._currentBlock;this._versionListEl=rootElement.querySelector(".block-version-ui-version-list");if(!this._versionListEl)throw new Error("Block version list element was missing from block version UI HTML");this._idEl=rootElement.querySelector(".block-version-ui-popup-id");if(!this._idEl)throw new Error("ID element was missing from block version UI HTML");this._descriptionEl=rootElement.querySelector(".block-version-ui-popup-description");if(!this._descriptionEl)throw new Error("ID element was missing from block version UI HTML");this._buttonPrimary=rootElement.querySelector(".block-version-ui-primary-button");if(!this._buttonPrimary)throw new Error("Primary button was missing from block version UI HTML");"learn"===blockCategory&&this._buttonPrimary.classList.remove("d-none");this._buttonPrimaryTextEl=this._buttonPrimary.querySelector(".block-version-ui-primary-button-text");if(!this._buttonPrimaryTextEl)throw new Error("Primary button text was missing from block version UI HTML");this._buttonEdit=rootElement.querySelector(".block-version-ui-edit-button");if(!this._buttonEdit)throw new Error("Edit button was missing from block version UI HTML");this._inputListEl=rootElement.querySelector(".block-version-ui-input-list");if(!this._inputListEl)throw new Error("Input list was missing from block version UI HTML");this._versionCountEl=rootElement.querySelector(".block-version-ui-version-count");if(!this._versionCountEl)throw new Error("Version count was missing from block version UI HTML");this._buttonPrimary.onclick=this.buttonPrimaryClickHandler.bind(this);this._buttonEdit.onclick=this.buttonEditClickHandler.bind(this);this._descriptionEl.onchange=this.descriptionChangeHandler.bind(this);this.renderUI()}async show(){$(this._rootEl).modal();return new Promise(resolve=>$(this._rootEl).one("hidden.bs.modal",()=>{resolve({initialBlockInvalidated:this._initialBlockInvalidated,currentBlockId:this._returnBlockChange?this._currentBlock.id:void 0})}))}initialBlockInvalidated(){return this._initialBlockInvalidated}renderUI(){this.populateVersionList();let blockIds=[];for(let block of this._versionStack)blockIds.push(block.id);let versionIndex=blockIds.indexOf(this._currentBlock.id);this._versionCountEl.textContent=this._versionStack.length.toString();this._idEl.textContent="#"+(1+versionIndex).toString();if("primaryVersion"in this._currentBlock&&this._currentBlock.primaryVersion){this._buttonPrimaryTextEl.textContent="Primary version";this._buttonPrimary.disabled=!0}else{this._buttonPrimaryTextEl.textContent="Set as primary";this._buttonPrimary.disabled=!1}if("description"in this._currentBlock&&this._currentBlock.description){this._descriptionEl.value=this._currentBlock.description;this._descriptionEl.dataset.latestValue=this._currentBlock.description}else{this._descriptionEl.value="";this._descriptionEl.dataset.latestValue=""}this.populateInputList();$(this._rootEl).modal("handleUpdate")}populateVersionList(){for(;this._versionListEl.firstChild;)this._versionListEl.firstChild.remove();for(let[index,block]of[...this._versionStack].reverse().entries()){let row=this.createVersionRow(this._versionStack.length-index,block);this._versionListEl.appendChild(row)}}createVersionRow(displayId,block){let element=document.createElement("a");element.href="#";element.dataset.blockId=block.id.toString();element.classList.add("list-group-item");element.classList.add("list-group-item-action");block===this._currentBlock&&element.classList.add("active");let idEl=document.createElement("span");idEl.classList.add("version-id");idEl.textContent=displayId.toString();element.appendChild(idEl);let descriptionEl=document.createElement("span");if("description"in block&&block.description){descriptionEl.classList.add("version-description");descriptionEl.textContent=block.description}else{descriptionEl.classList.add("no-description");descriptionEl.textContent="No description"}element.appendChild(descriptionEl);if(block.createdBy&&"tuner"===block.createdBy){let createdByEl=document.createElement("span");createdByEl.classList.add("badge","badge-primary","ml-2");createdByEl.textContent="EON Tuner";createdByEl.dataset.toggle="tooltip";createdByEl.title="This version was created automatically by EON Tuner";$(createdByEl).tooltip();element.appendChild(createdByEl)}let iconEl=document.createElement("i");if("primaryVersion"in block&&block.primaryVersion){iconEl.classList.add("fas","fa-star","text-yellow");iconEl.dataset.toggle="tooltip";"learn"===this._blockCategory?iconEl.title="This is the primary version":iconEl.title="This version is a dependency of a primary Learn block";$(iconEl).tooltip()}else iconEl.classList.add("fas");element.appendChild(iconEl);element.onclick=this.versionListItemClickHandler.bind(this);return element}populateInputList(){for(var _a;this._inputListEl.firstChild;)this._inputListEl.firstChild.remove();"learn"===this._blockCategory?this.renderDSPBlocks():"dsp"===this._blockCategory?this.renderInputBlocks():"input"===this._blockCategory&&(null===(_a=this._rootEl.querySelector(".block-version-ui-popup-input-blocks-section"))||void 0===_a||_a.classList.add("d-none"))}renderDSPBlocks(){let currentBlock=this._currentBlock;if(!this._dspVersionStacks)throw new Error("Block version UI has no DSP version stacks specified");for(let dspStack of this._dspVersionStacks){let rootBlock=dspStack[0],element=document.createElement("div");element.classList.add("form-check");let cbId=`block-version-popup-input-checkbox-${rootBlock.id}`,checkbox=document.createElement("input");checkbox.type="checkbox";checkbox.value="";checkbox.checked=currentBlock.dsp.some(id=>dspStack.some(b=>b.id===id));checkbox.dataset.rootId=rootBlock.id.toString();checkbox.id=cbId;checkbox.classList.add("form-check-input");checkbox.onchange=this.learnInputsChangeHandler.bind(this);element.appendChild(checkbox);let label=document.createElement("label");label.setAttribute("for",cbId);label.textContent=rootBlock.name;element.appendChild(label);if(dspStack.length>1){let dropdown=document.createElement("select");dropdown.classList.add("form-select","form-select-sm","ml-2");for(let i=0;i<dspStack.length;i++){let version=dspStack[i],option=document.createElement("option"),versionString=`#${(i+1).toString()}`,primaryString=version.primaryVersion?" (Primary dependency)":"",descriptionString=` - ${version.description?version.description:"No description"}`;option.text=versionString+primaryString+descriptionString;option.value=version.id.toString();let isSelected=currentBlock.dsp.includes(version.id);option.selected=isSelected||version.primaryVersion;dropdown.append(option)}dropdown.onchange=this.learnInputsChangeHandler.bind(this);element.append(dropdown)}let spinner=document.createElement("i");spinner.classList.add("fas","fa-spinner","spin-animation","ml-2","d-none");element.appendChild(spinner);this._inputListEl.appendChild(element)}this.gateInputCheckboxes()}renderInputBlocks(){let currentBlock=this._currentBlock;if(!this._inputVersionStacks)throw new Error("Block version UI has no input block versions specified");if(this._inputVersionStacks.length>1)throw new Error("Block version UI does not support multiple input block stacks");for(let i=0;i<this._inputVersionStacks[0].length;i++){let inputVersion=this._inputVersionStacks[0][i],element=document.createElement("div");element.classList.add("form-check");let cbId=`block-version-popup-input-checkbox-${inputVersion.id}`,checkbox=document.createElement("input");checkbox.type="radio";checkbox.value="";checkbox.name="input";checkbox.checked=currentBlock.input===inputVersion.id;checkbox.id=cbId;checkbox.classList.add("form-check-input");checkbox.onchange=this.dspInputChangeHandler.bind(this);checkbox.dataset.id=inputVersion.id.toString();element.appendChild(checkbox);let label=document.createElement("label");label.setAttribute("for",cbId);label.textContent=`${inputVersion.name} #${i+1}`;if(inputVersion.primaryVersion){let icon=document.createElement("i");icon.classList.add("fas","fa-star","text-yellow","ml-1");icon.dataset.toggle="tooltip";icon.title="This version is a dependency of a primary Learn block";$(icon).tooltip();label.appendChild(icon)}let descriptionSpan=document.createElement("span");inputVersion.description?descriptionSpan.textContent=" - "+inputVersion.description:descriptionSpan.textContent=" - No description";label.appendChild(descriptionSpan);element.appendChild(label);let spinner=document.createElement("i");spinner.classList.add("fas","fa-spinner","spin-animation","ml-2","d-none");element.appendChild(spinner);this._inputListEl.appendChild(element)}}gateInputCheckboxes(){let allInputs=this._inputListEl.querySelectorAll("input"),checkedInputs=[];for(let input of allInputs)input.checked&&checkedInputs.push(input);1===checkedInputs.length?checkedInputs[0].disabled=!0:checkedInputs.length>1?allInputs.forEach(i=>{i.disabled=!1}):allInputs.length>checkedInputs.length&&allInputs.forEach(i=>{i.disabled=!1})}versionListItemClickHandler(ev){ev.preventDefault();let newBlock,element=ev.currentTarget,id=Number(element.dataset.blockId);for(let block of this._versionStack)if(block.id===id){newBlock=block;break}if(!newBlock)throw new Error("The ID on the version list DOM item was not found in the list of versions");this._currentBlock=newBlock;this.renderUI()}async buttonPrimaryClickHandler(ev){ev.preventDefault();if("learn"!==this._blockCategory)throw new Error("Only learn blocks can be set as primary");this._buttonPrimary.disabled=!0;let spinner=this._buttonPrimary.querySelector(".fa-spinner");await UIHelpers.withLoadingSpinner(async()=>{let d=await this._studioApi.impulse.updateBlockVersion(this._studioApi.projectId,this._blockType,this._currentBlock.id,{primaryVersion:!0});if(!d.body||d.body.error||!d.body.success)throw new Error(d.body&&d.body.error||d.response.responseText);for(let block of this._versionStack)block.primaryVersion=block===this._currentBlock;this.renderUI()},ex=>{this._buttonPrimary.disabled=!1;notify_12.Notify.alert("Failed to update primary version",ex.message||ex.toString(),"danger")},spinner,void 0,0)}buttonEditClickHandler(ev){ev.preventDefault();if("input"===this._blockCategory){this._returnBlockChange=!0;$(this._rootEl).modal("hide")}else location.href=this.generateBlockUrl(this._currentBlock.id)}async descriptionChangeHandler(ev){let trimmed=this._descriptionEl.value.trim(),current=this._currentBlock.description;trimmed!==current?await UIHelpers.withLoadingSpinner(async()=>{let d=await this._studioApi.impulse.updateBlockVersion(this._studioApi.projectId,this._blockType,this._currentBlock.id,{description:trimmed});if(!d.body||d.body.error||!d.body.success)throw new Error(d.body&&d.body.error||d.response.responseText);this._currentBlock.description=trimmed;this.renderUI()},ex=>{notify_12.Notify.alert("Failed to set description",ex.message||ex.toString(),"danger")},this._rootEl.querySelector(".block-version-ui-popup-description-spinner")):this._descriptionEl.value=current}async learnInputsChangeHandler(ev){var _a;let allInputs=this._inputListEl.querySelectorAll("input"),selectedInputs=[];for(let input of allInputs)if(input.checked&&input.parentElement){if(!input.parentElement.querySelector("select")){selectedInputs.push(Number(input.dataset.rootId));continue}let selectedOption=input.parentElement.querySelector("option:checked");if(!selectedOption)throw new Error("At least one block version should be selected");selectedInputs.push(Number(selectedOption.value))}let oldDSP=this._currentBlock.dsp.sort((a,b)=>a-b),newDSP=selectedInputs.sort((a,b)=>a-b);if(JSON.stringify(oldDSP)===JSON.stringify(newDSP))return;let spinner=null===(_a=ev.currentTarget.parentElement)||void 0===_a?void 0:_a.querySelector("i.fa-spinner");await UIHelpers.withLoadingSpinner(async()=>{let d=await this._studioApi.impulse.updateBlockVersion(this._studioApi.projectId,this._blockType,this._currentBlock.id,{dsp:selectedInputs});if(!d.body||d.body.error||!d.body.success)throw new Error(d.body&&d.body.error||d.response.responseText);this._currentBlock.dsp=selectedInputs;this._currentBlock===this._initialBlock&&(this._initialBlockInvalidated=!0);this.renderUI()},ex=>{notify_12.Notify.alert("Failed to set block inputs",ex.message||ex.toString(),"danger");this.renderUI()},spinner)}async dspInputChangeHandler(ev){var _a;let allInputs=this._inputListEl.querySelectorAll("input"),selectedInputs=[];for(let input of allInputs)input.checked&&selectedInputs.push(Number(input.dataset.id));if(selectedInputs.length<1){notify_12.Notify.alert("Not enough inputs selected","Only one input is allowed","danger");return}if(selectedInputs.length>1){notify_12.Notify.alert("Too many inputs selected","Only one input is allowed","danger");return}if(this._currentBlock.input===selectedInputs[0])return;let spinner=null===(_a=ev.currentTarget.parentElement)||void 0===_a?void 0:_a.querySelector("i.fa-spinner");await UIHelpers.withLoadingSpinner(async()=>{let d=await this._studioApi.impulse.updateBlockVersion(this._studioApi.projectId,this._blockType,this._currentBlock.id,{input:selectedInputs[0]});if(!d.body||d.body.error||!d.body.success)throw new Error(d.body&&d.body.error||d.response.responseText);this._currentBlock.input=selectedInputs[0];this._currentBlock===this._initialBlock&&(this._initialBlockInvalidated=!0);this.renderUI()},ex=>{notify_12.Notify.alert("Failed to set block inputs",ex.message||ex.toString(),"danger");this.renderUI()},spinner)}}exports.BlockVersionPopup=BlockVersionPopup}));define("client/project/components/block-version-header",["require","exports","client/project/components/block-version-base","client/notify","client/project/components/block-version-popup","client/ui-helpers"],(function(require,exports,block_version_base_2,notify_13,block_version_popup_1,UIHelpers){Object.defineProperty(exports,"__esModule",{value:!0});exports.BlockVersionHeader=void 0;UIHelpers=__importStar(UIHelpers);class BlockVersionHeader extends block_version_base_2.BlockVersionBase{constructor(rootElement,versionStack,studioApi,blockId,blockCategory,blockType,dspVersionStacks,inputVersionStacks){super(rootElement,versionStack,studioApi,blockId,blockCategory,blockType,dspVersionStacks,inputVersionStacks);this._popup=null;const isAdmin="true"===document.querySelector("#is-admin").value;let blockSetDescriptionLinkEl=rootElement.querySelector(".block-version-ui-set-description-link");if(!blockSetDescriptionLinkEl)throw new Error("Set description link was missing from block version UI HTML");this._blockSetDescriptionLinkEl=blockSetDescriptionLinkEl;let blockDescriptionTextEl=this._blockSetDescriptionLinkEl.querySelector(".block-version-ui-title-description-text");if(!blockDescriptionTextEl)throw new Error("Description text element was missing from block version UI HTML");this._blockDescriptionTextEl=blockDescriptionTextEl;this._blockDescriptionPromptEl=this._blockSetDescriptionLinkEl.querySelector(".block-version-ui-click-to-set-description");let blockPrimaryVersionEl=this._rootEl.querySelector(".block-version-ui-header-primary-version");if(!blockPrimaryVersionEl)throw new Error("Primary version element was missing from block version UI HTML");this._blockPrimaryVersionEl=blockPrimaryVersionEl;let dropdownMenuElement=rootElement.querySelector(".dropdown-menu");if(!dropdownMenuElement)throw new Error("Dropdown element was missing from block version UI HTML");this._blockDropdownMenuEl=dropdownMenuElement;this._blockVersionModalEl=document.querySelector(".block-version-ui-modal");if(!this._blockVersionModalEl)throw new Error("Block version modal element was missing from block version UI HTML");this._manageVersionsEls=rootElement.querySelectorAll(".block-version-ui-manage-versions");this._clonePrimaryButtonEl=rootElement.querySelector(".block-version-ui-clone-primary-button");this._clonePrimaryButtonEl&&"learn"===this._blockCategory&&this._clonePrimaryButtonEl.classList.remove("d-none");this._clonePrimaryTunerButtonEl=document.querySelector(".block-version-ui-clone-primary-tuner-button");this.renderUI();isAdmin&&(this._blockSetDescriptionLinkEl.onclick=this.editDescriptionClickHandler.bind(this));this._manageVersionsEls.forEach(el=>{el.onclick=this.manageVersionsClickHandler.bind(this)});this._clonePrimaryButtonEl&&(this._clonePrimaryButtonEl.onclick=this.getCloneButtonClickHandler(this._clonePrimaryButtonEl,!0).bind(this));this._clonePrimaryTunerButtonEl&&(this._clonePrimaryTunerButtonEl.onclick=this.getCloneButtonClickHandler(this._clonePrimaryTunerButtonEl,!1).bind(this))}static createWithDefaultHTML(prefix,studioApi){let headerElement=document.querySelector("#block-version-header");if(!headerElement){console.log("Root element #block-version-header was missing, not instantiating");return}let blockId=Number(UIHelpers.getInputValueString(`#${prefix}-id`)),blockType=UIHelpers.getInputValueString(`#${prefix}-type`),versionStack=UIHelpers.getInputValue("#version-stack"),dspStacks=UIHelpers.getInputValueOptional("#dsp-version-stacks"),inputStacks=UIHelpers.getInputValueOptional("#input-version-stacks");return new BlockVersionHeader(headerElement,versionStack,studioApi,blockId,prefix,blockType,dspStacks,inputStacks)}renderUI(){this.printBlockDetails();this.repopulateDropdownMenu()}printBlockDetails(){if("description"in this._currentBlock&&this._currentBlock.description&&this._currentBlock.description.length){this._blockDescriptionTextEl.textContent=this._currentBlock.description;this._blockDescriptionTextEl.classList.remove("d-none");this._blockDescriptionPromptEl&&this._blockDescriptionPromptEl.classList.add("d-none")}else{this._blockDescriptionTextEl.classList.add("d-none");this._blockDescriptionPromptEl&&this._blockDescriptionPromptEl.classList.remove("d-none")}this._versionStack.length>1&&"primaryVersion"in this._currentBlock&&this._currentBlock.primaryVersion?this._blockPrimaryVersionEl.classList.remove("d-none"):this._blockPrimaryVersionEl.classList.add("d-none")}repopulateDropdownMenu(){this._blockDropdownMenuEl.querySelectorAll(".dropdown-item.block-version").forEach(el=>el.remove());for(let[index,block]of[...this._versionStack].reverse().entries()){if("tuner"===block.createdBy&&!1===block.enabled&&block.id!==this._blockId)continue;let element=document.createElement("a");element.href=this.generateBlockUrl(block.id);element.classList.add("dropdown-item","block-version");let idEl=document.createElement("span");idEl.classList.add("version-id","pr-4");idEl.textContent=(this._versionStack.length-index).toString();element.appendChild(idEl);let descriptionEl=document.createElement("span");if("description"in block&&block.description){descriptionEl.classList.add("version-description");descriptionEl.textContent=block.description}else{descriptionEl.classList.add("no-description");descriptionEl.textContent="No description"}element.appendChild(descriptionEl);if(block.createdBy&&"tuner"===block.createdBy){let createdByEl=document.createElement("span");createdByEl.classList.add("badge","badge-primary","ml-2");createdByEl.textContent="EON Tuner";createdByEl.dataset.toggle="tooltip";createdByEl.title="This version was created automatically by EON Tuner";$(createdByEl).tooltip();element.appendChild(createdByEl)}let iconEl=document.createElement("i");if("primaryVersion"in block&&block.primaryVersion){iconEl.classList.add("fas","fa-star","text-yellow");"learn"===this._blockCategory?iconEl.title="This is the primary version":iconEl.title="This version is a dependency of a primary Learn block";iconEl.dataset.toggle="tooltip";$(iconEl).tooltip()}else iconEl.classList.add("fas");element.appendChild(iconEl);this._blockDropdownMenuEl.appendChild(element)}}async editDescriptionClickHandler(ev){ev.preventDefault();let spinner=this._blockSetDescriptionLinkEl.querySelector("i");spinner.classList.contains("fa-spinner")||await UIHelpers.withLoadingSpinner(async()=>{let currentBlock=this._currentBlock,v=await notify_13.Notify.prompt("Set a description","Update the description for this version of the block","Update version description",currentBlock.description?currentBlock.description:"","question","info");if(v){let trimmed=v.trim(),d=await this._studioApi.impulse.updateBlockVersion(this._studioApi.projectId,this._blockType,this._currentBlock.id,{description:trimmed});if(!d.body||d.body.error||!d.body.success)throw new Error(d.body&&d.body.error||d.response.responseText);currentBlock.description=trimmed;this.renderUI()}},ex=>{notify_13.Notify.alert("Failed to update project name",ex.message||ex.toString(),"danger")},spinner,"fa-edit")}async manageVersionsClickHandler(ev){ev.preventDefault();if(this._popup)return;this._popup=new block_version_popup_1.BlockVersionPopup(this._blockVersionModalEl,this._versionStack,this._studioApi,this._currentBlock.id,this._blockCategory,this._blockType,this._dspVersionStacks,this._inputVersionStacks);if((await this._popup.show()).initialBlockInvalidated)location.reload();else{this._popup=null;this.renderUI()}}}exports.BlockVersionHeader=BlockVersionHeader}));define("client/project/pages/dsp-ui",["require","exports","client/project/components/acquisition-chart","client/project/components/sliding-window","shared/wav-helper","client/project/components/acquisition-image","shared/WebSocketTypes","client/notify","client/project/components/block-version-header","client/ui-helpers","client/global-ui","client/project/components/acquisition-video"],(function(require,exports,acquisition_chart_3,sliding_window_2,wav_helper_1,acquisition_image_2,WebSocketTypes_5,notify_14,block_version_header_1,UIHelpers,global_ui_5,acquisition_video_3){Object.defineProperty(exports,"__esModule",{value:!0});exports.DSPUI=void 0;UIHelpers=__importStar(UIHelpers);exports.DSPUI=class{constructor(studioApi){this._rawFeaturesPlayer=document.querySelector(".raw-features-player");this._firstDSP=!0;this._processedFeatures=document.querySelector("#processed-feature");this._rawFeatures=document.querySelector("#raw-feature");this._cache={};this._dspReqId=0;this._performance={card:document.querySelector("#performance-card"),time:document.querySelector("#performance-card .metadata-time"),memory:document.querySelector("#performance-card .metadata-memory")};this._studioApi=studioApi;this._dspId=Number(document.querySelector("#dsp-id").value);console.log("dspId",this._dspId);this._blockVersionHeader=block_version_header_1.BlockVersionHeader.createWithDefaultHTML("dsp",this._studioApi);this._sampleSelector=document.querySelector("#dsp-select-sample");let aqChartBody=document.querySelector(".dsp-chart-body"),aqImageBody=document.querySelector(".dsp-image-body"),aqVideoBody=document.querySelector(".dsp-video-body");this._aqChart=new acquisition_chart_3.AcquisitionChart(studioApi,aqChartBody,WebSocketTypes_5.DOWNSAMPLE_SIZE_LONG,void 0,{legend:{position:"right"}},this._dspId,{width:200,height:void 0},!0);this._aqImage=new acquisition_image_2.AcquisitionImage(studioApi,aqImageBody,void 0,this._dspId);this._aqVideo=new acquisition_video_3.AcquisitionVideo(studioApi,aqVideoBody,void 0,!0,"cropped",this._dspId);let impulseEl=document.querySelector("#impulse"),impulse=this._impulse=JSON.parse(decodeURIComponent(impulseEl.value)),inputBlock=UIHelpers.findInputBlock(impulse,this._dspId);console.log("impulse",impulse);this._sampleSelector.onchange=async()=>{let dspResultRow=document.querySelector("#dsp-result-row"),dspErrorRow=document.querySelector("#dsp-error-row");if(this._sampleSelector.selectedOptions[0]&&"image"===this._sampleSelector.selectedOptions[0].dataset.type){"chart"===this._lastRenderedChart&&this._aqChart.clear();"video"===this._lastRenderedChart&&this._aqVideo.clear();"chart"!==this._lastRenderedChart&&void 0!==this._lastRenderedChart||this._slidingWindow.hide();this._lastRenderedChart="image";(async()=>{try{await this._aqImage.load(Number(this._sampleSelector.value))}catch(ex2){let ex=ex2;dspErrorRow.style.display="block";dspResultRow.style.display="none";dspErrorRow.querySelector(".col").textContent="Error: "+notify_14.Notify.extractMsg(ex)}})();await this.getData(Number(this._sampleSelector.value),0,1e6,!1,!0)}else if(this._sampleSelector.selectedOptions[0]&&"video"===this._sampleSelector.selectedOptions[0].dataset.type){"chart"===this._lastRenderedChart&&this._aqChart.clear();"image"===this._lastRenderedChart&&this._aqImage.clear();"chart"!==this._lastRenderedChart&&void 0!==this._lastRenderedChart||this._slidingWindow.hide();this._lastRenderedChart="video";(async()=>{try{await this._aqVideo.load(Number(this._sampleSelector.value))}catch(ex2){let ex=ex2;dspErrorRow.style.display="block";dspResultRow.style.display="none";dspErrorRow.querySelector(".col").textContent="Error: "+notify_14.Notify.extractMsg(ex)}})();"video"===inputBlock.type&&await this.getData(Number(this._sampleSelector.value),0,inputBlock.windowSizeMs||0,!1,!0);this._aqVideo.on("timeChanged",async timeMs=>{console.log("aqVideo timeChanged",timeMs);"video"===inputBlock.type&&await this.getData(Number(this._sampleSelector.value),timeMs,timeMs+(inputBlock.windowSizeMs||0),!1,!0)})}else{if("image"===this._lastRenderedChart){this._aqImage.clear();this._slidingWindow.show()}if("video"===this._lastRenderedChart){this._aqVideo.clear();this._slidingWindow.show()}this._lastRenderedChart="chart";try{await this._aqChart.load(Number(this._sampleSelector.value))}catch(ex2){let ex=ex2;dspErrorRow.style.display="block";dspResultRow.style.display="none";dspErrorRow.querySelector(".col").textContent="Error: "+notify_14.Notify.extractMsg(ex)}}};this._dspType=document.querySelector("#dsp-type").value;this._slidingWindow=new sliding_window_2.SlidingWindow(this._studioApi,this._aqChart,document.querySelector("#sliding-window"),async(sampleId,startIx,lastIx)=>await this.getData(sampleId,startIx,lastIx,!1,!0));"time-series"===inputBlock.type&&this._slidingWindow.setWindow(inputBlock.windowSizeMs||0,inputBlock.windowIncreaseMs||0);this._aqChart.on("loaded",()=>this._slidingWindow.render());window.slidingWindow=this._slidingWindow;let paramForm=this._formEl=document.querySelector("#dsp-pipeline");for(let child of Array.from(this._formEl.querySelectorAll("input"))){child.addEventListener("input",()=>child.classList.remove("is-invalid"));child.addEventListener("click",ev=>{if(child.readOnly&&"1"!==child.dataset.readonly){child.value=child.dataset.defaultValue||"";child.readOnly=!1;this.validateForm()&&child.onchange&&child.dispatchEvent(new CustomEvent("change"))}})}this.validateForm();this.buildDSPConfig(paramForm);this.bindSampleSelector()}getParameters(){let params={},el=this._formEl;for(let child of Array.from(el.querySelectorAll("input")))child.readOnly&&"1"!==child.dataset.readonly?params[child.id]=null:"int"===child.dataset.type||"float"===child.dataset.type?params[child.id]=child.value:"boolean"===child.dataset.type?params[child.id]=child.checked?"true":"false":params[child.id]=child.value;for(let child of Array.from(el.querySelectorAll("select")))params[child.id]=child.value;return params}async buildDSPConfig(el){const onInput=async()=>{this._lastDataSettings&&await this.getData(this._lastDataSettings.sampleId,this._lastDataSettings.startIx,this._lastDataSettings.lastIx,!1,!1)};for(let inputEl of Array.from(el.querySelectorAll("input")))inputEl.onchange=onInput;for(let selectEl of Array.from(el.querySelectorAll("select")))selectEl.onchange=onInput;el.onsubmit=async ev=>{ev.preventDefault();if(this._lastDataSettings){await this.getData(this._lastDataSettings.sampleId,this._lastDataSettings.startIx,this._lastDataSettings.lastIx,!0,!1);location.href=document.querySelector("#generate-features-link").href}}}async getData(sampleId,startIx,lastIx,store,clearRawFeatures){if(this._firstDSP){store=!0;this._firstDSP=!1}if(!this.validateForm())return[];let dspResultRow=document.querySelector("#dsp-result-row"),dspErrorRow=document.querySelector("#dsp-error-row");clearRawFeatures&&(this._rawFeatures.textContent="...");this._processedFeatures.textContent="...";try{let parameters=this.getParameters();this._lastDataSettings={sampleId:sampleId,startIx:startIx,lastIx:lastIx};let dspResult,cacheKey=`${sampleId}-${startIx}-${lastIx}-${JSON.stringify(parameters)}-${store}`,reqId=++this._dspReqId;if(this._cache[cacheKey])dspResult=this._cache[cacheKey];else{this._studioApi.analytics.event("dsp-start",{event_category:this._dspType,event_label:this._dspId.toString()});let response,body;if(this._studioApi.isAdmin){let x=await this._studioApi.dsp.runDspSampleSlice(this._studioApi.projectId,this._dspId,sampleId,startIx,lastIx,{params:parameters,store:store});response=x.response;body=x.body}else{let x=await this._studioApi.dsp.runDspSampleSliceReadOnly(this._studioApi.projectId,this._dspId,sampleId,startIx,lastIx);response=x.response;body=x.body}if(!body||!body.success)throw new Error(body.error||response.statusText);this._cache[cacheKey]=body;dspResult=body}if(reqId!==this._dspReqId)return dspResult.sample.payload.values;dspErrorRow.style.display="none";dspResultRow.style.display="block";let dspResultHasFloats=dspResult.features.some(v=>Math.floor(v)!==v),{features:rawFeaturesFlattened,hasFloats:rawFeaturesHasFloats}=global_ui_5.GlobalUI.flattenFeatures(dspResult.sample.payload.values),rawFeaturesIsImage=this._impulse.inputBlocks.some(i=>"image"===i.type),rawFeaturesIsVideo=this._impulse.inputBlocks.some(i=>"video"===i.type);(rawFeaturesIsImage||rawFeaturesIsVideo)&&(rawFeaturesFlattened=rawFeaturesFlattened.slice(2));this._rawFeatures.textContent=rawFeaturesFlattened.map(n=>rawFeaturesIsImage?"0x"+n.toString(16):rawFeaturesHasFloats?n.toFixed(4):n).join(", ");this._processedFeatures.textContent=dspResult.features.map(n=>dspResultHasFloats?n.toFixed(4):n).join(", ");let scroll=document.documentElement.scrollTop;dspResultRow.innerHTML="";for(let g of dspResult.graphs)this.plotDSPGraph(dspResultRow,g);this._rawFeaturesPlayer.innerHTML="";for(let ix=0;ix<dspResult.sample.sample.sensors.length;ix++)if("wav"===dspResult.sample.sample.sensors[ix].units){let values=dspResult.sample.payload.values.map(d=>d[ix]),audioUrl=wav_helper_1.WavHelper.buildWavFileBlob(dspResult.sample.sample.intervalMs,values,0);this._rawFeaturesPlayer.style.display="";let audio=document.createElement("audio");audio.controls=!0;audio.src=audioUrl;this._rawFeaturesPlayer.appendChild(audio)}if(dspResult.performance){this._performance.card.style.visibility="visible";this._performance.time.textContent=dspResult.performance.latency+" ms.";this._performance.memory.textContent=this.bytesToSize(dspResult.performance.ram)}else this._performance.card.style.visibility="hidden";this._studioApi.analytics.event("dsp-finish-success",{event_category:this._dspType,event_label:this._dspId.toString()});document.documentElement.scrollTop=scroll;return dspResult.sample.payload.values}catch(ex2){let ex=ex2;console.error("Running DSP failed",ex);dspErrorRow.style.display="block";dspResultRow.style.display="none";ex.message||"object"!=typeof ex||(ex.message=JSON.stringify(ex));dspErrorRow.querySelector(".col").textContent="Error: "+notify_14.Notify.extractMsg(ex);this._studioApi.analytics.event("dsp-finish-fail",{event_category:this._dspType,event_label:this._dspId.toString()});return[]}}plotDSPGraph(parent,graph){let baseHTML=`<div class="card-header pb-2 pt-0">\n                            <div class="row">\n                                <div class="col">\n                                    <h4 class="mb-0 graph-title">\n                                    </h4>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="card-body">\n                            <div class="row">\n                                <div class="col graph-content text-center">${"image"===graph.type?"<img>":"<canvas></canvas>"}</div>\n                            </div>\n                        </div>`,section=document.createElement("section");section.innerHTML=baseHTML;section.querySelector(".graph-title").textContent=graph.name;if("image"===graph.type){parent.appendChild(section);this.plotImage(graph,section.querySelector("img"))}else{section.querySelector(".graph-content").style.height="200px";this.plotGraph(graph,section.querySelector("canvas"));parent.appendChild(section)}}plotImage(graph,img){if(!graph.image)return console.error("Cannot paint graph. Type is image, but no image present",graph);console.log("plotImage",graph,img,graph.image);let container=img.parentNode,containerStyle=getComputedStyle(container),containerWidth=container.clientWidth,containerPadLeft=containerStyle.paddingLeft.replace("px",""),containerPadRight=containerStyle.paddingRight.replace("px","");containerWidth-=Number(containerPadLeft||"0")+Number(containerPadRight||"0");img.src="data:"+graph.imageMimeType+";base64,"+graph.image}plotGraph(graph,canvas){if(!graph.X||!graph.y)return console.error("Cannot paint graph. Type is logarithmic or linear, but no X or y",graph);let logarithmicFormatter=function(tickValue,index,ticks){let labelOpts=this.options.ticks.labels||{},labelIndex=labelOpts.index||["min","max"],labelSignificand=labelOpts.significand||[1,2,5],significand=tickValue/Math.pow(10,Math.floor(Chart.helpers.log10(tickValue))),emptyTick=!0===labelOpts.removeEmptyLines?void 0:"",namedIndex="";0===index?namedIndex="min":index===ticks.length-1&&(namedIndex="max");return"all"===labelOpts||-1!==labelSignificand.indexOf(significand)||-1!==labelIndex.indexOf(index)||-1!==labelIndex.indexOf(namedIndex)?0===tickValue?"0":tickValue.toExponential():emptyTick},colors=acquisition_chart_3.AcquisitionChart.getGraphColors(Object.keys(graph.X).length),minIx=graph.y.findIndex(n=>n>=(graph.suggestedXMin||0)),maxIx=graph.y.length-Array.from(graph.y).reverse().findIndex(n=>n<(graph.suggestedXMax||1/0))-1;if(-1!==minIx&&maxIx){graph.y=graph.y.slice(minIx,maxIx);for(let name of Object.keys(graph.X))graph.X[name]=graph.X[name].slice(minIx,maxIx)}let datasets=[];for(let name of Object.keys(graph.X))datasets.push({label:name,data:graph.X[name],borderColor:colors[datasets.length],borderWidth:graph.lineWidth||3});let yAxisType=null,yTicks={};if("logarithmic"===graph.type){yAxisType=graph.type;yTicks={labels:{index:["min","max"],significand:[1],removeEmptyLines:!0},min:graph.suggestedYMin,max:graph.suggestedYMax,userCallback:logarithmicFormatter}}else{yAxisType="linear";yTicks={steps:10,suggestedMin:graph.suggestedYMin,suggestedMax:graph.suggestedYMax}}let config={type:"line",options:{animation:void 0,tooltips:{enabled:!1},events:[],hover:void 0,scales:{yAxes:[{type:yAxisType,display:!0,gridLines:{lineWidth:1,color:Charts.colors.gray[300],zeroLineColor:Charts.colors.gray[300]},scaleLabel:{display:!0},ticks:yTicks}],xAxes:[{ticks:{display:!0,maxRotation:0,minRotation:0,maxTicksLimit:10,min:graph.suggestedXMin,max:graph.suggestedXMax}}]},legend:{display:!1}},data:{labels:graph.y.map(n=>n.toFixed(2)),datasets:datasets}};new Chart(canvas,config).update()}validateForm(){let el=this._formEl,success=!0;for(let child of Array.from(el.querySelectorAll("input"))){child.classList.remove("is-invalid");if("int"===child.dataset.type||"float"===child.dataset.type){if(""===child.value.trim()||isNaN(Number(child.value))&&!child.readOnly){child.classList.add("is-invalid");success=!1}}else if("boolean"===child.dataset.type);else if(""===child.value.trim()&&!child.readOnly){child.classList.add("is-invalid");success=!1}child.readOnly&&"1"!==child.dataset.readonly&&(this._studioApi.isAdmin?child.value="Click to set":child.value="Not set")}return success}async bindSampleSelector(){let query=this.getQuery();if(query.sampleId){console.log("loading",query.sampleId,"startMs",query.startMs);let id=Number(query.sampleId);this._sampleSelector.value=query.sampleId;const onRendered=sampleId=>{this._slidingWindow.off("rendered",onRendered);id===sampleId&&query.startMs&&this._slidingWindow.setPosition(Number(query.startMs))};this._slidingWindow.on("rendered",onRendered)}this._sampleSelector.onchange&&this._sampleSelector.onchange(new CustomEvent("change",{}));window.history.replaceState(null,"",window.location.pathname)}getQuery(){return location.search.replace("?","").split("&").map(d=>d.split("=").map(x=>encodeURIComponent(x))).reduce((curr,v)=>{curr[v[0]]=v[1];return curr},{})}bytesToSize(bytes){if(0===bytes)return"0 Bytes";let i=Number(Math.floor(Math.log(bytes)/Math.log(1024)));return Math.round(bytes/Math.pow(1024,i))+" "+["Bytes","KB","MB","GB","TB"][i]}}}));define("client/project/components/enum-type-helpers",["require","exports","client/api-definition/model/KerasModelTypeEnum","client/api-definition/model/KerasVisualLayerType","client/api-definition/model/AugmentationPolicySpectrogram","client/api-definition/index"],(function(require,exports,KerasModelTypeEnum_2,KerasVisualLayerType_2,AugmentationPolicySpectrogram_2,api_definition_3){Object.defineProperty(exports,"__esModule",{value:!0});exports.EnumTypeHelpers=void 0;exports.EnumTypeHelpers=class{static modelTypeToEnum(modelType){if(modelType&&KerasModelTypeEnum_2.KerasModelTypeEnumValues.includes(modelType))return modelType;throw new Error('Enum value "'+modelType+'" is not known to exist on KerasModelTypeEnum')}static learnBlockTypeToEnum(learnBlockType){if(learnBlockType&&api_definition_3.LearnBlockTypeValues.includes(learnBlockType))return learnBlockType;throw new Error('Enum value "'+learnBlockType+'" is not known to exist on LearnBlockType')}static kerasVisualLayerTypeToEnum(kerasVisualLayerType){if(kerasVisualLayerType&&KerasVisualLayerType_2.KerasVisualLayerTypeValues.includes(kerasVisualLayerType))return kerasVisualLayerType;throw new Error('Enum value "'+kerasVisualLayerType+'" is not known to exist on KerasVisualLayerType')}static gaussianNoiseToEnum(gaussianNoise){if(gaussianNoise&&AugmentationPolicySpectrogram_2.AugmentationPolicySpectrogramGaussianNoiseEnumValues.includes(gaussianNoise))return gaussianNoise;throw new Error('Enum value "'+gaussianNoise+'" is not known to exist on AugmentationPolicySpectrogramGaussianNoiseEnum')}static freqMaskingToEnum(freqMasking){if(freqMasking&&AugmentationPolicySpectrogram_2.AugmentationPolicySpectrogramFreqMaskingEnumValues.includes(freqMasking))return freqMasking;throw new Error('Enum value "'+freqMasking+'" is not known to exist on AugmentationPolicySpectrogramFreqMaskingEnum')}static timeMaskingToEnum(timeMasking){if(timeMasking&&AugmentationPolicySpectrogram_2.AugmentationPolicySpectrogramTimeMaskingEnumValues.includes(timeMasking))return timeMasking;throw new Error('Enum value "'+timeMasking+'" is not known to exist on AugmentationPolicySpectrogramTimeMaskingEnum')}}}));define("shared/keras/keras-visual-layers",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.KerasVisualLayerPresets=void 0;class TransferLearningBaseModels{}TransferLearningBaseModels.mobileNetV1=["transfer_mobilenetv1_a25_d100","transfer_mobilenetv1_a2_d100","transfer_mobilenetv1_a1_d100"];TransferLearningBaseModels.mobileNetV2x96=["transfer_mobilenetv2_a35","transfer_mobilenetv2_a1","transfer_mobilenetv2_a05"];TransferLearningBaseModels.mobileNetV2x160=["transfer_mobilenetv2_160_a1","transfer_mobilenetv2_160_a75","transfer_mobilenetv2_160_a5","transfer_mobilenetv2_160_a35"];TransferLearningBaseModels.mobileNetV2=[...TransferLearningBaseModels.mobileNetV2x96,...TransferLearningBaseModels.mobileNetV2x160];TransferLearningBaseModels.imageClassification=[...TransferLearningBaseModels.mobileNetV1,...TransferLearningBaseModels.mobileNetV2];TransferLearningBaseModels.keywordSpotting=["transfer_kws_mobilenetv1_a1_d100","transfer_kws_mobilenetv2_a35_d100"];TransferLearningBaseModels.objectDetection=["object_ssd_mobilenet_v2_fpnlite_320x320","fomo_mobilenet_v2_a01"];exports.KerasVisualLayerPresets=class{static spectrogramConv1D(reshapeColumns){let layers=[{type:"reshape",columns:reshapeColumns},{type:"conv1d",neurons:8,kernelSize:3,stack:1},{type:"dropout",dropoutRate:.25},{type:"conv1d",neurons:16,kernelSize:3,stack:1}];layers=layers.concat([{type:"dropout",dropoutRate:.25},{type:"flatten"}]);return layers}static spectrogramConv2D(reshapeColumns){let layers=[{type:"reshape",columns:reshapeColumns},{type:"conv2d",neurons:8,kernelSize:3,stack:1},{type:"dropout",dropoutRate:.5},{type:"conv2d",neurons:16,kernelSize:3,stack:1}];layers=layers.concat([{type:"dropout",dropoutRate:.5},{type:"flatten"}]);return layers}static Syntiant(){return[{type:"dense",neurons:256},{type:"dropout",dropoutRate:.2},{type:"dense",neurons:256},{type:"dropout",dropoutRate:.2},{type:"dense",neurons:256},{type:"dropout",dropoutRate:.2}]}}}));define("client/project/components/feature-explorer",["require","exports","client/project/components/acquisition-chart","client/project/components/acquisition-image","client/project/components/sliding-window","shared/wav-helper","client/typed-event-emitter","shared/WebSocketTypes","client/notify","client/ui-helpers","client/project/components/acquisition-video"],(function(require,exports,acquisition_chart_4,acquisition_image_3,sliding_window_3,wav_helper_2,typed_event_emitter_10,WebSocketTypes_6,notify_15,UIHelpers,acquisition_video_4){Object.defineProperty(exports,"__esModule",{value:!0});exports.FeatureExplorer=void 0;UIHelpers=__importStar(UIHelpers);class FeatureExplorer extends typed_event_emitter_10.Emitter{constructor(studioApi,container,dspId,dspType,impulse,category="training"){super();this._lastFeatureIxes=[];this._graphCache={};this._pauseHighlightEvents=!1;this._chartClickReqIx=0;this._studioApi=studioApi;this._featureSelect=container.querySelector(".feature-select");this._axisX=container.querySelector(".feature-axis-x");this._axisY=container.querySelector(".feature-axis-y");this._axisZ=container.querySelector(".feature-axis-z");this._featureExplorerContent=container.querySelector(".feature-explorer-content");this._acquisitionInfo=container.querySelector(".feature-explorer-acquisition-info");this._totalSampleCount=container.querySelector(".feature-explorer-sample-count");this._processedFeatures=container.querySelector(".processed-features");this._dspId=dspId;this._dspType=dspType;this._category=category;this._featureLabels=Array.from(this._axisX.querySelectorAll("option")).map((o,ix)=>o.textContent||"Feature "+ix);if(this._acquisitionInfo&&impulse){let inputBlock=UIHelpers.findInputBlock(impulse,this._dspId),aqChartBody=this._acquisitionInfo.querySelector(".dsp-chart-body"),aqImageBody=this._acquisitionInfo.querySelector(".dsp-image-body"),aqVideoBody=this._acquisitionInfo.querySelector(".dsp-video-body");this._aqChart=new acquisition_chart_4.AcquisitionChart(studioApi,aqChartBody,WebSocketTypes_6.DOWNSAMPLE_SIZE_SHORT,void 0,{legend:{position:"right"}},this._dspId,{width:200,height:void 0});this._aqImage=new acquisition_image_3.AcquisitionImage(studioApi,aqImageBody,void 0,this._dspId);this._aqVideo=new acquisition_video_4.AcquisitionVideo(studioApi,aqVideoBody,void 0,!1,"cropped",this._dspId);this._rawFeaturesPlayer=this._acquisitionInfo.querySelector(".dsp-audio-player");this._slidingWindow=new sliding_window_3.SlidingWindow(this._studioApi,this._aqChart,this._acquisitionInfo.querySelector(".sliding-window"),async(sampleId,startIx,lastIx)=>[[1,2,3]],!1);"time-series"===inputBlock.type&&this._slidingWindow.setWindow(inputBlock.windowSizeMs||0,inputBlock.windowIncreaseMs||0);this._aqChart.on("loaded",()=>{console.log("aqChart loaded");this._slidingWindow&&this._slidingWindow.render()});this._slidingWindow.hide()}}start(){this.selectDefaultAxis();this._featureSelect.style.display="none";this._axisX.oninput=this._axisY.oninput=this._axisZ.oninput=()=>this.loadFeatureExplorer()}update(){return this.loadFeatureExplorer()}async loadFeatureExplorerPlusClassify(id){this._plusClassify=id;this._featureExplorerContent.textContent="Loading...";this._acquisitionInfo&&(this._acquisitionInfo.style.display="none");let featureIxes=[this._axisX.selectedIndex,this._axisY.selectedIndex,this._axisZ.selectedIndex];try{console.time("featureexpl data");let[dataMain,dataClassify]=await Promise.all([(async()=>{let dm=this._graphCache[JSON.stringify(featureIxes)];if(!dm){const{response:response,body:body}=await this._studioApi.dsp.dspSampleTrainedFeatures(this._studioApi.projectId,this._dspId,featureIxes[0],featureIxes[1],featureIxes[2],this._category);if(!body.success)throw new Error(body.error||response.statusText);dm={totalSampleCount:body.totalSampleCount,skipFirstFeatures:body.skipFirstFeatures,data:body.data.map(d=>({X:d.X,y:d.y,yLabel:d.yLabel,sample:d.sample}))};this._graphCache[JSON.stringify(featureIxes)]=dm}return dm})(),(async()=>{let classifyKey=JSON.stringify(featureIxes)+"-"+id,dc=this._graphCache[classifyKey];if(!dc){const{response:response,body:body}=await this._studioApi.dsp.dspGetFeaturesForSample(this._studioApi.projectId,this._dspId,id);if(!body.success)throw new Error(body.error||response.statusText);dc={totalSampleCount:body.totalSampleCount,skipFirstFeatures:body.skipFirstFeatures,data:body.data.map(d=>({X:d.X,y:d.y,yLabel:d.yLabel,sample:d.sample}))};this._graphCache[classifyKey]=dc}return dc})()]);console.timeEnd("featureexpl data");let ix=0;for(let d of dataClassify.data){if(d.sample){d.sample.name?d.text=d.sample.name:d.text="Deleted sample #"+d.sample.id;d.sample.startMs!==d.sample.endMs&&(d.text+=" ("+d.sample.startMs+" - "+d.sample.endMs+" ms.)")}else d.text="Sample "+ix;ix++}this._lastClassifyData=dataClassify;dataClassify.data=dataClassify.data.map(d=>{d.yLabel="classified";return d});let data={totalSampleCount:dataMain.totalSampleCount+dataClassify.totalSampleCount,skipFirstFeatures:dataMain.skipFirstFeatures,data:dataMain.data.concat(dataClassify.data)};console.time("featureexpl render");await this.render(data,featureIxes);console.timeEnd("featureexpl render")}catch(ex2){let ex=ex2;console.error("Ex: ",ex);this._featureExplorerContent.classList.remove("has-content");this._featureExplorerContent.textContent="Error while loading features: "+notify_15.Notify.extractMsg(ex)}}async highlightClassifyItem(index){var _a,_b,_c,_d;if(!this._lastClassifyData||!this._lastData){console.warn("No known last classify data");return}this._studioApi.analytics.event("feature-explorer",{event_category:"highlight-classify"});let{traces:traces,layout:layout}=this.getPlotlyOptions(this._lastData,this._lastFeatureIxes),t=traces.filter(r=>"classified"===r.name)[0];if(t&&t.x&&t.y&&t.z&&t.x instanceof Array&&t.y instanceof Array&&t.z instanceof Array){t.x.splice(index,1);t.y.splice(index,1);t.z.splice(index,1)}t&&t.customdata&&t.customdata instanceof Array&&t.customdata.splice(index,1);let data=this._lastClassifyData.data[index];if(this._processedFeatures&&data.X instanceof Array){let x=data.X.slice(this._lastClassifyData.skipFirstFeatures);this._processedFeatures.textContent=x.map(p=>p.toFixed(4)).join(", ")}let trace={x:[data.X[this._lastFeatureIxes[0]]],y:[data.X[this._lastFeatureIxes[1]]],z:[data.X[this._lastFeatureIxes[2]]],mode:"markers",name:"classification "+index,text:[],marker:{size:12,line:{width:.5},color:"#7FDBFF"},type:"scatter3d",hoverinfo:"none"};traces.push(trace);console.log("traces",traces);if(layout.scene&&layout.scene.camera){let camera=null===(_d=null===(_c=null===(_b=null===(_a=this._featureExplorerContent)||void 0===_a?void 0:_a._fullLayout)||void 0===_b?void 0:_b.scene)||void 0===_c?void 0:_c._scene)||void 0===_d?void 0:_d.getCamera();if(camera){layout.scene.camera.center=camera.center;layout.scene.camera.eye=camera.eye}}this._pauseHighlightEvents=!0;await Plotly.react(this._featureExplorerContent,traces,layout,{displayModeBar:!1,showTips:!1});this._pauseHighlightEvents=!1}updateLabels(labels){let xix=this._axisX.selectedIndex,yix=this._axisY.selectedIndex,zix=this._axisZ.selectedIndex;this._axisX.innerHTML=this._axisY.innerHTML=this._axisZ.innerHTML="";for(let fd of labels)for(let parent of[this._axisX,this._axisY,this._axisZ]){let child=document.createElement("option");child.value=labels.indexOf(fd).toString();child.textContent=fd;parent.appendChild(child)}this._axisX.selectedIndex=xix;this._axisY.selectedIndex=yix;this._axisZ.selectedIndex=zix;this.selectDefaultAxis()}invalidateCache(){this._graphCache={}}setCamera(camera){this._camera=camera}setFeatureAxes(xIx,yIx,zIx){this._axisX.oninput=this._axisY.oninput=this._axisZ.oninput=null;this._axisX.selectedIndex=xIx;this._axisY.selectedIndex=yIx;this._axisZ.selectedIndex=zIx;this._axisX.oninput=this._axisY.oninput=this._axisZ.oninput=()=>this.loadFeatureExplorer()}hideAcquisitionInfo(){this._acquisitionInfo&&(this._acquisitionInfo.style.display="none")}selectDefaultAxis(){this._featureLabels=Array.from(this._axisX.querySelectorAll("option")).map((o,ix)=>o.textContent||"Feature "+ix);if(this._featureLabels.some(s=>s.startsWith("Visualization layer"))){this._axisX.selectedIndex=this._featureLabels.findIndex(s=>"Visualization layer 1"===s);this._axisY.selectedIndex=this._featureLabels.findIndex(s=>"Visualization layer 2"===s);this._axisZ.selectedIndex=this._featureLabels.findIndex(s=>"Visualization layer 3"===s);return}let axisNames=this._featureLabels.map(b=>b.split(" ")[0]),secondAxisIx=axisNames.findIndex(a=>a!==axisNames[0]),secondAxis=axisNames[secondAxisIx],thirdAxisIx=axisNames.findIndex(a=>a!==axisNames[0]&&a!==secondAxis);if(this._axisX.selectedIndex<=0&&this._axisY.selectedIndex<=0&&this._axisZ.selectedIndex<=0){this._axisX.selectedIndex=0;this._axisY.selectedIndex=-1!==secondAxisIx?secondAxisIx:1;this._axisZ.selectedIndex=-1!==thirdAxisIx?thirdAxisIx:2}}getPlotlyOptions(data,featureIxes){let categoriesMin=0,categoriesMax=0,categories=[],categoriesAllNumeric=!1;if(this._samplePredictions){let labels=[...new Set(data.data.map(d=>d.yLabel))].sort();if("regression"===this._samplePredictions.type){categories.push({label:"regression",classification:"correct",hue:70});categories.push({label:"regression",classification:"incorrect",hue:340})}else{let greenHueInterval=Math.floor(75/(labels.length-1)),redHueInterval=Math.floor(35/(labels.length-1)),greenCurrentHue=0,redCurrentHue=0;for(let label of labels)if(this._samplePredictions)if(this._originalClasses&&-1===this._originalClasses.indexOf(label))categories.push({label:label,classification:"none",disabled:!0});else{categories.push({label:label,classification:"correct",hue:70+greenCurrentHue});categories.push({label:label,classification:"incorrect",hue:(340+redCurrentHue)%360});greenCurrentHue+=greenHueInterval;redCurrentHue+=redHueInterval}else categories.push({label:label,classification:"none"})}categories=categories.sort((a,b)=>a.disabled&&b.disabled?0:b.disabled?-1:a.classification===b.classification?0:"correct"===a.classification?-1:1)}else{let labels=[...new Set(data.data.map(d=>d.yLabel).filter(d=>!!d))].sort();categoriesAllNumeric=labels.filter(c=>"classified"!==c&&!c.startsWith("classification")).every(n=>!isNaN(Number(n)));if(categoriesAllNumeric){let categoriesNumeric=labels.map(n=>Number(n)).filter(n=>!isNaN(n)).sort((a,b)=>a-b),categoriesNonNumeric=labels.filter(n=>isNaN(Number(n)));categories=categoriesNumeric.map(n=>n.toString()).concat(categoriesNonNumeric).map(c=>({label:c}));categoriesMin=Math.min(...categoriesNumeric);categoriesMax=Math.max(...categoriesNumeric)}else categories=labels.map(c=>({label:c}))}console.log("categories",categories,"training categories",this._originalClasses);let traces=[],currTraces=this._featureExplorerContent.data||[];for(let c of categories){let d;if(this._samplePredictions&&"regression"===this._samplePredictions.type)if("regression"===c.label&&"correct"===c.classification){let correctIds=this._samplePredictions.data.filter(x=>x.predictionCorrect).map(x=>x.sampleId);d=data.data.filter(e=>e.sample&&correctIds.indexOf(e.sample.id)>-1)}else{if("regression"!==c.label||"incorrect"!==c.classification)throw new Error("Invalid regression category "+JSON.stringify(c));{let incorrectIds=this._samplePredictions.data.filter(x=>!x.predictionCorrect).map(x=>x.sampleId);d=data.data.filter(e=>e.sample&&incorrectIds.indexOf(e.sample.id)>-1)}}else d=data.data.filter(e=>e.yLabel===c.label);for(let l of d)if(!l.text&&l.sample){l.sample.name?l.text=l.sample.name:l.text="Deleted sample #"+l.sample.id;l.sample.startMs!==l.sample.endMs&&(l.text+=" ("+l.sample.startMs+" - "+l.sample.endMs+" ms.)")}if(this._samplePredictions){let predictionsStartMs=[...new Set(this._samplePredictions.data.map(p=>p.startMs))].sort((a,b)=>a-b),samplesStartMs=[...new Set(d.map(p=>{var _a;return(null===(_a=p.sample)||void 0===_a?void 0:_a.startMs)||0}))].sort((a,b)=>a-b),windowSizeFromSamples=d.length>0&&d[0].sample?d[0].sample.endMs-d[0].sample.startMs:0;if(predictionsStartMs.length>=2&&samplesStartMs.length>=2&&predictionsStartMs[1]!==samplesStartMs[1]){let predictionWindowIncrease=predictionsStartMs[1]-predictionsStartMs[0],windowIncrease=samplesStartMs[1]-samplesStartMs[0];for(let p of this._samplePredictions.data){let diff=windowSizeFromSamples||p.endMs-p.startMs;p.startMs=Math.round(p.startMs/predictionWindowIncrease*windowIncrease);p.endMs=p.startMs+diff}}d=d.filter(l=>{if(!this._samplePredictions)return!1;const cols=this._samplePredictions.data.filter(e=>{var _a;return e.sampleId===(null===(_a=l.sample)||void 0===_a?void 0:_a.id)&&e.startMs===l.sample.startMs&&e.endMs===l.sample.endMs});return 1===cols.length&&("boolean"==typeof cols[0].predictionCorrect?cols[0].predictionCorrect?"correct"===c.classification:"incorrect"===c.classification:cols[0].prediction===l.yLabel?"correct"===c.classification:-1===(this._originalClasses||[]).indexOf(l.yLabel)?"none"===c.classification:"incorrect"===c.classification)})}let hue=categoriesAllNumeric&&categoriesMax!==categoriesMin?isNaN(Number(c.label))?330:Math.trunc((Number(c.label)-categoriesMin)/(categoriesMax-categoriesMin)*300):0,trace={x:d.map(l=>l.X[featureIxes[0]]),y:d.map(l=>l.X[featureIxes[1]]),z:d.map(l=>l.X[featureIxes[2]]),mode:"markers",name:"string"==typeof c.classification&&"none"!==c.classification?`${c.label} - ${c.classification}`:c.label,text:d.map(l=>l.text||""),marker:{size:6,line:{width:.5},color:categoriesAllNumeric?this.HSLToRGB(hue,80,50):c.disabled?"rgb(150,150,150)":void 0},type:"scatter3d",hoverinfo:d.length>0&&void 0!==typeof d[0].text?"text":"none",customdata:d.map(l=>JSON.stringify(l.sample))};if(this._samplePredictions&&trace.marker&&"number"==typeof c.hue){let brightness=[50,55,45][categories.indexOf(c)%3];trace.marker.color=this.HSLToRGB(c.hue,80,brightness)}let currTrace=currTraces.find(t=>t.name===c.label);currTrace&&(trace.visible=currTrace.visible);traces.push(trace)}return{traces:traces,layout:{margin:{l:0,r:0,b:0,t:0},scene:{xaxis:{title:this._featureLabels[featureIxes[0]],showspikes:!1,titlefont:{family:"Open Sans, sans-serif",size:14,color:"rgb(136, 152, 170)"}},yaxis:{title:this._featureLabels[featureIxes[1]],showspikes:!1,titlefont:{family:"Open Sans, sans-serif",size:14,color:"rgb(136, 152, 170)"}},zaxis:{title:this._featureLabels[featureIxes[2]],showspikes:!1,titlefont:{family:"Open Sans, sans-serif",size:14,color:"rgb(136, 152, 170)"}},camera:this._camera||{center:{x:-.15673345226171428,y:.17811786710675218,z:-.24074075887056345},eye:{x:-1.9984372195993803,y:-.8924626613789465,z:.16619934407651415}}},showlegend:!0,legend:{x:0,y:1,traceorder:"normal",font:{family:"Open Sans, sans-serif",size:12,color:"rgb(50, 50, 93)"}}}}}async loadFeatureExplorer(){this._studioApi.analytics.event("feature-explorer",{event_category:"load"});if(this._plusClassify)return this.loadFeatureExplorerPlusClassify(this._plusClassify);this._featureExplorerContent.textContent="Loading...";this.selectDefaultAxis();let featureIxes=[this._axisX.selectedIndex,this._axisY.selectedIndex,this._axisZ.selectedIndex];try{let dm=this._graphCache[JSON.stringify(featureIxes)];if(!dm){const{response:response,body:body}=await this._studioApi.dsp.dspSampleTrainedFeatures(this._studioApi.projectId,this._dspId,featureIxes[0],featureIxes[1],featureIxes[2],this._category);if(!body.success)throw new Error(body.error||response.statusText);dm={totalSampleCount:body.totalSampleCount,skipFirstFeatures:body.skipFirstFeatures,data:body.data.map(d=>({X:d.X,y:d.y,yLabel:d.yLabel,sample:d.sample}))};this._graphCache[JSON.stringify(featureIxes)]=dm}await this.render(dm,featureIxes)}catch(ex2){let ex=ex2;console.error("Ex: ",ex);this._featureExplorerContent.classList.remove("has-content");this._featureExplorerContent.textContent="Error while loading features: "+notify_15.Notify.extractMsg(ex)}}async render(data,featureIxes){console.log("render",data,featureIxes);this._featureExplorerContent.dataset.hasFeatures="1";this._featureExplorerContent.classList.add("has-content");this._featureSelect.style.display="block";this._featureExplorerContent.innerHTML="";this._totalSampleCount&&(this._totalSampleCount.textContent="("+data.totalSampleCount.toLocaleString()+" samples)");this._lastData=data;this._lastFeatureIxes=featureIxes;let{traces:traces,layout:layout}=this.getPlotlyOptions(data,featureIxes);await Plotly.newPlot(this._featureExplorerContent,traces,layout,{displayModeBar:!1,showTips:!1});this._featureExplorerContent.on("plotly_click",async ev=>{if(1===ev.points.length)try{let customdata=ev.points[0].customdata;if(!customdata)return;if(!this._acquisitionInfo)return;let reqIx=++this._chartClickReqIx,sampleInfo=JSON.parse(customdata);if(!sampleInfo.name)throw new Error("Sample #"+sampleInfo.id+" was deleted. Regenerate features to retrain your model.");if("classified"===ev.points[0].data.name){this._pauseHighlightEvents||this.emit("highlight-classified",sampleInfo.id,sampleInfo.startMs,sampleInfo.endMs);return}let sr=await this._studioApi.rawData.getSample(this._studioApi.projectId,sampleInfo.id,0);if(!sr.body.success||sr.body.error)throw sr.body.error;if(reqIx!==this._chartClickReqIx)return;console.log("click on data",sr.body.sample);let dspLink,basePath=this._studioApi.baseUrl;dspLink="training"===sr.body.sample.category?basePath+"/dsp/"+this._dspType+"/"+this._dspId+"?sampleId="+encodeURIComponent(sampleInfo.id)+"&startMs="+encodeURIComponent(sampleInfo.startMs)+"&endMs="+encodeURIComponent(sampleInfo.endMs):basePath+"/classification#load-sample-"+encodeURIComponent(sampleInfo.id);let aqLink=basePath+"/acquisition/"+sr.body.sample.category+"?filters= "+encodeURIComponent(JSON.stringify({filename:sr.body.sample.filename}))+"#load-graph-"+sr.body.sample.id,content=this._acquisitionInfo.querySelector(".feature-explorer-acquisition-info-content");content.innerHTML='<div class="row"><strong class="col aqi-filename"></strong></div>';sampleInfo.startMs&&sampleInfo.endMs&&(content.innerHTML+='<div class="row"><div class="col">Window: <span class="aqi-window"></span></div></div>');content.innerHTML+='<div class="row"><div class="col">Label: <span class="aqi-label"></span></div></div>';this._samplePredictions&&(content.innerHTML+='<div class="row"><div class="col">Predicted: <span class="aqi-pred-label"></span></div></div>');content.innerHTML+='<div class="row"><div class="col"><a class="aqi-linkaq text-underline" target="_blank" href="#">View sample</a><br><a class="aqi-link text-underline" target="_blank" href="#"></a></div></div>';content.querySelector(".aqi-filename").textContent=content.querySelector(".aqi-filename").title=sr.body.sample.filename;let win=content.querySelector(".aqi-window");win&&(win.textContent=win.title=sampleInfo.startMs+" - "+sampleInfo.endMs+" ms.");content.querySelector(".aqi-label").textContent=content.querySelector(".aqi-label").title=sr.body.sample.label;content.querySelector(".aqi-link").href=dspLink;content.querySelector(".aqi-link").textContent="training"===sr.body.sample.category?"View features":"View classification";content.querySelector(".aqi-linkaq").href=aqLink;if(this._samplePredictions){const cols=this._samplePredictions.data.filter(e=>sampleInfo&&e.sampleId===sampleInfo.id&&e.startMs===sampleInfo.startMs&&e.endMs===sampleInfo.endMs);1===cols.length&&(content.querySelector(".aqi-pred-label").textContent=content.querySelector(".aqi-pred-label").title=cols[0].prediction)}this._acquisitionInfo&&(this._acquisitionInfo.style.display="block");sr.body.payload.sensors.find(s=>"image"===s.name)&&this._aqImage?await this._aqImage.load(sr.body.sample.id):sr.body.payload.sensors.find(s=>"video"===s.name)&&this._aqVideo?"number"==typeof sampleInfo.startMs&&"number"==typeof sampleInfo.endMs?await this._aqVideo.load(sr.body.sample.id,void 0,void 0,sampleInfo.startMs):await this._aqVideo.load(sr.body.sample.id):this._aqChart&&await this._aqChart.load(sr.body.sample.id);sr.body.payload.sensors.find(s=>"wav"===s.units)&&this._rawFeaturesPlayer&&(async()=>{if(!this._rawFeaturesPlayer)return;this._rawFeaturesPlayer.style.visibility="hidden";let sr2=await this._studioApi.rawData.getSampleSlice(this._studioApi.projectId,sampleInfo.id,sampleInfo.startMs/sr.body.sample.intervalMs,sampleInfo.endMs/sr.body.sample.intervalMs);if(!sr2.body.success||sr2.body.error)throw sr2.body.error;if(reqIx!==this._chartClickReqIx)return;let ix=sr2.body.payload.sensors.findIndex(s=>"wav"===s.units);if(-1===ix)throw new Error("Failed to find WAV sensor axis");let values=sr2.body.payload.values.map(d=>d[ix]),audioUrl=wav_helper_2.WavHelper.buildWavFileBlob(sr2.body.sample.intervalMs,values,0);this._rawFeaturesPlayer.innerHTML="";this._rawFeaturesPlayer.style.display="";this._rawFeaturesPlayer.style.visibility="visible";let audio=document.createElement("audio");audio.controls=!0;audio.src=audioUrl;this._rawFeaturesPlayer.appendChild(audio)})();if(this._slidingWindow&&"number"==typeof sampleInfo.startMs&&"number"==typeof sampleInfo.endMs){console.log("slidingWindow setPosition",sr.body.sample.totalLengthMs,sampleInfo.startMs);this._slidingWindow.hide();this._slidingWindow.show();this._slidingWindow.setPosition(sampleInfo.startMs)}}catch(ex2){let ex=ex2;await notify_15.Notify.alert("Failed to get sample",notify_15.Notify.extractMsg(ex),"error")}});this._featureExplorerContent.on("plotly_relayout",ev=>{let camera=ev["scene.camera"];camera&&camera.center&&camera.eye&&this.emit("camera-changed",{center:{x:camera.center.x||0,y:camera.center.y||0,z:camera.center.z||0},eye:{x:camera.eye.x||0,y:camera.eye.y||0,z:camera.eye.z||0}})});this.emit("feature-axes-changed",featureIxes[0],featureIxes[1],featureIxes[2]);setTimeout(()=>{var _a,_b,_c,_d;let camera=null===(_d=null===(_c=null===(_b=null===(_a=this._featureExplorerContent)||void 0===_a?void 0:_a._fullLayout)||void 0===_b?void 0:_b.scene)||void 0===_c?void 0:_c._scene)||void 0===_d?void 0:_d.getCamera();camera&&this.emit("camera-changed",{center:camera.center,eye:camera.eye})})}setSamplePredictions(predictions,originalClasses){this._featureExplorerContent.textContent="Loading...";this._samplePredictions=predictions;this._originalClasses=originalClasses;this._acquisitionInfo&&(this._acquisitionInfo.style.display="none")}HSLToRGB(h,s,l){s/=100;l/=100;let c=(1-Math.abs(2*l-1))*s,x=c*(1-Math.abs(h/60%2-1)),m=l-c/2,r=0,g=0,b=0;if(0<=h&&h<60){r=c;g=x;b=0}else if(60<=h&&h<120){r=x;g=c;b=0}else if(120<=h&&h<180){r=0;g=c;b=x}else if(180<=h&&h<240){r=0;g=x;b=c}else if(240<=h&&h<300){r=x;g=0;b=c}else if(300<=h&&h<360){r=c;g=0;b=x}r=Math.round(255*(r+m));g=Math.round(255*(g+m));b=Math.round(255*(b+m));return"rgb("+r+","+g+","+b+")"}}exports.FeatureExplorer=FeatureExplorer}));define("client/project/components/confusion-matrix",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.ConfusionMatrix=void 0;const reportKeys=["f1-score","precision","recall"];exports.ConfusionMatrix=class{static showMatrix(confusion,actualClassNames,predictedClassNames,values,reports,isMini=!1){confusion.innerHTML="";isMini&&confusion.classList.add("mini-confusion-matrix");for(let d of Array.from(confusion.querySelectorAll(".generated")).map(n=>n))d.parentNode&&d.parentNode.removeChild(d);let tableHead=document.createElement("thead");tableHead.classList.add("thead-light","text-center","border-left","border-right");let confusionHead=document.createElement("tr"),tableHeadEmpty=document.createElement("th");tableHeadEmpty.classList.add("empty");confusionHead.appendChild(tableHeadEmpty);tableHead.appendChild(confusionHead);confusion.appendChild(tableHead);isMini&&(tableHead.style.visibility="collapse");let confusionBody=document.createElement("tbody");confusion.appendChild(confusionBody);if(actualClassNames.length>=20){this.showReportsMatrix(confusionHead,confusionBody,predictedClassNames,reports);return}if(!isMini)for(let k1 of predictedClassNames)if(!isMini){let th=document.createElement("th");th.textContent=k1;th.classList.add("generated");th.title=`Predicted label\n${k1}`;th.style.width=Math.floor(100/(predictedClassNames.length+1))+"%";confusionHead.appendChild(th)}for(let k1 of actualClassNames){let k1Ix=actualClassNames.indexOf(k1);if(void 0===values[k1Ix])continue;let tr=document.createElement("tr");confusionBody.appendChild(tr);if(isMini)tr.style.height=Math.floor(100/predictedClassNames.length)+"%";else{let th2=document.createElement("th");th2.textContent=k1;th2.classList.add("thead-light");th2.classList.add("generated");th2.classList.add("border-left");th2.title=`Actual label\n${k1}`;th2.style.width=Math.floor(100/(actualClassNames.length+1))+"%";tr.appendChild(th2)}for(let k2 of predictedClassNames){let k2Ix=predictedClassNames.indexOf(k2),td=document.createElement("td");td.classList.add("text-center");td.classList.add("generated");isMini&&(td.style.width=Math.floor(100/predictedClassNames.length)+"%");k1Ix===k2Ix&&(td.style.fontWeight="600");if(void 0!==values[k1Ix]&&void 0!==values[k1Ix][k2Ix]){let total=values[k1Ix].reduce((a,b)=>a+b,0);if(total>0){let percentage=100*values[k1Ix][k2Ix]/total;isNaN(percentage)&&(percentage=0);Math.round(percentage)!==Number(percentage)?td.textContent=percentage.toFixed(1):td.textContent=percentage.toFixed(0);isMini||(td.textContent+="%");this.setMatrixCellColor(td,k2,k1,percentage);td.dataset.toggle="tooltip";const accuracyText=k2===k1?"Accuracy":"Error";td.title=td.dataset.originalTitle=`${accuracyText}: ${td.textContent} `+`(${values[k1Ix][k2Ix]} / ${total})\n`+"Actual label: "+actualClassNames[k1Ix]+"\nPredicted label: "+predictedClassNames[k2Ix]}else{td.textContent="-";td.dataset.toggle="tooltip";td.title=td.dataset.originalTitle="Actual label: "+actualClassNames[k1Ix]+"\nNo test data available."}$(td).tooltip()}predictedClassNames[predictedClassNames.length-1]===k2&&td.classList.add("border-right");tr.appendChild(td)}}if(0===Object.keys(reports).length)return;let trReport=document.createElement("tr");confusionBody.appendChild(trReport);let thReport=document.createElement("th");thReport.textContent=thReport.title="f1 score";thReport.classList.add("thead-light");thReport.classList.add("generated");thReport.classList.add("border-left");trReport.appendChild(thReport);for(let k2 of predictedClassNames){let k2Ix=predictedClassNames.indexOf(k2),td=document.createElement("td");td.classList.add("text-center");td.classList.add("generated");let report=reports[k2Ix];if(void 0!==report){let score=Number(report["f1-score"]);td.textContent=score.toFixed(2);td.dataset.toggle="tooltip";let reportText=[`Class: ${k2}`,...reportKeys.map(key=>`${key}: ${Number(report[key]).toFixed(2)}`)].join("\n");td.title=td.dataset.originalTitle=reportText;$(td).tooltip()}trReport.appendChild(td)}}static showReportsMatrix(confusionHead,confusionBody,predictedClassNames,reports){for(let k1 of reportKeys){let th=document.createElement("th");th.textContent=k1;th.classList.add("generated");th.style.width=Math.floor(100/(reportKeys.length+1))+"%";confusionHead.appendChild(th)}for(let ix=0;ix<predictedClassNames.length;ix++){if(void 0===reports[ix.toString()])continue;let tr=document.createElement("tr");confusionBody.appendChild(tr);let nameTh=document.createElement("th");nameTh.textContent=predictedClassNames[ix];nameTh.classList.add("thead-light","generated","border-left");tr.appendChild(nameTh);for(let k1 of reportKeys){if(void 0===reports[ix.toString()][k1])continue;let scoreTd=document.createElement("td");const score=Number(reports[ix.toString()][k1]);scoreTd.textContent=score.toFixed(2);tr.appendChild(scoreTd);scoreTd.classList.add("text-center","generated");this.setMatrixCellColor(scoreTd,score>=.7?"":" ","",score>=.7?100*score:100-100*score)}}}static setMatrixCellColor(cell,trueLabel,predictedLabel,percentage){let aValue=percentage/100;if(predictedLabel===trueLabel){cell.style.backgroundColor=`rgba(45, 206, 137, ${aValue})`;percentage>=70&&(cell.style.color="white")}else{cell.style.backgroundColor=`rgba(245, 54, 92, ${aValue})`;percentage>=30&&(cell.style.color="white")}}}}));define("client/project/components/output-log",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.OutputLog=void 0;exports.OutputLog=class{constructor(elements){this._elements=elements;this._elements.collapse&&(this._elements.collapse.onclick=ev=>{ev.preventDefault();this.collapse()});this._elements.expand&&(this._elements.expand.onclick=ev=>{ev.preventDefault();this.expand()})}expand(){if(this._elements.body&&this._elements.collapse&&this._elements.expand){this._elements.body.style.display="";this._elements.expand.style.display="none";this._elements.collapse.style.display=""}}collapse(){if(this._elements.body&&this._elements.collapse&&this._elements.expand){this._elements.body.style.display="none";this._elements.expand.style.display="";this._elements.collapse.style.display="none"}}}}));define("client/project/pages/training-keras-ui",["require","exports","client/project/components/job-runner","shared/WebSocketTypes","client/notify","client/project/components/enum-type-helpers","shared/keras/keras-visual-layers","client/project/components/feature-explorer","client/project/components/block-version-header","client/ui-helpers","client/project/components/confusion-matrix","client/global-ui","client/project/components/output-log"],(function(require,exports,job_runner_4,WebSocketTypes_7,notify_16,enum_type_helpers_1,keras_visual_layers_1,feature_explorer_1,block_version_header_2,UIHelpers,confusion_matrix_1,global_ui_6,output_log_1){Object.defineProperty(exports,"__esModule",{value:!0});exports.TrainingKerasUI=void 0;UIHelpers=__importStar(UIHelpers);exports.TrainingKerasUI=class{constructor(studioApi){var _a;this._confidenceRatingEl=document.querySelector("#confidence-rating");this._trainingCyclesEl=document.querySelector("#training-cycles");this._learningRateEl=document.querySelector("#learning-rate");this._trainTestSplitEl=document.querySelector("#train-test-split");this._balanceClassWeightsEl=document.querySelector("#balance-class-weights");this._augmentationPolicyImageCheckboxEl=document.querySelector("#augmentation-policy-image");this._augmentationPolicySpectrogramCheckboxEl=document.querySelector("#augmentation-policy-spectrogram-enabled");this._augmentationPolicySpectrogramGaussianNoiseEl=document.querySelector("#augmentation-policy-spectrogram-gaussian-noise");this._augmentationPolicySpectrogramFreqMaskingEl=document.querySelector("#augmentation-policy-spectrogram-freqmasking");this._augmentationPolicySpectrogramTimeMaskingEl=document.querySelector("#augmentation-policy-spectrogram-timemasking");this._augmentationPolicySpectrogramWarpingEl=document.querySelector("#augmentation-policy-spectrogram-warping");this._augmentationPolicySpectrogramConfigEls=document.querySelectorAll(".augmentation-policy-spectrogram-config");this._origText="";this._hasTrainedModel=!1;this._mode=document.querySelector(".keras-mode-visual")?"visual":"expert";this._addLayer=document.querySelector(".keras-visual-editor-add-layer");this._visualLayers=[];this._showSpectrogramTools="true"===document.querySelector("#show-spectrogram-tools").value;this._modelMetadataEls={dropdownTemplate:document.querySelector("#training-metadata-dropdown-template"),metadataTemplate:document.querySelector("#training-metadata-template"),retrainWarning:document.querySelector("#retrain-warning"),dropdownBtn:document.querySelector("#model-type-dropdown"),dropdownBtnText:document.querySelector("#model-type-dropdown .btn-inner--text"),dropdownOptions:document.querySelector("#model-type-dropdown-elements"),containerInner:document.querySelector("#training-metadata-inner")};this._visualEditorRowTemplate=document.querySelector("#visual-editor-row");this._visualEditorRowTransferLearningModelTemplate=document.querySelector("#visual-editor-row-transfer-learning-model");this._hasEon="1"===document.querySelector("#has-eon").value;this._visualPresetButtons=document.querySelector(".keras-visual-preset-buttons");this._defaultReshapeColumnsElement=document.querySelector("#default-reshape-columns");this._featureExplorer={int8:void 0,float32:void 0};this._trainingOutputEls={collapse:document.querySelector("#training-output-collapse"),expand:document.querySelector("#training-output-expand"),body:document.querySelector("#training-output"),section:document.querySelector("#training-output-section")};this._studioApi=studioApi;this._blockVersionHeader=block_version_header_2.BlockVersionHeader.createWithDefaultHTML("learn",this._studioApi);this._learnId=Number(document.querySelector("#learn-id").value);this._learnType=enum_type_helpers_1.EnumTypeHelpers.learnBlockTypeToEnum(document.querySelector("#learn-type").value);console.log("learnId",this._learnId);console.log("learnType",this._learnType);this._metadataChangedSocketEventName=`keras-metadata-changed-${this._studioApi.projectId}`;const impulseEl=document.querySelector("#impulse");this._impulse=JSON.parse(decodeURIComponent(impulseEl.value));const learnBlock=this._impulse.learnBlocks.find(b=>b.id===this._learnId);if(!learnBlock)throw new Error(`Learn block with ID ${this._learnId} was not found in impulse data`);this._learnBlock=learnBlock;this._outputLog=new output_log_1.OutputLog(this._trainingOutputEls);if(UIHelpers.checkForDependencyError())return;let editorEl=document.querySelector("#neural-network-editor");this._editor=ace.edit(editorEl);ace.config.setModuleUrl("ace/mode/python",this._studioApi.staticAssetsPrefix+"/ace/mode-python.js");this._editor.session.setMode("ace/mode/python");this._editor.setOption("wrap","free");let iPythonLink=document.querySelector("#ipython-link");if(this._studioApi.isAdmin){iPythonLink.href=`/v1/api/${this._studioApi.projectId}`+`/training/keras/${this._learnId}/ipynb`;iPythonLink.addEventListener("click",async ev=>{ev.preventDefault();this._studioApi.analytics.event("click",{event_category:"keras",event_label:"ipython"});if("keras-object-detection"===this._learnType){notify_16.Notify.alert("Notebook not available","iPython notebooks are not currently supported for object detection models.","info");return}let spectrogramAugmentation=this.getSelectedAugmentationPolicySpectrogram();if(spectrogramAugmentation&&spectrogramAugmentation.enabled)notify_16.Notify.alert("Notebook not available","iPython notebooks are not currently supported when data augmentation is enabled for audio. Disable data augmentation to export a notebook.","info");else{"expert"===this._mode&&notify_16.Notify.alert("Notebook may require modification","iPython notebooks exported from Keras (expert) mode may include Edge Impulse dependencies and sometimes require modification to run successfully.","warning");await this.saveKerasConfig();window.location.href=iPythonLink.href}})}else iPythonLink.onclick=ev=>{ev.preventDefault();notify_16.Notify.alert("First clone this project","Clone this project to edit this block as an iPython notebook!","info")};document.querySelector('*[data-action="expert"]').onclick=async ev=>{ev.preventDefault();if(!this._studioApi.isAdmin)return notify_16.Notify.alert("First clone this project","Clone this project to directly edit the Keras code for this block!","info");try{await this.saveKerasConfig("expert");location.reload()}catch(ex2){let ex=ex2;notify_16.Notify.alert("Failed to switch to expert mode",notify_16.Notify.extractMsg(ex),"danger")}};document.querySelector('*[data-action="visual"]').onclick=async ev=>{ev.preventDefault();if(!this._studioApi.isAdmin)return notify_16.Notify.alert("First clone this project","Clone this project to switch to visual mode!","info");try{if(!await notify_16.Notify.confirm("Switching to visual mode","Are you sure you want to continue? This will clear out your current configuration.","Yes, switch","question","danger"))return;let setConfig=await this._studioApi.learn.setKeras(this._studioApi.projectId,this._learnId,{mode:"visual",script:""});if(!setConfig.body||!setConfig.body.success)throw setConfig.body&&setConfig.body.error||setConfig.response.responseText;location.reload()}catch(ex2){let ex=ex2;notify_16.Notify.alert("Failed to switch to visual mode",notify_16.Notify.extractMsg(ex),"danger")}};this._trainingOutputEls.section&&(this._jobRunner=new job_runner_4.JobRunner(this._studioApi,this._trainingOutputEls.section));this._trainingBtn=document.querySelector("#train");this._trainingBtn&&(this._trainingBtn.onclick=ev=>{ev.preventDefault();this.startTraining()});this._optimizeBtn=document.querySelector("#optimize-link");this._optimizeBtn&&(this._optimizeBtn.onclick=ev=>{ev.preventDefault();this.saveKerasConfig()});this._origText=(null===(_a=this._trainingBtn)||void 0===_a?void 0:_a.textContent)||"";this._augmentationPolicySpectrogramCheckboxEl&&(this._augmentationPolicySpectrogramCheckboxEl.onchange=async ev=>{let shouldHide=!this._augmentationPolicySpectrogramCheckboxEl||!this._augmentationPolicySpectrogramCheckboxEl.checked;this._augmentationPolicySpectrogramConfigEls.forEach(element=>{element.hidden=shouldHide})});this._visualLayers=JSON.parse(decodeURIComponent(document.querySelector("#visual-layers").value));for(let v of this._visualLayers)this.addVisualLayer(v);this.configureAddLayerButtons();this._visualPresetButtons&&(this._visualPresetButtons.onclick=async ev=>{if(ev.target&&"BUTTON"===ev.target.nodeName){let presetName=ev.target.dataset.presetName;presetName&&await this.useNetworkPreset(presetName)}});this._studioApi.socket.addEventListener("connect",this.checkForRunningProcess.bind(this));this.syncMetadata().then(this.refreshMetadataUI.bind(this))}async jobFinished(message){if(message.jobId===this._currJobId){this._studioApi.analytics.event("job-finish-"+(message.success?"success":"fail"),{event_category:"keras"});if(message.success){let i=document.querySelector('a[href="'+location.pathname+'"].nav-link i');if(i){i.classList.remove("text-gray");i.classList.add("text-green")}await this.syncMetadata(!0)}this.refreshMetadataUI();this.enableUI()}}enableUI(){if(this._trainingBtn){this._trainingBtn.classList.remove("disabled");this._trainingBtn.textContent=this._origText}this._optimizeBtn&&this._optimizeBtn.classList.remove("disabled")}disableUI(){this._optimizeBtn&&this._optimizeBtn.classList.add("disabled");if(this._trainingBtn){this._trainingBtn.classList.add("disabled");this._trainingBtn.textContent="Training..."}this._outputLog.expand()}getEditor(){if(!this._editor)throw new Error("Editor was not set by constructor");return this._editor}async saveKerasConfig(switchToMode){let opts={mode:this._mode,minimumConfidenceRating:this._confidenceRatingEl?Number(this._confidenceRatingEl.value):void 0};if("visual"===opts.mode&&this._learningRateEl&&this._trainingCyclesEl){opts.learningRate=Number(this._learningRateEl.value);opts.trainTestSplit=this._trainTestSplitEl?Number(this._trainTestSplitEl.value)/100:void 0;opts.trainingCycles=Number(this._trainingCyclesEl.value);opts.visualLayers=this._visualLayers;opts.augmentationPolicyImage=this.getSelectedAugmentationPolicyImage();opts.augmentationPolicySpectrogram=this.getSelectedAugmentationPolicySpectrogram();opts.autoClassWeights=this._balanceClassWeightsEl?this._balanceClassWeightsEl.checked:void 0;"expert"===switchToMode&&(opts.mode="expert")}else opts.script=this.getEditor().getValue();let setConfig=await this._studioApi.learn.setKeras(this._studioApi.projectId,this._learnId,opts);if(!setConfig.body||!setConfig.body.success)throw setConfig.body&&setConfig.body.error||setConfig.response.responseText}async startTraining(){if(this._jobRunner)try{this.disableUI();this._studioApi.analytics.event("start-job",{event_category:"keras"});let opts={minimumConfidenceRating:this._confidenceRatingEl?Number(this._confidenceRatingEl.value):void 0};if("expert"===this._mode)opts.script=this.getEditor().getValue();else if(this._learningRateEl&&this._trainingCyclesEl){opts.learningRate=Number(this._learningRateEl.value);opts.trainTestSplit=this._trainTestSplitEl?Number(this._trainTestSplitEl.value)/100:void 0,opts.autoClassWeights=this._balanceClassWeightsEl?this._balanceClassWeightsEl.checked:void 0;opts.trainingCycles=Number(this._trainingCyclesEl.value);opts.visualLayers=this._visualLayers;opts.augmentationPolicyImage=this.getSelectedAugmentationPolicyImage();opts.augmentationPolicySpectrogram=this.getSelectedAugmentationPolicySpectrogram()}this._currJobId=await this._jobRunner.startJob(this._studioApi.jobs.trainKerasJob(this._studioApi.projectId,this._learnId,opts));this._studioApi.socket.addEventListener(this._metadataChangedSocketEventName,this.jobFinished.bind(this))}catch(ex2){let ex=ex2;this.enableUI();this._jobRunner.startJobFailed(ex)}}async syncMetadata(expectMetadata=!1){let metadataRes=await this._studioApi.learn.getKerasMetadata(this._studioApi.projectId,this._learnId);if(metadataRes.body&&metadataRes.body.success)if(void 0!==metadataRes.body.model_validation_metrics&&metadataRes.body.model_validation_metrics.length>0){this._hasTrainedModel=!0;this._modelMetadata=metadataRes.body}else{this._hasTrainedModel=!1;this._modelMetadata=void 0}else{if(expectMetadata){let error=metadataRes.body&&metadataRes.body.error||"";await notify_16.Notify.alert("There was a problem fetching model metadata",error,"warning")}this._hasTrainedModel=!1;this._modelMetadata=void 0}}refreshMetadataUI(){let container=document.querySelector("#training-metadata");this._featureExplorer={int8:void 0,float32:void 0};container.style.visibility="hidden";if(!this._hasTrainedModel||!this._modelMetadata||!this._modelMetadata.hasTrainedModel)return;let metadata=this._modelMetadata;"requiresRetrain"===metadata.recommended_model_type?this._modelMetadataEls.retrainWarning.style.display="":this._modelMetadataEls.retrainWarning.style.display="none";let sortedModels=metadata.model_validation_metrics.sort((a,b)=>a.type===metadata.recommended_model_type?-1:b.type===metadata.recommended_model_type?1:a.type.toString().localeCompare(b.type.toString())),newElements=sortedModels.map((modelData,index)=>{let element=this.populateMetadataTemplate(this._modelMetadataEls.metadataTemplate,metadata,modelData);if(0===index){element.style.display="";setTimeout(async()=>{await this.renderFeatureExplorer(element,this._impulse,metadata,modelData)},1)}return element}),newDropdowns=sortedModels.map(modelData=>{let dropdown=this.populateMetadataDropdownTemplate(this._modelMetadataEls.dropdownTemplate,metadata,modelData);dropdown.onclick=this.modelTypeDropdownClickHandler.bind(this);return dropdown});this._modelMetadataEls.dropdownBtnText.textContent=this.getModelFriendlyName(sortedModels[0].type);this._modelMetadataEls.containerInner.innerHTML="";this._modelMetadataEls.dropdownOptions.innerHTML="";newElements.forEach(element=>{this._modelMetadataEls.containerInner.append(element)});newDropdowns.forEach(tab=>{this._modelMetadataEls.dropdownOptions.appendChild(tab)});this._modelMetadataEls.dropdownBtn.style.display="";container.style.visibility="visible";container.style.display="block"}async modelTypeDropdownClickHandler(ev){ev.preventDefault();let modelTypeString=ev.currentTarget.dataset.modelType;if(!modelTypeString)throw new Error("No valid modelType on anchor dataset");await this.switchToModelTypePanel(enum_type_helpers_1.EnumTypeHelpers.modelTypeToEnum(modelTypeString))}async switchToModelTypePanel(modelType){let panelId=this.getPanelId(modelType);this._modelMetadataEls.dropdownBtnText.textContent=this.getModelFriendlyName(modelType);document.querySelectorAll(".training-metadata-item").forEach(panel=>{panel.style.display="none"});let selectedPanel=document.querySelector("#"+panelId);if(!selectedPanel)throw new Error("No panel matching id "+panelId);selectedPanel.style.display="";if(this._modelMetadata){const metrics=this._modelMetadata.model_validation_metrics.find(x=>x.type===modelType);metrics&&this.renderFeatureExplorer(selectedPanel,this._impulse,this._modelMetadata,metrics)}}getModelFriendlyName(modelType){switch(modelType){case"int8":return"Quantized (int8)";case"float32":return"Unoptimized (float32)"}return modelType.toString()}getPanelId(modelType){return"panel-"+modelType.toString()}async checkForRunningProcess(){if(!this._studioApi.isAdmin||!this._jobRunner)return;let job=await this._jobRunner.getActiveJob(WebSocketTypes_7.JOB_KEY_PREFIX.learnTrain+"-"+this._learnId);if(job){this._currJobId=job.id;this.disableUI();await this._jobRunner.resumeJob(job.id);this._studioApi.socket.addEventListener(this._metadataChangedSocketEventName,this.jobFinished.bind(this))}}populateMetadataDropdownTemplate(template,metadata,metrics){let clone=template.content.cloneNode(!0);if(!clone.firstElementChild)throw new Error("Template was empty");let anchor=clone.firstElementChild;anchor.id="dropdown-"+metrics.type;anchor.dataset.modelType=metrics.type.toString();let label=anchor.querySelector(".item-label");if(!label)throw new Error("Dropdown was missing .item-label element");label.textContent=this.getModelFriendlyName(metrics.type);return clone.firstElementChild}populateMetadataTemplate(template,metadata,metrics){let clone=template.content.cloneNode(!0),element=clone.firstElementChild;if(!element)throw new Error("Template was empty");element.id=this.getPanelId(metrics.type);let performance=metrics.onDevicePerformance.find(x=>x.isDefault),totalCalculations=metadata.layers.reduce((curr,l)=>curr+=l.input.shape*l.output.shape,0),peakMemory=metadata.layers.map(l=>l.input.shape*l.output.shape).sort((a,b)=>b-a)[0];if("int8"===metrics.type){peakMemory/=4;totalCalculations/=4}let perf=performance?this._hasEon?performance.eon:performance.tflite:null,ui={"metadata-accuracy":void 0!==metrics.accuracy?(100*metrics.accuracy).toFixed(1)+"%":"-","metadata-loss":global_ui_6.GlobalUI.toFixedLocaleString(metrics.loss,2),"metadata-time":performance&&performance.latency?global_ui_6.GlobalUI.toFixedLocaleString(performance.latency,0)+" ms.":"-","metadata-memory":perf&&perf.ramRequired?global_ui_6.GlobalUI.createMemString(perf.ramRequired):"Retrain to reveal","metadata-size":perf&&perf.romRequired?global_ui_6.GlobalUI.createMemString(perf.romRequired):"Retrain to reveal"};for(let k of Object.keys(ui)){let obj=clone.querySelector("."+k);if(obj){obj.textContent=ui[k];"Retrain to reveal"===ui[k]?obj.classList.add("model-retrain-to-reveal-lg"):obj.classList.remove("model-retrain-to-reveal-lg")}else console.warn("Cannot find ."+k)}let confusionSection=clone.querySelector(".confusion-matrix-section");!metrics.confusion_matrix||metrics.confusion_matrix.length>0?confusionSection.style.display="":confusionSection.style.display="none";let confusion=clone.querySelector(".confusion-matrix");confusion_matrix_1.ConfusionMatrix.showMatrix(confusion,metadata.class_names,metadata.class_names,metrics.confusion_matrix,metrics.report);$(element.querySelectorAll(".fa-question-circle")).tooltip();return element}addVisualLayer(v){var _a,_b;let isSyntiant=this._impulse.dspBlocks.some(d=>"syntiant"===d.type),row=document.createElement("div");row.classList.add("row");row.classList.add("keras-visual-editor-row");row.classList.add("keras-visual-editor-row-editable");let btn=document.querySelector(`.add-btn[data-type="${v.type}"]`),tl=null;btn&&(tl=this.getTransferLearningBlock(btn));if(tl){row.innerHTML=this._visualEditorRowTransferLearningModelTemplate.innerHTML;tl.hasDropout||null===(_a=row.querySelector(".edit-dropout"))||void 0===_a||_a.remove();tl.hasNeurons||null===(_b=row.querySelector(".edit-neurons"))||void 0===_b||_b.remove()}else row.innerHTML=this._visualEditorRowTemplate.innerHTML;if("flatten"===v.type||"batchNormalization"===v.type)row.querySelector('*[data-action="edit"]').style.display="none";else if("dense"===v.type){isSyntiant&&(row.querySelector('*[data-action="edit"]').style.display="none");row.querySelector('*[data-action="edit"]').onclick=async ev=>{ev.preventDefault();let nv=await notify_16.Notify.prompt("Number of neurons","Enter the new number of neurons for this layer","OK",(v.neurons||0).toString(),"question","info");if(nv&&!isNaN(Number(nv))){v.neurons=Number(nv);this.setVisualLayerText(v,row.querySelector(".keras-visual-editor-row-title"))}}}else if("conv1d"===v.type||"conv2d"===v.type)row.querySelector('*[data-action="edit"]').onclick=async ev=>{ev.preventDefault();let nv=await notify_16.Notify.prompt("Number of filters","Enter the new number of filters for this layer","OK",(v.neurons||0).toString(),"question","info");if(nv&&!isNaN(Number(nv))){v.neurons=Number(nv);this.setVisualLayerText(v,row.querySelector(".keras-visual-editor-row-title"))}};else if("reshape"===v.type){let edit=row.querySelector('*[data-action="edit"]');edit.title="Edit number of columns";edit.onclick=async ev=>{ev.preventDefault();let nv=await notify_16.Notify.prompt("Number of columns","Enter the new number of columns for this layer","OK",(v.columns||0).toString(),"question","info");if(nv&&!isNaN(Number(nv))){v.columns=Number(nv);this.setVisualLayerText(v,row.querySelector(".keras-visual-editor-row-title"))}}}else if("dropout"===v.type){let edit=row.querySelector('*[data-action="edit"]');edit.title="Edit dropout rate";edit.onclick=async ev=>{ev.preventDefault();let nv=await notify_16.Notify.prompt("Dropout rate","Enter the new dropout rate for this layer (between 0 and 1)","OK",(v.dropoutRate||0).toString(),"question","info");if(!nv)return;let value=Number(nv);if(!isNaN(value)){if(value<0||value>1){notify_16.Notify.alert("Invalid dropout rate","Rate must be a fraction between 0 and 1.","danger");return}v.dropoutRate=value;this.setVisualLayerText(v,row.querySelector(".keras-visual-editor-row-title"))}}}else tl&&tl.hasNeurons&&(row.querySelector('*[data-action="edit"]').onclick=async ev=>{ev.preventDefault();let nv=await notify_16.Notify.prompt("Number of neurons","Enter the new number of neurons for the model's final dense layer. Has a significant impact on the model's size. Reduce this value if the model seems to be overfitting, or increase if the model is underfitting. Set to 0 to omit the layer entirely.","OK",(v.neurons||0).toString(),"question","info");if(nv&&!isNaN(Number(nv))){v.neurons=Number(nv);this.setVisualLayerText(v,row.querySelector(".keras-visual-editor-row-title"))}});if(tl&&tl.hasDropout){let editDropout=row.querySelector('*[data-action="edit-dropout"]');editDropout.style.display="";editDropout.onclick=async ev=>{ev.preventDefault();let nv=await notify_16.Notify.prompt("Dropout rate","Enter the new dropout rate for the model's final layer (between 0 and 1). Helps avoid overfitting, but will impact performance if too high. Default: 0.1","OK",(v.dropoutRate||0).toString(),"question","info");if(!nv)return;let value=Number(nv);if(!isNaN(value)){if(value<0||value>1){notify_16.Notify.alert("Invalid dropout rate","Rate must be a fraction between 0 and 1.","danger");return}v.dropoutRate=value;this.setVisualLayerText(v,row.querySelector(".keras-visual-editor-row-title"))}}}if("conv1d"===v.type||"conv2d"===v.type){row.querySelector('*[data-action="edit"]').title="Edit number of filters";let editKernel=row.querySelector('*[data-action="edit-kernel"]');editKernel.style.display="";editKernel.onclick=async ev=>{ev.preventDefault();let nv=await notify_16.Notify.prompt("Kernel size","Enter the new kernel size for this layer","OK",(v.kernelSize||0).toString(),"question","info");if(nv&&!isNaN(Number(nv))){v.kernelSize=Number(nv);this.setVisualLayerText(v,row.querySelector(".keras-visual-editor-row-title"))}}}if("conv1d"===v.type||"conv2d"===v.type){let editStack=row.querySelector('*[data-action="edit-stack"]');editStack.style.display="";editStack.onclick=async ev=>{ev.preventDefault();let nv=await notify_16.Notify.prompt("Number of convolutional layers","Enter the new number of convolutional layers for this layer (1-3)","OK",(v.stack||1).toString(),"question","info");if(!nv)return;let value=Number(nv);if(!isNaN(value)){if(value<1||value>3){notify_16.Notify.alert("Invalid number of convolutional layers","Number must be an integer between 1 and 3.","danger");return}v.stack=value;this.setVisualLayerText(v,row.querySelector(".keras-visual-editor-row-title"))}}}let clone,startX=0,startY=0,elHeight=0,elWidth=0,dragging=!1,allOffsets=[];function setAllOffsets(){allOffsets=Array.from(document.querySelectorAll(".keras-visual-editor .keras-visual-editor-row-editable")).map(r=>{let rect=r.getBoundingClientRect();if(r===row){elHeight=rect.height;elWidth=rect.width}return{clientX:rect.left+window.scrollX,clientY:rect.top+window.scrollY,row:r}});let myIx=allOffsets.findIndex(a=>a.row===row);myIx>0&&(allOffsets[myIx-1].clientY+=Math.floor(.5*elHeight))}row.querySelector('*[data-action="reorder"]').onmousedown=ev=>{ev.preventDefault();startX=ev.pageX;startY=ev.pageY;let rect=row.getBoundingClientRect();clone=row.cloneNode(!0);clone.style.position="absolute";clone.style.top=rect.top+window.scrollY+"px";clone.style.left=rect.left+15+window.scrollX+"px";clone.style.width=rect.width+"px";clone.style.height=rect.height+"px";clone.style.zIndex="1000";let edit=Array.from(clone.querySelectorAll(".keras-visual-editor-drag, .keras-visual-editor-edit"));for(let ed of edit)ed.style.display="none";row.style.visibility="hidden";row.classList.add("dragging");document.body.appendChild(clone);setAllOffsets();dragging=!0};window.addEventListener("mousemove",ev=>{if(!dragging)return;let newOrder=allOffsets.filter(o=>o.row!==row).concat({clientX:ev.pageX,clientY:ev.pageY,row:row}).sort((a,b)=>a.clientY-b.clientY);newOrder=newOrder.filter((n,ix)=>newOrder[ix]!==allOffsets[ix]);if(2===newOrder.length){let firstIx=allOffsets.findIndex(n=>newOrder[0].row===n.row),secondIx=allOffsets.findIndex(n=>newOrder[1].row===n.row);if(-1===firstIx||-1===secondIx)return;let tmp=this._visualLayers[firstIx];this._visualLayers[firstIx]=this._visualLayers[secondIx];this._visualLayers[secondIx]=tmp;this.swapElements(newOrder[0].row,newOrder[1].row);console.log("visualLayers is now",this._visualLayers);setAllOffsets()}clone.style.transform=`translate(${ev.pageX-startX}px, ${ev.pageY-startY}px)`});window.addEventListener("mouseup",ev=>{if(dragging){clone&&document.body.removeChild(clone);ev.preventDefault();row.classList.remove("dragging");row.style.visibility="visible";dragging=!1}});row.querySelector('*[data-action="delete"]').onclick=ev=>{ev.preventDefault();if(-1!==this._visualLayers.indexOf(v)){this._visualLayers.splice(this._visualLayers.indexOf(v),1);row.parentNode&&row.parentNode.removeChild(row)}};this.setVisualLayerText(v,row.querySelector(".keras-visual-editor-row-title"));if(!this._addLayer.parentNode)throw new Error("AddLayer does not have a parentNode");this._addLayer.parentNode.insertBefore(row,this._addLayer);return row}setVisualLayerText(v,el){el.innerHTML="";switch(v.type){case"dense":el.textContent=`Dense layer (${v.neurons} neurons)`;break;case"conv1d":el.textContent=`1D conv / pool layer (${v.neurons} neurons, ${v.kernelSize} kernel size, ${v.stack||1} layer${v.stack&&v.stack>1?"s":""})`;break;case"conv2d":el.textContent=`2D conv / pool layer (${v.neurons} filters, ${v.kernelSize} kernel size, ${v.stack||1} layer${v.stack&&v.stack>1?"s":""})`;break;case"flatten":el.textContent="Flatten layer";break;case"reshape":el.textContent=`Reshape layer (${v.columns} columns)`;break;case"batchNormalization":el.textContent="Batch normalization";break;case"dropout":el.textContent=`Dropout (rate ${v.dropoutRate})`;break;default:{let btn=document.querySelector(`.add-btn[data-type="${v.type}"]`);if(!btn){console.warn("Cannot find button for type",v.type);el.textContent=v.type+" layer";break}let tl=this.getTransferLearningBlock(btn);if(!tl){console.warn("Cannot find transfer learning block for type",v.type);el.textContent=v.type+" layer";break}el.textContent=tl.shortName;(tl.hasNeurons||tl.hasDropout)&&(el.textContent+=` (${this.describeFinalLayer(v)})`);break}}}describeFinalLayer(v){return v.neurons?`final layer: ${v.neurons} neurons, ${v.dropoutRate} dropout`:`no final dense layer, ${v.dropoutRate} dropout`}configureAddLayerButtons(){let buttons=Array.from(document.querySelectorAll("#neural-blocks-modal .add-btn"));for(let button of buttons)button.onclick=this.addLayerClickHandler.bind(this)}async useNetworkPreset(presetName){if(!await notify_16.Notify.confirm("Replace network architecture","This will replace your current network architecture. Are you sure you want to continue?","Yes, continue","question","warning"))return;let defaultReshapeColumns=this._defaultReshapeColumnsElement.value;if(0===defaultReshapeColumns.length)throw new Error("Default reshape columns was not specified in template");let template,reshapeColumns=Number(defaultReshapeColumns);if(isNaN(reshapeColumns)||!Number.isInteger(reshapeColumns))throw new Error("Default reshape columns was not a valid integer");switch(presetName){case"preset-spectrogram-conv1d":template=keras_visual_layers_1.KerasVisualLayerPresets.spectrogramConv1D(reshapeColumns);break;case"preset-spectrogram-conv2d":template=keras_visual_layers_1.KerasVisualLayerPresets.spectrogramConv2D(reshapeColumns);break;default:throw new Error(`Unknown preset name ${presetName}`)}this.clearVisualLayers();template.forEach(layer=>{this._visualLayers.push(layer);this.addVisualLayer(layer)})}async addLayerClickHandler(ev){ev.preventDefault();let button=ev.currentTarget,type=enum_type_helpers_1.EnumTypeHelpers.kerasVisualLayerTypeToEnum(button.dataset.type),v={type:type};if("flatten"===type||"batchNormalization"===type);else if("dense"===type){let a=await notify_16.Notify.prompt("Number of neurons","How many neurons should this layer have?","Add layer","","question","info");if(!a)return;if(isNaN(Number(a)))return;v.neurons=Number(a)}else if("reshape"===type){let a=await notify_16.Notify.prompt("Reshape columns","How many columns should the reshape layer output, f.e. for MFCC use the number of number of coefficients, or for raw data use the number of sensors.","Add layer","","question","info");if(!a)return;if(isNaN(Number(a)))return;v.columns=Number(a)}else if("conv1d"===type||"conv2d"===type){let a=await notify_16.Notify.prompt("Number of filters","How many filters should this layer have?","Next","8","question","info");if(!a)return;if(isNaN(Number(a)))return;v.neurons=Number(a);a=await notify_16.Notify.prompt("Kernel size","What kernel size do you want to use?","Add layer","3","question","info");if(!a)return;if(isNaN(Number(a)))return;v.kernelSize=Number(a);a=await notify_16.Notify.prompt("Number of convolutional layers","How many convolutional layers should this layer have? (1-3)","Next","1","question","info");if(!a)return;let value=Number(a);if(isNaN(value))return;if(value<1||value>3){notify_16.Notify.alert("Invalid number of convolutional layers","Number must be an integer between 1 and 3.","danger");return}v.stack=value}else if("dropout"===type){let a=await notify_16.Notify.prompt("Dropout rate","What fraction of connections should be randomly dropped each training step? Must be between 0 and 1.Start with a low rate and increase until you no longer see a benefit.","Add layer","0.1","question","info");if(!a)return;let value=Number(a);if(isNaN(value))return;if(value<0||value>1){notify_16.Notify.alert("Invalid dropout rate","Rate must be a fraction between 0 and 1.","danger");return}v.dropoutRate=value}else{if("1"!==button.dataset.transferLearning){console.warn("Unknown visual layer type",type);return}{let transferLearningBlock=this.getTransferLearningBlock(button);if(!transferLearningBlock){console.warn("Cannot find transfer learning block",type);return}v.neurons=transferLearningBlock.defaultNeurons;v.dropoutRate=transferLearningBlock.defaultDropout;v.organizationModelId=transferLearningBlock.organizationModelId;this.clearVisualLayers()}}this._visualLayers.push(v);this.addVisualLayer(v);$("#neural-blocks-modal").modal("hide")}clearVisualLayers(){var _a;this._visualLayers=[];let layerElements=null===(_a=this._addLayer.parentNode)||void 0===_a?void 0:_a.querySelectorAll(".keras-visual-editor-row-editable");null==layerElements||layerElements.forEach(el=>el.remove())}swapElements(obj1,obj2){if(!obj1.parentNode||!obj2.parentNode)return;let temp=document.createElement("div");obj1.parentNode.insertBefore(temp,obj1);obj2.parentNode.insertBefore(obj1,obj2);if(temp.parentNode){temp.parentNode.insertBefore(obj2,temp);temp.parentNode.removeChild(temp)}}getSelectedAugmentationPolicyImage(){return this._augmentationPolicyImageCheckboxEl&&this._augmentationPolicyImageCheckboxEl.checked?"all":"none"}getSelectedAugmentationPolicySpectrogram(){if(!this._showSpectrogramTools)return;if(!(this._augmentationPolicySpectrogramCheckboxEl&&this._augmentationPolicySpectrogramGaussianNoiseEl&&this._augmentationPolicySpectrogramFreqMaskingEl&&this._augmentationPolicySpectrogramTimeMaskingEl&&this._augmentationPolicySpectrogramWarpingEl))throw new Error("At least one spectrogram data augmentation UI element was missing");let enabled=this._augmentationPolicySpectrogramCheckboxEl.checked,gaussianNoise=this._augmentationPolicySpectrogramGaussianNoiseEl.querySelector("label.active input").value,freqMasking=this._augmentationPolicySpectrogramFreqMaskingEl.querySelector("label.active input").value,timeMasking=this._augmentationPolicySpectrogramTimeMaskingEl.querySelector("label.active input").value,warping=this._augmentationPolicySpectrogramWarpingEl.checked;return{enabled:enabled,gaussianNoise:enum_type_helpers_1.EnumTypeHelpers.gaussianNoiseToEnum(gaussianNoise),freqMasking:enum_type_helpers_1.EnumTypeHelpers.freqMaskingToEnum(freqMasking),timeMasking:enum_type_helpers_1.EnumTypeHelpers.timeMaskingToEnum(timeMasking),warping:warping}}async renderFeatureExplorer(element,impulse,metadata,metrics){const type=metrics.type,featureExplorerSection=element.querySelector(".feature-explorer-section"),featureExplorerContent=element.querySelector(".feature-explorer-content");if(!featureExplorerContent||!featureExplorerSection)return;if(!metrics.predictions){featureExplorerContent.textContent="Retrain this model to enable the feature explorer.";featureExplorerContent.style.height="";return}if(this._learnBlock.dsp.length>1){featureExplorerContent.textContent="The feature explorer is only supported when you have a single DSP block.";featureExplorerContent.style.height="";return}if(0===metrics.predictions.length){featureExplorerContent.textContent="No samples were available to display in the feature explorer. Please contact support.";featureExplorerContent.style.height="";return}const dspId=this._learnBlock.dsp[0],dspBlock=impulse.dspBlocks.find(b=>b.id===dspId);if(!dspBlock)throw new Error(`Could not find DSP block with ID ${dspId}`);let featureExplorer=this._featureExplorer[type];if(featureExplorer){let updated=!1;if(this._featureExplorerAxes){featureExplorer.setFeatureAxes(this._featureExplorerAxes.x,this._featureExplorerAxes.y,this._featureExplorerAxes.z);updated=!0}if(this._featureExplorerCamera){featureExplorer.setCamera(this._featureExplorerCamera);updated=!0}featureExplorer.hideAcquisitionInfo();updated&&await featureExplorer.update()}else{featureExplorer=this._featureExplorer[type]=new feature_explorer_1.FeatureExplorer(this._studioApi,featureExplorerSection,dspBlock.id,dspBlock.type,impulse);featureExplorer.on("camera-changed",ev=>{this._featureExplorerCamera=ev});featureExplorer.on("feature-axes-changed",(x,y,z)=>{this._featureExplorerAxes={x:x,y:y,z:z}});featureExplorer.start();const predictions=metrics.predictions.map(sample=>({sampleId:sample[1],startMs:sample[2],endMs:sample[3],prediction:metadata.class_names[sample[4]-1],predictionCorrect:void 0}));featureExplorer.setSamplePredictions({data:predictions,type:"classification"},metadata.class_names);this._featureExplorerAxes&&featureExplorer.setFeatureAxes(this._featureExplorerAxes.x,this._featureExplorerAxes.y,this._featureExplorerAxes.z);this._featureExplorerCamera&&featureExplorer.setCamera(this._featureExplorerCamera);await featureExplorer.update()}}getTransferLearningBlock(button){if("1"!==button.dataset.transferLearning)return null;return{name:button.dataset.name||"",shortName:button.dataset.shortName||"",description:"",hasDropout:"1"===button.dataset.hasDropout,hasNeurons:"1"===button.dataset.hasNeurons,defaultDropout:"1"===button.dataset.hasDropout?Number(button.dataset.defaultDropout):void 0,defaultNeurons:"1"===button.dataset.hasNeurons?Number(button.dataset.defaultNeurons):void 0,type:button.dataset.type,organizationModelId:button.dataset.organizationModelId?Number(button.dataset.organizationModelId):void 0}}}}));define("client/project/pages/feature-generation-ui",["require","exports","client/project/components/job-runner","client/project/components/feature-explorer","shared/WebSocketTypes","client/global-ui","client/notify","client/project/components/block-version-header"],(function(require,exports,job_runner_5,feature_explorer_2,WebSocketTypes_8,global_ui_7,notify_17,block_version_header_3){Object.defineProperty(exports,"__esModule",{value:!0});exports.FeatureGenerationUI=void 0;exports.FeatureGenerationUI=class{constructor(studioApi){this._performance={card:document.querySelector("#performance-card"),time:document.querySelector("#performance-card .metadata-time"),memory:document.querySelector("#performance-card .metadata-memory")};this._featureImportanceEl=document.querySelector("#feature-importance");this._featureImportance={card:document.querySelector("#feature-importance-card"),cardBody:document.querySelector("#feature-importance-card .card-body"),classSelection:document.querySelector("#feature-importance-class"),toggle:document.querySelector("#feature-importance-toggle"),showMore:document.querySelector("#feature-importance-show-more"),showLess:document.querySelector("#feature-importance-show-less"),calcCheck:document.querySelector("#calculate-feature-importance")};this._studioApi=studioApi;this._blockVersionHeader=block_version_header_3.BlockVersionHeader.createWithDefaultHTML("dsp",this._studioApi);this._dataOutputSection=document.querySelector("#job-output-section");this._jobRunner=new job_runner_5.JobRunner(this._studioApi,this._dataOutputSection);this._dataBtn=document.querySelector("#generate-features-btn");if(this._dataBtn){this._dataBtn.onclick=ev=>{ev.preventDefault();this.startGenerating()};this._origText=this._dataBtn.textContent||""}else this._origText="";this._dspId=Number(document.querySelector("#dsp-id").value);this._dspType=document.querySelector("#dsp-type").value;let impulseEl=document.querySelector("#impulse"),impulse=JSON.parse(decodeURIComponent(impulseEl.value));if(document.querySelector("#feature-explorer")){this._featureExplorer=new feature_explorer_2.FeatureExplorer(studioApi,document.querySelector("#feature-explorer"),this._dspId,this._dspType,impulse);this._featureExplorer.start();"true"===document.querySelector("#has-feature-metadata").value&&this._featureExplorer.update()}this._featureImportanceEl&&this.renderFeatureImportance(JSON.parse(decodeURIComponent(this._featureImportanceEl.value)),!0);this._studioApi.socket.addEventListener("connect",this.checkForRunningProcess.bind(this))}disableUI(){if(this._dataBtn){this._dataBtn.classList.add("disabled");this._dataBtn.textContent="Generating features..."}this._dataOutputSection.style.display="block"}enableUI(){if(this._dataBtn){this._dataBtn.classList.remove("disabled");this._dataBtn.textContent=this._origText}}async startGenerating(){try{this.disableUI();this._currJobId=await this._jobRunner.startJob(this._studioApi.jobs.generateFeaturesJob(this._studioApi.projectId,{dspId:this._dspId,calculateFeatureImportance:!!this._featureImportance.calcCheck&&this._featureImportance.calcCheck.checked}));this._studioApi.analytics.event("job-start",{event_category:"generate-features",event_label:this._dspType});this._jobRunner.on("finished",this.jobFinished.bind(this))}catch(ex2){let ex=ex2;this.enableUI();this._jobRunner.startJobFailed(ex)}}async jobFinished(id,success){if(id===this._currJobId){this.enableUI();console.log("startGenerating...",success);this._studioApi.analytics.event("job-finish-"+(success?"succes":"fail"),{event_category:"generate-features",event_label:this._dspType});if(success)try{const{response:response,body:res}=await this._studioApi.dsp.getDspFeatureLabels(this._studioApi.projectId,this._dspId);if(!res||!res.success)throw res&&res.error||response.responseText;const{response:configResponse,body:configBody}=await this._studioApi.dsp.getDspConfig(this._studioApi.projectId,this._dspId);if(!configBody||!configBody.success)throw configBody&&configBody.error||configResponse.responseText;const{response:importanceResponse,body:importanceBody}=await this._studioApi.dsp.getDspFeatureImportance(this._studioApi.projectId,this._dspId);if(!importanceBody||!importanceBody.success)throw importanceBody&&importanceBody.error||importanceResponse.responseText;let i=document.querySelector('a[href="'+location.pathname.replace("/generate-features","")+'"].nav-link i');if(i){i.classList.remove("text-gray");i.classList.add("text-green")}let allLearnNavigation=Array.from(document.querySelectorAll("#navbar-model .impulse-type-learn i"));for(let l of allLearnNavigation){l.classList.remove("text-green");l.classList.add("text-gray")}global_ui_7.GlobalUI.setRetrainComplete();if(this._featureExplorer){this._featureExplorer.invalidateCache();console.log("my labels",res);this._featureExplorer.updateLabels(res.labels);this._featureExplorer.update()}if(configBody&&configBody.dsp&&configBody.dsp.performance){this._performance.card.style.display="";this._performance.time.textContent=configBody.dsp.performance.latency+" ms.";this._performance.memory.textContent=this.bytesToSize(configBody.dsp.performance.ram)}else this._performance.card.style.display="none";importanceBody&&importanceBody.hasFeatureImportance?this.renderFeatureImportance(importanceBody.labels,!0):this._featureImportance.card&&(this._featureImportance.card.style.display="none")}catch(ex2){let ex=ex2;notify_17.Notify.alert("Failed to load feature metadata",notify_17.Notify.extractMsg(ex),"danger")}}}async checkForRunningProcess(){if(!this._studioApi.isAdmin)return;let job=await this._jobRunner.getActiveJob(WebSocketTypes_8.JOB_KEY_PREFIX.dsp+"-"+this._dspId);if(job){this._currJobId=job.id;this.disableUI();await this._jobRunner.resumeJob(job.id);this._jobRunner.on("finished",this.jobFinished.bind(this))}}bytesToSize(bytes){if(0===bytes)return"0 Bytes";let i=Number(Math.floor(Math.log(bytes)/Math.log(1024)));return Math.round(bytes/Math.pow(1024,i))+" "+["Bytes","KB","MB","GB","TB"][i]}renderFeatureImportance(data,updateSelect){var _a;if(!(this._featureImportance.card&&this._featureImportance.cardBody&&this._featureImportance.classSelection&&this._featureImportance.toggle&&this._featureImportance.showMore&&this._featureImportance.showLess))return;this._featureImportance.toggle.style.display="";this._featureImportance.showMore.onclick=ev=>{if(this._featureImportance.card){ev.preventDefault();this._featureImportance.card.classList.add("show-more")}};this._featureImportance.showLess.onclick=ev=>{if(this._featureImportance.card){ev.preventDefault();this._featureImportance.card.classList.remove("show-more")}};if(updateSelect){let curr=this._featureImportance.classSelection.value;this._featureImportance.classSelection.innerHTML="";for(let l of Object.keys(data)){let opt2=document.createElement("option");opt2.textContent="_all"===l?"All data":l;opt2.value=l;opt2.selected=curr===l;this._featureImportance.classSelection.appendChild(opt2)}this._featureImportance.classSelection.onchange=ev=>{ev.preventDefault();this.renderFeatureImportance(data,!1)}}let selectedLabel=this._featureImportance.classSelection.value,total=null===(_a=data[selectedLabel])||void 0===_a?void 0:_a.features;if(total){total=total.sort((a,b)=>b.importance-a.importance);this._featureImportance.card.style.display="";this._featureImportance.cardBody.innerHTML="";this._featureImportance.cardBody.classList.add("mt--2");for(let c of total){let wrap=document.createElement("div");wrap.classList.add("feature-importance-feature");let r=document.createElement("div");r.classList.add("row","mt-2");let h5=document.createElement("h5");h5.classList.add("col");h5.textContent=c.axis;r.appendChild(h5);wrap.appendChild(r);let imp=total.find(x=>x.axis===c.axis);if(!imp)continue;let r2=document.createElement("div");r2.classList.add("row");let p=document.createElement("div");p.classList.add("progress","col","px-0","mx-3","mb-1");p.style.borderRadius="0";let pb=document.createElement("div");pb.classList.add("progress-bar");pb.style.backgroundColor=color;pb.setAttribute("role","progressbar");pb.setAttribute("aria-valuenow",Math.round(100*imp.importance).toString());pb.setAttribute("aria-valuemin","0");pb.setAttribute("aria-valuemax","100");pb.style.width=Math.round(100*imp.importance).toString()+"%";p.appendChild(pb);r2.appendChild(p);wrap.appendChild(r2);this._featureImportance.cardBody.appendChild(wrap)}}}}}));define("client/project/components/anomaly-explorer",["require","exports","client/typed-event-emitter","client/notify"],(function(require,exports,typed_event_emitter_11,notify_18){Object.defineProperty(exports,"__esModule",{value:!0});exports.AnomalyExplorer=void 0;class AnomalyExplorer extends typed_event_emitter_11.Emitter{constructor(studioApi,container,learnId){super();this._lastFeatureIxes=[];this._graphCache={};this._studioApi=studioApi;this._featureSelect=container.querySelector(".feature-select");this._axisX=container.querySelector(".feature-axis-x");this._axisY=container.querySelector(".feature-axis-y");this._featureExplorerContent=container.querySelector(".feature-explorer-content");this._totalSampleCount=container.querySelector(".feature-explorer-sample-count");this._learnId=learnId;this._featureLabels=Array.from(this._axisX.querySelectorAll("option")).map((o,ix)=>o.textContent||"Feature "+ix);this.start()}start(){this.selectDefaultAxis();this._featureSelect.style.display="none";this._axisX.oninput=this._axisY.oninput=()=>this.loadFeatureExplorer()}update(){return this.loadFeatureExplorer()}setClassify(sampleId){this._plusClassify=sampleId}async loadFeatureExplorerPlusClassify(sampleId){this._plusClassify=sampleId;this._featureExplorerContent.textContent="Loading...";let featureIxes=[Number(this._axisX.value),Number(this._axisY.value)];try{let[dataMain,dataClassify]=await Promise.all([(async()=>{let dm=this._graphCache[JSON.stringify(featureIxes)];if(dm)this.render(dm,featureIxes);else{const{response:response,body:body}=await this._studioApi.learn.anomalyTrainedFeatures(this._studioApi.projectId,this._learnId,featureIxes[0],featureIxes[1]);if(!body.success)throw new Error(body.error||response.statusText);dm=body;this._graphCache[JSON.stringify(featureIxes)]=dm}return dm})(),(async()=>{let classifyKey=JSON.stringify(featureIxes)+"-"+sampleId,dc=this._graphCache[classifyKey];if(!dc){const{response:response,body:body}=await this._studioApi.learn.anomalyTrainedFeaturesPerSample(this._studioApi.projectId,this._learnId,sampleId);if(!body.success)throw new Error(body.error||response.statusText);dc={data:body.data,success:body.success,totalSampleCount:body.totalSampleCount};this._graphCache[classifyKey]=dc}return dc})()]),ix=0;for(let d of dataClassify.data){d.text="Sample "+ix;ix++}this._metadata&&this.calculateAnomalyScore("anomaly-score",dataClassify,this._metadata);this._lastClassifyData=dataClassify;let data={success:!0,totalSampleCount:dataMain.totalSampleCount+dataClassify.totalSampleCount,data:dataMain.data.concat(dataClassify.data)};await this.render(data,featureIxes)}catch(ex2){let ex=ex2;console.error("Ex: ",ex);this._featureExplorerContent.classList.remove("has-content");this._featureExplorerContent.textContent="Error while loading features: "+notify_18.Notify.extractMsg(ex)}}highlightClassifyItem(index){if(!this._lastClassifyData||!this._lastData)return;let{traces:traces,layout:layout}=this.getPlotlyOptions(this._lastData,this._lastFeatureIxes),t=traces.filter(r=>"classified"===r.name)[0];if(t&&t.x&&t.y&&t.z&&t.x instanceof Array&&t.y instanceof Array&&t.z instanceof Array){t.x.splice(index,1);t.y.splice(index,1);t.z.splice(index,1)}let data=this._lastClassifyData.data[index];this._metadata&&this.calculateAnomalyScore("anomaly-score-single",{success:!0,totalSampleCount:1,data:[data]},this._metadata);let trace={x:[data.X[this._lastFeatureIxes[0]]],y:[data.X[this._lastFeatureIxes[1]]],mode:"markers",name:"classification "+index,text:[],marker:{size:12,line:{width:.5},color:"#7FDBFF"},type:"scatter",hoverinfo:"none"};traces.push(trace);Plotly.react(this._featureExplorerContent,traces,layout,{displayModeBar:!1})}updateLabels(items){let xix=this._axisX.selectedIndex,yix=this._axisY.selectedIndex;this._axisX.innerHTML=this._axisY.innerHTML="";for(let fd of items)for(let parent of[this._axisX,this._axisY]){let child=document.createElement("option");child.value=fd.ix.toString();child.textContent=fd.label;parent.appendChild(child)}this._featureLabels=Array.from(this._axisX.querySelectorAll("option")).map((o,ix)=>o.textContent||"Feature "+ix);this._axisX.selectedIndex=xix;this._axisY.selectedIndex=yix;this.selectDefaultAxis()}async setMetadata(metadata){this._metadata=metadata;await this.update()}async clearClassifyAndUpdate(){this._plusClassify=void 0;await this.update()}invalidateCache(){this._graphCache={}}calculateAnomalyScore(event,response,metadata){function distanceFromCluster(center,sample){let dist=[];for(let k=0;k<center.length;k++)dist.push(Math.abs(sample[k]-center[k]));return dist}let data=response.data.map(d=>Object.keys(d.X).reduce((curr,key)=>{let a=d.X[Number(key)];curr.push(a);return curr},[])),scores=[],lowestDistances=[];for(let d of data){let lowest=1e3,lowestDistance=[];for(let c of metadata.clusters){let distanceC=distanceFromCluster(c.center,d),distance=Math.sqrt(distanceC.map(x=>Math.pow(x,2)).reduce((curr,v)=>curr+=v,0))-c.max_error;if(distance<lowest){lowest=distance;lowestDistance=distanceC}}scores.push(lowest);lowestDistances.push(lowestDistance)}let axisDistance={};for(let fx=0;fx<this._featureLabels.length;fx++){let featureName=this._featureLabels[fx],avg=lowestDistances.map(l=>l[fx]).reduce((curr,v)=>curr+=v,0)/scores.length;axisDistance[featureName]=avg}let ev={scores:scores,axisDistance:axisDistance};this.emit(event,ev)}selectDefaultAxis(){let axisNames=this._featureLabels.map(b=>b.split(" ")[0]),secondAxisIx=axisNames.findIndex(a=>a!==axisNames[0]);axisNames[secondAxisIx];if(this._axisX.selectedIndex<=0&&this._axisY.selectedIndex<=0){this._axisX.selectedIndex=0;this._axisY.selectedIndex=-1!==secondAxisIx?secondAxisIx:1}}getPlotlyOptions(data,featureIxes){let traces=[],sets=[data.data.filter(e=>!e.text),data.data.filter(e=>e.text)].filter(d=>d.length>0);for(let s of sets){let trace={x:s.map(l=>l.X[this._lastFeatureIxes[0]]),y:s.map(l=>l.X[this._lastFeatureIxes[1]]),mode:"markers",name:s[0].text?"classified":"trained",text:data.data.map(l=>l.text||""),marker:{size:6,line:{width:.5}},type:"scatter",hoverinfo:"text"};traces.push(trace)}return{traces:traces,layout:{margin:{l:0,r:0,b:0,t:0},dragmode:"pan",showlegend:!0,legend:{x:0,y:1,traceorder:"normal"},xaxis:{title:this._axisX.selectedOptions[0].textContent||"",range:[-3,6],tickmode:"auto",ticks:"outside"},yaxis:{title:this._axisY.selectedOptions[0].textContent||"",range:[-3,6],tickmode:"auto",ticks:"outside"},shapes:this.getShapes()}}}getShapes(){return this._metadata?this._metadata.clusters.map(c=>{return{type:"circle",xref:"x",yref:"y",x0:c.center[this._axisX.selectedIndex]-c.max_error,y0:c.center[this._axisY.selectedIndex]-c.max_error,x1:c.center[this._axisX.selectedIndex]+c.max_error,y1:c.center[this._axisY.selectedIndex]+c.max_error,opacity:.2,fillcolor:"blue",line:{color:"blue"},layer:"below"}}):[]}async loadFeatureExplorer(){console.log("loadFeatureExplorer metadata",this._metadata,"plusClassify",this._plusClassify);if(this._plusClassify)return this.loadFeatureExplorerPlusClassify(this._plusClassify);this._featureExplorerContent.textContent="Loading...";this.selectDefaultAxis();let featureIxes=[Number(this._axisX.value),Number(this._axisY.value)];try{let dm=this._graphCache[JSON.stringify(featureIxes)];if(!dm){const{response:response,body:body}=await this._studioApi.learn.anomalyTrainedFeatures(this._studioApi.projectId,this._learnId,featureIxes[0],featureIxes[1]);if(!body.success)throw new Error(body.error||response.statusText);dm=body;this._graphCache[JSON.stringify(featureIxes)]=dm}await this.render(dm,featureIxes)}catch(ex2){let ex=ex2;console.error("Ex: ",ex);this._featureExplorerContent.classList.remove("has-content");this._featureExplorerContent.textContent="Error while loading features: "+notify_18.Notify.extractMsg(ex)}}async render(data,featureIxes){this._featureExplorerContent.classList.add("has-content");this._featureSelect.style.display="block";this._featureExplorerContent.innerHTML="";this._totalSampleCount.textContent="("+data.totalSampleCount.toLocaleString()+" samples)";this._lastData=data;this._lastFeatureIxes=featureIxes;let{traces:traces,layout:layout}=this.getPlotlyOptions(data,featureIxes);Plotly.newPlot(this._featureExplorerContent,traces,layout,{displayModeBar:!1})}}exports.AnomalyExplorer=AnomalyExplorer}));define("client/project/components/classification-summary",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.ClassificationSummary=void 0;exports.ClassificationSummary=class{static CreateSummary(classifications,expectedLabel,type,uncertainLabel){if(!("validation"!==type||0!==classifications.length&&(0!==classifications[0].result.length||classifications[0].details&&classifications[0].details.length)))return{summary:{},classes:[],averageAnomalyScore:0,good:0,bad:0,shouldHighlightRow:!1,shouldHighlightText:!1};let totalResults=Math.max(...classifications.map(b=>b.result.length)),allClasses=classifications.reduce((curr,c)=>curr.concat(Object.keys(c.result[0]||{})),[]),summaryClasses=[],classes=[];for(let classificationBlock of classifications){let classesThisBlock=Object.keys(classificationBlock.result[0]||{});"keras-regression"===classificationBlock.learnBlock.type?classesThisBlock="validation"===type?totalResults>1?["avg","min","max"]:[""]:["value"]:"keras-object-detection"===classificationBlock.learnBlock.type&&(classesThisBlock=["Precision score"]);for(let c of classesThisBlock)if(allClasses.filter(a=>a===c).length>1){classes.push(c+" ("+classificationBlock.learnBlock.name+")");if("keras-regression"===classificationBlock.learnBlock.type&&"live-classification"===type){if("value"===c){summaryClasses.push("correct ("+classificationBlock.learnBlock.name+")");summaryClasses.push("incorrect ("+classificationBlock.learnBlock.name+")")}else if("deviation"===c)continue}else"anomaly"!==classificationBlock.learnBlock.type&&summaryClasses.push(c+" ("+classificationBlock.learnBlock.name+")")}else{classes.push(c);if("keras-regression"===classificationBlock.learnBlock.type&&"live-classification"===type){if("value"===c){summaryClasses.push("correct");summaryClasses.push("incorrect")}else if("deviation"===c)continue}else"keras-object-detection"===classificationBlock.learnBlock.type?summaryClasses.push(c):"anomaly"!==classificationBlock.learnBlock.type&&summaryClasses.push(c)}["keras","keras-transfer-image","keras-transfer-kws"].includes(classificationBlock.learnBlock.type)&&(classifications.filter(c=>c.learnBlock.type.startsWith("keras")).length>1?summaryClasses.push(uncertainLabel+" ("+classificationBlock.learnBlock.name+")"):summaryClasses.push(uncertainLabel))}let summary={};for(let c of summaryClasses)summary[c]=0;let haveOnlyAnomaly=!1;if(classifications.some(c=>"anomaly"===c.learnBlock.type)){summary.anomaly=0;if(classifications.every(c=>"anomaly"===c.learnBlock.type)){haveOnlyAnomaly=!0;summary["no anomaly"]=0}}let allAnomalyScores=classifications.filter(c=>"anomaly"===c.learnBlock.type).map(c=>c.result.map(k=>k.anomaly)).reduce((curr,c)=>curr.concat(c),[]),regressionGood=0,regressionBad=0;for(let windowIx=0;windowIx<totalResults;windowIx++){let summaryIx=0;if(classifications.filter(c=>"anomaly"===c.learnBlock.type).some(c=>c.result[windowIx].anomaly>c.minimumConfidenceRating))summary.anomaly++;else if(haveOnlyAnomaly)summary["no anomaly"]++;else for(let block of classifications.filter(c=>"anomaly"!==c.learnBlock.type)){let reading=block.result[windowIx];if("keras-regression"===block.learnBlock.type){let v=reading[Object.keys(reading)[0]];const maxError=block.maximumRegressionError,correct=Math.abs(Number(v)-Number(expectedLabel))<=maxError;correct?regressionGood++:regressionBad++;if("validation"===type)if(1===totalResults){summary[Object.keys(summary)[summaryIx]]=v;++summaryIx}else{let avg=summary[Object.keys(summary)[summaryIx]];avg=0!==windowIx?avg*(windowIx-1)/windowIx+v/windowIx:v;summary[Object.keys(summary)[summaryIx]]=avg;++summaryIx;(0===windowIx||v<summary[Object.keys(summary)[summaryIx]])&&(summary[Object.keys(summary)[summaryIx]]=v);++summaryIx;(0===windowIx||v>summary[Object.keys(summary)[summaryIx]])&&(summary[Object.keys(summary)[summaryIx]]=v);++summaryIx}else if(correct){summary[Object.keys(summary)[summaryIx++]]+=1;summary[Object.keys(summary)[summaryIx++]]+=0}else{summary[Object.keys(summary)[summaryIx++]]+=0;summary[Object.keys(summary)[summaryIx++]]+=1}}else if("keras-object-detection"===block.learnBlock.type)++summaryIx;else{let haveMinConfidence=!1;for(let key of Object.keys(reading)){if(reading[key]>block.minimumConfidenceRating){summary[Object.keys(summary)[summaryIx]]++;haveMinConfidence=!0}++summaryIx}haveMinConfidence||summary[Object.keys(summary)[summaryIx]]++;++summaryIx}}}if("live-classification"===type){let multipleKerasBlocks=classifications.filter(x=>x.learnBlock.type.startsWith("keras-")).length>1;for(let block of classifications){if("keras-object-detection"!==block.learnBlock.type)continue;if(!block.structuredResult||0===block.structuredResult.length)throw new Error("Object detection results missing");if(1!==block.structuredResult.length)throw new Error("Object detection should only return one window of results");let mapKey=multipleKerasBlocks?"Precision score ("+block.learnBlock.name+")":"Precision score";"number"==typeof block.structuredResult[0].mAP?summary[mapKey]=block.structuredResult[0].mAP:delete summary[mapKey];if(block.structuredResult[0].labels){let labelCounts={};for(let label of block.structuredResult[0].labels)labelCounts[label]?labelCounts[label]+=1:labelCounts[label]=1;for(let label of Object.keys(labelCounts))multipleKerasBlocks?summary[label+" ("+block.learnBlock.name+")"]=labelCounts[label]:summary[label]=labelCounts[label]}}}let objectDetectionScore,objectDetectionClassifications,filteredSummary={};for(let k of Object.keys(summary))0!==summary[k]&&(filteredSummary[k]=summary[k]);if("validation"===type){objectDetectionClassifications=classifications.filter(b=>"keras-object-detection"===b.learnBlock.type);if(objectDetectionClassifications.length){let totalmAP=0,totalDetails=0;for(let classification of objectDetectionClassifications)if(classification.details){for(let detail of classification.details)if(void 0!==detail.mAP){totalmAP+=detail.mAP;totalDetails+=1}}else console.error("Object detection classification must have details");totalDetails>0&&(objectDetectionScore=Math.floor(totalmAP/totalDetails*100))}}let good=Object.keys(filteredSummary).filter(k=>k===expectedLabel).map(k=>filteredSummary[k]).reduce((curr,k)=>curr+k,0),bad=Object.keys(filteredSummary).filter(k=>k!==expectedLabel).map(k=>filteredSummary[k]).reduce((curr,k)=>curr+k,0),shouldHighlightRow=-1!==Object.keys(summary).indexOf(expectedLabel),shouldHighlightText=!0;if(!shouldHighlightRow&&(0!==regressionBad||0!==regressionGood)){let anomaly="number"==typeof summary.anomaly?summary.anomaly:0;good=regressionGood-anomaly;bad=regressionBad+anomaly;shouldHighlightRow=!0;shouldHighlightText=!1}if(objectDetectionClassifications&&objectDetectionClassifications.length){shouldHighlightRow=!0;shouldHighlightText=!0}return{summary:summary,classes:classes,averageAnomalyScore:allAnomalyScores.reduce((curr,c)=>curr+c,0)/allAnomalyScores.length,good:good,bad:bad,shouldHighlightRow:shouldHighlightRow,shouldHighlightText:shouldHighlightText,objectDetectionScore:objectDetectionScore}}}}));define("client/project/components/confidence-thresholds-modal",["require","exports","client/notify"],(function(require,exports,notify_19){Object.defineProperty(exports,"__esModule",{value:!0});exports.ConfidenceThresholdsModal=void 0;exports.ConfidenceThresholdsModal=class{constructor(studioApi){this._studioApi=studioApi;let element=document.querySelector("#set-confidence-modal"),confidenceRatingInputs=Array.from(element.querySelectorAll(".confidence-rating")),updateConfidencesButton=element.querySelector("#update-confidences");updateConfidencesButton.onclick=async ev=>{ev.preventDefault();try{updateConfidencesButton.disabled=!0;updateConfidencesButton.textContent="Setting confidence thresholds...";for(const input of confidenceRatingInputs)if(input.value!==input.dataset.initialv){if(isNaN(Number(input.value)))throw new Error("Please provide a valid confidence rating (numeric only)");if("keras"===input.dataset.type){let d=await this._studioApi.learn.setKeras(this._studioApi.projectId,Number(input.dataset.blockid),{minimumConfidenceRating:Number(input.value)});if(!d.body||!d.body.success)throw d.body&&d.body.error||d.response.responseText}else{let d=await this._studioApi.learn.setAnomaly(this._studioApi.projectId,Number(input.dataset.blockid),{minimumConfidenceRating:Number(input.value)});if(!d.body||!d.body.success)throw d.body&&d.body.error||d.response.responseText}input.dataset.initialv=input.value}location.href=location.pathname+"?updated-confidence"+location.hash}catch(ex2){let ex=ex2;await notify_19.Notify.alert("Failed to set minimum confidence rating",notify_19.Notify.extractMsg(ex),"danger")}finally{updateConfidencesButton.disabled=!1;updateConfidencesButton.textContent="Set confidence thresholds"}};$("#set-confidence-modal").on("shown.bs.modal",()=>{let el=Array.from(document.querySelectorAll(".confidence-rating"))[0];if(el){el.focus();el.selectionStart=el.selectionEnd=el.value.length}})}checkConfidencesUpdated(){if(location.search.indexOf("updated-confidence")>-1){notify_19.Notify.notify("","Updated confidence thresholds","top","center","far fa-check-circle","success");window.history.replaceState(null,"",window.location.pathname+window.location.hash)}}}}));define("client/project/pages/classification-ui",["require","exports","client/project/components/acquisition-chart","client/project/components/feature-explorer","client/project/components/sliding-window","client/project/components/anomaly-explorer","shared/WebSocketTypes","shared/wav-helper","client/project/components/classification-summary","client/project/components/device-control-widget","client/project/components/start-sampling-widget","client/notify","client/project/components/acquisition-image","shared/viewmodels/retrain","client/project/components/webserial/daemon","client/global-ui","client/project/components/acquisition-video","client/project/components/confidence-thresholds-modal"],(function(require,exports,acquisition_chart_5,feature_explorer_3,sliding_window_4,anomaly_explorer_1,WebSocketTypes_9,wav_helper_3,classification_summary_1,device_control_widget_2,start_sampling_widget_2,notify_20,acquisition_image_4,retrain_4,daemon_2,global_ui_8,acquisition_video_5,confidence_thresholds_modal_1){Object.defineProperty(exports,"__esModule",{value:!0});exports.ClassificationUI=void 0;exports.ClassificationUI=class{constructor(studioApi,device){this._featureExplorer={};this._anomalyExplorer={};this._classificationList=document.querySelector("#load-classification");this._rawFeaturesContainer=document.querySelector("#acquisition-chart-features");this._rawFeatures=document.querySelector("#raw-features");this._loadingProgress=document.querySelector("#classification-loading-in-progress");this._loadingProgressName=document.querySelector("#classification-loading-name");this._rawFeaturesPlayer=document.querySelector("#raw-features-player");this._sampleSensors=document.querySelector("#input-sample-sensor");this._sampleFrequencies=document.querySelector("#input-sample-frequency");this._lastSelectedSensor=document.querySelector("#last-acquisition-sensor").value;this._lastSelectedIntervalMs=Number(document.querySelector("#last-acquisition-interval-ms").value);this._cache={};this._loadDataReqIx=0;this._slidingWindowDataReqIx=0;this._studioApi=studioApi;this._socket=studioApi.socket;let aqChartBody=document.querySelector(".acquisition-chart-body"),aqImageBody=document.querySelector(".acquisition-image-body"),aqVideoBody=document.querySelector(".acquisition-video-body"),aqStatus=document.querySelector(".acquisition-raw-status");this._aqChart=new acquisition_chart_5.AcquisitionChart(studioApi,aqChartBody,WebSocketTypes_9.DOWNSAMPLE_SIZE_SHORT,aqStatus,{legend:{position:"right"}},void 0,{height:void 0,width:200});this._aqImage=new acquisition_image_4.AcquisitionImage(studioApi,aqImageBody,aqStatus);this._aqVideo=new acquisition_video_5.AcquisitionVideo(studioApi,aqVideoBody,aqStatus,!0,"cropped");let aqImageObjectDetectionBody=document.querySelector("#object-detection-result .acquisition-image-body");aqImageObjectDetectionBody&&(this._aqImageObjectDetection=new acquisition_image_4.AcquisitionImage(studioApi,aqImageObjectDetectionBody,void 0,retrain_4.DSP_RAW_DATA,!1));let slidingWindowEl=document.querySelector("#sliding-window");this._slidingWindow=new sliding_window_4.SlidingWindow(this._studioApi,this._aqChart,slidingWindowEl,async(sampleId,startIx,lastIx)=>{let data,reqIx=++this._slidingWindowDataReqIx,cacheKey=`${sampleId}-${startIx}-${lastIx}`;if(this._cache[cacheKey])data=this._cache[cacheKey];else{let sd=await this._studioApi.rawData.getSampleSlice(this._studioApi.projectId,sampleId,startIx,lastIx);if(!sd.body||!sd.body.success)throw new Error(sd.body&&sd.body.error||sd.response.responseText);data=this._cache[cacheKey]=sd.body}if(reqIx!==this._slidingWindowDataReqIx)return null;this.onSlidingWindowData(data.sample.intervalMs,data.sample.sensors,data.payload.values,startIx);return data.payload.values});let impulseEl=document.querySelector("#impulse"),impulse=this._impulse=JSON.parse(decodeURIComponent(impulseEl.value));for(let fex of Array.from(document.querySelectorAll(".feature-explorer"))){this._expectedFrequency=Number(fex.dataset.dspFrequency);let id=fex.dataset.dspId,type=fex.dataset.dspType;if(id){this._featureExplorer[id]=new feature_explorer_3.FeatureExplorer(studioApi,fex,Number(id),type||"",impulse);this._featureExplorer[id].start();this._featureExplorer[id].on("highlight-classified",(sampleId,startMs,endMs)=>{if(sampleId===this._currentSample){let tr=this._detailTable.querySelector('tr[data-start-ms="'+startMs+'"]');if(tr&&!tr.classList.contains("table-info")){this.onClassificationRowClick(tr);tr.parentNode&&tr.parentNode.parentNode&&tr.parentNode.parentNode.parentNode&&(tr.parentNode.parentNode.parentNode.scrollTop=tr.offsetTop-100)}}})}else console.error(".feature-explorer element without ID!",fex)}for(let fex of Array.from(document.querySelectorAll(".anomaly-explorer"))){let id=fex.dataset.id;if(id){this._anomalyExplorer[id]=new anomaly_explorer_1.AnomalyExplorer(studioApi,fex,Number(id));this._anomalyExplorer[id].setMetadata(JSON.parse(decodeURIComponent(fex.dataset.metadata||"")));this._anomalyExplorer[id].on("anomaly-score-single",ev=>{fex.querySelector(".axis-distance").textContent=Object.keys(ev.axisDistance).map(k=>`${k}: ${ev.axisDistance[k].toFixed(4)}`).join(", ")})}else console.error(".anomaly-explorer element without ID!",fex)}this._startButton=document.querySelector("#input-start-sampling");this._loadButton=document.querySelector("#load-classification-button");this._startSamplingWidget=new start_sampling_widget_2.StartSamplingWidgetUI(device,this._startButton,this._studioApi);this._resultView=document.querySelector("#classification-result");this._resultTable=document.querySelector("#classification-table tbody");this._resultTableHeaders=document.querySelector("#classification-table thead");this._moveButton=document.querySelector("#move-to-training-set");this._viewInDataAcquisition=document.querySelector("#view-in-data-acquisition");this._detailHeader=document.querySelector(".detailed-classification-header");this._detailTable=document.querySelector("#detailed-classification-table");this._sampleName=document.querySelector("#sample-name");this._sampleLabel=document.querySelector("#sample-label");let sampleLength=document.querySelector("#input-sample-length"),deviceIdEl=document.querySelector("#input-device"),onlyUnknowns=document.querySelector("#show-only-anomalies");new daemon_2.WebserialUI(studioApi).init();let deviceSnapshotStreamSection=document.querySelector("#input-sample-length-snapshot-stream"),deviceTimeseriesSection=document.querySelector("#input-sample-length-frequency-section");new device_control_widget_2.DeviceControlWidget(device,deviceIdEl,this._sampleSensors,this._sampleFrequencies,sampleLength,this._lastSelectedSensor,this._lastSelectedIntervalMs,deviceTimeseriesSection,deviceSnapshotStreamSection).init();sampleLength.oninput=ev=>{ev.currentTarget.classList.remove("is-invalid")};this._sampleName.oninput=()=>this._sampleName.classList.remove("is-invalid");this._sampleLabel.oninput=()=>this._sampleLabel.classList.remove("is-invalid");this._sampleName.onchange=()=>this.saveSampleName();this._sampleLabel.onchange=()=>this.saveSampleLabel();this._startButton.onclick=async ev=>{ev.preventDefault();let valid=!0;if(sampleLength.disabled||0!==sampleLength.value.length&&/^[0-9]+$/.test(sampleLength.value))sampleLength.classList.remove("is-invalid");else{sampleLength.classList.add("is-invalid");valid=!1}if(deviceIdEl.value)deviceIdEl.classList.remove("is-invalid");else{deviceIdEl.classList.add("is-invalid");valid=!1}valid&&await this._startSamplingWidget.startSampling({category:"testing",name:"testing",deviceId:deviceIdEl.value,deviceName:deviceIdEl.selectedOptions.length>0?deviceIdEl.selectedOptions[0].textContent||"":deviceIdEl.value,sampleLength:sampleLength.disabled?6e4:Number(sampleLength.value),sampleFrequency:Number(this._sampleFrequencies.value),sensor:this._sampleSensors.value||void 0})};onlyUnknowns.oninput=()=>{this._detailTable.classList.toggle("only-anomalies")};onlyUnknowns.checked&&this._detailTable.classList.add("only-anomalies");this._moveButton.onclick=async ev=>{ev.preventDefault();if(this._currentSample&&!this._moveButton.classList.contains("disabled")){this._studioApi.analytics.event("click",{event_category:"classification",event_label:"move-to-training"});this._moveButton.classList.add("disabled");try{const{response:response,body:body}=await this._studioApi.rawData.moveSample(this._studioApi.projectId,this._currentSample,{newCategory:"training"});if(!body.success)throw new Error(body.error||response.statusText);this._moveButton.style.display="none";notify_20.Notify.notify("","Moved to the training dataset","top","center","far fa-check-circle","success");window.history.pushState(null,"","#")}catch(ex2){let ex=ex2;notify_20.Notify.alert("Failed to move to training set",notify_20.Notify.extractMsg(ex),"danger")}finally{this._moveButton.classList.remove("disabled")}}};let deleteBtn=document.querySelector("#delete-sample");deleteBtn.onclick=async ev=>{ev.preventDefault();if(this._currentSample){deleteBtn.classList.add("disabled");this._studioApi.analytics.event("click",{event_category:"classification",event_label:"delete"});try{if(!await notify_20.Notify.confirm("Deleting sample","Are you sure you want to delete this sample?","Yes, delete","question","danger"))return;const{response:response,body:body}=await this._studioApi.rawData.deleteSample(this._studioApi.projectId,this._currentSample);if(!body.success)throw new Error(body.error||response.statusText);deleteBtn.style.display="none";window.history.pushState(null,"","#");location.reload()}catch(ex2){deleteBtn.classList.remove("disabled")}}};this._loadButton.onclick=async()=>{if(!this._classificationList.value)return;this._studioApi.analytics.event("classify",{event_category:"load-classification"});let id=Number(this._classificationList.value),option=this._classificationList.querySelector('option[value="'+id+'"]'),name="";option&&option.textContent&&(name=option.textContent);this._startButton.classList.add("disabled");this._loadButton.classList.add("disabled");await this.loadSample(id,name)};this._socket.addEventListener("new-file-testing",async file=>{console.log("socket new-file-testing",file);this._studioApi.analytics.event("classify",{event_category:"new-file"});this._loadButton.classList.add("disabled");this._startButton.classList.add("disabled");await this.loadSample(file.id,file.name);let option=document.createElement("option");option.value=file.id.toString();option.textContent=file.name;this._classificationList.appendChild(option)});this.setWindowIncreaseUI();new confidence_thresholds_modal_1.ConfidenceThresholdsModal(this._studioApi).checkConfidencesUpdated();if(0===location.hash.indexOf("#load-sample-")){let initialSampleId=Number(location.hash.replace("#load-sample-",""));location.hash="";let option=this._classificationList.querySelector('option[value="'+initialSampleId+'"]'),name="";option&&option.textContent&&(name=option.textContent);this._startButton.classList.add("disabled");this._loadButton.classList.add("disabled");this.loadSample(initialSampleId,name)}}async loadSample(id,name){try{this._currentClassifySampleResponse=void 0;console.time("loadSample");this._resultView.style.display="";this._resultView.style.visibility="hidden";this._resultTable.innerHTML="";this._loadingProgressName.textContent=name;this._loadingProgress.style.display="block";this._loadingProgress.scrollIntoView();this._rawFeatures.textContent="...";let self=this;console.time("classify");const{response:response,body:d}=await this._studioApi.classify.classifySample(this._studioApi.projectId,id);console.timeEnd("classify");console.time("renderTable");if(!d.success)throw new Error(d.error||response.statusText);this._currentClassifySampleResponse=d;if(d.sample.sample.sensors.find(s=>"image"===s.name)){await this._aqImage.load(id);if(this._aqImageObjectDetection){await this._aqImageObjectDetection.load(id);let{features:rawFlattened,hasFloats:rawFlattenedHasFloats}=global_ui_8.GlobalUI.flattenFeatures(d.sample.payload.values),rawFeaturesIsImage=this._impulse.inputBlocks.some(i=>"image"===i.type);rawFeaturesIsImage&&(rawFlattened=rawFlattened.slice(2));this._rawFeatures.textContent=rawFlattened.map(n=>rawFeaturesIsImage?"0x"+n.toString(16):rawFlattenedHasFloats?n.toFixed(4):n).join(", ")}}else if(d.sample.sample.sensors.find(s=>"video"===s.name)){await this._aqVideo.load(id);console.log("slidingWindow setWindow",d.windowSizeMs,d.windowIncreaseMs);self._slidingWindow.setWindow(d.windowSizeMs,d.windowIncreaseMs)}else{await self._aqChart.setData(d.sample);self._slidingWindow.setWindow(d.windowSizeMs,d.windowIncreaseMs)}d.alreadyInDatabase?this._moveButton.style.display="none":this._moveButton.style.display="";if(!d.classifications.length)throw new Error("No data received from server");let normalClassifications=d.classifications.filter(b=>"keras-object-detection"!==b.learnBlock.type),totalResults=0;if(normalClassifications.length){totalResults=normalClassifications[0].result.length;if(0===totalResults)throw new Error("No results in response")}let objectDetectionClassifications=d.classifications.filter(b=>"keras-object-detection"===b.learnBlock.type);if(objectDetectionClassifications.length){let boxes=[];for(let classification of objectDetectionClassifications){if(!classification.structuredResult)throw new Error("No structured results in response");for(let result of classification.structuredResult){if(!(result.boxes&&result.labels&&result.scores))throw new Error("No bounding boxes in response");for(let i=0;i<result.boxes.length;i++)result.scores[i]>=classification.minimumConfidenceRating&&boxes.push({x:result.boxes[i][0],y:result.boxes[i][1],width:result.boxes[i][2],height:result.boxes[i][3],label:result.labels[i],score:result.scores[i]})}}if(this._aqImageObjectDetection){this._aqImageObjectDetection.clearBoundingBoxes();this._aqImageObjectDetection.addBoundingBoxes(boxes,{isPrediction:!0,isConstrained:"constrained_object_detection"===d.sample.sample.boundingBoxesType})}}let anomalyBlocks=d.classifications.filter(c=>"anomaly"===c.learnBlock.type);for(let anomalyBlock of anomalyBlocks){d.classifications.splice(d.classifications.indexOf(anomalyBlock),1);d.classifications.push(anomalyBlock)}const{summary:summary,classes:classes}=classification_summary_1.ClassificationSummary.CreateSummary(d.classifications,d.sample.sample.label,"live-classification","uncertain");for(let k of Object.keys(summary)){let tr=document.createElement("tr"),td1=document.createElement("td");td1.textContent=k;tr.appendChild(td1);let td2=document.createElement("td");tr.appendChild(td2);objectDetectionClassifications.length&&0===k.indexOf("Precision score")?td2.textContent=(100*summary[k]).toFixed(2)+"%":td2.textContent=summary[k].toString();0===summary[k]&&td2.classList.add("text-light");self._resultTable.appendChild(tr)}let roundedWindowIncrease=Math.floor(this._slidingWindow.getWindowIncreaseMs()/d.sample.sample.intervalMs)*d.sample.sample.intervalMs;roundedWindowIncrease<d.sample.sample.intervalMs&&(roundedWindowIncrease=d.sample.sample.intervalMs);const showTimestamp=!isNaN(roundedWindowIncrease),columns=showTimestamp?classes.length+1:classes.length;let detailHead=this._detailTable.querySelector("thead tr");detailHead.innerHTML="";let detailBody=this._detailTable.querySelector("tbody");detailBody.innerHTML="";if(showTimestamp){let th=document.createElement("th");th.textContent="timestamp";th.scope="col";th.classList.add("text-left");let w=Math.floor(100/columns);w+=(100/columns-Math.floor(100/columns))*Math.floor(columns);th.style.width=w+"%";detailHead.appendChild(th)}for(let c of classes){let th=document.createElement("th");th.textContent=c;th.scope="col";th.classList.add("text-center");th.style.width=Math.floor(100/columns)+"%";th.title=c;detailHead.appendChild(th)}if(objectDetectionClassifications.length===d.classifications.length){this._detailHeader.classList.add("d-none");this._detailTable.classList.add("d-none")}else{this._detailHeader.classList.remove("d-none");this._detailTable.classList.remove("d-none")}for(let windowIx=0;windowIx<totalResults;windowIx++){let tr=document.createElement("tr");if(showTimestamp){let idEl=document.createElement("td");idEl.textContent=Math.floor(windowIx*roundedWindowIncrease).toString();idEl.style.fontWeight="600";tr.appendChild(idEl)}let rowInvalid=!1;for(let block of d.classifications){let reading=block.result[windowIx],highestConfidence=0;for(let key of Object.keys(reading)){let value=reading[key],td=document.createElement("td");td.classList.add("text-center");td.textContent=value>=.01||value<-.01?value.toFixed(2):"0";if(Math.max(...new Set(Object.keys(reading).map(r=>reading[r])))===value){"anomaly"!==block.learnBlock.type&&(td.style.fontWeight="600");highestConfidence=value}tr.appendChild(td)}if("anomaly"===block.learnBlock.type)highestConfidence>block.minimumConfidenceRating&&(rowInvalid=!0);else if("keras-regression"===block.learnBlock.type){const maxError=block.maximumRegressionError,expectedLabel=Number(d.sample.sample.label),v=Number(reading.value);if(!isNaN(expectedLabel)&&!isNaN(v)){Math.abs(Number(v)-Number(expectedLabel))<=maxError||(rowInvalid=!0)}}else highestConfidence<block.minimumConfidenceRating&&(rowInvalid=!0)}if(rowInvalid){tr.dataset.warning="1";tr.classList.add("table-warning")}else tr.classList.add("no-anomaly");tr.dataset.id=windowIx.toString();tr.dataset.startMs=(windowIx*roundedWindowIncrease).toString();tr.onclick=()=>{this.onClassificationRowClick(tr)};detailBody.appendChild(tr)}console.timeEnd("renderTable");let renderQueue=[];for(let fxk of Object.keys(this._featureExplorer))renderQueue.push(this._featureExplorer[fxk].loadFeatureExplorerPlusClassify(id));for(let fxk of Object.keys(this._anomalyExplorer))renderQueue.push(this._anomalyExplorer[fxk].loadFeatureExplorerPlusClassify(id));console.time("renderQueue");await Promise.all(renderQueue);console.timeEnd("renderQueue");$('[data-toggle="tooltip"]').tooltip();let el=this._detailTable.querySelector('tr[data-id="0"]');el&&el.onclick&&this.onClassificationRowClick(el);this._sampleName.value=d.sample.sample.filename;this._sampleName.dataset.name=d.sample.sample.filename;this._sampleLabel.value=d.sample.sample.label;this._viewInDataAcquisition.href=this._studioApi.baseUrl+"/acquisition/"+d.sample.sample.category+"?filters= "+encodeURIComponent(JSON.stringify({filename:d.sample.sample.filename}))+"#load-graph-"+d.sample.sample.id;this._currentSample=id;this._loadingProgress.style.display="none";this._resultView.style.visibility="";this._resultView.scrollIntoView();window.history.pushState(null,"","#load-sample-"+d.sample.sample.id)}catch(ex2){let ex=ex2,msg=notify_20.Notify.extractMsg(ex);msg==={}.toString()&&(msg=JSON.stringify(msg));window.history.pushState(null,"","#");notify_20.Notify.alert("Failed to load sample",msg,"danger")}finally{this._startButton.classList.remove("disabled");this._loadButton.classList.remove("disabled");this._loadingProgress.style.display="none";console.timeEnd("loadSample")}}async onClassificationRowClick(tr){let reqIx=++this._loadDataReqIx,detailBody=this._detailTable.querySelector("tbody"),windowIx=Number(tr.dataset.id||""),d=this._currentClassifySampleResponse;if(!d)return;let roundedWindowIncrease=Math.floor(this._slidingWindow.getWindowIncreaseMs()/d.sample.sample.intervalMs)*d.sample.sample.intervalMs;roundedWindowIncrease<d.sample.sample.intervalMs&&(roundedWindowIncrease=d.sample.sample.intervalMs);this._rawFeatures.textContent="...";this._studioApi.analytics.event("click",{event_category:"classification",event_label:"row"});Array.from(detailBody.querySelectorAll(".table-info")).forEach(t=>{t.classList.remove("table-info");t.dataset.warning&&t.classList.add("table-warning")});for(let fxk of Object.keys(this._featureExplorer))this._featureExplorer[fxk].highlightClassifyItem(windowIx);for(let fxk of Object.keys(this._anomalyExplorer))this._anomalyExplorer[fxk].highlightClassifyItem(windowIx);tr.classList.add("table-info");tr.classList.remove("table-warning");this._slidingWindow.setPosition(windowIx*roundedWindowIncrease);this._slidingWindow.show();this._aqVideo&&this._aqVideo.setPositionMs(windowIx*roundedWindowIncrease);let ad=await this._slidingWindow.getCurrentData();if(reqIx===this._loadDataReqIx){ad&&this.updateAudio(ad.sensors,ad.data,ad.interval);if(d.sample.sample.sensors.find(s=>"image"===s.name)){let{features:rawFlattened,hasFloats:rawFlattenedHasFloats}=global_ui_8.GlobalUI.flattenFeatures(d.sample.payload.values),rawFeaturesIsImage=this._impulse.inputBlocks.some(i=>"image"===i.type);rawFeaturesIsImage&&(rawFlattened=rawFlattened.slice(2));this._rawFeatures.textContent=rawFlattened.map(n=>rawFeaturesIsImage?"0x"+n.toString(16):rawFlattenedHasFloats?n.toFixed(4):n).join(", ")}else if(d.sample.sample.sensors.find(s=>"video"===s.name)){let startMs=windowIx*roundedWindowIncrease;try{let sliceReq=await this._studioApi.rawData.getSampleSlice(this._studioApi.projectId,d.sample.sample.id,startMs,startMs+this._slidingWindow.getWindowSizeMs());if(!sliceReq.body.success)throw new Error(sliceReq.body.error||sliceReq.response.statusText);let payloadValues=sliceReq.body.payload.values,{features:rawFlattened,hasFloats:rawFlattenedHasFloats}=global_ui_8.GlobalUI.flattenFeatures(payloadValues);rawFlattened=rawFlattened.slice(2);this._rawFeatures.textContent=rawFlattened.map(n=>"0x"+n.toString(16)).join(", ")}catch(ex2){let ex=ex2;notify_20.Notify.alert("Failed to load raw video data",notify_20.Notify.extractMsg(ex),"danger")}}else await this.updateRawSample()}}async updateRawSample(){let d2=await this._slidingWindow.getCurrentData();if(!d2)return;let{features:rawFlattened,hasFloats:rawFlattenedHasFloats}=global_ui_8.GlobalUI.flattenFeatures(d2.data);this._rawFeatures.textContent=rawFlattened.map(n=>rawFlattenedHasFloats?n.toFixed(4):n).join(", ")}updateAudio(sensors,data,iv){this._rawFeaturesPlayer.innerHTML="";for(let ix=0;ix<sensors.length;ix++)if("wav"===sensors[ix].units){let values=data.map(d=>d[ix]),audioUrl=wav_helper_3.WavHelper.buildWavFileBlob(iv,values,0);this._rawFeaturesPlayer.style.display="";let audio=document.createElement("audio");audio.controls=!0;audio.src=audioUrl;this._rawFeaturesPlayer.appendChild(audio)}}async saveSampleName(){let old=this._sampleName.dataset.name,newName=this._sampleName.value;if(!/^[a-zA-Z0-9-_\.]+$/.test(newName)){this._sampleName.classList.add("is-invalid");return}if(!this._currentSample){await notify_20.Notify.alert("Unknown current sample","Cannot change sample name, cannot find current sample","danger");return}this._studioApi.analytics.event("click",{event_category:"classification",event_label:"rename"});if(!this._sampleName.parentNode||!this._sampleName.parentNode.parentNode)return;let spinner=this._sampleName.parentNode.parentNode.querySelector("i.fa-spinner").parentNode;if(!spinner){await notify_20.Notify.alert("Cannot find spinner","","danger");return}let now=Date.now();try{spinner.style.display="";const{response:response,body:body}=await this._studioApi.rawData.renameSample(this._studioApi.projectId,this._currentSample,{name:newName});if(!body.success)throw new Error(body.error||response.statusText);let optionEl=this._classificationList.querySelector('option[value="'+old+'"]');if(optionEl){optionEl.value=newName;optionEl.textContent=newName}this._sampleName.dataset.name=newName}catch(ex2){let ex=ex2;notify_20.Notify.alert("Failed to save name",notify_20.Notify.extractMsg(ex),"danger")}finally{Date.now()-now<700&&await this.sleep(700-(Date.now()-now));spinner.style.display="none"}}async saveSampleLabel(){let newLabel=this._sampleLabel.value;if(!/^[a-zA-Z0-9-_\.]+$/.test(newLabel)){this._sampleLabel.classList.add("is-invalid");return}if(!this._currentSample){await notify_20.Notify.alert("Unknown current sample","Cannot change sample name, cannot find current sample","danger");return}this._studioApi.analytics.event("click",{event_category:"classification",event_label:"edit-label"});if(!this._sampleLabel.parentNode||!this._sampleLabel.parentNode.parentNode)return;let spinner=this._sampleLabel.parentNode.parentNode.querySelector("i.fa-spinner").parentNode;if(!spinner)return notify_20.Notify.alert("Cannot find spinner","","danger");let now=Date.now();try{spinner.style.display="";const{response:response,body:body}=await this._studioApi.rawData.editLabel(this._studioApi.projectId,this._currentSample,{label:newLabel});if(!body.success)throw new Error(body.error||response.statusText)}catch(ex2){let ex=ex2;notify_20.Notify.alert("Failed to save label",notify_20.Notify.extractMsg(ex),"danger")}finally{Date.now()-now<700&&await this.sleep(700-(Date.now()-now));spinner.style.display="none"}}sleep(ms){return new Promise(res=>setTimeout(res,ms))}onSlidingWindowData(iv,sensors,data,startId){let newTr,desiredTs=startId*iv,diff=1/0;for(let tr of Array.from(this._detailTable.querySelectorAll("tbody tr"))){let ts=Number(tr.dataset.startMs);if(Math.abs(ts-desiredTs)<diff){diff=Math.abs(ts-desiredTs);newTr=tr}}if(!newTr)return console.warn("Could not find matching tr from onSlidingWindowData");if(!newTr.classList.contains("table-info")){this.onClassificationRowClick(newTr);newTr.parentNode&&newTr.parentNode.parentNode&&newTr.parentNode.parentNode.parentNode&&(newTr.parentNode.parentNode.parentNode.scrollTop=newTr.offsetTop-100)}this.updateAudio(sensors,data,iv)}setWindowIncreaseUI(){let mirrorRadio=document.querySelector("#set-window-increase-mirror"),enterRadio=document.querySelector("#set-window-increase-enter"),enterInput=document.querySelector("#set-window-increase-input"),btn=document.querySelector("#set-window-increase-btn");enterRadio.oninput=()=>{enterRadio.checked&&enterInput.focus()};enterInput.onfocus=()=>{enterRadio.checked=!0};btn.onclick=async ev=>{let buttonText=btn.textContent;try{btn.disabled=!0;btn.textContent="Setting window increase...";let impulseResp=await this._studioApi.impulse.getImpulse(this._studioApi.projectId);if(!impulseResp.body||!impulseResp.body.success||!impulseResp.body.impulse)throw impulseResp.body&&impulseResp.body.error||impulseResp.response.statusText;let impulse=impulseResp.body.impulse,primaryInputBlock=impulse.inputBlocks.find(p=>p.primaryVersion);if(!primaryInputBlock)throw new Error("Could not find primary input block");if(mirrorRadio.checked)primaryInputBlock.classificationWindowIncreaseMs=void 0;else{let n=Number(enterInput.value);if(isNaN(n))throw new Error("Window increase should be a number");primaryInputBlock.classificationWindowIncreaseMs=n}let setResp=await this._studioApi.impulse.createImpulse(this._studioApi.projectId,impulse);if(!setResp.body||!setResp.body.success)throw setResp.body&&setResp.body.error||setResp.response.statusText;await notify_20.Notify.alert("Saved window increase","The classification result will now refresh to reflect the updated setting","success");window.location.reload()}catch(ex2){let ex=ex2;await notify_20.Notify.alert("Failed to set window increase",notify_20.Notify.extractMsg(ex),"danger")}finally{btn.disabled=!1;btn.textContent=buttonText}}}}}));define("client/project/pages/deployment-ui",["require","exports","client/project/components/job-runner","shared/WebSocketTypes","client/notify","client/project/components/enum-type-helpers","client/project/components/confusion-matrix","client/global-ui"],(function(require,exports,job_runner_6,WebSocketTypes_10,notify_21,enum_type_helpers_2,confusion_matrix_2,global_ui_9){Object.defineProperty(exports,"__esModule",{value:!0});exports.DeploymentUI=void 0;class DeploymentUI{constructor(studioApi){this._options=Array.from(document.querySelectorAll(".deploy-option"));this._modelSelectButtons=Array.from(document.querySelectorAll(".model-select-button"));this._evaluateJobResultEl=document.querySelector("#evaluate-job-result");this._useEonWrapperEl=document.querySelector("#use-eon-wrapper");this._useEonInputEl=document.querySelector("#use-eon-compiler");this._useEonInputCheckedEl=document.querySelector("#use-eon-compiler-checkbox");this._eonDeploySubheader=document.querySelector(".eon-deploy-subheader");this._latencyEstimateNameEl=document.querySelector("#performance-estimate-name");this._latencyEstimateRowEl=document.querySelector("#performance-estimate-row");this._posteriorCard=document.querySelector("#posterior-card");this._posteriorEditJson=document.querySelector("#posterior-edit-as-json");this._hasPosterior=document.querySelector("#has-posterior");this._posteriorShowWizard=document.querySelector("#posterior-show-wizard");this._posteriorJson={modal:document.querySelector("#posterior-json-modal"),content:document.querySelector("#posterior-json-content"),saveBtn:document.querySelector("#posterior-json-save")};this._findPosterior={modal:document.querySelector("#find-posterior-modal"),step1:document.querySelector("#find-posterior-modal-step-1"),step2:document.querySelector("#find-posterior-modal-step-2"),targetWords:Array.from(document.querySelectorAll("#find-posterior-modal .find-posterior-target-words")),referenceSet:document.querySelector("#find-posterior-reference-set"),customSection:document.querySelector("#find-posterior-custom-section"),wavFile:document.querySelector("#find-posterior-wav-file"),csvFile:document.querySelector("#find-posterior-csv-file"),saveBtn:document.querySelector("#find-posterior-save"),jobSection:document.querySelector("#find-posterior-modal .job-runner")};this._showLinuxDeployBtn=document.querySelector("#show-linux-deploy-options");this._phoneQr=document.querySelector("#mobile-phone-modal-qr");this._studioApi=studioApi;this._deploymentOutputSection=document.querySelector("#deployment-output-section");this._jobRunnerEvaluate=new job_runner_6.JobRunner(this._studioApi,this._deploymentOutputSection);this._jobRunnerBuild=new job_runner_6.JobRunner(this._studioApi,this._deploymentOutputSection);this._findPosterior.jobSection&&(this._jobRunnerPosterior=new job_runner_6.JobRunner(this._studioApi,this._findPosterior.jobSection));requestAnimationFrame(()=>{let outputSectionTop=window.scrollY+this._deploymentOutputSection.getBoundingClientRect().top;window.addEventListener("resize",()=>{outputSectionTop=window.scrollY+this._deploymentOutputSection.getBoundingClientRect().top});console.log("window.scrollY",window.scrollY,this._deploymentOutputSection.getBoundingClientRect().top);console.log("outputSectionTop",outputSectionTop);const onScroll=()=>{if(window.innerWidth>=992)if(window.scrollY>=outputSectionTop-30){let doScroll=window.scrollY-outputSectionTop+30;this._deploymentOutputSection.style.transform="translateY("+doScroll+"px)"}else this._deploymentOutputSection.style.transform="translateY(0)";else this._deploymentOutputSection.style.transform="translateY(0)"};window.addEventListener("scroll",onScroll);onScroll()});this._buildButton=document.querySelector("#build");this._buildButton.onclick=ev=>{ev.preventDefault();this.startBuilding()};this._optimizationsCard=document.querySelector("#optimizations-card");this._analyzeButton=document.querySelector("#analyze-optimizations");this._analyzeButton.onclick=this.clickAnalyze.bind(this);this._optimizationsMask=document.querySelector("#optimizations-mask");this._origText=this._buildButton.textContent||"";for(let opt of this._options)opt.onclick=ev=>{var _a;ev.preventDefault();this._options.forEach(o=>o.classList.remove("selected"));opt.classList.add("selected");0===this._modelSelectButtons.length?this._optimizationsCard.style.display="none":"1"===opt.dataset.hideOptimizations?this._optimizationsCard.style.display="none":this._optimizationsCard.style.display="block";this._posteriorCard&&((null===(_a=opt.dataset.format)||void 0===_a?void 0:_a.startsWith("syntiant-ndp101"))?this._posteriorCard.style.display="":this._posteriorCard.style.display="none");this._useEonWrapperEl&&(this._useEonWrapperEl.style.display="1"===opt.dataset.hasEon?"flex":"none");this.updateOptimizationsRamRom()};this._modelSelectButtons.forEach(button=>button.onclick=this.modelSelectClick.bind(this));if(this._evaluateJobResultEl&&this._evaluateJobResultEl.value)try{let v=JSON.parse(decodeURIComponent(this._evaluateJobResultEl.value));v.length>0&&this.updateOptimizationsUI(v)}catch(ex){console.warn("Failed to parse evaluate job result",ex,this._evaluateJobResultEl.value)}this._useEonInputEl&&(this._useEonInputEl.oninput=async()=>{if(this._useEonInputEl&&this._useEonWrapperEl&&this._useEonInputCheckedEl){this._useEonInputCheckedEl.checked=this._useEonInputEl.checked;this._eonDeploySubheader&&(this._useEonInputCheckedEl.checked,this._eonDeploySubheader.textContent="Same accuracy, up to 50% less memory. Open source.");this.updateOptimizationsRamRom();if(this._studioApi.isAdmin)try{let setEon=await this._studioApi.projects.updateProject(this._studioApi.projectId,{lastDeployEonCompiler:this._useEonInputEl.checked});if(!setEon.body||!setEon.body.success)throw setEon.body&&setEon.body.error||setEon.response.responseText}catch(ex){console.warn("Failed to set Eon deploy setting",ex)}}});this._useEonInputCheckedEl&&(this._useEonInputCheckedEl.oninput=()=>{if(this._useEonInputEl&&this._useEonInputCheckedEl){this._useEonInputEl.checked=this._useEonInputCheckedEl.checked;this._useEonInputEl.oninput&&this._useEonInputEl.oninput(new CustomEvent("a"))}});this._showLinuxDeployBtn&&(this._showLinuxDeployBtn.onclick=async ev=>{if(!this._showLinuxDeployBtn)return;ev.preventDefault();let origText=this._showLinuxDeployBtn.textContent;try{this._showLinuxDeployBtn.classList.add("disabled");this._showLinuxDeployBtn.textContent="Showing all Linux deployments...";let x=await this._studioApi.projects.getProjectInfo(this._studioApi.projectId);if(!x.body||!x.body.success)throw x.body&&x.body.error||x.response.responseText;let experiments=x.body.experiments.filter(y=>y.enabled).map(y=>y.type);-1===experiments.indexOf("linux_deploys")&&experiments.push("linux_deploys");let req={experiments:experiments},d=await this._studioApi.projects.updateProject(this._studioApi.projectId,req);if(!d.body||!d.body.success)throw d.body&&d.body.error||d.response.responseText;let linuxModal=document.querySelector("#linux-modal");linuxModal&&$(linuxModal).modal("hide");location.href="?showedlinuxdeploy=1"}catch(ex2){let ex=ex2;await notify_21.Notify.alert("Failed to show Linux deployments",notify_21.Notify.extractMsg(ex),"danger")}finally{this._showLinuxDeployBtn.classList.remove("disabled");this._showLinuxDeployBtn.textContent=origText}});this._posteriorEditJson&&(this._posteriorEditJson.onclick=async ev=>{ev.preventDefault();try{let getPost=await this._studioApi.deployment.getSyntiantPosterior(this._studioApi.projectId);if(!getPost.body||!getPost.body.success)throw getPost.body&&getPost.body.error||getPost.response.responseText;if(this._posteriorJsonEditor&&this._posteriorJson.modal){this._posteriorJsonEditor.setValue(getPost.body.hasPosteriorParameters?JSON.stringify(getPost.body.parameters,null,4):"{}");this._posteriorJsonEditor.moveCursorToPosition({column:0,row:0});$(this._posteriorJson.modal).modal()}}catch(ex2){let ex=ex2;notify_21.Notify.alert("Failed to retrieve posterior parameters",notify_21.Notify.extractMsg(ex),"danger")}});this._posteriorJson.saveBtn&&(this._posteriorJson.saveBtn.onclick=async ev=>{ev.preventDefault();if(!this._posteriorJsonEditor||!this._posteriorJson.modal||!this._posteriorJson.saveBtn)return;let origText=this._posteriorJson.saveBtn.textContent;try{this._posteriorJson.saveBtn.textContent="Saving...";this._posteriorJson.saveBtn.classList.add("disabled");try{JSON.parse(this._posteriorJsonEditor.getValue())}catch(ex2){let ex=ex2;throw new Error("Posterior parameters should be valid JSON ("+notify_21.Notify.extractMsg(ex)+")")}let setPost=await this._studioApi.deployment.setSyntiantPosterior(this._studioApi.projectId,{parameters:JSON.parse(this._posteriorJsonEditor.getValue())});if(!setPost.body||!setPost.body.success)throw setPost.body&&setPost.body.error||setPost.response.responseText;this._hasPosterior&&(this._hasPosterior.style.display="");notify_21.Notify.notify("","Saved posterior parameters","top","center","far fa-check-circle","success");$(this._posteriorJson.modal).modal("hide")}catch(ex2){let ex=ex2;notify_21.Notify.alert("Failed to store posterior parameters",notify_21.Notify.extractMsg(ex),"danger")}finally{this._posteriorJson.saveBtn.textContent=origText;this._posteriorJson.saveBtn.classList.remove("disabled")}});this._posteriorJson.modal&&$(this._posteriorJson.modal).on("shown.bs.modal",()=>{var _a;null===(_a=this._posteriorJson.content)||void 0===_a||_a.focus()});this._posteriorShowWizard&&(this._posteriorShowWizard.onclick=async ev=>{ev.preventDefault();if(this._studioApi.isAdmin){{let job=await this._jobRunnerEvaluate.getActiveJob(WebSocketTypes_10.JOB_KEY_PREFIX.syntiantPosterior);if(job){if(this._jobRunnerPosterior){await this._jobRunnerPosterior.resumeJob(job.id);if(this._findPosterior.step1&&this._findPosterior.step2&&this._findPosterior.saveBtn){this._findPosterior.step2.style.display="";this._findPosterior.step1.style.display="none";this._findPosterior.saveBtn.style.display="none"}console.log("resuming",this._findPosterior.modal);if(this._findPosterior.modal){console.log("gonna open modal");$(this._findPosterior.modal).modal()}}return}}if(this._findPosterior.modal){$(this._findPosterior.modal).modal();if(this._findPosterior.step1&&this._findPosterior.step2&&this._findPosterior.saveBtn){this._findPosterior.step2.style.display="none";this._findPosterior.step1.style.display="";this._findPosterior.saveBtn.style.display=""}if(!this._findPosterior.referenceSet||!this._findPosterior.customSection)return;"custom"===this._findPosterior.referenceSet.value?this._findPosterior.customSection.style.display="":this._findPosterior.customSection.style.display="none"}}});this._findPosterior.referenceSet&&(this._findPosterior.referenceSet.oninput=ev=>{this._findPosterior.referenceSet&&this._findPosterior.customSection&&("custom"===this._findPosterior.referenceSet.value?this._findPosterior.customSection.style.display="":this._findPosterior.customSection.style.display="none")});this._findPosterior.saveBtn&&(this._findPosterior.saveBtn.onclick=async ev=>{ev.preventDefault();if(!(this._findPosterior.referenceSet&&this._findPosterior.customSection&&this._findPosterior.saveBtn&&this._findPosterior.wavFile&&this._findPosterior.csvFile))return;let origText=this._findPosterior.saveBtn.textContent;try{if(0===this._findPosterior.targetWords.filter(x=>x.checked).length)throw new Error("Need to select at least 1 target word");this._findPosterior.wavFile.classList.remove("is-invalid");this._findPosterior.csvFile.classList.remove("is-invalid");this._findPosterior.wavFile.oninput=()=>{var _a;null===(_a=this._findPosterior.wavFile)||void 0===_a||_a.classList.remove("is-invalid")};this._findPosterior.csvFile.oninput=()=>{var _a;null===(_a=this._findPosterior.csvFile)||void 0===_a||_a.classList.remove("is-invalid")};if("custom"===this._findPosterior.referenceSet.value){let valid=!0;if(!this._findPosterior.wavFile.value){this._findPosterior.wavFile.classList.add("is-invalid");valid=!1}if(!this._findPosterior.csvFile.value){this._findPosterior.csvFile.classList.add("is-invalid");valid=!1}this._findPosterior.saveBtn.textContent="Uploading (0%)..."}else this._findPosterior.saveBtn.textContent="Creating job...";let status=this._findPosterior.saveBtn,jobId=await new Promise((res,rej)=>{if(!(this._findPosterior.referenceSet&&this._findPosterior.customSection&&this._findPosterior.saveBtn&&this._findPosterior.wavFile&&this._findPosterior.csvFile))return;let x=new XMLHttpRequest,fd=new FormData;fd.append("targetWords",JSON.stringify(this._findPosterior.targetWords.filter(y=>y.checked).map(y=>y.dataset.label)));fd.append("referenceSet",this._findPosterior.referenceSet.value);if("custom"===this._findPosterior.referenceSet.value){this._findPosterior.wavFile.files&&fd.append("wavFile",this._findPosterior.wavFile.files[0]);this._findPosterior.csvFile.files&&fd.append("metaCsvFile",this._findPosterior.csvFile.files[0])}let finished=!1;x.upload.onprogress=ev2=>{if(finished)return;let progress=Math.floor(ev2.loaded/ev2.total*100);status.textContent=progress<100?`Uploading... (${progress}%)`:"Finalizing upload..."};x.onload=()=>{finished=!0;if(200!==x.status)return rej(x.responseText||x.statusText);try{let v=JSON.parse(x.responseText);return v.success?res(v.id):rej(v.error)}catch(ex2){return rej(x.responseText||x.statusText)}};x.onerror=rej;x.open("POST",`/v1/api/${this._studioApi.projectId}/jobs/find-syntiant-posterior`);x.send(fd)});console.log("created job",jobId);if(this._findPosterior.step1&&this._findPosterior.step2&&this._findPosterior.saveBtn){this._findPosterior.step2.style.display="";this._findPosterior.step1.style.display="none";this._findPosterior.saveBtn.style.display="none"}if(!this._jobRunnerPosterior)throw new Error("No job runner");await this._jobRunnerPosterior.startJobFromId(jobId);this._jobRunnerPosterior.on("finished",(id,success)=>{id===jobId&&success&&this._hasPosterior&&(this._hasPosterior.style.display="")})}catch(ex2){let ex=ex2;notify_21.Notify.alert("Failed to find posterior parameters",notify_21.Notify.extractMsg(ex),"danger")}finally{this._findPosterior.saveBtn.textContent=origText;this._findPosterior.saveBtn.classList.remove("disabled")}});if(this._posteriorJson.content){this._posteriorJsonEditor=ace.edit(this._posteriorJson.content);ace.config.setModuleUrl("ace/mode/javascript",this._studioApi.staticAssetsPrefix+"/ace/mode-javascript.js");this._posteriorJsonEditor.session.setMode("ace/mode/javascript");this._posteriorJsonEditor.setOption("wrap","free")}let s=location.search;if(s.indexOf("showedlinuxdeploy=1")>-1){s=s.replace("showedlinuxdeploy=1","");window.history.pushState("","",location.pathname+s);notify_21.Notify.notify("","Enabled Linux deploys","top","center","far fa-check-circle","success")}this._studioApi.socket.addEventListener("connect",this.checkForRunningProcess.bind(this))}updateOptimizationsRamRom(){let showEon=!(!this._useEonInputEl||!this._useEonWrapperEl)&&("none"!==this._useEonWrapperEl.style.display&&this._useEonInputEl.checked),selectedOption=this._options.find(o=>o.classList.contains("selected"));for(let variant of Array.from(document.querySelectorAll("#optimizations-card .variant-details"))){if(!variant.dataset.ondevicePerformance)continue;let blockDetailsElement=variant.closest(".block-details");if(!blockDetailsElement)return console.warn("Could not find variant-details element for button");let blockType=blockDetailsElement.dataset.blockType;if(!blockType)return console.warn("Could not find block type in html");let perf,romEl=variant.querySelector(".model-size"),ramEl=variant.querySelector(".model-ram"),latencyEl=variant.querySelector(".model-latency"),performance=JSON.parse(decodeURIComponent(variant.dataset.ondevicePerformance));if(selectedOption&&selectedOption.dataset.mcu){let mcu=selectedOption.dataset.mcu;perf=performance.find(x=>x.mcu===mcu)}perf||(perf=performance.find(x=>x.isDefault));if(!perf){console.warn("No default performance figures found",performance);continue}let ram=Number(showEon?perf.eon.ramRequired:perf.tflite.ramRequired),rom=Number(showEon?perf.eon.romRequired:perf.tflite.romRequired);ramEl.textContent=0===ram?"keras-object-detection"===blockType?"N/A":"Retrain to reveal":global_ui_9.GlobalUI.createMemString(ram);romEl.textContent=0===rom?"Retrain to reveal":global_ui_9.GlobalUI.createMemString(rom);perf.latency&&(latencyEl.textContent=perf.latency.toLocaleString()+" ms");this._latencyEstimateNameEl.textContent=perf.name;this._latencyEstimateRowEl.style.visibility=(null==selectedOption?void 0:selectedOption.dataset.customDeployId)?"hidden":"visible"}}async clickAnalyze(ev){ev.preventDefault();this.renderAnalyzeStarted();this._currJobId=await this._jobRunnerEvaluate.startJob(this._studioApi.jobs.startEvaluateJob(this._studioApi.projectId));this._jobRunnerEvaluate.on("finished",this.evaluateJobFinished.bind(this))}renderAnalyzeStarted(){this._optimizationsCard.style.display="block";this._analyzeButton.disabled=!0;this._analyzeButton.classList.add("disabled");this._analyzeButton.innerHTML='<i class="fas fa-spinner spin-animation mr-2"></i> Analyzing optimizations...';this._deploymentOutputSection.style.visibility="visible"}resetAnalyzeButton(){this._analyzeButton.textContent="Analyze optimizations";this._analyzeButton.disabled=!1;this._analyzeButton.classList.remove("disabled")}async evaluateJobFinished(id,success){if(id===this._currJobId)if(success)try{let result=await this._studioApi.deployment.getEvaluateJobResult(this._studioApi.projectId);if(!result.body||!result.body.success)throw result.body&&result.body.error||result.response.responseText;this.updateOptimizationsUI(result.body.result)}catch(ex2){let ex=ex2;notify_21.Notify.alert("Failed to fetch optimization results",notify_21.Notify.extractMsg(ex),"danger");console.error(notify_21.Notify.extractMsg(ex));this.resetAnalyzeButton()}else this.resetAnalyzeButton()}updateOptimizationsUI(stats){for(let modelResult of stats){let blockDetails=this._optimizationsCard.querySelector(`[data-block-id='${modelResult.learnBlockId}']`);if(!blockDetails)throw new Error("Could not find UI element for block "+modelResult.learnBlockId);let typeDetails=blockDetails.querySelector(`[data-model-type='${modelResult.modelType}']`);if(!typeDetails)throw new Error("Could not find UI element for block "+modelResult.learnBlockId+" and type "+modelResult.modelType);let recommended=Array.from(typeDetails.querySelectorAll(".model-recommended"));for(let r of recommended)r.style.display="";let selectionButtons=typeDetails.querySelector(".selection-buttons");if(!selectionButtons)throw new Error("Could not find selection buttons element for block "+modelResult.learnBlockId+" and type "+modelResult.modelType);selectionButtons.style.display="";let accuracy=typeDetails.querySelector(".model-accuracy");if(!accuracy)throw new Error("Could not find accuracy element for block "+modelResult.learnBlockId+" and type "+modelResult.modelType);let includesAnomaly=modelResult.trainingLabels.indexOf(DeploymentUI.ANOMALY_LABEL)>-1;includesAnomaly&&"number"==typeof modelResult.accuracy.withAnomaly?accuracy.textContent=Number(modelResult.accuracy.withAnomaly.toFixed(2))+"%":includesAnomaly||"number"!=typeof modelResult.accuracy.raw||(accuracy.textContent=Number(modelResult.accuracy.raw.toFixed(2))+"%");let matrixColumn=typeDetails.querySelector(".matrix-column");if(!matrixColumn)throw new Error("Could not find matrix column for block "+modelResult.learnBlockId+" and type "+modelResult.modelType);let matrixContainer=typeDetails.querySelector(".matrix-container");if(!matrixContainer)throw new Error("Could not find matrix container for block "+modelResult.learnBlockId+" and type "+modelResult.modelType);let confusionMatrixInfo=typeDetails.querySelector(".confusion-matrix-info");if(!confusionMatrixInfo)throw new Error("Could not find matrix info for block "+modelResult.learnBlockId+" and type "+modelResult.modelType);let confusionMatrixExplanation="Shows percentage of total windows per label (rounded to nearest 0.1%).";includesAnomaly&&(confusionMatrixExplanation+=" Includes anomaly detection results.");confusionMatrixInfo.setAttribute("data-original-title",confusionMatrixExplanation);if("keras-regression"===modelResult.learnBlockType||"keras-object-detection"===modelResult.learnBlockType)matrixColumn.style.visibility="hidden";else{this.buildConfusionMatrix(matrixContainer,modelResult,includesAnomaly);matrixColumn.style.visibility=""}}for(let btn of Array.from(this._modelSelectButtons))btn.style.display="";$(this._optimizationsMask).fadeOut()}buildConfusionMatrix(container,modelResult,includesAnomaly){const matrixTable=document.createElement("table");container.appendChild(matrixTable);let confusionArray=[];for(let trueLabel of modelResult.trainingLabels){let dataRow=modelResult.confusionMatrix[trueLabel],rowSum=0;for(let label of modelResult.classificationLabels)dataRow[label]&&(rowSum+=includesAnomaly?dataRow[label].withAnomaly||0:dataRow[label].raw||0);let confusionRow=[];for(let predictedLabel of modelResult.classificationLabels){let cellValue,dataColumn=dataRow[predictedLabel];cellValue=includesAnomaly?dataColumn&&dataColumn.withAnomaly?dataColumn.withAnomaly:0:dataColumn&&dataColumn.raw?dataColumn.raw:0;confusionRow.push(cellValue)}confusionArray.push(confusionRow)}confusion_matrix_2.ConfusionMatrix.showMatrix(matrixTable,modelResult.trainingLabels,modelResult.classificationLabels,confusionArray,{},!0)}async modelSelectClick(ev){ev.preventDefault();let button=ev.currentTarget,variantDetailsElement=button.closest(".variant-details");if(!variantDetailsElement)throw new Error("Could not find variant-details element for button");let modelTypeString=variantDetailsElement.dataset.modelType;if(!modelTypeString)throw new Error("Could not find model type in html");let blockDetailsElement=button.closest(".block-details");if(!blockDetailsElement)throw new Error("Could not find variant-details element for button");let blockId=Number(blockDetailsElement.dataset.blockId);if(!blockId)throw new Error("Could not find block id in html");try{button.setAttribute("disabled","true");button.classList.add("disabled");button.textContent=DeploymentUI.BUTTON_MODEL_WORKING;let setKeras=await this._studioApi.learn.setKeras(this._studioApi.projectId,blockId,{selectedModelType:enum_type_helpers_2.EnumTypeHelpers.modelTypeToEnum(modelTypeString)});if(!setKeras.body||!setKeras.body.success)throw setKeras.body&&setKeras.body.error||setKeras.response.responseText}catch(ex2){let ex=ex2;button.removeAttribute("disabled");button.textContent=DeploymentUI.BUTTON_MODEL_UNSELECTED;let message=notify_21.Notify.extractMsg(ex);notify_21.Notify.alert("Failed to change selected model",message,"danger");console.error(message);console.trace()}finally{button.classList.remove("disabled")}let siblingButtons=blockDetailsElement.querySelectorAll(".model-select-button");for(let buttonElement of siblingButtons)if(buttonElement!==button){buttonElement.textContent=DeploymentUI.BUTTON_MODEL_UNSELECTED;buttonElement.removeAttribute("disabled");buttonElement.classList.add("btn-outline-primary");buttonElement.classList.remove("btn-primary")}else{buttonElement.textContent=DeploymentUI.BUTTON_MODEL_SELECTED;buttonElement.classList.add("btn-primary");buttonElement.classList.remove("btn-outline-primary")}}disableUI(){this._buildButton.classList.add("disabled");this._buildButton.textContent="Building model...";this._deploymentOutputSection.style.visibility="visible"}async startBuilding(){if(!this._studioApi.isAdmin)return await notify_21.Notify.alert("First clone this project","Clone this project to deploy this impulse!","info");let selectedOption=this._options.find(o=>o.classList.contains("selected"));if(!selectedOption)return await notify_21.Notify.alert("Select a deployment option","","info");if("linux"===selectedOption.dataset.format)return $("#linux-modal").modal();if("mobile-phone"===selectedOption.dataset.format&&this._phoneQr){this._phoneQr.innerHTML="";new QRCode(this._phoneQr,{text:selectedOption.dataset.url,width:400,height:400,correctLevel:(selectedOption.dataset.url||"").length>100?1:2});this._phoneQr.title="";return $("#mobile-phone-modal").modal()}if("computer"===selectedOption.dataset.format)return window.open(selectedOption.dataset.url,"_blank");let engine="tflite";"1"===selectedOption.dataset.hasEon&&this._useEonInputEl&&this._useEonInputEl.checked?engine="tflite-eon":"1"===selectedOption.dataset.hasTensorrt&&(engine="tensorrt");this._studioApi.analytics.event("job-start",{event_category:"deploy",event_label:selectedOption.dataset.format+"-"+engine});this.disableUI();try{selectedOption.dataset.customDeployId?this._currJobId=await this._jobRunnerBuild.startJob(this._studioApi.jobs.buildOrganizationOnDeviceModelJob(this._studioApi.projectId,{engine:engine,deployBlockId:Number(selectedOption.dataset.customDeployId)})):this._currJobId=await this._jobRunnerBuild.startJob(this._studioApi.jobs.buildOnDeviceModelJob(this._studioApi.projectId,selectedOption.dataset.format,{engine:engine}));this._jobRunnerBuild.on("finished",this.jobFinished.bind(this))}catch(ex2){let ex=ex2;this._jobRunnerBuild.startJobFailed(ex);this._buildButton.classList.remove("disabled");this._buildButton.textContent=this._origText}}async jobFinished(id,success){if(id!==this._currJobId)return;let selectedOption=this._options.find(o=>o.classList.contains("selected"));if(selectedOption){this._studioApi.analytics.event("job-finish-"+(success?"success":"fail"),{event_category:"deploy",event_label:selectedOption.dataset.format+"-tflite"});this._buildButton.classList.remove("disabled");this._buildButton.textContent=this._origText;if(success){window.location.href=`/v1/api/${this._studioApi.projectId}/deployment/download?type=`+selectedOption.dataset.format;if(selectedOption.dataset.customDeployId){let o=document.querySelector("#org-target-modal");if(!o)return;let title=o.querySelector("#org-target-modal-title"),link=o.querySelector("#org-target-modal-link"),linkRow=o.querySelector("#org-target-modal-link-row");selectedOption.dataset.name&&title&&(title.textContent="Built "+selectedOption.dataset.name);if(link&&linkRow)if(selectedOption.dataset.integrateUrl){linkRow.style.display="";link.href=selectedOption.dataset.integrateUrl}else linkRow.style.display="none";$(o).modal()}else{let o=document.querySelector("#"+selectedOption.dataset.format+"-modal");o&&$(o).modal()}}}}async checkForRunningProcess(){if(!this._studioApi.isAdmin)return;let jobListResponse=await this._jobRunnerEvaluate.getActiveJobList();if(jobListResponse){console.log("active jobs",jobListResponse.body.jobs);{let job=jobListResponse.body.jobs.find(j=>j.key===WebSocketTypes_10.JOB_KEY_PREFIX.deployment);if(job){this._currJobId=job.id;this.disableUI();await this._jobRunnerBuild.resumeJob(job.id);this._jobRunnerBuild.on("finished",this.jobFinished.bind(this));return}}{let job=jobListResponse.body.jobs.find(j=>j.key.startsWith(WebSocketTypes_10.JOB_KEY_PREFIX.learnClassifyWrapper));if(job){this._currJobId=job.id;this.renderAnalyzeStarted();await this._jobRunnerEvaluate.resumeJob(job.id);this._jobRunnerEvaluate.on("finished",this.evaluateJobFinished.bind(this));return}}}}}exports.DeploymentUI=DeploymentUI;DeploymentUI.UNCERTAIN_LABEL="ei_uncertain";DeploymentUI.ANOMALY_LABEL="anomaly";DeploymentUI.BUTTON_MODEL_SELECTED="Currently selected";DeploymentUI.BUTTON_MODEL_UNSELECTED="Click to select";DeploymentUI.BUTTON_MODEL_WORKING="Working..."}));define("client/forms/select-project-ui",["require","exports","client/api-definition/index","client/notify"],(function(require,exports,api_definition_4,notify_22){Object.defineProperty(exports,"__esModule",{value:!0});exports.SelectProjectUI=void 0;exports.SelectProjectUI=class{constructor(){this._projectsApi=new api_definition_4.ProjectsApi(location.origin+"/v1");let table=document.querySelector("#select-project-table");if(table){Array.from(table.querySelectorAll("tr")).forEach(tr=>{tr.onclick=e=>{e.preventDefault();tr.dataset.id&&(location.href="/studio/"+tr.dataset.id+"/")}});Array.from(table.querySelectorAll("a")).forEach(a=>{a.onclick=e=>{e.stopPropagation()}})}let addProject=document.querySelector("#add-project-btn");if(addProject){addProject.onclick=async ev=>{try{ev.preventDefault();const name=await notify_22.Notify.prompt("Create project","Enter a name for your new project","Create new project","","question","success",value=>value&&(null==value?void 0:value.length)?null:"Projects need a name");if(!name)return;const{response:response,body:body}=await this._projectsApi.createProject({projectName:name});if(!body.success)throw new Error(body.error||response.statusText);await notify_22.Notify.alert("Created project",`Successfully created project "${name}"`,"success");location.href="/studio/"+body.id}catch(ex){notify_22.Notify.alert("Failed to create project",notify_22.Notify.extractMsg(ex),"danger")}};if("#create-new-project"===location.hash){window.history.replaceState(null,"",window.location.pathname);addProject.dispatchEvent(new CustomEvent("click"))}}}}}));define("shared/viewmodels/createImpulse",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));define("client/project/pages/create-impulse-ui",["require","exports","shared/viewmodels/retrain","client/notify","client/ui-helpers","client/project/components/block-version-popup"],(function(require,exports,retrain_5,notify_23,ui_helpers_1,block_version_popup_2){Object.defineProperty(exports,"__esModule",{value:!0});exports.CreateImpulseUI=void 0;class CreateImpulseUI{constructor(studioApi){this._inputEmpty=document.querySelector("#input-empty");this._dspEmpty=document.querySelector("#dsp-empty");this._learnEmpty=document.querySelector("#classification-empty");this._state={inputBlocks:[],dspBlocks:[],learnBlocks:[]};this._closeInputBtn=document.querySelector('#add-input-block-modal button[data-dismiss="modal"]');this._closeDspBtn=document.querySelector('#add-dsp-block-modal button[data-dismiss="modal"]');this._closeLearningBtn=document.querySelector('#add-learning-block-modal button[data-dismiss="modal"]');this._checkboxId=1;this._stateEl=document.querySelector("#impulse-state");this._saveImpulseBtn=document.querySelector("#save-impulse");this._noFeaturesEl=document.querySelector("#raw-data-no-features");this._customBlockUrlEl=document.querySelector("#custom-block-url");this._customBlockAddBtn=document.querySelector("#add-custom-block");this._closeCustomBlockBtn=document.querySelector('#custom-block-modal button[data-dismiss="modal"]');this._manageInputVersionsBtn=document.querySelector("#manage-input-versions");this._studioApi=studioApi;let vmText=document.querySelector("#view-model").value;this._viewModel=JSON.parse(decodeURIComponent(vmText));if(this._stateEl.value)try{console.log("recovering state",this._stateEl.value);console.log("recovering state2",JSON.parse(this._stateEl.value));this.loadState(JSON.parse(this._stateEl.value))}catch(ex2){let ex=ex2;console.error("Failed to load state...",this._stateEl.value,ex)}this._defaultImageSize="object_detection"===this._viewModel.labelingMethod?320:96;if(0===this._state.inputBlocks.length){let state;console.log("viewmodel",this._viewModel);if("image"in this._viewModel.sensorSummary)state={id:++this._checkboxId,type:"image",name:"Image",title:"Image data",resizeMethod:"lanczos3",imageWidth:this._defaultImageSize,imageHeight:this._defaultImageSize,resizeMode:"fit-short",cropAnchor:"middle-center",primaryVersion:!1};else if("video"in this._viewModel.sensorSummary)state={id:++this._checkboxId,type:"video",name:"Video",title:"Video data",resizeMethod:"lanczos3",imageWidth:this._defaultImageSize,imageHeight:this._defaultImageSize,resizeMode:"fit-short",cropAnchor:"middle-center",windowSizeMs:200,windowIncreaseMs:200,primaryVersion:!1};else{state={id:++this._checkboxId,type:"time-series",name:"Time series",title:"Time series data",primaryVersion:!1,padZeros:!0,windowSizeMs:1e3,windowIncreaseMs:1e3,frequencyHz:this.getRecommendedFrequency()};if("accX"in this._viewModel.sensorSummary||"accY"in this._viewModel.sensorSummary||"accZ"in this._viewModel.sensorSummary){state.windowSizeMs=2e3;state.windowIncreaseMs=80}else if("audio"in this._viewModel.sensorSummary){state.windowSizeMs=1e3;state.windowIncreaseMs=500}}this._state.inputBlocks.push(state);this._currentInputBlock=state;this._inputEmpty.style.display="none"}else{let inputStacks=CreateImpulseUI.getVersionStacks(this._state.inputBlocks,"input");if(inputStacks.length>1)throw new Error("Only one stack of input block versions is permitted");this._currentInputBlock=inputStacks[0].primaryVersion}this.renderBlocks();Array.from(document.querySelectorAll("#add-input-block-modal .add-btn")).forEach(btn=>{btn.onclick=ev=>{ev.preventDefault();try{if(!btn.dataset.inputName||!btn.dataset.inputType||!btn.dataset.inputTitle)throw new Error("Could not find values in dataset...");let type=btn.dataset.inputType;if("image"!==type&&"time-series"!==type&&"video"!==type)throw new Error('Unexpected input type: "'+type+'" is not a recognized input type');this.addNewInputBlock(btn.dataset.inputTitle,btn.dataset.inputName,type);this._closeInputBtn.click()}catch(ex2){let ex=ex2;notify_23.Notify.alert("Failed to add DSP block",notify_23.Notify.extractMsg(ex),"danger")}}});Array.from(document.querySelectorAll("#add-dsp-block-modal .add-btn")).forEach(btn=>{btn.onclick=ev=>{ev.preventDefault();try{if(!btn.dataset.dspName||!btn.dataset.dspType||!btn.dataset.dspTitle)throw new Error("Could not find values in dataset...");let organization;btn.dataset.dspOrganizationId&&btn.dataset.dspOrganizationDspId&&(organization={id:Number(btn.dataset.dspOrganizationId),dspId:Number(btn.dataset.dspOrganizationDspId)});this.addNewDSPBlock(btn.dataset.dspTitle,btn.dataset.dspName,btn.dataset.dspType,void 0,Number(btn.dataset.dspImplementationVersion),organization);this._closeDspBtn.click()}catch(ex2){let ex=ex2;notify_23.Notify.alert("Failed to add DSP block",notify_23.Notify.extractMsg(ex),"danger")}}});Array.from(document.querySelectorAll("#add-learning-block-modal .add-btn")).forEach(btn=>{btn.onclick=ev=>{ev.preventDefault();try{if(!btn.dataset.learningName||!btn.dataset.learningType||!btn.dataset.learningTitle)throw new Error("Could not find values in dataset...");this.addNewLearnBlock(btn.dataset.learningTitle,btn.dataset.learningName,btn.dataset.learningType);this._closeLearningBtn.click()}catch(ex2){let ex=ex2;notify_23.Notify.alert("Failed to add learning block",notify_23.Notify.extractMsg(ex),"danger")}}});document.querySelector('*[data-target="#custom-block-modal"]').onclick=()=>{this._customBlockUrlEl.value="";this._closeDspBtn.click()};this._customBlockUrlEl.oninput=()=>this._customBlockUrlEl.classList.remove("is-invalid");this._customBlockAddBtn.onclick=async ev=>{ev.preventDefault();if(!this._studioApi.isAdmin)return;let currText=this._customBlockAddBtn.textContent,url=this._customBlockUrlEl.value;if(0===this._customBlockUrlEl.value.indexOf("http"))try{this._customBlockAddBtn.textContent="Verifying URL...";let customBlockUrl=this._customBlockUrlEl.value.replace(/\/+$/,""),verifyRes=await this._studioApi.impulse.verifyDspBlockUrl(this._studioApi.projectId,{url:customBlockUrl});if(!verifyRes.body||!verifyRes.body.success||!verifyRes.body.block)throw new Error(verifyRes.body&&verifyRes.body.error||verifyRes.response.responseText);this.addNewDSPBlock(verifyRes.body.block.title,verifyRes.body.block.name,"custom",url,verifyRes.body.block.latestImplementationVersion,void 0);this._closeCustomBlockBtn.click()}catch(ex2){let ex=ex2;notify_23.Notify.alert("Failed to add custom block",notify_23.Notify.extractMsg(ex),"danger")}finally{this._customBlockAddBtn.textContent=currText}else this._customBlockUrlEl.classList.add("is-invalid")};window.history.replaceState(null,"",window.location.pathname)}loadState(state){this._state=state;for(let input of this._state.inputBlocks.filter(b=>!0!==b.db))input.id>this._checkboxId&&(this._checkboxId=input.id+1);for(let dsp of this._state.dspBlocks.filter(b=>!0!==b.db))dsp.id>this._checkboxId&&(this._checkboxId=dsp.id+1);for(let learn of this._state.learnBlocks.filter(b=>!0!==b.db))learn.id>this._checkboxId&&(this._checkboxId=learn.id+1);this._state.inputBlocks=this._state.inputBlocks.filter(b=>!1!==b.enabled);this._state.dspBlocks=this._state.dspBlocks.filter(b=>!1!==b.enabled);this._state.learnBlocks=this._state.learnBlocks.filter(b=>!1!==b.enabled);this._state.inputBlocks.length>0&&(this._inputEmpty.style.display="none")}renderBlocks(){CreateImpulseUI.getVersionStacks(this._state.dspBlocks,"dsp").forEach(this.appendDSPBlock.bind(this));CreateImpulseUI.getVersionStacks(this._state.learnBlocks,"learn").forEach(this.appendLearnBlock.bind(this));CreateImpulseUI.getVersionStacks(this._state.inputBlocks,"input").forEach(this.appendInputBlock.bind(this));this.renderOutputBlock()}static getVersionStacks(allBlocks,blockType){let baseBlockIds=[...new Set(allBlocks.map(b=>b.baseBlockId).filter(i=>void 0!==i))],stacks=new Map;for(let baseBlockId of baseBlockIds)void 0!==baseBlockId&&stacks.set(baseBlockId,allBlocks.filter(b=>b.baseBlockId===baseBlockId));let blocksWithoutBase=allBlocks.filter(b=>void 0===b.baseBlockId);for(let block of blocksWithoutBase){let stack=stacks.get(block.id);stack?stacks.set(block.id,[block].concat(stack)):stacks.set(block.id,[block])}let stackInfo=[];for(let baseBlockId of stacks.keys()){let stack=stacks.get(baseBlockId);if(!stack)throw new Error("Stack should never be empty when iterating through keys");let base=stack.find(b=>void 0===b.baseBlockId),primary=stack.find(b=>b.primaryVersion);void 0===primary&&(primary=base||stack.sort((a,b)=>a.id-b.id)[0]);stackInfo.push({primaryVersion:primary,baseVersion:base,allVersions:stack})}return stackInfo}storeState(){console.log("state is now",this._state);this._stateEl.value=JSON.stringify(this._state);this._state.learnBlocks.length>0?this._saveImpulseBtn.disabled=!1:this._saveImpulseBtn.disabled=!0}initWindowSizeSlider(el){if("time-series"!==this._state.inputBlocks[0].type&&"video"!==this._state.inputBlocks[0].type)return;let sliderEl=el.querySelector(".input-slider"),sliderValueEl=el.querySelector(".input-slider-value"),currValue=this._currentInputBlock.windowSizeMs||Number(sliderEl.dataset.rangeValue),minValue=Number(sliderEl.dataset.rangeValueMin),maxValue=Number(sliderEl.dataset.rangeValueMax);currValue>maxValue&&(maxValue=currValue);let opts={start:[currValue],connect:[!0,!1],step:1,range:{min:[minValue],max:[maxValue]}};this._studioApi.isAdmin||sliderEl.setAttribute("disabled","disabled");noUiSlider.create(sliderEl,opts);this._currentInputBlock.windowSizeMs=currValue;sliderValueEl.onclick=async()=>{if(!this._studioApi.isAdmin)return;let newValue=await notify_23.Notify.prompt("Window size","Enter a new value for the window size","Change window size",currValue.toString(),"question","info");if(newValue&&!isNaN(Number(newValue))){let v=Number(newValue);if(v>opts.range.max[0]){opts.range.max[0]=v;sliderEl.noUiSlider.updateOptions(opts)}sliderEl.noUiSlider.set(Number(newValue))}};sliderEl.noUiSlider.on("update",_value=>{if("time-series"!==this._state.inputBlocks[0].type&&"video"!==this._state.inputBlocks[0].type)return;let value=Number(_value[0]);currValue=this._currentInputBlock.windowSizeMs=value;sliderValueEl.textContent=Math.floor(value)+" ms.";sliderEl.dataset.rangeValue=Math.floor(value).toString();this.storeState()})}initSlidingWindowSlider(el){if("time-series"!==this._state.inputBlocks[0].type&&"video"!==this._state.inputBlocks[0].type)return;let sliderEl=el.querySelector(".sliding-window-slider"),sliderValueEl=el.querySelector(".sliding-window-slider-value"),currValue=this._currentInputBlock.windowIncreaseMs||Number(sliderEl.dataset.rangeValue),minValue=Number(sliderEl.dataset.rangeValueMin),maxValue=Number(sliderEl.dataset.rangeValueMax);currValue>maxValue&&(maxValue=currValue);let opts={start:[currValue],connect:[!0,!1],step:1,range:{min:[minValue],max:[maxValue]}};this._studioApi.isAdmin||sliderEl.setAttribute("disabled","disabled");noUiSlider.create(sliderEl,opts);this._currentInputBlock.windowIncreaseMs=currValue;sliderValueEl.onclick=async()=>{if(!this._studioApi.isAdmin)return;let newValue=await notify_23.Notify.prompt("Window increase","Enter a new value for the sliding window increase","Change window increase",currValue.toString(),"question","info");if(newValue&&!isNaN(Number(newValue))){let v=Number(newValue);if(v>opts.range.max[0]){opts.range.max[0]=v;sliderEl.noUiSlider.updateOptions(opts)}sliderEl.noUiSlider.set(Number(newValue))}};sliderEl.noUiSlider.on("update",_value=>{if("time-series"!==this._state.inputBlocks[0].type&&"video"!==this._state.inputBlocks[0].type)return;let value=Number(_value[0]);currValue=this._currentInputBlock.windowIncreaseMs=value;sliderValueEl.textContent=Math.floor(value)+" ms.";sliderEl.dataset.rangeValue=Math.floor(value).toString();this.storeState()})}addNewDSPBlock(title,name,type,customUrl,implementationVersion,organization){let state={id:++this._checkboxId,type:type,name:name,axes:Object.keys(this._viewModel.sensorSummary),title:title,customUrl:customUrl,primaryVersion:!1,input:ui_helpers_1.getImplicitInputBlock(this._state).id,implementationVersion:implementationVersion,organization:organization};this._state.dspBlocks.push(state);this.appendDSPBlock({primaryVersion:state});let inputBlock=this._state.inputBlocks[0];if("syntiant"===type&&inputBlock&&"time-series"===inputBlock.type){inputBlock.windowSizeMs=968;let el=document.querySelector("#input-block-"+inputBlock.id);if(el){let sliderEl=el.querySelector(".input-slider");el.querySelector(".input-slider-value").textContent=Math.floor(inputBlock.windowSizeMs)+" ms.";sliderEl.dataset.rangeValue=Math.floor(inputBlock.windowSizeMs).toString()}}this.storeState()}renderDSPBlock(primary,base,versions){let template=document.querySelector("#dsp-template"),el=document.createElement("div");for(let cls of template.classList)el.classList.add(cls);el.innerHTML=template.innerHTML;el.querySelector(".dsp-title").textContent=primary.title;let nameEl=el.querySelector(".dsp-name");nameEl.value=base?base.name:primary.name;nameEl.oninput=()=>{if(versions)for(let block of versions)block.name=nameEl.value;else primary.name=nameEl.value;for(let labelEl of Array.from(document.querySelectorAll(`*[data-dsp-id="${primary.id}"] .custom-control-label`)))labelEl.textContent=nameEl.value;this.storeState()};const updateAxesCount=()=>{el.querySelector(".dsp-axes-label").textContent="Input axes ("+primary.axes.length.toString()+")"};let dspAxesEl=el.querySelector(".dsp-axes"),sensorAxes=Object.keys(this._viewModel.sensorSummary);for(let a of primary.axes)-1===sensorAxes.indexOf(a)&&sensorAxes.push(a);for(let axis of sensorAxes){let cb=this.createCheckbox(axis,primary.axes.indexOf(axis)>-1,!1);dspAxesEl.appendChild(cb);let input=cb.querySelector("input");input.addEventListener("input",()=>{console.log("input change",input.checked,axis,primary.axes);input.checked?primary.axes.push(axis):primary.axes.indexOf(axis)>-1&&primary.axes.splice(primary.axes.indexOf(axis),1);console.log("input change done",primary.axes);updateAxesCount();this.storeState()})}updateAxesCount();let removeEl=el.querySelector(".dsp-remove");removeEl&&(removeEl.onclick=ev=>{ev.preventDefault();el.parentNode.removeChild(el);let removeDSPConnections=dspBlock=>{for(let itemToRemove of Array.from(document.querySelectorAll(`*[data-dsp-id="${dspBlock.id}"]`)))itemToRemove.parentNode&&itemToRemove.parentNode.removeChild(itemToRemove);for(let c of this._state.learnBlocks)c.dsp.indexOf(dspBlock.id)>-1&&c.dsp.splice(c.dsp.indexOf(dspBlock.id),1)};if(versions)for(let version of versions){this._state.dspBlocks.splice(this._state.dspBlocks.indexOf(version),1);removeDSPConnections(version)}else{this._state.dspBlocks.splice(this._state.dspBlocks.indexOf(primary),1);removeDSPConnections(primary)}this.storeState()});for(let card of Array.from(document.querySelectorAll(".real-classification-card"))){let learnState=this._state.learnBlocks.find(c=>c.id===Number(card.dataset.id));if(!learnState){console.error("Could not find learn state",card.dataset.id);continue}let cb=this.createDSPCheckbox(primary,learnState);card.querySelector(".dsp-axes").appendChild(cb)}if(primary.customUrl){el.querySelector(".connection-status-container").style.display="";const connectionElement=el.querySelector(".connection-url");function setConnected(){connectionElement.classList.add("bg-green");connectionElement.classList.remove("bg-red");connectionElement.title=`Connected to ${primary.customUrl}`}function setDisconnected(){connectionElement.classList.add("bg-red");connectionElement.classList.remove("bg-green");connectionElement.title=`Failed to connect to ${primary.customUrl}`}const updateLinkButton=el.querySelector(".dsp-update-link");if(updateLinkButton){updateLinkButton.style.display="";updateLinkButton.onclick=async ev=>{ev.preventDefault();let newUrl=await notify_23.Notify.prompt("New URL",`Enter a new URL for block "${primary.title}"`,"Confirm URL",primary.customUrl||"","question","info");if(newUrl)try{newUrl=newUrl.replace(/\/+$/,"");let verifyRes=await this._studioApi.impulse.verifyDspBlockUrl(this._studioApi.projectId,{url:newUrl});if(!verifyRes.body||!verifyRes.body.success||!verifyRes.body.block)throw new Error(verifyRes.body.error||verifyRes.response.responseText);if(versions)for(let block of versions)block.customUrl=newUrl;else primary.customUrl=newUrl;this.storeState();setConnected();await notify_23.Notify.alert("Successfully set block URL",'Click "Save Impulse" to update your impulse.',"success")}catch(ex2){let ex=ex2;await notify_23.Notify.alert("Unable to set block URL",notify_23.Notify.extractMsg(ex),"error")}}}(async()=>{if(!this._studioApi.isAdmin)return;const customUrl=(primary.customUrl||"").replace(/\/+$/,"");let verifyRes=await this._studioApi.impulse.verifyDspBlockUrl(this._studioApi.projectId,{url:customUrl});verifyRes.body&&verifyRes.body.success&&verifyRes.body.block?setConnected():setDisconnected()})()}return el}addNewLearnBlock(title,name,type){if(-1===retrain_5.LEARN_TYPE_OPTIONS.indexOf(type))throw new Error('Invalid learn block type "'+type+'"');let lType=type,state={id:++this._checkboxId,type:lType,name:name,dsp:this.determineDefaultDSPBlocks().map(d=>d.id),title:title,primaryVersion:!0};this._state.learnBlocks.push(state);this.appendLearnBlock({primaryVersion:state});this.storeState();this.renderOutputBlock()}determineDefaultDSPBlocks(){let primaryLearnBlockDSPs=this._state.learnBlocks.filter(b=>b.primaryVersion).map(b=>b.dsp).reduce((flat,next)=>flat.concat(next),[]),primaryInputBlocks=this._state.dspBlocks.filter(b=>primaryLearnBlockDSPs.indexOf(b.id)>-1).map(b=>b.input),potentialDSPBlocks=this._state.dspBlocks.filter(b=>primaryInputBlocks.indexOf(b.input)>-1);if(!potentialDSPBlocks.length)return this._state.dspBlocks.filter(b=>void 0===b.baseBlockId);let defaultDSPBlocks=[],dspStacks=CreateImpulseUI.getVersionStacks(this._state.dspBlocks,"dsp");for(let stack of dspStacks){if(!stack.allVersions||!stack.baseVersion)throw new Error("Missing information about version stack");let matchingItems=stack.allVersions.filter(b=>potentialDSPBlocks.map(d=>d.id).indexOf(b.id)>-1);if(0===matchingItems.length)continue;if(1===matchingItems.length){defaultDSPBlocks.push(matchingItems[0]);continue}let referencedItems=matchingItems.filter(b=>primaryLearnBlockDSPs.indexOf(b.id)>-1);0===referencedItems.length&&defaultDSPBlocks.push(stack.baseVersion);if(1!==referencedItems.length)throw new Error("Multiple DSP versions in the same stack are referenced by a primary learn block");defaultDSPBlocks.push(referencedItems[0])}return defaultDSPBlocks}appendLearnBlock(stackInfo){let el=this.renderLearnBlock(stackInfo.primaryVersion,stackInfo.baseVersion,stackInfo.allVersions);this._learnEmpty.parentNode.insertBefore(el,this._learnEmpty)}appendDSPBlock(stackInfo){let el=this.renderDSPBlock(stackInfo.primaryVersion,stackInfo.baseVersion,stackInfo.allVersions);this._dspEmpty.parentNode.insertBefore(el,this._dspEmpty)}appendInputBlock(stackInfo){let el=this.renderInputBlock(stackInfo.primaryVersion);this._inputEmpty.parentNode.insertBefore(el,this._inputEmpty);$('[data-toggle="tooltip"]').tooltip()}renderLearnBlock(primary,base,versions){let template=document.querySelector("#classification-template"),el=document.createElement("div");for(let cls of template.classList)el.classList.add(cls);el.classList.add("real-classification-card");el.dataset.id=primary.id.toString();el.innerHTML=template.innerHTML;let kwsNote=el.querySelector(".kws-transfer-learning-note");kwsNote&&(kwsNote.style.display="keras-transfer-kws"===primary.type?"":"none");let dspAxesEl=el.querySelector(".dsp-axes");el.querySelector(".dsp-title").textContent=primary.title;let nameEl=el.querySelector(".dsp-name");nameEl.value=base?base.name:primary.name;nameEl.oninput=()=>{if(versions)for(let block of versions)block.name=nameEl.value;else primary.name=nameEl.value;this.storeState()};let featureCount=el.querySelector(".dsp-no-features");if(this._viewModel.labels[primary.type]&&0!==this._viewModel.labels[primary.type].length){let labels=this._viewModel.labels[primary.type];featureCount.textContent=`${labels.length} (${labels.join(", ")})`}else featureCount.textContent="Not configured yet";let dspStacks=CreateImpulseUI.getVersionStacks(this._state.dspBlocks,"dsp");for(let v of dspStacks){if(!v.allVersions)throw new Error("Missing DSP stack information");let cb,selectedBlock=v.allVersions.find(b=>primary.dsp.indexOf(b.id)>-1);cb=selectedBlock?this.createDSPCheckbox(selectedBlock,primary):this.createDSPCheckbox(v.primaryVersion,primary);dspAxesEl.appendChild(cb)}let removeEl=el.querySelector(".dsp-remove");removeEl&&(removeEl.onclick=ev=>{ev.preventDefault();el.parentNode.removeChild(el);if(versions)for(let version of versions)this._state.learnBlocks.splice(this._state.learnBlocks.indexOf(version),1);else this._state.learnBlocks.splice(this._state.learnBlocks.indexOf(primary),1);this.storeState();this.renderOutputBlock()});return el}renderOutputBlock(){let out=document.querySelector("#output-features");if(0===this._state.learnBlocks.length)out.textContent="";else{let classes=[];for(let c of this._state.learnBlocks.filter(b=>b.primaryVersion))classes=classes.concat(this._viewModel.labels[c.type]||[]);out.textContent=`${classes.length} (${classes.join(", ")})`}}createDSPCheckbox(v,state){let cb=this.createCheckbox(v.name,state.dsp.indexOf(v.id)>-1,!0);cb.dataset.dspId=v.id.toString();cb.querySelector("input").oninput=ev=>{ev.currentTarget.checked?state.dsp.push(v.id):state.dsp.indexOf(v.id)>-1&&state.dsp.splice(state.dsp.indexOf(v.id),1);this.storeState()};return cb}addNewInputBlock(title,name,type){let state;if("time-series"===type)state={id:++this._checkboxId,type:type,name:name,title:title,primaryVersion:!1,windowIncreaseMs:1e3,windowSizeMs:1e3,frequencyHz:this.getRecommendedFrequency(),padZeros:!0};else if("video"===type)state={id:++this._checkboxId,type:type,name:name,title:title,resizeMethod:"lanczos3",imageWidth:this._defaultImageSize,imageHeight:this._defaultImageSize,resizeMode:"fit-short",cropAnchor:"middle-center",windowIncreaseMs:200,windowSizeMs:200,primaryVersion:!1};else{if("image"!==type)throw new Error("Invalid type");state={id:++this._checkboxId,type:type,name:name,title:title,resizeMethod:"lanczos3",imageWidth:this._defaultImageSize,imageHeight:this._defaultImageSize,resizeMode:"fit-short",cropAnchor:"middle-center",primaryVersion:!1}}this._inputEmpty.style.display="none";this._state.inputBlocks.push(state);this.storeState();let el=this.renderInputBlock(state,!0);this._inputEmpty.parentNode.insertBefore(el,this._inputEmpty)}renderInputBlock(state,newBlock=!1){var _a,_b,_c,_d;let template=document.querySelector("#input-block-template"),el=document.createElement("div");for(let cls of template.classList)el.classList.add(cls);el.innerHTML=template.innerHTML;el.id="input-block-"+state.id;el.classList.add("input-block");let rowDataType=el.querySelector(".row-data-type"),rowDataAxes=el.querySelector(".row-data-axes"),rowWindowSize=el.querySelector(".row-window-size"),rowWindowIncrease=el.querySelector(".row-window-increase"),rowFrequency=el.querySelector(".row-frequency"),rowImageWidth=el.querySelector(".row-image-width"),rowImageHeight=el.querySelector(".row-image-height"),rowResizeMode=el.querySelector(".row-resize-mode"),rowResizeMethod=el.querySelector(".row-resize-method"),rowNoSettings=el.querySelector(".row-no-settings"),rowZeroPad=el.querySelector(".row-pad-zeros"),rowTransferLearningInfo=el.querySelector("#transfer-learning-info"),manageInputVersionsButton=el.querySelector(".manage-input-versions");rowDataType.style.display="none";rowDataAxes.style.display="block";rowWindowSize.style.display="time-series"===state.type||"video"===state.type?"block":"none";rowWindowIncrease.style.display="time-series"===state.type||"video"===state.type?"block":"none";rowFrequency.style.display="time-series"===state.type?"block":"none";rowZeroPad.style.display="time-series"===state.type?"block":"none";rowImageWidth.style.display="image"===state.type||"video"===state.type?"block":"none";rowImageHeight.style.display="image"===state.type||"video"===state.type?"block":"none";rowResizeMode.style.display="image"===state.type||"video"===state.type?"block":"none";rowResizeMethod.style.display="none";rowTransferLearningInfo.style.display="image"===state.type?"block":"none";rowNoSettings.style.display="none";let sensorAxes=Object.keys(this._viewModel.sensorSummary),axesElLabel=el.querySelector(".raw-data-axes-label");1===sensorAxes.length?axesElLabel.textContent="Input axes":axesElLabel.textContent="Input axes ("+sensorAxes.length.toString()+")";let axesEl=el.querySelector(".raw-data-axes");axesEl.textContent=axesEl.title=sensorAxes.join(", ");if("image"===state.type||"video"===state.type){let titleEl=el.querySelector(".input-block-title"),inputImageWidth=el.querySelector(".image-width"),inputImageHeight=el.querySelector(".image-height"),inputResizeMode=el.querySelector(".resize-mode"),inputResizeMethod=el.querySelector(".resize-method");"image"===state.type?titleEl.textContent="Image data":"video"===state.type&&(titleEl.textContent="Video data");inputImageWidth.value=(null===(_a=state.imageWidth)||void 0===_a?void 0:_a.toString())||this._defaultImageSize.toString();inputImageWidth.addEventListener("blur",()=>{if("image"===this._currentInputBlock.type||"video"===this._currentInputBlock.type){this._currentInputBlock.imageWidth=Number(inputImageWidth.value);this.storeState()}});inputImageHeight.value=(null===(_b=state.imageHeight)||void 0===_b?void 0:_b.toString())||this._defaultImageSize.toString();inputImageHeight.addEventListener("blur",()=>{if("image"===this._currentInputBlock.type||"video"===this._currentInputBlock.type){this._currentInputBlock.imageHeight=Number(inputImageHeight.value);this.storeState()}});inputResizeMode.value=(null===(_c=state.resizeMode)||void 0===_c?void 0:_c.toString())||"fit-short";inputResizeMode.addEventListener("blur",()=>{if("image"===this._currentInputBlock.type||"video"===this._currentInputBlock.type){this._currentInputBlock.resizeMode=inputResizeMode.value;this.storeState()}});inputResizeMethod.value=(null===(_d=state.resizeMethod)||void 0===_d?void 0:_d.toString())||"lanczos3";inputResizeMethod.addEventListener("blur",()=>{if("image"===this._currentInputBlock.type||"video"===this._currentInputBlock.type){this._currentInputBlock.resizeMethod=inputResizeMethod.value;this.storeState()}});const updateResizePreview=selectedOption=>{const options=["squash","fit-short","fit-long"];for(const option of options){const previewContainer=el.querySelector(`#resize-preview-${option}`);previewContainer.style.display=option===selectedOption?"block":"none"}};updateResizePreview(inputResizeMode.value);rowResizeMode.onchange=()=>{updateResizePreview(inputResizeMode.value)};if("video"===state.type){this.initSlidingWindowSlider(el);this.initWindowSizeSlider(el)}}else if("time-series"===state.type){el.querySelector(".input-block-title").textContent="Time series data";let zeroPad=el.querySelector(".zero-pad");zeroPad.checked=state.padZeros;zeroPad.oninput=()=>{if("time-series"===this._state.inputBlocks[0].type){this._state.inputBlocks[0].padZeros=zeroPad.checked;this.storeState()}};let resetFrequencyButton=el.querySelector("#use-recommended-frequency"),frequencyInput=el.querySelector("#frequency-value"),frequencyValue=this._state.inputBlocks[0].frequencyHz;null==frequencyValue&&(frequencyValue=this.getRecommendedFrequency());frequencyInput.value=frequencyValue.toString();frequencyInput.onblur=()=>{const freqValue=Number(frequencyInput.value);freqValue!==this.getRecommendedFrequency()?resetFrequencyButton.style.display="block":resetFrequencyButton.style.display="none";if(isNaN(freqValue)||freqValue<=0)frequencyInput.value=frequencyValue.toString();else{this._currentInputBlock.frequencyHz=Number(frequencyInput.value);this.storeState()}};resetFrequencyButton.onclick=()=>{frequencyInput.value=this.getRecommendedFrequency().toString();this._currentInputBlock.frequencyHz=Number(frequencyInput.value);this.storeState();resetFrequencyButton.style.display="none"};this.initSlidingWindowSlider(el);this.initWindowSizeSlider(el)}let removeEl=el.querySelector(".input-remove");removeEl&&(removeEl.onclick=ev=>{ev.preventDefault();el.parentNode.removeChild(el);this._state.inputBlocks=[];this._inputEmpty.style.display="block";this.storeState()});manageInputVersionsButton&&(newBlock?manageInputVersionsButton.classList.add("d-none"):manageInputVersionsButton.onclick=this.manageInputBlockVersionsClick.bind(this));return el}async manageInputBlockVersionsClick(ev){ev.preventDefault();if(this._inputBlockVersionPopup)return;let popupElement=document.querySelector(".block-version-ui-modal");if(!popupElement)throw new Error("Root element .block-version-ui-modal was missing, not instantiating");this._inputBlockVersionPopup=new block_version_popup_2.BlockVersionPopup(popupElement,this._state.inputBlocks,this._studioApi,this._currentInputBlock.id,"input",this._currentInputBlock.type);let result=await this._inputBlockVersionPopup.show();if(result.initialBlockInvalidated)location.reload();else{if(void 0!==result.currentBlockId){let selectedBlock=this._state.inputBlocks.find(b=>b.id===result.currentBlockId);if(!selectedBlock)throw new Error("Block version popup specified an unknown block id "+result.currentBlockId);let originalBlock=document.querySelector("#input-block-"+this._currentInputBlock.id);if(!originalBlock)throw new Error("Could not find existing input block in DOM");originalBlock.remove();this._currentInputBlock=selectedBlock;this.appendInputBlock({primaryVersion:this._currentInputBlock})}this._inputBlockVersionPopup=void 0}}createCheckbox(name,checked,white){let wrapper=document.createElement("div");wrapper.classList.add("custom-control","custom-checkbox","mb-3");let input=document.createElement("input");input.classList.add("custom-control-input");input.type="checkbox";input.dataset.name=name;input.id="cb-"+ ++this._checkboxId;input.checked=checked;this._studioApi.isAdmin||(input.disabled=!0);let label=document.createElement("label");label.classList.add("custom-control-label");white&&label.classList.add("text-white");label.setAttribute("for",input.id);label.textContent=name;wrapper.appendChild(input);wrapper.appendChild(label);return wrapper}getRecommendedFrequency(){let recommendedFrequency=62.5;const recommendedFrequencyEl=document.querySelector("#recommended-frequency");recommendedFrequencyEl&&(recommendedFrequency=Number(recommendedFrequencyEl.value));return recommendedFrequency}}exports.CreateImpulseUI=CreateImpulseUI}));define("client/project/pages/training-anomaly-ui",["require","exports","client/project/components/job-runner","client/project/components/anomaly-explorer","shared/WebSocketTypes","client/project/components/block-version-header"],(function(require,exports,job_runner_7,anomaly_explorer_2,WebSocketTypes_11,block_version_header_4){Object.defineProperty(exports,"__esModule",{value:!0});exports.TrainingAnomalyUI=void 0;exports.TrainingAnomalyUI=class{constructor(studioApi){var _a;this._clusterCountEl=document.querySelector("#input-cluster-count");this._anomalyAxesEl=document.querySelector("#anomaly-axes");this._confidenceRatingEl=document.querySelector("#confidence-rating");this._loadClassificationEl=document.querySelector("#load-classification");this._axisX=document.querySelector("#axis-x");this._axisY=document.querySelector("#axis-y");this._anomalyScore=document.querySelector("#anomaly-score");this._axisDistance=document.querySelector("#axis-distance");this._validationScoreSection=document.querySelector("#validation-score");this._origText="";this._selectSuggested=document.querySelector("#select-suggested-axes");this._hasTrainedModel=!1;this._studioApi=studioApi;this._learnId=Number(document.querySelector("#learn-id").value);console.log("learnId",this._learnId);this._blockVersionHeader=block_version_header_4.BlockVersionHeader.createWithDefaultHTML("learn",this._studioApi);this._trainingOutputSection=document.querySelector("#training-output-section");this._jobRunner=new job_runner_7.JobRunner(this._studioApi,this._trainingOutputSection);this._anomalyExplorer=new anomaly_explorer_2.AnomalyExplorer(studioApi,document.querySelector("#anomaly-explorer"),this._learnId);this._trainingBtn=document.querySelector("#train");this._trainingBtn&&(this._trainingBtn.onclick=ev=>{ev.preventDefault();this.startTraining()});this._origText=(null===(_a=this._trainingBtn)||void 0===_a?void 0:_a.textContent)||"";"true"===document.querySelector("#has-anomaly-model").value&&this._loadClassificationEl.value&&this._anomalyExplorer.setClassify(Number(this._loadClassificationEl.value));this._loadClassificationEl.oninput=()=>{this._validationScoreSection.style.visibility="hidden";this._loadClassificationEl.value?this._anomalyExplorer.loadFeatureExplorerPlusClassify(Number(this._loadClassificationEl.value)):this._anomalyExplorer.clearClassifyAndUpdate()};this._anomalyExplorer.on("anomaly-score",ev=>{this._validationScoreSection.style.display="block";let max=Math.max(...new Set(ev.scores)),min=Math.min(...new Set(ev.scores)),avg=ev.scores.reduce((curr,v)=>v+=curr)/ev.scores.length;this._anomalyScore.textContent=`min: ${min.toFixed(4)}, max: ${max.toFixed(4)}, avg: ${avg.toFixed(4)}`;this._axisDistance.textContent=Object.keys(ev.axisDistance).map(k=>`${k}: ${ev.axisDistance[k].toFixed(4)}`).join(", ");this._validationScoreSection.style.visibility="visible"});this._selectSuggested.onclick=ev=>{ev.preventDefault();for(let c of Array.from(this._anomalyAxesEl.querySelectorAll('input[type="checkbox"]')))"1"===c.dataset.favourite?c.checked=!0:c.checked=!1};this._studioApi.socket.addEventListener("connect",this.checkForRunningProcess.bind(this));this.refreshMetadata()}jobFinished(id,success){if(id!==this._currJobId)return;this._studioApi.analytics.event("job-finish-"+(success?"success":"fail"),{event_category:"anomaly"});let newAxes=Array.from(this._anomalyAxesEl.querySelectorAll("input:checked")).map(inp=>({ix:Number(inp.dataset.ix),label:inp.dataset.label||""}));if(success){let i=document.querySelector('a[href="'+location.pathname+'"].nav-link i');if(i){i.classList.remove("text-gray");i.classList.add("text-green")}this._validationScoreSection.style.visibility="hidden";this._anomalyExplorer.invalidateCache();let prev=Array.from(this._axisX.childNodes).map(c=>Number(c.value));JSON.stringify(prev)!==JSON.stringify(newAxes)&&this._anomalyExplorer.updateLabels(newAxes);this.refreshMetadata()}this.enableUI()}enableUI(){if(this._trainingBtn){this._trainingBtn.classList.remove("disabled");this._trainingBtn.textContent=this._origText}}disableUI(){if(this._trainingBtn){this._trainingBtn.classList.add("disabled");this._trainingBtn.textContent="Training..."}this._trainingOutputSection.style.display="block"}async startTraining(){try{this.disableUI();this._studioApi.analytics.event("start-job",{event_category:"anomaly"});let newAxes=Array.from(this._anomalyAxesEl.querySelectorAll("input:checked")).map(inp=>({ix:Number(inp.dataset.ix),label:inp.dataset.label||""}));this._currJobId=await this._jobRunner.startJob(this._studioApi.jobs.trainAnomalyJob(this._studioApi.projectId,this._learnId,{clusterCount:Number(this._clusterCountEl.value),axes:newAxes.map(ax=>ax.ix),minimumConfidenceRating:Number(this._confidenceRatingEl.value)}));this._jobRunner.on("finished",this.jobFinished.bind(this))}catch(ex2){let ex=ex2;this.enableUI();this._jobRunner.startJobFailed(ex)}}async refreshMetadata(){const{body:metadata}=await this._studioApi.learn.getAnomalyMetadata(this._studioApi.projectId,this._learnId);this._hasTrainedModel=metadata.success;if(metadata.success){for(let axis of metadata.axes){let ax=this._anomalyAxesEl.querySelector("#axis-"+axis);ax&&(ax.checked=!0)}await this._anomalyExplorer.setMetadata(metadata)}}async checkForRunningProcess(){if(!this._studioApi.isAdmin)return;let job=await this._jobRunner.getActiveJob(WebSocketTypes_11.JOB_KEY_PREFIX.learnTrain+"-"+this._learnId);if(job){this._currJobId=job.id;this.disableUI();await this._jobRunner.resumeJob(job.id);this._jobRunner.on("finished",this.jobFinished.bind(this))}}}}));define("client/project/pages/validation-ui",["require","exports","client/project/components/classification-summary","client/project/components/job-runner","shared/WebSocketTypes","client/notify","client/project/components/confusion-matrix","client/project/components/feature-explorer","client/project/components/confidence-thresholds-modal"],(function(require,exports,classification_summary_2,job_runner_8,WebSocketTypes_12,notify_24,confusion_matrix_3,feature_explorer_4,confidence_thresholds_modal_2){Object.defineProperty(exports,"__esModule",{value:!0});exports.ValidationUi=void 0;exports.ValidationUi=class{constructor(studioApi){this._classifySelectedBtn=document.querySelector("#classify-all");this._table=document.querySelector(".validation-table");this._accuracySection=document.querySelector("#accuracy-section");this._accuracyEl=document.querySelector("#metadata-accuracy");this._mseSection=document.querySelector("#mse-section");this._mseEl=document.querySelector("#metadata-mse");this._classifyAllCacheEl=document.querySelector("#classify-all-cache");this._validationOutputColumn=document.querySelector(".job-runner-output");this._validationOutputSection=document.querySelector("#validation-output-section");this._validationOutputExpand=document.querySelector("#validation-output-expand");this._validationOutputCollapse=document.querySelector("#validation-output-collapse");this._isCanceled=!1;this._featureExplorer={int8:void 0,float32:void 0};this._studioApi=studioApi;this._jobRunner=new job_runner_8.JobRunner(this._studioApi,this._validationOutputSection);for(let s of Array.from(this._table.querySelectorAll("tbody tr")))this.bindDropdown(s);this._classifySelectedBtn&&(this._classifySelectedBtn.onclick=ev=>{ev.preventDefault();this.classifySelected()});this._validationOutputCollapse.onclick=ev=>{ev.preventDefault();this._validationOutputColumn.style.display="none";this._validationOutputCollapse.style.display="none";this._validationOutputExpand.style.display="block"};this._validationOutputExpand.onclick=ev=>{ev.preventDefault();this._validationOutputColumn.style.display="block";this._validationOutputCollapse.style.display="block";this._validationOutputExpand.style.display="none"};if(this._classifyAllCacheEl&&this._classifyAllCacheEl.value)try{let results=JSON.parse(decodeURIComponent(this._classifyAllCacheEl.value));this.renderClassifyAll(results,!1)}catch(ex){console.warn("Failed to render classifyAllCache",ex)}this._classifySelectedBtn&&(this._classifySelectedBtn.disabled=!1);this._studioApi.socket.addEventListener("connect",this.checkForRunningProcess.bind(this));document.querySelector("#auto-classify")&&this.classifySelected();new confidence_thresholds_modal_2.ConfidenceThresholdsModal(this._studioApi).checkConfidencesUpdated()}async classifySelected(){let cancelBtn=document.querySelector(".job-runner-cancel");cancelBtn.style.display="inline-block";cancelBtn.disabled=!1;cancelBtn.textContent="Cancel";this._isCanceled=!1;cancelBtn.onclick=ev=>{ev.preventDefault();this._studioApi.analytics.event("click",{event_category:"validation",event_label:"cancel"});this._isCanceled=!0;cancelBtn.disabled=!0;cancelBtn.textContent="Canceling...";this._jobRunner.cancelCurrentJob()};let origText=this._classifySelectedBtn.innerHTML;this._classifySelectedBtn.disabled=!0;this._classifySelectedBtn.innerHTML='<i class="fas fa-clipboard-check mr-1 mt--1"></i> Classifying...';this._studioApi.analytics.event("click",{event_category:"validation",event_label:"classify"});let jobId=await this.startClassifyAllJob();this._jobRunner.on("finished",async(finishedJobId,success)=>{var _a,_b;if(finishedJobId===jobId){cancelBtn.style.display="none";if(success){null===(_a=this._featureExplorer.float32)||void 0===_a||_a.invalidateCache();null===(_b=this._featureExplorer.int8)||void 0===_b||_b.invalidateCache();try{await this.getClassifyAllCache()}catch(ex2){let ex=ex2;notify_24.Notify.alert("Failed to load classify job result",notify_24.Notify.extractMsg(ex),"danger")}finally{this._classifySelectedBtn.disabled=!1;this._classifySelectedBtn.innerHTML=origText}}else{this._classifySelectedBtn.disabled=!1;this._classifySelectedBtn.innerHTML=origText}}})}async getClassifyAllCache(){let allResultReq=await this._studioApi.classify.getClassifyJobResult(this._studioApi.projectId);if(!allResultReq.body||!allResultReq.body.success)throw new Error(allResultReq.body&&allResultReq.body.error||allResultReq.response.statusText);let results=allResultReq.body.result;this.renderClassifyAll(results,!0)}async renderClassifyAll(results,showErrors){document.querySelector(".validation-results").style.display="";let confusionMatrixValues={},totalSummary={good:0,bad:0},summaryPerClass={},meanSquareErrorSum=0,meanSquareErrorCount=0,allLabels=[];for(let row of Array.from(this._table.querySelectorAll("tbody tr"))){const expectedLabel=row.querySelector(".aq-category").textContent;expectedLabel&&-1===allLabels.indexOf(expectedLabel)&&allLabels.push(expectedLabel)}for(let row of Array.from(this._table.querySelectorAll("tbody tr"))){const id=Number(row.dataset.id),result=row.querySelector(".aq-result");result.classList.remove("text-warning");const r=results.find(v=>v.sampleId===id);if(!r){if(showErrors){result.textContent=result.title="ERR: Sample not found in classify result";result.classList.add("text-warning")}continue}const expectedLabel=row.querySelector(".aq-category").textContent;if(expectedLabel){const summary=classification_summary_2.ClassificationSummary.CreateSummary(r.classifications,expectedLabel,"validation",this.getUncertainLabel(allLabels));expectedLabel in confusionMatrixValues||(confusionMatrixValues[expectedLabel]={});for(const className of[...summary.classes,this.getUncertainLabel(allLabels)]){className in confusionMatrixValues[expectedLabel]||(confusionMatrixValues[expectedLabel][className]=0);Object.keys(summary.summary).indexOf(className)>-1&&(confusionMatrixValues[expectedLabel][className]+=summary.summary[className])}let{good:good,bad:bad}=this.renderClassifyResult(row,r.classifications,this.getUncertainLabel(allLabels));totalSummary.good+=good;totalSummary.bad+=bad;if(summaryPerClass[expectedLabel]){summaryPerClass[expectedLabel].good+=good;summaryPerClass[expectedLabel].bad+=bad}else summaryPerClass[expectedLabel]={good:good,bad:bad}}for(let c of r.classifications.filter(x=>"keras-regression"===x.learnBlock.type))for(let r2 of c.result){let err=Math.abs(Number(expectedLabel)-Number(r2.value));meanSquareErrorSum+=err*err;meanSquareErrorCount++}if(this._isCanceled)break}console.log("summary",totalSummary);console.log("summaryPerClass",summaryPerClass);if(totalSummary.good||totalSummary.bad){this._accuracySection.style.display="";this._accuracyEl.textContent=(totalSummary.good/(totalSummary.good+totalSummary.bad)*100).toFixed(2)+"%"}else this._accuracySection.style.display="none";if(meanSquareErrorCount>0){this._mseSection.style.display="";this._mseEl.textContent=(meanSquareErrorSum/meanSquareErrorCount).toFixed(2)}else this._mseSection.style.display="none";let classNames=Object.keys(confusionMatrixValues);if(0===classNames.length)return;let predictedClassNames=Object.keys(confusionMatrixValues[classNames[0]]);classNames=predictedClassNames;let uncertainLabel=this.getUncertainLabel(allLabels);if(classNames.indexOf(uncertainLabel)>-1){classNames.splice(classNames.indexOf(uncertainLabel),1);classNames.push(uncertainLabel)}if(predictedClassNames.indexOf(uncertainLabel)>-1){predictedClassNames.splice(predictedClassNames.indexOf(uncertainLabel),1);predictedClassNames.push(uncertainLabel)}const confusionArray=[];for(const className of classNames){if(className===this.getUncertainLabel(allLabels))continue;let confusionRow=[];for(const className2 of predictedClassNames)className in confusionMatrixValues&&className2 in confusionMatrixValues[className]?confusionRow.push(confusionMatrixValues[className][className2]):confusionRow.push(0);confusionArray.push(confusionRow)}let reports={};for(let i=0;i<confusionArray.length;i++){const row=confusionArray[i],truePositives=row[i];let falsePositives=0;for(let j=0;j<confusionArray.length;j++)i!==j&&(falsePositives+=confusionArray[j][i]);let precision=truePositives/(truePositives+falsePositives),recall=truePositives/(truePositives+(row.reduce((a,b)=>a+b,0)-truePositives));isNaN(precision)&&(precision=0);isNaN(recall)&&(recall=0);reports[i.toString()]={precision:precision.toString(),recall:recall.toString(),"f1-score":precision+recall===0?"0":(2*precision*recall/(precision+recall)).toString()}}let confusion=document.querySelector(".confusion-matrix");confusion_matrix_3.ConfusionMatrix.showMatrix(confusion,classNames,predictedClassNames,confusionArray,reports);const impulseEl=document.querySelector("#impulse");this._impulse=JSON.parse(decodeURIComponent(impulseEl.value));const primaryDspBlocks=this._impulse.dspBlocks.filter(b=>b.primaryVersion);if(1===primaryDspBlocks.length){let container=document.querySelector(".validation-results");const config=await this._studioApi.dsp.getDspMetadata(this._studioApi.projectId,primaryDspBlocks[0].id);if(config.body.error)console.error("Unable to load DSP config",config.body.error);else{let predictions={data:[],type:results.some(x=>x.classifications.some(y=>"keras-regression"===y.learnBlock.type))?"regression":"classification"};for(let sample of results){let sampleIx=0,anomalyPredictions=sample.classifications.filter(block=>"anomaly"===block.learnBlock.type),regressionPrediction=sample.classifications.find(block=>"keras-regression"===block.learnBlock.type),kerasPrediction=sample.classifications.find(b=>b.learnBlock.type.startsWith("keras"))||{result:[],minimumConfidenceRating:0};if(regressionPrediction){let labelEl=this._table.querySelector('tr[data-id="'+sample.sampleId+'"] .aq-category');if(!labelEl)continue;let label=Number(labelEl.textContent);for(let r of regressionPrediction.result){predictions.data.push({sampleId:sample.sampleId,startMs:sampleIx*config.body.windowIncreaseMs,endMs:sampleIx*config.body.windowIncreaseMs+config.body.windowSizeMs,prediction:(Math.round(100*r.value)/100).toString(),predictionCorrect:Math.abs(r.value-label)<=regressionPrediction.maximumRegressionError});sampleIx++}}else for(let classification of kerasPrediction.result){let predictedClass="",max=0;for(let prediction of anomalyPredictions)prediction.result[sampleIx].anomaly>prediction.minimumConfidenceRating&&(predictedClass="anomaly");if("anomaly"!==predictedClass){for(let className of Object.keys(classification))if(classification[className]>max){max=classification[className];predictedClass=className}max<kerasPrediction.minimumConfidenceRating&&(predictedClass=this.getUncertainLabel(allLabels))}predictions.data.push({sampleId:sample.sampleId,startMs:sampleIx*config.body.windowIncreaseMs,endMs:sampleIx*config.body.windowIncreaseMs+config.body.windowSizeMs,prediction:predictedClass,predictionCorrect:void 0});sampleIx++}}await this.renderFeatureExplorer(container,this._impulse,predictions,classNames)}}else document.querySelector(".feature-explorer-section").style.display="none";if(results.length>0){let classification=results[0].classifications.find(c=>"keras-regression"===c.learnBlock.type),tooltip=document.querySelector("#regression-tooltip");classification&&tooltip&&(tooltip.dataset.originalTitle="The percentage of all samples with an error less than "+`${classification.maximumRegressionError} `+`(${Math.round(100*classification.minimumConfidenceRating)}% of min..max of your `+"training set, settable via 'Set confidence rating')")}this._classifySelectedBtn.disabled=!1;this._classifySelectedBtn.innerHTML='<i class="fas fa-clipboard-check mr-1 mt--1"></i> Classify all'}async renderFeatureExplorer(element,impulse,predictions,originalClasses){const featureExplorerSection=element.querySelector(".feature-explorer-section"),featureExplorerContent=element.querySelector(".feature-explorer-content");if(!featureExplorerContent||!featureExplorerSection)return;const primaryDspBlocks=impulse.dspBlocks.filter(b=>b.primaryVersion);if(1!==primaryDspBlocks.length||0===predictions.data.length){featureExplorerContent.textContent="The feature explorer is only supported when you have a single primary DSP block.";featureExplorerContent.style.height="";return}const dspBlock=primaryDspBlocks[0];let featureExplorer=this._featureExplorer.float32;if(featureExplorer){let updated=!1;if(this._featureExplorerAxes){featureExplorer.setFeatureAxes(this._featureExplorerAxes.x,this._featureExplorerAxes.y,this._featureExplorerAxes.z);updated=!0}if(this._featureExplorerCamera){featureExplorer.setCamera(this._featureExplorerCamera);updated=!0}featureExplorer.hideAcquisitionInfo();updated&&await featureExplorer.update()}else{featureExplorer=this._featureExplorer.float32=new feature_explorer_4.FeatureExplorer(this._studioApi,featureExplorerSection,dspBlock.id,dspBlock.type,impulse,"testing");featureExplorer.on("camera-changed",ev=>{this._featureExplorerCamera=ev});featureExplorer.on("feature-axes-changed",(x,y,z)=>{this._featureExplorerAxes={x:x,y:y,z:z}});featureExplorer.start();featureExplorer.setSamplePredictions(predictions,originalClasses);this._featureExplorerAxes&&featureExplorer.setFeatureAxes(this._featureExplorerAxes.x,this._featureExplorerAxes.y,this._featureExplorerAxes.z);this._featureExplorerCamera&&featureExplorer.setCamera(this._featureExplorerCamera);await featureExplorer.update()}}bindDropdown(r){for(let d of Array.from(r.querySelectorAll("a.dropdown-item")).map(a=>a))d.onclick=async ev=>{try{switch(d.dataset.action){case"rename":{ev.preventDefault();let v=await notify_24.Notify.prompt("Renaming "+(r.dataset.name||""),`Enter a new name for "${r.dataset.name}"`,"Rename",r.dataset.name||"","question","info");v&&r.dataset.name&&this.rename(Number(r.dataset.id),v);break}case"delete":ev.preventDefault();await notify_24.Notify.confirm("Deleting "+(r.dataset.name||""),`Are you sure you want to delete "${r.dataset.name}"?`,"Yes, delete","question","danger")&&r.dataset.name&&this.delete(Number(r.dataset.id),r.dataset.name||"");break;case"edit-label":{ev.preventDefault();let v=await notify_24.Notify.prompt("Edit label",`Enter a new label for "${r.dataset.name}"`,"Edit label",r.dataset.label||"","question","info");v&&r.dataset.label&&this.editLabel(Number(r.dataset.id),v);break}case"move-to-training-set":ev.preventDefault();await notify_24.Notify.confirm("Move to training dataset",`Are you sure you want to move "${r.dataset.name}" to the training dataset?`,"Yes, move","question","info")&&await this.moveToTrainingSet(Number(r.dataset.id),r.dataset.name||"");break}this._studioApi.analytics.event("click",{event_category:"validation",event_label:d.dataset.action})}catch(ex2){let ex=ex2;notify_24.Notify.alert("Failed to complete action",notify_24.Notify.extractMsg(ex),"danger")}}}async delete(id,name){try{const{response:response,body:body}=await this._studioApi.rawData.deleteSample(this._studioApi.projectId,id);if(!body.success)throw new Error(body.error||response.statusText);let el=this._table.querySelector('tbody tr[data-id="'+id+'"]');el&&el.parentNode&&el.parentNode.removeChild(el);notify_24.Notify.notify("",'Deleted "'+name+'"',"top","center","far fa-check-circle","success")}catch(ex2){let ex=ex2;console.error("Delete failed",ex);notify_24.Notify.alert("Failed to delete item",notify_24.Notify.extractMsg(ex),"danger")}}async rename(id,newName){let tr=this._table.querySelector('tbody tr[data-id="'+id+'"]');if(!tr)return console.error("Could not find item in table!");try{const{response:response,body:body}=await this._studioApi.rawData.renameSample(this._studioApi.projectId,id,{name:newName});if(!body.success)throw new Error(body.error||response.statusText);console.log("rename OK");let aqName=tr.querySelector(".aq-name");aqName&&(aqName.textContent=newName);tr.dataset.name=newName}catch(ex2){let ex=ex2;console.error("Rename failed",ex);notify_24.Notify.alert("Failed to rename item",notify_24.Notify.extractMsg(ex),"danger")}}async editLabel(id,newLabel){let tr=this._table.querySelector('tbody tr[data-id="'+id+'"]');if(!tr)return console.error("Could not find item in table!");try{const{response:response,body:body}=await this._studioApi.rawData.editLabel(this._studioApi.projectId,id,{label:newLabel});if(!body.success)throw new Error(body.error||response.statusText);console.log("label edit OK");let aqCategory=tr.querySelector(".aq-category");aqCategory&&(aqCategory.textContent=newLabel);tr.dataset.label=newLabel}catch(ex2){let ex=ex2;console.error("Editing label failed",ex);notify_24.Notify.alert("Failed to edit label",notify_24.Notify.extractMsg(ex),"danger")}}async moveToTrainingSet(id,name){if(!this._table.querySelector('tbody tr[data-id="'+id+'"]'))return console.error("Could not find item in table!");try{const{response:response,body:body}=await this._studioApi.rawData.moveSample(this._studioApi.projectId,id,{newCategory:"training"});if(!body.success)throw new Error(body.error||response.statusText);let el=this._table.querySelector('tbody tr[data-id="'+id+'"]');el&&el.parentNode&&el.parentNode.removeChild(el);notify_24.Notify.notify("",'Moved "'+name+'" to the training dataset',"top","center","far fa-check-circle","success")}catch(ex2){let ex=ex2;notify_24.Notify.alert("Failed to move to training set",notify_24.Notify.extractMsg(ex),"danger")}}disableUI(){this._classifySelectedBtn.disabled=!0;this._validationOutputColumn.style.display="block";this._validationOutputCollapse.style.display="block";this._validationOutputExpand.style.display="none";let cancelBtn=document.querySelector(".job-runner-cancel");cancelBtn.style.display="inline-block";cancelBtn.disabled=!1;cancelBtn.textContent="Cancel"}async startClassifyAllJob(){try{this._studioApi.analytics.event("job-start",{event_category:"validation"});this.disableUI();this._currJobId=await this._jobRunner.startJob(this._studioApi.jobs.startClassifyJob(this._studioApi.projectId));this._jobRunner.on("finished",this.jobFinished.bind(this));return this._currJobId}catch(ex2){let ex=ex2;this._jobRunner.startJobFailed(ex)}}async jobFinished(id,success){id===this._currJobId&&this._studioApi.analytics.event("job-finish-"+(success?"success":"fail"),{event_category:"validation"})}async checkForRunningProcess(){if(!this._studioApi.isAdmin)return;let job=await this._jobRunner.getActiveJob(WebSocketTypes_12.JOB_KEY_PREFIX.validation);if(job){this._currJobId=job.id;this.disableUI();await this._jobRunner.resumeJob(job.id);this._jobRunner.on("finished",this.jobFinished.bind(this))}}renderClassifyResult(row,classifications,uncertainLabel){let expectedLabel=row.querySelector(".aq-category").textContent||"",result=row.querySelector(".aq-result");row.classList.remove("table-success");row.classList.remove("table-warning");const{summary:summary,averageAnomalyScore:averageAnomalyScore,good:good,bad:bad,shouldHighlightRow:shouldHighlightRow,shouldHighlightText:shouldHighlightText,objectDetectionScore:objectDetectionScore}=classification_summary_2.ClassificationSummary.CreateSummary(classifications,expectedLabel,"validation",uncertainLabel);if(shouldHighlightRow){let ratio;ratio=void 0!==objectDetectionScore?objectDetectionScore:Math.floor(good/(good+bad)*100);ratio>=80?row.classList.add("table-success"):row.classList.add("table-warning");row.querySelector(".aq-accuracy").textContent=`${ratio}%`}let aqAnomaly=row.querySelector(".aq-anomaly");aqAnomaly&&(aqAnomaly.textContent=averageAnomalyScore.toFixed(2));result.innerHTML="";let results=Object.keys(summary).filter(c=>0!==summary[c]).sort((a,b)=>summary[b]-summary[a]);for(let rx=0;rx<results.length;rx++){let span=document.createElement("span");span.textContent=Number(summary[results[rx]].toFixed(2))+" "+results[rx];shouldHighlightText&&results[rx]!==expectedLabel&&row.classList.contains("table-success")&&span.classList.add("text-warning");result.appendChild(span);if(rx!==results.length-1){let comma=document.createElement("span");comma.textContent=", ";result.appendChild(comma)}}result.title=results.map(c=>summary[c]+" "+c).join(", ");return void 0!==objectDetectionScore?{good:objectDetectionScore>=80?1:0,bad:objectDetectionScore>=80?0:1}:{good:shouldHighlightRow?good:0,bad:shouldHighlightRow?bad:0}}getUncertainLabel(classNames){return-1===classNames.indexOf("uncertain")?"uncertain":"ei_uncertain"}}}));define("client/project/components/getting-started-modal",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.ProjectTypeModal=void 0;exports.ProjectTypeModal=class{constructor(studioApi){this._els={modal:document.querySelector("#project-type-wizard-modal"),dismiss:document.querySelector("#project-type-wizard-dismiss"),step1:document.querySelector("#project-type-wizard-modal-step1"),done:document.querySelector("#project-type-wizard-done")};this._studioApi=studioApi}init(){if(this._els.modal&&this._els.dismiss){this._els.dismiss.addEventListener("click",async ev=>{if(this._els.modal){$(this._els.modal).modal("hide");ev.preventDefault();try{let res=await this._studioApi.projects.updateProject(this._studioApi.projectId,{showProjectTypeWizard:!1});if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText}catch(ex){console.warn("Failed to store getting started preferences",ex)}}});this._els.done.addEventListener("click",async ev=>{if(this._els.modal){$(this._els.modal).modal("hide");ev.preventDefault();try{let res=await this._studioApi.projects.updateProject(this._studioApi.projectId,{showProjectTypeWizard:!1});if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText}catch(ex){console.warn("Failed to store getting started preferences",ex)}}});$(this._els.modal).modal();$(this._els.modal).on("hidden.bs.modal",()=>{for(let x of Array.from(document.querySelectorAll(".project-type-wizard-sensor-step")))x.style.display="none";this._els.done.style.visibility="hidden";this._els.step1.style.display=""});for(let tr of Array.from(this._els.modal.querySelectorAll("tbody tr")))tr.onclick=async ev=>{ev.preventDefault();let sensor=tr.dataset.sensor,nextEl=document.querySelector("#project-type-wizard-modal-step-"+sensor);if(nextEl){this._els.step1.style.display="none";for(let x of Array.from(document.querySelectorAll(".project-type-wizard-sensor-step")))x.style.display="none";nextEl.style.display="";nextEl.querySelector("table")||(this._els.done.style.visibility="visible")}try{let inp=document.querySelector("#labeling-method");if("image-classification"===sensor){let res=await this._studioApi.projects.updateProject(this._studioApi.projectId,{labelingMethod:"single_label"});if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText;inp&&(inp.value="single_label")}else if("object-detection"===sensor){let res=await this._studioApi.projects.updateProject(this._studioApi.projectId,{labelingMethod:"object_detection"});if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText;inp&&(inp.value="object_detection")}}catch(ex){console.warn("Failed to store getting started preferences",ex)}{let res=await this._studioApi.projects.updateProject(this._studioApi.projectId,{showProjectTypeWizard:!1});if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText}}}}}}));define("client/readme-ui",["require","exports","client/notify","client/studio-api"],(function(require,exports,notify_25,studio_api_3){Object.defineProperty(exports,"__esModule",{value:!0});exports.ReadmeUI=void 0;exports.ReadmeUI=class{constructor(studioApi){this._readmeUi={addBtn:document.querySelector("#readme-add-btn"),editBtn:document.querySelector("#readme-edit-btn"),cancelBtn:document.querySelector("#readme-cancel-btn"),saveBtn:document.querySelector("#readme-save-btn"),bodyContainer:document.querySelector("#readme-body-container"),editContainer:document.querySelector("#readme-edit-container"),editorEl:document.querySelector("#readme-editor-edit"),uploadImgBtn:document.querySelector("#readme-upload-image"),editor:void 0};this._studioApi=studioApi}bindReadmeUi(){if(!(this._readmeUi.addBtn&&this._readmeUi.editBtn&&this._readmeUi.bodyContainer&&this._readmeUi.editContainer&&this._readmeUi.editorEl&&this._readmeUi.cancelBtn&&this._readmeUi.saveBtn&&this._readmeUi.uploadImgBtn))return;let lastSavedData=this._readmeUi.editorEl.textContent||"";const loadAce=()=>{if(this._readmeUi.editorEl&&this._readmeUi.bodyContainer&&this._readmeUi.editContainer&&this._readmeUi.editBtn&&this._readmeUi.addBtn){if(!this._readmeUi.editor){this._readmeUi.editor=ace.edit(this._readmeUi.editorEl);ace.config.setModuleUrl("ace/mode/markdown",this._studioApi.staticAssetsPrefix+"/ace/mode-markdown.js");this._readmeUi.editor.session.setMode("ace/mode/markdown");this._readmeUi.editor.setOption("wrap","free")}this._readmeUi.bodyContainer.style.display="none";this._readmeUi.editContainer.style.display="";this._readmeUi.editBtn.style.display="none";this._readmeUi.addBtn.style.display="none";this._readmeUi.editor.setValue(lastSavedData);if(""!==lastSavedData){let row=this._readmeUi.editor.session.getLength()-1,column=this._readmeUi.editor.session.getLine(row).length;this._readmeUi.editor.gotoLine(row+1,column,!1)}setTimeout(()=>{this._readmeUi.editor&&this._readmeUi.editor.focus()})}},handleUiAfterClosing=()=>{if(!(this._readmeUi.addBtn&&this._readmeUi.editBtn&&this._readmeUi.bodyContainer&&this._readmeUi.editContainer&&this._readmeUi.editorEl&&this._readmeUi.cancelBtn&&this._readmeUi.saveBtn&&this._readmeUi.editor))return console.log("handleUiAfterClosing canceled out",this._readmeUi);if(""!==lastSavedData){this._readmeUi.bodyContainer.style.display="";this._readmeUi.editContainer.style.display="none";this._readmeUi.addBtn.style.display="none";this._readmeUi.editBtn.style.display=""}else{this._readmeUi.bodyContainer.style.display="none";this._readmeUi.editContainer.style.display="none";this._readmeUi.addBtn.style.display="";this._readmeUi.editBtn.style.display="none"}};this._readmeUi.editBtn.onclick=ev=>{ev.preventDefault();loadAce()};this._readmeUi.addBtn.onclick=ev=>{ev.preventDefault();loadAce()};this._readmeUi.cancelBtn.onclick=ev=>{if(this._readmeUi.editor&&this._readmeUi.bodyContainer&&this._readmeUi.editContainer){ev.preventDefault();handleUiAfterClosing()}};this._readmeUi.saveBtn.onclick=async ev=>{if(!(this._readmeUi.editor&&this._readmeUi.bodyContainer&&this._readmeUi.editContainer&&this._readmeUi.saveBtn))return;ev.preventDefault();let saveText=this._readmeUi.saveBtn.textContent;try{this._readmeUi.saveBtn.textContent="Saving description...";this._readmeUi.saveBtn.classList.add("disabled");if(this._studioApi instanceof studio_api_3.StudioProjectApi){{let d=await this._studioApi.projects.updateProject(this._studioApi.projectId,{readme:""===this._readmeUi.editor.getValue().trim()?"":this._readmeUi.editor.getValue()});if(!d.body||!d.body.success)throw d.body&&d.body.error||d.response.responseText}{let d=await this._studioApi.projects.getProjectInfo(this._studioApi.projectId);if(!d.body||!d.body.success)throw d.body&&d.body.error||d.response.responseText;d.body.readme&&(this._readmeUi.bodyContainer.innerHTML=d.body.readme.html)}}else{if(!(this._studioApi instanceof studio_api_3.StudioOrganizationApi))throw new Error("Invalid studioApi instance");{let d=await this._studioApi.organizations.updateOrganization(this._studioApi.organizationId,{readme:""===this._readmeUi.editor.getValue().trim()?"":this._readmeUi.editor.getValue()});if(!d.body||!d.body.success)throw d.body&&d.body.error||d.response.responseText}{let d=await this._studioApi.organizations.getOrganizationInfo(this._studioApi.organizationId);if(!d.body||!d.body.success)throw d.body&&d.body.error||d.response.responseText;d.body.readme&&(this._readmeUi.bodyContainer.innerHTML=d.body.readme.html)}}notify_25.Notify.notify("","Updated description","top","center","far fa-check-circle","success");lastSavedData=""===this._readmeUi.editor.getValue().trim()?"":this._readmeUi.editor.getValue();handleUiAfterClosing()}catch(ex2){let ex=ex2;notify_25.Notify.alert("Failed to save description",notify_25.Notify.extractMsg(ex),"danger")}finally{this._readmeUi.saveBtn.textContent=saveText;this._readmeUi.saveBtn.classList.remove("disabled")}};this._readmeUi.uploadImgBtn.onclick=ev=>{ev.preventDefault();let input=document.createElement("input");input.type="file";input.accept="image/png,image/jpeg";input.onchange=async e=>{if(!input.files||!this._readmeUi.editor)return;this._readmeUi.editor.session.insert(this._readmeUi.editor.getCursorPosition(),"![Uploading...]()");let file=input.files[0];try{let d;d=this._studioApi instanceof studio_api_3.StudioProjectApi?await this._studioApi.projects.uploadReadmeImage(this._studioApi.projectId,file):await this._studioApi.organizations.uploadOrganizationReadmeImage(this._studioApi.organizationId,file);if(!d.body||!d.body.success)throw d.body&&d.body.error||d.response.responseText;let range=this._readmeUi.editor.find("![Uploading...]()",{wrap:!0,caseSensitive:!0,preventScroll:!0});range&&this._readmeUi.editor.session.replace(range,`![${file.name}](${d.body.url})`)}catch(ex2){let ex=ex2,range=this._readmeUi.editor.find("![Uploading...]()",{wrap:!0,caseSensitive:!0,preventScroll:!0});range&&this._readmeUi.editor.session.replace(range,"");await notify_25.Notify.alert("Failed to upload image",notify_25.Notify.extractMsg(ex),"danger")}finally{this._readmeUi.editor.focus()}};input.click()}}}}));define("client/project/pages/dashboard-ui",["require","exports","client/notify","client/project/components/getting-started-modal","client/readme-ui"],(function(require,exports,notify_26,getting_started_modal_1,readme_ui_1){Object.defineProperty(exports,"__esModule",{value:!0});exports.DashboardUi=void 0;exports.DashboardUi=class{constructor(studioApi){this._createFirstImpulse={collapse:document.querySelector("#create-first-impulse-collapse"),expand:document.querySelector("#create-first-impulse-expand"),body:document.querySelector("#create-first-impulse-body")};this._latencyUi={text:document.querySelector("#latency-device"),spinner:document.querySelector("#latency-device-spinner")};this._labelingUi={text:document.querySelector("#labeling-method"),spinner:document.querySelector("#labeling-method-spinner")};this._performanceUi={btn:document.querySelector("#save-performance"),gpu:document.querySelector("#performance-gpu"),parallelDspJobs:document.querySelector("#performance-parallel-dsp-jobs"),jobLimitM:document.querySelector("#performance-job-limit-m"),dspFileSizeMb:document.querySelector("#performance-dsp-file-size-mb")};this._studioApi=studioApi;new getting_started_modal_1.ProjectTypeModal(studioApi).init();let projectNameEl=document.querySelector("#dashboard-project-name");projectNameEl&&(projectNameEl.onclick=async ev=>{ev.preventDefault();if(!projectNameEl)return;let oldName=(projectNameEl.textContent||"").trim(),i=projectNameEl.querySelector("i");if(!i.classList.contains("fa-spinner")){this._studioApi.analytics.event("click",{event_category:"dashboard",event_label:"change-project-name"});try{let v=await notify_26.Notify.prompt("New project name",`Enter new name for project "${oldName}"`,"Change project name",oldName,"question","info");if(v){i.classList.remove("fa-edit");i.classList.add("fa-spinner");let d=await this._studioApi.projects.updateProject(this._studioApi.projectId,{name:v});if(!d.body||d.body.error||!d.body.success)throw new Error(d.body&&d.body.error||d.response.responseText);projectNameEl.textContent=v;projectNameEl.appendChild(i)}}catch(ex2){let ex=ex2;notify_26.Notify.alert("Failed to update project name",notify_26.Notify.extractMsg(ex),"danger")}finally{i.classList.add("fa-edit");i.classList.remove("fa-spinner")}}});let projectDescription=document.querySelector("#project-description");projectDescription&&(projectDescription.onclick=async ev=>{ev.preventDefault();if(!projectDescription)return;let oldDescription=(projectDescription.textContent||"").trim(),i=projectDescription.querySelector("i");if(!i.classList.contains("fa-spinner")){this._studioApi.analytics.event("click",{event_category:"dashboard",event_label:"change-project-description"});try{let v=await notify_26.Notify.prompt("Edit description","Enter a new description for this project","Change project description",oldDescription,"question","info");if("string"==typeof v){i.classList.remove("fa-edit");i.classList.add("fa-spinner");let d=await this._studioApi.projects.updateProject(this._studioApi.projectId,{description:v});if(!d.body||d.body.error||!d.body.success)throw new Error(d.body&&d.body.error||d.response.responseText);projectDescription.textContent=v;projectDescription.appendChild(i)}}catch(ex2){let ex=ex2;notify_26.Notify.alert("Failed to update project description",notify_26.Notify.extractMsg(ex),"danger")}finally{i.classList.add("fa-edit");i.classList.remove("fa-spinner")}}});let addCollaborator=document.querySelector("#add-collaborator");addCollaborator&&(addCollaborator.onclick=async ev=>{if(addCollaborator)if("modal"!==addCollaborator.dataset.toggle){ev.preventDefault();this._studioApi.analytics.event("click",{event_category:"collaborators",event_label:"add"});try{let v=await notify_26.Notify.prompt("Add collaborator","Enter the username or e-mail address of the user you want to add to this project","Add collaborator","","question","info");if(!v)return;let d=await this._studioApi.projects.addCollaborator(this._studioApi.projectId,{usernameOrEmail:v});if(!d.body||!d.body.success)throw new Error(d.body&&d.body.error||d.response.responseText);await notify_26.Notify.alert("Added collaborator",`"${v}" was added as a collaborator to this project`,"success");location.reload()}catch(ex2){let ex=ex2;await notify_26.Notify.alert("Failed to add collaborator",notify_26.Notify.extractMsg(ex)+" - note that collaborators should already have an Edge Impulse account","danger")}}else this._studioApi.analytics.event("click",{event_category:"collaborators",event_label:"add"})});let collabTable=document.querySelector("#collaborators-table");for(let d of Array.from((null==collabTable?void 0:collabTable.querySelectorAll("a.dropdown-item"))||[]).map(a=>a))d.onclick=async ev=>{ev.preventDefault();if(!projectNameEl)return;let user=d.dataset.username||"",project=(projectNameEl.textContent||"").trim();switch(d.dataset.action){case"delete":try{if(!await notify_26.Notify.confirm("Removing collaborator",`Are you sure you want to remove "${user}" as a collaborator?`,"Yes, delete","question","danger"))return;let r=await this._studioApi.projects.removeCollaborator(this._studioApi.projectId,{usernameOrEmail:user});if(!r.body||!r.body.success)throw new Error(r.body&&r.body.error||r.response.responseText);await notify_26.Notify.alert("Removed collaborator",`"${user}" was removed as a collaborator on this project`,"success");location.reload()}catch(ex2){let ex=ex2;notify_26.Notify.alert("Failed to remove collaborator",notify_26.Notify.extractMsg(ex),"danger")}break;case"make-owner":try{if(!await notify_26.Notify.confirm("Transfer ownership",`Are you sure you want to transfer ownership of "${project}" to "${user}"?`,"Yes, transfer","question","info"))return;let r=await this._studioApi.projects.transferOwnership(this._studioApi.projectId,{usernameOrEmail:user});if(!r.body||!r.body.success)throw new Error(r.body&&r.body.error||r.response.responseText);await notify_26.Notify.alert("Transfered ownership",`Ownership of "${project}" was transferred to "${user}"`,"success");location.reload()}catch(ex2){let ex=ex2;notify_26.Notify.alert("Failed to transfer ownership",notify_26.Notify.extractMsg(ex),"danger")}}this._studioApi.analytics.event("click",{event_category:"collaborators",event_label:d.dataset.action})};let deleteProjectButton=document.querySelector("#delete-project");deleteProjectButton&&(deleteProjectButton.onclick=async ev=>{if(!deleteProjectButton||!projectNameEl)return;let origText=deleteProjectButton.textContent;try{ev.preventDefault();deleteProjectButton.disabled=!0;deleteProjectButton.classList.add("disabled");deleteProjectButton.textContent="Deleting project...";this._studioApi.analytics.event("click",{event_category:"dashboard",event_label:"delete-project"});let name=(projectNameEl.textContent||"").trim();if(!await notify_26.Notify.confirm("Are you sure you want to delete this project?","This is irrevocable, and will remove all devices, data and impulses.","Yes, delete","question","danger"))return;let v=await notify_26.Notify.prompt("Confirm",'Enter the name of this project ("'+name+'") to continue',"Delete this project","","question","danger");if(!v)return;if(v!==name)throw new Error("Name does not match the name of this project, aborting.");let d=await this._studioApi.projects.deleteProject(this._studioApi.projectId);if(!d.body||!d.body.success)throw d.body&&d.body.error||d.response.responseText;location.href="/studio/select-project?deleted="+encodeURIComponent(v||"")}catch(ex2){let ex=ex2;notify_26.Notify.alert("Failed to delete project",notify_26.Notify.extractMsg(ex),"danger")}finally{deleteProjectButton.disabled=!1;deleteProjectButton.classList.remove("disabled");deleteProjectButton.textContent=origText}});let deleteAllDataButton=document.querySelector("#delete-data");deleteAllDataButton&&(deleteAllDataButton.onclick=async ev=>{if(!deleteAllDataButton)return;let origText=deleteAllDataButton.textContent;try{ev.preventDefault();deleteAllDataButton.disabled=!0;deleteAllDataButton.classList.add("disabled");deleteAllDataButton.textContent="Deleting all data...";this._studioApi.analytics.event("click",{event_category:"dashboard",event_label:"delete-data"});if(!await notify_26.Notify.confirm("Deleting data","Are you sure you want to delete all data from this project? This is irrevocable!","Yes, delete all data","question","danger"))return;let v=await notify_26.Notify.prompt("Confirm",'Enter "delete all data" to continue',"Delete all data","","question","danger");if(!v)return;if("delete all data"!==v)throw new Error('Input does not match "delete all data", aborting.');let d=await this._studioApi.rawData.deleteAllSamples(this._studioApi.projectId);if(!d.body||!d.body.success)throw d.body&&d.body.error||d.response.responseText;await notify_26.Notify.alert("Deleted","All data was deleted!","success");location.reload()}catch(ex2){let ex=ex2;await notify_26.Notify.alert("Failed to delete data",notify_26.Notify.extractMsg(ex),"danger")}finally{deleteAllDataButton.disabled=!1;deleteAllDataButton.classList.remove("disabled");deleteAllDataButton.textContent=origText}});let rebalanceButton=document.querySelector("#rebalance-project");rebalanceButton&&(rebalanceButton.onclick=async ev=>{if(!rebalanceButton)return;let origText=rebalanceButton.textContent;try{ev.preventDefault();$("#sample-imbalance-modal").modal("hide");rebalanceButton.disabled=!0;rebalanceButton.classList.add("disabled");rebalanceButton.textContent="Performing split...";this._studioApi.analytics.event("click",{event_category:"dashboard",event_label:"rebalance-project"});if(!await notify_26.Notify.confirm("Perform train / test split","Are you sure you want to rebalance your dataset? This splits all your data automatically between the training and testing set, and resets the categories for all data. This is irrevocable!","Yes, perform the train / test split","question","danger"))return;let v=await notify_26.Notify.prompt("Confirm",'Enter "perform split" to continue',"Perform train / test split","","question","danger");if(!v)return;if("perform split"!==v)throw new Error('Input does not match "perform split", aborting.');let d=await this._studioApi.rawData.rebalanceDataset(this._studioApi.projectId);if(!d.body||!d.body.success)throw d.body&&d.body.error||d.response.responseText;await notify_26.Notify.alert("Performed train / test split","Dataset was rebalanced!","success");location.reload()}catch(ex2){let ex=ex2;await notify_26.Notify.alert("Failed to perform train / test split",notify_26.Notify.extractMsg(ex),"danger")}finally{rebalanceButton.disabled=!1;rebalanceButton.classList.remove("disabled");rebalanceButton.textContent=origText}});let launchGettingStarted=document.querySelector("#launch-getting-started");launchGettingStarted&&(launchGettingStarted.onclick=async ev=>{if(!launchGettingStarted)return;let origText=launchGettingStarted.textContent;try{ev.preventDefault();launchGettingStarted.disabled=!0;launchGettingStarted.classList.add("disabled");launchGettingStarted.textContent="Launching getting started wizard...";this._studioApi.analytics.event("click",{event_category:"dashboard",event_label:"launch-getting-started"});if(!await notify_26.Notify.confirm("Launch getting started wizard? ","Are you sure you want to launch the getting started wizard?This will remove all data, and clear out your impulse. This is irrevocable!","Yes, clear out my project","question","danger"))return;let v=await notify_26.Notify.prompt("Confirm",'Enter "launch wizard" to continue',"Launch getting started wizard","","question","danger");if(!v)return;if("launch wizard"!==v)throw new Error('Input does not match "launch wizard", aborting.');let d=await this._studioApi.projects.launchGettingStartedWizard(this._studioApi.projectId);if(!d.body||!d.body.success)throw d.body&&d.body.error||d.response.responseText;location.reload()}catch(ex2){let ex=ex2;await notify_26.Notify.alert("Failed to launch getting started wizard",notify_26.Notify.extractMsg(ex),"danger")}finally{launchGettingStarted.disabled=!1;launchGettingStarted.classList.remove("disabled");launchGettingStarted.textContent=origText}});let downloadButtons=Array.from(document.querySelectorAll("#downloads-table tbody tr"));for(let row of downloadButtons){let title=row.dataset.name;row.querySelector("a").addEventListener("click",ev=>{this._studioApi.analytics.event("click",{event_category:"download",event_label:title})})}let saveExperimentsBtn=document.querySelector("#save-experiments");saveExperimentsBtn&&(saveExperimentsBtn.onclick=async ev=>{if(!saveExperimentsBtn)return;ev.preventDefault();let origText=saveExperimentsBtn.textContent;try{saveExperimentsBtn.classList.add("disabled");saveExperimentsBtn.textContent="Saving experiments...";let experiments=[],allExperiments=Array.from(document.querySelectorAll(".experiment-checkbox"));for(let x of allExperiments){let type=x.dataset.type;x.checked&&type&&experiments.push(type)}let req={experiments:experiments},d=await this._studioApi.projects.updateProject(this._studioApi.projectId,req);if(!d.body||!d.body.success)throw d.body&&d.body.error||d.response.responseText;await notify_26.Notify.alert("Saved project options","","success");location.reload()}catch(ex2){let ex=ex2;await notify_26.Notify.alert("Failed to save project options",notify_26.Notify.extractMsg(ex),"danger")}finally{saveExperimentsBtn.classList.remove("disabled");saveExperimentsBtn.textContent=origText}});this._performanceUi.btn&&(this._performanceUi.btn.onclick=async ev=>{if(!this._performanceUi.btn)return;ev.preventDefault();let origText=this._performanceUi.btn.textContent;try{this._performanceUi.btn.classList.add("disabled");this._performanceUi.btn.textContent="Saving performance...";if(!this._performanceUi.jobLimitM)throw new Error("Missing jobLimitM UI element");if(!this._performanceUi.dspFileSizeMb)throw new Error("Missing dspFileSizeMb UI element");if(!this._performanceUi.parallelDspJobs)throw new Error("Missing parallelDspJobs UI element");if(!this._performanceUi.gpu)throw new Error("Missing gpu UI element");let req={computeTimeLimitM:Number(this._performanceUi.jobLimitM.value),dspFileSizeMb:Number(this._performanceUi.dspFileSizeMb.value),parallelDspJobs:Number(this._performanceUi.parallelDspJobs.value),useGpu:this._performanceUi.gpu.checked},d=await this._studioApi.projects.updateProject(this._studioApi.projectId,req);if(!d.body||!d.body.success)throw d.body&&d.body.error||d.response.responseText;await notify_26.Notify.alert("Saved performance settings","","success");location.reload()}catch(ex2){let ex=ex2;await notify_26.Notify.alert("Failed to save performance settings",notify_26.Notify.extractMsg(ex),"danger")}finally{this._performanceUi.btn.classList.remove("disabled");this._performanceUi.btn.textContent=origText}});for(let transferToOrg of Array.from(document.querySelectorAll(".transfer-to-org"))){if(!projectNameEl)continue;let organizationId=Number(transferToOrg.dataset.organizationId),organizationName=transferToOrg.dataset.name,projectName=(projectNameEl.textContent||"").trim();transferToOrg.onclick=async ev=>{let origText=transferToOrg.textContent;try{ev.preventDefault();transferToOrg.classList.add("disabled");transferToOrg.textContent="Transfering ownership...";this._studioApi.analytics.event("click",{event_category:"dashboard",event_label:"transfer-to-org"});if(!await notify_26.Notify.confirm("Transfer ownership",`Are you sure you want to transfer ownership of project "${projectName}" to organization "${organizationName}"?`,"Yes, transfer ownership","question","info"))return;let d=await this._studioApi.projects.transferOwnershipOrganization(this._studioApi.projectId,{organizationId:organizationId});if(!d.body||!d.body.success)throw d.body&&d.body.error||d.response.responseText;await notify_26.Notify.alert("Transfered ownership",`Project "${projectName}" was transfered to "${organizationName}!`,"success");$("#collab-requires-transfer").modal("hide");location.reload()}catch(ex2){let ex=ex2;await notify_26.Notify.alert("Failed to transfer ownership",notify_26.Notify.extractMsg(ex),"danger")}finally{transferToOrg.textContent=origText;transferToOrg.classList.remove("disabled")}}}this._latencyUi.text&&(this._latencyUi.text.oninput=async ev=>{ev.preventDefault();if(!this._latencyUi.text||!this._latencyUi.spinner)return;let now=Date.now();try{this._latencyUi.spinner.style.display="";let d=await this._studioApi.projects.updateProject(this._studioApi.projectId,{latencyDevice:this._latencyUi.text.value});if(!d.body||!d.body.success)throw d.body&&d.body.error||d.response.responseText}catch(ex2){console.log("failed to save latency",ex2);let ex=ex2;await notify_26.Notify.alert("Failed to save latency calculations",notify_26.Notify.extractMsg(ex),"danger")}finally{let timePassed=Date.now()-now;timePassed<500&&await new Promise(res=>setTimeout(res,500-timePassed));this._latencyUi.spinner.style.display="none"}});this._labelingUi.text&&(this._labelingUi.text.onchange=async ev=>{ev.preventDefault();if(!this._labelingUi.text||!this._labelingUi.spinner)return;let now=Date.now();try{this._labelingUi.spinner.style.display="";let text=this._labelingUi.text.value;if("single_label"!==text&&"object_detection"!==text)throw new Error("Invalid value "+text);let d=await this._studioApi.projects.updateProject(this._studioApi.projectId,{labelingMethod:text});if(!d.body||!d.body.success)throw d.body&&d.body.error||d.response.responseText;this._labelingUi.text.dataset.lastRequestState="success"}catch(ex2){console.log("failed to save labeling method",ex2);this._labelingUi.text.dataset.lastRequestState="error";let ex=ex2;await notify_26.Notify.alert("Failed to save labeling method",notify_26.Notify.extractMsg(ex),"danger")}finally{let timePassed=Date.now()-now;timePassed<500&&await new Promise(res=>setTimeout(res,500-timePassed));this._labelingUi.spinner.style.display="none"}});let o=document.querySelector("#tutorial-modal");const params=new URLSearchParams(window.location.search);1===Number(params.get("show-tutorial"))&&o&&$(o).modal();this._createFirstImpulse.collapse&&(this._createFirstImpulse.collapse.onclick=ev=>{ev.preventDefault();if(this._createFirstImpulse.body&&this._createFirstImpulse.collapse&&this._createFirstImpulse.expand){this._createFirstImpulse.body.style.display="none";this._createFirstImpulse.expand.style.display="";this._createFirstImpulse.collapse.style.display="none";this.storeShowCreateFirstImpulse(!1)}});this._createFirstImpulse.expand&&(this._createFirstImpulse.expand.onclick=ev=>{ev.preventDefault();if(this._createFirstImpulse.body&&this._createFirstImpulse.collapse&&this._createFirstImpulse.expand){this._createFirstImpulse.body.style.display="";this._createFirstImpulse.expand.style.display="none";this._createFirstImpulse.collapse.style.display="";this.storeShowCreateFirstImpulse(!0)}});this._readmeUi=new readme_ui_1.ReadmeUI(studioApi);this._readmeUi.bindReadmeUi()}async storeShowCreateFirstImpulse(enabled){let d=await this._studioApi.projects.updateProject(this._studioApi.projectId,{showCreateFirstImpulse:enabled});if(!d.body||d.body.error||!d.body.success)throw new Error(d.body&&d.body.error||d.response.responseText)}}}));define("client/forms/resend-activation-ui",["require","exports","client/api-definition/index","client/notify"],(function(require,exports,api_definition_5,notify_27){Object.defineProperty(exports,"__esModule",{value:!0});exports.ResendActivationUI=void 0;exports.ResendActivationUI=class{constructor(){this._userApi=new api_definition_5.UserApi(location.origin+"/v1");let activate=document.querySelector("#resend-activation");activate&&(activate.onclick=async ev=>{ev.preventDefault();let i=activate.querySelector("i");try{i&&(i.style.display="");let d=await this._userApi.requestActivationCodeCurrentUser();if(!d.body||!d.body.success)throw d.body&&d.body.error||d.response.responseText;await notify_27.Notify.alert("Sent a new activation code","Still no activation email? Contact support via hello@edgeimpulse.com","success")}catch(ex2){let ex=ex2;notify_27.Notify.alert("Failed to request new activation code",notify_27.Notify.extractMsg(ex),"danger")}finally{i&&(i.style.display="none")}})}init(){}}}));define("client/forms/profile-ui",["require","exports","client/api-definition/index","client/notify","client/forms/resend-activation-ui"],(function(require,exports,api_definition_6,notify_28,resend_activation_ui_1){Object.defineProperty(exports,"__esModule",{value:!0});exports.ProfileUi=void 0;exports.ProfileUi=class{constructor(){this._resendUi=new resend_activation_ui_1.ResendActivationUI;this._uploadAreas={cropPhoto:document.querySelector("#crop-photo-area"),uploadPhoto:document.querySelector("#upload-photo-area")};this._cropPhotoImgEl=document.querySelector("#crop-photo-area img");this._uploadPhotoButton=document.querySelector("#upload-photo-modal #upload-btn");this._uploadPrevious=document.querySelector("#upload-go-back");this._userApi=new api_definition_6.UserApi(location.origin+"/v1");this._resendUi.init();let openUploadModal=document.querySelector('a[data-target="#upload-photo-modal"]');openUploadModal.addEventListener("click",()=>{this.switchUploadView("upload")});document.querySelector("#upload-photo-area a").onclick=ev=>{ev.preventDefault();let input=document.createElement("input");input.type="file";input.accept="image/*";input.onchange=e=>{if(!input.files)return;let file=input.files[0],reader=new FileReader;reader.readAsDataURL(file);reader.onload=readerEvent=>{if(!readerEvent.target)return;let content=readerEvent.target.result;if("string"==typeof content){this._cropPhotoImgEl.src=content.toString();this.switchUploadView("crop");this._croppie&&this._croppie.destroy();this._croppie=new Croppie(this._cropPhotoImgEl,{viewport:{width:300,height:300,type:"circle"}});this._croppie.setZoom(.1)}}};input.click()};this._uploadPrevious.onclick=ev=>{ev.preventDefault();this.switchUploadView("upload")};this._uploadPhotoButton.onclick=async ev=>{ev.preventDefault();let text=this._uploadPhotoButton.textContent;try{this._uploadPhotoButton.disabled=!0;this._uploadPhotoButton.classList.add("disabled");this._uploadPhotoButton.textContent="Uploading...";if(!this._croppie)throw new Error("Croppie instance is null");let blob=await this._croppie.result({type:"blob",size:{width:180,height:180},format:"jpeg",quality:.9,circle:!1});if(!blob)throw new Error("Failed to crop image");let sr=await this._userApi.uploadPhotoCurrentUser(blob);if(!sr.body||!sr.body.success)throw new Error(sr.body&&sr.body.error||sr.response.responseText);openUploadModal.querySelector("img").src=sr.body.url;for(let i of Array.from(document.querySelectorAll(".avatar img")))i.src=sr.body.url;$("#upload-photo-modal").modal("hide")}catch(ex2){let ex=ex2;notify_28.Notify.alert("Failed to upload file",notify_28.Notify.extractMsg(ex),"danger")}finally{this._uploadPhotoButton.disabled=!1;this._uploadPhotoButton.classList.remove("disabled");this._uploadPhotoButton.textContent=text}};for(let form of Array.from(document.querySelectorAll("form")))form.addEventListener("submit",ev=>{let btn=form.querySelector('button[type="submit"]');if(btn){btn.classList.add("disabled");btn.disabled=!0}});window.history.replaceState(null,"",window.location.pathname)}switchUploadView(v){for(let k of Object.keys(this._uploadAreas))this._uploadAreas[k].style.display="none";this._uploadPhotoButton.disabled=!0;this._uploadPhotoButton.classList.add("disabled");this._uploadPrevious.style.display="none";if("upload"===v)this._uploadAreas.uploadPhoto.style.display="block";else if("crop"===v){this._uploadAreas.cropPhoto.style.display="block";this._uploadPhotoButton.disabled=!1;this._uploadPhotoButton.classList.remove("disabled");this._uploadPrevious.style.display=""}}}}));define("client/project/pages/keys-ui",["require","exports","client/notify"],(function(require,exports,notify_29){Object.defineProperty(exports,"__esModule",{value:!0});exports.KeysUi=void 0;exports.KeysUi=class{constructor(studioApi){this._createHmacModal=document.querySelector("#add-hmac-key-modal");this._createHmacName=document.querySelector("#input-hmac-name");this._createHmacInput=document.querySelector("#input-hmac-key");this._createHmacDevKey=document.querySelector("#input-hmac-dev-key");this._createHmacKeyBtn=document.querySelector("#create-hmac-key-btn");this._createHmacGenerateBtn=document.querySelector("#input-hmac-generate");this._createApiModal=document.querySelector("#add-api-key-modal");this._createApiName=document.querySelector("#input-api-name");this._createApiDevKey=document.querySelector("#input-api-dev-key");this._createApiKeyRole=document.querySelector("#input-api-role");this._createApiKeyBtn=document.querySelector("#create-api-key-btn");this._createApiKeyStep1=document.querySelector("#api-key-step-1");this._createApiKeyStep2=document.querySelector("#api-key-step-2");this._createApiKeyStep2Key=document.querySelector("#api-key-step-2-key");this._createApiFooter=document.querySelector("#create-api-footer");this._studioApi=studioApi;let testValidHmacKey=/^\w{6,32}/;$(this._createHmacModal).on("shown.bs.modal",()=>{this._createHmacName.focus()});document.querySelector('*[data-target="#add-hmac-key-modal"]').onclick=()=>{this._createHmacName.value="";this._createHmacInput.value="";this._createHmacDevKey.checked=!1;this._createHmacName.focus();this._studioApi.analytics.event("click",{event_category:"hmac-action",event_label:"add"})};this._createHmacInput.oninput=()=>{this._createHmacInput.classList.remove("is-invalid")};this._createHmacName.oninput=()=>{this._createHmacName.classList.remove("is-invalid")};this._createHmacGenerateBtn.onclick=ev=>{ev.preventDefault();let key=[];for(let ix=0;ix<32;ix++){let k=Math.floor(16*Math.random());k<10?key.push(String.fromCharCode(k+48)):key.push(String.fromCharCode(k-10+97))}this._createHmacInput.value=key.join("");this._createHmacInput.classList.remove("is-invalid")};this._createHmacKeyBtn.onclick=async ev=>{ev.preventDefault();let originalText=this._createHmacKeyBtn.textContent,isInvalid=!1;if(!testValidHmacKey.test(this._createHmacInput.value)){this._createHmacInput.classList.add("is-invalid");isInvalid=!0}if(this._createHmacName.value.length<2){this._createHmacName.classList.add("is-invalid");isInvalid=!0}if(!isInvalid)try{this._createHmacKeyBtn.classList.add("disabled");this._createHmacKeyBtn.disabled=!0;this._createHmacKeyBtn.textContent="Creating...";let res=await this._studioApi.projects.addProjectHmacKey(this._studioApi.projectId,{name:this._createHmacName.value,hmacKey:this._createHmacInput.value,isDevelopmentKey:this._createHmacDevKey.checked});if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText;location.href=location.pathname+"?createdHmacKey="+encodeURIComponent(this._createHmacName.value)}catch(ex2){let ex=ex2;notify_29.Notify.alert("Failed to create new HMAC key",notify_29.Notify.extractMsg(ex),"danger")}finally{this._createHmacKeyBtn.textContent=originalText;this._createHmacKeyBtn.classList.remove("disabled");this._createHmacKeyBtn.disabled=!1}};$(this._createApiModal).on("shown.bs.modal",()=>{this._createApiName.focus()});document.querySelector('*[data-target="#add-api-key-modal"]').onclick=()=>{this._createApiKeyStep1.style.display="";this._createApiKeyStep2.style.display="none";this._createApiFooter.style.display="";this._createApiName.value="";this._createApiDevKey.checked=!1;this._createApiName.focus();this._studioApi.analytics.event("click",{event_category:"api-action",event_label:"add"})};this._createApiName.oninput=()=>{this._createApiName.classList.remove("is-invalid")};this._createApiKeyRole.oninput=()=>{if("admin"===this._createApiKeyRole.value)this._createApiDevKey.disabled=!1;else{this._createApiDevKey.disabled=!0;this._createApiDevKey.checked=!1}};this._createApiKeyBtn.onclick=async ev=>{ev.preventDefault();let originalText=this._createApiKeyBtn.textContent,isInvalid=!1;if(this._createApiName.value.length<2){this._createApiName.classList.add("is-invalid");isInvalid=!0}if(isInvalid)return;let key=[];for(let ix=0;ix<48;ix++){let k=Math.floor(16*Math.random());k<10?key.push(String.fromCharCode(k+48)):key.push(String.fromCharCode(k-10+97))}try{this._createApiKeyBtn.classList.add("disabled");this._createApiKeyBtn.disabled=!0;this._createApiKeyBtn.textContent="Creating...";let res=await this._studioApi.projects.addProjectApiKey(this._studioApi.projectId,{name:this._createApiName.value,apiKey:"ei_"+key.join(""),isDevelopmentKey:!this._createApiDevKey.disabled&&this._createApiDevKey.checked,role:this._createApiKeyRole.value});if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText;this._createApiKeyStep1.style.display="none";this._createApiKeyStep2.style.display="";this._createApiFooter.style.display="none";this._createApiKeyStep2Key.textContent="ei_"+key.join("");$("#add-api-key-modal").on("hidden.bs.modal",()=>{location.href=location.pathname+"?createdApiKey="+encodeURIComponent(this._createApiName.value)})}catch(ex2){let ex=ex2;notify_29.Notify.alert("Failed to create new Api key",notify_29.Notify.extractMsg(ex),"danger")}finally{this._createApiKeyBtn.textContent=originalText;this._createApiKeyBtn.classList.remove("disabled");this._createApiKeyBtn.disabled=!1}};for(let r of Array.from(document.querySelectorAll("#hmac-keys-table tbody tr")))this.bindHmacDropdown(r);for(let r of Array.from(document.querySelectorAll("#api-keys-table tbody tr")))this.bindApiDropdown(r);window.history.replaceState(null,"",window.location.pathname)}bindHmacDropdown(r){for(let d of Array.from(r.querySelectorAll("a.dropdown-item")).map(a=>a)){let id=Number(r.dataset.hmacKeyId);d.onclick=async ev=>{ev.preventDefault();switch(d.dataset.action){case"delete":if(await notify_29.Notify.confirm("Revoking key",`Are you sure you want to revoke "${r.dataset.name}"?`,"Yes, revoke","question","danger")&&r.dataset.name)try{let resp=await this._studioApi.projects.revokeProjectHmacKey(this._studioApi.projectId,id);if(!resp.body||!resp.body.success)throw resp.body&&resp.body.error||resp.response.statusText;location.href=location.pathname+"?removedHmacKey="+encodeURIComponent(r.dataset.name)}catch(ex2){let ex=ex2;notify_29.Notify.alert("Failed to revoke key",notify_29.Notify.extractMsg(ex),"danger")}break}this._studioApi.analytics.event("click",{event_category:"hmac-action",event_label:d.dataset.action})}}}bindApiDropdown(r){for(let d of Array.from(r.querySelectorAll("a.dropdown-item")).map(a=>a)){let id=Number(r.dataset.apiKeyId);d.onclick=async ev=>{ev.preventDefault();switch(d.dataset.action){case"delete":if(await notify_29.Notify.confirm("Revoking key",`Are you sure you want to revoke "${r.dataset.name}"?`,"Yes, revoke","question","danger")&&r.dataset.name)try{let resp=await this._studioApi.projects.revokeProjectApiKey(this._studioApi.projectId,id);if(!resp.body||!resp.body.success)throw resp.body&&resp.body.error||resp.response.statusText;location.href=location.pathname+"?removedApiKey="+encodeURIComponent(r.dataset.name)}catch(ex2){let ex=ex2;notify_29.Notify.alert("Failed to revoke key",notify_29.Notify.extractMsg(ex),"danger")}break}this._studioApi.analytics.event("click",{event_category:"api-action",event_label:d.dataset.action})}}}}}));define("client/project/pages/export-ui",["require","exports","client/project/components/job-runner","shared/WebSocketTypes","client/notify"],(function(require,exports,job_runner_9,WebSocketTypes_13,notify_30){Object.defineProperty(exports,"__esModule",{value:!0});exports.ExportUI=void 0;exports.ExportUI=class{constructor(studioApi){this._studioApi=studioApi;this._exportOutputSection=document.querySelector("#export-output-section");this._jobRunner=new job_runner_9.JobRunner(this._studioApi,this._exportOutputSection);this._buildButton=document.querySelector("#build");this._buildButton.onclick=ev=>{ev.preventDefault();this.startBuilding()};this._origText=this._buildButton.textContent||"";this._studioApi.socket.addEventListener("connect",this.checkForRunningProcess.bind(this))}disableUI(){this._buildButton.classList.add("disabled");this._buildButton.textContent="Exporting...";this._exportOutputSection.style.display="block"}async startBuilding(){const exportType=document.querySelector("#export-type"),retainCrops=document.querySelector("#export-retain-splits");this._studioApi.analytics.event("job-start",{event_category:"export",event_label:exportType.value});try{this.disableUI();switch(exportType.value){case"original":this._currJobId=await this._jobRunner.startJob(this._studioApi.jobs.startOriginalExportJob(this._studioApi.projectId,{uploaderFriendlyFilenames:!1,retainCrops:retainCrops.checked}));break;case"original-renamed":this._currJobId=await this._jobRunner.startJob(this._studioApi.jobs.startOriginalExportJob(this._studioApi.projectId,{uploaderFriendlyFilenames:!0,retainCrops:retainCrops.checked}));break;case"wav":this._currJobId=await this._jobRunner.startJob(this._studioApi.jobs.startWavExportJob(this._studioApi.projectId,{retainCrops:retainCrops.checked}));break;default:await notify_30.Notify.alert("Unknown export type",exportType.value,"danger");return}this._jobRunner.on("finished",this.jobFinished.bind(this))}catch(ex2){let ex=ex2;this.enableUI();this._jobRunner.startJobFailed(ex)}}enableUI(){this._buildButton.classList.remove("disabled");this._buildButton.textContent=this._origText}async jobFinished(id,success){if(id!==this._currJobId)return;const exportType=document.querySelector("#export-type");this._studioApi.analytics.event("job-finish-"+(success?"success":"fail"),{event_category:"export",event_label:exportType.value});this.enableUI();if(success)try{let resp=await this._studioApi.export.getExportUrl(this._studioApi.projectId);if(!resp.body||!resp.body.success)throw resp.body&&resp.body.error||resp.response.statusText;await new Promise((resolve,reject)=>setTimeout(resolve,500));window.location.href=resp.body.url}catch(ex2){console.trace("Failed to get download link",ex2);let ex=ex2;notify_30.Notify.alert("Failed to get download link",notify_30.Notify.extractMsg(ex),"danger")}}async checkForRunningProcess(){if(!this._studioApi.isAdmin)return;let job=await this._jobRunner.getActiveJob(WebSocketTypes_13.JOB_KEY_PREFIX.export);if(job){this._currJobId=job.id;this.disableUI();await this._jobRunner.resumeJob(job.id);this._jobRunner.on("finished",this.jobFinished.bind(this))}}}}));define("client/organization/pages/organization-keys-ui",["require","exports","client/notify"],(function(require,exports,notify_31){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationKeysUi=void 0;exports.OrganizationKeysUi=class{constructor(studioApi){this._createApiName=document.querySelector("#input-api-name");this._createApiRole=document.querySelector("#input-api-role");this._createApiKeyBtn=document.querySelector("#create-api-key-btn");this._createApiKeyStep1=document.querySelector("#api-key-step-1");this._createApiKeyStep2=document.querySelector("#api-key-step-2");this._createApiKeyStep2Key=document.querySelector("#api-key-step-2-key");this._createApiFooter=document.querySelector("#create-api-footer");this._studioApi=studioApi;let addBtn=document.querySelector('*[data-target="#add-api-key-modal"]');addBtn&&(addBtn.onclick=()=>{this._createApiKeyStep1.style.display="";this._createApiKeyStep2.style.display="none";this._createApiFooter.style.display="";this._createApiName.value="";this._createApiName.focus();this._studioApi.analytics.event("click",{event_category:"api-action",event_label:"add"})});this._createApiName.oninput=()=>{this._createApiName.classList.remove("is-invalid")};this._createApiKeyBtn.onclick=async ev=>{ev.preventDefault();let originalText=this._createApiKeyBtn.textContent,isInvalid=!1;if(this._createApiName.value.length<2){this._createApiName.classList.add("is-invalid");isInvalid=!0}if(isInvalid)return;let key=[];for(let ix=0;ix<48;ix++){let k=Math.floor(16*Math.random());k<10?key.push(String.fromCharCode(k+48)):key.push(String.fromCharCode(k-10+97))}try{this._createApiKeyBtn.classList.add("disabled");this._createApiKeyBtn.disabled=!0;this._createApiKeyBtn.textContent="Creating...";let role;switch(this._createApiRole.value){case"admin":role="admin";break;default:role="member"}let res=await this._studioApi.organizations.addOrganizationApiKey(this._studioApi.organizationId,{name:this._createApiName.value,apiKey:"ei_"+key.join(""),role:role});if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText;this._createApiKeyStep1.style.display="none";this._createApiKeyStep2.style.display="";this._createApiFooter.style.display="none";this._createApiKeyStep2Key.textContent="ei_"+key.join("");$("#add-api-key-modal").on("hidden.bs.modal",()=>{location.href=location.pathname+"?createdApiKey="+encodeURIComponent(this._createApiName.value)})}catch(ex2){let ex=ex2;notify_31.Notify.alert("Failed to create new Api key",notify_31.Notify.extractMsg(ex),"danger")}finally{this._createApiKeyBtn.textContent=originalText;this._createApiKeyBtn.classList.remove("disabled");this._createApiKeyBtn.disabled=!1}};for(let r of Array.from(document.querySelectorAll("#api-keys-table tbody tr")))this.bindApiDropdown(r);window.history.replaceState(null,"",window.location.pathname)}bindApiDropdown(r){for(let d of Array.from(r.querySelectorAll("a.dropdown-item")).map(a=>a)){let id=Number(r.dataset.apiKeyId);d.onclick=async ev=>{ev.preventDefault();switch(d.dataset.action){case"delete":if(await notify_31.Notify.confirm('Revoking "'+r.dataset.name+'"',`Are you sure you want to revoke "${r.dataset.name}"?`,"Yes, revoke","question","danger")&&r.dataset.name)try{let resp=await this._studioApi.organizations.revokeOrganizationApiKey(this._studioApi.organizationId,id);if(!resp.body||!resp.body.success)throw resp.body&&resp.body.error||resp.response.statusText;location.href=location.pathname+"?removedApiKey="+encodeURIComponent(r.dataset.name)}catch(ex2){let ex=ex2;notify_31.Notify.alert("Failed to revoke key",notify_31.Notify.extractMsg(ex),"danger")}break}this._studioApi.analytics.event("click",{event_category:"api-action",event_label:d.dataset.action})}}}}}));define("client/organization/pages/organization-portals-ui",["require","exports","client/notify"],(function(require,exports,notify_32){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationPortalsUi=void 0;exports.OrganizationPortalsUi=class{constructor(studioApi){this._addPortalName=document.querySelector("#input-portal-name");this._addPortalDescription=document.querySelector("#input-portal-description");this._addPortalPath=document.querySelector("#input-portal-path");this._addPortalBucket=document.querySelector("#input-portal-bucket");this._addPortalBtn=document.querySelector("#add-upload-portal-btn");this._portals=document.querySelectorAll("#portals-table tbody tr");this._modal=document.querySelector("#add-upload-portal-modal");this._step1=document.querySelector("#add-organization-portal-step-1");this._step2=document.querySelector("#add-organization-portal-step-2");this._step3=document.querySelector("#add-organization-portal-step-3");this._newPortalName=document.querySelector("#new-portal-name");this._newPortalUrl=document.querySelector("#new-portal-url");this._modaltitle=document.querySelector("#organization-portal-modal-title");this._corsModalBucketName=document.querySelector("#cors-header-bucket-name");this._corsModalOrigin=document.querySelector("#cors-header-bucket-origin");this._checkPortalCorsBtn=document.querySelector("#check-upload-portal-btn");this._studioApi=studioApi;window.history.replaceState(null,"",window.location.pathname);$("#add-upload-portal-modal").on("shown.bs.modal",()=>{this._addPortalName.focus()});let addBtn=document.querySelector('*[data-target="#add-upload-portal-modal"]');addBtn&&(addBtn.onclick=()=>{this._addPortalName.value="";this._addPortalPath.value="";this._addPortalBucket.value="";this._addPortalDescription.value="";this._addPortalBtn.textContent="Create portal";this._modaltitle.textContent="Create a new upload portal";this._modal.dataset.action="create";this.goToStep(1)});this._addPortalName.oninput=()=>{this._addPortalName.value.length>1&&this._addPortalName.classList.remove("is-invalid")};this._addPortalPath.oninput=()=>{this._addPortalPath.value.length>0&&this._addPortalPath.classList.remove("is-invalid")};this._addPortalBucket.oninput=()=>{this._addPortalBucket.value&&this._addPortalBucket.classList.remove("is-invalid")};this._checkPortalCorsBtn.onclick=async ev=>{this._checkPortalCorsBtn.disabled=!0;let btnText=this._checkPortalCorsBtn.textContent;this._checkPortalCorsBtn.textContent="Checking...";await this.updatePortal(!0);this._checkPortalCorsBtn.disabled=!1;this._checkPortalCorsBtn.textContent=btnText};this._addPortalBtn.onclick=async ev=>{ev.preventDefault();let isInvalid=!1;if(this._addPortalName.value.length<2){this._addPortalName.classList.add("is-invalid");isInvalid=!0}if(this._addPortalPath.value.length<1){this._addPortalPath.classList.add("is-invalid");isInvalid=!0}if(!this._addPortalBucket.value){this._addPortalBucket.classList.add("is-invalid");isInvalid=!0}if(isInvalid)return;let action=this._modal.dataset.action,originalText=this._addPortalBtn.textContent;this._addPortalBtn.classList.add("disabled");this._addPortalBtn.disabled=!0;try{switch(action){case"update":this._addPortalBtn.textContent=" Updating portal...";await this.updatePortal(!1);break;case"create":this._addPortalBtn.textContent=" Creating portal...";await this.createPortal()}}catch(err2){let err=err2;await notify_32.Notify.alert(`Failed to ${action} portal`,err.message||err.toString(),"danger")}finally{this._addPortalBtn.textContent=originalText;this._addPortalBtn.classList.remove("disabled");this._addPortalBtn.disabled=!1}};this._portals.forEach(async row=>{let r=row,id=Number(r.dataset.id),name=r.dataset.name||"";r.querySelectorAll("a.dropdown-item").forEach(link=>{link.onclick=async e=>{let action=link.getAttribute("data-action")||"";action&&e.preventDefault();try{switch(action){case"update":await this.editPortal(id);break;case"delete":await this.deletePortal(id,name);break;case"copy-bucket-url":try{let url=r.dataset.bucketUrl;if(!url)throw new Error('"bucketUrl" not set');await navigator.clipboard.writeText(url);notify_32.Notify.notify("","Copied bucket URL","top","center","far fa-check-circle","success")}catch(ex2){let ex=ex2;notify_32.Notify.notify("","Failed to copy: "+notify_32.Notify.extractMsg(ex),"top","center","far fa-times-circle","danger")}}}catch(err2){let err=err2;await notify_32.Notify.alert(`Failed to ${action} portal`,err.message||err.toString(),"danger")}}})})}goToStep(step){if(2===step){this._modaltitle.textContent="Upload portal";this._step2.style.removeProperty("display");this._step1.style.display="none";this._step3.style.display="none"}else if(3===step){this._modaltitle.textContent="Upload portal";this._step3.style.removeProperty("display");this._step1.style.display="none";this._step2.style.display="none"}else{this._step1.style.removeProperty("display");this._step2.style.display="none";this._step3.style.display="none"}}async createPortal(){this._studioApi.analytics.event("click",{event_category:"upload-portal-action",event_label:"create"});let req={bucketId:Number(this._addPortalBucket.value),name:this._addPortalName.value,bucketPath:this._addPortalPath.value,description:this._addPortalDescription.value},response=await this._studioApi.portals.createOrganizationPortal(this._studioApi.organizationId,req);if(!response.body.success)throw new Error(response.body.error);this._modal.dataset.id=response.body.id+"";this._newPortalName.textContent=this._addPortalName.value;response.body.url&&(this._newPortalUrl.textContent=this._newPortalUrl.href=response.body.url);if(response.body.signedUrl)try{await this.checkCors(response.body.signedUrl);this.goToStep(2)}catch(err){this.goToStep(3);this._corsModalBucketName.textContent=response.body.bucketBucket;this._corsModalOrigin.textContent=location.protocol+"//"+location.host}else this.goToStep(2);$("#add-upload-portal-modal").on("hidden.bs.modal",()=>{location.href=location.pathname+"?createdPortal="+encodeURIComponent(this._addPortalName.value)})}async checkCors(url){return new Promise((resolve,reject)=>{let oReq=new XMLHttpRequest;oReq.onerror=ex=>{console.log(ex)};oReq.onreadystatechange=()=>{if(4===oReq.readyState){0===oReq.status&&reject();200===oReq.status&&resolve(!0)}};oReq.open("PUT",url,!0);oReq.send(new Blob([]))})}async updatePortal(showSuccess){this._studioApi.analytics.event("click",{event_category:"upload-portal-action",event_label:"update"});let id=Number(this._modal.dataset.id),req={name:this._addPortalName.value,bucketId:Number(this._addPortalBucket.value),bucketPath:this._addPortalPath.value,description:this._addPortalDescription.value},response=await this._studioApi.portals.updateOrganizationPortal(this._studioApi.organizationId,id,req);if(!response.body||!response.body.success)throw new Error(response.body&&response.body.error||response.response.statusText);if(response.body.signedUrl)try{await this.checkCors(response.body.signedUrl);if(!showSuccess){location.href=location.pathname+"?updatedPortal="+encodeURIComponent(this._addPortalName.value);return}this.goToStep(2)}catch(err){this.goToStep(3);this._corsModalBucketName.textContent=response.body.bucketBucket;this._corsModalOrigin.textContent=location.protocol+"//"+location.host}$("#add-upload-portal-modal").on("hidden.bs.modal",()=>{location.href=location.pathname+"?updatedPortal="+encodeURIComponent(this._addPortalName.value)})}async editPortal(id){let response=await this._studioApi.portals.getOrganizationPortal(this._studioApi.organizationId,id);if(!response.body||!response.body.success)throw new Error(response.body&&response.body.error||response.response.statusText);this._modaltitle.textContent="Update your upload portal";this._addPortalBtn.textContent=" Update portal";this._modal.dataset.action="update";this._modal.dataset.id=id.toFixed();this.goToStep(1);$("#add-upload-portal-modal").modal();this._addPortalName.value=response.body.name;this._addPortalPath.value=response.body.bucketPath;this._addPortalBucket.value=response.body.bucketId.toFixed();this._addPortalDescription.value=response.body.description||""}async deletePortal(id,name){if(!await notify_32.Notify.confirm("Delete",`Do you want to delete the portal "${name}"?`,"Delete","warning","warning"))return;this._studioApi.analytics.event("click",{event_category:"upload-portal-action",event_label:"delete"});let response=await this._studioApi.portals.deleteOrganizationPortal(this._studioApi.organizationId,id);if(!response.body||!response.body.success)throw new Error(response.body&&response.body.error||response.response.statusText);location.href=location.pathname+"?removedPortal="+encodeURIComponent(name)}}}));define("client/organization/pages/organization-users-ui",["require","exports","client/notify"],(function(require,exports,notify_33){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationUsersUi=void 0;exports.OrganizationUsersUi=class{constructor(studioApi){this._addUsersModal=document.querySelector("#add-user-modal");this._addUserName=document.querySelector("#add-user-name");this._addUserRole=document.querySelector("#add-user-role");this._addUserBtn=document.querySelector("#add-user-btn");this._addUserDatasetsSection=document.querySelector("#add-user-datasets-section");this._addUserDatasets=Array.from(document.querySelectorAll("#add-user-datasets-section input"));this._editUserModal=document.querySelector("#edit-user-modal");this._editUserBtn=document.querySelector("#edit-user-btn");this._editUserName=document.querySelector("#edit-user-name");this._editUserDatasets=Array.from(document.querySelectorAll("#edit-user-datasets-section input"));this._studioApi=studioApi;$(this._addUsersModal).on("shown.bs.modal",()=>{this._addUserName.value="";this._addUserName.focus();this._studioApi.analytics.event("click",{event_category:"user-action",event_label:"add"})});"guest"===this._addUserRole.value?this._addUserDatasetsSection.style.display="":this._addUserDatasetsSection.style.display="none";this._addUserRole.oninput=()=>{"guest"===this._addUserRole.value?this._addUserDatasetsSection.style.display="":this._addUserDatasetsSection.style.display="none"};this._addUserName.oninput=()=>{this._addUserName.classList.remove("is-invalid")};this._addUserBtn.onclick=async ev=>{ev.preventDefault();let originalText=this._addUserBtn.textContent,isInvalid=!1;if(this._addUserName.value.length<2){this._addUserName.classList.add("is-invalid");isInvalid=!0}if(isInvalid)return;let key=[];for(let ix=0;ix<48;ix++){let k=Math.floor(16*Math.random());k<10?key.push(String.fromCharCode(k+48)):key.push(String.fromCharCode(k-10+97))}try{this._addUserBtn.classList.add("disabled");this._addUserBtn.disabled=!0;this._addUserBtn.textContent="Adding...";let role=this._addUserRole.value,datasets="guest"===role?this._addUserDatasets.filter(x=>x.checked).map(x=>x.dataset.dataset||""):[],res=await this._studioApi.organizations.addOrganizationMember(this._studioApi.organizationId,{usernameOrEmail:this._addUserName.value,role:role,datasets:datasets});if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText;location.href=location.pathname+"?addedUser="+encodeURIComponent(this._addUserName.value)}catch(ex2){let ex=ex2;notify_33.Notify.alert("Failed to add user",notify_33.Notify.extractMsg(ex),"danger")}finally{this._addUserBtn.textContent=originalText;this._addUserBtn.classList.remove("disabled");this._addUserBtn.disabled=!1}};this._editUserBtn.onclick=async ev=>{ev.preventDefault();let originalText=this._editUserBtn.textContent;try{this._editUserBtn.classList.add("disabled");this._editUserBtn.disabled=!0;this._editUserBtn.textContent="Updating...";let datasets=this._editUserDatasets.filter(x=>x.checked).map(x=>x.dataset.dataset||""),res=await this._studioApi.organizations.setOrganizationMemberDatasets(this._studioApi.organizationId,Number(this._editUserModal.dataset.id),{datasets:datasets});if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText;location.href=location.pathname+"?updatedUser="+encodeURIComponent(this._editUserModal.dataset.name||"")}catch(ex2){let ex=ex2;notify_33.Notify.alert("Failed to edit user",notify_33.Notify.extractMsg(ex),"danger")}finally{this._editUserBtn.textContent=originalText;this._editUserBtn.classList.remove("disabled");this._editUserBtn.disabled=!1}};for(let r of Array.from(document.querySelectorAll("#users-table tbody tr")))this.bindUserDropdown(r);let addBtn=document.querySelector('*[data-target="#add-user-modal"]');"#add-user"===location.hash&&addBtn&&addBtn.click();window.history.replaceState(null,"",window.location.pathname)}bindUserDropdown(r){for(let d of Array.from(r.querySelectorAll("a.dropdown-item")).map(a=>a)){let id=Number(r.dataset.id);d.onclick=async ev=>{ev.preventDefault();switch(d.dataset.action){case"delete":if(await notify_33.Notify.confirm('Removing "'+r.dataset.name+'"',`Are you sure you want to remove "${r.dataset.name}" from the organization?`,"Yes, remove","question","danger")&&r.dataset.name)try{let resp=await this._studioApi.organizations.removeOrganizationMember(this._studioApi.organizationId,{id:id});if(!resp.body||!resp.body.success)throw resp.body&&resp.body.error||resp.response.statusText;location.href=location.pathname+"?removedUser="+encodeURIComponent(r.dataset.name)}catch(ex2){let ex=ex2;notify_33.Notify.alert("Failed to remove user",notify_33.Notify.extractMsg(ex),"danger")}break;case"switch-admin":if(await notify_33.Notify.confirm("Admin rights",`Are you sure you want to give "${r.dataset.name}" admin rights?`,"Yes, give admin rights","question","info"))try{let resp=await this._studioApi.organizations.setOrganizationMemberRole(this._studioApi.organizationId,id,{role:"admin"});if(!resp.body||!resp.body.success)throw resp.body&&resp.body.error||resp.response.statusText;location.href=location.href}catch(ex2){let ex=ex2;notify_33.Notify.alert("Failed to give user admin rights",notify_33.Notify.extractMsg(ex),"danger")}break;case"switch-member":if(await notify_33.Notify.confirm("Revoke admin rights",`Are you sure you want revoke "${r.dataset.name}"'s admin rights?`,"Yes, revoke admin rights","question","info"))try{let resp=await this._studioApi.organizations.setOrganizationMemberRole(this._studioApi.organizationId,id,{role:"member"});if(!resp.body||!resp.body.success)throw resp.body&&resp.body.error||resp.response.statusText;location.href=location.href}catch(ex2){let ex=ex2;notify_33.Notify.alert("Failed to revoke admin rights",notify_33.Notify.extractMsg(ex),"danger")}break;case"resend-invite-email":if(await notify_33.Notify.confirm("Resend invitation email",`Are you sure you want resend the invitation to ${r.dataset.name}?`,"Yes, send","question","info"))try{let resp=await this._studioApi.organizations.resendOrganizationMemberInvite(this._studioApi.organizationId,id);if(!resp.body||!resp.body.success)throw resp.body&&resp.body.error||resp.response.statusText;notify_33.Notify.notify("","Resend invitation email to "+r.dataset.name,"top","center","far fa-check-circle","success")}catch(ex2){let ex=ex2;notify_33.Notify.alert("Failed to resend invitation email",notify_33.Notify.extractMsg(ex),"danger")}break;case"edit-datasets":try{let resp=await this._studioApi.organizations.getOrganizationInfo(this._studioApi.organizationId);if(!resp.body||!resp.body.success)throw resp.body&&resp.body.error||resp.response.statusText;let user=resp.body.organization.users.find(x=>x.id===id);if(!user)throw new Error("Cannot find user with ID "+id);for(let x of this._editUserDatasets)x.checked=user.datasets.indexOf(x.dataset.dataset||"")>-1;this._editUserName.textContent=user.name;this._editUserModal.dataset.id=id+"";this._editUserModal.dataset.name=user.name;$(this._editUserModal).modal()}catch(ex2){let ex=ex2;notify_33.Notify.alert("Failed to retrieve user",notify_33.Notify.extractMsg(ex),"danger")}}this._studioApi.analytics.event("click",{event_category:"user-action",event_label:d.dataset.action})}}}}}));define("client/organization/components/form-binding",["require","exports","client/notify"],(function(require,exports,notify_34){Object.defineProperty(exports,"__esModule",{value:!0});exports.FormBinding=void 0;exports.FormBinding=class{constructor(modal,options){this._options=options;let titleEl=modal.querySelector(".modal-header h3 span"),saveBtnEl=modal.querySelector(".save-btn");if(!titleEl)throw new Error('Failed to initialize form, missing ".modal-header h3 .span"');if(!saveBtnEl)throw new Error('Failed to initialize form, missing ".save-btn"');let formEls=Array.from(modal.querySelectorAll("*[data-binding]"));if(0===formEls.length)throw new Error('Failed to initialize form, no elements with "*[data-binding]" found');for(let f of formEls)if(!f.dataset.binding)throw new Error('Failed to initialize form, missing value for "*[data-binding]" on element '+f.outerHTML);this._els={modal:modal,title:titleEl,saveBtn:saveBtnEl,formFields:formEls.map(f=>({el:f,field:f.dataset.binding||"",hasValidator:!(!f.id||!document.querySelector(`*[data-for="${f.id}"]`))}))};$(this._els.modal).on("shown.bs.modal",()=>{let focusEl=this._els.modal.querySelector('*[data-binding-focus="1"]');focusEl&&focusEl.focus()});for(let f of this._els.formFields){f.hasValidator&&f.el.addEventListener("input",()=>f.el.classList.remove("is-invalid"));f.el instanceof HTMLInputElement&&f.el.addEventListener("keyup",ev2=>{"Enter"===ev2.key&&this._els.saveBtn.click()})}}async bindUpdate(id,onDataBoundCallback,onUpdatedCallback){let source=await this._options.fetch(id);this._els.title.textContent=await this._options.updateTitle(source);this._els.modal.dataset.mode="update";this._els.modal.dataset.id=id.toString();this._els.saveBtn.textContent=this._options.updateSaveBtnText;let sourceObj=source;for(let f of this._els.formFields){if(-1===Object.keys(source).indexOf(f.field)){f.el.value="";continue}let value=sourceObj[f.field];f.el instanceof HTMLInputElement&&"checkbox"===f.el.type?f.el.checked=value:f.el instanceof HTMLInputElement&&"radio"===f.el.type?f.el.dataset.bindingValue===value.toString()?f.el.checked=!0:f.el.checked=!1:f.el.value=value.toString();f.hasValidator&&f.el.classList.remove("is-invalid")}onDataBoundCallback&&await onDataBoundCallback(source);this._els.saveBtn.onclick=async ev=>{ev.preventDefault();let{obj:obj,isValid:isValid}=this.getObjectFromForm();if(!isValid)return;let origText=this._els.saveBtn.textContent;try{this._els.saveBtn.classList.add("disabled");this._els.saveBtn instanceof HTMLButtonElement&&(this._els.saveBtn.disabled=!0);let x=obj;await this._options.update(id,x,this._els.saveBtn);onUpdatedCallback(x)}catch(ex2){let ex=ex2;await notify_34.Notify.alert(this._options.createErrorText,notify_34.Notify.extractMsg(ex),"danger")}finally{this._els.saveBtn.textContent=origText;this._els.saveBtn.classList.remove("disabled");this._els.saveBtn instanceof HTMLButtonElement&&(this._els.saveBtn.disabled=!1)}}}async bindCreate(onDataBoundCallback,onCreatedCallback){this._els.title.textContent=await this._options.createTitle();this._els.modal.dataset.mode="create";this._els.modal.dataset.id="";this._els.saveBtn.textContent=this._options.createSaveBtnText;for(let f of this._els.formFields){f.el.value="";f.hasValidator&&f.el.classList.remove("is-invalid")}onDataBoundCallback&&await onDataBoundCallback();this._els.saveBtn.onclick=async ev=>{ev.preventDefault();let{obj:obj,isValid:isValid}=this.getObjectFromForm();if(!isValid)return;let origText=this._els.saveBtn.textContent;try{this._els.saveBtn.classList.add("disabled");this._els.saveBtn instanceof HTMLButtonElement&&(this._els.saveBtn.disabled=!0);let x=obj;await this._options.create(x,this._els.saveBtn);onCreatedCallback(x)}catch(ex2){let ex=ex2;await notify_34.Notify.alert(this._options.createErrorText,notify_34.Notify.extractMsg(ex),"danger")}finally{this._els.saveBtn.textContent=origText;this._els.saveBtn.classList.remove("disabled");this._els.saveBtn instanceof HTMLButtonElement&&(this._els.saveBtn.disabled=!1)}}}showModal(){$(this._els.modal).modal()}hideModal(){$(this._els.modal).modal("hide")}getModal(){return this._els.modal}getObjectFromForm(){let obj={},isValid=!0;for(let f of this._els.formFields){if(f.hasValidator&&""===f.el.value){isValid=!1;f.el.classList.add("is-invalid")}f.el instanceof HTMLInputElement&&"checkbox"===f.el.type?obj[f.field]=f.el.checked:f.el instanceof HTMLInputElement&&"radio"===f.el.type?f.el.checked&&(obj[f.field]=f.el.dataset.bindingValue):"number"===f.el.dataset.bindingType?""===f.el.value?obj[f.field]=void 0:obj[f.field]=Number(f.el.value):obj[f.field]=f.el.value}return{obj:obj,isValid:isValid}}}}));define("client/organization/pages/organization-buckets-ui",["require","exports","client/notify","client/organization/components/form-binding"],(function(require,exports,notify_35,form_binding_1){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationBucketsUi=void 0;exports.OrganizationBucketsUi=class{constructor(studioApi){this._studioApi=studioApi;let modal=document.querySelector("#add-bucket-modal");this._bucketForm=new form_binding_1.FormBinding(modal,{createTitle:async()=>"Add a new storage bucket",updateTitle:async s=>'Updating storage bucket "'+s.name+'"',create:this.saveBucket.bind(this),update:this.updateBucket.bind(this),fetch:this.fetchBucket.bind(this),createErrorText:"Failed to add bucket",updateErrorText:"Failed to update bucket",createSaveBtnText:"Add bucket",updateSaveBtnText:"Update bucket"});let addBtn=document.querySelector("#add-new-bucket");addBtn&&(addBtn.onclick=async ev=>{ev.preventDefault();await this._bucketForm.bindCreate(void 0,source=>{location.href=location.pathname+"?addedBucket="+encodeURIComponent(source.name)});this._bucketForm.showModal();this._studioApi.analytics.event("click",{event_category:"bucket-action",event_label:"add"})});for(let r of Array.from(document.querySelectorAll("#buckets-table tbody tr")))this.bindUserDropdown(r);window.history.replaceState(null,"",window.location.pathname)}async saveBucket(obj,saveBtn){saveBtn.textContent="Verifying connection...";try{let cres=await this._studioApi.data.verifyOrganizationBucket(this._studioApi.organizationId,obj);if(!cres.body||!cres.body.success)throw cres.body.error||cres.response.responseText}catch(ex2){let ex=ex2;throw new Error("Failed to connect to this S3 bucket: "+notify_35.Notify.extractMsg(ex))}saveBtn.textContent="Adding...";let res=await this._studioApi.data.addOrganizationBucket(this._studioApi.organizationId,obj);if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText}async updateBucket(id,obj,saveBtn){throw new Error("update not implemented for this form")}async fetchBucket(id){let res=await this._studioApi.data.listOrganizationBuckets(this._studioApi.organizationId);if(!res.body||!res.body.success||!res.body.buckets)throw res.body&&res.body.error||res.response.responseText;let b=res.body.buckets.find(x=>x.id===id);if(!b)throw new Error("Failed to find bucket");return b}bindUserDropdown(r){for(let d of Array.from(r.querySelectorAll("a.dropdown-item")).map(a=>a)){let id=Number(r.dataset.id);d.onclick=async ev=>{ev.preventDefault();switch(d.dataset.action){case"delete":if(await notify_35.Notify.confirm('Removing "'+r.dataset.name+'"',`Are you sure you want to remove "${r.dataset.name}" from this organization?`,"Yes, delete","question","danger")&&r.dataset.name)try{let resp=await this._studioApi.data.removeOrganizationBucket(this._studioApi.organizationId,id);if(!resp.body||!resp.body.success)throw resp.body&&resp.body.error||resp.response.statusText;location.href=location.pathname+"?removedBucket="+encodeURIComponent(r.dataset.name)}catch(ex2){let ex=ex2;notify_35.Notify.alert("Failed to remove user",notify_35.Notify.extractMsg(ex),"danger")}break;case"edit-name":{let v=await notify_35.Notify.prompt("Edit name",'Enter new name for "'+r.dataset.name+'"',"Change name",r.dataset.name||"","question","info");if(v&&r.dataset.name)try{let resp=await this._studioApi.data.updateOrganizationBucket(this._studioApi.organizationId,id,{name:v});if(!resp.body||!resp.body.success)throw resp.body&&resp.body.error||resp.response.statusText;r.dataset.name=v;let el=r.querySelector(".bucket-name");el.title=el.textContent=v}catch(ex2){let ex=ex2;notify_35.Notify.alert("Failed to edit name",notify_35.Notify.extractMsg(ex),"danger")}break}case"edit-prefix":{let el=r.querySelector(".bucket-prefix"),v=await notify_35.Notify.prompt("Edit name",'Enter new prefix for "'+r.dataset.name+'"',"Change prefix",el.textContent||"","question","info");if(v&&r.dataset.name)try{let resp=await this._studioApi.data.updateOrganizationBucket(this._studioApi.organizationId,id,{prefix:v});if(!resp.body||!resp.body.success)throw resp.body&&resp.body.error||resp.response.statusText;el.title=el.textContent=v}catch(ex2){let ex=ex2;notify_35.Notify.alert("Failed to edit prefix",notify_35.Notify.extractMsg(ex),"danger")}break}}this._studioApi.analytics.event("click",{event_category:"bucket-action",event_label:d.dataset.action})}}}}}));define("client/organization/pages/organization-data-ui",["require","exports","client/pagination","client/notify","client/global-ui","client/project/components/job-runner","shared/WebSocketTypes"],(function(require,exports,pagination_2,notify_36,global_ui_10,job_runner_10,WebSocketTypes_14){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationDataUI=void 0;exports.OrganizationDataUI=class{constructor(studioApi){this._dataContainer=document.querySelector("#data-card-container");this._dataTable=document.querySelector("#organization-data-table");this._detailCard={loadingCard:document.querySelector("#loading-card"),detailCard:document.querySelector("#detail-card"),metadataTable:document.querySelector("#metadata-table"),filesTable:document.querySelector("#files-table"),noMetadata:document.querySelector("#no-metadata"),noFiles:document.querySelector("#no-files"),checksSection:document.querySelector("#checks-section"),checksTbody:document.querySelector("#checks-table tbody")};this._metadataTrTemplate=document.querySelector("#metadata-tr").content.querySelector("tr");this._filesTrTemplate=document.querySelector("#files-tr").content.querySelector("tr");this._downloadSelectedBtn=document.querySelector("#download-selected");this._clearChecklistSelectedBtn=document.querySelector("#clear-checklists-selected");this._changeDatasetSelectedBtn=document.querySelector("#change-dataset-selected");this._createProjectSelectedBtn=document.querySelector("#create-project-selected");this._deleteSelectedBtn=document.querySelector("#delete-selected");this._createProjectBtn=document.querySelector("#create-project");this._selectAllCheckbox=document.querySelector("th.org-data-checkbox input");this._currentFilter=document.querySelector("#current-filter");this._applyFilter=document.querySelector("#apply-filter");this._currentDataset=document.querySelector("#current-dataset");this._pagination=new pagination_2.Pagination(document.querySelector(".paginatable"),this.renderPage.bind(this));this._addMetadataBtn=document.querySelector("#add-metadata-btn");this._addFileBtn=document.querySelector("#add-file-btn");this._loadIndex=0;this._addDataItemForm={modal:document.querySelector("#add-dataitem-modal"),form:document.querySelector("#add-dataitem-form"),name:document.querySelector("#add-dataitem-name"),dataset:document.querySelector("#add-dataitem-dataset"),newDataset:document.querySelector("#add-dataitem-dataset-new-dataset"),bucket:document.querySelector("#add-dataitem-bucket"),metadata:document.querySelector("#add-dataitem-metadata"),bucketPath:document.querySelector("#add-dataitem-bucket-path"),files:document.querySelector("#add-dataitem-files"),cancelSubmit:document.querySelector("#add-dataitem-cancel"),submit:document.querySelector("#add-dataitem-btn")};this._addDataFolderForm={modal:document.querySelector("#add-folder-modal"),step1:{body:document.querySelector("#add-folder-step-1"),form:document.querySelector("#add-folder-form"),dataset:document.querySelector("#add-folder-dataset"),bucket:document.querySelector("#add-folder-bucket"),metadata:document.querySelector("#add-folder-metadata"),bucketPath:document.querySelector("#add-folder-bucket-path"),button:document.querySelector("#add-folder-btn")},step2:{body:document.querySelector("#add-folder-step-2"),button:document.querySelector("#add-folder-modal .job-runner-cancel")}};this._deleteItemsForm={modal:document.querySelector("#delete-items-modal"),button:document.querySelector("#delete-items-modal .job-runner-cancel")};this._deleteItemsJobRunnerTitle=document.querySelector("#delete-items-label span");this._bulkMetadataJobCompleted=!1;this._bulkMetadataEls={step1:{body:document.querySelector("#bulk-metadata-modal-step-1"),button:document.querySelector("#bulk-metadata-btn"),dataset:document.querySelector("#bulk-metadata-dataset"),csvFile:document.querySelector("#bulk-metadata-csv-file")},step2:{body:document.querySelector("#bulk-metadata-modal-step-2"),button:document.querySelector("#bulk-metadata-modal .job-runner-cancel")}};this._renderPageId=0;this._pageSize=Number(document.querySelector("#organization-page-size").value);this._rowDataTemplate=document.querySelector("#organization-data-template").content.querySelector("tr");this._selectionState={allSelected:!1,totalItemCount:Number(document.querySelector("#organization-data-count").value),totalFileCount:Number(document.querySelector("#organization-file-count").value),items:[]};this._changeTableSizeEls={container:document.querySelector("#change-table-size-button"),expand:document.querySelector("#change-table-size-button .expand"),compress:document.querySelector("#change-table-size-button .compress")};this._studioApi=studioApi;if(this._dataTable){for(let tr of Array.from(this._dataTable.querySelectorAll("tbody tr")))this.bindDataRowActions(tr);if(this._downloadSelectedBtn&&this._createProjectSelectedBtn&&this._deleteSelectedBtn&&this._selectAllCheckbox&&this._clearChecklistSelectedBtn&&this._changeDatasetSelectedBtn){this._downloadSelectedBtn.onclick=ev=>{ev.preventDefault();this.downloadSelected()};this._createProjectSelectedBtn.onclick=ev=>{ev.preventDefault();this.createProjectSelected()};this._clearChecklistSelectedBtn.onclick=ev=>{ev.preventDefault();this.clearChecklistSelected()};this._changeDatasetSelectedBtn.onclick=ev=>{ev.preventDefault();this.changeDatasetSelected()};this._deleteSelectedBtn.onclick=ev=>{ev.preventDefault();this.deleteSelected()};this._selectAllCheckbox.oninput=()=>{if(this._dataTable&&this._selectAllCheckbox){for(let i of Array.from(this._dataTable.querySelectorAll("tbody tr .org-data-checkbox input")))i.checked=this._selectAllCheckbox.checked;this._selectionState.items=[];if(this._selectAllCheckbox.checked)for(let r of Array.from(this._dataTable.querySelectorAll("tbody tr"))){let id=Number(r.dataset.id),fileCount=Number(r.dataset.fileCount);r.querySelector(".org-data-checkbox input")&&this._selectionState.items.push({id:id,fileCount:fileCount})}this._selectionState.allSelected=this._selectAllCheckbox.checked;this.renderCheckboxCount()}};if(this._selectAllCheckbox.checked)this._selectionState.allSelected=!0;else{this._selectionState.allSelected=!1;for(let r of Array.from(this._dataTable.querySelectorAll("tbody tr"))){if(r.querySelector(".org-data-checkbox input").checked){let id=Number(r.dataset.id),fileCount=Number(r.dataset.fileCount);this._selectionState.items.push({id:id,fileCount:fileCount})}}}this.renderCheckboxCount()}this._createProjectBtn&&(this._createProjectBtn.onclick=ev=>{ev.preventDefault()})}this._addMetadataBtn.onclick=async()=>{if(void 0===this._loadedDetailItem)return;let key=await notify_36.Notify.prompt("Metadata key","Enter new metadata key","Next","","info","info");if(!key)return;let value=await notify_36.Notify.prompt("Metadata value",'Enter value for "'+key+'"',"Save","","info","info");if(value)try{let info=await this._studioApi.data.getOrganizationDataItem(this._studioApi.organizationId,this._loadedDetailItem);if(!info.body||!info.body.success||!info.body.data)throw new Error(info.body&&info.body.error||info.response.statusText);let currMetadata=info.body.data.metadata;currMetadata=currMetadata||{};if(key in currMetadata)throw new Error('Key "'+key+'" already exists in metadata');currMetadata[key]=value;let ret=await this._studioApi.data.updateOrganizationDataItem(this._studioApi.organizationId,this._loadedDetailItem,{metadata:currMetadata});if(!ret.body||!ret.body.success)throw new Error(ret.body&&ret.body.error||ret.response.statusText);this._detailCard.noMetadata.style.display="none";let metadataTbody=this._detailCard.metadataTable.querySelector("tbody"),tr=this._metadataTrTemplate.cloneNode(!0);tr.dataset.key=key;tr.dataset.value=value;let keyEl=tr.querySelector(".metadata-key");keyEl.textContent=key;keyEl.title=key;let valueEl=tr.querySelector(".metadata-value");valueEl.textContent=value;valueEl.title=value;this.bindMetadataDropdown(tr);metadataTbody.appendChild(tr);if(this._dataTable){let metadataTd=this._dataTable.querySelector('tr[data-id="'+this._loadedDetailItem+'"] .org-data-label');if(metadataTd){metadataTd.textContent=Object.keys(currMetadata).map(k=>k+": "+currMetadata[k]).join(", ");metadataTd.title=Object.keys(currMetadata).map(k=>k+": "+currMetadata[k]).join("\n")}let checkTd=this._dataTable.querySelector('tr[data-id="'+this._loadedDetailItem+'"] .org-data-check');if(checkTd){let hasCheck=1===Number(currMetadata.ei_check)||0===Number(currMetadata.ei_check),check=1===Number(currMetadata.ei_check);if(hasCheck){checkTd.innerHTML=check?'<i class="fas fa-check text-green"></i>':'<i class="fas fa-times text-danger"></i>';this._dataTable.classList.add("data-has-check")}else checkTd.textContent="-"}}this.updateChecksDetailCard(currMetadata)}catch(ex2){let ex=ex2;notify_36.Notify.alert("Failed to persist metadata",notify_36.Notify.extractMsg(ex),"danger")}};this._addFileBtn.onclick=async()=>{if(void 0===this._loadedDetailItem)return;let input=document.createElement("input");input.type="file";input.multiple=!0;input.onchange=async e=>{if(!input.files||0===input.files.length||!this._loadedDetailItem)return;let currInner=this._addFileBtn.innerHTML;try{this._addFileBtn.classList.add("disabled");this._addFileBtn.innerHTML='<i class="fas fa-spinner spin-animation"></i> <span class="upload-progress"></span>';if((input.files||[]).length>1e6)throw new Error("You can upload a maximum of 1,000,000 files through the UI");let status=this._addFileBtn.querySelector(".upload-progress");await new Promise((res,rej)=>{let x=new XMLHttpRequest,fd=new FormData;for(let f of input.files||[])fd.append("files[]",f);let finished=!1;x.upload.onprogress=ev=>{if(finished)return;let progress=Math.floor(ev.loaded/ev.total*100);status.textContent=progress<100?`Uploading... (${progress}%)`:"Finalizing upload..."};x.onload=()=>{finished=!0;if(200!==x.status)return rej(x.responseText||x.statusText);try{let v=JSON.parse(x.responseText);return v.success?res():rej(v.error)}catch(ex2){return rej(x.responseText||x.statusText)}};x.onerror=rej;x.open("POST","/v1/api/organizations/"+this._studioApi.organizationId+"/data/"+this._loadedDetailItem+"/add");x.send(fd)});console.log("uploaded",input.files.length,"files");await this.loadDetailCard(this._loadedDetailItem,"")}catch(ex2){let ex=ex2;notify_36.Notify.alert("Failed to upload file",notify_36.Notify.extractMsg(ex),"danger")}finally{this._addFileBtn.classList.remove("disabled");this._addFileBtn.innerHTML=currInner}};input.click()};this._addDataItemForm.form.onsubmit=ev=>{ev.preventDefault();this.onAddDataItemSubmit()};this._addDataItemForm.name.addEventListener("input",()=>this._addDataItemForm.name.classList.remove("is-invalid"));this._addDataItemForm.bucket.addEventListener("input",()=>this._addDataItemForm.bucket.classList.remove("is-invalid"));this._addDataItemForm.bucketPath.addEventListener("input",()=>this._addDataItemForm.bucketPath.classList.remove("is-invalid"));this._addDataItemForm.newDataset.addEventListener("input",()=>this._addDataItemForm.newDataset.classList.remove("is-invalid"));this._addDataItemForm.metadata.addEventListener("input",()=>this._addDataItemForm.metadata.classList.remove("is-invalid"));this._addDataItemForm.dataset.addEventListener("change",()=>{if(""===this._addDataItemForm.dataset.value){this._addDataItemForm.newDataset.style.display="";this._addDataItemForm.newDataset.focus()}else this._addDataItemForm.newDataset.style.display="none"});$(this._addDataItemForm.modal).on("shown.bs.modal",()=>{this._addDataItemForm.name.focus();this._addDataItemForm.name.value="";this._addDataItemForm.metadata.value="{}";this._addDataItemForm.files.value="";this._addDataItemForm.bucketPath.value="";""===this._addDataItemForm.dataset.value&&(this._addDataItemForm.newDataset.style.display="")});this._addDataFolderForm.step1.form.onsubmit=ev=>{ev.preventDefault();this.onAddDataFolderSubmit()};this._addDataFolderForm.step1.bucket.addEventListener("input",()=>this._addDataFolderForm.step1.bucket.classList.remove("is-invalid"));this._addDataFolderForm.step1.bucketPath.addEventListener("input",()=>this._addDataFolderForm.step1.bucketPath.classList.remove("is-invalid"));this._addDataFolderForm.step1.dataset.addEventListener("input",()=>this._addDataFolderForm.step1.dataset.classList.remove("is-invalid"));this._addDataFolderForm.step1.metadata.addEventListener("input",()=>this._addDataFolderForm.step1.metadata.classList.remove("is-invalid"));$(this._addDataFolderForm.modal).on("shown.bs.modal",()=>{this._addDataFolderForm.step1.body.style.display="";this._addDataFolderForm.step2.body.style.display="none";this._addDataFolderForm.step1.button.style.display="";this._addDataFolderForm.step2.button.style.display="none";this._addDataFolderForm.step1.dataset.focus();this._addDataFolderForm.step1.dataset.value="";this._addDataFolderForm.step1.metadata.value="";this._addDataFolderForm.step1.bucketPath.value=""});let addFolderJobSection=this._addDataFolderForm.modal.querySelector(".job-runner");this._addFolderJobRunner=new job_runner_10.JobRunner(this._studioApi,addFolderJobSection);for(let d of Array.from(document.querySelectorAll(".select-dataset-item")))d.onclick=ev=>{ev.preventDefault();if(this._currentDataset){this._currentDataset.value=d.dataset.dataset||"";this._applyFilter&&this._applyFilter.click()}};let bulkMetadataJobSection=document.querySelector("#bulk-metadata-modal .job-runner");this._bulkMetadataJobRunner=new job_runner_10.JobRunner(this._studioApi,bulkMetadataJobSection);let deleteItemsJobSection=document.querySelector("#delete-items-modal .job-runner");this._deleteItemsJobRunner=new job_runner_10.JobRunner(this._studioApi,deleteItemsJobSection);this._bulkMetadataOrigText=this._bulkMetadataEls.step1.button.textContent||"";$("#bulk-metadata-modal").on("hidden.bs.modal",()=>{this.switchBulkMetadata("step1");this._bulkMetadataJobCompleted&&(location.href=location.pathname+location.search+"&metadataUpdated="+encodeURIComponent(this._bulkMetadataEls.step1.dataset.value))});this._bulkMetadataEls.step1.button.onclick=ev=>{ev.preventDefault();this.startBulkMetadata()};this._bulkMetadataEls.step1.csvFile.oninput=()=>{this._bulkMetadataEls.step1.csvFile.classList.remove("is-invalid")};this.checkForRunningBulkMetadataProcess();let parsedSearch=location.search.replace(/^\?/,"").split("&").filter(f=>0===f.indexOf("filter=")||0===f.indexOf("dataset="));localStorage.setItem("last-org-data-filter-"+this._studioApi.organizationId,parsedSearch.join("&"));const navOrgData=document.querySelector(".org-data-nav-link");navOrgData&&(navOrgData.href=navOrgData.href.split("?")[0]+"?"+parsedSearch.join("&"));window.history.replaceState(null,"",window.location.pathname+"?"+parsedSearch.join("&"))}async loadDetailCard(id,name){if(!this._detailCard.detailCard||!this._detailCard.loadingCard)return console.error("Detail card is missing events");const clearDetailDataClasses=()=>{let els=[this._dataContainer,this._detailCard.detailCard,this._detailCard.loadingCard];for(let el of els){if(!el)continue;let toRemove=Array.from(el.classList).filter(x=>x.startsWith("col-lg-"));for(let r of toRemove)el.classList.remove(r)}},showDetailCardLarge=()=>{if(this._detailCard.detailCard&&this._detailCard.loadingCard){clearDetailDataClasses();this._dataContainer.classList.add("col-lg-6");this._detailCard.detailCard.classList.add("col-lg-6");this._detailCard.loadingCard.classList.add("col-lg-6");this._changeTableSizeEls.expand.style.display="";this._changeTableSizeEls.compress.style.display="none";localStorage.setItem("org-data-ui-detail-container-size","large")}},showDetailCardSmall=()=>{if(this._detailCard.detailCard&&this._detailCard.loadingCard){clearDetailDataClasses();this._dataContainer.classList.add("col-lg-8");this._detailCard.detailCard.classList.add("col-lg-4");this._detailCard.loadingCard.classList.add("col-lg-4");this._changeTableSizeEls.expand.style.display="none";this._changeTableSizeEls.compress.style.display="";localStorage.setItem("org-data-ui-detail-container-size","small")}};this._changeTableSizeEls.container.style.display="";"large"===localStorage.getItem("org-data-ui-detail-container-size")?showDetailCardLarge():showDetailCardSmall();this._changeTableSizeEls.expand.onclick=ev=>{ev.preventDefault();showDetailCardSmall()};this._changeTableSizeEls.compress.onclick=ev=>{ev.preventDefault();showDetailCardLarge()};try{let loadIndex=++this._loadIndex;this._detailCard.detailCard.style.display="none";this._detailCard.loadingCard.style.display="block";let dataReq=await this._studioApi.data.getOrganizationDataItem(this._studioApi.organizationId,id,this._currentFilter?this._currentFilter.value:void 0);if(!dataReq.body||!dataReq.body.success||!dataReq.body.data)throw new Error(dataReq.body&&dataReq.body.error||dataReq.response.statusText);if(loadIndex!==this._loadIndex)return;let filesTbody=this._detailCard.filesTable.querySelector("tbody"),metadataTbody=this._detailCard.metadataTable.querySelector("tbody");filesTbody.innerHTML="";metadataTbody.innerHTML="";for(let f of dataReq.body.data.files){let tr=this._filesTrTemplate.cloneNode(!0);tr.dataset.name=f.name;let fn=tr.querySelector(".files-name");fn.textContent=fn.title=f.name;let fs=tr.querySelector(".files-size");fs.textContent=fs.title=this.bytesToSize(f.size);tr.querySelector('*[data-action="download"]').href=`/v1/api/organizations/${this._studioApi.organizationId}/data/${id}/files`+`/download?fileName=${encodeURIComponent(f.name)}`;tr.querySelector('*[data-action="delete"]').onclick=async ev=>{ev.preventDefault();if(await notify_36.Notify.confirm("Delete file?",`Are you sure you want to delete ${f.name}? This will remove the file from the underlying bucket.`,"Delete file","warning","warning"))try{let cp=await this._studioApi.data.deleteOrganizationDataFile(this._studioApi.organizationId,id,f.name);if(!cp.body||!cp.body.success)throw cp.body&&cp.body.error||cp.response.responseText;await this.loadDetailCard(id,name)}catch(ex2){let ex=ex2;await notify_36.Notify.alert("Failed to delete file",notify_36.Notify.extractMsg(ex),"danger")}};filesTbody.appendChild(tr)}this._detailCard.noFiles.style.display=0===dataReq.body.data.files.length?"block":"none";for(let key of Object.keys(dataReq.body.data.metadata)){let value=dataReq.body.data.metadata[key],tr=this._metadataTrTemplate.cloneNode(!0);tr.dataset.key=key;tr.dataset.value=value;let keyEl=tr.querySelector(".metadata-key");keyEl.textContent=key;keyEl.title=key;let valueEl=tr.querySelector(".metadata-value");valueEl.textContent=value;valueEl.title=value;this.bindMetadataDropdown(tr);metadataTbody.appendChild(tr)}let fileStr=dataReq.body.data.totalFileCount+" "+(1===dataReq.body.data.totalFileCount?"file":"files")+" ("+function(bytes){if(0===bytes)return"0 Bytes";let i=Number(Math.floor(Math.log(bytes)/Math.log(1024)));return Math.round(bytes/Math.pow(1024,i))+" "+["Bytes","KB","MB","GB","TB"][i]}(dataReq.body.data.totalFileSize)+")";if(this._dataTable){let td=this._dataTable.querySelector('tr[data-id="'+dataReq.body.data.id+'"] .org-data-files');td&&(td.title=td.textContent=fileStr)}this._detailCard.noMetadata.style.display=0===Object.keys(dataReq.body.data.metadata).length?"block":"none";this.updateChecksDetailCard(dataReq.body.data.metadata);this._detailCard.detailCard.style.display="block";this._detailCard.loadingCard.style.display="none";this._loadedDetailItem=id}catch(ex2){let ex=ex2;notify_36.Notify.alert('Failed to load detail card for "'+name+'"',notify_36.Notify.extractMsg(ex),"danger");this._detailCard.detailCard.style.display="none";this._detailCard.loadingCard.style.display="none";this._dataContainer.classList.add("col-lg-12");this._dataContainer.classList.remove("col-lg-8")}}bindDataRowActions(r){r.onclick=ev=>{if(!this._dataTable)return;let tag=ev.target&&ev.target.tagName;if("I"!==tag&&"A"!==tag&&"INPUT"!==tag){this._studioApi.analytics.event("click",{event_category:"org-data",event_label:"row"});Array.from(this._dataTable.querySelectorAll("tbody tr")).forEach(t=>{t.classList.remove("table-info")});r.classList.add("table-info");this.loadDetailCard(Number(r.dataset.id),r.dataset.name||"")}};let checkbox=r.querySelector(".org-data-checkbox input");checkbox.oninput=()=>{if(this._dataTable){if(checkbox.checked){if(this._selectionState.totalItemCount<=this._pageSize){let allChecked=!0;for(let i of Array.from(this._dataTable.querySelectorAll("tbody tr .org-data-checkbox input")))if(!i.checked){allChecked=!1;break}}this._selectionState.items.push({id:Number(r.dataset.id),fileCount:Number(r.dataset.fileCount)})}else{this._selectionState.allSelected=!1;let ix=this._selectionState.items.findIndex(i=>i.id===Number(r.dataset.id));-1!==ix&&this._selectionState.items.splice(ix,1)}this.renderCheckboxCount()}};for(let d of Array.from(r.querySelectorAll("a.dropdown-item")).map(a=>a)){let id=Number(r.dataset.id);d.onclick=async ev=>{if(!ev.target||-1!==(ev.target.href||"").indexOf("#")){ev.preventDefault();switch(d.dataset.action){case"delete":if(await notify_36.Notify.confirm('Deleting "'+r.dataset.name+'"',`Are you sure you want to delete "${r.dataset.name}"? This will not delete the item from the underlying storage.`,"Yes, delete","question","danger")&&r.dataset.name)try{let resp=await this._studioApi.data.deleteOrganizationDataItem(this._studioApi.organizationId,id);if(!resp.body||!resp.body.success)throw resp.body&&resp.body.error||resp.response.statusText;location.search.indexOf("?")>-1?location.href=location.pathname+location.search+"&removedDataItem="+encodeURIComponent(r.dataset.name):location.href=location.pathname+"?removedDataItem="+encodeURIComponent(r.dataset.name)}catch(ex2){let ex=ex2;notify_36.Notify.alert("Failed to delete item",notify_36.Notify.extractMsg(ex),"danger")}break;case"edit-dataset":{let v=await notify_36.Notify.prompt("Edit dataset",'Enter new dataset for "'+r.dataset.name+'"',"Change dataset",r.dataset.dataset||"","question","info");if(v&&r.dataset.dataset)try{let resp=await this._studioApi.data.updateOrganizationDataItem(this._studioApi.organizationId,id,{dataset:v});if(!resp.body||!resp.body.success)throw resp.body&&resp.body.error||resp.response.statusText;r.dataset.dataset=v;let el=r.querySelector(".org-data-dataset");el.title=el.textContent=v}catch(ex2){let ex=ex2;notify_36.Notify.alert("Failed to update dataset",notify_36.Notify.extractMsg(ex),"danger")}break}case"edit-name":{let v=await notify_36.Notify.prompt("Edit name",'Enter new name for "'+r.dataset.name+'"',"Change name",r.dataset.name||"","question","info");if(v&&r.dataset.name)try{let resp=await this._studioApi.data.updateOrganizationDataItem(this._studioApi.organizationId,id,{name:v});if(!resp.body||!resp.body.success)throw resp.body&&resp.body.error||resp.response.statusText;r.dataset.name=v;let el=r.querySelector(".org-data-name");el.title=el.textContent=v}catch(ex2){let ex=ex2;notify_36.Notify.alert("Failed to edit name",notify_36.Notify.extractMsg(ex),"danger")}break}case"copy-bucket-url":try{let url=r.dataset.bucketUrl;if(!url)throw new Error('"bucketUrl" not set');await navigator.clipboard.writeText(url);notify_36.Notify.notify("","Copied bucket URL","top","center","far fa-check-circle","success")}catch(ex2){let ex=ex2;notify_36.Notify.notify("","Failed to copy: "+notify_36.Notify.extractMsg(ex),"top","center","far fa-times-circle","danger")}}this._studioApi.analytics.event("click",{event_category:"api-action",event_label:d.dataset.action})}}}}bindMetadataDropdown(r){for(let d of Array.from(r.querySelectorAll("a.dropdown-item")).map(a=>a)){const getMetadata=async()=>{if(!this._loadedDetailItem)throw new Error("No detail card loaded");let info=await this._studioApi.data.getOrganizationDataItem(this._studioApi.organizationId,this._loadedDetailItem);if(!info.body||!info.body.success||!info.body.data)throw new Error(info.body&&info.body.error||info.response.statusText);let currMetadata=info.body.data.metadata;currMetadata=currMetadata||{};if(!r.dataset.key||void 0===currMetadata[r.dataset.key])throw new Error('Cannot find key "'+r.dataset.key+'" in metadata');return currMetadata};d.onclick=async ev=>{if(!ev.target||-1!==(ev.target.href||"").indexOf("#")){ev.preventDefault();switch(d.dataset.action){case"delete":if(await notify_36.Notify.confirm('Removing "'+r.dataset.key+'"',`Are you sure you want to remove metadata item "${r.dataset.key}"?`,"Yes, remove","question","danger")&&void 0!==this._loadedDetailItem)try{let currMetadata=await getMetadata();delete currMetadata[r.dataset.key||""];let ret=await this._studioApi.data.updateOrganizationDataItem(this._studioApi.organizationId,this._loadedDetailItem,{metadata:currMetadata});if(!ret.body||!ret.body.success)throw new Error(ret.body&&ret.body.error||ret.response.statusText);r.parentNode&&r.parentNode.removeChild(r);0===Object.keys(currMetadata).length&&(this._detailCard.noMetadata.style.display="block");if(this._dataTable){let metadataTd=this._dataTable.querySelector('tr[data-id="'+this._loadedDetailItem+'"] .org-data-label');if(metadataTd){metadataTd.textContent=Object.keys(currMetadata).map(k=>k+": "+currMetadata[k]).join(", ");metadataTd.title=Object.keys(currMetadata).map(k=>k+": "+currMetadata[k]).join("\n")}let checkTd=this._dataTable.querySelector('tr[data-id="'+this._loadedDetailItem+'"] .org-data-check');if(checkTd){let hasCheck=1===Number(currMetadata.ei_check)||0===Number(currMetadata.ei_check),check=1===Number(currMetadata.ei_check);if(hasCheck){checkTd.innerHTML=check?'<i class="fas fa-check text-green"></i>':'<i class="fas fa-times text-danger"></i>';this._dataTable.classList.add("data-has-check")}else checkTd.textContent="-"}}this.updateChecksDetailCard(currMetadata)}catch(ex2){let ex=ex2;notify_36.Notify.alert("Failed to delete metadata",notify_36.Notify.extractMsg(ex),"danger")}break;case"edit-key":{let v=await notify_36.Notify.prompt("Edit key",'Enter new key for "'+r.dataset.key+'"',"Change key",r.dataset.key||"","question","info");if(v&&void 0!==this._loadedDetailItem)try{let currMetadata=await getMetadata();currMetadata[v]=currMetadata[r.dataset.key||""];delete currMetadata[r.dataset.key||""];let ret=await this._studioApi.data.updateOrganizationDataItem(this._studioApi.organizationId,this._loadedDetailItem,{metadata:currMetadata});if(!ret.body||!ret.body.success)throw new Error(ret.body&&ret.body.error||ret.response.statusText);r.querySelector(".metadata-key").textContent=v;r.dataset.key=v;if(this._dataTable){let metadataTd=this._dataTable.querySelector('tr[data-id="'+this._loadedDetailItem+'"] .org-data-label');if(metadataTd){metadataTd.textContent=Object.keys(currMetadata).map(k=>k+": "+currMetadata[k]).join(", ");metadataTd.title=Object.keys(currMetadata).map(k=>k+": "+currMetadata[k]).join("\n")}let checkTd=this._dataTable.querySelector('tr[data-id="'+this._loadedDetailItem+'"] .org-data-check');if(checkTd){let hasCheck=1===Number(currMetadata.ei_check)||0===Number(currMetadata.ei_check),check=1===Number(currMetadata.ei_check);if(hasCheck){checkTd.innerHTML=check?'<i class="fas fa-check text-green"></i>':'<i class="fas fa-times text-danger"></i>';this._dataTable.classList.add("data-has-check")}else checkTd.textContent="-"}}this.updateChecksDetailCard(currMetadata)}catch(ex2){let ex=ex2;notify_36.Notify.alert("Failed to rename key",notify_36.Notify.extractMsg(ex),"danger")}break}case"edit-value":{let v=await notify_36.Notify.prompt("Edit value",'Enter new value for "'+r.dataset.key+'"',"Change value",r.dataset.value||"","question","info");if(v&&void 0!==this._loadedDetailItem)try{let currMetadata=await getMetadata();currMetadata[r.dataset.key||""]=v;let ret=await this._studioApi.data.updateOrganizationDataItem(this._studioApi.organizationId,this._loadedDetailItem,{metadata:currMetadata});if(!ret.body||!ret.body.success)throw new Error(ret.body&&ret.body.error||ret.response.statusText);r.querySelector(".metadata-value").textContent=v;r.dataset.value=v;if(this._dataTable){let metadataTd=this._dataTable.querySelector('tr[data-id="'+this._loadedDetailItem+'"] .org-data-label');if(metadataTd){metadataTd.textContent=Object.keys(currMetadata).map(k=>k+": "+currMetadata[k]).join(", ");metadataTd.title=Object.keys(currMetadata).map(k=>k+": "+currMetadata[k]).join("\n")}let checkTd=this._dataTable.querySelector('tr[data-id="'+this._loadedDetailItem+'"] .org-data-check');if(checkTd){let hasCheck=1===Number(currMetadata.ei_check)||0===Number(currMetadata.ei_check),check=1===Number(currMetadata.ei_check);hasCheck?checkTd.innerHTML=check?'<i class="fas fa-check text-green"></i>':'<i class="fas fa-times text-danger"></i>':checkTd.textContent="-"}}this.updateChecksDetailCard(currMetadata)}catch(ex2){let ex=ex2;notify_36.Notify.alert("Failed to change value",notify_36.Notify.extractMsg(ex),"danger")}break}}this._studioApi.analytics.event("click",{event_category:"data-action",event_label:d.dataset.action})}}}}bytesToSize(bytes){if(0===bytes)return"0 Bytes";let i=Number(Math.floor(Math.log(bytes)/Math.log(1024)));return Math.round(bytes/Math.pow(1024,i))+" "+["Bytes","KB","MB","GB","TB"][i]}renderCheckboxCount(){if(!this._dataTable)return;if(!this._downloadSelectedBtn)return;if(!this._deleteSelectedBtn)return;if(!this._clearChecklistSelectedBtn)return;if(!this._changeDatasetSelectedBtn)return;if(!this._selectAllCheckbox)return;if(!this._createProjectSelectedBtn)return;let fileCount=this._selectionState.items.reduce((curr,i)=>curr+=i.fileCount,0),itemCount=this._selectionState.items.length,toggleState=0===fileCount&&!this._selectionState.allSelected;const selectedText=(totalFileCount,dataItemCount)=>{let file=1===totalFileCount?"file":"files",dataitem=1===dataItemCount?"item":"items";return dataItemCount.toLocaleString()+" "+dataitem+", "+totalFileCount.toLocaleString()+" "+file},selectedTextItems=dataItemCount=>{let dataitem=1===dataItemCount?"item":"items";return dataItemCount.toLocaleString()+" "+dataitem};this._downloadSelectedBtn.classList.toggle("disabled",toggleState);this._createProjectSelectedBtn.classList.toggle("disabled",toggleState);this._deleteSelectedBtn.classList.toggle("disabled",toggleState);this._clearChecklistSelectedBtn.classList.toggle("disabled",toggleState);this._changeDatasetSelectedBtn.classList.toggle("disabled",toggleState);if(this._selectionState.allSelected){this._downloadSelectedBtn.textContent="Download selected ("+selectedText(this._selectionState.totalFileCount,this._selectionState.totalItemCount)+")";this._createProjectSelectedBtn.textContent="Transform selected ("+selectedText(this._selectionState.totalFileCount,this._selectionState.totalItemCount)+")";this._clearChecklistSelectedBtn.textContent="Clear checklist ("+selectedTextItems(this._selectionState.totalItemCount)+")";this._changeDatasetSelectedBtn.textContent="Change dataset ("+selectedTextItems(this._selectionState.totalItemCount)+")";this._deleteSelectedBtn.textContent="Delete selected ("+selectedText(this._selectionState.totalFileCount,this._selectionState.totalItemCount)+")"}else if(fileCount>0){this._downloadSelectedBtn.textContent="Download selected ("+selectedText(fileCount,itemCount)+")";this._clearChecklistSelectedBtn.textContent="Clear checklist ("+selectedTextItems(itemCount)+")";this._changeDatasetSelectedBtn.textContent="Change dataset ("+selectedTextItems(itemCount)+")";this._deleteSelectedBtn.textContent="Delete selected ("+selectedText(fileCount,itemCount)+")";this._createProjectSelectedBtn.textContent="Transform selected ("+selectedText(fileCount,itemCount)+")"}else{this._downloadSelectedBtn.textContent="Download selected";this._deleteSelectedBtn.textContent="Delete selected";this._clearChecklistSelectedBtn.textContent="Clear checklist for selected";this._changeDatasetSelectedBtn.textContent="Change dataset for selected";this._createProjectSelectedBtn.textContent="Transform selected"}this._selectAllCheckbox.checked=this._selectionState.allSelected;console.log("renderCheckboxCount",this._selectionState)}downloadSelected(){var _a;if(!this._dataTable)return;if(null===(_a=this._downloadSelectedBtn)||void 0===_a?void 0:_a.classList.contains("disabled"))return;let filtered=this._selectionState.allSelected?[]:this._selectionState.items.map(i=>i.id);location.href=`/v1/api/organizations/${this._studioApi.organizationId}/data/download?dataIds=`+encodeURIComponent(JSON.stringify(filtered))+"&filter="+encodeURIComponent(this._currentFilter?this._currentFilter.value:"")+(this._currentDataset?"&dataset="+encodeURIComponent(this._currentDataset.value):"")}async deleteSelected(){var _a;if(!this._dataTable)return;if(null===(_a=this._deleteSelectedBtn)||void 0===_a?void 0:_a.classList.contains("disabled"))return;if(!await notify_36.Notify.confirm("Delete selected items?","Are you sure you want to delete the selected items? This will remove the files from the underlying bucket!","Delete items","warning","warning"))return;let filtered=this._selectionState.allSelected?[]:this._selectionState.items.map(i=>i.id);this._deleteItemsJobRunnerTitle&&(this._deleteItemsJobRunnerTitle.textContent="Deleting data");let jobId=await this._deleteItemsJobRunner.startJob(this._studioApi.data.deleteOrganizationDataItems(this._studioApi.organizationId,JSON.stringify(filtered),this._currentDataset?this._currentDataset.value:"",this._currentFilter?this._currentFilter.value:""));this._deleteItemsJobRunner.on("finished",(id,success)=>{id===jobId&&success&&$(this._deleteItemsForm.modal).on("hidden.bs.modal",()=>location.reload())});$(this._deleteItemsForm.modal).modal()}async changeDatasetSelected(){var _a;if(!this._dataTable)return;if(null===(_a=this._changeDatasetSelectedBtn)||void 0===_a?void 0:_a.classList.contains("disabled"))return;let p=await notify_36.Notify.prompt("Change dataset","Enter the new name for the dataset, this changes the dataset for all selected items.","Change dataset","","question","info");if(!p)return;this._deleteItemsJobRunnerTitle&&(this._deleteItemsJobRunnerTitle.textContent="Changing dataset");let filtered=this._selectionState.allSelected?[]:this._selectionState.items.map(i=>i.id),jobId=await this._deleteItemsJobRunner.startJob(this._studioApi.data.changeDatasetOrganizationDataItems(this._studioApi.organizationId,JSON.stringify(filtered),{dataset:p},this._currentDataset?this._currentDataset.value:"",this._currentFilter?this._currentFilter.value:""));this._deleteItemsJobRunner.on("finished",(id,success)=>{id===jobId&&success&&$(this._deleteItemsForm.modal).on("hidden.bs.modal",()=>location.reload())});$(this._deleteItemsForm.modal).modal()}async clearChecklistSelected(){var _a;if(!this._dataTable)return;if(null===(_a=this._clearChecklistSelectedBtn)||void 0===_a?void 0:_a.classList.contains("disabled"))return;if(!await notify_36.Notify.confirm("Clear checklist?","Are you sure you want to clear the checklist for the selected items? This is not revokable!","Clear checklist","warning","warning"))return;this._deleteItemsJobRunnerTitle&&(this._deleteItemsJobRunnerTitle.textContent="Clearing checklist");let filtered=this._selectionState.allSelected?[]:this._selectionState.items.map(i=>i.id),jobId=await this._deleteItemsJobRunner.startJob(this._studioApi.data.clearChecklistOrganizationDataItems(this._studioApi.organizationId,JSON.stringify(filtered),this._currentDataset?this._currentDataset.value:"",this._currentFilter?this._currentFilter.value:""));this._deleteItemsJobRunner.on("finished",(id,success)=>{id===jobId&&success&&$(this._deleteItemsForm.modal).on("hidden.bs.modal",()=>location.reload())});$(this._deleteItemsForm.modal).modal()}createProjectSelected(){var _a;if(!this._dataTable||!this._currentFilter)return;if(null===(_a=this._createProjectSelectedBtn)||void 0===_a?void 0:_a.classList.contains("disabled"))return;let filtered=this._selectionState.allSelected?[]:this._selectionState.items.map(i=>i.id),filter="";this._currentDataset&&this._currentDataset.value&&(filter=`dataset = '${this._currentDataset.value.replace(/'/g,"\\'")}'`);if(filtered.length>0){filter&&(filter+=" AND ");filter+="id IN ("+filtered.join(",")+")"}if(this._currentFilter.value){filter&&(filter+=" AND ");filter+=this._currentFilter.value}location.href=`/organization/${this._studioApi.organizationId}/create-project/new?filter=`+encodeURIComponent(filter)}async onAddDataItemSubmit(){this._addDataItemForm.name.classList.remove("is-invalid");this._addDataItemForm.bucket.classList.remove("is-invalid");this._addDataItemForm.dataset.classList.remove("is-invalid");this._addDataItemForm.newDataset.classList.remove("is-invalid");this._addDataItemForm.metadata.classList.remove("is-invalid");let valid=!0;if(!this._addDataItemForm.name.value){this._addDataItemForm.name.classList.add("is-invalid");valid=!1}if(!this._addDataItemForm.bucket.value){this._addDataItemForm.bucket.classList.add("is-invalid");valid=!1}if(""===this._addDataItemForm.dataset.value&&!this._addDataItemForm.newDataset.value){this._addDataItemForm.newDataset.classList.add("is-invalid");valid=!1}try{JSON.parse(this._addDataItemForm.metadata.value)}catch(ex){this._addDataItemForm.metadata.classList.add("is-invalid");valid=!1}if(!valid)return;let origText=this._addDataItemForm.submit.textContent;try{this._addDataItemForm.submit.classList.add("disabled");this._addDataItemForm.submit.disabled=!0;this._addDataItemForm.submit.innerHTML='<i class="fas fa-spinner spin-animation mr-2"></i> <span class="uploader-status">Uploading...</span>';let status=this._addDataItemForm.submit.querySelector(".uploader-status");this._addDataItemForm.cancelSubmit.style.display="";if((this._addDataItemForm.files.files||[]).length>1e6)throw new Error("You can upload a maximum of 1,000,000 files through the UI");await new Promise((res,rej)=>{let x=new XMLHttpRequest,fd=new FormData;fd.append("name",this._addDataItemForm.name.value);fd.append("bucketName",this._addDataItemForm.bucket.value);fd.append("dataset",this._addDataItemForm.dataset.value?this._addDataItemForm.dataset.value:this._addDataItemForm.newDataset.value);fd.append("metadata",this._addDataItemForm.metadata.value);for(let f of this._addDataItemForm.files.files||[])fd.append("files[]",f);this._addDataItemForm.bucketPath.value&&fd.append("bucketPath",this._addDataItemForm.bucketPath.value);let finished=!1;x.upload.onprogress=e=>{if(finished)return;let progress=Math.floor(e.loaded/e.total*100);status.textContent=progress<100?`Uploading... (${progress}%)`:"Finalizing upload..."};this._addDataItemForm.cancelSubmit.onclick=ev=>{ev.preventDefault();x.abort();rej("Request was canceled")};x.onload=()=>{finished=!0;if(200!==x.status)return rej(x.responseText||x.statusText);try{let v=JSON.parse(x.responseText);return v.success?res():rej(v.error)}catch(ex2){return rej(x.responseText||x.statusText)}};x.onerror=rej;x.open("POST","/v1/api/organizations/"+this._studioApi.organizationId+"/data/add");x.send(fd)});$(this._addDataItemForm.modal).modal("hide");location.href=location.pathname+(location.search||"?")+"&addedDataItem="+encodeURIComponent(this._addDataItemForm.name.value)}catch(ex2){let ex=ex2;await notify_36.Notify.alert("Failed to add data item",notify_36.Notify.extractMsg(ex),"danger")}finally{this._addDataItemForm.submit.textContent=origText;this._addDataItemForm.submit.disabled=!1;this._addDataItemForm.cancelSubmit.style.display="none";this._addDataItemForm.submit.classList.remove("disabled")}}async onAddDataFolderSubmit(){this._addDataFolderForm.step1.bucket.classList.remove("is-invalid");this._addDataFolderForm.step1.dataset.classList.remove("is-invalid");this._addDataFolderForm.step1.bucketPath.classList.remove("is-invalid");let valid=!0;if(!this._addDataFolderForm.step1.bucket.value){this._addDataFolderForm.step1.bucket.classList.add("is-invalid");valid=!1}if(!this._addDataFolderForm.step1.dataset.value){this._addDataFolderForm.step1.dataset.classList.add("is-invalid");valid=!1}if(!this._addDataFolderForm.step1.bucketPath.value){this._addDataFolderForm.step1.bucketPath.classList.add("is-invalid");valid=!1}if(!valid)return;let origText=this._addDataFolderForm.step1.button.textContent;try{this._addDataFolderForm.step1.button.innerHTML='<i class="fas fa-spinner spin-animation mr-2"></i> Adding data...';let jobId=await this._addFolderJobRunner.startJob(this._studioApi.data.addOrganizationDataFolder(this._studioApi.organizationId,{bucketId:Number(this._addDataFolderForm.step1.bucket.value),bucketPath:this._addDataFolderForm.step1.bucketPath.value,dataset:this._addDataFolderForm.step1.dataset.value,metadataDataset:this._addDataFolderForm.step1.metadata.value?this._addDataFolderForm.step1.metadata.value:void 0}));this._addDataFolderForm.step1.body.style.display="none";this._addDataFolderForm.step2.body.style.display="";this._addDataFolderForm.step1.button.style.display="none";this._addDataFolderForm.step2.button.style.display="";this._addFolderJobRunner.on("finished",(id,success)=>{id===jobId&&success&&$(this._addDataFolderForm.modal).on("hidden.bs.modal",()=>location.reload())})}catch(ex2){let ex=ex2;await notify_36.Notify.alert("Failed to add data folder",notify_36.Notify.extractMsg(ex),"danger")}finally{this._addDataFolderForm.step1.button.textContent=origText;this._addDataFolderForm.step1.button.disabled=!1;this._addDataFolderForm.step1.button.classList.remove("disabled")}}async renderPage(page){var _a;console.log("renderPage",page);if(!this._dataTable)return console.warn("No data table...");let tbody=this._dataTable.querySelector("tbody");if(!tbody)return;let renderPageId=++this._renderPageId,samples=await this._studioApi.data.listOrganizationData(this._studioApi.organizationId,this._currentDataset?this._currentDataset.value:"",this._currentFilter?this._currentFilter.value:"",this._pageSize,(page-1)*this._pageSize);if(renderPageId===this._renderPageId){if(!samples.body||!samples.body.success)throw new Error(samples.body&&samples.body.error||samples.response.responseText);tbody.innerHTML="";this._dataTable.classList.toggle("data-has-check",null===(_a=samples.body.data)||void 0===_a?void 0:_a.some(d=>"ei_check"in d.metadata));for(let v of samples.body.data||[]){let tr=this.renderRow(v);tr.dataset.page=page.toString();tr.classList.add("table-page-"+page);tbody.appendChild(tr)}}}renderRow(row){let newTr=this._rowDataTemplate.cloneNode(!0);newTr.dataset.name=row.name;newTr.dataset.id=row.id.toString();newTr.dataset.dataset=row.dataset;newTr.dataset.fileCount=row.totalFileCount.toString();newTr.dataset.bucketUrl=row.fullBucketPath;let aqCheckbox=newTr.querySelector(".org-data-checkbox input"),aqName=newTr.querySelector(".org-data-name"),aqDataset=newTr.querySelector(".org-data-dataset"),aqFiles=newTr.querySelector(".org-data-files"),aqMetadata=newTr.querySelector(".org-data-label"),aqCheck=newTr.querySelector(".org-data-check"),aqCreated=newTr.querySelector(".org-data-created"),aqDownload=newTr.querySelector(".org-data-download-link");aqCheckbox&&(this._selectionState.items.find(i=>i.id===row.id)||this._selectionState.allSelected?aqCheckbox.checked=!0:aqCheckbox.checked=!1);aqName&&(aqName.textContent=aqName.title=row.name);aqDataset&&(aqDataset.textContent=aqDataset.title=row.dataset);aqFiles&&(aqFiles.textContent=aqFiles.title=row.totalFileCount+" "+(1===row.totalFileCount?"file":"files")+" ("+this.bytesToSize(row.totalFileSize)+")");if(aqMetadata){let metadataStrTitle=Object.keys(row.metadata).map(k=>k+": "+row.metadata[k]).join("\n"),metadataStr=Object.keys(row.metadata).map(k=>k+": "+row.metadata[k]).join(", ");aqMetadata.textContent=metadataStr;aqMetadata.title=metadataStrTitle}if(aqCreated){aqCreated.textContent=global_ui_10.GlobalUI.getFriendlyDateString(row.created);aqCreated.dataset.friendlyDate=row.created.toString()}if(aqDownload){aqDownload.href=`/v1/api/organizations/${this._studioApi.organizationId}/data/${row.id}/download`;this._currentFilter&&(aqDownload.href+=`?filter=${this._currentFilter.value}`)}if(aqCheck){let hasCheck=1===Number(row.metadata.ei_check)||0===Number(row.metadata.ei_check),check=1===Number(row.metadata.ei_check);hasCheck?aqCheck.innerHTML=check?'<i class="fas fa-check text-green"></i>':'<i class="fas fa-times text-danger"></i>':aqCheck.textContent="-"}this.bindDataRowActions(newTr);return newTr}disableUI(){this._bulkMetadataEls.step1.button.classList.add("disabled");this._bulkMetadataEls.step1.button.textContent="Updating metadata...";$("#bulk-metadata-modal").modal();this.switchBulkMetadata("step2")}async startBulkMetadata(){this._studioApi.analytics.event("job-start",{event_category:"update-metadata"});if(1===(this._bulkMetadataEls.step1.csvFile.files||[]).length){this.disableUI();this._bulkMetadataCurrJobId=await this._bulkMetadataJobRunner.startJob(this._studioApi.data.organizationBulkUpdateMetadata(this._studioApi.organizationId,this._bulkMetadataEls.step1.dataset.value,(this._bulkMetadataEls.step1.csvFile.files||[])[0]));this._bulkMetadataJobRunner.on("finished",this.jobFinished.bind(this))}else this._bulkMetadataEls.step1.csvFile.classList.add("is-invalid")}async jobFinished(id,success){if(id===this._bulkMetadataCurrJobId){this._studioApi.analytics.event("job-finish-"+(success?"success":"fail"),{event_category:"update-metadata"});this._bulkMetadataEls.step1.button.classList.remove("disabled");this._bulkMetadataEls.step1.button.textContent=this._bulkMetadataOrigText;success&&(this._bulkMetadataJobCompleted=!0)}}async checkForRunningBulkMetadataProcess(){let job=await this._bulkMetadataJobRunner.getActiveJob(WebSocketTypes_14.JOB_KEY_PREFIX.orgAddFolder);if(job){this._bulkMetadataCurrJobId=job.id;this.disableUI();await this._bulkMetadataJobRunner.resumeJob(job.id);this._bulkMetadataJobRunner.on("finished",this.jobFinished.bind(this))}}switchBulkMetadata(step){this._bulkMetadataEls.step1.body.style.display="none";this._bulkMetadataEls.step1.button.style.display="none";this._bulkMetadataEls.step2.body.style.display="none";this._bulkMetadataEls.step2.button.style.display="none";if("step1"===step){this._bulkMetadataEls.step1.body.style.display="";this._bulkMetadataEls.step1.button.style.display=""}if("step2"===step){this._bulkMetadataEls.step2.body.style.display="";this._bulkMetadataEls.step2.button.style.display=""}}updateChecksDetailCard(currMetadata){if(Object.keys(currMetadata).some(k=>k.startsWith("ei_check_"))){this._detailCard.checksSection.style.display="";this._detailCard.checksTbody.innerHTML="";for(let k of Object.keys(currMetadata).filter(x=>x.startsWith("ei_check_"))){let name=k.replace("ei_check_",""),checkMark=1===Number(currMetadata[k])?'<i class="fas fa-check text-green"></i>':0===Number(currMetadata[k])?'<i class="fas fa-times text-red"></i>':"-",row=document.createElement("tr"),checkCell=document.createElement("td");checkCell.classList.add("checks-check");checkCell.innerHTML=checkMark;let nameCell=document.createElement("td");nameCell.textContent=name;row.appendChild(checkCell);row.appendChild(nameCell);this._detailCard.checksTbody.appendChild(row)}}else this._detailCard.checksSection.style.display="none"}}}));define("client/organization/components/notification-settings",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.NotificationSettings=void 0;exports.NotificationSettings=class{constructor(){this._els={notificationSaveBtn:document.querySelector("#save-notification-settings"),notificationSettingsModal:document.querySelector("#notification-settings-modal"),notificationSelectAllCheckbox:document.querySelector("#notification-settings-check-all-users")};this._els.notificationSelectAllCheckbox.onchange=ev=>{let checked=this._els.notificationSelectAllCheckbox.checked;Array.from(document.querySelectorAll("input[name^='input-email-recipient-uids[']")).forEach(e=>{e.checked=checked})};for(let tr of Array.from(this._els.notificationSettingsModal.querySelectorAll("tbody tr")))tr.onclick=ev=>{let checkbox=tr.querySelector('*[name="input-email-recipient-uids[]"]');checkbox&&"INPUT"!==(ev.target&&ev.target.tagName)&&(checkbox.checked=!checkbox.checked)}}show(ids,callback){Array.from(document.querySelectorAll("input[name^='input-email-recipient-uids[']")).forEach(e=>{e.checked=!1});for(let id of ids){let checkbox=this._els.notificationSettingsModal.querySelector('tr[data-id="'+id+'"] input[type="checkbox"]');checkbox&&(checkbox.checked=!0)}this._els.notificationSaveBtn.onclick=async ev=>{ev.preventDefault();let newIds=Array.from(document.querySelectorAll("input[name^='input-email-recipient-uids[']:checked")).map(n=>Number(n.value)),origText=this._els.notificationSaveBtn.textContent;try{this._els.notificationSaveBtn.textContent="Saving notification settings...";this._els.notificationSaveBtn.classList.add("disabled");await callback(newIds);$(this._els.notificationSettingsModal).modal("hide")}finally{this._els.notificationSaveBtn.textContent=origText;this._els.notificationSaveBtn.classList.remove("disabled")}};$(this._els.notificationSettingsModal).modal()}getUsers(){return Array.from(this._els.notificationSettingsModal.querySelectorAll("tbody tr")).map(t=>({id:Number(t.dataset.id),name:t.dataset.name}))}}}));define("client/organization/pages/organization-create-project-ui",["require","exports","client/notify","client/api-definition/index","client/organization/components/notification-settings"],(function(require,exports,notify_37,api_definition_7,notification_settings_1){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationCreateProjectUi=void 0;exports.OrganizationCreateProjectUi=class{constructor(studioApi){this._formEls={filter:document.querySelector("#input-dataset-filter"),name:document.querySelector("#input-name"),project:document.querySelector("#input-project"),dataset:document.querySelector("#input-dataset"),newProjectNameRow:document.querySelector("#new-project-name-row"),newDatasetNameRow:document.querySelector("#new-dataset-name-row"),newProjectName:document.querySelector("#input-new-project"),newDatasetName:document.querySelector("#input-new-dataset"),transformationBlock:document.querySelector("#input-transformation-block"),category:document.querySelector("#input-category"),projectSection:document.querySelector("#input-project-section"),datasetSection:document.querySelector("#input-dataset-section"),categorySection:document.querySelector("#input-category-section"),importDataIntoSection:document.querySelector("#import-data-into-section"),uploadTypeProject:document.querySelector("#input-upload-type-project"),uploadTypeDataset:document.querySelector("#input-upload-type-dataset"),labelSection:document.querySelector("#input-label-section"),labelChoiceFilename:document.querySelector("#input-label-filename"),labelChoiceFree:document.querySelector("#input-label-free"),labelText:document.querySelector("#input-label-free-text"),parallelJobs:document.querySelector("#input-parallel"),emailRecipients:document.querySelector("#input-emailRecipientUids"),emailRecipientsLabel:document.querySelector("#input-emailRecipientUids-labels"),emailRecipientsEdit:document.querySelector("#input-emailRecipientUids-edit")};this._selectedFilesEls={loader:document.querySelector("#selected-files-loader"),noSelectedFiles:document.querySelector("#no-selected-files"),table:document.querySelector("#cp-selected-files-table"),header:document.querySelector("#selected-files-header"),truncated:document.querySelector("#selected-files-truncated")};this._selectedFilesIx=0;this._selectedFilesCache={};this._studioApi=studioApi;this._formEls.filter.oninput=()=>{this._formEls.filter.classList.remove("is-invalid")};this._formEls.filter.onchange=()=>{this.loadSelectedFiles()};this._formEls.name.oninput=()=>this._formEls.name.classList.remove("is-invalid");this._formEls.newProjectName.oninput=()=>this._formEls.newProjectName.classList.remove("is-invalid");this._formEls.newDatasetName.oninput=()=>this._formEls.newDatasetName.classList.remove("is-invalid");this._formEls.transformationBlock.oninput=()=>this._formEls.transformationBlock.classList.remove("is-invalid");this._formEls.labelText.oninput=()=>this._formEls.labelText.classList.remove("is-invalid");this._formEls.project.oninput=()=>{this._formEls.newProjectNameRow.style.display="new-project"===this._formEls.project.value?"block":"none";this._formEls.project.classList.remove("is-invalid")};this._formEls.dataset.oninput=()=>{this._formEls.newDatasetNameRow.style.display="new-dataset"===this._formEls.dataset.value?"block":"none";this._formEls.dataset.classList.remove("is-invalid")};this._formEls.labelChoiceFree.oninput=()=>{this._formEls.labelChoiceFree.checked&&this._formEls.labelText.focus()};this._formEls.labelChoiceFilename.oninput=()=>{this._formEls.labelText.classList.remove("is-invalid")};this._formEls.labelText.onfocus=()=>{this._formEls.labelChoiceFree.checked=!0};this._formEls.newProjectNameRow.style.display="new-project"===this._formEls.project.value?"block":"none";this._formEls.newDatasetNameRow.style.display="new-dataset"===this._formEls.dataset.value?"block":"none";this._buildButton=document.querySelector("#build");this._buildButton.onclick=ev=>{ev.preventDefault();this.startBuilding()};this._copyButton=document.querySelector("#copy-as-pipeline");this._copyButton.onclick=ev=>{ev.preventDefault();this.copyAsPipelineStep()};let transformationBlockId=location.search.slice(1).split("&").map(x=>{let p=x.split("=");return{key:p[0],value:decodeURIComponent(p[1])}}).find(x=>"transformationBlockId"===x.key);if(transformationBlockId){this._formEls.transformationBlock.value=transformationBlockId.value;this._formEls.name.focus()}this._notificationSettings=new notification_settings_1.NotificationSettings;this._formEls.emailRecipientsEdit.onclick=async ev=>{ev.preventDefault();this._notificationSettings.show(JSON.parse(this._formEls.emailRecipients.value),async emailRecipientUids=>{const users=this._notificationSettings.getUsers();this._formEls.emailRecipients.value=JSON.stringify(emailRecipientUids);this._formEls.emailRecipientsLabel.textContent=emailRecipientUids.length>0?emailRecipientUids.map(x=>{var _a;return null===(_a=users.find(y=>y.id===x))||void 0===_a?void 0:_a.name}).join(", "):"No users selected"})};this._studioApi.currentUser?this._formEls.emailRecipients.value=JSON.stringify([this._studioApi.currentUser.id]):this._formEls.emailRecipients.value=JSON.stringify([]);this._formEls.transformationBlock.onchange=()=>this.checkUploadType();this._formEls.uploadTypeDataset.onchange=()=>this.checkUploadType();this._formEls.uploadTypeProject.onchange=()=>this.checkUploadType();this.checkUploadType();this.loadSelectedFiles();window.history.replaceState(null,"",window.location.pathname)}async startBuilding(){try{let{valid:valid,req:req}=this.validateForm();if(!valid||!req)return;this._buildButton.classList.add("disabled");this._buildButton.textContent="Creating job...";let p=await this._studioApi.createProject.organizationCreateProject(this._studioApi.organizationId,req);if(!p.body||!p.body.success)throw p.body&&p.body.error||p.response.responseText;location.href=`/organization/${this._studioApi.organizationId}/create-project/${p.body.createProjectId}`+"?createdJob=1"}catch(ex2){let ex=ex2;this._buildButton.classList.remove("disabled");await notify_37.Notify.alert("Failed to create project job",notify_37.Notify.extractMsg(ex),"error")}}async copyAsPipelineStep(){try{let{valid:valid,req:req,transformOperatesOn:transformOperatesOn}=this.validateForm();if(!valid||!req)return;delete req.emailRecipientUids;req.outputDatasetName||delete req.outputDatasetName;"project"!==req.uploadType&&delete req.category;"standalone"===transformOperatesOn&&delete req.filter;let step=JSON.stringify(req,null,4);await navigator.clipboard.writeText(step);notify_37.Notify.notify("","Copied as pipeline step","top","center","far fa-check-circle","success")}catch(ex2){let ex=ex2;await notify_37.Notify.alert("Failed to copy as pipeline step",notify_37.Notify.extractMsg(ex),"error")}}validateForm(){let transformOperatesOn=this._formEls.transformationBlock.options[this._formEls.transformationBlock.selectedIndex].dataset.operatesOn;this._formEls.filter.classList.remove("is-invalid");this._formEls.newProjectName.classList.remove("is-invalid");this._formEls.name.classList.remove("is-invalid");this._formEls.newDatasetName.classList.remove("is-invalid");this._formEls.transformationBlock.classList.remove("is-invalid");this._formEls.labelText.classList.remove("is-invalid");let category,valid=!0;if(""===this._formEls.name.value){this._formEls.name.classList.add("is-invalid");valid=!1}if("standalone"!==transformOperatesOn){if(""===this._formEls.filter.value){this._formEls.filter.classList.add("is-invalid");valid=!1}if(this._formEls.uploadTypeProject.checked){if("new-project"===this._formEls.project.value&&this._formEls.newProjectName.value.length<2){this._formEls.newProjectName.classList.add("is-invalid");valid=!1}if(!this._formEls.project.value){this._formEls.project.classList.add("is-invalid");valid=!1}if(this._formEls.labelChoiceFree.checked&&!this._formEls.labelText.value){this._formEls.labelText.classList.add("is-invalid");valid=!1}}else{if(!this._formEls.transformationBlock.value){this._formEls.transformationBlock.classList.add("is-invalid");valid=!1}if("new-dataset"===this._formEls.dataset.value&&this._formEls.newDatasetName.value.length<2){this._formEls.newDatasetName.classList.add("is-invalid");valid=!1}}if(isNaN(Number(this._formEls.parallelJobs.value))||Number(this._formEls.parallelJobs.value)<=0){this._formEls.parallelJobs.classList.add("is-invalid");valid=!1}}if(!valid)return{valid:!1};if(!api_definition_7.OrganizationCreateProjectCategoryEnumValues.includes(this._formEls.category.value))throw new Error("Invalid category "+this._formEls.category.value);category=this._formEls.category.value;let projectId=this._formEls.uploadTypeProject.checked?Number(this._formEls.project.value):void 0,uploadType=this._formEls.uploadTypeProject.checked?"project":"dataset",emailRecipientUids=JSON.parse(this._formEls.emailRecipients.value);return{valid:!0,req:{filter:this._formEls.filter.value,name:this._formEls.name.value,category:category,uploadType:uploadType,transformationBlockId:this._formEls.transformationBlock.value?Number(this._formEls.transformationBlock.value):void 0,projectId:projectId&&!isNaN(projectId)?projectId:void 0,newProjectName:this._formEls.uploadTypeProject.checked&&"new-project"===this._formEls.project.value?this._formEls.newProjectName.value:void 0,outputDatasetName:this._formEls.uploadTypeDataset.checked?"new-dataset"===this._formEls.dataset.value?this._formEls.newDatasetName.value:this._formEls.dataset.value:void 0,label:this._formEls.labelChoiceFree.checked?this._formEls.labelText.value:void 0,emailRecipientUids:Array.isArray(emailRecipientUids)&&emailRecipientUids.length>0&&"standalone"!==transformOperatesOn?emailRecipientUids:void 0,transformationParallel:"standalone"!==transformOperatesOn?Number(this._formEls.parallelJobs.value):void 0},transformOperatesOn:transformOperatesOn}}async loadSelectedFiles(){try{let filter=this._formEls.filter.value;if(!filter){this._selectedFilesEls.noSelectedFiles.style.display="";this._selectedFilesEls.table.style.display="none";this._selectedFilesEls.header.textContent="Selected files";return}let body,ix=++this._selectedFilesIx;this._selectedFilesEls.loader.style.display="";if(this._selectedFilesCache[filter])body=this._selectedFilesCache[filter];else{let r=await this._studioApi.data.listOrganizationFiles(this._studioApi.organizationId,void 0,filter,20);if(!r.body||!r.body.success)throw r.body.error||r.response.responseText;if(ix!==this._selectedFilesIx)return;this._selectedFilesCache[filter]=body=r.body}if(0===body.totalFileCount){this._selectedFilesEls.noSelectedFiles.style.display="";this._selectedFilesEls.table.style.display="none";this._selectedFilesEls.header.textContent="Selected files"}else{let fileTxt=1===body.totalFileCount?"file":"files",itemTxt=1===body.totalDataItemCount?"item":"items";this._selectedFilesEls.noSelectedFiles.style.display="none";this._selectedFilesEls.table.style.display="";this._selectedFilesEls.header.textContent=`Selected files (${body.totalDataItemCount.toLocaleString()} ${itemTxt}, `+`${body.totalFileCount.toLocaleString()} ${fileTxt}, `+`${this.bytesToSize(body.totalFileSize)})`}let tbody=this._selectedFilesEls.table.querySelector("tbody");tbody.innerHTML="";let files=[];for(let d of body.data)for(let f of d.files)files.push({data_name:d.name,file_name:f.name,file_size:this.bytesToSize(f.size)});files.length>20&&(files=files.slice(0,20));for(let f of files){let tr=document.createElement("tr"),di=document.createElement("td");di.textContent=f.data_name;let fn=document.createElement("td");fn.textContent=f.file_name;let fs=document.createElement("td");fs.textContent=f.file_size;tr.appendChild(di);tr.appendChild(fn);tr.appendChild(fs);tbody.appendChild(tr)}if(body.totalFileCount!==files.length){this._selectedFilesEls.truncated.style.display="";this._selectedFilesEls.truncated.textContent="Only showing first "+files.length+" results"}else this._selectedFilesEls.truncated.style.display="none"}catch(ex2){let ex=ex2;notify_37.Notify.alert("Failed to load selected files",notify_37.Notify.extractMsg(ex),"error")}finally{this._selectedFilesEls.loader.style.display="none"}}bytesToSize(bytes){if(0===bytes)return"0 Bytes";let i=Number(Math.floor(Math.log(bytes)/Math.log(1024)));return Math.round(bytes/Math.pow(1024,i))+" "+["Bytes","KB","MB","GB","TB"][i]}checkUploadType(){this._formEls.projectSection.style.display="none";this._formEls.categorySection.style.display="none";this._formEls.datasetSection.style.display="none";this._formEls.labelSection.style.display="none";if(this._formEls.uploadTypeDataset.checked)this._formEls.datasetSection.style.display="";else if(this._formEls.uploadTypeProject.checked){this._formEls.projectSection.style.display="";this._formEls.categorySection.style.display="";this._formEls.labelSection.style.display=""}let transformOperatesOn=this._formEls.transformationBlock.options[this._formEls.transformationBlock.selectedIndex].dataset.operatesOn;this._formEls.importDataIntoSection.style.display="standalone"===transformOperatesOn?"none":""}}}));define("client/organization/pages/organization-dashboard-ui",["require","exports","client/notify","client/project/components/job-runner","shared/WebSocketTypes","client/readme-ui"],(function(require,exports,notify_38,job_runner_11,WebSocketTypes_15,readme_ui_2){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationDashboardUi=void 0;exports.OrganizationDashboardUi=class{constructor(studioApi){this._refreshJobCompleted=!1;this._refreshEls={body:document.querySelector("#refresh-modal .job-runner-output"),button:document.querySelector("#refresh-modal .job-runner-cancel")};this._studioApi=studioApi;let orgName=document.querySelector("#dashboard-organization-name");orgName&&(orgName.onclick=async ev=>{ev.preventDefault();if(!orgName)return;let oldName=(orgName.textContent||"").trim(),i=orgName.querySelector("i");if(!i.classList.contains("fa-spinner")){this._studioApi.analytics.event("click",{event_category:"dashboard",event_label:"change-organization-name"});try{let v=await notify_38.Notify.prompt("New name",'Enter a new name for "'+oldName+'"',"Rename",oldName,"question","info");if(v){i.classList.remove("fa-edit");i.classList.add("fa-spinner");let d=await this._studioApi.organizations.updateOrganization(this._studioApi.organizationId,{name:v});if(!d.body||d.body.error||!d.body.success)throw new Error(d.body&&d.body.error||d.response.responseText);orgName.textContent=v;orgName.appendChild(i)}}catch(ex2){let ex=ex2;notify_38.Notify.alert("Failed to update organization name",notify_38.Notify.extractMsg(ex),"danger")}finally{i.classList.add("fa-edit");i.classList.remove("fa-spinner")}}});let refreshDataset=document.querySelector("#refresh-data");refreshDataset&&(refreshDataset.onclick=async ev=>{ev.preventDefault();if(!refreshDataset)return;let text=refreshDataset.textContent;try{if(await this.checkForRunningRefreshProcess())return;refreshDataset.classList.add("disabled");if(!await notify_38.Notify.confirm("Refresh datasets?","Are you sure you want to refresh the datasets? This will HEAD all underlying buckets for updated files.","Refresh datasets","info","info"))return;refreshDataset.textContent="Refreshing datasets...";await this.startRefresh()}catch(ex2){let ex=ex2;notify_38.Notify.alert("Failed to clear transformation cache",notify_38.Notify.extractMsg(ex),"danger")}finally{refreshDataset.classList.remove("disabled");refreshDataset.textContent=text}});let saveExperimentsBtn=document.querySelector("#save-experiments");saveExperimentsBtn&&(saveExperimentsBtn.onclick=async ev=>{if(!saveExperimentsBtn)return;ev.preventDefault();let origText=saveExperimentsBtn.textContent;try{saveExperimentsBtn.classList.add("disabled");saveExperimentsBtn.textContent="Saving experiments...";let experiments=[],allExperiments=Array.from(document.querySelectorAll(".experiment-checkbox"));for(let x of allExperiments){let type=x.dataset.type;x.checked&&type&&experiments.push(type)}let req={experiments:experiments},d=await this._studioApi.organizations.updateOrganization(this._studioApi.organizationId,req);if(!d.body||!d.body.success)throw d.body&&d.body.error||d.response.responseText;await notify_38.Notify.alert("Saved organization options","","success");location.reload()}catch(ex2){let ex=ex2;await notify_38.Notify.alert("Failed to save organization options",notify_38.Notify.extractMsg(ex),"danger")}finally{saveExperimentsBtn.classList.remove("disabled");saveExperimentsBtn.textContent=origText}});let uploadLogoBtn=document.querySelector("#upload-logo-btn");uploadLogoBtn&&(uploadLogoBtn.onclick=ev=>{ev.preventDefault();let input=document.createElement("input");input.type="file";input.accept="image/png,image/jpeg";input.onchange=async e=>{if(!input.files)return;if(!uploadLogoBtn)return;let file=input.files[0],origText=uploadLogoBtn.textContent;try{uploadLogoBtn.textContent="Uploading logo...";uploadLogoBtn.classList.add("disabled");let d=await this._studioApi.organizations.uploadOrganizationLogo(this._studioApi.organizationId,file);if(!d.body||!d.body.success)throw d.body&&d.body.error||d.response.responseText;location.href=`/organization/${this._studioApi.organizationId}?updatedlogo=1`}catch(ex2){let ex=ex2;await notify_38.Notify.alert("Failed to upload logo",notify_38.Notify.extractMsg(ex),"danger")}finally{uploadLogoBtn.textContent=origText;uploadLogoBtn.classList.remove("disabled")}};input.click()});let refreshJobSection=document.querySelector("#refresh-modal .job-runner");this._refreshJobRunner=new job_runner_11.JobRunner(this._studioApi,refreshJobSection);$("#refresh-modal").on("hidden.bs.modal",()=>{this._refreshJobCompleted&&location.reload()});this._readmeUi=new readme_ui_2.ReadmeUI(studioApi);this._readmeUi.bindReadmeUi();let s=location.search;if(s.indexOf("updatedlogo=1")>-1){s=s.replace("updatedlogo=1","");window.history.pushState("","",location.pathname+s);notify_38.Notify.notify("","Updated logo","top","center","far fa-check-circle","success")}}disableUI(){$("#refresh-modal").modal()}async startRefresh(){this._studioApi.analytics.event("job-start",{event_category:"refresh-datasets"});this.disableUI();this._refreshCurrJobId=await this._refreshJobRunner.startJob(this._studioApi.data.refreshOrganizationData(this._studioApi.organizationId,void 0));this._refreshJobRunner.on("finished",this.jobFinished.bind(this))}async jobFinished(id,success){if(id===this._refreshCurrJobId){this._studioApi.analytics.event("job-finish-"+(success?"success":"fail"),{event_category:"refresh-dataset"});success&&(this._refreshJobCompleted=!0)}}async checkForRunningRefreshProcess(){let job=await this._refreshJobRunner.getActiveJob(WebSocketTypes_15.JOB_KEY_PREFIX.orgRefreshDatasets);if(!job)return!1;this._refreshCurrJobId=job.id;this.disableUI();await this._refreshJobRunner.resumeJob(job.id);this._refreshJobRunner.on("finished",this.jobFinished.bind(this));return!0}}}));define("client/project/components/add-device-wizard",["require","exports","client/notify"],(function(require,exports,notify_39){Object.defineProperty(exports,"__esModule",{value:!0});exports.AddDeviceWizard=void 0;exports.AddDeviceWizard=class{constructor(studioApi,deviceApi,gitCommitHash){this._addDeviceWizard={step1:document.querySelector("#add-device-modal-step1"),step2:document.querySelector("#add-device-modal-step2"),step3:document.querySelector("#add-device-modal-step3"),qrLink:document.querySelector("#phone-qr-link"),qrImage:document.querySelector("#phone-qr-image"),showQrStep:document.querySelector("#show-phone-qr-link"),deviceConnectedTitle:document.querySelector("#device-connected-title")};this._studioApi=studioApi;this._deviceApi=deviceApi;Array.from(document.querySelectorAll('*[data-target="#add-device-modal"]')).forEach(_link=>{_link.addEventListener("click",()=>{if(!this._addDeviceWizard.step1||!this._addDeviceWizard.step2||!this._addDeviceWizard.step3)return console.warn("Add device modal link clicked, but step1/step2/step3 elements are missing");this._addDeviceWizard.step1.style.display="";this._addDeviceWizard.step2.style.display="none";this._addDeviceWizard.step3.style.display="none"})});this._deviceApi.on("connected",ev=>{if(!(this._addDeviceWizard.step1&&this._addDeviceWizard.step2&&this._addDeviceWizard.step3&&this._addDeviceWizard.deviceConnectedTitle))return console.warn("Add device modal link clicked, but step1/step2/step3 elements are missing");this._addDeviceWizard.step1.style.display="none";this._addDeviceWizard.step2.style.display="none";this._addDeviceWizard.step3.style.display="";this._addDeviceWizard.deviceConnectedTitle.textContent=ev.deviceName});this._addDeviceWizard.showQrStep&&(this._addDeviceWizard.showQrStep.onclick=async ev=>{ev.preventDefault();if(!(this._addDeviceWizard.step1&&this._addDeviceWizard.step2&&this._addDeviceWizard.step3&&this._addDeviceWizard.qrImage&&this._addDeviceWizard.qrLink&&this._addDeviceWizard.showQrStep))return console.warn("Add device modal link clicked, but step1/step2/step3 elements are missing");let text=this._addDeviceWizard.showQrStep.textContent;try{this._addDeviceWizard.showQrStep.textContent="Creating QR code...";this._addDeviceWizard.showQrStep.classList.add("disabled");let projectInfo=await this._studioApi.projects.getProjectInfo(this._studioApi.projectId);if(!projectInfo.body||!projectInfo.body.success)throw projectInfo.body&&projectInfo.body.error||projectInfo.response.statusText;if(!projectInfo.body.urls.mobileClient)throw new Error("No development API key set. Go to **Dashboard > Keys** to create one before you continue.");this._addDeviceWizard.qrImage.innerHTML="";new QRCode(this._addDeviceWizard.qrImage,{text:projectInfo.body.urls.mobileClient,width:400,height:400,correctLevel:projectInfo.body.urls.mobileClient.length>100?1:2});this._addDeviceWizard.qrImage.title="";this._addDeviceWizard.qrLink.href=projectInfo.body.urls.mobileClient;this._addDeviceWizard.step1.style.display="none";this._addDeviceWizard.step2.style.display="";this._addDeviceWizard.step3.style.display="none"}catch(ex2){let ex=ex2;notify_39.Notify.alert("Failed to create QR code",notify_39.Notify.extractMsg(ex),"danger");this._addDeviceWizard.step1.style.display="";this._addDeviceWizard.step2.style.display="none";this._addDeviceWizard.step3.style.display="none"}finally{this._addDeviceWizard.showQrStep.textContent=text;this._addDeviceWizard.showQrStep.classList.remove("disabled")}})}}}));define("client/organization/pages/organization-transform-ui",["require","exports","client/notify","client/organization/components/form-binding"],(function(require,exports,notify_40,form_binding_2){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationTransformUi=void 0;exports.OrganizationTransformUi=class{constructor(studioApi){this._addTransform={addMountPoint:document.querySelector("#input-add-transformation-add-mount-point"),mountPoints:document.querySelector("#input-add-transformation-mount-points"),docker:document.querySelector("#input-add-transformation-docker")};this._mountpointTemplate=document.querySelector("#mount-point-template").content.querySelector(".mount-point-row");this._studioApi=studioApi;let modal=document.querySelector("#add-transformation-block");this._transformForm=new form_binding_2.FormBinding(modal,{createTitle:async()=>"Add a new transformation block",updateTitle:async s=>"Edit transformation block",create:this.saveBlock.bind(this),update:this.updateBlock.bind(this),fetch:this.fetchBlock.bind(this),createErrorText:"Failed to add transformation block",updateErrorText:"Failed to update transformation block",createSaveBtnText:"Add transformation block",updateSaveBtnText:"Update transformation block"});let addTransformBtn=document.querySelector("#add-transformation-block-btn");addTransformBtn&&(addTransformBtn.onclick=async ev=>{ev.preventDefault();this._addTransform.mountPoints.textContent="No additional mount points defined";await this._transformForm.bindCreate(async()=>{this._addTransform.docker.readOnly=!1;this._addTransform.docker.dataset.dockerContainer=""},data=>{location.href=location.pathname+"?createdBlock="+encodeURIComponent(data.name)});this._studioApi.analytics.event("click",{event_category:"transform-action",event_label:"add"});this._transformForm.showModal()});this._addTransform.docker.onclick=()=>{if(this._addTransform.docker.readOnly){this._addTransform.docker.value=this._addTransform.docker.dataset.dockerContainer||"";this._addTransform.docker.readOnly=!1}};this._addTransform.addMountPoint.onclick=ev=>{ev.preventDefault();this.addMountPointRow(this._addTransform.mountPoints,void 0)};for(let r of Array.from(document.querySelectorAll("#transformation-table tbody tr")))this.bindTransformDropdown(r);window.history.replaceState(null,"",window.location.pathname)}bindTransformDropdown(r){for(let d of Array.from(r.querySelectorAll("a.dropdown-item")).map(a=>a)){let id=Number(r.dataset.id);d.onclick=async ev=>{switch(d.dataset.action){case"delete":ev.preventDefault();if(await notify_40.Notify.confirm('Removing "'+r.dataset.name+'"',`Are you sure you want to delete "${r.dataset.name}"?`,"Yes, remove","question","danger")&&r.dataset.name)try{let resp=await this._studioApi.blocks.deleteOrganizationTransformationBlock(this._studioApi.organizationId,id);if(!resp.body||!resp.body.success)throw resp.body&&resp.body.error||resp.response.statusText;location.href=location.pathname+"?removedBlock="+encodeURIComponent(r.dataset.name)}catch(ex2){let ex=ex2;notify_40.Notify.alert("Failed to remove transformation block",notify_40.Notify.extractMsg(ex),"danger")}break;case"edit-block":ev.preventDefault();try{await this._transformForm.bindUpdate(id,async b=>{if(b.additionalMountPoints.length>0){this._addTransform.mountPoints.innerHTML="";for(let x of b.additionalMountPoints)this.addMountPointRow(this._addTransform.mountPoints,x)}else this._addTransform.mountPoints.textContent="No additional mount points defined";if(b.dockerContainerManagedByEdgeImpulse){this._addTransform.docker.value="Managed through the Edge Impulse CLI, click to edit";this._addTransform.docker.readOnly=!0;this._addTransform.docker.dataset.dockerContainer=b.dockerContainer}else{this._addTransform.docker.value=b.dockerContainer;this._addTransform.docker.readOnly=!1;this._addTransform.docker.dataset.dockerContainer=""}},data=>{location.href=location.pathname+"?updatedBlock="+encodeURIComponent(data.name||"")});this._studioApi.analytics.event("click",{event_category:"transform-action",event_label:"update"});this._transformForm.showModal()}catch(ex2){let ex=ex2;notify_40.Notify.alert("Failed to fetch block",notify_40.Notify.extractMsg(ex),"danger")}}this._studioApi.analytics.event("click",{event_category:"transform-action",event_label:d.dataset.action})}}}addMountPointRow(parent,data){let row=this._mountpointTemplate.cloneNode(!0),typeEl=row.querySelector(".mount-point-type"),bucketEl=row.querySelector(".mount-point-bucket"),portalEl=row.querySelector(".mount-point-portal"),pathEl=row.querySelector(".mount-point-path"),deleteEl=row.querySelector(".mount-point-delete");if(data){typeEl.value=data.type;"number"==typeof data.bucketId&&(bucketEl.value=data.bucketId+"");"number"==typeof data.portalId&&(portalEl.value=data.portalId+"");pathEl.value=data.mountPoint}const updateTypeUI=()=>{if("bucket"===typeEl.value){bucketEl.style.display="";portalEl.style.display="none"}else if("portal"===typeEl.value){bucketEl.style.display="none";portalEl.style.display=""}else console.warn("Invalid value for typeEl",typeEl.value)};updateTypeUI();typeEl.oninput=ev=>{ev.preventDefault();updateTypeUI()};deleteEl.onclick=ev=>{ev.preventDefault();parent.removeChild(row);0===parent.querySelectorAll(".mount-point-row").length&&(parent.textContent="No additional mount points defined")};0===parent.querySelectorAll(".mount-point-row").length&&(parent.textContent="");parent.appendChild(row)}getMountPointInfo(parent){let ret=[];for(let row of Array.from(parent.querySelectorAll(".mount-point-row"))){let typeEl=row.querySelector(".mount-point-type"),bucketEl=row.querySelector(".mount-point-bucket"),portalEl=row.querySelector(".mount-point-portal"),x={mountPoint:row.querySelector(".mount-point-path").value,type:typeEl.value,bucketId:"bucket"===typeEl.value?Number(bucketEl.value):void 0,portalId:"portal"===typeEl.value?Number(portalEl.value):void 0};ret.push(x)}return ret}async saveBlock(obj,saveBtn){saveBtn.textContent="Adding transformation block...";if("number"==typeof obj.limitsCpu&&"number"==typeof obj.requestsCpu&&obj.requestsCpu>obj.limitsCpu)throw new Error("Compute limit should be higher or equal than compute request");if("number"==typeof obj.limitsMemory&&"number"==typeof obj.requestsMemory&&obj.requestsMemory>obj.limitsMemory)throw new Error("Memory limit should be higher or equal than memory request");if(typeof obj.limitsCpu!=typeof obj.limitsMemory)throw new Error("If setting compute limit, then both CPU and memory need to be set");if(typeof obj.requestsCpu!=typeof obj.requestsMemory)throw new Error("If setting compute requests, then both CPU and memory need to be set");obj.additionalMountPoints=this.getMountPointInfo(this._transformForm.getModal());let res=await this._studioApi.blocks.addOrganizationTransformationBlock(this._studioApi.organizationId,obj);if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText}async updateBlock(id,obj,saveBtn){saveBtn.textContent="Updating transformation block...";if("number"==typeof obj.limitsCpu&&"number"==typeof obj.requestsCpu&&obj.requestsCpu>obj.limitsCpu)throw new Error("Compute limit should be higher or equal than compute request");if("number"==typeof obj.limitsMemory&&"number"==typeof obj.requestsMemory&&obj.requestsMemory>obj.limitsMemory)throw new Error("Memory limit should be higher or equal than memory request");if(typeof obj.limitsCpu!=typeof obj.limitsMemory)throw new Error("If setting compute limit, then both CPU and memory need to be set");if(typeof obj.requestsCpu!=typeof obj.requestsMemory)throw new Error("If setting compute requests, then both CPU and memory need to be set");obj.additionalMountPoints=this.getMountPointInfo(this._transformForm.getModal());this._addTransform.docker.readOnly&&(obj.dockerContainer=this._addTransform.docker.dataset.dockerContainer||"");let res=await this._studioApi.blocks.updateOrganizationTransformationBlock(this._studioApi.organizationId,id,obj);if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText}async fetchBlock(id){let res=await this._studioApi.blocks.listOrganizationTransformationBlocks(this._studioApi.organizationId);if(!res.body||!res.body.success||!res.body.transformationBlocks)throw res.body&&res.body.error||res.response.responseText;let b=res.body.transformationBlocks.find(x=>x.id===id);if(!b)throw new Error("Failed to find transformation block");return b}}}));define("client/organization/pages/organization-create-project-details-ui",["require","exports","client/project/components/job-runner","client/notify","client/pagination","client/organization/components/notification-settings"],(function(require,exports,job_runner_12,notify_41,pagination_3,notification_settings_2){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationCreateProjectDetailsUi=void 0;exports.OrganizationCreateProjectDetailsUi=class{constructor(studioApi){this._createProjectId=Number(document.querySelector("#create-project-id").value);this._stdoutEl={modal:document.querySelector("#stdout-modal"),title:document.querySelector("#stdout-logs-title span"),output:document.querySelector("#stdout-output")};this._els={showUploadStdout:document.querySelector("#show-upload-stdout"),uploadProgressBar:document.querySelector("#upload-progress-bar"),uploadDoneInd:document.querySelector("#upload-done"),uploadProgressInd:document.querySelector("#upload-progress"),uploadFailedInd:document.querySelector("#upload-failed"),uploadCountTitle:document.querySelector("#upload-count-title"),uploadRetry:document.querySelector("#upload-retry"),transformProgressBar:document.querySelector("#transform-progress-bar"),transformDoneInd:document.querySelector("#transform-done"),transformProgressInd:document.querySelector("#transform-progress"),transformFailedInd:document.querySelector("#transform-failed"),transformToggle:document.querySelector("#transform-toggle"),transformDetails:document.querySelector("#transform-details"),transformParallel:document.querySelector("#transform-parallel"),transformParallelCount:document.querySelector("#transform-parallel-count"),transformLi:document.querySelector("#transform-li"),transformRows:Array.from(document.querySelector("#transform-details").querySelectorAll("tbody tr")),transformTable:document.querySelector("#transform-table"),transformShow:Array.from(document.querySelectorAll('*[name="transform-show"]')),transformNoInFilter:document.querySelector("#transform-no-selection"),transformFailedActions:document.querySelector("#transform-failed-actions"),transformDeleteFailedJobs:document.querySelector("#delete-failed-jobs"),transformRetryFailedJobs:document.querySelector("#retry-failed-jobs"),showNotificationSettings:document.querySelector("#notification-settings-btn"),notificationSettingsIcon:document.querySelector("#notification-settings-icon")};this._transformPageSize=Number(document.querySelector("#transform-page-size").value);this._transformRenderPageId=0;this._transformRowTemplate=document.querySelector("#transform-row-template").content.querySelector("tr");this._notificationSettings=new notification_settings_2.NotificationSettings;this._studioApi=studioApi;this._jobRunner=new job_runner_12.JobRunner(this._studioApi,this._stdoutEl.modal,!0);this._els.showUploadStdout.onclick=ev=>{ev.preventDefault();this.attachToJobStdout(Number(this._els.showUploadStdout.dataset.jobId),"upload")};this._studioApi.socket.addEventListener("create-project-upload-started-"+this._createProjectId,msg=>{console.log("create-project-upload-started",msg);this._els.showUploadStdout.dataset.jobId=msg.jobId.toString();this._els.uploadCountTitle.textContent="("+msg.totalFileCount+" files)";this._els.uploadFailedInd.style.display="none";this._els.uploadDoneInd.style.display="none";this._els.uploadProgressInd.style.display="";this._els.uploadProgressBar.style.width="0%";this._els.uploadRetry.style.display="none";this.registerUploadUpdates()});this._studioApi.socket.addEventListener("create-project-transform-started-"+this._createProjectId,msg=>{console.log("create-project-transform-started",msg);let tr=this._els.transformDetails.querySelector('tbody tr[data-id="'+msg.fileId+'"]');if(tr){let showLogs=tr.querySelector(".show-logs");if(showLogs){let l=showLogs;l.dataset.jobId=msg.jobId.toString();l.style.display=""}let downloadLogs=tr.querySelector(".download-logs");if(downloadLogs){let l=downloadLogs;l.dataset.jobId=msg.jobId.toString();l.href=`/v1/api/organizations/${this._studioApi.organizationId}`+`/jobs/${msg.jobId}/stdout/download`;l.style.display=""}this.bindTransformRow(tr,!0,!0)}});this._studioApi.socket.addEventListener("create-project-transform-progress-"+this._createProjectId,this.updateTransformProgress.bind(this));this._els.transformToggle.onclick=ev=>{ev.preventDefault();let i=this._els.transformToggle.querySelector("i");if(i.classList.contains("fa-chevron-down")){this._els.transformDetails.style.display="";this._els.transformLi.classList.add("border-bottom-0");i.classList.remove("fa-chevron-down");i.classList.add("fa-chevron-up")}else{this._els.transformDetails.style.display="none";this._els.transformLi.classList.remove("border-bottom-0");i.classList.add("fa-chevron-down");i.classList.remove("fa-chevron-up")}};this._els.uploadRetry.onclick=async ev=>{ev.preventDefault();try{if(!await notify_41.Notify.confirm("Restarting upload","Are you sure you want to restart the upload? Any files uploaded earlier will still be there, so clean up your project first!","Continue","warning","warning"))return;this._els.uploadRetry.classList.add("disabled");let a=await this._studioApi.createProject.retryOrganizationUpload(this._studioApi.organizationId,this._createProjectId);if(!a.body||!a.body.success)throw a.body&&a.body.error||a.response.responseText;this._els.uploadRetry.style.display="none";await notify_41.Notify.alert("Restarted upload job","","success")}catch(ex2){let ex=ex2;await notify_41.Notify.alert("Failed to restart upload job",notify_41.Notify.extractMsg(ex),"error")}finally{this._els.uploadRetry.classList.remove("disabled")}};this._els.transformRetryFailedJobs.onclick=async ev=>{ev.preventDefault();try{if(!await notify_41.Notify.confirm("Retrying failed jobs","Are you sure you want to retry all failed jobs?","Retry","question","info"))return;this._els.transformRetryFailedJobs.classList.add("disabled");let a=await this._studioApi.createProject.retryOrganizationTransform(this._studioApi.organizationId,this._createProjectId);if(!a.body||!a.body.success)throw a.body&&a.body.error||a.response.responseText;await this._transformPagination.goToPage(this._transformPagination.currentPage(),!0);await notify_41.Notify.alert("Retried failed jobs","","success")}catch(ex2){let ex=ex2;await notify_41.Notify.alert("Failed to retry failed jobs",notify_41.Notify.extractMsg(ex),"error")}finally{this._els.transformRetryFailedJobs.classList.remove("disabled")}};this._els.transformDeleteFailedJobs.onclick=async ev=>{ev.preventDefault();try{if(!await notify_41.Notify.confirm("Clearing failed jobs","Are you sure you want to clear all failed jobs?","Yes, clear","question","info"))return;this._els.transformDeleteFailedJobs.classList.add("disabled");let a=await this._studioApi.createProject.clearOrganizationTransform(this._studioApi.organizationId,this._createProjectId);if(!a.body||!a.body.success)throw a.body&&a.body.error||a.response.responseText;await this._transformPagination.goToPage(this._transformPagination.currentPage(),!0);await notify_41.Notify.alert("Cleared failed jobs","","success")}catch(ex2){let ex=ex2;await notify_41.Notify.alert("Failed to clear failed jobs",notify_41.Notify.extractMsg(ex),"error")}finally{this._els.transformDeleteFailedJobs.classList.remove("disabled")}};this._els.transformParallel&&(this._els.transformParallel.onclick=async ev=>{ev.preventDefault();try{let v=await notify_41.Notify.prompt("Parallel transformation jobs","Set the number of parallel transformation jobs. If you set this too high then jobs might become unschedulable.","Change parallel job count",this._els.transformParallel.dataset.parallel||"3","question","info");if(!v)return;if(isNaN(Number(v)))throw new Error("Parallel job count should be a number");this._els.transformParallelCount.innerHTML='<i class="fas fa-spinner spin-animation"></i>';let a=await this._studioApi.createProject.updateOrganizationCreateProject(this._studioApi.organizationId,this._createProjectId,{transformationParallel:Number(v)});if(!a.body||!a.body.success)throw a.body&&a.body.error||a.response.responseText;this._els.transformParallel.dataset.parallel=v}catch(ex2){let ex=ex2;await notify_41.Notify.alert("Failed to set parallel job count",notify_41.Notify.extractMsg(ex),"error")}finally{this._els.transformParallelCount.textContent=this._els.transformParallel.dataset.parallel||""}});this._els.showNotificationSettings&&(this._els.showNotificationSettings.onclick=async ev=>{ev.preventDefault();try{let a=await this._studioApi.createProject.getOrganizationCreateProjectStatus(this._studioApi.organizationId,this._createProjectId,0,0);if(!a.body||!a.body.success||!a.body.status)throw a.body&&a.body.error||a.response.responseText;this._notificationSettings.show(a.body.status.emailRecipientUids||[],this.updateNotificationSettings.bind(this))}catch(ex2){let ex=ex2;await notify_41.Notify.alert("Failed to show notification settings window",notify_41.Notify.extractMsg(ex),"danger")}});this._transformPagination=new pagination_3.Pagination(document.querySelector(".transform-table"),this.loadTransformPage.bind(this));for(let r of this._els.transformRows)this.bindTransformRow(r,!1,!1);for(let t of this._els.transformShow)t.oninput=async ev=>{ev.preventDefault();await this._transformPagination.goToPage(1,!0);this._els.transformFailedActions.style.display="failed"===t.value?"":"none"};this.registerUploadUpdates();this.getStatus();this._studioApi.socket.addEventListener("connect",this.getStatus.bind(this));window.history.replaceState(null,"",window.location.pathname)}async getStatus(){let d=await this._studioApi.createProject.getOrganizationCreateProjectStatus(this._studioApi.organizationId,this._createProjectId,this._transformPageSize,0);if(!d.body||!d.body.success||!d.body.status)return console.error("Failed to get create project status",d.body.error,d.response.responseText);document.body.dataset.state=JSON.stringify(d.body);let s=d.body.status;s.totalUploadFileCount&&(this._els.uploadCountTitle.textContent="("+s.totalUploadFileCount+" files)");if(s.uploadJobId&&this._els.showUploadStdout.dataset.jobId!==s.uploadJobId.toString()){this._els.showUploadStdout.dataset.jobId=s.uploadJobId.toString();this.registerUploadUpdates()}if("finished"===s.uploadJobStatus){this._els.uploadProgressInd.style.display="none";this._els.uploadFailedInd.style.display="none";this._els.uploadDoneInd.style.display="";this._els.notificationSettingsIcon&&(this._els.notificationSettingsIcon.style.display="none");this._els.uploadProgressBar.style.display="100%"}else if("failed"===s.uploadJobStatus){this._els.uploadProgressInd.style.display="none";this._els.uploadFailedInd.style.display="";this._els.uploadDoneInd.style.display="none";this._els.uploadProgressBar.style.display="0%"}else if("created"===s.uploadJobStatus||"started"===s.uploadJobStatus){this._els.uploadProgressInd.style.display="";this._els.uploadFailedInd.style.display="none";this._els.uploadDoneInd.style.display="none";0===s.totalUploadFileCount?this._els.uploadProgressBar.style.width="0%":this._els.uploadProgressBar.style.width=(s.uploadJobFilesUploaded||0)/s.totalUploadFileCount*100+"%"}for(let f of s.files)if(f.transformationJobId){let tr=this._els.transformDetails.querySelector('tbody tr[data-id="'+f.id+'"]');tr&&this.updateTransformRowUi(f,tr)}this.updateTransformProgress(s.transformationSummary)}async updateNotificationSettings(newIds){try{let a=await this._studioApi.createProject.updateOrganizationCreateProject(this._studioApi.organizationId,this._createProjectId,{emailRecipientUids:newIds});if(!a.body||!a.body.success)throw a.body&&a.body.error||a.response.responseText;notify_41.Notify.notify("","Saved notification settings","top","center","far fa-check-circle","success")}catch(ex2){let ex=ex2;notify_41.Notify.alert("Failed to save notification settings",notify_41.Notify.extractMsg(ex),"danger")}}async attachToJobStdout(jobId,title){$(this._stdoutEl.modal).modal();$(this._stdoutEl.modal).on("hidden.bs.modal",()=>{this._jobRunner.detachFromJob()});$(this._stdoutEl.modal).on("shown.bs.modal",async()=>{this._stdoutEl.output.scrollTop=9999999});this._stdoutEl.title.textContent="Showing logs for "+title;try{await this._jobRunner.resumeJob(jobId)}catch(ex2){let ex=ex2;await notify_41.Notify.alert("Failed to attach to job",notify_41.Notify.extractMsg(ex),"danger")}}registerUploadUpdates(){if(this._els.showUploadStdout.dataset.jobId){this._els.showUploadStdout.style.display="";this._studioApi.socket.addEventListener("job-data-"+this._els.showUploadStdout.dataset.jobId,msg=>{let filesUploaded,totalFileCount;for(let s of msg.data.split("\n"))if(s.startsWith("[")&&s.indexOf("Uploading")>-1){let split=s.substr(1).split("]");if(split[0]){let[p,t]=split[0].split("/");p&&!isNaN(Number(p))&&(filesUploaded=Number(p));t&&!isNaN(Number(t))&&(totalFileCount=Number(t))}}if(filesUploaded&&totalFileCount){console.log("filesUploaded",filesUploaded,"totalFileCount",totalFileCount);let pct=Math.floor(filesUploaded/totalFileCount*100);isNaN(pct)||(this._els.uploadProgressBar.style.width=pct+"%");this._els.uploadProgressInd.style.display="";this._els.uploadFailedInd.style.display="none";this._els.uploadDoneInd.style.display="none"}});this._studioApi.socket.addEventListener("job-finished-"+this._els.showUploadStdout.dataset.jobId,msg=>{this._els.uploadProgressInd.style.display="none";this._els.uploadFailedInd.style.display=msg.success?"none":"";this._els.uploadDoneInd.style.display=msg.success?"":"none";this._els.notificationSettingsIcon&&msg.success&&(this._els.notificationSettingsIcon.style.display="none");msg.success?this._els.uploadProgressBar.style.width="100%":this._els.uploadRetry.style.display=""})}else this._els.showUploadStdout.style.display="none"}bindTransformRow(el,fromSocketEvent,transformStarted){let retryBtn=el.querySelector(".retry"),deleteBtn=el.querySelector('*[data-action="delete"]');deleteBtn.onclick=async ev=>{ev.preventDefault();try{if(await notify_41.Notify.confirm("Deleting transformation",`Are you sure you want to delete the transformation job for "${el.dataset.filename}"? `+"This will stop any running job.","Yes, delete","question","danger")){console.log("delete file",el.dataset.id);let d=await this._studioApi.createProject.deleteOrganizationCreateProjectFile(this._studioApi.organizationId,this._createProjectId,Number(el.dataset.id));if(!d.body||!d.body.success)throw d.body&&d.body.error||d.response.responseText;el.parentNode&&el.parentNode.removeChild(el);notify_41.Notify.notify("",'Deleted "'+el.dataset.filename+'"',"top","center","far fa-check-circle","success")}}catch(ex2){let ex=ex2;await notify_41.Notify.alert("Failed to delete file",notify_41.Notify.extractMsg(ex),"error")}};retryBtn.onclick=async ev=>{ev.preventDefault();try{if(await notify_41.Notify.confirm("Retrying transformation",`Are you sure you want to retry the transformation job for "${el.dataset.filename}"?`,"Yes, retry","question","info")){delete showLogs.dataset.jobId;delete el.dataset.boundEvents;console.log("retry file",el.dataset.id);let d=await this._studioApi.createProject.retryOrganizationCreateProjectFile(this._studioApi.organizationId,this._createProjectId,Number(el.dataset.id));if(!d.body||!d.body.success)throw d.body&&d.body.error||d.response.responseText;notify_41.Notify.notify("",'Retrying "'+el.dataset.filename+'"',"top","center","far fa-check-circle","success")}}catch(ex2){let ex=ex2;await notify_41.Notify.alert("Failed to retry file",notify_41.Notify.extractMsg(ex),"error")}};let showLogs=el.querySelector(".show-logs");if(!showLogs.dataset.jobId)return;if(el.dataset.boundEvents)return;showLogs.onclick=ev=>{ev.preventDefault();this.attachToJobStdout(Number(showLogs.dataset.jobId),el.dataset.filename||"")};let indDone=el.querySelector(".transform-done"),indProgress=el.querySelector(".transform-progress"),indFailed=el.querySelector(".transform-failed"),indWaiting=el.querySelector(".transform-waiting");const onJobData=msg=>{indWaiting.style.display="none";indProgress.style.display="";indFailed.style.display="none";indDone.style.display="none";deleteBtn.style.display="none";retryBtn.style.display="none"},onJobFinished=msg=>{console.log("transform job finished",showLogs.dataset.jobId,msg);this._studioApi.socket.removeEventListener("job-data-"+showLogs.dataset.jobId,onJobData);this._studioApi.socket.removeEventListener("job-finished-"+showLogs.dataset.jobId,onJobFinished);indWaiting.style.display="none";indProgress.style.display="none";indFailed.style.display=msg.success?"none":"";indDone.style.display=msg.success?"":"none";retryBtn.style.display=msg.success?"none":"";deleteBtn.style.display=msg.success?"none":""};if(transformStarted||"none"===indDone.style.display&&"none"===indFailed.style.display){this._studioApi.socket.addEventListener("job-data-"+showLogs.dataset.jobId,onJobData);this._studioApi.socket.addEventListener("job-finished-"+showLogs.dataset.jobId,onJobFinished);el.onDestroy=()=>{this._studioApi.socket.removeEventListener("job-data-"+showLogs.dataset.jobId,onJobData);this._studioApi.socket.removeEventListener("job-finished-"+showLogs.dataset.jobId,onJobFinished)}}if(fromSocketEvent){indWaiting.style.display="none";indProgress.style.display="";indFailed.style.display="none";indDone.style.display="none"}el.dataset.boundEvents="1"}async loadTransformPage(page){console.log("renderPage",page);let tbody=this._els.transformTable.querySelector("tbody");if(!tbody)return;let renderPageId=++this._transformRenderPageId,selection=this._els.transformShow.find(x=>x.checked),samples=await this._studioApi.createProject.getOrganizationCreateProjectStatus(this._studioApi.organizationId,this._createProjectId,this._transformPageSize,(page-1)*this._transformPageSize,selection?selection.value:"all");if(renderPageId===this._transformRenderPageId){if(!samples.body||!samples.body.success||!samples.body.status)throw new Error(samples.body&&samples.body.error||samples.response.responseText);for(let tr of Array.from(tbody.querySelectorAll("tr")))"function"==typeof tr.onDestroy&&tr.onDestroy();tbody.innerHTML="";for(let v of samples.body.status.files){let tr=this.renderTransformRow(v);tr.dataset.page=page.toString();tr.classList.add("table-page-"+page);this.bindTransformRow(tr,!1,"waiting"!==v.transformationJobStatus);tbody.appendChild(tr)}setTimeout(async()=>{if(!samples.body.status)return;let v=samples.body.status.transformationSummary.totalFileCount;selection&&"created"===selection.value?v=samples.body.status.transformationSummary.startedCount-samples.body.status.transformationSummary.finishedCount:selection&&"failed"===selection.value&&(v=samples.body.status.transformationSummary.finishedCount-samples.body.status.transformationSummary.succeededCount);await this._transformPagination.updateNumberOfRows(v,!1);this._els.transformNoInFilter.style.display=0===v?"":"none"},0)}}renderTransformRow(f){let newTr=this._transformRowTemplate.cloneNode(!0),vm_transformInProgress="started"===f.transformationJobStatus||"created"===f.transformationJobStatus,vm_transformSucceeded="finished"===f.transformationJobStatus,vm_transformFailed="failed"===f.transformationJobStatus;f.transformationJobStatus,f.transformationJobStatus,"waiting"===f.transformationJobStatus||f.transformationJobStatus;newTr.dataset.id=""+f.id;newTr.dataset.dataItemId=""+f.dataItemId;newTr.dataset.filename=f.fileName;newTr.dataset.onloadTransformSuccess=""+vm_transformSucceeded;newTr.dataset.onloadTransformProgress=""+vm_transformInProgress;newTr.dataset.onloadTransformFailed=""+vm_transformFailed;newTr.dataset.onloadTransformWaiting=""+vm_transformSucceeded;let itemEl=newTr.querySelector(".transform-dataitemname"),filenameEl=newTr.querySelector(".transform-filename");itemEl.textContent=itemEl.title=f.dataItemName;filenameEl.textContent=filenameEl.title=f.fileName;this.updateTransformRowUi(f,newTr);return newTr}updateTransformRowUi(f,tr){let indDone=tr.querySelector(".transform-done"),indFailed=tr.querySelector(".transform-failed"),indProgress=tr.querySelector(".transform-progress");if("waiting"!==f.transformationJobStatus){let showLogs=tr.querySelector(".show-logs");f.transformationJobId&&(showLogs.dataset.jobId=f.transformationJobId.toString());showLogs.style.display="";let downloadLogs=tr.querySelector(".download-logs");if(f.transformationJobId){downloadLogs.dataset.jobId=f.transformationJobId.toString();downloadLogs.href=`/v1/api/organizations/${this._studioApi.organizationId}`+`/jobs/${f.transformationJobId}/stdout/download`}downloadLogs.style.display=""}if("finished"===f.transformationJobStatus){indDone.style.display="";indFailed.style.display="none";indProgress.style.display="none"}else if("failed"===f.transformationJobStatus){indDone.style.display="none";indFailed.style.display="";indProgress.style.display="none"}else"started"!==f.transformationJobStatus&&"created"!==f.transformationJobStatus||this.bindTransformRow(tr,!0,!1);let retry=tr.querySelector(".retry");"failed"===f.transformationJobStatus?retry.style.display="":retry.style.display="none";let del=tr.querySelector('*[data-action="delete"]'),showDeleteButton="waiting"===f.transformationJobStatus||"failed"===f.transformationJobStatus;del.style.display=showDeleteButton?"":"none"}updateTransformProgress(msg){console.log("create-project-transform-progress",msg);if(msg.finishedCount===msg.totalFileCount)if(msg.succeededCount===msg.totalFileCount){this._els.transformFailedInd.style.display="none";this._els.transformProgressInd.style.display="none";this._els.transformDoneInd.style.display=""}else{this._els.transformFailedInd.style.display="";this._els.transformProgressInd.style.display="none";this._els.transformDoneInd.style.display="none"}else if(msg.startedCount>0){this._els.transformFailedInd.style.display="none";this._els.transformProgressInd.style.display="";this._els.transformDoneInd.style.display="none"}let pct=msg.succeededCount/msg.totalFileCount*100;this._els.transformProgressBar.title=msg.succeededCount+"/"+msg.totalFileCount+" files transformed";this._els.transformProgressBar.style.width=Math.floor(pct)+"%"}}}));define("client/organization/pages/organization-create-project-list-ui",["require","exports","client/pagination","client/notify","client/global-ui"],(function(require,exports,pagination_4,notify_42,global_ui_11){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationCreateProjectListUi=void 0;exports.OrganizationCreateProjectListUi=class{constructor(studioApi){this._els={dataTable:document.querySelector("#create-project-table")};this._renderPageId=0;this._pageSize=Number(document.querySelector("#page-size").value);this._pagination=new pagination_4.Pagination(document.querySelector(".paginatable"),this.renderPage.bind(this));this._rowDataTemplate=document.querySelector("#create-project-data-template").content.querySelector("tr");this._studioApi=studioApi;if(this._els.dataTable)for(let tr of Array.from(this._els.dataTable.querySelectorAll("tbody tr")))this.bindDataDropdown(tr)}bindDataDropdown(r){for(let d of Array.from(r.querySelectorAll("a.dropdown-item")).map(a=>a)){let id=Number(r.dataset.id);d.onclick=async ev=>{if(!ev.target||-1!==(ev.target.href||"").indexOf("#")){ev.preventDefault();switch(d.dataset.action){case"delete":if(!await notify_42.Notify.confirm("Deleting create project job",`Are you sure you want to delete job ${id}?`,"Yes, delete","question","danger"))return;try{let resp=await this._studioApi.createProject.deleteOrganizationCreateProject(this._studioApi.organizationId,id);if(!resp.body||!resp.body.success)throw resp.body&&resp.body.error||resp.response.statusText;notify_42.Notify.notify("","Removed job "+id,"top","center","far fa-check-circle","success");this._els.dataTable&&1===this._els.dataTable.querySelectorAll("tbody tr").length?location.reload():r.parentNode&&r.parentNode.removeChild(r)}catch(ex2){let ex=ex2;notify_42.Notify.alert("Failed to delete job",notify_42.Notify.extractMsg(ex),"danger")}break}this._studioApi.analytics.event("click",{event_category:"create-project-list",event_label:d.dataset.action})}}}}async renderPage(page){console.log("renderPage",page);if(!this._els.dataTable)return console.warn("No data table...");let tbody=this._els.dataTable.querySelector("tbody");if(!tbody)return;let renderPageId=++this._renderPageId,resp=await this._studioApi.createProject.getOrganizationCreateProjects(this._studioApi.organizationId,this._pageSize,(page-1)*this._pageSize);if(renderPageId===this._renderPageId){if(!resp.body||!resp.body.success)throw new Error(resp.body&&resp.body.error||resp.response.responseText);tbody.innerHTML="";for(let v of resp.body.jobs||[]){let tr=this.renderRow(v);tr.dataset.page=page.toString();tr.classList.add("table-page-"+page);tbody.appendChild(tr)}}}renderRow(row){let newTr=this._rowDataTemplate.cloneNode(!0);newTr.dataset.name=row.name;newTr.dataset.id=row.id.toString();let nameEl=newTr.querySelector(".create-project-name"),importIntoEl=newTr.querySelector(".create-project-import-into"),filesEl=newTr.querySelector(".create-project-files"),transformationEl=newTr.querySelector(".create-project-transformation"),transformEl=newTr.querySelector(".create-project-transform"),uploadEl=newTr.querySelector(".create-project-upload"),createdEl=newTr.querySelector(".create-project-created"),viewDetailsEl=newTr.querySelector(".create-project-view-details");nameEl&&(nameEl.title=nameEl.textContent=row.name||"-");importIntoEl&&(row.projectId?importIntoEl.title=importIntoEl.textContent=row.projectOwner+" / "+row.projectName:row.outputDatasetName?importIntoEl.title=importIntoEl.textContent=row.outputDatasetName:importIntoEl.title=importIntoEl.textContent="Same dataset");if(filesEl){let totalDownloadFileCountString=row.totalDownloadFileCount+" "+(1===row.totalDownloadFileCount?"file":"files");filesEl.title=filesEl.textContent=totalDownloadFileCountString+", "+row.totalDownloadFileSizeString}transformationEl&&(transformationEl.title=transformationEl.textContent=row.transformationBlockName||"None");if(transformEl){let transformInProgress="started"===row.transformJobStatus,transformSucceeded="finished"===row.transformJobStatus,transformFailed="failed"===row.transformJobStatus;row.transformationBlockName?transformEl.innerHTML=transformSucceeded?'<i class="fas fa-check text-green"></i>':transformFailed?'<i class="fas fa-times text-danger"></i>':transformInProgress?'<i class="fas fa-spinner spin-animation"></i>':'<i class="fas fa-ellipsis-h"></i>':transformEl.textContent="-"}if(uploadEl){let uploadInProgress="started"===row.uploadJobStatus,uploadSucceeded="finished"===row.uploadJobStatus,uploadFailed="failed"===row.uploadJobStatus;row.uploadJobStatus;if(uploadSucceeded){uploadEl.title="Succeeded";uploadEl.innerHTML='<i class="fas fa-check text-green"></i>'}else if(uploadFailed){uploadEl.title="Failed";uploadEl.innerHTML='<i class="fas fa-times text-danger"></i>'}else if(uploadInProgress){uploadEl.title="In progress";uploadEl.innerHTML='<i class="fas fa-spinner spin-animation"></i>'}else{uploadEl.title="Waiting";uploadEl.innerHTML='<i class="fas fa-ellipsis-h"></i>'}}if(createdEl){createdEl.textContent=global_ui_11.GlobalUI.getFriendlyDateString(row.created);createdEl.dataset.friendlyDate=row.created.toString()}viewDetailsEl&&(viewDetailsEl.href=`${this._studioApi.baseUrl}/create-project/${row.id}`);this.bindDataDropdown(newTr);return newTr}}}));define("client/project/components/async-pool",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.asyncPool=void 0;exports.asyncPool=async function(poolLimit,array,iteratorFn){const ret=[],executing=[];for(const item of array){const p=Promise.resolve().then(()=>iteratorFn(item));ret.push(p);if(poolLimit<=array.length){const e=p.then(()=>executing.splice(executing.indexOf(e),1));executing.push(e);executing.length>=poolLimit&&await Promise.race(executing)}}return Promise.all(ret)}}));define("client/project/pages/upload-ui",["require","exports","client/notify","client/ingestion-utils","client/project/components/async-pool"],(function(require,exports,notify_43,ingestion_utils_3,async_pool_1){Object.defineProperty(exports,"__esModule",{value:!0});exports.UploadUi=void 0;exports.UploadUi=class{constructor(studioApi){this._isBusy=!1;this._totalFiles=0;this._currentFile=-1;this._failedFiles=0;this._uploadCategory="training";this.validExtensions=[".wav",".cbor",".json",".jpg",".jpeg",".png",".mp4",".csv"];const trainingRadio=document.querySelector("#training-radio"),splitRadio=document.querySelector("#split-radio");this._labelFreeRadio=document.querySelector("#label-free-radio");this._labelInput=document.querySelector("#label-input");this._fileSelector=document.querySelector("#file-selector");this._uploadForm=document.querySelector("#upload-form");this._consoleOutput=document.querySelector("#console-output");this._outputPane=document.querySelector("#output-pane");this._uploadButton=document.querySelector("#upload-button");this._outputPane.style.display="none";this._uploadButton.onclick=async ev=>{ev.preventDefault();splitRadio.checked?this._uploadCategory="split":trainingRadio.checked?this._uploadCategory="training":this._uploadCategory="testing";this._isBusy?await notify_43.Notify.alert("Please wait","Some files are already uploading...","warning"):this.uploadFiles()};this._labelFreeRadio.oninput=()=>{this._labelFreeRadio.checked&&this._labelInput.focus()};this._labelInput.onfocus=()=>{this._labelFreeRadio.checked=!0};this._labelInput.oninput=()=>{this._labelInput.value&&this._labelInput.classList.remove("is-invalid")};this._ingestionApi=new ingestion_utils_3.IngestionUtils(studioApi)}async uploadFiles(){const selectedFilesX=this._fileSelector.files;if(null===selectedFilesX||0===selectedFilesX.length){await notify_43.Notify.alert("No files selected","You need to select some files before uploading.","warning");return}let boundingBoxesFile,selectedFiles=Array.from(selectedFilesX),bbFile=selectedFiles.find(x=>"bounding_boxes.labels"===x.name.toLowerCase());if(bbFile){let bbFileText=await new Promise((resolve,reject)=>{if(!bbFile)return;let reader=new FileReader;reader.onload=()=>{if("string"!=typeof reader.result)return reject("bounding_boxes.labels FileReader result type is not a string");resolve(reader.result)};reader.onerror=reject;reader.readAsText(bbFile)});try{boundingBoxesFile=JSON.parse(bbFileText)}catch(ex2){throw new Error("bounding_boxes.labels file is not valid JSON")}if(1!==boundingBoxesFile.version)throw new Error("bounding_boxes.labels has invalid version");if("bounding-box-labels"!==boundingBoxesFile.type)throw new Error("bounding_boxes.labels has invalid type");if("object"!=typeof boundingBoxesFile.boundingBoxes)throw new Error("bounding_boxes.labels boundingBoxes is not an object");selectedFiles=selectedFiles.filter(x=>x!==bbFile)}const uploadLabel=this._labelFreeRadio.checked?this._labelInput.value:"";if(this._labelFreeRadio.checked&&!this._labelInput.value){this._labelInput.classList.add("is-invalid");return}this._labelInput.classList.remove("is-invalid");this._isBusy=!0;this._totalFiles=selectedFiles.length;this._currentFile=0;this._failedFiles=0;this._outputPane.style.display="block";let filesText=1===this._totalFiles?"file":"files";this._consoleOutput.textContent="Uploading "+this._totalFiles+" "+filesText+"...\n";this._uploadButton.classList.add("disabled");await async_pool_1.asyncPool(20,Array.from(selectedFiles),async file=>{await new Promise((resolve,reject)=>{const reader=new FileReader;reader.onload=async()=>{const arrayBuffer=reader.result,buffer=new Uint8Array(arrayBuffer),boundingBoxes=boundingBoxesFile?boundingBoxesFile.boundingBoxes[file.name]:void 0;await this.processFile(file,buffer,uploadLabel,boundingBoxes);resolve()};reader.onerror=reject;reader.readAsArrayBuffer(file)})});let success=this._totalFiles-this._failedFiles,failed=this._failedFiles;this.consoleLog(`\nDone. Files uploaded successful: ${success}. `+`Files that failed to upload: ${failed}.`);this._isBusy=!1;this._fileSelector.value="";this._uploadButton.classList.remove("disabled");this._consoleOutput.textContent+="\n\n";let report=document.createElement("span");report.classList.add("text-green");report.textContent+="Job completed";this._consoleOutput.appendChild(report);this._consoleOutput.scrollTop=this._consoleOutput.scrollHeight}extractFiletype(name){return-1===(name=name.toLowerCase()).indexOf(".")?"unknown":"."+name.split(".").pop()}consoleLog(message){let atBottom=Math.abs(this._consoleOutput.scrollTop+this._consoleOutput.offsetHeight-this._consoleOutput.scrollHeight)<5;this._consoleOutput.textContent+="\n"+message;atBottom&&(this._consoleOutput.scrollTop=this._consoleOutput.scrollHeight)}async processFile(file,buffer,uploadLabel,boundingBoxes){const fileName=file.name;let processed;try{switch(this.extractFiletype(fileName)){case".wav":processed=await this.makeWav(buffer);break;case".cbor":processed=this.makeCbor(buffer);break;case".json":processed=this.makeJson(buffer);break;case".jpg":case".jpeg":processed=await this.makeImage(buffer,"image/jpeg");break;case".png":processed=await this.makeImage(buffer,"image/png");break;case".mp4":processed=await this.makeVideo(buffer,"video/mp4");break;case".csv":processed=await this.makeCsv(buffer);break;default:throw new Error("extension not supported (only "+this.validExtensions.slice(0,this.validExtensions.length-1).join(", ")+" and "+this.validExtensions[this.validExtensions.length-1]+" supported)")}}catch(ex2){let ex=ex2,ixS=(++this._currentFile).toString().padStart(this._totalFiles.toString().length," ");this.consoleLog(`[${ixS}/${this._totalFiles}] Failed to process ${fileName}: ${notify_43.Notify.extractMsg(ex)}`);this._failedFiles++;return}try{let data=new FormData;if(processed.attachment){data.append("body",new Blob([processed.encoded],{type:"application/json"}));data.append("attachments",new Blob([processed.attachment.values],{type:processed.attachment.type}))}let category=this._uploadCategory;if("split"===category){let hash=md5(this._ingestionApi.decode(buffer));for(;hash.length>0&&"f"===hash[0];)hash=hash.substr(1);if(0===hash.length)throw new Error("Unable to calculate MD5 hash of data.");let firstHashChar=hash[0];category=["0","1","2","3","4","5","6","7","8","9","a","b"].indexOf(firstHashChar)>-1?"training":"testing"}await this._ingestionApi.uploadData(category,fileName,processed.attachment?"multipart/form-data":processed.contentType,uploadLabel,processed.attachment?data:processed.encoded,"1",boundingBoxes).then(response=>{let ixS=(++this._currentFile).toString().padStart(this._totalFiles.toString().length," ");if(200===response.status)this.consoleLog(`[${ixS}/${this._totalFiles}] Uploading ${fileName} OK`);else{this.consoleLog(`[${ixS}/${this._totalFiles}] Failed to upload ${fileName} ${response.data}`);this._failedFiles++}})}catch(ex2){let ex=ex2,ixS=(++this._currentFile).toString().padStart(this._totalFiles.toString().length," ");this.consoleLog(`[${ixS}/${this._totalFiles}] Failed to upload ${fileName}: ${notify_43.Notify.extractMsg(ex)}`);this._failedFiles++}}makeCbor(buffer){return{encoded:buffer,contentType:"application/cbor"}}makeJson(buffer){return{encoded:buffer,contentType:"application/json"}}async makeImage(buffer,mimeType){const imageSignature=await this._ingestionApi.signBuffer(buffer);let data={protected:{ver:"v1",alg:"HS256"},signature:Array(64).fill("0").join(""),payload:{device_type:"EDGE_IMPULSE_UPLOADER",interval_ms:0,sensors:[{name:"image",units:"rgba"}],values:[`Ref-BINARY-${mimeType} (${buffer.length} bytes) ${imageSignature}`]}};data.signature=await this._ingestionApi.createSignature(data);return{encoded:this._ingestionApi.encode(JSON.stringify(data)),contentType:"application/json",attachment:{values:buffer,type:mimeType}}}async makeVideo(buffer,mimeType){const imageSignature=await this._ingestionApi.signBuffer(buffer);let data={protected:{ver:"v1",alg:"HS256"},signature:Array(64).fill("0").join(""),payload:{device_type:"EDGE_IMPULSE_UPLOADER",interval_ms:0,sensors:[{name:"video",units:"rgba"}],values:[`Ref-BINARY-${mimeType} (${buffer.length} bytes) ${imageSignature}`]}};data.signature=await this._ingestionApi.createSignature(data);return{encoded:this._ingestionApi.encode(JSON.stringify(data)),contentType:"application/json",attachment:{values:buffer,type:mimeType}}}async makeWav(buffer){if("82,73,70,70"!==buffer.slice(0,4).join(","))throw new Error("Not a WAV file, first four bytes are not RIFF.");const wav=new wavefile.WaveFile(buffer);wav.toBitDepth("16");const fmt=wav.fmt;let freq=fmt.sampleRate,totalSamples=wav.data.samples.length/(fmt.bitsPerSample/8),dataBuffers=[];for(let sx=0;sx<totalSamples;sx+=fmt.numChannels)try{let sum=0;for(let channelIx=0;channelIx<fmt.numChannels;channelIx++)sum+=wav.getSample(sx+channelIx);dataBuffers.push(sum/fmt.numChannels)}catch(ex){console.error("failed to call getSample() on WAV file",sx,ex);throw ex}let data={protected:{ver:"v1",alg:"HS256"},signature:Array(64).fill("0").join(""),payload:{device_type:"EDGE_IMPULSE_UPLOADER",interval_ms:1e3/freq,sensors:[{name:"audio",units:"wav"}],values:dataBuffers}};data.signature=await this._ingestionApi.createSignature(data);const encoded=JSON.stringify(data);return{encoded:this._ingestionApi.encode(encoded),contentType:"application/json"}}async makeCsv(buffer){let intervalMs,csvFile=this.parseCsvString((new TextDecoder).decode(buffer)),hasTimestamp=!0;if(0===csvFile.length)throw new Error("No lines in CSV file, need at least two (a header and a line with values)");if(Object.keys(csvFile[0]).indexOf("timestamp")>-1)if(1===csvFile.length)intervalMs=1e3;else{intervalMs=Number(csvFile[1].timestamp)-Number(csvFile[0].timestamp);if(!intervalMs||isNaN(intervalMs))throw new Error("Could not determine frequency, the timestamp column should contain increasing numbers")}else{hasTimestamp=!1;intervalMs=1e3;if(1!==csvFile.length)throw new Error("For CSV files without a timestamp column, need exactly one line with values (but found "+csvFile.length+")")}let columns=[];for(let k of Object.keys(csvFile[0]))"timestamp"!==k&&columns.push(k);let csvData=[];for(let ix=0;ix<csvFile.length;ix++){let line=csvFile[ix];if(hasTimestamp&&!("timestamp"in line))throw new Error("File does not have a timestamp column");let lineData=[];for(let k of columns){if(!(k in line))throw new Error("Line "+(ix+2)+" is missing column "+k);if(isNaN(line[k]))throw new Error("Line "+(ix+2)+" column "+k+" is not numeric");lineData.push(line[k])}csvData.push(lineData)}let data={protected:{ver:"v1",alg:"HS256"},signature:Array(64).fill("0").join(""),payload:{device_type:"EDGE_IMPULSE_UPLOADER",interval_ms:intervalMs,sensors:columns.map(c=>({name:c.trim(),units:"N/A"})),values:csvData}};data.signature=await this._ingestionApi.createSignature(data);const encoded=JSON.stringify(data);return{encoded:this._ingestionApi.encode(encoded),contentType:"application/json"}}parseCsvString(text){let firstLine=text.split("\n")[0].trim(),commaCount=firstLine.split(",").length,semicolonCount=firstLine.split(";").length,tabCount=firstLine.split("\t").length,delimiter=",";semicolonCount>commaCount&&semicolonCount>tabCount?delimiter=";":tabCount>commaCount&&tabCount>semicolonCount&&(delimiter="\t");let lines=function(strData,strDelimiter){const objPattern=new RegExp("(\\"+strDelimiter+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+strDelimiter+"\\r\\n]*))","gi");let arrData=[[]],arrMatches=null;for(;arrMatches=objPattern.exec(strData);){let strMatchedValue,strMatchedDelimiter=arrMatches[1];strMatchedDelimiter.length&&strMatchedDelimiter!==strDelimiter&&arrData.push([]);strMatchedValue=arrMatches[2]?arrMatches[2].replace(new RegExp('""',"g"),'"'):arrMatches[3];arrData[arrData.length-1].push(strMatchedValue)}return arrData}(text,delimiter),header=lines[0];if(0===header.length)throw new Error("No column names found in header");lines=lines.filter(l=>l.length===header.length);let ret=[];for(let l of lines.slice(1)){let obj={};for(let ix=0;ix<header.length;ix++){let value=l[ix];-1===value.indexOf(".")&&value.indexOf(",")>-1&&(value=value.replace(/,/g,"."));obj[header[ix]]=""===value?NaN:Number(value)}ret.push(obj)}return ret}}}));define("client/project/pages/version-ui",["require","exports","client/project/components/job-runner","shared/WebSocketTypes","client/notify"],(function(require,exports,job_runner_13,WebSocketTypes_16,notify_44){Object.defineProperty(exports,"__esModule",{value:!0});exports.VersionUI=void 0;exports.VersionUI=class{constructor(studioApi){this._jobCompleted=!1;this._restoreSuccessEls={modal:document.querySelector("#restore-started-modal"),link:document.querySelector("#restore-started-modal .project-link"),projectTitle:document.querySelector("#restore-started-modal .project-title"),version:document.querySelector("#restore-started-modal .project-version")};this._addEls={step1:{body:document.querySelector("#add-version-modal-step-1"),button:document.querySelector("#add-version-btn"),description:document.querySelector("#add-version-description"),storage:document.querySelector("#add-version-storage"),version:document.querySelector("#add-version-public")},step2:{body:document.querySelector("#add-version-modal-step-2"),button:document.querySelector("#add-version-modal .job-runner-cancel")}};this._publicEls={modal:document.querySelector("#make-public-modal"),step1:{body:document.querySelector("#make-public-modal-step-1")},step2:{body:document.querySelector("#make-public-modal-step-2"),link:document.querySelector("#make-public-link")},footer:document.querySelector("#make-public-footer"),button:document.querySelector("#make-public-modal .job-runner-cancel"),modalTitle:document.querySelector("#make-public-label"),versionLabel:document.querySelector("#make-public-label-2")};this._studioApi=studioApi;let addVersionJobSection=document.querySelector("#add-version-modal .job-runner");this._addVersionJobRunner=new job_runner_13.JobRunner(this._studioApi,addVersionJobSection);let makePublicJobSection=document.querySelector("#make-public-modal .job-runner");this._makePublicJobRunner=new job_runner_13.JobRunner(this._studioApi,makePublicJobSection);this._buildButton=document.querySelector("#add-version-btn");this._buildButton.onclick=ev=>{ev.preventDefault();this.startBuilding()};this._origText=this._buildButton.textContent||"";$("#add-version-modal").on("shown.bs.modal",()=>{if("none"!==this._addEls.step1.body.style.display){"Initial commit"!==this._addEls.step1.description.value&&(this._addEls.step1.description.value="");this._addEls.step1.description.focus();this._addEls.step1.description.value=this._addEls.step1.description.value;this._addEls.step1.description.select()}});$("#add-version-modal").on("hidden.bs.modal",()=>{this.addVersionSwitch("step1");this._jobCompleted&&(location.href=location.pathname+"?createdVersion=1")});this._addEls.step1.description.onkeydown=()=>this._addEls.step1.description.classList.remove("is-invalid");for(let r of Array.from(document.querySelectorAll("#versions-table tbody tr")))this.bindDropdown(r);this._restoreSuccessEls.link.addEventListener("click",ev=>{$(this._restoreSuccessEls.modal).modal("hide")});if(location.search.indexOf("storepublic=1")>-1){$("#add-version-modal").modal();this.addVersionSwitch("step1");this._addEls.step1.version&&(this._addEls.step1.version.checked=!0)}window.history.replaceState(null,"",window.location.pathname);this._studioApi.socket.addEventListener("connect",this.checkForRunningProcess.bind(this))}versioningDisableUI(){this._buildButton.classList.add("disabled");this._buildButton.textContent="Versioning...";$("#add-version-modal").modal();this.addVersionSwitch("step2")}async startBuilding(){try{this._studioApi.analytics.event("job-start",{event_category:"version"});if(!this._addEls.step1.description.value){this._addEls.step1.description.classList.add("is-invalid");return}this.versioningDisableUI();let bid=Number(this._addEls.step1.storage.value);this._addVersionCurrJobId=await this._addVersionJobRunner.startJob(this._studioApi.jobs.startVersionJob(this._studioApi.projectId,{description:this._addEls.step1.description.value,bucketId:0!==bid?bid:void 0,makePublic:!!this._addEls.step1.version&&this._addEls.step1.version.checked}));this._addVersionJobRunner.on("finished",this.addVersionJobFinished.bind(this))}catch(ex2){let ex=ex2;this.versioningEnableUI();this._addVersionJobRunner.startJobFailed(ex)}}versioningEnableUI(){this._buildButton.classList.remove("disabled");this._buildButton.textContent=this._origText}async addVersionJobFinished(id,success){if(id!==this._addVersionCurrJobId)return;this._studioApi.analytics.event("job-finish-"+(success?"success":"fail"),{event_category:"version"});let version;try{let resp=await this._studioApi.projects.listVersions(this._studioApi.projectId);if(!resp.body||!resp.body.success)throw resp.body&&resp.body.error||resp.response.statusText;version=(resp.body.versions||[]).sort((a,b)=>b.id-a.id)[0]}catch(ex2){let ex=ex2;notify_44.Notify.alert("Failed to get version information",notify_44.Notify.extractMsg(ex),"danger")}this.versioningEnableUI();if(success){this._jobCompleted=!0;if(this._addEls.step1.version&&this._addEls.step1.version.checked&&this._publicEls.modal&&version&&version.publicProjectUrl){this._publicEls.step2.link.href=version.publicProjectUrl;this._jobCompleted=!1;$("#add-version-modal").modal("hide");$(this._publicEls.modal).modal();this.makePublicSwitch("step2");$(this._publicEls.modal).on("hidden.bs.modal",()=>{location.href=location.pathname+"?createdVersion=1"})}}}async checkForRunningProcess(){if(!this._studioApi.isAdmin)return;const jobList=await this._makePublicJobRunner.getActiveJobList();if(void 0===jobList)return;console.log("active jobs",jobList.body.jobs);let versionJob=jobList.body.jobs.find(j=>j.key===WebSocketTypes_16.JOB_KEY_PREFIX.versioningWrapper);if(versionJob){this._addVersionCurrJobId=versionJob.id;this.versioningDisableUI();await this._addVersionJobRunner.resumeJob(versionJob.id);this._addVersionJobRunner.on("finished",this.addVersionJobFinished.bind(this))}let makePublicJob=jobList.body.jobs.find(j=>j.key===WebSocketTypes_16.JOB_KEY_PREFIX.restoreWrapper);if(makePublicJob&&this._publicEls.modal){this._makePublicCurrJobId=makePublicJob.id;this.makePublicSwitch("step1");$(this._publicEls.modal).modal();await this._makePublicJobRunner.resumeJob(makePublicJob.id);this._makePublicJobRunner.on("finished",this.makePublicJobFinished.bind(this))}}async makePublicJobFinished(id,success){if(id===this._makePublicCurrJobId&&success&&this._makePublicVersionId)try{let resp=await this._studioApi.projects.listVersions(this._studioApi.projectId);if(!resp.body||!resp.body.success)throw resp.body&&resp.body.error||resp.response.statusText;let version=(resp.body.versions||[]).find(x=>x.id===this._makePublicVersionId);if(version&&version.publicProjectUrl){this._publicEls.step2.link.href=version.publicProjectUrl;let publicEl=document.querySelector('#versions-table tr[data-id="'+version.id+'"] .key-public');publicEl&&(publicEl.innerHTML='<i class="far fa-check-circle pl-1"></i>');this.makePublicSwitch("step2")}}catch(ex2){let ex=ex2;notify_44.Notify.alert("Failed to get version information",notify_44.Notify.extractMsg(ex),"danger")}}addVersionSwitch(step){this._addEls.step1.body.style.display="none";this._addEls.step1.button.style.display="none";this._addEls.step2.body.style.display="none";this._addEls.step2.button.style.display="none";if("step1"===step){this._addEls.step1.body.style.display="";this._addEls.step1.button.style.display=""}if("step2"===step){this._addEls.step2.body.style.display="";this._addEls.step2.button.style.display=""}}makePublicSwitch(step){this._publicEls.step1.body.style.display="none";this._publicEls.step2.body.style.display="none";this._publicEls.footer.style.display="none";if("step1"===step){this._publicEls.step1.body.style.display="";this._publicEls.footer.style.display=""}"step2"===step&&(this._publicEls.step2.body.style.display="")}bindDropdown(r){for(let d of Array.from(r.querySelectorAll("a.dropdown-item")).map(a=>a)){let id=Number(r.dataset.id),version=r.dataset.version||"";d.onclick=async ev=>{d.dataset.action&&ev.preventDefault();switch(d.dataset.action){case"delete":if(await notify_44.Notify.confirm("Removing version "+version,`Are you sure you want to delete version ${version}? `+"This will only delete the version in the UI, but not delete the underlying data from the storage location.","Yes, remove","question","danger"))try{let resp=await this._studioApi.projects.deleteVersion(this._studioApi.projectId,id);if(!resp.body||!resp.body.success)throw resp.body&&resp.body.error||resp.response.statusText;location.href=location.pathname+"?removedVersion="+encodeURIComponent(version)}catch(ex2){let ex=ex2;notify_44.Notify.alert("Failed to remove version",notify_44.Notify.extractMsg(ex),"danger")}break;case"edit-description":{let v=await notify_44.Notify.prompt("Change description for version "+version,"Set the new description for version "+version,"Change description",r.querySelector(".key-description").textContent||"","question","info");if(v)try{let resp=await this._studioApi.projects.updateVersion(this._studioApi.projectId,id,{description:v});if(!resp.body||!resp.body.success)throw resp.body&&resp.body.error||resp.response.statusText;r.querySelector(".key-description").textContent=v}catch(ex2){let ex=ex2;notify_44.Notify.alert("Failed to change description",notify_44.Notify.extractMsg(ex),"danger")}break}case"make-public":if(!this._publicEls.modal)break;if(!await notify_44.Notify.confirm("Want to make version "+version+" public?","This will make all data and block state from this version available (read-only) on a public URL, and allows users to clone this project.","Yes, make public","question","info"))break;this._publicEls.modalTitle.textContent=`Making version ${version} public`;this._makePublicVersionId=id;this.makePublicSwitch("step1");$(this._publicEls.modal).modal();try{this._studioApi.analytics.event("job-start",{event_category:"make-public"});this._makePublicCurrJobId=await this._makePublicJobRunner.startJob(this._studioApi.jobs.startMakeVersionPublicJob(this._studioApi.projectId,id));this._makePublicJobRunner.on("finished",this.makePublicJobFinished.bind(this))}catch(ex2){let ex=ex2;this.versioningEnableUI();this._makePublicJobRunner.startJobFailed(ex)}break;case"make-private":if(!await notify_44.Notify.confirm("Want to make version "+version+" private?","If there are other public versions your project will still be accessible.","Yes, make private","question","info"))break;try{let resp=await this._studioApi.projects.makeVersionPrivate(this._studioApi.projectId,id);if(!resp.body||!resp.body.success)throw resp.body&&resp.body.error||resp.response.statusText;r.querySelector(".key-public").textContent="-";notify_44.Notify.notify("","Made project private","top","center","far fa-check-circle","success")}catch(ex2){let ex=ex2;notify_44.Notify.alert("Failed to make version private",notify_44.Notify.extractMsg(ex),"danger")}break;case"restore":try{let devkeys=await this._studioApi.projects.listDevkeys(this._studioApi.projectId);if(!devkeys.body||!devkeys.body.success)throw devkeys.body&&devkeys.body.error||devkeys.response.responseText;if(!devkeys.body.apiKey)throw new Error('Your current project has no development API key set, but it\'s required to restore to a version. Add one from the "Keys" page under the projects dashboard.');let projectTitleEl=document.querySelector("#projectName"),title=projectTitleEl?projectTitleEl.value+" v"+version:"",p=await notify_44.Notify.prompt("Name for the new project","This version will be restored into a new project. Enter a name for this project.","Restore version",title,"question","success");if(!p)return;let cp=await this._studioApi.projects.createProject({projectName:p,originalProjectVersionId:id});if(!cp.body||!cp.body.success)throw cp.body&&cp.body.error||cp.response.responseText;this._restoreSuccessEls.version.textContent=version;this._restoreSuccessEls.projectTitle.textContent=p;this._restoreSuccessEls.link.href="/studio/"+cp.body.id+"/restore?fromProjectId="+encodeURIComponent(this._studioApi.projectId)+"&fromProjectApiKey="+encodeURIComponent(devkeys.body.apiKey)+"&fromVersionId="+encodeURIComponent(id);$(this._restoreSuccessEls.modal).modal()}catch(ex2){let ex=ex2;notify_44.Notify.alert("Failed to restore version",notify_44.Notify.extractMsg(ex),"danger")}}this._studioApi.analytics.event("click",{event_category:"version-action",event_label:d.dataset.action})}}}}}));define("client/project/pages/restore-ui",["require","exports","client/project/components/job-runner","shared/WebSocketTypes"],(function(require,exports,job_runner_14,WebSocketTypes_17){Object.defineProperty(exports,"__esModule",{value:!0});exports.RestoreUI=void 0;exports.RestoreUI=class{constructor(studioApi){this._restoreErr={container:document.querySelector("#restore-error"),title:document.querySelector("#restore-error-header"),body:document.querySelector("#restore-error-text")};this._restoreSuccess={container:document.querySelector("#restore-success")};this._studioApi=studioApi;this._outputSection=document.querySelector("#restore-output-section");this._jobRunner=new job_runner_14.JobRunner(this._studioApi,this._outputSection);this._studioApi.socket.addEventListener("connect",this.checkForRunningProcess.bind(this))}async jobFinished(id,success){if(id===this._currJobId){this._studioApi.analytics.event("job-finish-"+(success?"success":"fail"),{event_category:"restore"});success?location.reload():this.setError("Restore job failed",'See "Restore progress" for more information',!1)}}successHandler(){this._restoreErr.container.style.display="none";this._restoreSuccess.container.style.display="block"}async checkForRunningProcess(){if(!this._studioApi.isAdmin)return;let activeJob=await this._jobRunner.getActiveJob(WebSocketTypes_17.JOB_KEY_PREFIX.restoreWrapper);if(activeJob){this._currJobId=activeJob.id;await this._jobRunner.resumeJob(activeJob.id);this._jobRunner.on("finished",this.jobFinished.bind(this))}else{let finishedJobs=await this._studioApi.jobs.listFinishedJobs(this._studioApi.projectId);if(!finishedJobs.body.success)return this.setError("Failed to check for finished jobs",finishedJobs.body.error||finishedJobs.response.statusText,!0);let finishedJob=finishedJobs.body.jobs.sort((a,b)=>+b.created-+a.created).find(x=>x.key===WebSocketTypes_17.JOB_KEY_PREFIX.restoreWrapper);if(!finishedJob)return this.setError("No restore job started","There is no restore job attached to this project. Are you sure you started a restore action?",!0);await this._jobRunner.resumeJob(finishedJob.id);finishedJob.finishedSuccessful?this.successHandler():this.setError("Restore job failed",'See "Restore progress" for more information',!1)}}setError(header,body,hideOutput){this._restoreErr.container.style.display="block";this._restoreErr.title.textContent=header;this._restoreErr.body.textContent=body;hideOutput&&(this._outputSection.style.display="none")}}}));define("client/organization/pages/organization-deploy-ui",["require","exports","client/notify","client/organization/components/form-binding"],(function(require,exports,notify_45,form_binding_3){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationDeployUi=void 0;exports.OrganizationDeployUi=class{constructor(studioApi){this._addDeploy={addBtn:document.querySelector("#add-deployment-btn"),modal:document.querySelector("#add-deployment-block"),photoLink:document.querySelector("#add-deployment-photo"),photo:document.querySelector("#add-deployment-photo img"),docker:document.querySelector("#input-add-deployment-docker")};this._studioApi=studioApi;this._deployForm=new form_binding_3.FormBinding(this._addDeploy.modal,{createTitle:async()=>"Add a new deployment block",updateTitle:async s=>"Edit deployment block",create:this.saveBlock.bind(this),update:this.updateBlock.bind(this),fetch:this.fetchBlock.bind(this),createErrorText:"Failed to add deployment block",updateErrorText:"Failed to update deployment block",createSaveBtnText:"Add deployment block",updateSaveBtnText:"Update deployment block"});this._addDeploy.addBtn&&(this._addDeploy.addBtn.onclick=async ev=>{ev.preventDefault();this._addDeploy.photo.src=this._studioApi.staticAssetsPrefix+"/dev-boards/edgeimpulse.svg";this._photoBlob=void 0;await this._deployForm.bindCreate(async()=>{this._addDeploy.docker.readOnly=!1;this._addDeploy.docker.dataset.dockerContainer=""},data=>{location.href=location.pathname+"?createdBlock="+encodeURIComponent(data.name)});this._deployForm.showModal()});this._addDeploy.docker.onclick=()=>{if(this._addDeploy.docker.readOnly){this._addDeploy.docker.value=this._addDeploy.docker.dataset.dockerContainer||"";this._addDeploy.docker.readOnly=!1}};this._addDeploy.photoLink.onclick=ev=>{ev.preventDefault();this.getPhoto((blob,url)=>{this._photoBlob=blob;this._addDeploy.photo.src=url})};for(let r of Array.from(document.querySelectorAll(".deploy-option")))this.bindDeployDropdown(r);window.history.replaceState(null,"",window.location.pathname)}bindDeployDropdown(r){console.log("bindDeployDropdown",r);for(let d of Array.from(r.querySelectorAll("*[data-action]")).map(a=>a)){let id=Number(r.dataset.id);d.onclick=async ev=>{ev.preventDefault();switch(d.dataset.action){case"delete":if(await notify_45.Notify.confirm('Removing "'+r.dataset.name+'"',`Are you sure you want to delete "${r.dataset.name}"?`,"Yes, remove","question","danger")&&r.dataset.name)try{let resp=await this._studioApi.blocks.deleteOrganizationDeployBlock(this._studioApi.organizationId,id);if(!resp.body||!resp.body.success)throw resp.body&&resp.body.error||resp.response.statusText;location.href=location.pathname+"?removedBlock="+encodeURIComponent(r.dataset.name)}catch(ex2){let ex=ex2;notify_45.Notify.alert("Failed to remove deployment block",notify_45.Notify.extractMsg(ex),"danger")}break;case"edit-block":try{let blockBefore=await this.fetchBlock(id);this._addDeploy.photo.src=blockBefore.photo||this._studioApi.staticAssetsPrefix+"/dev-boards/edgeimpulse.svg";this._photoBlob=void 0;await this._deployForm.bindUpdate(id,async b=>{if(b.dockerContainerManagedByEdgeImpulse){this._addDeploy.docker.value="Managed through the Edge Impulse CLI, click to edit";this._addDeploy.docker.readOnly=!0;this._addDeploy.docker.dataset.dockerContainer=b.dockerContainer}else{this._addDeploy.docker.value=b.dockerContainer;this._addDeploy.docker.readOnly=!1;this._addDeploy.docker.dataset.dockerContainer=""}},block=>{let option=document.querySelector('.deploy-option[data-id="'+id+'"]'),trName=option.querySelector(".deploy-option-text"),image=option.querySelector(".deploy-option-image-container img");option.dataset.name=block.name;option.dataset.originalTitle=block.description;trName.title=trName.textContent=block.name||"";if(block.photo){image.classList.remove("px-4","py-4");image.classList.add("px-2","py-2");image.src=block.photo}else{image.classList.add("px-4","py-4");image.classList.remove("px-2","py-2");image.src=this._studioApi.staticAssetsPrefix+"/dev-boards/edgeimpulse.svg"}this._deployForm.hideModal();notify_45.Notify.notify("",'Updated "'+block.name+'"',"top","center","far fa-check-circle","success")});this._deployForm.showModal()}catch(ex2){let ex=ex2;notify_45.Notify.alert("Failed to fetch block",notify_45.Notify.extractMsg(ex),"danger")}}this._studioApi.analytics.event("click",{event_category:"transform-action",event_label:d.dataset.action})}}}getPhoto(callback){let input=document.createElement("input");input.type="file";input.accept="image/*";input.onchange=e=>{if(!input.files)return;let file=input.files[0],reader=new FileReader;reader.readAsDataURL(file);reader.onload=readerEvent=>{if(!readerEvent.target)return;let content=readerEvent.target.result;if("string"!=typeof content)return;const img=new Image;img.onload=()=>{const canvas=document.createElement("canvas");canvas.width=300;canvas.height=300;const ctx=canvas.getContext("2d");if(!ctx)return;ctx.fillStyle="white";ctx.fillRect(0,0,canvas.width,canvas.height);let scale=Math.min(canvas.width/img.width,canvas.height/img.height),w=img.width*scale,h=img.height*scale,left=canvas.width/2-w/2,top=canvas.height/2-h/2;ctx.drawImage(img,left,top,w,h);canvas.toBlob(blob=>{if(!blob)return;let a=new FileReader;a.onload=x=>{x.target&&x.target.result&&callback(blob,x.target.result)};a.readAsDataURL(blob)})};img.src=content}};input.click()}async saveBlock(obj,saveBtn){saveBtn.textContent="Adding deployment block...";if("number"==typeof obj.limitsCpu&&"number"==typeof obj.requestsCpu&&obj.requestsCpu>obj.limitsCpu)throw new Error("Compute limit should be higher or equal than compute request");if("number"==typeof obj.limitsMemory&&"number"==typeof obj.requestsMemory&&obj.requestsMemory>obj.limitsMemory)throw new Error("Memory limit should be higher or equal than memory request");if(typeof obj.limitsCpu!=typeof obj.limitsMemory)throw new Error("If setting compute limit, then both CPU and memory need to be set");if(typeof obj.requestsCpu!=typeof obj.requestsMemory)throw new Error("If setting compute requests, then both CPU and memory need to be set");if(obj.integrateUrl&&!obj.integrateUrl.startsWith("http:")&&!obj.integrateUrl.startsWith("https:"))throw new Error("Integration URL should start with http: or https:");this._addDeploy.docker.readOnly&&(obj.dockerContainer=this._addDeploy.docker.dataset.dockerContainer||"");let res=await this._studioApi.blocks.addOrganizationDeployBlock(this._studioApi.organizationId,obj.name,obj.dockerContainer,obj.description,obj.cliArguments,obj.requestsCpu,obj.requestsMemory,obj.limitsCpu,obj.limitsMemory,this._photoBlob||"",obj.integrateUrl,obj.privileged,obj.mountLearnBlock,obj.supportsEonCompiler,obj.showOptimizations);if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText}async updateBlock(id,obj,saveBtn){saveBtn.textContent="Updating deployment block...";if("number"==typeof obj.limitsCpu&&"number"==typeof obj.requestsCpu&&obj.requestsCpu>obj.limitsCpu)throw new Error("Compute limit should be higher or equal than compute request");if("number"==typeof obj.limitsMemory&&"number"==typeof obj.requestsMemory&&obj.requestsMemory>obj.limitsMemory)throw new Error("Memory limit should be higher or equal than memory request");if(typeof obj.limitsCpu!=typeof obj.limitsMemory)throw new Error("If setting compute limit, then both CPU and memory need to be set");if(typeof obj.requestsCpu!=typeof obj.requestsMemory)throw new Error("If setting compute requests, then both CPU and memory need to be set");if(obj.integrateUrl&&!obj.integrateUrl.startsWith("http:")&&!obj.integrateUrl.startsWith("https:"))throw new Error("Integration URL should start with http: or https:");let res=await this._studioApi.blocks.updateOrganizationDeployBlock(this._studioApi.organizationId,id,obj.name,obj.dockerContainer,obj.description,obj.cliArguments,obj.requestsCpu,obj.requestsMemory,obj.limitsCpu,obj.limitsMemory,this._photoBlob||"",obj.integrateUrl,obj.privileged,obj.mountLearnBlock,obj.supportsEonCompiler,obj.showOptimizations);if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText;let block=await this.fetchBlock(id);obj.photo=block.photo}async fetchBlock(id){let res=await this._studioApi.blocks.listOrganizationDeployBlocks(this._studioApi.organizationId);if(!res.body||!res.body.success||!res.body.deployBlocks)throw res.body&&res.body.error||res.response.responseText;let b=res.body.deployBlocks.find(x=>x.id===id);if(!b)throw new Error("Failed to find deploy block");return b}}}));define("client/upload-portal/upload-portal-ui",["require","exports","client/global-ui","client/notify"],(function(require,exports,global_ui_12,notify_46){Object.defineProperty(exports,"__esModule",{value:!0});exports.UploadPortalUi=void 0;const MAX_PARALLEL_UPLOADS=10,uploadStatus={waiting:1,inProgress:2,cancelled:3,failed:4,succeed:5};class FileUpload{constructor(portalApi,portalId,file,fullPath,progressCallback){this._elem=document.createElement("div");this._hash="";this._oReq=new XMLHttpRequest;this._percentage=0;this._size=0;this._sizeUploaded=0;this._cancelled=!1;this._retriesLeft=5;this._portalApi=portalApi;this._portalId=portalId;this._file=file;this._fileName=fullPath.replace(/^\/|\/$/g,"");this._size=file.size;this._progressCallback=progressCallback;this.setReq();this.uploadStatus=uploadStatus.waiting}async getHash(){let bufferStart=await this._file.slice(0,1024).arrayBuffer(),bufferEnd=await this._file.slice(0,1024).arrayBuffer(),buffer=new Uint8Array(bufferStart.byteLength+bufferEnd.byteLength);buffer.set(new Uint8Array(bufferStart),0);buffer.set(new Uint8Array(bufferEnd),bufferStart.byteLength);return md5(new Uint8Array(buffer).toString())}async startUpload(){if(!(--this._retriesLeft<=0)){this.uploadStatus=uploadStatus.inProgress;try{this._status="Waiting...";this._percentage=0;this._sizeUploaded=0;this._hash=await this.getHash();this.updateProgressBar();let link=await this.getSignedLink();if(!link)return;this.upload(link)}catch(ex2){let ex=ex2;notify_46.Notify.notify("Error processing file",notify_46.Notify.extractMsg(ex),"top","center","alert","warning");this._status="Upload failed";this.uploadStatus=uploadStatus.failed;this.updateProgressBar();setTimeout(async()=>{await this.startUpload()},1e3)}}}createUIElement(list){let uploadList=list;this._elem.classList.add("fade","show","text-sm");this._elem.textContent=this._fileName;this._status="Preparing upload";this.updateProgressBar();uploadList.append(this._elem)}abort(){this._cancelled=!0;this.uploadStatus=uploadStatus.cancelled;this._oReq.abort()}async getSignedLink(){let resp,req={fileHash:this._hash,fileName:this._fileName,fileSize:this._file.size};try{resp=await this._portalApi.createSignedUploadLink(this._portalId,req);if(!resp||!resp.body.success)throw new Error(resp.body&&resp.body.error||resp.response.responseText)}catch(ex2){let ex=ex2;notify_46.Notify.notify("Failed to create signed link",notify_46.Notify.extractMsg(ex),"top","center","far fa-cross-circle","warning");return}if(resp.body.url&&!resp.body.ETag){this._status="Uploading new file";return resp.body.url}if(resp.body.url&&resp.body.ETag){this._status="Replacing file with new version";return resp.body.url}if(!resp.body.url&&resp.body.ETag){this._status="This file was already uploaded";this._percentage=100;this._sizeUploaded=this._size;this.uploadStatus=uploadStatus.cancelled;this.updateProgressBar(this._progressCallback)}}updateProgressBar(callback){let spanTxt=this._elem.querySelector("span");if(!spanTxt){spanTxt=document.createElement("span");this._elem.appendChild(spanTxt)}let pDiv=this._elem.querySelector("div.progress"),pbDiv=this._elem.querySelector("div.progress-bar");if(!pDiv){pDiv=document.createElement("div");pDiv.classList.add("progress");pbDiv=document.createElement("div");pbDiv.classList.add("progress-bar");pbDiv.setAttribute("role","progressbar");pbDiv.setAttribute("aria-valuemin","0");pbDiv.setAttribute("aria-valuemax","100");pDiv.append(pbDiv);this._elem.textContent="";this._elem.appendChild(pDiv)}spanTxt.textContent=`${this._fileName} - ${(this._percentage||0).toFixed(0)}%`;if(pbDiv){pbDiv.setAttribute("aria-valuenow",this._percentage.toFixed());pbDiv.style.width=`${this._percentage}%`}let statusDiv=this._elem.querySelector("div.s3-upload-status");if(!statusDiv){statusDiv=document.createElement("div");statusDiv.classList.add("s3-upload-status");this._elem.appendChild(statusDiv)}this._status&&statusDiv&&(statusDiv.textContent=this._status);if(this._serverMsg){statusDiv.dataset.toggle="tooltip";statusDiv.classList.add("pointer");statusDiv.dataset.placement="left";statusDiv.title=this._serverMsg;$(statusDiv).tooltip()}callback&&callback()}setReq(){this._oReq.ontimeout=async()=>{await this.startUpload()};this._oReq.onreadystatechange=()=>{if(4===this._oReq.readyState&&200===this._oReq.status){this.uploadStatus=uploadStatus.succeed;this._status="Upload complete";this._percentage=100;this._sizeUploaded=this._size}else if(4===this._oReq.readyState&&200!==this._oReq.status){this._status="Upload failed";this._serverMsg=this._oReq.responseText.replace(/(<([^>]+)>)/gi," ").trim();if(this._cancelled)this.uploadStatus=uploadStatus.cancelled;else{this.uploadStatus=uploadStatus.failed;if(400===this._oReq.status){let errMsg=this._oReq.statusText;notify_46.Notify.notify(`Uploading ${this._fileName} failed`,errMsg,"top","center","far fa-cross-circle","danger");this._status=[this._status,errMsg].join(" - ")}else{let errMsg=0!==this._oReq.status?this._oReq.status+": "+this._oReq.responseText:"Upload rejected by the browser. Are the CORS headers for this bucket set correctly?";notify_46.Notify.notify(`Uploading ${this._fileName} failed`,errMsg,"top","center","far fa-cross-circle","danger");setTimeout(async()=>{await this.startUpload()},1e3)}}}this.updateProgressBar(this._progressCallback)};this._oReq.upload.onprogress=async oEvent=>{if(oEvent.lengthComputable){this._sizeUploaded=oEvent.loaded;this._percentage=Math.round(oEvent.loaded/oEvent.total*100);this.updateProgressBar(this._progressCallback)}};this._oReq.upload.onloadstart=()=>{this._status="Uploading..."}}upload(link){this._oReq.open("PUT",link,!0);this._oReq.send(this._file)}getUploaded(){return this._sizeUploaded||0}getFileSize(){return this._size||0}}exports.UploadPortalUi=class{constructor(portalApi,portalId){var _a;this._fileInput=document.querySelector("#large-data-file");this._cancelUploadButton=document.querySelector("#cancel-upload");this._clearListButton=document.querySelector("#clear-list");this._fileInfo=document.querySelector("#file-information");this._chunkInfo=document.querySelector("#chunk-information");this._totalProgressBar=document.querySelector("#total-upload-progress");this._progressBar=document.querySelector("#progress-bar");this._customFileUpload=document.querySelector(".custom-file-upload");this._uploadList=document.querySelector("#upload-list");this._folders=document.querySelector("#file-list");this._filesList=document.querySelector("#portal-files-in-folder");this._rootButton=document.querySelector("#portal-navbar-folders button");this._filesListLoading=document.querySelector("#portal-files-in-folder-loading");this._filesListEmpty=document.querySelector("#portal-files-in-folder-empty");this._refreshListIx=0;this._fileListIx=0;this._uploadLocation=document.querySelector("#upload-location");this._folderTemplate=document.querySelector("#portal-folder-template").content.querySelector("li");this._breadcrumb=document.querySelector("ol.breadcrumb");this._activePath="";this._fileUploads=[];this._uploadComplete=!1;this._cancelled=!1;this._portalName=(null===(_a=document.querySelector("#portal-navbar-folders span"))||void 0===_a?void 0:_a.textContent)||"";this._portalApi=portalApi;this._portalId=portalId;let preventDefault=e=>{e.preventDefault()};this._fileInput.onchange=async e=>{preventDefault(e);await this.startUploads(e)};this._customFileUpload.addEventListener("drag",preventDefault);this._customFileUpload.addEventListener("dragover",preventDefault);this._customFileUpload.addEventListener("dragstart",preventDefault);this._customFileUpload.addEventListener("dragover",e=>{preventDefault(e);this._customFileUpload.classList.add("is-dragover")});this._customFileUpload.addEventListener("dragenter",e=>{preventDefault(e);this._customFileUpload.classList.add("is-dragover")});this._customFileUpload.addEventListener("dragend",e=>{preventDefault(e);this._customFileUpload.classList.remove("is-dragover")});this._customFileUpload.addEventListener("dragleave",e=>{preventDefault(e);this._customFileUpload.classList.remove("is-dragover")});this._customFileUpload.addEventListener("drop",async e=>{preventDefault(e);this._customFileUpload.classList.remove("is-dragover");await this.startUploads(e)});this._cancelUploadButton.onclick=async()=>{this._customFileUpload.reset();let originalText=this._cancelUploadButton.textContent;try{this._cancelUploadButton.classList.add("disabled");this._cancelUploadButton.disabled=!0;this._cancelUploadButton.textContent=" Cancelling...";this._cancelled=!0;if(!await notify_46.Notify.confirm("Cancel upload","Cancel the uploads and clear file list.","Yes","question","danger"))return;this._fileUploads.forEach(fu=>{fu.abort()});this._fileUploads=[];this._uploadList.textContent="";this.hideCancelUploadButton();this.hideClearListButton();this.hideProgressBar()}catch(ex2){let ex=ex2;notify_46.Notify.notify("Failed to cancel the current upload",notify_46.Notify.extractMsg(ex),"top","center","far fa-cross-circle","warning")}finally{this._cancelUploadButton.textContent=originalText;this._cancelUploadButton.classList.remove("disabled");this._cancelUploadButton.disabled=!1}};this._clearListButton.onclick=()=>{this._customFileUpload.reset();this.clearList();this.hideClearListButton();this.hideProgressBar();this.resetProgressBar()};this._rootButton.onclick=async e=>{e.preventDefault();this._activePath="/";await this.getFileList(this._folders)};this.processQueue();window.onload=async e=>{await this.getFileList(this._folders)};window.onpopstate=async e=>{if(!e.state)return;let state=e.state;if(state.items&&state.prefix){this.updateFileList(state.items);this.updateSideBar(this._folders,state.items.filter(f=>0===Number(f.size)));this.updateBreadCrumb(state.prefix);this._activePath=state.prefix}else await this.getFileList(this._folders)}}clearList(){this._fileUploads=[];this._uploadList.textContent="";this.hideCancelUploadButton();this.hideClearListButton();this.hideProgressBar();this.resetProgressBar()}resetProgressBar(){this._totalProgressBar.style.width="0%";this._totalProgressBar.setAttribute("aria-valuenow",(0).toFixed(0));let fileInfoQ4=this._fileInfo.querySelector("h4");fileInfoQ4&&(fileInfoQ4.textContent="Upload progress (0%)")}hideProgressBar(){this._progressBar.style.display="none";this._fileInfo.style.display="none";this._chunkInfo.style.display="none"}showProgressBar(){this._progressBar.style.removeProperty("display");this._fileInfo.style.removeProperty("display");this._chunkInfo.style.removeProperty("display")}async getFileList(ul){var _a;clearTimeout(this._fileListTimeout);let ix=++this._fileListIx,emptyTimeout=setTimeout(()=>{if(ix!==this._fileListIx)return;this._filesListLoading.style.display="";let tbody=this._filesList.querySelector("tbody");tbody&&(tbody.innerHTML="")},100);try{let prefix=ul.dataset.prefix||"/",resp=await this._portalApi.listPortalFilesInFolder(this._portalId,{prefix:prefix});if(!resp||!resp.body.success)throw new Error(resp.body&&resp.body.error||resp.response.responseText);clearTimeout(emptyTimeout);if(ix!==this._fileListIx)return;let sortedItems=(null===(_a=resp.body.files)||void 0===_a?void 0:_a.sort((a,b)=>{let textA=a.name.toUpperCase(),textB=b.name.toUpperCase();return textA<textB?-1:textA>textB?1:0}))||[];this.updateBreadCrumb(prefix);this.updateSideBar(ul,sortedItems.filter(f=>0===Number(f.size)));this.updateFileList(sortedItems);this._activePath=prefix;window.history.pushState({items:sortedItems,prefix:prefix},"")}catch(ex2){let ex=ex2;notify_46.Notify.notify("Error loading file list",notify_46.Notify.extractMsg(ex),"top","center","far fa-cross-circle","warning");return!1}finally{this._filesListLoading.style.display="none";clearTimeout(emptyTimeout)}return!0}updateFileList(items){let fileList=this._filesList.querySelector("tbody");if(fileList){fileList.textContent="";this._filesListEmpty.style.display=0===items.length?"":"none";items.filter(i=>0===Number(i.size)).forEach(item=>{let row=document.createElement("tr");row.classList.add("portal-folder");let nameCell=document.createElement("td"),sizeCell=document.createElement("td"),dateCell=document.createElement("td"),folderIcon=document.createElement("i");folderIcon.classList.add("fas","fa-folder","mr-2");let label=document.createElement("span");label.textContent=item.name;this._folders.dataset.prefix="/";row.onclick=async()=>{var _a,_b;let newPath=item.path+item.name,ul=null===(_a=this._folders.parentElement)||void 0===_a?void 0:_a.querySelector(`ul[data-prefix="/${newPath.replace(/^\//g,"")}"]`);if(ul){this._activePath=newPath;await this.getFileList(ul);this.updateBreadCrumb(newPath);let div=ul.parentElement;if(!div)return;div.classList.add("show");let i=null===(_b=null==div?void 0:div.parentElement)||void 0===_b?void 0:_b.querySelector("i");if(!i)return;i.classList.replace("fa-folder","fa-folder-open")}};nameCell.title=item.name;nameCell.appendChild(folderIcon);nameCell.appendChild(label);row.appendChild(nameCell);row.appendChild(dateCell);row.appendChild(sizeCell);null==fileList||fileList.appendChild(row)});items.filter(i=>Number(i.size)>0).forEach(item=>{let row=document.createElement("tr");row.classList.add("portal-file");let nameCell=document.createElement("td"),sizeCell=document.createElement("td"),dateCell=document.createElement("td"),i=document.createElement("i");i.classList.add("far","fa-file","mr-2");let nameSpan=document.createElement("span");nameSpan.textContent=nameCell.title=item.name;nameCell.appendChild(i);nameCell.appendChild(nameSpan);if(item.addedDate){dateCell.textContent=global_ui_12.GlobalUI.getFriendlyDateString(item.addedDate);dateCell.dataset.friendlyDate=dateCell.title=item.addedDate.toString()}sizeCell.textContent=global_ui_12.GlobalUI.getFriendlyFileSizeString(item.size||0);sizeCell.title=`${item.size||0} Bytes`;row.appendChild(nameCell);row.appendChild(dateCell);row.appendChild(sizeCell);null==fileList||fileList.appendChild(row)})}}updateSideBar(list,items){if(list){list.textContent="";null==items||items.forEach(item=>{this.addSideBarItem(list,item)})}}addSideBarItem(list,item,temp){var _a;let folder=this._folderTemplate.cloneNode(!0);folder.dataset.type="folder";folder.dataset.name=item.name;temp&&(folder.dataset.temp="true");let div=folder.querySelector("div");if(!div)return;div.id="f"+md5(item.path+item.name);let btn=folder.querySelector("button");if(!btn)return;btn.dataset.target="#"+(null==div?void 0:div.id);if(!folder.querySelector("i"))return;let label=folder.querySelector("span");if(!label)return;label.textContent=" "+item.name;let subUl=folder.querySelector("ul");if(!subUl)return;let activePath=this._activePath.replace(/\/$/g,""),itemPath=item.path.replace(/\/$/g,"")+"/"+item.name;subUl.dataset.prefix=itemPath;if(temp||""!==activePath&&0===(activePath+"/").indexOf(itemPath+"/")){div.classList.add("show");let i=null===(_a=null==div?void 0:div.parentElement)||void 0===_a?void 0:_a.querySelector("i");if(!i)return;i.classList.replace("fa-folder","fa-folder-open")}const removeTempFolders=()=>{this._folders.querySelectorAll("li[data-temp]").forEach(tempItem=>{tempItem.remove()})},update=async()=>{removeTempFolders();if(subUl){this._activePath=itemPath;await this.getFileList(subUl);this.updateBreadCrumb(itemPath)}};$(div).on("hide.bs.collapse",async event=>{if(0!==(itemPath+"/").indexOf(activePath+"/"))event.currentTarget===event.target&&await(async()=>{var _a,_b,_c,_d,_e;await update();let i=null===(_a=null==div?void 0:div.parentElement)||void 0===_a?void 0:_a.querySelector("i");if(i){null===(_c=null===(_b=null==folder?void 0:folder.parentElement)||void 0===_b?void 0:_b.querySelectorAll(".collapse.show"))||void 0===_c||_c.forEach(e=>e.classList.remove("show"));null===(_e=null===(_d=null==folder?void 0:folder.parentElement)||void 0===_d?void 0:_d.querySelectorAll("i.fa-folder-open"))||void 0===_e||_e.forEach(e=>{e.classList.replace("fa-folder-open","fa-folder")});i.classList.replace("fa-folder-open","fa-folder")}})();else{event.preventDefault();event.stopPropagation();if(!subUl)return;this._activePath=itemPath;await this.getFileList(subUl);this.updateBreadCrumb(itemPath)}});$(div).on("show.bs.collapse",async event=>{event.currentTarget===event.target&&await(async()=>{var _a,_b,_c,_d,_e;await update();let i=null===(_a=null==div?void 0:div.parentElement)||void 0===_a?void 0:_a.querySelector("i");if(i){null===(_c=null===(_b=null==folder?void 0:folder.parentElement)||void 0===_b?void 0:_b.querySelectorAll(".collapse.show"))||void 0===_c||_c.forEach(e=>e.classList.remove("show"));null===(_e=null===(_d=null==folder?void 0:folder.parentElement)||void 0===_d?void 0:_d.querySelectorAll("i.fa-folder-open"))||void 0===_e||_e.forEach(e=>{e.classList.replace("fa-folder-open","fa-folder")});i.classList.replace("fa-folder","fa-folder-open")}})()});let nextSibling=null;if(temp){let sortedItems=[...Array.from(list.querySelectorAll("li[data-type=folder]")).map(li=>({name:li.dataset.name||"",item:li})),{name:item.name}].sort((a,b)=>{let upa=a.name.toUpperCase(),upb=b.name.toUpperCase();return upa<upb?-1:upa>upb?1:0}),itemFound=!1;for(let i of sortedItems)if(i.name===item.name)itemFound=!0;else if(itemFound&&!nextSibling){nextSibling=i.item||null;break}}list.insertBefore(folder,nextSibling)}updateBreadCrumb(prefix,editMode){let newUploadLocationText=this._portalName+("/"===prefix?"":prefix);if(newUploadLocationText!==this._uploadLocation.textContent){this.clearList();this._uploadLocation.textContent=newUploadLocationText}this._breadcrumb.textContent="";let rootLi=document.createElement("li");rootLi.classList.add("breadcrumb-item");rootLi.textContent=this._portalName;rootLi.dataset.prefix="/";rootLi.onclick=async()=>{this._activePath="/";await this.getFileList(this._folders)};this._breadcrumb.appendChild(rootLi);let breadcrumbs=prefix.replace(/^\/|\/$/g,"").split("/").filter(b=>b.length>0),pre=[];for(let n of breadcrumbs){let li=document.createElement("li");li.classList.add("breadcrumb-item");li.textContent=n;li.dataset.prefix=[...pre,n].join("/");li.onclick=async()=>{var _a,_b;let newPath=li.dataset.prefix||"/",ul=null===(_a=this._folders.parentElement)||void 0===_a?void 0:_a.querySelector(`ul[data-prefix="/${newPath.replace(/^\//g,"")}"]`);if(ul){this._activePath=newPath;await this.getFileList(ul);this.updateBreadCrumb(newPath);let div=ul.parentElement;null==div||div.classList.add("show");let i=null===(_b=null==div?void 0:div.parentElement)||void 0===_b?void 0:_b.querySelector("i");null==i||i.classList.replace("fa-folder","fa-folder-open")}else;};this._breadcrumb.appendChild(li);pre.push(n)}let newLeveLi=document.createElement("li");newLeveLi.classList.add("breadcrumb-item");let breadcrumbPlus=document.createElement("a");breadcrumbPlus.classList.add("btn","btn-sm","btn-outline-white","breadcrumb-item-plus");let breadcrumbI=document.createElement("i");breadcrumbI.classList.add("fas","fa-folder-plus");let breadcrumbSpan=document.createElement("span");breadcrumbSpan.textContent="Create new folder";breadcrumbPlus.appendChild(breadcrumbI);breadcrumbPlus.appendChild(breadcrumbSpan);const addNewLevel=()=>{let textField=document.createElement("input");textField.value="";textField.type="text";textField.placeholder="new directory level";textField.classList.add("new-level-input");breadcrumbPlus.replaceWith(textField);textField.focus();textField.onkeydown=async event=>{var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m,_o;let name=textField.value.trim();if("Enter"===event.key)if(name.length>0){let newPath=[...breadcrumbs,name].join("/").replace(/^\/|\/$/g,"");newPath.startsWith("/")||(newPath="/"+newPath);let ul=null===(_a=this._folders.parentElement)||void 0===_a?void 0:_a.querySelector(`ul[data-prefix="/${newPath.replace(/^\//g,"")}"]`);if(ul){this._activePath=newPath;await this.getFileList(ul);this.updateBreadCrumb(newPath,!0);let div=ul.parentElement;if(!div)return;div.classList.add("show");let i=null===(_b=null==div?void 0:div.parentElement)||void 0===_b?void 0:_b.querySelector("i");if(!i)return;i.classList.replace("fa-folder","fa-folder-open");return}let item={name:name,path:this._activePath+""},list=null===(_c=this._folders.parentElement)||void 0===_c?void 0:_c.querySelector(`ul[data-prefix="${this._activePath}"]`);list&&this.addSideBarItem(list,item,!0);this._activePath=newPath;this.updateFileList([]);this.updateBreadCrumb(newPath)}else textField.blur();else if("Escape"===event.key)textField.blur();else if("Tab"===event.key||"/"===event.key){event.preventDefault();if(""===name)return;let newPath=this._activePath.replace(/\/$/g,"")+"/"+name,ul=null===(_d=this._folders.parentElement)||void 0===_d?void 0:_d.querySelector(`ul[data-prefix="/${newPath.replace(/^\//g,"")}"]`);if(ul){this._activePath=newPath;await this.getFileList(ul);this.updateBreadCrumb(newPath,!0);let div=ul.parentElement;if(!div)return;div.classList.add("show");let i=null===(_e=null==div?void 0:div.parentElement)||void 0===_e?void 0:_e.querySelector("i");if(!i)return;i.classList.replace("fa-folder","fa-folder-open");return}let item={name:name,path:this._activePath+""},list=null===(_f=this._folders.parentElement)||void 0===_f?void 0:_f.querySelector(`ul[data-prefix="${this._activePath}"]`);list&&this.addSideBarItem(list,item,!0);this._activePath=newPath;this.updateFileList([]);this.updateBreadCrumb(newPath,!0)}else if("Backspace"===event.key){if(""!==name)return;let lastFolder=this._activePath.split("/").pop()||"";event.preventDefault();let state=window.history.state,lastRealPath=(null===(_g=null==state?void 0:state.prefix)||void 0===_g?void 0:_g.replace(/^\/|\/$/g,""))||"",newPath=breadcrumbs.slice(0,breadcrumbs.length-1).join("/").replace(/^\/|\/$/g,"");if(lastRealPath.length>newPath.length){let ul=null===(_h=this._folders.parentElement)||void 0===_h?void 0:_h.querySelector(`ul[data-prefix="/${newPath}"]`);if(ul){this._activePath=newPath;await this.getFileList(ul);this.updateBreadCrumb(newPath,!0);let textField2=this._breadcrumb.querySelector("input.new-level-input");textField2&&(textField2.value=lastFolder)}return}this._activePath="/"+newPath;if(lastRealPath===newPath)if(null==state?void 0:state.items){this.updateFileList(state.items);let elem=null===(_j=this._folders.parentElement)||void 0===_j?void 0:_j.querySelector(`ul[data-prefix="/${state.prefix.replace(/^\//g,"")}"]`);elem&&this.updateSideBar(elem,state.items)}else{let elem=null===(_k=this._folders.parentElement)||void 0===_k?void 0:_k.querySelector(`ul[data-prefix="/${newPath.replace(/^\//g,"")}"]`);if(elem){await this.getFileList(elem);let i=null===(_m=null===(_l=elem.parentElement)||void 0===_l?void 0:_l.parentElement)||void 0===_m?void 0:_m.querySelector("i");i&&i.classList.replace("fa-folder","fa-folder-open")}}else{this.updateFileList([]);let elem=null===(_o=this._folders.parentElement)||void 0===_o?void 0:_o.querySelector(`ul[data-prefix="/${newPath.replace(/^\//g,"")}"]`);elem&&(elem.textContent="")}this.updateBreadCrumb(newPath,!0);let textField3=this._breadcrumb.querySelector("input.new-level-input");textField3&&(textField3.value=lastFolder)}};textField.onblur=event=>{let input=event.target;input&&input.replaceWith(breadcrumbPlus)}};breadcrumbPlus.onclick=ev=>{ev.preventDefault();addNewLevel()};newLeveLi.appendChild(breadcrumbPlus);this._breadcrumb.appendChild(newLeveLi);!0===editMode&&addNewLevel()}addDirectory(item){if(item.isDirectory){item.createReader().readEntries(entries=>{for(let e of entries)this.addDirectory(e)})}else item.file(file=>{this.addFileToQueue(file,item.fullPath)})}async addFiles(e){var _a,_b;if(e.dataTransfer&&e.dataTransfer.items){let items=e.dataTransfer.items;for(let item of items){let wkitem=item.webkitGetAsEntry();wkitem&&this.addDirectory(wkitem)}return}let files=(null===(_a=this._fileInput)||void 0===_a?void 0:_a.files)||(null===(_b=e.dataTransfer)||void 0===_b?void 0:_b.files);if(files.length)for(let f of files)this.addFileToQueue(f);else await notify_46.Notify.alert("File type not accepted","Your browser does not support the selected file type","danger")}addFileToQueue(file,_fullPath){try{let fullPath=this._activePath.replace(/\/$/g,"")+"/"+(_fullPath||file.name).replace(/^\//g,""),fu=new FileUpload(this._portalApi,this._portalId,file,fullPath,async()=>{await this.updateStats()});fu.createUIElement(this._uploadList);this._fileUploads.push(fu)}catch(ex2){let ex=ex2;notify_46.Notify.notify("Error processing file",notify_46.Notify.extractMsg(ex),"top","center","far fa-cross-circle","warning")}}async startUploads(e){this._uploadComplete=!1;this._cancelled=!1;this.showCancelUploadButton();this.showProgressBar();await this.addFiles(e);this._customFileUpload.reset()}async updateStats(){let uploaded=this._fileUploads.map(u=>u.getUploaded()).reduce((a,b)=>a+b,0)||0,totalToUpload=this._fileUploads.map(u=>u.getFileSize()).reduce((a,b)=>a+b,0)||0,totalPercentComplete=totalToUpload>0?Math.round(100*uploaded/totalToUpload):100,fileInfoQ4=this._fileInfo.querySelector("h4");if(fileInfoQ4){fileInfoQ4.textContent=`Upload progress (${totalPercentComplete}%)`;if(100===totalPercentComplete){let successCheck=document.createElement("i");successCheck.classList.add("far","fa-check-circle","text-success","ml-2");fileInfoQ4.appendChild(successCheck)}}this._chunkInfo.textContent=`${this._fileUploads.filter(u=>u.uploadStatus===uploadStatus.succeed).length}\n                                of ${this._fileUploads.length} files uploaded`;this._totalProgressBar.style.width=`${totalPercentComplete}%`;this._totalProgressBar.setAttribute("aria-valuenow",totalPercentComplete.toFixed(0));if(this._fileUploads.length>0&&this._fileUploads.filter(u=>-1!==[uploadStatus.cancelled,uploadStatus.failed,uploadStatus.succeed].indexOf(u.uploadStatus)).length===this._fileUploads.length){let numFailed=this._fileUploads.filter(u=>u.uploadStatus===uploadStatus.failed).length;await this.uploadComplete(numFailed)}}async uploadComplete(numFailed){this._uploadComplete||this._cancelled||this.showClearListButton();await this.refreshList(this._activePath)}showClearListButton(){this._cancelUploadButton.style.display="none";this._clearListButton.style.removeProperty("display")}showCancelUploadButton(){this._clearListButton.style.display="none";this._cancelUploadButton.style.removeProperty("display")}hideClearListButton(){this._clearListButton.style.display="none"}hideCancelUploadButton(){this._cancelUploadButton.style.display="none"}async refreshList(prefix){clearTimeout(this._refreshTimeout);this._refreshTimeout=setTimeout(async()=>{var _a;if(prefix===this._activePath){let ix=++this._refreshListIx,resp=await this._portalApi.listPortalFilesInFolder(this._portalId,{prefix:prefix});if(ix!==this._refreshListIx)return;resp&&resp.body.success||await notify_46.Notify.alert("Error retrieving folder structure",resp.body.error||"Error retrieving folder structure","danger");let sortedItems=(null===(_a=resp.body.files)||void 0===_a?void 0:_a.sort((a,b)=>{let textA=a.name.toUpperCase(),textB=b.name.toUpperCase();return textA<textB?-1:textA>textB?1:0}))||[];window.history.pushState({items:sortedItems,prefix:prefix},"");this.updateBreadCrumb(prefix);this.updateFileList(sortedItems);let elem=this._folders.querySelector(`ul[data-prefix="${prefix}"]`);this.updateSideBar(elem,sortedItems.filter(f=>0===Number(f.size)));this._folders.querySelectorAll("li[data-temp]").forEach(tempItem=>{tempItem.removeAttribute("data-temp")})}},100)}processQueue(){(async()=>{const sleep=ms=>new Promise(resolve=>{setTimeout(resolve,ms)});for(;;){if(0===this._fileUploads.length){await sleep(1e3);continue}let uploadsInProgress=this._fileUploads.filter(f=>f.uploadStatus===uploadStatus.inProgress).length,toStart=MAX_PARALLEL_UPLOADS-uploadsInProgress;for(let ix=0;ix<toStart;ix++){let next=this._fileUploads.find(x=>x.uploadStatus===uploadStatus.waiting);next&&next.startUpload()}await sleep(200)}})()}}}));define("client/svelte",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.initSvelteView=void 0;exports.initSvelteView=function(template,additionalProps){const targetEl=document.getElementById("svelte");if(!targetEl)throw new Error("Target not set");const propsEl=document.getElementById("props");if(!propsEl)throw new Error("Props not set");let props=JSON.parse(atob(propsEl.innerHTML));additionalProps&&(props=Object.assign(props,additionalProps));new SvelteViews.default[template]({target:targetEl,props:props,hydrate:!0})}}));define("client/project/pages/tuner-ui",["require","exports","client/svelte","client/project/components/job-runner"],(function(require,exports,svelte_1,job_runner_15){Object.defineProperty(exports,"__esModule",{value:!0});exports.TunerUI=void 0;exports.TunerUI=class{constructor(studioApi){let trainingOutputSection=document.querySelector("#training-output-section");this._jobRunner=new job_runner_15.JobRunner(studioApi,trainingOutputSection);svelte_1.initSvelteView("studio/tuner/Index",{studioApi:studioApi,jobRunner:this._jobRunner})}}}));define("client/project/components/notes-ui",["require","exports","client/notify","client/global-ui"],(function(require,exports,notify_47,global_ui_13){Object.defineProperty(exports,"__esModule",{value:!0});exports.NotesUi=void 0;exports.NotesUi=class{constructor(studioApi){this._notesModal=document.querySelector("#project-notes-modal");this._notesContainer=document.querySelector("#project-notes-container");this._noteHeaderTemplate=document.querySelector("#note-toast-header-template").content.querySelector("div");this._noteBodyTemplate=document.querySelector("#note-toast-body-template").content.querySelector("div");this._noteTemplate=document.querySelector("#note-toast-template").content.querySelector("div");this._noteEditTemplate=document.querySelector("#note-edit-template").content.querySelector("div");this._addNewNoteBtn=document.querySelector('#project-notes-modal .new-note-form button[data-action="save"]');this._cancelNewNoteBtn=document.querySelector('#project-notes-modal .new-note-form button[data-action="cancel"]');this._newNoteTextInput=document.querySelector("#new-note");this._newNoteControls=document.querySelector("#new-note-controls");this._studioApi=studioApi;this._addNewNoteBtn.onclick=async()=>{await this.saveNewNote()};this._cancelNewNoteBtn.onclick=async()=>{this._newNoteTextInput.value="";this._addNewNoteBtn.disabled=!0};this._newNoteTextInput.onfocus=()=>{this._newNoteControls.style.display="";this._addNewNoteBtn.disabled=0===document.querySelector("#new-note").value.trim().length};this._newNoteTextInput.onkeyup=()=>{this._notesModal.classList.contains("show")&&(this._addNewNoteBtn.disabled=0===document.querySelector("#new-note").value.trim().length)};this._newNoteTextInput.onkeydown=async ev=>{if(this._notesModal.classList.contains("show")){this._addNewNoteBtn.disabled=0===document.querySelector("#new-note").value.trim().length;13===ev.keyCode&&ev.metaKey&&await this.saveNewNote()}};this._newNoteTextInput.onblur=blurEvent=>{let relatedTarget=blurEvent.relatedTarget;!relatedTarget||relatedTarget.dataset.toggle};$(this._notesModal).on("shown.bs.modal",async()=>{$(this._newNoteTextInput).focus()});$(this._notesModal).on("show.bs.modal",async()=>{this._newNoteTextInput.value="";await this.getNotes()});$(this._notesModal).on("hide.bs.modal",async()=>{this._newNoteTextInput.value=""})}async saveNewNote(){let buttonText=this._addNewNoteBtn.textContent;try{if(!this._studioApi.currentUser)return;let noteText=this._newNoteTextInput.value.trim();if(0===noteText.length)return;this._addNewNoteBtn.disabled=!0;this._addNewNoteBtn.textContent="Adding note...";let result=await this._studioApi.projects.addNote(this._studioApi.projectId,{note:noteText});if(!result.body||!result.body.success)throw new Error(result.body&&result.body.error||result.response.responseText);this.addNotetoUI({id:result.body.id,note:noteText,userId:this._studioApi.currentUser.id,created:new Date,userName:this._studioApi.currentUser.name,userPhoto:this._studioApi.currentUser.photo});this._newNoteTextInput.value="";$(this._newNoteTextInput).focus()}catch(ex2){let ex=ex2;await notify_47.Notify.alert("Failed to save note",notify_47.Notify.extractMsg(ex),"danger")}finally{this._addNewNoteBtn.disabled=!1;this._addNewNoteBtn.textContent=buttonText}}addNotetoUI(note){var _a;let noteHeaderElem=this._noteHeaderTemplate.cloneNode(!0),userImg=noteHeaderElem.querySelector("img");userImg&&note.userPhoto&&(userImg.src=note.userPhoto);userImg&&note.userName&&(userImg.alt=note.userName);let timestampElem=noteHeaderElem.querySelector(".toast-header-time"),d=new Date(note.created);if(timestampElem){let td=timestampElem.parentElement,dateStr=global_ui_13.GlobalUI.getFriendlyDateString(d);td.dataset.friendlyDate=td.title=timestampElem.textContent=dateStr}let userNameElem=noteHeaderElem.querySelector(".toast-header-user");userNameElem&&note.userName&&(userNameElem.textContent=userNameElem.title=note.userName);let noteBodyElem=this._noteBodyTemplate.cloneNode(!0);noteBodyElem.textContent=note.note;let noteElem=this._noteTemplate.cloneNode(!0),deleteBtn=noteHeaderElem.querySelector('[data-action="delete-note"]'),editBtn=noteHeaderElem.querySelector('[data-action="edit-note"]'),replyBtn=noteHeaderElem.querySelector('[data-action="reply-note"]');noteElem.dataset.noteId=note.id.toFixed();noteElem.classList.add("note-child");noteElem.appendChild(noteHeaderElem);noteElem.appendChild(noteBodyElem);if(note.userId===(null===(_a=this._studioApi.currentUser)||void 0===_a?void 0:_a.id)||this._studioApi.isAdmin){deleteBtn.style.removeProperty("display");editBtn.style.removeProperty("display")}else{editBtn.style.display="none";deleteBtn.style.display="none"}deleteBtn.onclick=async e=>{e.preventDefault();try{let count=this._notesModal.querySelectorAll('.note-child[data-parent-id="'+note.id+'"]').length,text="Are you sure you want to delete this note?";1===count?text="This will delete this note and the 1 reply":count>1&&(text="This will delete this note and the "+count+" replies");deleteBtn.disabled=!0;if(await notify_47.Notify.confirm("Delete note?",text,"Yes, delete","question","warning")){let result=await this._studioApi.projects.removeNote(this._studioApi.projectId,note.id);if(!result.body||!result.body.success)throw new Error(result.body&&result.body.error||result.response.responseText);noteElem.remove()}}catch(ex2){let ex=ex2;await notify_47.Notify.alert("Failed to delete note",notify_47.Notify.extractMsg(ex),"danger")}finally{deleteBtn.disabled=!1}};editBtn.onclick=async e=>{e.preventDefault();let openEditor=this._notesContainer.querySelector('[data-action="edit"]');openEditor&&openEditor.remove();let openReply=this._notesContainer.querySelector('[data-action="reply"]');openReply&&openReply.remove();let editNoteElem=this._noteEditTemplate.cloneNode(!0);editNoteElem.dataset.action="edit";editNoteElem.dataset.parent=note.id.toFixed();let textAreaElem=editNoteElem.querySelector("textarea"),saveBtn=editNoteElem.querySelector('[data-action="save"]'),cancelBtn=editNoteElem.querySelector('[data-action="cancel"]');if(!textAreaElem||!saveBtn||!cancelBtn){console.error("HTML elements not rendered correctly");return}$(this._notesModal).on("hidden.bs.modal",()=>{editNoteElem.replaceWith(noteBodyElem)});saveBtn.textContent="Update note";textAreaElem.value=note.note.trim();noteBodyElem.replaceWith(editNoteElem);const updateNote=async()=>{let buttonText=saveBtn.textContent;try{if(!textAreaElem)return;if(0===textAreaElem.value.trim().length)return;saveBtn.disabled=!0;saveBtn.textContent="Updating note...";let updatedNote={note:textAreaElem.value.trim()},result=await this._studioApi.projects.updateNote(this._studioApi.projectId,note.id,updatedNote);if(!result.body||!result.body.success)throw new Error(result.body&&result.body.error||result.response.responseText);note.note=textAreaElem.value.trim();noteBodyElem.textContent=note.note;editNoteElem.replaceWith(noteBodyElem)}catch(ex2){let ex=ex2;await notify_47.Notify.alert("Failed to save note",notify_47.Notify.extractMsg(ex),"danger")}finally{saveBtn.disabled=!1;saveBtn.textContent=buttonText}};saveBtn.onclick=async()=>{await updateNote()};cancelBtn.onclick=async()=>{editNoteElem.replaceWith(noteBodyElem)};textAreaElem.onfocus=()=>{var _a;saveBtn.disabled=0===(null===(_a=editNoteElem.querySelector("textarea"))||void 0===_a?void 0:_a.value.trim().length)};textAreaElem.onkeyup=()=>{var _a;saveBtn.disabled=0===(null===(_a=editNoteElem.querySelector("textarea"))||void 0===_a?void 0:_a.value.trim().length)};textAreaElem.onkeydown=async ev=>{var _a;saveBtn.disabled=0===(null===(_a=editNoteElem.querySelector("textarea"))||void 0===_a?void 0:_a.value.trim().length);if(13===ev.keyCode&&ev.metaKey)await updateNote();else if(27===ev.keyCode){ev.preventDefault();ev.stopImmediatePropagation();editNoteElem.replaceWith(noteBodyElem)}};$(textAreaElem).focus()};replyBtn.onclick=async e=>{e.preventDefault();if(note.parentId){let container=document.querySelector('.note-child[data-note-id="'+note.parentId+'"]');if(!container)return console.warn("Could not find note with ID",note.parentId);let parentReplyBtn=container.querySelector('*[data-action="reply-note"]');return parentReplyBtn?parentReplyBtn.click():console.warn("Could not find reply button for note with ID",note.parentId)}let openReply=this._notesContainer.querySelector('[data-action="reply"]');openReply&&openReply.remove();let openEditor=this._notesContainer.querySelector('[data-action="edit"]');openEditor&&openEditor.appendChild(noteBodyElem);$(this._notesModal).on("hidden.bs.modal",()=>{openReply&&openReply.remove()});let editNoteElem=this._noteEditTemplate.cloneNode(!0);editNoteElem.dataset.action="reply";editNoteElem.dataset.parent=note.id.toFixed();let textAreaElem=editNoteElem.querySelector("textarea"),saveBtn=editNoteElem.querySelector('[data-action="save"]'),cancelBtn=editNoteElem.querySelector('[data-action="cancel"]');if(!textAreaElem||!saveBtn||!cancelBtn){console.error("HTML elements not rendered correctly");return}textAreaElem.value="";noteElem.appendChild(editNoteElem);const replyNote=async()=>{if(!this._studioApi.currentUser)return;let buttonText=saveBtn.textContent;try{if(!textAreaElem)return;let noteText=textAreaElem.value.trim();if(0===noteText.length)return;saveBtn.disabled=!0;saveBtn.textContent="Replying...";let replyNoteObj={note:noteText,parentId:note.id},result=await this._studioApi.projects.addNote(this._studioApi.projectId,replyNoteObj);if(!result.body||!result.body.success)throw new Error(result.body&&result.body.error||result.response.responseText);this.addNotetoUI({id:result.body.id,userId:this._studioApi.currentUser.id,userName:this._studioApi.currentUser.name,userPhoto:this._studioApi.currentUser.photo,note:noteText,created:new Date,parentId:replyNoteObj.parentId});editNoteElem.remove()}catch(ex2){let ex=ex2;await notify_47.Notify.alert("Failed to save note",notify_47.Notify.extractMsg(ex),"danger")}finally{saveBtn.disabled=!1;saveBtn.textContent=buttonText}};cancelBtn.onclick=async()=>{editNoteElem.remove()};textAreaElem.onfocus=()=>{var _a;saveBtn.disabled=0===(null===(_a=editNoteElem.querySelector("textarea"))||void 0===_a?void 0:_a.value.trim().length)};textAreaElem.onkeyup=()=>{var _a;saveBtn.disabled=0===(null===(_a=editNoteElem.querySelector("textarea"))||void 0===_a?void 0:_a.value.trim().length)};textAreaElem.onkeydown=async ev=>{var _a;saveBtn.disabled=0===(null===(_a=editNoteElem.querySelector("textarea"))||void 0===_a?void 0:_a.value.trim().length);if(13===ev.keyCode&&ev.metaKey)await replyNote();else if(27===ev.keyCode){ev.preventDefault();ev.stopImmediatePropagation();editNoteElem.remove()}};$(textAreaElem).focus();saveBtn.onclick=async()=>{await replyNote()}};if(note.parentId){noteElem.dataset.parentId=note.parentId.toFixed();let parentElem=this._notesContainer.querySelector(`[data-note-id="${note.parentId}"]`);if(parentElem){noteElem.classList.remove("toast");parentElem.appendChild(noteElem)}}else this._notesContainer.appendChild(noteElem)}async getNotes(){try{let result=await this._studioApi.projects.getNotes(this._studioApi.projectId);if(!result.body||!result.body.success)throw new Error(result.body&&result.body.error||result.response.responseText);let notes=result.body.notes||[];this._notesContainer.textContent="";for(let note of notes)this.addNotetoUI(note)}catch(ex2){let ex=ex2;await notify_47.Notify.alert("Failed to retrieve notes",notify_47.Notify.extractMsg(ex),"danger")}$(".dropdown").on("hide.bs.dropdown",event=>{let ev2=event;ev2.clickEvent&&ev2.clickEvent.target&&"new-note"===ev2.clickEvent.target.id||$(this._newNoteTextInput).trigger("blur")})}}}));define("client/project/pages/label-object-detection-ui",["require","exports","client/notify","client/project/components/bounding-box-labeling"],(function(require,exports,notify_48,bounding_box_labeling_2){Object.defineProperty(exports,"__esModule",{value:!0});exports.LabelObjectDetectionUI=void 0;exports.LabelObjectDetectionUI=class{constructor(studioApi){this._labelQueue=JSON.parse(decodeURIComponent(document.querySelector("#label-queue").value));this._els={queueCount:document.querySelector("#label-queue-count"),sampleName:document.querySelector("#label-sample-name"),imageContainer:document.querySelector(".label-sampling-container"),saveBtn:document.querySelector("#label-sampling-save-btn"),deleteBtn:document.querySelector("#label-sampling-delete-btn")};this._studioApi=studioApi;this._currentSample=this._labelQueue.length>0?this._labelQueue[0]:void 0;if(this._els.imageContainer&&this._currentSample){this._labeling=new bounding_box_labeling_2.BoundingBoxLabeling(studioApi,this._els.imageContainer);this._labeling.setCurrentSample(this._currentSample,[])}this._els.saveBtn&&(this._els.saveBtn.onclick=async ev=>{if(!this._els.saveBtn||!this._currentSample||!this._labeling)return;ev.preventDefault();let origText=this._els.saveBtn.textContent;try{this._els.saveBtn.disabled=!1;this._els.saveBtn.classList.remove("disabled");this._els.saveBtn.textContent="Saving labels...";let bbCount=await this._labeling.saveCurrentSample(),oldId=this._currentSample,nextId=this._labelQueue[this._labelQueue.indexOf(this._currentSample)+1];this._labelQueue.splice(this._labelQueue.indexOf(this._currentSample),1);this._els.queueCount&&(this._els.queueCount.textContent=this._labelQueue.length+"");if(0===this._labelQueue.length){location.reload();return}let sample=await this._studioApi.rawData.getSample(this._studioApi.projectId,nextId);if(!sample.body||!sample.body.success)throw new Error(sample.body&&sample.body.error||sample.response.responseText);let newBoundingBoxes=[];if(bbCount>0){let bbs=await this._studioApi.rawData.trackObjects(this._studioApi.projectId,{sourceSampleId:oldId,nextSampleId:nextId});if(!bbs.body||!bbs.body.success)throw new Error(bbs.body&&bbs.body.error||bbs.response.responseText);newBoundingBoxes=bbs.body.boundingBoxes}this._els.sampleName&&(this._els.sampleName.textContent=sample.body.sample.filename);this._labeling.setCurrentSample(sample.body.sample.id,newBoundingBoxes);this._currentSample=sample.body.sample.id}catch(ex2){let ex=ex2;notify_48.Notify.alert("Failed to save labels",notify_48.Notify.extractMsg(ex),"danger")}finally{this._els.saveBtn.disabled=!1;this._els.saveBtn.classList.remove("disabled");this._els.saveBtn.textContent=origText}});this._els.deleteBtn&&(this._els.deleteBtn.onclick=async ev=>{if(!this._els.deleteBtn||!this._currentSample||!this._labeling)return;ev.preventDefault();let origText=this._els.deleteBtn.textContent;try{if(!await notify_48.Notify.confirm("Delete sample","Are you sure you want to remove this sample?","Yes, remove","question","danger"))return;this._els.deleteBtn.textContent="Deleting...";let sample=await this._studioApi.rawData.deleteSample(this._studioApi.projectId,this._currentSample);if(!sample.body||!sample.body.success)throw new Error(sample.body&&sample.body.error||sample.response.responseText);location.reload()}catch(ex2){let ex=ex2;notify_48.Notify.alert("Failed to save labels",notify_48.Notify.extractMsg(ex),"danger")}finally{this._els.deleteBtn.textContent=origText}})}}}));define("client/forms/select-project-third-party-ui",["require","exports","client/api-definition/index","client/notify"],(function(require,exports,api_definition_8,notify_49){Object.defineProperty(exports,"__esModule",{value:!0});exports.SelectProjectThirdPartyUI=void 0;exports.SelectProjectThirdPartyUI=class{constructor(){this._projectsApi=new api_definition_8.ProjectsApi(location.origin+"/v1");this._authId=Number(document.querySelector("#auth-id").value);let authName=document.querySelector("#auth-name").value,table=document.querySelector("#select-project-table");table&&Array.from(table.querySelectorAll("tr")).forEach(tr=>{tr.onclick=async e=>{e.preventDefault();tr.dataset.id&&await notify_49.Notify.confirm("Give "+authName+" permission to access "+tr.dataset.name+"?","This will give the application full access to this project, including all data.","Yes, give access","info","info")&&this.redirect(Number(tr.dataset.id))}});let addProject=document.querySelector("#add-project-btn");if(addProject){addProject.onclick=async ev=>{try{ev.preventDefault();const name=await notify_49.Notify.prompt("Create project","Enter a name for your new project","Create new project","","question","success",value=>value&&(null==value?void 0:value.length)?null:"Projects need a name");if(!name)return;const{response:response,body:body}=await this._projectsApi.createProject({projectName:name});if(!body.success)throw new Error(body.error||response.statusText);await notify_49.Notify.alert("Created project",'Successfully created project "'+name+'". Click OK to redirect back to '+authName+".","success");this.redirect(Number(body.id))}catch(ex){notify_49.Notify.alert("Failed to create project",notify_49.Notify.extractMsg(ex),"danger")}};if("#create-new-project"===location.hash){window.history.replaceState(null,"",window.location.pathname);addProject.dispatchEvent(new CustomEvent("click"))}}}redirect(projectId){try{let next=location.search.slice(1).split("&").map(x=>{let p=x.split("=");return{key:p[0],value:decodeURIComponent(p[1])}}).find(x=>"next"===x.key);if(!next)throw new Error('Cannot find "next" in URL');let form=document.createElement("form");form.method="POST";form.action=`/v1/api/${projectId}/third-party-auth/${this._authId}/authorize`;let nextField=document.createElement("input");nextField.name="nextUrl";nextField.value=next.value;form.appendChild(nextField);document.body.appendChild(form);form.submit()}catch(ex){notify_49.Notify.alert("Failed to authorize project",notify_49.Notify.extractMsg(ex),"danger")}}}}));define("client/organization/pages/organization-projects-ui",["require","exports","client/notify"],(function(require,exports,notify_50){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationProjectsUi=void 0;exports.OrganizationProjectsUi=class{constructor(studioApi){this._studioApi=studioApi;document.querySelector("#create-project").onclick=async ev=>{ev.preventDefault();try{ev.preventDefault();let name=await notify_50.Notify.prompt("Create project","Enter a name for your new project","Create new project","","question","success");if(!name)return;let{response:response,body:body}=await this._studioApi.createProject.organizationCreateEmptyProject(this._studioApi.organizationId,{projectName:name});if(!body.success)throw new Error(body.error||response.statusText);await notify_50.Notify.alert("Created project",'Successfully created project "'+name+'"',"success");location.href="/studio/"+body.id}catch(ex2){let ex=ex2;notify_50.Notify.alert("Failed to create project",notify_50.Notify.extractMsg(ex),"danger")}};for(let s of Array.from(document.querySelectorAll(".dropdown")))this.bindDropdown(s)}bindDropdown(r){let id=Number(r.dataset.id);const projectNameField=document.querySelector(`#project-name-${id}`),projectName=projectNameField&&projectNameField.textContent?projectNameField.textContent:"";for(let d of Array.from(r.querySelectorAll("a.dropdown-item")).map(a=>a))d.onclick=async ev=>{d.dataset.action&&ev.preventDefault();try{switch(d.dataset.action){case"add-self-to-project":this.addUserToProject(id,projectName);break;case"delete":this.deleteProject(id,projectName)}}catch(ex2){let ex=ex2;notify_50.Notify.alert("Failed to complete action",notify_50.Notify.extractMsg(ex),"danger")}}}async deleteProject(id,name){try{if(!await notify_50.Notify.confirm("Are you sure you want to delete this project?","This is irrevocable, and will remove all devices, data and impulses.","Yes, delete","question","danger"))return;let v=await notify_50.Notify.prompt("Confirm",'Enter the name of this project ("'+name+'") to continue',"Delete this project","","question","danger");if(!v)return;if(v!==name)throw new Error("Name does not match the name of this project, aborting.");let d=await this._studioApi.projects.deleteProject(id);if(!d.body||!d.body.success)throw d.body&&d.body.error||d.response.responseText;location.href=`${location.pathname}?deleted=${name}`}catch(ex2){let ex=ex2;notify_50.Notify.alert("Failed to delete project",notify_50.Notify.extractMsg(ex),"danger")}}async addUserToProject(projectId,projectName){try{if(!this._studioApi.currentUser)throw new Error("Cannot find current user");let d=await this._studioApi.createProject.organizationAddCollaborator(this._studioApi.organizationId,{projectId:projectId,userId:this._studioApi.currentUser.id});if(!d.body||!d.body.success)throw d.body&&d.body.error||d.response.responseText;location.href=`${location.pathname}?addedToProject=${projectName}`}catch(ex2){let ex=ex2;notify_50.Notify.alert("Failed to add user to project",notify_50.Notify.extractMsg(ex),"danger")}}}}));define("client/project/pages/application-testing-ui",["require","exports","client/project/components/job-runner","client/project/components/output-log","shared/WebSocketTypes"],(function(require,exports,job_runner_16,output_log_2,WebSocketTypes_18){Object.defineProperty(exports,"__esModule",{value:!0});exports.ApplicationTestingUI=void 0;exports.ApplicationTestingUI=class{constructor(studioApi){this._trainingOutputEls={collapse:document.querySelector("#training-output-collapse"),expand:document.querySelector("#training-output-expand"),body:document.querySelector("#training-output"),section:document.querySelector("#training-output-section")};this._loadingIndicator=document.querySelector("#loading-results-indicator");this._currentResults=document.querySelector("#current-results");this._runSimulatedTestEl=document.querySelector("#run-simulated-test");this._resultAvailable="true"===document.querySelector("#results-available").value;this._studioApi=studioApi;this._outputLog=new output_log_2.OutputLog(this._trainingOutputEls);this._jobRunner=new job_runner_16.JobRunner(this._studioApi,this._trainingOutputEls.section);this._runSimulatedTestEl.onclick=this.runSimulatedTest.bind(this);this._studioApi.socket.addEventListener("connect",this.checkForRunningProcess.bind(this));this._resultAvailable&&this.fetchResult().then(()=>{console.log("Ground truth",this._groundTruth);console.log("Raw result",this._rawResult);console.log("Parameter sets",this._parameterSets);this.renderResult()}).catch(err=>console.error("Error fetching result",err))}async runSimulatedTest(ev){ev.preventDefault();this._runSimulatedTestEl.disabled=!0;this._runSimulatedTestEl.textContent=" Running test...";try{this._outputLog.expand();this._currJobId=await this._jobRunner.startJob(this._studioApi.jobs.startApplicationTestingJob(this._studioApi.projectId,{backgroundNoiseLabel:"noise",otherNoiseLabels:["unknown"]}));this._jobRunner.on("finished",this.jobFinished.bind(this))}catch(ex2){let ex=ex2;this._jobRunner.startJobFailed(ex)}}async fetchResult(){const api=this._studioApi;this._currentResults.classList.add("d-none");this._loadingIndicator.classList.remove("d-none");try{let gtResponse=await api.applicationTesting.getApplicationTestingGroundTruth(api.projectId);if(!gtResponse.body.success)throw new Error(gtResponse.body.error);this._groundTruth=gtResponse.body.samples;let resultResponse=await api.applicationTesting.getApplicationTestingRawResult(api.projectId);if(!resultResponse.body.success)throw new Error(resultResponse.body.error);this._rawResult=resultResponse.body.detections;let parameterSetsResponse=await api.applicationTesting.getApplicationTestingParameterSets(api.projectId);if(!resultResponse.body.success)throw new Error(parameterSetsResponse.body.error);this._parameterSets=parameterSetsResponse.body.parameterSets;this._loadingIndicator.classList.add("d-none")}catch(ex){console.error("Unable to load results",ex)}}renderResult(){if(!this._parameterSets)return;let best=this._parameterSets.find(p=>p.isBest);if(!best)throw new Error("No parameter set was marked as the best");this._selectedParameterSet=best;this.renderTable();this._currentResults.classList.remove("d-none");this.renderChart();this.renderWave().catch(err=>console.error(err))}renderTable(){let body=this._currentResults.querySelector("tbody");body.innerHTML="";if(!this._selectedParameterSet)return;this._currentResults.querySelector("#aggregate-far").innerText=Number(this._selectedParameterSet.aggregateStats.falsePositiveRate.toFixed(3)).toString();this._currentResults.querySelector("#aggregate-frr").innerText=Number(this._selectedParameterSet.aggregateStats.falseNegativeRate.toFixed(3)).toString();let optimal=this._currentResults.querySelector("#optimal");this._selectedParameterSet.isBest?optimal.classList.remove("d-none"):optimal.classList.add("d-none");let getCell=(value,type="td")=>{let element=document.createElement(type);element.textContent="number"==typeof value?Number(value.toFixed(3)).toString():value.toString();return element};for(let stats of this._selectedParameterSet.stats){if("noise"===stats.label)continue;let row=document.createElement("tr"),labelEl=getCell(stats.label,"th");labelEl.scope="row";row.appendChild(labelEl);row.appendChild(getCell(stats.falsePositiveRate));row.appendChild(getCell(stats.falseNegativeRate));row.appendChild(getCell(stats.truePositives));row.appendChild(getCell(stats.falsePositives));row.appendChild(getCell(stats.trueNegatives));row.appendChild(getCell(stats.falseNegatives));null==body||body.appendChild(row)}}renderChart(){this._chart&&this._chart.destroy();let ctx=document.getElementById("myChart").getContext("2d");if(!ctx)throw new Error("Could not find element or get context");if(!this._parameterSets)throw new Error("No parameter sets available");let asXY=(parameterSet,index)=>({x:parameterSet.aggregateStats.falsePositiveRate,y:parameterSet.aggregateStats.falseNegativeRate,idx:index,isBest:parameterSet.isBest});Chart.plugins.register({id:"paddingBelowLegends",beforeInit:chart=>{const typesetChart=chart;typesetChart.legend.afterFit=()=>{typesetChart.legend.height+=15}}});this._chart=new Chart(ctx,{type:"scatter",data:{labels:["abc"],datasets:[{data:this._parameterSets.map(asXY).filter(p=>p.isBest),pointRadius:10,pointHitRadius:10,pointHoverRadius:15,pointBackgroundColor:"#2dce89",pointHoverBackgroundColor:"#2dce89",backgroundColor:"#2dce89",pointBorderWidth:0,pointBorderColor:"#2dce89",borderColor:"#2dce89",borderWidth:0,label:"Default config (minimizes FAR and FRR)"},{data:this._parameterSets.map(asXY).filter(p=>!p.isBest),pointRadius:10,pointHitRadius:10,pointHoverRadius:15,pointBackgroundColor:"#5e72e4",pointHoverBackgroundColor:"#5e72e4",backgroundColor:"#5e72e4",pointBorderWidth:0,pointBorderColor:"#5e72e4",borderColor:"#5e72e4",borderWidth:0,label:"Alternative config"}]},options:{scales:{xAxes:[{type:"linear",position:"bottom",scaleLabel:{labelString:"False activation rate",display:!0},ticks:{min:0}}],yAxes:[{scaleLabel:{labelString:"False rejection rate",display:!0},ticks:{min:0}}]},tooltips:{enabled:!1,mode:void 0},hover:{mode:"nearest"},legend:{display:!0,position:"top"},events:["click"],onClick:(event,activeElements)=>{if(!this._chart)return;let activePoint=this._chart.getElementAtEvent(event);if(!activePoint.length)return;const clickedDatasetIndex=activePoint[0]._datasetIndex,clickedElementIndex=activePoint[0]._index;if(!this._chart.data.labels||!this._chart.data.datasets)return;const dataset=this._chart.data.datasets[clickedDatasetIndex];if(!dataset.data)return;let value=dataset.data[clickedElementIndex];if(!this._parameterSets)return;let parameterSet=this._parameterSets[value.idx];this._selectedParameterSet=parameterSet;this.renderTable();this.redrawSegments()}}})}async renderWave(){const audioElement=document.getElementById("audio");document.getElementById("audio-source").src=`/v1/api/${this._studioApi.projectId}/application-testing/wav`;audioElement.load();const audioContext=new(window.AudioContext||window.webkitAudioContext),options={containers:{zoomview:document.getElementById("zoomview-container"),overview:document.getElementById("overview-container")},zoomWaveformColor:"#8ce6be",overviewWaveformColor:"#8ce6be",randomizeSegmentColor:!1,mediaElement:audioElement,webAudio:{audioContext:audioContext,scale:128,multiChannel:!1},keyboard:!0,pointMarkerColor:"#006eb0",showPlayheadTime:!0,zoomLevels:[128,256,512,1024,2048,4096]};return new Promise((resolve,reject)=>{peaks.init(options,async(err,peaksInstance)=>{var _a,_b,_c;if(err||!peaksInstance)return reject(err||new Error("Error initializing Peaks Instance"));void 0!==this._peaksInstance&&this._peaksInstance.destroy();this._peaksInstance=peaksInstance;null===(_a=document.querySelector('[data-action="zoom-in"]'))||void 0===_a||_a.addEventListener("click",async()=>{peaksInstance.zoom.zoomIn()});null===(_b=document.querySelector('[data-action="zoom-out"]'))||void 0===_b||_b.addEventListener("click",async()=>{peaksInstance.zoom.zoomOut()});null===(_c=document.getElementById("segments"))||void 0===_c||_c.addEventListener("click",async event=>{var _a,_b;await audioElement.play();audioElement.pause();event.preventDefault();const element=event.target;if(!element)return;const action=element.getAttribute("data-action")||(null===(_a=element.parentElement)||void 0===_a?void 0:_a.getAttribute("data-action")),id=element.getAttribute("data-id")||(null===(_b=element.parentElement)||void 0===_b?void 0:_b.getAttribute("data-id"));if(!id)return;const segment=peaksInstance.segments.getSegment(id);segment?"play-segment"===action?peaksInstance.player.playSegment(segment):"seek-segment"===action?peaksInstance.player.seek(segment.startTime):"remove-segment"===action&&peaksInstance.segments.removeById(id):console.error(`Segment ${id} doesn't exist`)});this.redrawSegments();resolve(peaksInstance)})})}redrawSegments(){var _a;const peaksInstance=this._peaksInstance;if(void 0===peaksInstance){console.error("Trying to redraw segments without a Peaks.js instance available");return}peaksInstance.segments.removeAll();if(!this._groundTruth||!this._groundTruth.length)return;const groundTruth=this._groundTruth,isNoiseOrUnknown=s=>"noise"===s||"unknown"===s;null===(_a=this._selectedParameterSet)||void 0===_a||_a.stats.forEach(s=>{for(let time of s.falseNegativeTimes){const original=groundTruth.find(g=>g.start===time);if(!original)throw new Error(`No equivalent ground truth was found for false negative time ${time}`);isNoiseOrUnknown(s.label)||peaksInstance.segments.add({id:`falsenegative-${time}`,type:"False Negative",startTime:time/1e3,endTime:(time+original.length)/1e3,color:"#5557e0",labelText:`${original.labelString}`})}if(s.falsePositiveDetails)for(const m of s.falsePositiveDetails)if("incorrect"===m.type){if(void 0===m.groundTruthStart||void 0===m.groundTruthLabel)throw new Error("Expected groundTruthStart and groundTruthLabel for incorrect match");if(isNoiseOrUnknown(m.groundTruthLabel)&&isNoiseOrUnknown(s.label))return;const matchIndex=groundTruth.findIndex(t=>t.start===m.groundTruthStart);if(-1===matchIndex)throw new Error("Could not find ground truth for incorrect match");const g=groundTruth[matchIndex];peaksInstance.segments.add({id:`${matchIndex.toString()}-incorrect-${m.detectionTime}`,type:"False Positive (incorrect match)",startTime:g.start/1e3,endTime:(g.start+g.length)/1e3,color:"#f00",labelText:`${m.groundTruthLabel} => ${s.label}`})}else if("spurious"===m.type){if(isNoiseOrUnknown(s.label))return;peaksInstance.segments.add({id:`${s.label}-spurious-${m.detectionTime}`,type:"False Positive (spurious match)",startTime:m.detectionTime/1e3,endTime:(m.detectionTime+1e3)/1e3,color:"#f00",labelText:`${s.label}`})}else if("duplicate"===m.type){if(void 0===m.groundTruthStart)throw new Error("Expected groundTruthStart for duplicate match");if(isNoiseOrUnknown(s.label))return;peaksInstance.segments.add({id:`${s.label}-duplicate-${m.detectionTime}`,type:"False Positive (Duplicate match)",startTime:m.detectionTime/1e3,endTime:(m.detectionTime+1e3)/1e3,color:"#ffa500",labelText:`${s.label}`})}});this.renderSegmentTable(peaksInstance)}renderSegmentTable(peaksInstance){const segmentsContainer=document.getElementById("segments");if(!segmentsContainer)return;const html=peaksInstance.segments.getSegments().sort((a,b)=>a.startTime<b.startTime?-1:b.startTime<a.startTime?1:0).reduce((previousValue,segment)=>previousValue+=`<tr data-action="seek-segment" data-id="${segment.id}" style="color: ${segment.color}">\n            <td>${segment.labelText}</td>\n            <td>${segment.type}</td>\n            <td>${segment.startTime}</td>\n            <td>${segment.endTime}</td>\n            <td><button data-action="play-segment" type="button" class="btn btn-sm btn-success" data-id="${segment.id}">Play</button></td>\n            </tr>`,""),tableBody=segmentsContainer.querySelector("tbody");tableBody&&(tableBody.innerHTML=html);html.length&&(null==segmentsContainer||segmentsContainer.classList.remove("d-none"))}async jobFinished(jobId,success){if(jobId===this._currJobId){this._runSimulatedTestEl.disabled=!1;this._runSimulatedTestEl.textContent=" Run test";if(!success)throw new Error("Job was unsuccessful");console.log(`Job ${jobId} finished successfully`);await this.fetchResult();this.renderResult()}}async checkForRunningProcess(){let job=await this._jobRunner.getActiveJob(WebSocketTypes_18.JOB_KEY_PREFIX.applicationTesting);if(job){this._currJobId=job.id;this._outputLog.expand();this._jobRunner.on("finished",this.jobFinished.bind(this));await this._jobRunner.resumeJob(job.id)}}}}));define("client/organization/pages/organization-pipelines-ui",["require","exports","client/notify","client/global-ui","client/organization/components/form-binding","client/organization/components/notification-settings"],(function(require,exports,notify_51,global_ui_14,form_binding_4,notification_settings_3){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationPipelinesUi=void 0;exports.OrganizationPipelinesUi=class{constructor(studioApi){this._studioApi=studioApi;this._els={addNewPipelineBtn:document.querySelector("#add-new-pipeline"),pipelines:Array.from(document.querySelectorAll(".pipeline-card")).map(c=>({id:Number(c.dataset.id),name:c.dataset.name||"",card:c,stepsToggleBtn:c.querySelector(".steps-toggle"),stepsToggleI:c.querySelector(".steps-toggle i"),dropdownMenu:c.querySelector(".pipeline-dropdown"),stepsSection:c.querySelector(".steps-section"),steps:Array.from(c.querySelectorAll(".steps-section tbody tr")).map(s=>({row:s,dropdownMenu:s.querySelector(".dropdown-menu"),progressEl:s.querySelector(".step-progress-td")}))})),editModal:{modal:document.querySelector("#pipeline-edit-modal"),content:document.querySelector("#pipeline-edit-content"),dataset:document.querySelector("#input-pipeline-dataset"),emailRecipients:document.querySelector("#input-pipeline-emailRecipientUids"),emailRecipientsLabel:document.querySelector("#input-pipeline-emailRecipientUids-labels"),emailRecipientsEdit:document.querySelector("#input-pipeline-emailRecipientUids-edit"),newDataset:document.querySelector("#input-pipeline-new-dataset"),newDatasetRow:document.querySelector("#input-pipeline-new-dataset-row"),aceContent:(()=>{let editor=ace.edit(document.querySelector("#pipeline-edit-content"));ace.config.setModuleUrl("ace/mode/javascript",this._studioApi.staticAssetsPrefix+"/ace/mode-javascript.js");editor.session.setMode("ace/mode/javascript");editor.setOption("wrap","free");return editor})()}};this._studioApi.socket.on("pipeline-update",this.bindSocketUpdates.bind(this));this._transformForm=new form_binding_4.FormBinding(this._els.editModal.modal,{createTitle:async()=>"Add a new pipeline",updateTitle:async s=>'Edit pipeline "'+s.name+'"',create:this.savePipeline.bind(this),update:this.updatePipeline.bind(this),fetch:this.fetchPipeline.bind(this),createErrorText:"Failed to add pipeline",updateErrorText:"Failed to update pipeline",createSaveBtnText:"Add pipeline",updateSaveBtnText:"Update pipeline"});this._notificationSettings=new notification_settings_3.NotificationSettings;this._els.editModal.emailRecipientsEdit.onclick=async ev=>{ev.preventDefault();this._notificationSettings.show(JSON.parse(this._els.editModal.emailRecipients.value),async emailRecipientUids=>{const users=this._notificationSettings.getUsers();this._els.editModal.emailRecipients.value=JSON.stringify(emailRecipientUids);this._els.editModal.emailRecipientsLabel.textContent=emailRecipientUids.length>0?emailRecipientUids.map(x=>{var _a;return null===(_a=users.find(y=>y.id===x))||void 0===_a?void 0:_a.name}).join(", "):"No users selected"})};this._els.editModal.dataset.oninput=()=>{this._els.editModal.newDatasetRow.style.display="new-dataset"===this._els.editModal.dataset.value?"":"none"};this.bindAddNewPipelineBtn();for(let p of this._els.pipelines)this.bindPipeline(p);window.history.replaceState(null,"",window.location.pathname)}bindSocketUpdates(msg){let oldPipeline=this._els.pipelines.find(z=>z.id===msg.pipelineId);if(!oldPipeline){console.warn("pipeline-update for non-existing pipeline",msg);return}let x=document.createElement("div");x.innerHTML=msg.html;let c=x.querySelector(".pipeline-card"),newPipeline={id:Number(c.dataset.id),name:c.dataset.name||"",card:c,stepsToggleBtn:c.querySelector(".steps-toggle"),stepsToggleI:c.querySelector(".steps-toggle i"),dropdownMenu:c.querySelector(".pipeline-dropdown"),stepsSection:c.querySelector(".steps-section"),steps:Array.from(c.querySelectorAll(".steps-section tbody tr")).map(s=>({row:s,dropdownMenu:s.querySelector(".dropdown-menu"),progressEl:s.querySelector(".step-progress-td")}))};if(oldPipeline.stepsToggleI.classList.contains("fa-chevron-down")){newPipeline.stepsSection.style.display="none";newPipeline.stepsToggleI.classList.add("fa-chevron-down");newPipeline.stepsToggleI.classList.remove("fa-chevron-up");newPipeline.card.classList.remove("pipeline-card-expanded")}else{newPipeline.stepsSection.style.display="";newPipeline.stepsToggleI.classList.remove("fa-chevron-down");newPipeline.stepsToggleI.classList.add("fa-chevron-up");newPipeline.card.classList.add("pipeline-card-expanded")}if(oldPipeline.card.querySelector(".dropdown").classList.contains("show")){newPipeline.card.querySelector(".dropdown").classList.add("show");newPipeline.card.querySelector(".dropdown .btn").setAttribute("aria-expanded","true")}this.bindPipeline(newPipeline);global_ui_14.GlobalUI.setFriendlyDatesForContainer(newPipeline.card);oldPipeline.card.replaceWith(newPipeline.card);this._els.pipelines[this._els.pipelines.indexOf(oldPipeline)]=newPipeline}bindPipeline(p){p.stepsToggleBtn.onclick=ev=>{ev.preventDefault();let i=p.stepsToggleBtn.querySelector("i");if(i.classList.contains("fa-chevron-down")){p.stepsSection.style.display="";i.classList.remove("fa-chevron-down");i.classList.add("fa-chevron-up");p.card.classList.add("pipeline-card-expanded")}else{p.stepsSection.style.display="none";i.classList.add("fa-chevron-down");i.classList.remove("fa-chevron-up");p.card.classList.remove("pipeline-card-expanded")}};for(let d of Array.from(p.dropdownMenu.querySelectorAll("*[data-action]")).map(a=>a))d.onclick=async ev=>{ev.preventDefault();switch(d.dataset.action){case"run-pipeline":try{let resp=await this._studioApi.pipelines.runOrganizationPipeline(this._studioApi.organizationId,p.id);if(!resp.body||!resp.body.success)throw resp.body.error||resp.response.responseText;notify_51.Notify.notify("",'Started pipeline "'+p.name+'"',"top","center","far fa-check-circle","success")}catch(ex2){let ex=ex2;notify_51.Notify.alert("Failed to run pipeline",notify_51.Notify.extractMsg(ex),"danger")}break;case"edit-pipeline":try{let res=await this._studioApi.organizations.getOrganizationInfo(this._studioApi.organizationId);if(!res.body||!res.body.success||!res.body.organization)throw res.body&&res.body.error||res.response.responseText;await this._transformForm.bindUpdate(p.id,async pipeline=>{var _a;this._els.editModal.aceContent.setValue(JSON.stringify(pipeline.steps,null,4));this._els.editModal.aceContent.moveCursorToPosition({column:0,row:0});this._els.editModal.dataset.value=(null===(_a=pipeline.feedingIntoDataset)||void 0===_a?void 0:_a.dataset)||"";const users=this._notificationSettings.getUsers();this._els.editModal.emailRecipients.value=JSON.stringify(pipeline.emailRecipientUids);this._els.editModal.emailRecipientsLabel.textContent=pipeline.emailRecipientUids.length>0?pipeline.emailRecipientUids.map(x=>{var _a;return null===(_a=users.find(y=>y.id===x))||void 0===_a?void 0:_a.name}).join(", "):"No users selected"},data=>{location.href=location.pathname+"?updatedPipeline="+encodeURIComponent(data.name)});this._transformForm.showModal()}catch(ex2){let ex=ex2;notify_51.Notify.alert("Failed to get pipeline info",notify_51.Notify.extractMsg(ex),"danger")}break;case"delete":if(await notify_51.Notify.confirm('Deleting "'+p.name+'"',`Are you sure you want to delete "${p.name}"? This will not delete any stored data.`,"Yes, delete","question","danger"))try{let resp=await this._studioApi.pipelines.deleteOrganizationPipeline(this._studioApi.organizationId,p.id);if(!resp.body||!resp.body.success)throw resp.body&&resp.body.error||resp.response.statusText;location.search.indexOf("?")>-1?location.href=location.pathname+location.search+"&removedPipeline="+encodeURIComponent(p.name):location.href=location.pathname+"?removedPipeline="+encodeURIComponent(p.name)}catch(ex2){let ex=ex2;notify_51.Notify.alert("Failed to delete pipeline",notify_51.Notify.extractMsg(ex),"danger")}break}}}bindAddNewPipelineBtn(){this._els.addNewPipelineBtn&&(this._els.addNewPipelineBtn.onclick=async ev=>{ev.preventDefault();this._els.editModal.aceContent.setValue(JSON.stringify([],null,4));this._els.editModal.aceContent.moveCursorToPosition({column:0,row:0});await this._transformForm.bindCreate(void 0,data=>{location.href=location.pathname+"?addedPipeline="+encodeURIComponent(data.name)});if(this._studioApi.currentUser){this._els.editModal.emailRecipients.value=JSON.stringify([this._studioApi.currentUser.id]);this._els.editModal.emailRecipientsLabel.textContent=this._studioApi.currentUser.name}else this._els.editModal.emailRecipients.value=JSON.stringify([]);this._transformForm.showModal()})}async savePipeline(obj,saveBtn){saveBtn.textContent="Adding pipeline...";obj.steps=JSON.parse(this._els.editModal.aceContent.getValue());if(0===obj.steps.length)throw new Error("Pipeline has no steps");obj.emailRecipientUids=JSON.parse(this._els.editModal.emailRecipients.value);if("new-dataset"===this._els.editModal.dataset.value){if(!this._els.editModal.newDataset.value)throw new Error("New dataset should be set");obj.dataset=this._els.editModal.newDataset.value}else obj.dataset=this._els.editModal.dataset.value||void 0;let res=await this._studioApi.pipelines.createOrganizationPipeline(this._studioApi.organizationId,obj);if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText}async updatePipeline(id,obj,saveBtn){saveBtn.textContent="Updating pipeline...";obj.steps=JSON.parse(this._els.editModal.aceContent.getValue());if(0===obj.steps.length)throw new Error("Pipeline has no steps");obj.emailRecipientUids=JSON.parse(this._els.editModal.emailRecipients.value);if("new-dataset"===this._els.editModal.dataset.value){if(!this._els.editModal.newDataset.value)throw new Error("New dataset should be set");obj.dataset=this._els.editModal.newDataset.value}else obj.dataset=this._els.editModal.dataset.value||void 0;let res=await this._studioApi.pipelines.updateOrganizationPipeline(this._studioApi.organizationId,id,obj);if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText}async fetchPipeline(id){let res=await this._studioApi.pipelines.getOrganizationPipeline(this._studioApi.organizationId,id);if(!res.body||!res.body.success||!res.body.pipeline)throw res.body&&res.body.error||res.response.responseText;return res.body.pipeline}}}));define("client/organization/pages/organization-dsp-ui",["require","exports","client/notify","client/organization/components/form-binding"],(function(require,exports,notify_52,form_binding_5){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationDspUi=void 0;exports.OrganizationDspUi=class{constructor(studioApi){this._addDsp={addBtn:document.querySelector("#add-dsp-btn"),modal:document.querySelector("#add-dsp-block"),docker:document.querySelector("#input-add-dsp-docker")};this._studioApi=studioApi;this._studioApi.socket.on("dsp-changed",this.onDspChanged.bind(this));this._dspForm=new form_binding_5.FormBinding(this._addDsp.modal,{createTitle:async()=>"Add a new DSP block",updateTitle:async s=>"Edit DSP block",create:this.saveBlock.bind(this),update:this.updateBlock.bind(this),fetch:this.fetchBlock.bind(this),createErrorText:"Failed to add DSP block",updateErrorText:"Failed to update DSP block",createSaveBtnText:"Add DSP block",updateSaveBtnText:"Update DSP block"});this._addDsp.addBtn&&(this._addDsp.addBtn.onclick=async ev=>{ev.preventDefault();await this._dspForm.bindCreate(async()=>{this._addDsp.docker.dataset.dockerContainer="";this._addDsp.docker.readOnly=!1},data=>{location.href=location.pathname+"?createdBlock="+encodeURIComponent(data.name)});this._dspForm.showModal()});this._addDsp.docker.onclick=()=>{if(this._addDsp.docker.readOnly){this._addDsp.docker.value=this._addDsp.docker.dataset.dockerContainer||"";this._addDsp.docker.readOnly=!1}};for(let r of Array.from(document.querySelectorAll(".dsp-option")))this.bindDspDropdown(r);let params=location.search.slice(1).split("&").reduce((curr,x)=>{let p=x.split("=");curr[p[0]]=decodeURIComponent(p[1]);return curr},{});params.createdBlock&&notify_52.Notify.notify("",`Added DSP block ("${params.createdBlock}")`,"top","center","far fa-check-circle","success");params.removedBlock&&notify_52.Notify.notify("",`Deleted DSP block ("${params.removedBlock}")`,"top","center","far fa-check-circle","success");params.updatedBlock&&notify_52.Notify.notify("",`Updated DSP block ("${params.updatedBlock}")`,"top","center","far fa-check-circle","success");window.history.replaceState(null,"",window.location.pathname)}bindDspDropdown(r){console.log("bindDspDropdown",r);for(let d of Array.from(r.querySelectorAll("*[data-action]")).map(a=>a)){let id=Number(r.dataset.id);d.onclick=async ev=>{ev.preventDefault();switch(d.dataset.action){case"delete":if(await notify_52.Notify.confirm('Removing "'+r.dataset.name+'"',`Are you sure you want to delete "${r.dataset.name}"?`,"Yes, remove","question","danger")&&r.dataset.name)try{let resp=await this._studioApi.blocks.deleteOrganizationDspBlock(this._studioApi.organizationId,id);if(!resp.body||!resp.body.success)throw resp.body&&resp.body.error||resp.response.statusText;location.href=location.pathname+"?removedBlock="+encodeURIComponent(r.dataset.name)}catch(ex2){let ex=ex2;notify_52.Notify.alert("Failed to remove dsp block",notify_52.Notify.extractMsg(ex),"danger")}break;case"edit-block":try{await this._dspForm.bindUpdate(id,async b=>{if(b.dockerContainerManagedByEdgeImpulse){this._addDsp.docker.value="Managed through the Edge Impulse CLI, click to edit";this._addDsp.docker.readOnly=!0;this._addDsp.docker.dataset.dockerContainer=b.dockerContainer}else{this._addDsp.docker.value=b.dockerContainer;this._addDsp.docker.readOnly=!1;this._addDsp.docker.dataset.dockerContainer=""}},block=>{location.href=location.pathname+"?updatedBlock="+encodeURIComponent(block.name||"")});this._dspForm.showModal()}catch(ex2){let ex=ex2;notify_52.Notify.alert("Failed to fetch block",notify_52.Notify.extractMsg(ex),"danger")}break;case"retry":try{let block=await this.fetchBlock(id),res=await this._studioApi.blocks.retryOrganizationDspBlock(this._studioApi.organizationId,id);if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText;notify_52.Notify.notify("",`Retried DSP block ("${block.name}")`,"top","center","far fa-check-circle","success")}catch(ex2){let ex=ex2;notify_52.Notify.alert("Failed to retry block",notify_52.Notify.extractMsg(ex),"danger")}}this._studioApi.analytics.event("click",{event_category:"transform-action",event_label:d.dataset.action})}}}async saveBlock(obj,saveBtn){saveBtn.textContent="Adding dsp block...";if("number"==typeof obj.limitsCpu&&"number"==typeof obj.requestsCpu&&obj.requestsCpu>obj.limitsCpu)throw new Error("Compute limit should be higher or equal than compute request");if("number"==typeof obj.limitsMemory&&"number"==typeof obj.requestsMemory&&obj.requestsMemory>obj.limitsMemory)throw new Error("Memory limit should be higher or equal than memory request");if(typeof obj.limitsCpu!=typeof obj.limitsMemory)throw new Error("If setting compute limit, then both CPU and memory need to be set");if(typeof obj.requestsCpu!=typeof obj.requestsMemory)throw new Error("If setting compute requests, then both CPU and memory need to be set");let res=await this._studioApi.blocks.addOrganizationDspBlock(this._studioApi.organizationId,obj);if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText}async updateBlock(id,obj,saveBtn){saveBtn.textContent="Updating dsp block...";if("number"==typeof obj.limitsCpu&&"number"==typeof obj.requestsCpu&&obj.requestsCpu>obj.limitsCpu)throw new Error("Compute limit should be higher or equal than compute request");if("number"==typeof obj.limitsMemory&&"number"==typeof obj.requestsMemory&&obj.requestsMemory>obj.limitsMemory)throw new Error("Memory limit should be higher or equal than memory request");if(typeof obj.limitsCpu!=typeof obj.limitsMemory)throw new Error("If setting compute limit, then both CPU and memory need to be set");if(typeof obj.requestsCpu!=typeof obj.requestsMemory)throw new Error("If setting compute requests, then both CPU and memory need to be set");this._addDsp.docker.readOnly&&delete obj.dockerContainer;let res=await this._studioApi.blocks.updateOrganizationDspBlock(this._studioApi.organizationId,id,obj);if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText}async fetchBlock(id){let res=await this._studioApi.blocks.listOrganizationDspBlocks(this._studioApi.organizationId);if(!res.body||!res.body.success||!res.body.dspBlocks)throw res.body&&res.body.error||res.response.responseText;let b=res.body.dspBlocks.find(x=>x.id===id);if(!b)throw new Error("Failed to find dsp block");return b}onDspChanged(msg){console.log("onDspChanged",msg);let connectedEl=document.querySelector(`tr[data-id="${msg.dspId}"] .key-connected`);if(!connectedEl)return;let shouldShowRetry="error"===msg.status,retryEl=document.querySelector(`tr[data-id="${msg.dspId}"] *[data-action="retry"]`);retryEl&&(retryEl.style.display=shouldShowRetry?"":"none");if("in-progress"===msg.status){connectedEl.innerHTML='<i class="fas fa-spinner spin-animation" title="Wait a moment, we\'re spinning up a container for this DSP block..."></i>';connectedEl.title="Wait a moment, we're spinning up a container for this DSP block...";return}let span=document.createElement("span");span.classList.add("badge","badge-dot","connection-status");let i=document.createElement("i");if("success"===msg.status){i.classList.add("bg-green");span.title=connectedEl.title="Connected"}else{i.classList.add("bg-red");span.title=connectedEl.title="Error: "+msg.error}connectedEl.innerHTML="";span.appendChild(i);connectedEl.appendChild(span)}}}));define("client/organization/pages/organization-transfer-learning-ui",["require","exports","client/notify","client/organization/components/form-binding"],(function(require,exports,notify_53,form_binding_6){Object.defineProperty(exports,"__esModule",{value:!0});exports.OrganizationTransferLearningUi=void 0;exports.OrganizationTransferLearningUi=class{constructor(studioApi){this._addTl={addBtn:document.querySelector("#add-tl-btn"),modal:document.querySelector("#add-tl-block"),docker:document.querySelector("#input-add-tl-docker"),operatesOn:document.querySelector("#input-add-tl-operates-on"),objectDetectionLastLayerSection:document.querySelector("#input-add-tl-object-detection-last-layer-section")};this._studioApi=studioApi;this._tlForm=new form_binding_6.FormBinding(this._addTl.modal,{createTitle:async()=>"Add a new Transfer Learning block",updateTitle:async s=>"Edit Transfer Learning block",create:this.saveBlock.bind(this),update:this.updateBlock.bind(this),fetch:this.fetchBlock.bind(this),createErrorText:"Failed to add Transfer Learning block",updateErrorText:"Failed to update Transfer Learning block",createSaveBtnText:"Add Transfer Learning block",updateSaveBtnText:"Update Transfer Learning block"});this._addTl.addBtn&&(this._addTl.addBtn.onclick=async ev=>{ev.preventDefault();await this._tlForm.bindCreate(async()=>{this._addTl.docker.dataset.dockerContainer="";this._addTl.docker.readOnly=!1;this._addTl.objectDetectionLastLayerSection.style.display="none"},data=>{location.href=location.pathname+"?createdBlock="+encodeURIComponent(data.name)});this._tlForm.showModal()});this._addTl.docker.onclick=()=>{if(this._addTl.docker.readOnly){this._addTl.docker.value=this._addTl.docker.dataset.dockerContainer||"";this._addTl.docker.readOnly=!1}};this._addTl.operatesOn.oninput=()=>{this._addTl.objectDetectionLastLayerSection.style.display="object_detection"===this._addTl.operatesOn.value?"":"none"};for(let r of Array.from(document.querySelectorAll(".tl-option")))this.bindTlDropdown(r);let params=location.search.slice(1).split("&").reduce((curr,x)=>{let p=x.split("=");curr[p[0]]=decodeURIComponent(p[1]);return curr},{});params.createdBlock&&notify_53.Notify.notify("",`Added Transfer Learning block ("${params.createdBlock}")`,"top","center","far fa-check-circle","success");params.removedBlock&&notify_53.Notify.notify("",`Deleted Transfer Learning block ("${params.removedBlock}")`,"top","center","far fa-check-circle","success");params.updatedBlock&&notify_53.Notify.notify("",`Updated Transfer Learning block ("${params.updatedBlock}")`,"top","center","far fa-check-circle","success");window.history.replaceState(null,"",window.location.pathname)}bindTlDropdown(r){for(let d of Array.from(r.querySelectorAll("*[data-action]")).map(a=>a)){let id=Number(r.dataset.id);d.onclick=async ev=>{ev.preventDefault();switch(d.dataset.action){case"delete":if(await notify_53.Notify.confirm('Removing "'+r.dataset.name+'"',`Are you sure you want to delete "${r.dataset.name}"?`,"Yes, remove","question","danger")&&r.dataset.name)try{let resp=await this._studioApi.blocks.deleteOrganizationTransferLearningBlock(this._studioApi.organizationId,id);if(!resp.body||!resp.body.success)throw resp.body&&resp.body.error||resp.response.statusText;location.href=location.pathname+"?removedBlock="+encodeURIComponent(r.dataset.name)}catch(ex2){let ex=ex2;notify_53.Notify.alert("Failed to remove Transfer Learning block",notify_53.Notify.extractMsg(ex),"danger")}break;case"edit-block":try{await this._tlForm.bindUpdate(id,async b=>{if(b.dockerContainerManagedByEdgeImpulse){this._addTl.docker.value="Managed through the Edge Impulse CLI, click to edit";this._addTl.docker.readOnly=!0;this._addTl.docker.dataset.dockerContainer=b.dockerContainer}else{this._addTl.docker.value=b.dockerContainer;this._addTl.docker.readOnly=!1;this._addTl.docker.dataset.dockerContainer=""}this._addTl.objectDetectionLastLayerSection.style.display="object_detection"===b.operatesOn?"":"none"},block=>{location.href=location.pathname+"?updatedBlock="+encodeURIComponent(block.name||"")});this._tlForm.showModal()}catch(ex2){let ex=ex2;notify_53.Notify.alert("Failed to fetch block",notify_53.Notify.extractMsg(ex),"danger")}}this._studioApi.analytics.event("click",{event_category:"transform-action",event_label:d.dataset.action})}}}async saveBlock(obj,saveBtn){saveBtn.textContent="Adding Transfer Learning block...";let res=await this._studioApi.blocks.addOrganizationTransferLearningBlock(this._studioApi.organizationId,obj);if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText}async updateBlock(id,obj,saveBtn){saveBtn.textContent="Updating Transfer Learning block...";this._addTl.docker.readOnly&&delete obj.dockerContainer;let res=await this._studioApi.blocks.updateOrganizationTransferLearningBlock(this._studioApi.organizationId,id,obj);if(!res.body||!res.body.success)throw res.body&&res.body.error||res.response.responseText}async fetchBlock(id){let res=await this._studioApi.blocks.listOrganizationTransferLearningBlocks(this._studioApi.organizationId);if(!res.body||!res.body.success||!res.body.transferLearningBlocks)throw res.body&&res.body.error||res.response.responseText;let b=res.body.transferLearningBlocks.find(x=>x.id===id);if(!b)throw new Error("Failed to find dsp block");return b}}}));define("client/init",["require","exports","client/project/components/device-api","client/project/pages/device-ui","client/project/pages/acquisition-ui","client/project/pages/dsp-ui","client/global-ui","client/project/pages/training-keras-ui","client/project/pages/feature-generation-ui","client/project/pages/classification-ui","client/project/pages/deployment-ui","client/forms/select-project-ui","client/project/pages/create-impulse-ui","client/project/pages/training-anomaly-ui","client/project/pages/validation-ui","client/studio-api","shared/viewmodels/init","client/project/pages/dashboard-ui","client/forms/resend-activation-ui","client/project/pages/retrain-ui","client/google-analytics","client/forms/profile-ui","client/project/pages/keys-ui","client/project/pages/export-ui","client/organization/pages/organization-keys-ui","client/organization/pages/organization-portals-ui","client/organization/pages/organization-users-ui","client/organization/pages/organization-buckets-ui","client/organization/pages/organization-data-ui","client/organization/pages/organization-create-project-ui","client/organization/pages/organization-dashboard-ui","client/project/components/add-device-wizard","client/organization/pages/organization-transform-ui","client/organization/pages/organization-create-project-details-ui","client/organization/pages/organization-create-project-list-ui","client/project/pages/upload-ui","client/project/pages/version-ui","client/project/pages/restore-ui","client/organization/pages/organization-deploy-ui","client/upload-portal/upload-portal-ui","client/project/pages/tuner-ui","client/api-definition/index","client/project/components/notes-ui","client/project/pages/label-object-detection-ui","client/forms/select-project-third-party-ui","client/organization/pages/organization-projects-ui","client/project/pages/application-testing-ui","client/organization/pages/organization-pipelines-ui","client/organization/pages/organization-dsp-ui","client/organization/pages/organization-transfer-learning-ui"],(function(require,exports,device_api_1,device_ui_1,acquisition_ui_1,dsp_ui_1,global_ui_15,training_keras_ui_1,feature_generation_ui_1,classification_ui_1,deployment_ui_1,select_project_ui_1,create_impulse_ui_1,training_anomaly_ui_1,validation_ui_1,studio_api_4,init_1,dashboard_ui_1,resend_activation_ui_2,retrain_ui_1,google_analytics_1,profile_ui_1,keys_ui_1,export_ui_1,organization_keys_ui_1,organization_portals_ui_1,organization_users_ui_1,organization_buckets_ui_1,organization_data_ui_1,organization_create_project_ui_1,organization_dashboard_ui_1,add_device_wizard_1,organization_transform_ui_1,organization_create_project_details_ui_1,organization_create_project_list_ui_1,upload_ui_1,version_ui_1,restore_ui_1,organization_deploy_ui_1,upload_portal_ui_1,tuner_ui_1,api_definition_9,notes_ui_1,label_object_detection_ui_1,select_project_third_party_ui_1,organization_projects_ui_1,application_testing_ui_1,organization_pipelines_ui_1,organization_dsp_ui_1,organization_transfer_learning_ui_1){Object.defineProperty(exports,"__esModule",{value:!0});exports.default=async function(optionsStr){let options=JSON.parse(decodeURIComponent(optionsStr));console.log("Hello world from Edge Impulse","options",options);options.sentryDSN&&"undefined"!=typeof Sentry&&Sentry.init({dsn:options.sentryDSN,environment:options.sentryEnvironment,tracesSampleRate:.5,ignoreErrors:["top.GLOBALS","originalCreateNotification","canvas.contentDocument","MyApp_RemoveAllHighlights","http://tt.epicplay.com","Can't find variable: ZiteReader","jigsaw is not defined","ComboSearch is not defined","http://loading.retry.widdit.com/","atomicFindClose","fb_xd_fragment","bmi_SafeAddOnload","EBCallBackMessageReceived","conduitPage","Non-Error promise rejection captured with keys"],denyUrls:[/graph\.facebook\.com/i,/connect\.facebook\.net\/en_US\/all\.js/i,/eatdifferent\.com\.woopra-ns\.com/i,/static\.woopra\.com\/js\/woopra\.js/i,/extensions\//i,/^chrome:\/\//i]});let globalUi=window.globalUi=new global_ui_15.GlobalUI;if(options)if(options.projectId){const opts=options,ga=new google_analytics_1.GoogleAnalyticsProject(opts.gaId,opts.userId,opts.projectId),socket=io.connect(location.protocol+"//"+location.host,{query:{token:opts.socketToken},transports:["websocket"]}),studioApi=new studio_api_4.StudioProjectApi(opts.projectId,opts.projectName,socket,ga,opts.staticAssetsPrefix,opts.baseUrl,opts.isAdmin,opts.isObjectDetection,opts.user);globalUi.initWithApi(opts.userId,studioApi);const device=new device_api_1.DeviceApi(studioApi,socket,ga,opts.connectedDevices);window.device=device;new add_device_wizard_1.AddDeviceWizard(studioApi,device,opts.gitCommitHash);ace.config.set("basePath","/ace");if(opts.errorPage)return;new notes_ui_1.NotesUi(studioApi);if(opts.pageType===init_1.PageType.Device){new device_ui_1.DeviceUI(studioApi,device)}else if(opts.pageType===init_1.PageType.Acquisition){window.aq=new acquisition_ui_1.AcquisitionUI(studioApi,device)}else if(opts.pageType===init_1.PageType.DSP){window.dsp=new dsp_ui_1.DSPUI(studioApi)}else if(opts.pageType===init_1.PageType.TrainingKeras){new training_keras_ui_1.TrainingKerasUI(studioApi)}else if(opts.pageType===init_1.PageType.FeatureGeneration){new feature_generation_ui_1.FeatureGenerationUI(studioApi)}else if(opts.pageType===init_1.PageType.Classification)window.cUI=new classification_ui_1.ClassificationUI(studioApi,device);else if(opts.pageType===init_1.PageType.Deployment)window.deplUI=new deployment_ui_1.DeploymentUI(studioApi);else if(opts.pageType===init_1.PageType.CreateImpulse)window.createUI=new create_impulse_ui_1.CreateImpulseUI(studioApi);else if(opts.pageType===init_1.PageType.TrainingAnomaly){new training_anomaly_ui_1.TrainingAnomalyUI(studioApi)}else if(opts.pageType===init_1.PageType.ModelValidation){new validation_ui_1.ValidationUi(studioApi)}else if(opts.pageType===init_1.PageType.ProjectDashboard){new dashboard_ui_1.DashboardUi(studioApi)}else if(opts.pageType===init_1.PageType.Retrain){new retrain_ui_1.RetrainUI(studioApi)}else if(opts.pageType===init_1.PageType.Keys){new keys_ui_1.KeysUi(studioApi)}else if(opts.pageType===init_1.PageType.Export){new export_ui_1.ExportUI(studioApi)}else if(opts.pageType===init_1.PageType.Upload){new upload_ui_1.UploadUi(studioApi)}else if(opts.pageType===init_1.PageType.Versions){new version_ui_1.VersionUI(studioApi)}else if(opts.pageType===init_1.PageType.Restore){new restore_ui_1.RestoreUI(studioApi)}else if(opts.pageType===init_1.PageType.Tuner){new tuner_ui_1.TunerUI(studioApi)}else if(opts.pageType===init_1.PageType.LabelObjectDetection){new label_object_detection_ui_1.LabelObjectDetectionUI(studioApi)}else if(opts.pageType===init_1.PageType.ApplicationTesting){new application_testing_ui_1.ApplicationTestingUI(studioApi)}}else if(options.authToken){let opts=options,portalApi=new api_definition_9.UploadPortalApi(location.origin+"/v1",void 0,{headers:{"x-token":opts.authToken}});if(opts.pageType===init_1.PageType.UploadPortal){new upload_portal_ui_1.UploadPortalUi(portalApi,opts.portalId)}}else if(options.organizationId){let opts=options,ga=new google_analytics_1.GoogleAnalyticsOrganization(opts.gaId,opts.userId,opts.organizationId);const socket=io.connect(location.protocol+"//"+location.host,{query:{token:opts.socketToken},transports:["websocket"]}),studioApi=new studio_api_4.StudioOrganizationApi(opts.organizationId,socket,ga,opts.staticAssetsPrefix,opts.baseUrl,opts.user);globalUi.initWithApi(opts.userId,studioApi);if(opts.pageType===init_1.PageType.OrganizationKeys){new organization_keys_ui_1.OrganizationKeysUi(studioApi)}if(opts.pageType===init_1.PageType.OrganizationPortals){new organization_portals_ui_1.OrganizationPortalsUi(studioApi)}else if(opts.pageType===init_1.PageType.OrganizationUsers){new organization_users_ui_1.OrganizationUsersUi(studioApi)}else if(opts.pageType===init_1.PageType.OrganizationBuckets){new organization_buckets_ui_1.OrganizationBucketsUi(studioApi)}else if(opts.pageType===init_1.PageType.OrganizationData){new organization_data_ui_1.OrganizationDataUI(studioApi)}else if(opts.pageType===init_1.PageType.OrganizationCreateProject){new organization_create_project_ui_1.OrganizationCreateProjectUi(studioApi)}else if(opts.pageType===init_1.PageType.OrganizationDashboard){new organization_dashboard_ui_1.OrganizationDashboardUi(studioApi)}else if(opts.pageType===init_1.PageType.OrganizationTransformation){new organization_transform_ui_1.OrganizationTransformUi(studioApi)}else if(opts.pageType===init_1.PageType.OrganizationCreateProjectDetails){new organization_create_project_details_ui_1.OrganizationCreateProjectDetailsUi(studioApi)}else if(opts.pageType===init_1.PageType.OrganizationCreateProjectList){new organization_create_project_list_ui_1.OrganizationCreateProjectListUi(studioApi)}else if(opts.pageType===init_1.PageType.OrganizationDeploy){new organization_deploy_ui_1.OrganizationDeployUi(studioApi)}else if(opts.pageType===init_1.PageType.OrganizationDsp){new organization_dsp_ui_1.OrganizationDspUi(studioApi)}else if(opts.pageType===init_1.PageType.OrganizationProjects){new organization_projects_ui_1.OrganizationProjectsUi(studioApi)}else if(opts.pageType===init_1.PageType.OrganizationDataPipelines){new organization_pipelines_ui_1.OrganizationPipelinesUi(studioApi)}else if(opts.pageType===init_1.PageType.OrganizationTransferLearning){new organization_transfer_learning_ui_1.OrganizationTransferLearningUi(studioApi)}}else{if(!options.userId){let opts=options;new google_analytics_1.GoogleAnalyticsPublic(opts.gaId);return}{let opts=options;new google_analytics_1.GoogleAnalyticsUser(opts.gaId,opts.userId);if(options.pageType===init_1.PageType.SelectProject){new select_project_ui_1.SelectProjectUI;return}if(options.pageType===init_1.PageType.SelectProjectThirdParty){new select_project_third_party_ui_1.SelectProjectThirdPartyUI;return}if(options.pageType===init_1.PageType.AccountActivation||options.pageType===init_1.PageType.SignupSuccessful){new resend_activation_ui_2.ResendActivationUI;return}if(options.pageType===init_1.PageType.Profile){new profile_ui_1.ProfileUi;return}}}else console.warn("Page without options!")}}));define("client/virtual-list",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.VirtualList=void 0;exports.VirtualList=class{constructor(config){this._config=config;this._width=config.containerWidthPx?config.containerWidthPx+"px":"100%";this._height=config.containerHeightPx?config.containerHeightPx+"px":"100%";this._itemHeight=config.itemHeightPx+"px";this._totalRows=config.totalRows;let totalHeight=config.itemHeightPx*this._totalRows;this._scroller=this.createScroller(totalHeight);this._container=this.createContainer(this._width,this._height);let lastRepaintY,screenItemsLen=config.containerHeightPx?Math.ceil(config.containerHeightPx/config.itemHeightPx):160,cachedItemsLen=3*screenItemsLen;this._renderChunk(this._container,0,cachedItemsLen/2);let maxBuffer=screenItemsLen*config.itemHeightPx;this._container.addEventListener("scroll",e=>{if(!e.target)return;e.preventDefault();let scrollTop=this._container.scrollTop,first=scrollTop/this._config.itemHeightPx-screenItemsLen;first=first<0?0:first;if(!lastRepaintY||Math.abs(scrollTop-lastRepaintY)>maxBuffer){this._renderChunk(this._container,first,cachedItemsLen);lastRepaintY=scrollTop}})}createContainer(w,h){let c=document.createElement("div");c.style.width=w;c.style.height=h;c.style.overflow="auto";c.style.position="relative";c.style.padding="0";c.classList.add("virtual-list-container");return c}createScroller(h){let scroller=document.createElement("div");scroller.style.opacity="0";scroller.style.position="absolute";scroller.style.top="0";scroller.style.left="0";scroller.style.width="1px";scroller.style.height=h+"px";scroller.classList.add("virtual-list-scroller");return scroller}_renderChunk(node,fromPos,howMany){let fragment=document.createDocumentFragment();fragment.appendChild(this._scroller);let finalItem=fromPos+howMany;finalItem>this._totalRows&&(finalItem=this._totalRows);for(let i=fromPos;i<finalItem;i++){let item=this._config.generatorFunction(i);item.classList.add("virtual-list-vrow");item.style.position="absolute";item.style.top=i*this._config.itemHeightPx+"px";item.style.height=this._itemHeight+"px";fragment.appendChild(item)}node.innerHTML="";node.appendChild(fragment)}}}));define("client/project/components/webserial/buffer",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0})}));
/*!
 * EventEmitter v5.2.9 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - https://oli.me.uk/
 * @preserve
 */!function(exports){function EventEmitter(){}var proto=EventEmitter.prototype,originalGlobalValue=exports.EventEmitter;function indexOfListener(listeners,listener){for(var i=listeners.length;i--;)if(listeners[i].listener===listener)return i;return-1}function alias(name){return function(){return this[name].apply(this,arguments)}}proto.getListeners=function(evt){var response,key,events=this._getEvents();if(evt instanceof RegExp){response={};for(key in events)events.hasOwnProperty(key)&&evt.test(key)&&(response[key]=events[key])}else response=events[evt]||(events[evt]=[]);return response};proto.flattenListeners=function(listeners){var i,flatListeners=[];for(i=0;i<listeners.length;i+=1)flatListeners.push(listeners[i].listener);return flatListeners};proto.getListenersAsObject=function(evt){var response,listeners=this.getListeners(evt);listeners instanceof Array&&((response={})[evt]=listeners);return response||listeners};proto.addListener=function(evt,listener){if(!function isValidListener(listener){return"function"==typeof listener||listener instanceof RegExp||!(!listener||"object"!=typeof listener)&&isValidListener(listener.listener)}(listener))throw new TypeError("listener must be a function");var key,listeners=this.getListenersAsObject(evt),listenerIsWrapped="object"==typeof listener;for(key in listeners)listeners.hasOwnProperty(key)&&-1===indexOfListener(listeners[key],listener)&&listeners[key].push(listenerIsWrapped?listener:{listener:listener,once:!1});return this};proto.on=alias("addListener");proto.addOnceListener=function(evt,listener){return this.addListener(evt,{listener:listener,once:!0})};proto.once=alias("addOnceListener");proto.defineEvent=function(evt){this.getListeners(evt);return this};proto.defineEvents=function(evts){for(var i=0;i<evts.length;i+=1)this.defineEvent(evts[i]);return this};proto.removeListener=function(evt,listener){var index,key,listeners=this.getListenersAsObject(evt);for(key in listeners)listeners.hasOwnProperty(key)&&-1!==(index=indexOfListener(listeners[key],listener))&&listeners[key].splice(index,1);return this};proto.off=alias("removeListener");proto.addListeners=function(evt,listeners){return this.manipulateListeners(!1,evt,listeners)};proto.removeListeners=function(evt,listeners){return this.manipulateListeners(!0,evt,listeners)};proto.manipulateListeners=function(remove,evt,listeners){var i,value,single=remove?this.removeListener:this.addListener,multiple=remove?this.removeListeners:this.addListeners;if("object"!=typeof evt||evt instanceof RegExp){i=listeners.length;for(;i--;)single.call(this,evt,listeners[i])}else for(i in evt)evt.hasOwnProperty(i)&&(value=evt[i])&&("function"==typeof value?single.call(this,i,value):multiple.call(this,i,value));return this};proto.removeEvent=function(evt){var key,type=typeof evt,events=this._getEvents();if("string"===type)delete events[evt];else if(evt instanceof RegExp)for(key in events)events.hasOwnProperty(key)&&evt.test(key)&&delete events[key];else delete this._events;return this};proto.removeAllListeners=alias("removeEvent");proto.emitEvent=function(evt,args){var listeners,listener,i,key,listenersMap=this.getListenersAsObject(evt);for(key in listenersMap)if(listenersMap.hasOwnProperty(key)){listeners=listenersMap[key].slice(0);for(i=0;i<listeners.length;i++){!0===(listener=listeners[i]).once&&this.removeListener(evt,listener.listener);listener.listener.apply(this,args||[])===this._getOnceReturnValue()&&this.removeListener(evt,listener.listener)}}return this};proto.trigger=alias("emitEvent");proto.emit=function(evt){var args=Array.prototype.slice.call(arguments,1);return this.emitEvent(evt,args)};proto.setOnceReturnValue=function(value){this._onceReturnValue=value;return this};proto._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue};proto._getEvents=function(){return this._events||(this._events={})};EventEmitter.noConflict=function(){exports.EventEmitter=originalGlobalValue;return EventEmitter};if("function"==typeof define&&define.amd)define("shared/daemon/events",[],(function(){EventEmitter.EventEmitter=EventEmitter;return EventEmitter}));else if("object"==typeof module&&module.exports){EventEmitter.EventEmitter=EventEmitter;module.exports=EventEmitter}else exports.EventEmitter=EventEmitter}("undefined"!=typeof window?window:this||{});define("shared/UserError",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.UserError=void 0;class UserError extends Error{constructor(m){super(m);Object.setPrototypeOf(this,UserError.prototype)}}exports.UserError=UserError}));define("shared/utils",["require","exports"],(function(require,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.attempt=exports.wait=exports.daysFromNow=exports.batchFromGenerator=exports.addTrailingSlash=exports.removeLeadingSlash=exports.shuffle=exports.indexBy=void 0;exports.indexBy=function(arr,key){const index={};for(const e of arr)index[key(e)]=e;return index};exports.shuffle=function(arr){const result=[...arr];for(let i=result.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[result[i],result[j]]=[result[j],result[i]]}return result};exports.removeLeadingSlash=function(path){return path.replace(/^\//g,"")};exports.addTrailingSlash=function(path){return path.endsWith("/")?path:path+"/"};exports.batchFromGenerator=function(generator,batchSize){return __asyncGenerator(this,arguments,(function*(){var e_1,_a;let batch=[];try{for(var generator_1_1,generator_1=__asyncValues(generator);!(generator_1_1=yield __await(generator_1.next())).done;){const item=generator_1_1.value;batch.push(item);if(batch.length===batchSize){yield yield __await(batch);batch=[]}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{generator_1_1&&!generator_1_1.done&&(_a=generator_1.return)&&(yield __await(_a.call(generator_1)))}finally{if(e_1)throw e_1.error}}batch.length>0&&(yield yield __await(batch))}))};exports.daysFromNow=function(days){return new Date((new Date).getTime()-864e5*days)};async function wait(ms){return new Promise(resolve=>{setTimeout(resolve,ms)})}exports.wait=wait;exports.attempt=async function(numAttempts,delay,action,errorHandler){let attempts=numAttempts;try{for(;attempts>0;){if(await action())return!0;await wait(delay);attempts--}}catch(err){errorHandler(err);return!1}return!1}}));